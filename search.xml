<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>1-ä¸¤æ•°ä¹‹å’Œ(Two Sum)</title>
      <link href="/post/algorithm/1-liang-shu-zhi-he/"/>
      <url>/post/algorithm/1-liang-shu-zhi-he/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åŸæ–‡é“¾æ¥: <a href="https://leetcode-cn.com/problems/two-sum">https://leetcode-cn.com/problems/two-sum</a></p></blockquote><h2 id="è‹±æ–‡åŸæ–‡"><a href="#è‹±æ–‡åŸæ–‡" class="headerlink" title="è‹±æ–‡åŸæ–‡"></a>è‹±æ–‡åŸæ–‡</h2><div><p>Given an array of integers <code>nums</code>&nbsp;and an integer <code>target</code>, return <em>indices of the two numbers such that they add up to <code>target</code></em>.</p><p>You may assume that each input would have <strong><em>exactly</em> one solution</strong>, and you may not use the <em>same</em> element twice.</p><p>You can return the answer in any order.</p><p>&nbsp;</p><p><strong>Example 1:</strong></p><pre><strong>Input:</strong> nums = [2,7,11,15], target = 9<strong>Output:</strong> [0,1]<strong>Output:</strong> Because nums[0] + nums[1] == 9, we return [0, 1].</pre><p><strong>Example 2:</strong></p><pre><strong>Input:</strong> nums = [3,2,4], target = 6<strong>Output:</strong> [1,2]</pre><p><strong>Example 3:</strong></p><pre><strong>Input:</strong> nums = [3,3], target = 6<strong>Output:</strong> [0,1]</pre><p>&nbsp;</p><p><strong>Constraints:</strong></p><ul>    <li><code>2 &lt;= nums.length &lt;= 10<sup>4</sup></code></li>    <li><code>-10<sup>9</sup> &lt;= nums[i] &lt;= 10<sup>9</sup></code></li>    <li><code>-10<sup>9</sup> &lt;= target &lt;= 10<sup>9</sup></code></li>    <li><strong>Only one valid answer exists.</strong></li></ul><p>&nbsp;</p><strong>Follow-up:&nbsp;</strong>Can you come up with an algorithm that is less than&nbsp;<code>O(n<sup>2</sup>)&nbsp;</code>time complexity?</div><h2 id="ä¸­æ–‡é¢˜ç›®"><a href="#ä¸­æ–‡é¢˜ç›®" class="headerlink" title="ä¸­æ–‡é¢˜ç›®"></a>ä¸­æ–‡é¢˜ç›®</h2><div><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code>Â å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ <code>target</code>ï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º <strong>å’Œä¸ºç›®æ ‡å€¼ </strong><em><code>target</code></em>Â  çš„é‚£Â <strong>ä¸¤ä¸ª</strong>Â æ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚</p><p>ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ åœ¨ç­”æ¡ˆé‡Œä¸èƒ½é‡å¤å‡ºç°ã€‚</p><p>ä½ å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç­”æ¡ˆã€‚</p><p>Â </p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><pre><strong>è¾“å…¥ï¼š</strong>nums = [2,7,11,15], target = 9<strong>è¾“å‡ºï¼š</strong>[0,1]<strong>è§£é‡Šï¼š</strong>å› ä¸º nums[0] + nums[1] == 9 ï¼Œè¿”å› [0, 1] ã€‚</pre><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><pre><strong>è¾“å…¥ï¼š</strong>nums = [3,2,4], target = 6<strong>è¾“å‡ºï¼š</strong>[1,2]</pre><p><strong>ç¤ºä¾‹ 3ï¼š</strong></p><pre><strong>è¾“å…¥ï¼š</strong>nums = [3,3], target = 6<strong>è¾“å‡ºï¼š</strong>[0,1]</pre><p>Â </p><p><strong>æç¤ºï¼š</strong></p><ul>    <li><code>2 <= nums.length <= 10<sup>4</sup></code></li>    <li><code>-10<sup>9</sup> <= nums[i] <= 10<sup>9</sup></code></li>    <li><code>-10<sup>9</sup> <= target <= 10<sup>9</sup></code></li>    <li><strong>åªä¼šå­˜åœ¨ä¸€ä¸ªæœ‰æ•ˆç­”æ¡ˆ</strong></li></ul><p><strong>è¿›é˜¶ï¼š</strong>ä½ å¯ä»¥æƒ³å‡ºä¸€ä¸ªæ—¶é—´å¤æ‚åº¦å°äº <code>O(n<sup>2</sup>)</code> çš„ç®—æ³•å—ï¼Ÿ</p></div><h2 id="é€šè¿‡ä»£ç "><a href="#é€šè¿‡ä»£ç " class="headerlink" title="é€šè¿‡ä»£ç "></a>é€šè¿‡ä»£ç </h2><RecoDemo></RecoDemo><h2 id="é«˜èµé¢˜è§£"><a href="#é«˜èµé¢˜è§£" class="headerlink" title="é«˜èµé¢˜è§£"></a>é«˜èµé¢˜è§£</h2><h3 id="ğŸ“º-è§†é¢‘é¢˜è§£"><a href="#ğŸ“º-è§†é¢‘é¢˜è§£" class="headerlink" title="ğŸ“º è§†é¢‘é¢˜è§£"></a>ğŸ“º è§†é¢‘é¢˜è§£</h3><p><img src="4547de8a-5963-4caf-9281-c22ee751ab12" class="lazyload placeholder" data-srcset="4547de8a-5963-4caf-9281-c22ee751ab12" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="1.ä¸¤æ•°ä¹‹å’Œ.mp4"></p><h3 id="ğŸ“–-æ–‡å­—é¢˜è§£"><a href="#ğŸ“–-æ–‡å­—é¢˜è§£" class="headerlink" title="ğŸ“– æ–‡å­—é¢˜è§£"></a>ğŸ“– æ–‡å­—é¢˜è§£</h3><h4 id="æ–¹æ³•ä¸€ï¼šæš´åŠ›æšä¸¾"><a href="#æ–¹æ³•ä¸€ï¼šæš´åŠ›æšä¸¾" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæš´åŠ›æšä¸¾"></a>æ–¹æ³•ä¸€ï¼šæš´åŠ›æšä¸¾</h4><p><strong>æ€è·¯åŠç®—æ³•</strong></p><p>æœ€å®¹æ˜“æƒ³åˆ°çš„æ–¹æ³•æ˜¯æšä¸¾æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªæ•° <code>x</code>ï¼Œå¯»æ‰¾æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨ <code>target - x</code>ã€‚</p><p>å½“æˆ‘ä»¬ä½¿ç”¨éå†æ•´ä¸ªæ•°ç»„çš„æ–¹å¼å¯»æ‰¾ <code>target - x</code> æ—¶ï¼Œéœ€è¦æ³¨æ„åˆ°æ¯ä¸€ä¸ªä½äº <code>x</code> ä¹‹å‰çš„å…ƒç´ éƒ½å·²ç»å’Œ <code>x</code> åŒ¹é…è¿‡ï¼Œå› æ­¤ä¸éœ€è¦å†è¿›è¡ŒåŒ¹é…ã€‚è€Œæ¯ä¸€ä¸ªå…ƒç´ ä¸èƒ½è¢«ä½¿ç”¨ä¸¤æ¬¡ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦åœ¨ <code>x</code> åé¢çš„å…ƒç´ ä¸­å¯»æ‰¾ <code>target - x</code>ã€‚</p><p><strong>ä»£ç </strong></p><pre class="line-numbers language-Java" data-language="Java"><div class="caption"><span>[sol1-Java]</span></div><code class="language-Java">class Solution &#123;    public int[] twoSum(int[] nums, int target) &#123;        int n &#x3D; nums.length;        for (int i &#x3D; 0; i &lt; n; ++i) &#123;            for (int j &#x3D; i + 1; j &lt; n; ++j) &#123;                if (nums[i] + nums[j] &#x3D;&#x3D; target) &#123;                    return new int[]&#123;i, j&#125;;                &#125;            &#125;        &#125;        return new int[0];    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-C++" data-language="C++"><div class="caption"><span>[sol1-C++]</span></div><code class="language-C++">class Solution &#123;public:    vector&lt;int&gt; twoSum(vector&lt;int&gt;&amp; nums, int target) &#123;        int n &#x3D; nums.size();        for (int i &#x3D; 0; i &lt; n; ++i) &#123;            for (int j &#x3D; i + 1; j &lt; n; ++j) &#123;                if (nums[i] + nums[j] &#x3D;&#x3D; target) &#123;                    return &#123;i, j&#125;;                &#125;            &#125;        &#125;        return &#123;&#125;;    &#125;&#125;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-C" data-language="C"><div class="caption"><span>[sol1-C]</span></div><code class="language-C">int* twoSum(int* nums, int numsSize, int target, int* returnSize) &#123;    for (int i &#x3D; 0; i &lt; numsSize; ++i) &#123;        for (int j &#x3D; i + 1; j &lt; numsSize; ++j) &#123;            if (nums[i] + nums[j] &#x3D;&#x3D; target) &#123;                int* ret &#x3D; malloc(sizeof(int) * 2);                ret[0] &#x3D; i, ret[1] &#x3D; j;                *returnSize &#x3D; 2;                return ret;            &#125;        &#125;    &#125;    *returnSize &#x3D; 0;    return NULL;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-Python" data-language="Python"><div class="caption"><span>[sol1-Python3]</span></div><code class="language-Python">class Solution:    def twoSum(self, nums: List[int], target: int) -&gt; List[int]:        n &#x3D; len(nums)        for i in range(n):            for j in range(i + 1, n):                if nums[i] + nums[j] &#x3D;&#x3D; target:                    return [i, j]                return []<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-Golang" data-language="Golang"><div class="caption"><span>[sol1-Golang]</span></div><code class="language-Golang">func twoSum(nums []int, target int) []int &#123;    for i, x :&#x3D; range nums &#123;        for j :&#x3D; i + 1; j &lt; len(nums); j++ &#123;            if x+nums[j] &#x3D;&#x3D; target &#123;                return []int&#123;i, j&#125;            &#125;        &#125;    &#125;    return nil&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼š$O(N^2)$ï¼Œå…¶ä¸­ $N$ æ˜¯æ•°ç»„ä¸­çš„å…ƒç´ æ•°é‡ã€‚æœ€åæƒ…å†µä¸‹æ•°ç»„ä¸­ä»»æ„ä¸¤ä¸ªæ•°éƒ½è¦è¢«åŒ¹é…ä¸€æ¬¡ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ã€‚</p></li></ul><h4 id="æ–¹æ³•äºŒï¼šå“ˆå¸Œè¡¨"><a href="#æ–¹æ³•äºŒï¼šå“ˆå¸Œè¡¨" class="headerlink" title="æ–¹æ³•äºŒï¼šå“ˆå¸Œè¡¨"></a>æ–¹æ³•äºŒï¼šå“ˆå¸Œè¡¨</h4><p><strong>æ€è·¯åŠç®—æ³•</strong></p><p>æ³¨æ„åˆ°æ–¹æ³•ä¸€çš„æ—¶é—´å¤æ‚åº¦è¾ƒé«˜çš„åŸå› æ˜¯å¯»æ‰¾ <code>target - x</code> çš„æ—¶é—´å¤æ‚åº¦è¿‡é«˜ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ›´ä¼˜ç§€çš„æ–¹æ³•ï¼Œèƒ½å¤Ÿå¿«é€Ÿå¯»æ‰¾æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨ç›®æ ‡å…ƒç´ ã€‚å¦‚æœå­˜åœ¨ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾å‡ºå®ƒçš„ç´¢å¼•ã€‚</p><p>ä½¿ç”¨å“ˆå¸Œè¡¨ï¼Œå¯ä»¥å°†å¯»æ‰¾ <code>target - x</code> çš„æ—¶é—´å¤æ‚åº¦é™ä½åˆ°ä» $O(N)$ é™ä½åˆ° $O(1)$ã€‚</p><p>è¿™æ ·æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œå¯¹äºæ¯ä¸€ä¸ª <code>x</code>ï¼Œæˆ‘ä»¬é¦–å…ˆæŸ¥è¯¢å“ˆå¸Œè¡¨ä¸­æ˜¯å¦å­˜åœ¨ <code>target - x</code>ï¼Œç„¶åå°† <code>x</code> æ’å…¥åˆ°å“ˆå¸Œè¡¨ä¸­ï¼Œå³å¯ä¿è¯ä¸ä¼šè®© <code>x</code> å’Œè‡ªå·±åŒ¹é…ã€‚</p><p><strong>ä»£ç </strong></p><pre class="line-numbers language-Java" data-language="Java"><div class="caption"><span>[sol2-Java]</span></div><code class="language-Java">class Solution &#123;    public int[] twoSum(int[] nums, int target) &#123;        Map&lt;Integer, Integer&gt; hashtable &#x3D; new HashMap&lt;Integer, Integer&gt;();        for (int i &#x3D; 0; i &lt; nums.length; ++i) &#123;            if (hashtable.containsKey(target - nums[i])) &#123;                return new int[]&#123;hashtable.get(target - nums[i]), i&#125;;            &#125;            hashtable.put(nums[i], i);        &#125;        return new int[0];    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-C++" data-language="C++"><div class="caption"><span>[sol2-C++]</span></div><code class="language-C++">class Solution &#123;public:    vector&lt;int&gt; twoSum(vector&lt;int&gt;&amp; nums, int target) &#123;        unordered_map&lt;int, int&gt; hashtable;        for (int i &#x3D; 0; i &lt; nums.size(); ++i) &#123;            auto it &#x3D; hashtable.find(target - nums[i]);            if (it !&#x3D; hashtable.end()) &#123;                return &#123;it-&gt;second, i&#125;;            &#125;            hashtable[nums[i]] &#x3D; i;        &#125;        return &#123;&#125;;    &#125;&#125;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-C" data-language="C"><div class="caption"><span>[sol2-C]</span></div><code class="language-C">struct hashTable &#123;    int key;    int val;    UT_hash_handle hh;&#125;;struct hashTable* hashtable;struct hashTable* find(int ikey) &#123;    struct hashTable* tmp;    HASH_FIND_INT(hashtable, &amp;ikey, tmp);    return tmp;&#125;void insert(int ikey, int ival) &#123;    struct hashTable* it &#x3D; find(ikey);    if (it &#x3D;&#x3D; NULL) &#123;        struct hashTable* tmp &#x3D; malloc(sizeof(struct hashTable));        tmp-&gt;key &#x3D; ikey, tmp-&gt;val &#x3D; ival;        HASH_ADD_INT(hashtable, key, tmp);    &#125; else &#123;        it-&gt;val &#x3D; ival;    &#125;&#125;int* twoSum(int* nums, int numsSize, int target, int* returnSize) &#123;    hashtable &#x3D; NULL;    for (int i &#x3D; 0; i &lt; numsSize; i++) &#123;        struct hashTable* it &#x3D; find(target - nums[i]);        if (it !&#x3D; NULL) &#123;            int* ret &#x3D; malloc(sizeof(int) * 2);            ret[0] &#x3D; it-&gt;val, ret[1] &#x3D; i;            *returnSize &#x3D; 2;            return ret;        &#125;        insert(nums[i], i);    &#125;    *returnSize &#x3D; 0;    return NULL;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-Python" data-language="Python"><div class="caption"><span>[sol2-Python3]</span></div><code class="language-Python">class Solution:    def twoSum(self, nums: List[int], target: int) -&gt; List[int]:        hashtable &#x3D; dict()        for i, num in enumerate(nums):            if target - num in hashtable:                return [hashtable[target - num], i]            hashtable[nums[i]] &#x3D; i        return []<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-Golang" data-language="Golang"><div class="caption"><span>[sol2-Golang]</span></div><code class="language-Golang">func twoSum(nums []int, target int) []int &#123;    hashTable :&#x3D; map[int]int&#123;&#125;    for i, x :&#x3D; range nums &#123;        if p, ok :&#x3D; hashTable[target-x]; ok &#123;            return []int&#123;p, i&#125;        &#125;        hashTable[x] &#x3D; i    &#125;    return nil&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼š$O(N)$ï¼Œå…¶ä¸­ $N$ æ˜¯æ•°ç»„ä¸­çš„å…ƒç´ æ•°é‡ã€‚å¯¹äºæ¯ä¸€ä¸ªå…ƒç´  <code>x</code>ï¼Œæˆ‘ä»¬å¯ä»¥ $O(1)$ åœ°å¯»æ‰¾ <code>target - x</code>ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼š$O(N)$ï¼Œå…¶ä¸­ $N$ æ˜¯æ•°ç»„ä¸­çš„å…ƒç´ æ•°é‡ã€‚ä¸»è¦ä¸ºå“ˆå¸Œè¡¨çš„å¼€é”€ã€‚</p></li></ul><h2 id="ç»Ÿè®¡ä¿¡æ¯"><a href="#ç»Ÿè®¡ä¿¡æ¯" class="headerlink" title="ç»Ÿè®¡ä¿¡æ¯"></a>ç»Ÿè®¡ä¿¡æ¯</h2><table><thead><tr><th align="center">é€šè¿‡æ¬¡æ•°</th><th align="center">æäº¤æ¬¡æ•°</th><th align="center">ACæ¯”ç‡</th></tr></thead><tbody><tr><td align="center">2735230</td><td align="center">5240831</td><td align="center">52.2%</td></tr></tbody></table><h2 id="æäº¤å†å²"><a href="#æäº¤å†å²" class="headerlink" title="æäº¤å†å²"></a>æäº¤å†å²</h2><table><thead><tr><th align="center">æäº¤æ—¶é—´</th><th align="center">æäº¤ç»“æœ</th><th align="center">æ‰§è¡Œæ—¶é—´</th><th align="center">å†…å­˜æ¶ˆè€—</th><th align="center">è¯­è¨€</th></tr></thead></table><h2 id="ç›¸ä¼¼é¢˜ç›®"><a href="#ç›¸ä¼¼é¢˜ç›®" class="headerlink" title="ç›¸ä¼¼é¢˜ç›®"></a>ç›¸ä¼¼é¢˜ç›®</h2><table><thead><tr><th align="center">é¢˜ç›®</th><th align="center">éš¾åº¦</th></tr></thead><tbody><tr><td align="center"><a href="https://leetcode-cn.com/problems/3sum/">ä¸‰æ•°ä¹‹å’Œ</a></td><td align="center">ä¸­ç­‰</td></tr><tr><td align="center"><a href="https://leetcode-cn.com/problems/4sum/">å››æ•°ä¹‹å’Œ</a></td><td align="center">ä¸­ç­‰</td></tr><tr><td align="center"><a href="https://leetcode-cn.com/problems/two-sum-ii-input-array-is-sorted/">ä¸¤æ•°ä¹‹å’Œ II - è¾“å…¥æœ‰åºæ•°ç»„</a></td><td align="center">ç®€å•</td></tr><tr><td align="center"><a href="https://leetcode-cn.com/problems/two-sum-iii-data-structure-design/">ä¸¤æ•°ä¹‹å’Œ III - æ•°æ®ç»“æ„è®¾è®¡</a></td><td align="center">ç®€å•</td></tr><tr><td align="center"><a href="https://leetcode-cn.com/problems/subarray-sum-equals-k/">å’Œä¸º K çš„å­æ•°ç»„</a></td><td align="center">ä¸­ç­‰</td></tr><tr><td align="center"><a href="https://leetcode-cn.com/problems/two-sum-iv-input-is-a-bst/">ä¸¤æ•°ä¹‹å’Œ IV - è¾“å…¥ BST</a></td><td align="center">ç®€å•</td></tr><tr><td align="center"><a href="https://leetcode-cn.com/problems/two-sum-less-than-k/">å°äº K çš„ä¸¤æ•°ä¹‹å’Œ</a></td><td align="center">ç®€å•</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> ç®€å• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°ç»„ </tag>
            
            <tag> å“ˆå¸Œè¡¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¼˜é›…çš„è·å–åŠ¨æ€æ•°æ®</title>
      <link href="/post/pa-chong/you-ya-de-huo-qu-dong-tai-shu-ju/"/>
      <url>/post/pa-chong/you-ya-de-huo-qu-dong-tai-shu-ju/</url>
      
        <content type="html"><![CDATA[<h1 id="è·å–åŠ¨æ€åŠ è½½æ•°æ®çš„æ–¹æ³•"><a href="#è·å–åŠ¨æ€åŠ è½½æ•°æ®çš„æ–¹æ³•" class="headerlink" title="è·å–åŠ¨æ€åŠ è½½æ•°æ®çš„æ–¹æ³•"></a>è·å–åŠ¨æ€åŠ è½½æ•°æ®çš„æ–¹æ³•</h1><p>ç°åœ¨è¶Šæ¥è¶Šå¤šçš„ç½‘é¡µéƒ½å·²ç»æ¼”å˜ä¸º SPA é¡µé¢ï¼Œè€Œä¸”è¶Šæ¥è¶Šå¤šçš„ç½‘ç«™é‡‡ç”¨äº†å„ç§ JavaScript æ··æ·†å’ŒåŠ å¯†æŠ€æœ¯ï¼Œ</p><p>è¿™ä½¿å¾— JavaScript é€†å‘éš¾åº¦å˜å¾—å¾ˆå¤§ï¼ŒAjax æ¥å£æ¨¡æ‹Ÿçˆ¬å–ä¹Ÿå˜å¾—è¶Šå‘å›°éš¾ï¼Œå› æ­¤æ¨¡æ‹Ÿæµè§ˆå™¨çˆ¬å–ä¸å¤±ä¸ºä¸€ä¸ªä¸é”™çš„çˆ¬å–æ–¹æ¡ˆã€‚</p><p>Seleniumã€Pyppeteerã€Puppeteer ç­‰å¯ä»¥æ¨¡æ‹Ÿæµè§ˆå™¨æ¥è¿›è¡Œçˆ¬å–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Scrapy + Selenium å’Œ Pyppeteer æ¥å®ç°åŠ¨æ€çˆ¬å–ã€‚</p><p>Scrapy 2.0+ ä¸­æ”¯æŒäº†å¼‚æ­¥ <code>async</code> çš„ç‰¹æ€§ï¼Œåœ¨ Scrapy ä¸­æˆ‘ä»¬å·²ç»å¯ä»¥å®šä¹‰å¼‚æ­¥æ–¹æ³•æ¥å®ç°æ•°æ®çˆ¬å–å’Œå¤„ç†äº†ï¼Œè€Œ Pyppeteer åŒæ ·ä¹Ÿæ˜¯ä¸€ä¸ªæ”¯æŒå¼‚æ­¥çš„æµè§ˆå™¨æ¸²æŸ“åº“ã€‚</p><p>æˆ‘ä»¬æœ¬èŠ‚è¯¾å°±æ¥ä»‹ç»ä¸€ä¸‹ Scrapy å’Œ Pyppeteer çš„æ­£ç¡®å¯¹æ¥æ–¹å¼ã€‚</p><h2 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h2><p>æœ¬èŠ‚æˆ‘ä»¬å°±ç”¨å®ä¾‹æ¥è®²è§£ä¸€ä¸‹ Scrapy å’Œ Pyppeteer å®ç° JavaScript æ¸²æŸ“é¡µé¢æŠ“å–çš„æµç¨‹ã€‚</p><p>æœ¬èŠ‚ä½¿ç”¨çš„å®ä¾‹ç½‘ç«™ä¸º <a href="https://dynamic5.scrape.center/%EF%BC%8C%E8%BF%99%E6%98%AF%E4%B8%80%E4%B8%AA">https://dynamic5.scrape.center/ï¼Œè¿™æ˜¯ä¸€ä¸ª</a> JavaScript æ¸²æŸ“é¡µé¢ï¼Œå…¶å†…å®¹æ˜¯ä¸€æœ¬æœ¬çš„å›¾ä¹¦ä¿¡æ¯ã€‚</p><p>åŒæ—¶è¿™ä¸ªç½‘ç«™çš„é¡µé¢å¸¦æœ‰åˆ†é¡µåŠŸèƒ½ï¼Œåªéœ€è¦åœ¨ URL åŠ ä¸Š /page/ å’Œé¡µç å°±å¯ä»¥è·³è½¬åˆ°ä¸‹ä¸€é¡µï¼Œ</p><p>å¦‚ <a href="https://dynamic5.scrape.center/page/2">https://dynamic5.scrape.center/page/2</a> å°±æ˜¯ç¬¬äºŒé¡µå†…å®¹ï¼Œ<a href="https://dynamic5.scrape.center/page/3">https://dynamic5.scrape.center/page/3</a> å°±æ˜¯ç¬¬ä¸‰é¡µå†…å®¹ã€‚</p><p>é‚£æˆ‘ä»¬è¿™ä¸ªæ¡ˆä¾‹å°±æ¥è¯•ç€çˆ¬å–ä¸€ä¸‹å‰åé¡µçš„å›¾ä¹¦ä¿¡æ¯å§ã€‚</p><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>é¦–å…ˆæˆ‘ä»¬æ¥æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œå«åš scrapypyppeteerï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-sh" data-language="sh"><code class="language-sh">scrapy startproject scrapypyppeteer<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¥ç€è¿›å…¥é¡¹ç›®ï¼Œç„¶åæ–°å»ºä¸€ä¸ª Spiderï¼Œåç§°ä¸º bookï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-sh" data-language="sh"><code class="language-sh">cd scrapypyppeteerscrapy genspider book dynamic5.scrape.center<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿™æ—¶å€™å¯ä»¥å‘ç°åœ¨é¡¹ç›®çš„ spiders æ–‡ä»¶å¤¹ä¸‹å°±å‡ºç°äº†ä¸€ä¸ªåä¸º spider.py çš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># spider.py</span><span class="token keyword">import</span> scrapy  <span class="token keyword">class</span> <span class="token class-name">BookSpider</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Spider<span class="token punctuation">)</span><span class="token punctuation">:</span>    name <span class="token operator">=</span> <span class="token string">'book'</span>    allowed_domains <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'dynamic5.scrape.center'</span><span class="token punctuation">]</span>    start_urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'http://dynamic5.scrape.center/'</span><span class="token punctuation">]</span>      <span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">pass</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é¦–å…ˆæˆ‘ä»¬æ„é€ ä¸€ä¸‹åˆ—è¡¨é¡µçš„åˆå§‹è¯·æ±‚ï¼Œå®ç°ä¸€ä¸ª start_requests æ–¹æ³•å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># spider.py</span><span class="token keyword">from</span> scrapy <span class="token keyword">import</span> Request<span class="token punctuation">,</span> Spider  <span class="token keyword">class</span> <span class="token class-name">BookSpider</span><span class="token punctuation">(</span>Spider<span class="token punctuation">)</span><span class="token punctuation">:</span>    name <span class="token operator">=</span> <span class="token string">'book'</span>    allowed_domains <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'dynamic5.scrape.center'</span><span class="token punctuation">]</span>      base_url <span class="token operator">=</span> <span class="token string">'https://dynamic5.scrape.center/page/&#123;page&#125;'</span>    max_page <span class="token operator">=</span> <span class="token number">10</span>      <span class="token keyword">def</span> <span class="token function">start_requests</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> page <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>max_page <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            url <span class="token operator">=</span> self<span class="token punctuation">.</span>base_url<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>page<span class="token operator">=</span>page<span class="token punctuation">)</span>            <span class="token keyword">yield</span> Request<span class="token punctuation">(</span>url<span class="token punctuation">,</span> callback<span class="token operator">=</span>self<span class="token punctuation">.</span>parse_index<span class="token punctuation">)</span>      <span class="token keyword">def</span> <span class="token function">parse_index</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ—¶å€™å¦‚æœæˆ‘ä»¬ç›´æ¥è¿è¡Œè¿™ä¸ª Spiderï¼Œåœ¨ parse_index æ–¹æ³•é‡Œé¢æ‰“å°è¾“å‡º Response çš„å†…å®¹ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><p>è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥å‘ç°æˆ‘ä»¬æ‰€å¾—åˆ°çš„å†…å®¹å¹¶ä¸æ˜¯é¡µé¢æ¸²æŸ“åçš„çœŸæ­£ HTML ä»£ç ã€‚</p><p>æ­¤æ—¶å¦‚æœæˆ‘ä»¬æƒ³è¦è·å– HTML æ¸²æŸ“ç»“æœçš„è¯å°±å¾—ä½¿ç”¨ Downloader Middleware æ¥å®ç°äº†ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬ç›´æ¥æ‹¿ä¸€ä¸ªæˆ‘å·²ç»å†™å¥½çš„ç»„ä»¶æ¥æ¼”ç¤ºäº†ï¼Œç»„ä»¶çš„åç§°å«åš GerapyPyppeteerï¼Œè¿™é‡Œé¢å·²ç»å†™å¥½äº† Scrapy å’Œ Pyppeteer ç»“åˆçš„ä¸­é—´ä»¶ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»ä¸‹ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å€ŸåŠ©äº pip3 æ¥å®‰è£…ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-sh" data-language="sh"><code class="language-sh">pip3 install gerapy-pyppeteer<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>GerapyPyppeteer æä¾›äº†ä¸¤éƒ¨åˆ†å†…å®¹ï¼Œä¸€éƒ¨åˆ†æ˜¯ Downloader Middlewareï¼Œä¸€éƒ¨åˆ†æ˜¯ Requestã€‚</p><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å¼€å¯ä¸­é—´ä»¶ï¼Œåœ¨ settings é‡Œé¢å¼€å¯ PyppeteerMiddlewareï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">DOWNLOADER_MIDDLEWARES <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    <span class="token string">'gerapy_pyppeteer.downloadermiddlewares.PyppeteerMiddleware'</span><span class="token punctuation">:</span> <span class="token number">543</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ç„¶åæˆ‘ä»¬æŠŠä¸Šæ–‡å®šä¹‰çš„ Request ä¿®æ”¹ä¸º PyppeteerRequest å³å¯ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> gerapy_pyppeteer <span class="token keyword">import</span> PyppeteerRequest<span class="token keyword">from</span> scrapy <span class="token keyword">import</span> Request<span class="token punctuation">,</span> Spider  <span class="token keyword">class</span> <span class="token class-name">BookSpider</span><span class="token punctuation">(</span>Spider<span class="token punctuation">)</span><span class="token punctuation">:</span>    name <span class="token operator">=</span> <span class="token string">'book'</span>    allowed_domains <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'dynamic5.scrape.center'</span><span class="token punctuation">]</span>      base_url <span class="token operator">=</span> <span class="token string">'https://dynamic5.scrape.center/page/&#123;page&#125;'</span>    max_page <span class="token operator">=</span> <span class="token number">10</span>      <span class="token keyword">def</span> <span class="token function">start_requests</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> page <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>max_page <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            url <span class="token operator">=</span> self<span class="token punctuation">.</span>base_url<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>page<span class="token operator">=</span>page<span class="token punctuation">)</span>            <span class="token keyword">yield</span> PyppeteerRequest<span class="token punctuation">(</span>url<span class="token punctuation">,</span> callback<span class="token operator">=</span>self<span class="token punctuation">.</span>parse_index<span class="token punctuation">,</span> wait_for<span class="token operator">=</span><span class="token string">'.item .name'</span><span class="token punctuation">)</span>      <span class="token keyword">def</span> <span class="token function">parse_index</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·å…¶å®å°±å®Œæˆäº† Pyppeteer çš„å¯¹æ¥äº†ï¼Œéå¸¸ç®€å•ã€‚</p><p>è¿™é‡Œ PyppeteerRequest å’ŒåŸæœ¬çš„ Request å¤šæä¾›äº†ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯ wait_forï¼Œé€šè¿‡è¿™ä¸ªå‚æ•°æˆ‘ä»¬å¯ä»¥æŒ‡å®š Pyppeteer éœ€è¦ç­‰å¾…ç‰¹å®šçš„å†…å®¹åŠ è½½å‡ºæ¥æ‰ç®—ç»“æŸï¼Œç„¶åæ‰è¿”å›å¯¹åº”çš„ç»“æœã€‚</p><p>ä¸ºäº†æ–¹ä¾¿è§‚å¯Ÿæ•ˆæœï¼Œæˆ‘ä»¬æŠŠå¹¶å‘é™åˆ¶ä¿®æ”¹å¾—å°ä¸€ç‚¹ï¼Œç„¶åæŠŠ Pyppeteer çš„ Headless æ¨¡å¼è®¾ç½®ä¸º Falseï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">CONCURRENT_REQUESTS <span class="token operator">=</span> <span class="token number">3</span>GERAPY_PYPPETEER_HEADLESS <span class="token operator">=</span> <span class="token boolean">False</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿™æ—¶å€™æˆ‘ä»¬é‡æ–°è¿è¡Œä¸‹ Spiderï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°åœ¨çˆ¬å–çš„è¿‡ç¨‹ä¸­ï¼ŒPyppeteer å¯¹åº”çš„ Chromium æµè§ˆå™¨å°±å¼¹å‡ºæ¥äº†ï¼Œå¹¶é€ä¸ªåŠ è½½å¯¹åº”çš„é¡µé¢å†…å®¹ï¼ŒåŠ è½½å®Œæˆä¹‹åæµè§ˆå™¨å…³é—­ã€‚</p><p>å¦å¤–è§‚å¯Ÿä¸‹æ§åˆ¶å°ï¼Œæˆ‘ä»¬å‘ç°å¯¹åº”çš„ç»“æœä¹Ÿå°±è¢«æå–å‡ºæ¥äº†ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p><p>è¿™æ—¶å€™æˆ‘ä»¬å†é‡æ–°ä¿®æ”¹ä¸‹ parse_index æ–¹æ³•ï¼Œæå–å¯¹åº”çš„æ¯æœ¬ä¹¦çš„åç§°å’Œä½œè€…å³å¯ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">parse_index</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> item <span class="token keyword">in</span> response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token string">'.item'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        name <span class="token operator">=</span> item<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token string">'.name::text'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>        authors <span class="token operator">=</span> item<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token string">'.authors::text'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>        name <span class="token operator">=</span> name<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">if</span> name <span class="token keyword">else</span> <span class="token boolean">None</span>        authors <span class="token operator">=</span> authors<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">if</span> authors <span class="token keyword">else</span> <span class="token boolean">None</span>        <span class="token keyword">yield</span> <span class="token punctuation">&#123;</span>            <span class="token string">'name'</span><span class="token punctuation">:</span> name<span class="token punctuation">,</span>            <span class="token string">'authors'</span><span class="token punctuation">:</span> authors        <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡æ–°è¿è¡Œï¼Œå³å¯å‘ç°å¯¹åº”çš„åç§°å’Œä½œè€…å°±è¢«æå–å‡ºæ¥äº†ï¼Œè¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p>è¿™æ ·æˆ‘ä»¬å°±å€ŸåŠ©äº GerapyPyppeteer å®Œæˆäº† JavaScript æ¸²æŸ“é¡µé¢çš„çˆ¬å–ã€‚</p><h2 id="åŸç†åˆ†æ"><a href="#åŸç†åˆ†æ" class="headerlink" title="åŸç†åˆ†æ"></a>åŸç†åˆ†æ</h2><p>ä½†ä¸Šé¢ä»…ä»…æ˜¯æˆ‘ä»¬å€ŸåŠ©äº GerapyPyppeteer å®ç°äº† Scrapy å’Œ Pyppeteer çš„å¯¹æ¥ï¼Œä½†å…¶èƒŒåçš„åŸç†æ˜¯æ€æ ·çš„å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥åˆ†æä¸‹å®ƒçš„æºç æ¥çœ‹ä¸€ä¸‹ã€‚</p><p>å…¶ GitHub åœ°å€ä¸º <a href="https://github.com/Gerapy/GerapyPyppeteer%EF%BC%8C%E6%88%91%E4%BB%AC%E4%B8%8B%E8%BD%BD%E4%B8%8B%E6%9D%A5%E7%9C%8B%E4%B8%8B%E3%80%82">https://github.com/Gerapy/GerapyPyppeteerï¼Œæˆ‘ä»¬ä¸‹è½½ä¸‹æ¥çœ‹ä¸‹ã€‚</a></p><p>é¦–å…ˆåˆ†æå‘ç°å…¶æœ€æ ¸å¿ƒçš„å†…å®¹å°±æ˜¯å®ç°äº†ä¸€ä¸ª PyppeteerMiddlewareï¼Œè¿™æ˜¯ä¸€ä¸ª Downloader Middlewareï¼Œè¿™é‡Œæœ€ä¸»è¦çš„å°±æ˜¯ process_request çš„å®ç°ï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">process_request</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span>    logger<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'processing request %s'</span><span class="token punctuation">,</span> request<span class="token punctuation">)</span>      <span class="token keyword">return</span> as_deferred<span class="token punctuation">(</span>self<span class="token punctuation">.</span>_process_request<span class="token punctuation">(</span>request<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œå…¶å®å°±æ˜¯è°ƒç”¨äº†ä¸€ä¸ª _process_request æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•çš„è¿”å›ç»“æœè¢« as_deferred æ–¹æ³•è°ƒç”¨äº†ã€‚</p><p>è¿™ä¸ª as_deferred æ˜¯æ€ä¹ˆå®šä¹‰çš„å‘¢ï¼Ÿä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> asyncio<span class="token keyword">from</span> twisted<span class="token punctuation">.</span>internet<span class="token punctuation">.</span>defer <span class="token keyword">import</span> Deferred  <span class="token keyword">def</span> <span class="token function">as_deferred</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">return</span> Deferred<span class="token punctuation">.</span>fromFuture<span class="token punctuation">(</span>asyncio<span class="token punctuation">.</span>ensure_future<span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ä¸ªæ–¹æ³•æ¥å—çš„å°±æ˜¯ä¸€ä¸ª asyncio åº“çš„ Future å¯¹è±¡ï¼Œç„¶åé€šè¿‡ fromFuture æ–¹æ³•è½¬åŒ–æˆäº† twisted é‡Œé¢çš„ Deferred å¯¹è±¡ã€‚è¿™ä¸ªçš„åŸå› æ˜¯ Scrapy æœ¬èº«çš„å¼‚æ­¥æ˜¯å€ŸåŠ©äº twisted çš„å®ç°çš„ï¼Œä¸€ä¸ªä¸ªçš„å¼‚æ­¥ä»»åŠ¡å¯¹åº”çš„å¯¹è±¡å°±æ˜¯ Deferred å¯¹è±¡ï¼Œè€Œ Pyppeteer åˆæ˜¯åŸºäº asyncio çš„ï¼Œå®ƒçš„å¼‚æ­¥ä»»åŠ¡æ˜¯ Future å¯¹è±¡ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬éœ€è¦å€ŸåŠ© Deferred çš„ fromFuture æ–¹æ³•å°† Future è½¬ä¸º Deferred å¯¹è±¡ã€‚</p><p>å¦å¤–ä¸ºäº†æ”¯æŒè¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨ Scrapy ä¸­ä¿®æ”¹ reactor å¯¹è±¡ï¼Œä¿®æ”¹ä¸º AsyncioSelectorReactorï¼Œå®ç°å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> sys<span class="token keyword">from</span> twisted<span class="token punctuation">.</span>internet<span class="token punctuation">.</span>asyncioreactor <span class="token keyword">import</span> AsyncioSelectorReactor<span class="token keyword">import</span> twisted<span class="token punctuation">.</span>internet  reactor <span class="token operator">=</span> AsyncioSelectorReactor<span class="token punctuation">(</span>asyncio<span class="token punctuation">.</span>get_event_loop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># install AsyncioSelectorReactor</span>twisted<span class="token punctuation">.</span>internet<span class="token punctuation">.</span>reactor <span class="token operator">=</span> reactorsys<span class="token punctuation">.</span>modules<span class="token punctuation">[</span><span class="token string">'twisted.internet.reactor'</span><span class="token punctuation">]</span> <span class="token operator">=</span> reactor<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ®µä»£ç å·²ç»åœ¨ PyppeteerMiddleware é‡Œé¢å®šä¹‰å¥½äº†ï¼Œåœ¨ Scrapy æ­£å¼å¼€å§‹çˆ¬å–ä¹‹å‰è¿™æ®µä»£ç å°±ä¼šè¢«æ‰§è¡Œï¼Œå°† Scrapy ä¸­çš„çš„ reactor ä¿®æ”¹ä¸º AsyncioSelectorReactorï¼Œä»è€Œå®ç° Future çš„è°ƒåº¦ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥çœ‹ä¸‹ _process_request æ–¹æ³•ï¼Œå®ç°å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">_process_request</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">:</span> PyppeteerRequest<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    use pyppeteer to process spider    :param request:    :param spider:    :return:    """</span>    options <span class="token operator">=</span> <span class="token punctuation">&#123;</span>        <span class="token string">'headless'</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>headless<span class="token punctuation">,</span>        <span class="token string">'dumpio'</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>dumpio<span class="token punctuation">,</span>        <span class="token string">'devtools'</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>devtools<span class="token punctuation">,</span>        <span class="token string">'args'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>            <span class="token string-interpolation"><span class="token string">f'--window-size=</span><span class="token interpolation"><span class="token punctuation">&#123;</span>self<span class="token punctuation">.</span>window_width<span class="token punctuation">&#125;</span></span><span class="token string">,</span><span class="token interpolation"><span class="token punctuation">&#123;</span>self<span class="token punctuation">.</span>window_height<span class="token punctuation">&#125;</span></span><span class="token string">'</span></span><span class="token punctuation">,</span>        <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> self<span class="token punctuation">.</span>executable_path<span class="token punctuation">:</span> options<span class="token punctuation">[</span><span class="token string">'executable_path'</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>executable_path    <span class="token keyword">if</span> self<span class="token punctuation">.</span>disable_extensions<span class="token punctuation">:</span> options<span class="token punctuation">[</span><span class="token string">'args'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'--disable-extensions'</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> self<span class="token punctuation">.</span>hide_scrollbars<span class="token punctuation">:</span> options<span class="token punctuation">[</span><span class="token string">'args'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'--hide-scrollbars'</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> self<span class="token punctuation">.</span>mute_audio<span class="token punctuation">:</span> options<span class="token punctuation">[</span><span class="token string">'args'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'--mute-audio'</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> self<span class="token punctuation">.</span>no_sandbox<span class="token punctuation">:</span> options<span class="token punctuation">[</span><span class="token string">'args'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'--no-sandbox'</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> self<span class="token punctuation">.</span>disable_setuid_sandbox<span class="token punctuation">:</span> options<span class="token punctuation">[</span><span class="token string">'args'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'--disable-setuid-sandbox'</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> self<span class="token punctuation">.</span>disable_gpu<span class="token punctuation">:</span> options<span class="token punctuation">[</span><span class="token string">'args'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'--disable-gpu'</span><span class="token punctuation">)</span>      <span class="token comment"># set proxy</span>    proxy <span class="token operator">=</span> request<span class="token punctuation">.</span>proxy    <span class="token keyword">if</span> <span class="token keyword">not</span> proxy<span class="token punctuation">:</span>        proxy <span class="token operator">=</span> request<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'proxy'</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> proxy<span class="token punctuation">:</span> options<span class="token punctuation">[</span><span class="token string">'args'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'--proxy-server=</span><span class="token interpolation"><span class="token punctuation">&#123;</span>proxy<span class="token punctuation">&#125;</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>      logger<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'set options %s'</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span>      browser <span class="token operator">=</span> <span class="token keyword">await</span> launch<span class="token punctuation">(</span>options<span class="token punctuation">)</span>    page <span class="token operator">=</span> <span class="token keyword">await</span> browser<span class="token punctuation">.</span>newPage<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">await</span> page<span class="token punctuation">.</span>setViewport<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">'width'</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>window_width<span class="token punctuation">,</span> <span class="token string">'height'</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>window_height<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>      <span class="token comment"># set cookies</span>    <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>cookies<span class="token punctuation">,</span> <span class="token builtin">dict</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">await</span> page<span class="token punctuation">.</span>setCookie<span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">[</span>            <span class="token punctuation">&#123;</span><span class="token string">'name'</span><span class="token punctuation">:</span> k<span class="token punctuation">,</span> <span class="token string">'value'</span><span class="token punctuation">:</span> v<span class="token punctuation">&#125;</span>            <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> request<span class="token punctuation">.</span>cookies<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">await</span> page<span class="token punctuation">.</span>setCookie<span class="token punctuation">(</span>request<span class="token punctuation">.</span>cookies<span class="token punctuation">)</span>      <span class="token comment"># the headers must be set using request interception</span>    <span class="token keyword">await</span> page<span class="token punctuation">.</span>setRequestInterception<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>      <span class="token decorator annotation punctuation">@page<span class="token punctuation">.</span>on</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">)</span>    <span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">_handle_interception</span><span class="token punctuation">(</span>pu_request<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># handle headers</span>        overrides <span class="token operator">=</span> <span class="token punctuation">&#123;</span>            <span class="token string">'headers'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>                k<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token string">','</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> v<span class="token punctuation">:</span> v<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> request<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment"># handle resource types</span>        _ignore_resource_types <span class="token operator">=</span> self<span class="token punctuation">.</span>ignore_resource_types        <span class="token keyword">if</span> request<span class="token punctuation">.</span>ignore_resource_types <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>            _ignore_resource_types <span class="token operator">=</span> request<span class="token punctuation">.</span>ignore_resource_types        <span class="token keyword">if</span> pu_request<span class="token punctuation">.</span>resourceType <span class="token keyword">in</span> _ignore_resource_types<span class="token punctuation">:</span>            <span class="token keyword">await</span> pu_request<span class="token punctuation">.</span>abort<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">await</span> pu_request<span class="token punctuation">.</span>continue_<span class="token punctuation">(</span>overrides<span class="token punctuation">)</span>      timeout <span class="token operator">=</span> self<span class="token punctuation">.</span>download_timeout    <span class="token keyword">if</span> request<span class="token punctuation">.</span>timeout <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>        timeout <span class="token operator">=</span> request<span class="token punctuation">.</span>timeout      logger<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'crawling %s'</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>url<span class="token punctuation">)</span>      response <span class="token operator">=</span> <span class="token boolean">None</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        options <span class="token operator">=</span> <span class="token punctuation">&#123;</span>            <span class="token string">'timeout'</span><span class="token punctuation">:</span> <span class="token number">1000</span> <span class="token operator">*</span> timeout<span class="token punctuation">,</span>            <span class="token string">'waitUntil'</span><span class="token punctuation">:</span> request<span class="token punctuation">.</span>wait_until        <span class="token punctuation">&#125;</span>        logger<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'request %s with options %s'</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>url<span class="token punctuation">,</span> options<span class="token punctuation">)</span>        response <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span>goto<span class="token punctuation">(</span>            request<span class="token punctuation">.</span>url<span class="token punctuation">,</span>            options<span class="token operator">=</span>options        <span class="token punctuation">)</span>    <span class="token keyword">except</span> <span class="token punctuation">(</span>PageError<span class="token punctuation">,</span> TimeoutError<span class="token punctuation">)</span><span class="token punctuation">:</span>        logger<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token string">'error rendering url %s using pyppeteer'</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>url<span class="token punctuation">)</span>        <span class="token keyword">await</span> page<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">await</span> browser<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_retry<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token number">504</span><span class="token punctuation">,</span> spider<span class="token punctuation">)</span>      <span class="token keyword">if</span> request<span class="token punctuation">.</span>wait_for<span class="token punctuation">:</span>        <span class="token keyword">try</span><span class="token punctuation">:</span>            logger<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'waiting for %s finished'</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>wait_for<span class="token punctuation">)</span>            <span class="token keyword">await</span> page<span class="token punctuation">.</span>waitFor<span class="token punctuation">(</span>request<span class="token punctuation">.</span>wait_for<span class="token punctuation">)</span>        <span class="token keyword">except</span> TimeoutError<span class="token punctuation">:</span>            logger<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token string">'error waiting for %s of %s'</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>wait_for<span class="token punctuation">,</span> request<span class="token punctuation">.</span>url<span class="token punctuation">)</span>            <span class="token keyword">await</span> page<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">await</span> browser<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> self<span class="token punctuation">.</span>_retry<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token number">504</span><span class="token punctuation">,</span> spider<span class="token punctuation">)</span>      <span class="token comment"># evaluate script</span>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>script<span class="token punctuation">:</span>        logger<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'evaluating %s'</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>script<span class="token punctuation">)</span>        <span class="token keyword">await</span> page<span class="token punctuation">.</span>evaluate<span class="token punctuation">(</span>request<span class="token punctuation">.</span>script<span class="token punctuation">)</span>      <span class="token comment"># sleep</span>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>sleep <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>        logger<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'sleep for %ss'</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>sleep<span class="token punctuation">)</span>        <span class="token keyword">await</span> asyncio<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span>request<span class="token punctuation">.</span>sleep<span class="token punctuation">)</span>      content <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span>content<span class="token punctuation">(</span><span class="token punctuation">)</span>    body <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span>content<span class="token punctuation">)</span>      <span class="token comment"># close page and browser</span>    logger<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'close pyppeteer'</span><span class="token punctuation">)</span>    <span class="token keyword">await</span> page<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">await</span> browser<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token keyword">if</span> <span class="token keyword">not</span> response<span class="token punctuation">:</span>        logger<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token string">'get null response by pyppeteer of url %s'</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>url<span class="token punctuation">)</span>      <span class="token comment"># Necessary to bypass the compression middleware (?)</span>    response<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token string">'content-encoding'</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>    response<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token string">'Content-Encoding'</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>      <span class="token keyword">return</span> HtmlResponse<span class="token punctuation">(</span>        page<span class="token punctuation">.</span>url<span class="token punctuation">,</span>        status<span class="token operator">=</span>response<span class="token punctuation">.</span>status<span class="token punctuation">,</span>        headers<span class="token operator">=</span>response<span class="token punctuation">.</span>headers<span class="token punctuation">,</span>        body<span class="token operator">=</span>body<span class="token punctuation">,</span>        encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">,</span>        request<span class="token operator">=</span>request    <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»£ç å†…å®¹æ¯”è¾ƒå¤šï¼Œæˆ‘ä»¬æ…¢æ…¢æ¥è¯´ã€‚</p><p>é¦–å…ˆæœ€å¼€å§‹çš„éƒ¨åˆ†æ˜¯å®šä¹‰ Pyppeteer çš„ä¸€äº›å¯åŠ¨å‚æ•°ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">options <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    <span class="token string">'headless'</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>headless<span class="token punctuation">,</span>    <span class="token string">'dumpio'</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>dumpio<span class="token punctuation">,</span>    <span class="token string">'devtools'</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>devtools<span class="token punctuation">,</span>    <span class="token string">'args'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>        <span class="token string-interpolation"><span class="token string">f'--window-size=</span><span class="token interpolation"><span class="token punctuation">&#123;</span>self<span class="token punctuation">.</span>window_width<span class="token punctuation">&#125;</span></span><span class="token string">,</span><span class="token interpolation"><span class="token punctuation">&#123;</span>self<span class="token punctuation">.</span>window_height<span class="token punctuation">&#125;</span></span><span class="token string">'</span></span><span class="token punctuation">,</span>    <span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> self<span class="token punctuation">.</span>executable_path<span class="token punctuation">:</span> options<span class="token punctuation">[</span><span class="token string">'executable_path'</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>executable_path<span class="token keyword">if</span> self<span class="token punctuation">.</span>disable_extensions<span class="token punctuation">:</span> options<span class="token punctuation">[</span><span class="token string">'args'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'--disable-extensions'</span><span class="token punctuation">)</span><span class="token keyword">if</span> self<span class="token punctuation">.</span>hide_scrollbars<span class="token punctuation">:</span> options<span class="token punctuation">[</span><span class="token string">'args'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'--hide-scrollbars'</span><span class="token punctuation">)</span><span class="token keyword">if</span> self<span class="token punctuation">.</span>mute_audio<span class="token punctuation">:</span> options<span class="token punctuation">[</span><span class="token string">'args'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'--mute-audio'</span><span class="token punctuation">)</span><span class="token keyword">if</span> self<span class="token punctuation">.</span>no_sandbox<span class="token punctuation">:</span> options<span class="token punctuation">[</span><span class="token string">'args'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'--no-sandbox'</span><span class="token punctuation">)</span><span class="token keyword">if</span> self<span class="token punctuation">.</span>disable_setuid_sandbox<span class="token punctuation">:</span> options<span class="token punctuation">[</span><span class="token string">'args'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'--disable-setuid-sandbox'</span><span class="token punctuation">)</span><span class="token keyword">if</span> self<span class="token punctuation">.</span>disable_gpu<span class="token punctuation">:</span> options<span class="token punctuation">[</span><span class="token string">'args'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'--disable-gpu'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™äº›å‚æ•°æ¥è‡ªäº from_crawler é‡Œé¢è¯»å–é¡¹ç›® settings çš„å†…å®¹ï¼Œå¦‚é…ç½® Pyppeteer å¯¹åº”æµè§ˆå™¨çš„æ— å¤´æ¨¡å¼ã€çª—å£å¤§å°ã€æ˜¯å¦éšè—æ»šåŠ¨æ¡ã€æ˜¯å¦å¼ƒç”¨æ²™ç®±ç­‰ç­‰ã€‚</p><p>ç´§æ¥ç€å°±æ˜¯åˆ©ç”¨ options æ¥å¯åŠ¨ Pyppeteerï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">browser <span class="token operator">=</span> <span class="token keyword">await</span> launch<span class="token punctuation">(</span>options<span class="token punctuation">)</span>page <span class="token operator">=</span> <span class="token keyword">await</span> browser<span class="token punctuation">.</span>newPage<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">await</span> page<span class="token punctuation">.</span>setViewport<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">'width'</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>window_width<span class="token punctuation">,</span> <span class="token string">'height'</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>window_height<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œå¯åŠ¨äº† Pyppeteer å¯¹åº”çš„æµè§ˆå™¨ï¼Œå°†å…¶èµ‹å€¼ä¸º browserï¼Œç„¶åæ–°å»ºäº†ä¸€ä¸ªé€‰é¡¹å¡ï¼Œèµ‹å€¼ä¸º pageï¼Œç„¶åé€šè¿‡</p><p>setViewport æ–¹æ³•è®¾å®šäº†çª—å£çš„å®½é«˜ã€‚</p><p>æ¥ä¸‹æ¥å°±æ˜¯å¯¹ä¸€äº› Cookies è¿›è¡Œå¤„ç†ï¼Œå¦‚æœ Request å¸¦æœ‰ Cookies çš„è¯ä¼šè¢«èµ‹å€¼åˆ° Pyppeteer ä¸­ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># set cookies</span><span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>cookies<span class="token punctuation">,</span> <span class="token builtin">dict</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">await</span> page<span class="token punctuation">.</span>setCookie<span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">[</span>        <span class="token punctuation">&#123;</span><span class="token string">'name'</span><span class="token punctuation">:</span> k<span class="token punctuation">,</span> <span class="token string">'value'</span><span class="token punctuation">:</span> v<span class="token punctuation">&#125;</span>        <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> request<span class="token punctuation">.</span>cookies<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>    <span class="token keyword">await</span> page<span class="token punctuation">.</span>setCookie<span class="token punctuation">(</span>request<span class="token punctuation">.</span>cookies<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å†ç„¶åå…³é”®çš„éƒ¨åˆ†å°±æ˜¯è¿›è¡Œé¡µé¢çš„åŠ è½½äº†ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">try</span><span class="token punctuation">:</span>    options <span class="token operator">=</span> <span class="token punctuation">&#123;</span>        <span class="token string">'timeout'</span><span class="token punctuation">:</span> <span class="token number">1000</span> <span class="token operator">*</span> timeout<span class="token punctuation">,</span>        <span class="token string">'waitUntil'</span><span class="token punctuation">:</span> request<span class="token punctuation">.</span>wait_until    <span class="token punctuation">&#125;</span>    logger<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'request %s with options %s'</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>url<span class="token punctuation">,</span> options<span class="token punctuation">)</span>    response <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span>goto<span class="token punctuation">(</span>        request<span class="token punctuation">.</span>url<span class="token punctuation">,</span>        options<span class="token operator">=</span>options    <span class="token punctuation">)</span><span class="token keyword">except</span> <span class="token punctuation">(</span>PageError<span class="token punctuation">,</span> TimeoutError<span class="token punctuation">)</span><span class="token punctuation">:</span>    logger<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token string">'error rendering url %s using pyppeteer'</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>url<span class="token punctuation">)</span>    <span class="token keyword">await</span> page<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">await</span> browser<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> self<span class="token punctuation">.</span>_retry<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token number">504</span><span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œæˆ‘ä»¬é¦–å…ˆåˆ¶å®šäº†åŠ è½½è¶…æ—¶æ—¶é—´ timeout è¿˜æœ‰è¦ç­‰å¾…å®Œæˆçš„äº‹ä»¶ waitUntilï¼Œæ¥ç€è°ƒç”¨ page çš„ goto æ–¹æ³•è®¿é—®å¯¹åº”çš„é¡µé¢ï¼ŒåŒæ—¶è¿›è¡Œäº†å¼‚å¸¸æ£€æµ‹ï¼Œå¦‚æœå‘ç”Ÿé”™è¯¯å°±å…³é—­æµè§ˆå™¨å¹¶é‡æ–°å‘èµ·ä¸€æ¬¡é‡è¯•è¯·æ±‚ã€‚</p><p>åœ¨é¡µé¢åŠ è½½å‡ºæ¥ä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦åˆ¤å®šæˆ‘ä»¬æœŸæœ›çš„ç»“æœæ˜¯ä¸æ˜¯åŠ è½½å‡ºæ¥äº†ï¼Œæ‰€ä»¥è¿™é‡Œåˆå¢åŠ äº† waitFor çš„è°ƒç”¨ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">if</span> request<span class="token punctuation">.</span>wait_for<span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        logger<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'waiting for %s finished'</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>wait_for<span class="token punctuation">)</span>        <span class="token keyword">await</span> page<span class="token punctuation">.</span>waitFor<span class="token punctuation">(</span>request<span class="token punctuation">.</span>wait_for<span class="token punctuation">)</span>    <span class="token keyword">except</span> TimeoutError<span class="token punctuation">:</span>        logger<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token string">'error waiting for %s of %s'</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>wait_for<span class="token punctuation">,</span> request<span class="token punctuation">.</span>url<span class="token punctuation">)</span>        <span class="token keyword">await</span> page<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">await</span> browser<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_retry<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token number">504</span><span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œ request æœ‰ä¸ª wait_for å±æ€§ï¼Œè¿™é‡Œå°±å¯ä»¥å®šä¹‰æƒ³è¦åŠ è½½çš„èŠ‚ç‚¹çš„é€‰æ‹©å™¨ï¼Œå¦‚ .item .name ç­‰ï¼Œè¿™æ ·å¦‚æœé¡µé¢åœ¨è§„å®šæ—¶é—´å†…åŠ è½½å‡ºæ¥å°±ä¼šç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œå¦åˆ™å°±ä¼šè§¦å‘ TimeoutError å¹¶è¢«æ•è·ï¼Œå…³é—­æµè§ˆå™¨å¹¶é‡æ–°å‘èµ·ä¸€æ¬¡é‡è¯•è¯·æ±‚ã€‚</p><p>ç­‰æƒ³è¦çš„ç»“æœåŠ è½½å‡ºæ¥ä¹‹åï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ‰§è¡Œä¸€äº›è‡ªå®šä¹‰çš„ JavaScript ä»£ç å®Œæˆæˆ‘ä»¬æƒ³è¦è‡ªå®šä¹‰çš„åŠŸèƒ½ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># evaluate script</span><span class="token keyword">if</span> request<span class="token punctuation">.</span>script<span class="token punctuation">:</span>    logger<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'evaluating %s'</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>script<span class="token punctuation">)</span>    <span class="token keyword">await</span> page<span class="token punctuation">.</span>evaluate<span class="token punctuation">(</span>request<span class="token punctuation">.</span>script<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åå…³é”®çš„ä¸€æ­¥å°±æ˜¯å°†å½“å‰é¡µé¢çš„æºä»£ç æ‰“å°å‡ºæ¥ï¼Œç„¶åæ„é€ ä¸€ä¸ª HtmlResponse è¿”å›å³å¯ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">_process_request</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">:</span> PyppeteerRequest<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    content <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span>content<span class="token punctuation">(</span><span class="token punctuation">)</span>    body <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span>content<span class="token punctuation">)</span>              <span class="token comment"># close page and browser</span>    logger<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'close pyppeteer'</span><span class="token punctuation">)</span>    <span class="token keyword">await</span> page<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">await</span> browser<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>              <span class="token keyword">if</span> <span class="token keyword">not</span> response<span class="token punctuation">:</span>        logger<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token string">'get null response by pyppeteer of url %s'</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>url<span class="token punctuation">)</span>              <span class="token comment"># Necessary to bypass the compression middleware (?)</span>    response<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token string">'content-encoding'</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>    response<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token string">'Content-Encoding'</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>              <span class="token keyword">return</span> HtmlResponse<span class="token punctuation">(</span>        page<span class="token punctuation">.</span>url<span class="token punctuation">,</span>        status<span class="token operator">=</span>response<span class="token punctuation">.</span>status<span class="token punctuation">,</span>        headers<span class="token operator">=</span>response<span class="token punctuation">.</span>headers<span class="token punctuation">,</span>        body<span class="token operator">=</span>body<span class="token punctuation">,</span>        encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">,</span>        request<span class="token operator">=</span>request    <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰€ä»¥ï¼Œå¦‚æœä»£ç å¯ä»¥æ‰§è¡Œåˆ°æœ€åï¼Œè¿”å›åˆ°å°±æ˜¯ä¸€ä¸ª Response å¯¹è±¡ï¼Œè¿™ä¸ª Resposne å¯¹è±¡çš„ body å°±æ˜¯ Pyppeteer æ¸²æŸ“é¡µé¢åçš„ç»“æœï¼Œå› æ­¤è¿™ä¸ª Response å¯¹è±¡å†ä¼ ç»™ Spider è§£æï¼Œå°±æ˜¯ JavaScript æ¸²æŸ“åçš„é¡µé¢ç»“æœäº†ã€‚</p><p>è¿™æ ·æˆ‘ä»¬å°±é€šè¿‡ Downloader Middleware é€šè¿‡å¯¹æ¥ Pyppeteer å®Œæˆäº† JavaScript åŠ¨æ€æ¸²æŸ“é¡µé¢çš„æŠ“å–äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> çˆ¬è™« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> scrapy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonå®ç°åå¤§å¸¸ç”¨æ’åºç®—æ³•</title>
      <link href="/post/algorithm/python-shi-xian-shi-da-chang-yong-pai-xu-suan-fa/"/>
      <url>/post/algorithm/python-shi-xian-shi-da-chang-yong-pai-xu-suan-fa/</url>
      
        <content type="html"><![CDATA[<h1 id="æ’åºç®—æ³•åŸºæœ¬å†…å®¹"><a href="#æ’åºç®—æ³•åŸºæœ¬å†…å®¹" class="headerlink" title="æ’åºç®—æ³•åŸºæœ¬å†…å®¹"></a>æ’åºç®—æ³•åŸºæœ¬å†…å®¹</h1><h2 id="ç®—æ³•åˆ†ç±»"><a href="#ç®—æ³•åˆ†ç±»" class="headerlink" title="ç®—æ³•åˆ†ç±»"></a>ç®—æ³•åˆ†ç±»</h2><h3 id="æ¯”è¾ƒåˆ†ç±»"><a href="#æ¯”è¾ƒåˆ†ç±»" class="headerlink" title="æ¯”è¾ƒåˆ†ç±»"></a>æ¯”è¾ƒåˆ†ç±»</h3><ul><li><p>éçº¿æ€§æ—¶é—´æ¯”è¾ƒç±»æ’åºï¼šé€šè¿‡æ¯”è¾ƒæ¥å†³å®šå…ƒç´ é—´çš„ç›¸å¯¹æ¬¡åºï¼Œ</p><p>ç”±äºå…¶æ—¶é—´å¤æ‚åº¦ä¸èƒ½çªç ´O(nlogn)ï¼Œå› æ­¤ç§°ä¸ºéçº¿æ€§æ—¶é—´æ¯”è¾ƒç±»æ’åºã€‚</p></li><li><p>çº¿æ€§æ—¶é—´éæ¯”è¾ƒç±»æ’åºï¼šä¸é€šè¿‡æ¯”è¾ƒæ¥å†³å®šå…ƒç´ é—´çš„ç›¸å¯¹æ¬¡åºï¼Œ</p><p>å®ƒå¯ä»¥çªç ´åŸºäºæ¯”è¾ƒæ’åºçš„æ—¶é—´ä¸‹ç•Œï¼Œä»¥çº¿æ€§æ—¶é—´è¿è¡Œï¼Œå› æ­¤ç§°ä¸ºçº¿æ€§æ—¶é—´éæ¯”è¾ƒç±»æ’åº</p></li></ul><p><img src="/markdownImages/sort_category.png" class="lazyload placeholder" data-srcset="/markdownImages/sort_category.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="ç®—æ³•åˆ†ç±»åˆ†æ"></p><h3 id="ä»¥æ˜¯å¦è®¿é—®å†…å­˜åˆ†ç±»"><a href="#ä»¥æ˜¯å¦è®¿é—®å†…å­˜åˆ†ç±»" class="headerlink" title="ä»¥æ˜¯å¦è®¿é—®å†…å­˜åˆ†ç±»"></a>ä»¥æ˜¯å¦è®¿é—®å†…å­˜åˆ†ç±»</h3><ul><li><p>å†…éƒ¨æ’åºæ˜¯æ•°æ®è®°å½•åœ¨å†…å­˜ä¸­è¿›è¡Œæ’åºï¼Œ</p></li><li><p>è€Œå¤–éƒ¨æ’åºæ˜¯å› æ’åºçš„æ•°æ®å¾ˆå¤§ï¼Œä¸€æ¬¡ä¸èƒ½å®¹çº³å…¨éƒ¨çš„æ’åºè®°å½•ï¼Œåœ¨æ’åºè¿‡ç¨‹ä¸­éœ€è¦è®¿é—®å¤–å­˜ã€‚</p></li></ul><p>å¸¸è§çš„å†…éƒ¨æ’åºç®—æ³•æœ‰ï¼šæ’å…¥æ’åºã€å¸Œå°”æ’åºã€é€‰æ‹©æ’åºã€å†’æ³¡æ’åºã€å½’å¹¶æ’åºã€å¿«é€Ÿæ’åºã€å †æ’åºã€åŸºæ•°æ’åºç­‰ã€‚</p><h2 id="ç®—æ³•å¤æ‚åº¦åˆ†æ"><a href="#ç®—æ³•å¤æ‚åº¦åˆ†æ" class="headerlink" title="ç®—æ³•å¤æ‚åº¦åˆ†æ"></a>ç®—æ³•å¤æ‚åº¦åˆ†æ</h2><p>ä¸»è¦ä»ï¼šè¿‡ç¨‹å›¾è§£ã€ç®—æ³•æ€æƒ³ã€ä»£ç å®ç°ã€ç®—æ³•åˆ†æè¿™å››ä¸ªæ–¹é¢è®²è§£<br><img src="/markdownImages/sort_method_description.png" class="lazyload placeholder" data-srcset="/markdownImages/sort_method_description.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="æ’åºæ–¹æ³•åˆ†æ"></p><h3 id="ç›¸å…³æ¦‚å¿µ"><a href="#ç›¸å…³æ¦‚å¿µ" class="headerlink" title="ç›¸å…³æ¦‚å¿µ"></a>ç›¸å…³æ¦‚å¿µ</h3><blockquote><p>   nï¼šæ•°æ®è§„æ¨¡<br>   kï¼šâ€œæ¡¶â€çš„ä¸ªæ•°<br>   In-placeï¼šå ç”¨å¸¸æ•°å†…å­˜ï¼Œä¸å ç”¨é¢å¤–å†…å­˜<br>   Out-placeï¼šå ç”¨é¢å¤–å†…å­˜</p></blockquote><ul><li>ç¨³å®šï¼šå¦‚æœaåŸæœ¬åœ¨bå‰é¢ï¼Œè€Œa=bï¼Œæ’åºä¹‹åaä»ç„¶åœ¨bçš„å‰é¢ã€‚</li><li>ä¸ç¨³å®šï¼šå¦‚æœaåŸæœ¬åœ¨bçš„å‰é¢ï¼Œè€Œa=bï¼Œæ’åºä¹‹å a å¯èƒ½ä¼šå‡ºç°åœ¨ b çš„åé¢ã€‚ </li><li>æ—¶é—´å¤æ‚åº¦ï¼šå¯¹æ’åºæ•°æ®çš„æ€»çš„æ“ä½œæ¬¡æ•°ã€‚åæ˜ å½“nå˜åŒ–æ—¶ï¼Œæ“ä½œæ¬¡æ•°å‘ˆç°ä»€ä¹ˆè§„å¾‹ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼šæ˜¯æŒ‡ç®—æ³•åœ¨è®¡ç®—æœºå†…æ‰§è¡Œæ—¶æ‰€éœ€å­˜å‚¨ç©ºé—´çš„åº¦é‡ï¼Œå®ƒä¹Ÿæ˜¯æ•°æ®è§„æ¨¡nçš„å‡½æ•°ã€‚ </li></ul><h3 id="å…³äºæ—¶é—´å¤æ‚åº¦"><a href="#å…³äºæ—¶é—´å¤æ‚åº¦" class="headerlink" title="å…³äºæ—¶é—´å¤æ‚åº¦"></a>å…³äºæ—¶é—´å¤æ‚åº¦</h3><ul><li>1.å¹³æ–¹é˜¶ (O(n2)) æ’åº å„ç±»ç®€å•æ’åºï¼šç›´æ¥æ’å…¥ã€ç›´æ¥é€‰æ‹©å’Œå†’æ³¡æ’åºã€‚</li><li>2.çº¿æ€§å¯¹æ•°é˜¶ (O(nlog2n)) æ’åº å¿«é€Ÿæ’åºã€å †æ’åºå’Œå½’å¹¶æ’åºã€‚</li><li>3.O(n1+Â§)) æ’åºï¼ŒÂ§ æ˜¯ä»‹äº 0 å’Œ 1 ä¹‹é—´çš„å¸¸æ•°ã€‚å¸Œå°”æ’åºã€‚</li><li>4.çº¿æ€§é˜¶ (O(n)) æ’åº åŸºæ•°æ’åºï¼Œæ­¤å¤–è¿˜æœ‰æ¡¶ã€ç®±æ’åºã€‚</li></ul><h3 id="å…³äºç¨³å®šæ€§"><a href="#å…³äºç¨³å®šæ€§" class="headerlink" title="å…³äºç¨³å®šæ€§"></a>å…³äºç¨³å®šæ€§</h3><ul><li><p>ç¨³å®šçš„æ’åºç®—æ³•ï¼šå†’æ³¡æ’åºã€æ’å…¥æ’åºã€å½’å¹¶æ’åºå’ŒåŸºæ•°æ’åºã€‚</p></li><li><p>ä¸æ˜¯ç¨³å®šçš„æ’åºç®—æ³•ï¼šé€‰æ‹©æ’åºã€å¿«é€Ÿæ’åºã€å¸Œå°”æ’åºã€å †æ’åºã€‚</p></li></ul><h1 id="æ’åºç®—æ³•åˆ†æä¸å®ç°"><a href="#æ’åºç®—æ³•åˆ†æä¸å®ç°" class="headerlink" title="æ’åºç®—æ³•åˆ†æä¸å®ç°"></a>æ’åºç®—æ³•åˆ†æä¸å®ç°</h1><p>å¸¸ç”¨çš„åå¤§æ’åºç®—æ³•ä¸­æœ€ç®€å•çš„äº”ç§ï¼ˆå†’æ³¡ã€é€‰æ‹©ã€æ’å…¥ã€å¸Œå°”ã€å½’å¹¶ï¼‰</p><h2 id="1-äº¤æ¢æ’åº"><a href="#1-äº¤æ¢æ’åº" class="headerlink" title="1. äº¤æ¢æ’åº"></a>1. äº¤æ¢æ’åº</h2><h3 id="1ã€å†’æ³¡æ’åºï¼ˆBubble-Sortï¼‰ã€å‰åæ¯”è¾ƒ-äº¤æ¢ã€‘"><a href="#1ã€å†’æ³¡æ’åºï¼ˆBubble-Sortï¼‰ã€å‰åæ¯”è¾ƒ-äº¤æ¢ã€‘" class="headerlink" title="1ã€å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰ã€å‰åæ¯”è¾ƒ-äº¤æ¢ã€‘"></a>1ã€å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰ã€å‰åæ¯”è¾ƒ-äº¤æ¢ã€‘</h3><p>å†’æ³¡æ’åºæ˜¯æœ€ç®€å•ä¹Ÿæ˜¯æœ€å®¹æ˜“ç†è§£çš„æ’åºæ–¹æ³•ï¼Œå…¶åŸç†å°±æ˜¯é‡å¤åœ°èµ°è®¿è¿‡è¦æ’åºçš„æ•°åˆ—ï¼Œ</p><p>ä¸€æ¬¡æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœä»–ä»¬çš„é¡ºåºé”™è¯¯å°±æŠŠä»–ä»¬äº¤æ¢è¿‡æ¥ã€‚</p><p>èµ°è®¿æ•°åˆ—çš„å·¥ä½œæ˜¯é‡å¤åœ°è¿›è¡Œç›´åˆ°æ²¡æœ‰å†éœ€è¦äº¤æ¢ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥æ•°åˆ—å·²ç»æ’åºå®Œæˆã€‚</p><blockquote><p>è¿™ä¸ªç®—æ³•çš„åå­—ç”±æ¥æ˜¯å› ä¸ºè¶Šå°çš„å…ƒç´ ä¼šç»ç”±äº¤æ¢æ…¢æ…¢â€œæµ®â€åˆ°æ•°åˆ—çš„é¡¶ç«¯ï¼ˆå‡åºæˆ–é™åºæ’åˆ—ï¼‰ï¼Œ</p><p>å°±å¦‚åŒç¢³é…¸é¥®æ–™ä¸­äºŒæ°§åŒ–ç¢³çš„æ°”æ³¡æœ€ç»ˆä¼šä¸Šæµ®åˆ°é¡¶ç«¯ä¸€æ ·ï¼Œæ•…å<code>å†’æ³¡æ’åº</code>ã€‚</p></blockquote><h4 id="1-è¿‡ç¨‹å›¾è§£"><a href="#1-è¿‡ç¨‹å›¾è§£" class="headerlink" title="1.è¿‡ç¨‹å›¾è§£"></a>1.è¿‡ç¨‹å›¾è§£</h4><p><img src="/markdownImages/bubblesort.gif" class="lazyload placeholder" data-srcset="/markdownImages/bubblesort.gif" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å†’æ³¡æ’åºå›¾å½¢å±•ç¤º"></p><h4 id="2-ç®—æ³•æ€æƒ³"><a href="#2-ç®—æ³•æ€æƒ³" class="headerlink" title="2.ç®—æ³•æ€æƒ³"></a>2.ç®—æ³•æ€æƒ³</h4><ul><li>ä»ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå¼€å§‹æ¯”è¾ƒï¼Œå¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œåˆ™äº¤æ¢ä½ç½®ï¼Œç„¶åæ¯”è¾ƒç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªï¼Œé€æ¸å¾€å</li><li>ç»è¿‡ç¬¬ä¸€è½®åæœ€å¤§çš„å…ƒç´ å·²ç»æ’åœ¨æœ€åï¼Œæ‰€ä»¥é‡å¤ä¸Šè¿°æ“ä½œçš„è¯ç¬¬äºŒå¤§çš„åˆ™ä¼šæ’åœ¨å€’æ•°ç¬¬äºŒçš„ä½ç½®ã€‚</li><li>é‚£é‡å¤ä¸Šè¿°æ“ä½œn-1æ¬¡å³å¯å®Œæˆæ’åºï¼Œå› ä¸ºæœ€åä¸€æ¬¡åªæœ‰ä¸€ä¸ªå…ƒç´ æ‰€ä»¥ä¸éœ€è¦æ¯”è¾ƒ</li></ul><h4 id="3-ä»£ç å®ç°"><a href="#3-ä»£ç å®ç°" class="headerlink" title="3.ä»£ç å®ç°"></a>3.ä»£ç å®ç°</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># å†’æ³¡æ’åº</span><span class="token keyword">def</span> <span class="token function">bubbleSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""å†’æ³¡æ’åº"""</span>    <span class="token comment"># ç¬¬ä¸€å±‚forè¡¨ç¤ºå¾ªç¯çš„éæ•°</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># ç¬¬äºŒå±‚forè¡¨ç¤ºå…·ä½“æ¯”è¾ƒå“ªä¸¤ä¸ªå…ƒç´ </span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> i<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                <span class="token comment"># å¦‚æœå‰é¢çš„å¤§äºåé¢çš„ï¼Œåˆ™äº¤æ¢è¿™ä¸¤ä¸ªå…ƒç´ çš„ä½ç½®</span>                arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span>    <span class="token keyword">return</span> arr<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    li <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">38</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">47</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">36</span><span class="token punctuation">,</span><span class="token number">26</span><span class="token punctuation">,</span><span class="token number">27</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">46</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">48</span><span class="token punctuation">]</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>bubbleSort<span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="4-ç®—æ³•åˆ†æ"><a href="#4-ç®—æ³•åˆ†æ" class="headerlink" title="4.ç®—æ³•åˆ†æ"></a>4.ç®—æ³•åˆ†æ</h4><p>å†’æ³¡æ’åºæ˜¯ä¸€ç§ç®€å•ç›´æ¥æš´åŠ›çš„æ’åºç®—æ³•ã€‚</p><p>ä¸ºä»€ä¹ˆè¯´å®ƒæš´åŠ›ï¼Ÿå› ä¸ºæ¯ä¸€è½®æ¯”è¾ƒå¯èƒ½å¤šä¸ªå…ƒç´ ç§»åŠ¨ä½ç½®ï¼Œè€Œå…ƒç´ ä½ç½®çš„äº’æ¢æ˜¯éœ€è¦æ¶ˆè€—èµ„æºçš„ï¼Œ</p><p>æ‰€ä»¥è¿™æ˜¯ä¸€ç§åæ…¢çš„æ’åºç®—æ³•ï¼Œä»…é€‚ç”¨äºå¯¹äºå«æœ‰<code>è¾ƒå°‘å…ƒç´ </code>çš„æ•°åˆ—è¿›è¡Œæ’åºã€‚</p><ul><li>ç¨³å®šæ€§ï¼šæˆ‘ä»¬ä»ä»£ç ä¸­å¯ä»¥çœ‹å‡ºåªæœ‰å‰ä¸€ä¸ªå…ƒç´ å¤§äºåä¸€ä¸ªå…ƒç´ æ‰å¯èƒ½äº¤æ¢ä½ç½®ï¼Œæ‰€ä»¥ç›¸åŒå…ƒç´ çš„ç›¸å¯¹é¡ºåºä¸å¯èƒ½æ”¹å˜ï¼Œæ‰€ä»¥å®ƒæ˜¯<code>ç¨³å®šæ’åº</code></li><li>æ¯”è¾ƒæ€§ï¼šå› ä¸ºæ’åºæ—¶å…ƒç´ ä¹‹é—´éœ€è¦æ¯”è¾ƒï¼Œæ‰€ä»¥æ˜¯<code>æ¯”è¾ƒæ’åº</code></li><li>æ—¶é—´å¤æ‚åº¦ï¼šå› ä¸ºå®ƒéœ€è¦åŒå±‚å¾ªç¯n*(n-1))ï¼Œæ‰€ä»¥å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸ºO(n^2)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šåªéœ€è¦å¸¸æ•°ä¸ªè¾…åŠ©å•å…ƒï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦ä¸ºO(1)ï¼Œæˆ‘ä»¬æŠŠç©ºé—´å¤æ‚åº¦ä¸ºO(1)çš„æ’åºæˆä¸º<code>åŸåœ°æ’åºï¼ˆin-placeï¼‰</code></li><li>è®°å¿†æ–¹æ³•ï¼šæƒ³è±¡æˆæ°”æ³¡ï¼Œä¸€å±‚ä¸€å±‚çš„å¾€ä¸Šå˜å¤§</li></ul><h3 id="2ã€å¿«é€Ÿæ’åºï¼ˆQuick-Sortï¼‰ã€é€‰å–ä¸€ä¸ªåŸºå‡†å€¼ï¼Œå°æ•°åœ¨å·¦å¤§æ•°åœ¨åœ¨å³ã€‘"><a href="#2ã€å¿«é€Ÿæ’åºï¼ˆQuick-Sortï¼‰ã€é€‰å–ä¸€ä¸ªåŸºå‡†å€¼ï¼Œå°æ•°åœ¨å·¦å¤§æ•°åœ¨åœ¨å³ã€‘" class="headerlink" title="2ã€å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰ã€é€‰å–ä¸€ä¸ªåŸºå‡†å€¼ï¼Œå°æ•°åœ¨å·¦å¤§æ•°åœ¨åœ¨å³ã€‘"></a>2ã€å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰ã€é€‰å–ä¸€ä¸ªåŸºå‡†å€¼ï¼Œå°æ•°åœ¨å·¦å¤§æ•°åœ¨åœ¨å³ã€‘</h3><p>å¿«é€Ÿæ’åºæ˜¯ç”±ä¸œå°¼Â·éœå°”æ‰€å‘å±•çš„ä¸€ç§æ’åºç®—æ³•ã€‚åœ¨å¹³å‡çŠ¶å†µä¸‹ï¼Œæ’åº n ä¸ªé¡¹ç›®è¦ ÎŸ(nlogn) æ¬¡æ¯”è¾ƒã€‚</p><p>åœ¨æœ€åçŠ¶å†µä¸‹åˆ™éœ€è¦ ÎŸ(n2) æ¬¡æ¯”è¾ƒï¼Œä½†è¿™ç§çŠ¶å†µå¹¶ä¸å¸¸è§ã€‚</p><p>äº‹å®ä¸Šï¼Œå¿«é€Ÿæ’åºé€šå¸¸æ˜æ˜¾æ¯”å…¶ä»– ÎŸ(nlogn) ç®—æ³•æ›´å¿«ï¼Œå› ä¸ºå®ƒçš„å†…éƒ¨å¾ªç¯ï¼ˆinner loopï¼‰å¯ä»¥åœ¨å¤§éƒ¨åˆ†çš„æ¶æ„ä¸Šå¾ˆæœ‰æ•ˆç‡åœ°è¢«å®ç°å‡ºæ¥ã€‚</p><p>å¿«é€Ÿæ’åºä½¿ç”¨åˆ†æ²»æ³•ï¼ˆDivide and conquerï¼‰ç­–ç•¥æ¥æŠŠä¸€ä¸ªä¸²è¡Œï¼ˆlistï¼‰åˆ†ä¸ºä¸¤ä¸ªå­ä¸²è¡Œï¼ˆsub-listsï¼‰ã€‚</p><p>å¿«é€Ÿæ’åºåˆæ˜¯ä¸€ç§åˆ†è€Œæ²»ä¹‹æ€æƒ³åœ¨æ’åºç®—æ³•ä¸Šçš„å…¸å‹åº”ç”¨ã€‚æœ¬è´¨ä¸Šæ¥çœ‹ï¼Œå¿«é€Ÿæ’åºåº”è¯¥ç®—æ˜¯åœ¨å†’æ³¡æ’åºåŸºç¡€ä¸Šçš„é€’å½’åˆ†æ²»æ³•ã€‚</p><p>å¿«é€Ÿæ’åºçš„åå­—èµ·çš„æ˜¯ç®€å•ç²—æš´ï¼Œå› ä¸ºä¸€å¬åˆ°è¿™ä¸ªåå­—ä½ å°±çŸ¥é“å®ƒå­˜åœ¨çš„æ„ä¹‰ï¼Œå°±æ˜¯å¿«ï¼Œè€Œä¸”æ•ˆç‡é«˜ï¼å®ƒæ˜¯å¤„ç†å¤§æ•°æ®æœ€å¿«çš„æ’åºç®—æ³•ä¹‹ä¸€äº†ã€‚</p><p>è™½ç„¶ Worst Case çš„æ—¶é—´å¤æ‚åº¦è¾¾åˆ°äº† O(nÂ²)ï¼Œä½†æ˜¯äººå®¶å°±æ˜¯ä¼˜ç§€ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ¯”å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º O(n logn) çš„æ’åºç®—æ³•è¡¨ç°è¦æ›´å¥½ï¼Œ</p><p>å¯æ˜¯è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ã€‚å¥½åœ¨æˆ‘çš„å¼ºè¿«ç—‡åˆçŠ¯äº†ï¼ŒæŸ¥äº† N å¤šèµ„æ–™ç»ˆäºåœ¨ã€Šç®—æ³•è‰ºæœ¯ä¸ä¿¡æ¯å­¦ç«èµ›ã€‹ä¸Šæ‰¾åˆ°äº†æ»¡æ„çš„ç­”æ¡ˆï¼š</p><p>å¿«é€Ÿæ’åºçš„æœ€åè¿è¡Œæƒ…å†µæ˜¯ O(nÂ²)ï¼Œæ¯”å¦‚è¯´é¡ºåºæ•°åˆ—çš„å¿«æ’ã€‚ä½†å®ƒçš„å¹³æ‘ŠæœŸæœ›æ—¶é—´æ˜¯ O(nlogn)ï¼Œä¸” O(nlogn) è®°å·ä¸­éšå«çš„å¸¸æ•°å› å­å¾ˆå°ï¼Œ</p><p>æ¯”å¤æ‚åº¦ç¨³å®šç­‰äº O(nlogn) çš„å½’å¹¶æ’åºè¦å°å¾ˆå¤šã€‚æ‰€ä»¥ï¼Œå¯¹ç»å¤§å¤šæ•°é¡ºåºæ€§è¾ƒå¼±çš„éšæœºæ•°åˆ—è€Œè¨€ï¼Œå¿«é€Ÿæ’åºæ€»æ˜¯ä¼˜äºå½’å¹¶æ’åºã€‚</p><h4 id="1-è¿‡ç¨‹å›¾è§£-1"><a href="#1-è¿‡ç¨‹å›¾è§£-1" class="headerlink" title="1.è¿‡ç¨‹å›¾è§£"></a>1.è¿‡ç¨‹å›¾è§£</h4><p><img src="/markdownImages/quicksort.gif" class="lazyload placeholder" data-srcset="/markdownImages/quicksort.gif" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å¿«é€Ÿæ’åºå›¾å½¢å±•ç¤º"></p><h4 id="2-ç®—æ³•æ€æƒ³-1"><a href="#2-ç®—æ³•æ€æƒ³-1" class="headerlink" title="2.ç®—æ³•æ€æƒ³"></a>2.ç®—æ³•æ€æƒ³</h4><ul><li>ä»æ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç§°ä¸º â€œåŸºå‡†â€ï¼ˆpivotï¼‰;</li><li>é‡æ–°æ’åºæ•°åˆ—ï¼Œæ‰€æœ‰å…ƒç´ æ¯”åŸºå‡†å€¼å°çš„æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰å…ƒç´ æ¯”åŸºå‡†å€¼å¤§çš„æ‘†åœ¨åŸºå‡†çš„åé¢ï¼ˆç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä¸€è¾¹ï¼‰ã€‚</li><li>åœ¨è¿™ä¸ªåˆ†åŒºé€€å‡ºä¹‹åï¼Œè¯¥åŸºå‡†å°±å¤„äºæ•°åˆ—çš„ä¸­é—´ä½ç½®ã€‚è¿™ä¸ªç§°ä¸ºåˆ†åŒºï¼ˆpartitionï¼‰æ“ä½œï¼›</li><li>é€’å½’åœ°ï¼ˆrecursiveï¼‰æŠŠå°äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—å’Œå¤§äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—æ’åºï¼›</li></ul><p>é€’å½’çš„æœ€åº•éƒ¨æƒ…å½¢ï¼Œæ˜¯æ•°åˆ—çš„å¤§å°æ˜¯é›¶æˆ–ä¸€ï¼Œä¹Ÿå°±æ˜¯æ°¸è¿œéƒ½å·²ç»è¢«æ’åºå¥½äº†ã€‚</p><p>è™½ç„¶ä¸€ç›´é€’å½’ä¸‹å»ï¼Œä½†æ˜¯è¿™ä¸ªç®—æ³•æ€»ä¼šé€€å‡ºï¼Œå› ä¸ºåœ¨æ¯æ¬¡çš„è¿­ä»£ï¼ˆiterationï¼‰ä¸­ï¼Œå®ƒè‡³å°‘ä¼šæŠŠä¸€ä¸ªå…ƒç´ æ‘†åˆ°å®ƒæœ€åçš„ä½ç½®å»ã€‚</p><h4 id="3-ä»£ç å®ç°-1"><a href="#3-ä»£ç å®ç°-1" class="headerlink" title="3.ä»£ç å®ç°"></a>3.ä»£ç å®ç°</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># å¿«é€Ÿæ’åºï¼šæœ€å¿«çš„n*logN</span><span class="token keyword">def</span> <span class="token function">quickSort</span><span class="token punctuation">(</span>lst<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>lst<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">2</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> lst    pivot <span class="token operator">=</span> lst<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    left <span class="token operator">=</span> <span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> lst<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token keyword">if</span> i <span class="token operator">&lt;=</span> pivot<span class="token punctuation">]</span>    right <span class="token operator">=</span> <span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> lst<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token keyword">if</span> i <span class="token operator">></span> pivot<span class="token punctuation">]</span>    arr <span class="token operator">=</span> quickSort<span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">[</span>pivot<span class="token punctuation">]</span> <span class="token operator">+</span> quickSort<span class="token punctuation">(</span>right<span class="token punctuation">)</span>    <span class="token keyword">return</span> arr<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="4-ç®—æ³•åˆ†æ-1"><a href="#4-ç®—æ³•åˆ†æ-1" class="headerlink" title="4.ç®—æ³•åˆ†æ"></a>4.ç®—æ³•åˆ†æ</h4><ul><li><p>1.æ¯”è¾ƒæ€§ï¼šæ’åºæ—¶å…ƒç´ ä¹‹é—´éœ€è¦æ¯”è¾ƒï¼Œæ‰€ä»¥ä¸º<code>æ¯”è¾ƒæ’åº</code></p></li><li><p>2.ç¨³å®šæ€§ï¼šæˆ‘ä»¬ä»ä»£ç ä¸­å¯ä»¥çœ‹åˆ°å½“å‰©ä½™æ•°åˆ—ä¸­å…ƒç´ å°äºç­‰äºåŸºå‡†å…ƒç´ çš„ï¼Œå°±æŠŠä»–ä»¬æ”¾åˆ°åŸºå‡†å…ƒç´ å‰é¢é‡æ–°æ’åˆ—ï¼Œ</p><p>  å‰©ä½™æ•°åˆ—ä¸­å…ƒç´ å¤§äºåŸºå‡†å…ƒç´ çš„ï¼Œå°±æŠŠä»–ä»¬æ”¾åˆ°åŸºå‡†å…ƒç´ åé¢é¢é‡æ–°æ’åˆ—ï¼Œæ•…ä¸º<code>ä¸ç¨³å®šæ’åº</code></p></li><li><p>3.æ—¶é—´å¤æ‚åº¦ï¼š å¤æ‚åº¦ä¸º<code>O(n*logN)</code></p></li><li><p>4.ç©ºé—´å¤æ‚åº¦ï¼šå¤æ‚åº¦ä¸º<code>O(n)</code></p></li><li><p>5.è®°å¿†æ–¹æ³•ï¼šæ¯”æˆ‘å¤§çš„å¾€å‰ç«™ï¼Œæ¯”æˆ‘å°çš„å¾€åç«™ï¼Œä½ ä»¬è‡ªå·±å†æŒ‰ç…§æˆ‘çš„è§„çŸ©é‡æ–°æ’ä¸€ä¸‹ï¼Œ æœ‰ç‚¹åƒå†›è®­æ’é˜Ÿ</p></li></ul><h2 id="2-æ’å…¥æ’åº"><a href="#2-æ’å…¥æ’åº" class="headerlink" title="2. æ’å…¥æ’åº"></a>2. æ’å…¥æ’åº</h2><h3 id="3ã€æ’å…¥æ’åº-Insert-Sort-ã€é€ä¸ªæ’å…¥åˆ°å‰é¢çš„æœ‰åºæ•°ä¸­ã€‘"><a href="#3ã€æ’å…¥æ’åº-Insert-Sort-ã€é€ä¸ªæ’å…¥åˆ°å‰é¢çš„æœ‰åºæ•°ä¸­ã€‘" class="headerlink" title="3ã€æ’å…¥æ’åº(Insert Sort)ã€é€ä¸ªæ’å…¥åˆ°å‰é¢çš„æœ‰åºæ•°ä¸­ã€‘"></a>3ã€æ’å…¥æ’åº(Insert Sort)ã€é€ä¸ªæ’å…¥åˆ°å‰é¢çš„æœ‰åºæ•°ä¸­ã€‘</h3><p>æ’å…¥æ’åºï¼ˆInsertion-Sortï¼‰çš„ç®—æ³•æè¿°æ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ã€‚</p><p>å®ƒçš„å·¥ä½œåŸç†æ˜¯é€šè¿‡æ„å»ºæœ‰åºåºåˆ—ï¼Œå¯¹äºæœªæ’åºæ•°æ®ï¼Œåœ¨å·²æ’åºåºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼Œæ‰¾åˆ°ç›¸åº”ä½ç½®å¹¶æ’å…¥ã€‚</p><p>ä»£ç å®ç°è™½ç„¶æ²¡æœ‰å†’æ³¡æ’åºå’Œé€‰æ‹©æ’åºé‚£ä¹ˆç®€å•ç²—æš´ï¼Œä½†å®ƒçš„åŸç†åº”è¯¥æ˜¯æœ€å®¹æ˜“ç†è§£çš„äº†ï¼Œå› ä¸ºåªè¦è”æƒ³åˆ°æ‰“æ‰‘å…‹æ—¶çš„æ’åºå°±å¥½äº†</p><h4 id="1-è¿‡ç¨‹å›¾è§£-2"><a href="#1-è¿‡ç¨‹å›¾è§£-2" class="headerlink" title="1.è¿‡ç¨‹å›¾è§£"></a>1.è¿‡ç¨‹å›¾è§£</h4><p><img src="/markdownImages/insertsort.gif" class="lazyload placeholder" data-srcset="/markdownImages/insertsort.gif" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="æ’å…¥æ’åºå›¾å½¢å±•ç¤º"></p><h4 id="2-ç®—æ³•æ€æƒ³-2"><a href="#2-ç®—æ³•æ€æƒ³-2" class="headerlink" title="2.ç®—æ³•æ€æƒ³"></a>2.ç®—æ³•æ€æƒ³</h4><ul><li>1.ä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹å’Œå‰é¢çš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå‰é¢çš„å…ƒç´ æ¯”å½“å‰å…ƒç´ å¤§ï¼Œåˆ™å°†å‰é¢å…ƒç´  åç§»ï¼Œå½“å‰å…ƒç´ ä¾æ¬¡å¾€å‰ï¼Œç›´åˆ°æ‰¾åˆ°æ¯”å®ƒå°æˆ–ç­‰äºå®ƒçš„å…ƒç´ æ’å…¥åœ¨å…¶åé¢ç„¶å</li><li>2.é€‰æ‹©ç¬¬ä¸‰ä¸ªå…ƒç´ ï¼Œé‡å¤ä¸Šè¿°æ“ä½œï¼Œè¿›è¡Œæ’å…¥</li><li>3.ä¾æ¬¡é€‰æ‹©åˆ°æœ€åä¸€ä¸ªå…ƒç´ ï¼Œæ’å…¥åå³å®Œæˆæ‰€æœ‰æ’åº</li></ul><h4 id="3-ä»£ç å®ç°-2"><a href="#3-ä»£ç å®ç°-2" class="headerlink" title="3.ä»£ç å®ç°"></a>3.ä»£ç å®ç°</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">insert_sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""æ’å…¥æ’åº"""</span>    <span class="token comment"># ç¬¬ä¸€å±‚forè¡¨ç¤ºå¾ªç¯æ’å…¥çš„éæ•°</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment">## å€’åºå–ä»ä¸‹æ ‡içš„å…ƒç´ å¼€å§‹åˆ°ä¸‹æ ‡0</span>                <span class="token keyword">if</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                    arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span>                <span class="token keyword">else</span><span class="token punctuation">:</span> <span class="token comment">## å¦‚æœå½“å‰æ•°å€¼å¤§äºå‰ä¸€ä¸ªæ•°å€¼ï¼Œé€€å‡º</span>                    <span class="token keyword">break</span>    <span class="token keyword">return</span> arr<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="4-ç®—æ³•åˆ†æ-2"><a href="#4-ç®—æ³•åˆ†æ-2" class="headerlink" title="4.ç®—æ³•åˆ†æ"></a>4.ç®—æ³•åˆ†æ</h4><blockquote><p>æ’å…¥æ’åºçš„é€‚ç”¨åœºæ™¯ï¼šä¸€ä¸ªæ–°å…ƒç´ éœ€è¦æ’å…¥åˆ°ä¸€ç»„å·²ç»æ˜¯æœ‰åºçš„æ•°ç»„ä¸­ï¼Œæˆ–è€…æ˜¯ä¸€ç»„åŸºæœ¬æœ‰åºçš„æ•°ç»„æ’åº.</p></blockquote><ul><li><ol><li>æ¯”è¾ƒæ€§ï¼šæ’åºæ—¶å…ƒç´ ä¹‹é—´éœ€è¦æ¯”è¾ƒï¼Œæ‰€ä»¥ä¸º<code>æ¯”è¾ƒæ’åº</code></li></ol></li><li><ol start="2"><li>ç¨³å®šæ€§ï¼šä»ä»£ç æˆ‘ä»¬å¯ä»¥çœ‹å‡ºåªæœ‰æ¯”è¾ƒå…ƒç´ å¤§äºå½“å‰å…ƒç´ ï¼Œæ¯”è¾ƒå…ƒç´ æ‰ä¼šå¾€åç§»åŠ¨ï¼Œæ‰€ä»¥ç›¸åŒå…ƒç´ æ˜¯ä¸ä¼šæ”¹å˜ç›¸å¯¹é¡ºåº</li></ol></li><li><ol start="3"><li>æ—¶é—´å¤æ‚åº¦ï¼šæ’å…¥æ’åºåŒæ ·éœ€è¦ä¸¤æ¬¡å¾ªåä¸€ä¸ªä¸€ä¸ªæ¯”è¾ƒï¼Œæ•…æ—¶é—´å¤æ‚åº¦ä¹Ÿä¸º<code>O(n^2)</code></li></ol></li><li><ol start="4"><li>ç©ºé—´å¤æ‚åº¦ï¼šåªéœ€è¦å¸¸æ•°ä¸ªè¾…åŠ©å•å…ƒï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦ä¹Ÿä¸º<code>O(1)</code></li></ol></li><li><ol start="5"><li>è®°å¿†æ–¹æ³•ï¼šæƒ³è±¡æˆåœ¨ä¹¦æ¶ä¸­æ’ä¹¦ï¼šå…ˆæ‰¾åˆ°ç›¸åº”ä½ç½®ï¼Œå°†åé¢çš„ä¹¦å¾€åæ¨ï¼Œå†å°†ä¹¦æ’å…¥</li></ol></li></ul><h3 id="4ã€å¸Œå°”æ’åºï¼ˆShell-Sortï¼‰ã€ä»å¤§èŒƒå›´åˆ°å°èŒƒå›´è¿›è¡Œæ¯”è¾ƒ-äº¤æ¢ã€‘ç±»ä¼¼å†’æ³¡å’Œæ’å…¥çš„è”åˆ"><a href="#4ã€å¸Œå°”æ’åºï¼ˆShell-Sortï¼‰ã€ä»å¤§èŒƒå›´åˆ°å°èŒƒå›´è¿›è¡Œæ¯”è¾ƒ-äº¤æ¢ã€‘ç±»ä¼¼å†’æ³¡å’Œæ’å…¥çš„è”åˆ" class="headerlink" title="4ã€å¸Œå°”æ’åºï¼ˆShell Sortï¼‰ã€ä»å¤§èŒƒå›´åˆ°å°èŒƒå›´è¿›è¡Œæ¯”è¾ƒ-äº¤æ¢ã€‘ç±»ä¼¼å†’æ³¡å’Œæ’å…¥çš„è”åˆ"></a>4ã€å¸Œå°”æ’åºï¼ˆShell Sortï¼‰ã€ä»å¤§èŒƒå›´åˆ°å°èŒƒå›´è¿›è¡Œæ¯”è¾ƒ-äº¤æ¢ã€‘ç±»ä¼¼å†’æ³¡å’Œæ’å…¥çš„è”åˆ</h3><p>å¸Œå°”æ’åº(Shellâ€™s Sort)æ˜¯æ’å…¥æ’åºçš„ä¸€ç§åˆç§°â€œç¼©å°å¢é‡(é—´éš”)æ’åºâ€ï¼ˆDiminishing Increment Sortï¼‰ï¼Œ</p><p>æ˜¯<code>æ’å…¥æ’åº</code>ç®—æ³•çš„ä¸€ç§æ›´é«˜æ•ˆçš„æ”¹è¿›ç‰ˆæœ¬ï¼ŒåŸºäºÂ·æ’å…¥æ’åºÂ·çš„ä»¥ä¸‹ä¸¤ç‚¹æ€§è´¨è€Œæå‡ºæ”¹è¿›æ–¹æ³•çš„ï¼š</p><ul><li>æ’å…¥æ’åºåœ¨å¯¹å‡ ä¹å·²ç»æ’å¥½åºçš„æ•°æ®æ“ä½œæ—¶ï¼Œæ•ˆç‡é«˜ï¼Œå³å¯ä»¥è¾¾åˆ°çº¿æ€§æ’åºçš„æ•ˆç‡ï¼›</li><li>ä½†æ’å…¥æ’åºä¸€èˆ¬æ¥è¯´æ˜¯ä½æ•ˆçš„ï¼Œå› ä¸ºæ’å…¥æ’åºæ¯æ¬¡åªèƒ½å°†æ•°æ®ç§»åŠ¨ä¸€ä½</li></ul><p>å®ƒä¸æ’å…¥æ’åºçš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒä¼šä¼˜å…ˆæ¯”è¾ƒè·ç¦»è¾ƒè¿œçš„å…ƒç´ ï¼Œè¯¥æ–¹æ³•å› D.L.Shelläº1959å¹´æå‡ºè€Œå¾—åã€‚</p><p>å¸Œå°”æ’åºçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼š</p><p>å…ˆå°†æ•´ä¸ªå¾…æ’åºçš„è®°å½•åºåˆ—åˆ†å‰²æˆä¸ºè‹¥å¹²å­åºåˆ—åˆ†åˆ«è¿›è¡Œç›´æ¥æ’å…¥æ’åºï¼Œ</p><p>å¾…æ•´ä¸ªåºåˆ—ä¸­çš„è®°å½•â€œåŸºæœ¬æœ‰åºâ€æ—¶ï¼Œå†å¯¹å…¨ä½“è®°å½•è¿›è¡Œä¾æ¬¡ç›´æ¥æ’å…¥æ’åºã€‚</p><h4 id="1-è¿‡ç¨‹å›¾è§£-3"><a href="#1-è¿‡ç¨‹å›¾è§£-3" class="headerlink" title="1.è¿‡ç¨‹å›¾è§£"></a>1.è¿‡ç¨‹å›¾è§£</h4><p><img src="/markdownImages/shellsort.jpg" class="lazyload placeholder" data-srcset="/markdownImages/shellsort.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å¸Œå°”æ’åºå›¾å½¢å±•ç¤º"></p><h4 id="2-ç®—æ³•æ€æƒ³-3"><a href="#2-ç®—æ³•æ€æƒ³-3" class="headerlink" title="2.ç®—æ³•æ€æƒ³"></a>2.ç®—æ³•æ€æƒ³</h4><p>å¸Œå°”æ’åºçš„æ•´ä½“æ€æƒ³æ˜¯å°†å›ºå®šé—´éš”çš„å‡ ä¸ªå…ƒç´ ä¹‹é—´æ’åºï¼Œç„¶åå†ç¼©å°è¿™ä¸ªé—´éš”ã€‚è¿™æ ·åˆ°æœ€åæ•°åˆ—å°±æˆä¸ºäº†<code>åŸºæœ¬æœ‰åºæ•°åˆ—</code>ï¼Œ</p><p>è€Œå‰é¢æˆ‘ä»¬è®²è¿‡<code>æ’å…¥æ’åº</code>å¯¹åŸºæœ¬æœ‰åºæ•°åˆ—æ’åºæ•ˆæœè¾ƒå¥½ã€‚</p><ul><li><ol><li>è®¡ç®—ä¸€ä¸ªå¢é‡ï¼ˆé—´éš”ï¼‰å€¼ </li></ol></li><li><ol start="2"><li>å¯¹å…ƒç´ è¿›è¡Œå¢é‡å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œæ¯”å¦‚å¢é‡å€¼ä¸º7ï¼Œé‚£ä¹ˆå°±å¯¹0,7,14,21â€¦ä¸ªå…ƒç´ è¿›è¡Œæ’å…¥æ’åº</li></ol></li><li><ol start="3"><li>ç„¶åå¯¹1,8,15â€¦è¿›è¡Œæ’åºï¼Œä¾æ¬¡é€’å¢è¿›è¡Œæ’åº </li></ol></li><li><ol start="4"><li>æ‰€æœ‰å…ƒç´ æ’åºå®Œåï¼Œç¼©å°å¢é‡æ¯”å¦‚ä¸º3ï¼Œç„¶ååˆé‡å¤ä¸Šè¿°ç¬¬2ï¼Œ3æ­¥ </li></ol></li><li><ol start="5"><li>æœ€åç¼©å°å¢é‡è‡³1æ—¶ï¼Œæ•°åˆ—å·²ç»åŸºæœ¬æœ‰åºï¼Œæœ€åä¸€éæ™®é€šæ’å…¥å³å¯</li></ol></li></ul><p>å·²çŸ¥çš„æœ€å¢é‡å¼æ˜¯ç”± <code>Sedgewick</code> æå‡ºçš„ (1, 5, 19, 41, 109,â€¦)ï¼Œ</p><p>è¯¥æ­¥é•¿çš„é¡¹æ¥è‡ª 9 * 4^i - 9 * 2^i + 1 å’Œ 4^i - 3 * 2^i + 1 è¿™ä¸¤ä¸ªç®—å¼ã€‚</p><p>è¿™é¡¹ç ”ç©¶ä¹Ÿè¡¨æ˜ <code>æ¯”è¾ƒ</code> åœ¨å¸Œå°”æ’åºä¸­æ˜¯æœ€ä¸»è¦çš„æ“ä½œï¼Œè€Œä¸æ˜¯äº¤æ¢ã€‚</p><p>ç”¨è¿™æ ·å¢é‡å¼çš„<code>å¸Œå°”æ’åº</code>æ¯”<code>æ’å…¥æ’åº</code>å’Œ<code>å †æ’åº</code>éƒ½è¦å¿«ï¼Œç”šè‡³åœ¨å°æ•°ç»„ä¸­æ¯”<code>å¿«é€Ÿæ’åº</code>è¿˜å¿«ï¼Œ</p><p>ä½†æ˜¯åœ¨æ¶‰åŠå¤§é‡æ•°æ®æ—¶<code>å¸Œå°”æ’åº</code>è¿˜æ˜¯æ¯”<code>å¿«é€Ÿæ’åº</code>æ…¢ã€‚</p><h4 id="3-ä»£ç å®ç°-3"><a href="#3-ä»£ç å®ç°-3" class="headerlink" title="3.ä»£ç å®ç°"></a>3.ä»£ç å®ç°</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">shell_sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""å¸Œå°”æ’åº"""</span>    <span class="token comment"># å–æ•´è®¡ç®—å¢é‡ï¼ˆé—´éš”ï¼‰å€¼</span>    gap <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>    <span class="token keyword">while</span> gap <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">:</span>        <span class="token comment"># ä»å¢é‡å€¼å¼€å§‹éå†æ¯”è¾ƒ</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>gap<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            j <span class="token operator">=</span> i            current <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>            <span class="token comment"># å…ƒç´ ä¸ä»–åŒåˆ—çš„å‰é¢çš„æ¯ä¸ªå…ƒç´ æ¯”è¾ƒï¼Œå¦‚æœæ¯”å‰é¢çš„å°åˆ™äº’æ¢</span>            <span class="token keyword">while</span> j <span class="token operator">-</span> gap <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> current <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> gap<span class="token punctuation">]</span><span class="token punctuation">:</span>                arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> gap<span class="token punctuation">]</span>                j <span class="token operator">-=</span> gap            arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> current        <span class="token comment"># ç¼©å°å¢é‡ï¼ˆé—´éš”ï¼‰å€¼</span>        gap <span class="token operator">//=</span> <span class="token number">2</span>    <span class="token keyword">return</span> arr<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="4-ç®—æ³•åˆ†æ-3"><a href="#4-ç®—æ³•åˆ†æ-3" class="headerlink" title="4.ç®—æ³•åˆ†æ"></a>4.ç®—æ³•åˆ†æ</h4><ul><li><p>1.æ¯”è¾ƒæ€§ï¼šæ’åºæ—¶å…ƒç´ ä¹‹é—´éœ€è¦æ¯”è¾ƒï¼Œæ‰€ä»¥ä¸º<code>æ¯”è¾ƒæ’åº</code></p></li><li><p>2.ç¨³å®šæ€§ï¼šå› ä¸ºå¸Œå°”æ’åºæ˜¯é—´éš”çš„æ’å…¥ï¼Œæ‰€ä»¥å­˜åœ¨ç›¸åŒå…ƒç´ ç›¸å¯¹é¡ºåºè¢«æ‰“ä¹±ï¼Œæ‰€ä»¥æ˜¯<code>ä¸ç¨³å®šæ’åº</code></p></li><li><p>3.æ—¶é—´å¤æ‚åº¦ï¼š æœ€åæ—¶é—´å¤æ‚åº¦O(n^2)å¹³å‡å¤æ‚åº¦ä¸º<code>O(n^1.3)</code></p></li><li><p>4.ç©ºé—´å¤æ‚åº¦ï¼šåªéœ€è¦å¸¸æ•°ä¸ªè¾…åŠ©å•å…ƒï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦ä¹Ÿä¸º<code>O(1)</code></p></li><li><p>5.è®°å¿†æ–¹æ³•ï¼šæ’å…¥æ’åºæ˜¯æ¯è½®éƒ½æ˜¯ä¸€å°æ­¥ï¼Œå¸Œå°”æ’åºæ˜¯å…ˆå¤§æ­¥åå°æ­¥ï¼Œå®ƒç¬¬ä¸€ä¸ªçªç ´O(n2)çš„æ’åºç®—æ³•ã€‚</p><p>è”æƒ³èµ·é˜¿å§†æ–¯ç‰¹æœ—ç™»æœˆä¹‹åè¯´ï¼šè¿™æ˜¯æˆ‘ä¸ªäººä¸€å°æ­¥ï¼Œå´æ˜¯äººç±»è¿ˆå‡ºçš„ä¸€å¤§æ­¥ã€‚</p></li></ul><h2 id="3-é€‰æ‹©æ’åº"><a href="#3-é€‰æ‹©æ’åº" class="headerlink" title="3. é€‰æ‹©æ’åº"></a>3. é€‰æ‹©æ’åº</h2><h3 id="5ã€é€‰æ‹©æ’åºï¼ˆSelection-sortï¼‰ã€é€‰æ‹©æœ€å°çš„æ•°æ®æ”¾åœ¨å‰é¢ã€‘"><a href="#5ã€é€‰æ‹©æ’åºï¼ˆSelection-sortï¼‰ã€é€‰æ‹©æœ€å°çš„æ•°æ®æ”¾åœ¨å‰é¢ã€‘" class="headerlink" title="5ã€é€‰æ‹©æ’åºï¼ˆSelection sortï¼‰ã€é€‰æ‹©æœ€å°çš„æ•°æ®æ”¾åœ¨å‰é¢ã€‘"></a>5ã€é€‰æ‹©æ’åºï¼ˆSelection sortï¼‰ã€é€‰æ‹©æœ€å°çš„æ•°æ®æ”¾åœ¨å‰é¢ã€‘</h3><p>é€‰æ‹©æ’åºï¼ˆSelection sortï¼‰æ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ã€‚</p><p>æ— è®ºä»€ä¹ˆæ•°æ®è¿›å»éƒ½æ˜¯ O(nÂ²) çš„æ—¶é—´å¤æ‚åº¦ã€‚</p><p>æ‰€ä»¥ç”¨åˆ°å®ƒçš„æ—¶å€™ï¼Œæ•°æ®è§„æ¨¡è¶Šå°è¶Šå¥½ã€‚å”¯ä¸€çš„å¥½å¤„å¯èƒ½å°±æ˜¯ä¸å ç”¨é¢å¤–çš„å†…å­˜ç©ºé—´äº†å§ã€‚</p><p>å®ƒçš„å·¥ä½œåŸç†æ˜¯æ¯ä¸€æ¬¡ä»å¾…æ’åºçš„æ•°æ®å…ƒç´ ä¸­é€‰å‡ºæœ€å°ï¼ˆæˆ–æœ€å¤§ï¼‰çš„ä¸€ä¸ªå…ƒç´ ï¼Œ</p><p>å­˜æ”¾åœ¨åºåˆ—çš„èµ·å§‹ä½ç½®ï¼Œæ‰€ä»¥ç§°ä¸ºï¼š<code>é€‰æ‹©æ’åº</code></p><h4 id="1-è¿‡ç¨‹å›¾è§£-4"><a href="#1-è¿‡ç¨‹å›¾è§£-4" class="headerlink" title="1.è¿‡ç¨‹å›¾è§£"></a>1.è¿‡ç¨‹å›¾è§£</h4><p><img src="/markdownImages/selectsort.gif" class="lazyload placeholder" data-srcset="/markdownImages/selectsort.gif" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="é€‰æ‹©æ’åºå›¾å½¢å±•ç¤º"></p><h4 id="2-ç®—æ³•æ€æƒ³-4"><a href="#2-ç®—æ³•æ€æƒ³-4" class="headerlink" title="2.ç®—æ³•æ€æƒ³"></a>2.ç®—æ³•æ€æƒ³</h4><ul><li>è®¾ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºæ¯”è¾ƒå…ƒç´ ï¼Œä¾æ¬¡å’Œåé¢çš„å…ƒç´ æ¯”è¾ƒï¼Œæ¯”è¾ƒå®Œæ‰€æœ‰å…ƒç´ æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰çš„å…ƒç´ ï¼Œå°†å®ƒå’Œç¬¬ä¸€ä¸ªå…ƒç´ äº’æ¢</li><li>é‡å¤ä¸Šè¿°æ“ä½œï¼Œæˆ‘ä»¬æ‰¾å‡ºç¬¬äºŒå°ï¼ˆå¤§ï¼‰çš„å…ƒç´ å’Œç¬¬äºŒä¸ªä½ç½®çš„å…ƒç´ äº’æ¢ï¼Œä»¥æ­¤ç±»æ¨æ‰¾å‡ºå‰©ä½™æœ€å°å…ƒç´ å°†å®ƒæ¢åˆ°å‰é¢ï¼Œå³å®Œæˆæ’åº</li></ul><h4 id="3-ä»£ç å®ç°-4"><a href="#3-ä»£ç å®ç°-4" class="headerlink" title="3.ä»£ç å®ç°"></a>3.ä»£ç å®ç°</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">selection_sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""é€‰æ‹©æ’åº"""</span>    <span class="token comment"># ç¬¬ä¸€å±‚forè¡¨ç¤ºå¾ªç¯é€‰æ‹©çš„éæ•°</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># å°†èµ·å§‹å…ƒç´ è®¾ä¸ºæœ€å°å…ƒç´ </span>        min_index <span class="token operator">=</span> i        <span class="token comment"># ç¬¬äºŒå±‚forè¡¨ç¤ºæœ€å°å…ƒç´ å’Œåé¢çš„å…ƒç´ é€ä¸ªæ¯”è¾ƒ</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>min_index<span class="token punctuation">]</span><span class="token punctuation">:</span>                <span class="token comment"># å¦‚æœå½“å‰å…ƒç´ æ¯”æœ€å°å…ƒç´ å°ï¼Œåˆ™æŠŠå½“å‰å…ƒç´ è§’æ ‡è®°ä¸ºæœ€å°å…ƒç´ è§’æ ‡</span>                min_index <span class="token operator">=</span> j        <span class="token comment"># æŸ¥æ‰¾ä¸€éåå°†æœ€å°å…ƒç´ ä¸èµ·å§‹å…ƒç´ äº’æ¢</span>        arr<span class="token punctuation">[</span>min_index<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>min_index<span class="token punctuation">]</span>    <span class="token keyword">return</span> arr<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    li <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">38</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">47</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">36</span><span class="token punctuation">,</span><span class="token number">26</span><span class="token punctuation">,</span><span class="token number">27</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">46</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">48</span><span class="token punctuation">]</span>    selection_sort<span class="token punctuation">(</span>li<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦å¤–ä¸€ç§å†™æ³•,å®ƒå’Œå†’æ³¡æ³•ç±»ä¼¼</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># é€‰æ‹©æ’åº</span><span class="token keyword">def</span> <span class="token function">selectSort</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">:</span>                nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">38</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">47</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">36</span><span class="token punctuation">,</span><span class="token number">26</span><span class="token punctuation">,</span><span class="token number">27</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">46</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">48</span><span class="token punctuation">]</span>    selectSort<span class="token punctuation">(</span>nums<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="4-ç®—æ³•åˆ†æ-4"><a href="#4-ç®—æ³•åˆ†æ-4" class="headerlink" title="4.ç®—æ³•åˆ†æ"></a>4.ç®—æ³•åˆ†æ</h4><p><code>é€‰æ‹©æ’åº</code>å’Œ<code>å†’æ³¡æ’åº</code>å¾ˆç±»ä¼¼ï¼Œä½†æ˜¯é€‰æ‹©æ’åºæ¯è½®æ¯”è¾ƒåªä¼šæœ‰ä¸€æ¬¡äº¤æ¢ï¼Œ</p><p>è€Œå†’æ³¡æ’åºä¼šæœ‰å¤šæ¬¡äº¤æ¢ï¼Œäº¤æ¢æ¬¡æ•°æ¯”å†’æ³¡æ’åºå°‘ï¼Œå°±å‡å°‘cpuçš„æ¶ˆè€—ï¼Œ</p><p>æ‰€ä»¥åœ¨æ•°æ®é‡å°çš„æ—¶å€™å¯ä»¥ç”¨é€‰æ‹©æ’åºï¼Œå®é™…é€‚ç”¨çš„åœºåˆéå¸¸å°‘ã€‚</p><ul><li>æ¯”è¾ƒæ€§ï¼šå› ä¸ºæ’åºæ—¶å…ƒç´ ä¹‹é—´éœ€è¦æ¯”è¾ƒï¼Œæ‰€ä»¥æ˜¯<code>æ¯”è¾ƒæ’åº</code></li><li>ç¨³å®šæ€§ï¼šå› ä¸ºå­˜åœ¨ä»»æ„ä½ç½®çš„ä¸¤ä¸ªå…ƒç´ äº¤æ¢ï¼Œæ¯”å¦‚[5, 8, 5, 2]ï¼Œ<br>ç¬¬ä¸€ä¸ª5ä¼šå’Œ2äº¤æ¢ä½ç½®ï¼Œæ‰€ä»¥æ”¹å˜äº†ä¸¤ä¸ª5åŸæ¥çš„ç›¸å¯¹é¡ºåºï¼Œæ‰€ä»¥ä¸º<code>ä¸ç¨³å®šæ’åº</code>ã€‚</li><li>æ—¶é—´å¤æ‚åº¦ï¼šæˆ‘ä»¬çœ‹åˆ°é€‰æ‹©æ’åºåŒæ ·æ˜¯åŒå±‚å¾ªç¯n*(n-1))ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¹Ÿä¸ºï¼šO(n^2)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šåªéœ€è¦å¸¸æ•°ä¸ªè¾…åŠ©å•å…ƒï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦ä¹Ÿä¸ºO(1)</li><li>è®°å¿†æ–¹æ³•ï¼šé€‰æ‹©å¯¹è±¡è¦å…ˆé€‰æœ€å°çš„</li></ul><h3 id="6ã€å †æ’åº-Heap-Sort-ã€åˆ©ç”¨æœ€å¤§å †å’Œæœ€å°å †çš„ç‰¹æ€§ã€‘"><a href="#6ã€å †æ’åº-Heap-Sort-ã€åˆ©ç”¨æœ€å¤§å †å’Œæœ€å°å †çš„ç‰¹æ€§ã€‘" class="headerlink" title="6ã€å †æ’åº(Heap Sort)ã€åˆ©ç”¨æœ€å¤§å †å’Œæœ€å°å †çš„ç‰¹æ€§ã€‘"></a>6ã€å †æ’åº(Heap Sort)ã€åˆ©ç”¨æœ€å¤§å †å’Œæœ€å°å †çš„ç‰¹æ€§ã€‘</h3><p><code>å †æ’åºï¼ˆHeapsortï¼‰</code>æ˜¯æŒ‡åˆ©ç”¨å †è¿™ç§æ•°æ®ç»“æ„æ‰€è®¾è®¡çš„ä¸€ç§æ’åºç®—æ³•ã€‚</p><p>å †ç§¯æ˜¯ä¸€ä¸ªè¿‘ä¼¼å®Œå…¨äºŒå‰æ ‘çš„ç»“æ„ï¼Œå¹¶åŒæ—¶æ»¡è¶³å †ç§¯çš„æ€§è´¨ï¼šå³å­ç»“ç‚¹çš„é”®å€¼æˆ–ç´¢å¼•æ€»æ˜¯å°äºï¼ˆæˆ–è€…å¤§äºï¼‰å®ƒçš„çˆ¶èŠ‚ç‚¹ã€‚</p><h4 id="1-è¿‡ç¨‹å›¾è§£-5"><a href="#1-è¿‡ç¨‹å›¾è§£-5" class="headerlink" title="1.è¿‡ç¨‹å›¾è§£"></a>1.è¿‡ç¨‹å›¾è§£</h4><p><img src="/markdownImages/heapsort.gif" class="lazyload placeholder" data-srcset="/markdownImages/heapsort.gif" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å †æ’åºå›¾å½¢å±•ç¤º"></p><h4 id="2-ç®—æ³•æ€æƒ³-5"><a href="#2-ç®—æ³•æ€æƒ³-5" class="headerlink" title="2.ç®—æ³•æ€æƒ³"></a>2.ç®—æ³•æ€æƒ³</h4><blockquote><ul><li><p>å°†åˆå§‹å¾…æ’åºå…³é”®å­—åºåˆ—(R1,R2â€¦.Rn)æ„å»ºæˆå¤§é¡¶å †ï¼Œæ­¤å †ä¸ºåˆå§‹çš„æ— åºåŒºï¼›</p></li><li><p>å°†å †é¡¶å…ƒç´ R[1]ä¸æœ€åä¸€ä¸ªå…ƒç´ R[n]äº¤æ¢ï¼Œæ­¤æ—¶å¾—åˆ°æ–°çš„æ— åºåŒº(R1,R2,â€¦â€¦Rn-1)å’Œæ–°çš„æœ‰åºåŒº(Rn),ä¸”æ»¡è¶³R[1,2â€¦n-1]&lt;=R[n]ï¼›</p></li><li><p>ç”±äºäº¤æ¢åæ–°çš„å †é¡¶R[1]å¯èƒ½è¿åå †çš„æ€§è´¨ï¼Œå› æ­¤éœ€è¦å¯¹å½“å‰æ— åºåŒº(R1,R2,â€¦â€¦Rn-1)è°ƒæ•´ä¸ºæ–°å †ï¼Œ</p><p>ç„¶åå†æ¬¡å°†R[1]ä¸æ— åºåŒºæœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢ï¼Œå¾—åˆ°æ–°çš„æ— åºåŒº(R1,R2â€¦.Rn-2)å’Œæ–°çš„æœ‰åºåŒº(Rn-1,Rn)ã€‚</p><p>ä¸æ–­é‡å¤æ­¤è¿‡ç¨‹ç›´åˆ°æœ‰åºåŒºçš„å…ƒç´ ä¸ªæ•°ä¸ºn-1ï¼Œåˆ™æ•´ä¸ªæ’åºè¿‡ç¨‹å®Œæˆã€‚</p></li></ul></blockquote><h4 id="3-ä»£ç å®ç°-5"><a href="#3-ä»£ç å®ç°-5" class="headerlink" title="3.ä»£ç å®ç°"></a>3.ä»£ç å®ç°</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span>  <span class="token function">HeapSort</span><span class="token punctuation">(</span>lst<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">heap_adjust</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> start<span class="token punctuation">,</span>end<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment">#å°†ä»¥startä¸ºæ ¹èŠ‚ç‚¹çš„å †è°ƒæ•´ä¸ºå¤§é¡¶å †</span>        temp<span class="token operator">=</span>arr<span class="token punctuation">[</span>start<span class="token punctuation">]</span>        son<span class="token operator">=</span><span class="token number">2</span><span class="token operator">*</span>start<span class="token operator">+</span><span class="token number">1</span>        <span class="token keyword">while</span> son<span class="token operator">&lt;=</span>end<span class="token punctuation">:</span>            <span class="token keyword">if</span> son<span class="token operator">&lt;</span>end <span class="token keyword">and</span> arr<span class="token punctuation">[</span>son<span class="token punctuation">]</span><span class="token operator">&lt;</span>arr<span class="token punctuation">[</span>son<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>  <span class="token comment">#æ‰¾å‡ºå·¦å³å­©å­èŠ‚ç‚¹è¾ƒå¤§çš„</span>                son<span class="token operator">+=</span><span class="token number">1</span>            <span class="token keyword">if</span> temp<span class="token operator">>=</span>arr<span class="token punctuation">[</span>son<span class="token punctuation">]</span><span class="token punctuation">:</span>       <span class="token comment">#åˆ¤æ–­æ˜¯å¦ä¸ºå¤§é¡¶å †</span>                <span class="token keyword">break</span>            arr<span class="token punctuation">[</span>start<span class="token punctuation">]</span><span class="token operator">=</span>arr<span class="token punctuation">[</span>son<span class="token punctuation">]</span>     <span class="token comment">#å­èŠ‚ç‚¹ä¸Šç§»</span>            start<span class="token operator">=</span>son                     <span class="token comment">#ç»§ç»­å‘ä¸‹æ¯”è¾ƒ</span>            son<span class="token operator">=</span><span class="token number">2</span><span class="token operator">*</span>son<span class="token operator">+</span><span class="token number">1</span>        arr<span class="token punctuation">[</span>start<span class="token punctuation">]</span><span class="token operator">=</span>temp             <span class="token comment">#å°†åŸå †é¡¶æ’å…¥æ­£ç¡®ä½ç½®</span>    n<span class="token operator">=</span><span class="token builtin">len</span><span class="token punctuation">(</span>lst<span class="token punctuation">)</span>    <span class="token keyword">if</span> n<span class="token operator">&lt;=</span><span class="token number">1</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> lst    <span class="token comment">#å»ºç«‹å¤§é¡¶å †</span>    root<span class="token operator">=</span>n<span class="token operator">//</span><span class="token number">2</span><span class="token operator">-</span><span class="token number">1</span>    <span class="token comment">#æœ€åä¸€ä¸ªéå¶èŠ‚ç‚¹ï¼ˆå®Œå…¨äºŒå‰æ ‘ä¸­ï¼‰</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>root <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        heap_adjust<span class="token punctuation">(</span>lst<span class="token punctuation">,</span> root<span class="token punctuation">,</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>        root<span class="token operator">-=</span><span class="token number">1</span>    <span class="token comment">#ææ‰å †é¡¶åè°ƒæ•´å †</span>    i<span class="token operator">=</span>n<span class="token operator">-</span><span class="token number">1</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">>=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token punctuation">(</span>lst<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>lst<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span>lst<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>lst<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">#å°†å¤§é¡¶å †å †é¡¶æ•°æ”¾åˆ°æœ€å</span>        heap_adjust<span class="token punctuation">(</span>lst<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token comment">#è°ƒæ•´å‰©ä½™æ•°ç»„æˆçš„å †</span>        i<span class="token operator">-=</span><span class="token number">1</span>    <span class="token keyword">return</span> lst<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="ç®—æ³•åˆ†æ"><a href="#ç®—æ³•åˆ†æ" class="headerlink" title="ç®—æ³•åˆ†æ"></a>ç®—æ³•åˆ†æ</h4><p>å †æ’åºçš„åˆå§‹å»ºå †è¿‡ç¨‹æ¯”ä»·å¤æ‚ï¼Œå¯¹O(n)çº§åˆ«ä¸ªéå¶å­èŠ‚ç‚¹è¿›è¡Œå †è°ƒæ•´æ“ä½œO(logn)ï¼Œæ—¶é—´å¤æ‚åº¦O(nlogn)ï¼›</p><p>ä¹‹åæ¯ä¸€æ¬¡å †è°ƒæ•´æ“ä½œç¡®å®šä¸€ä¸ªæ•°çš„æ¬¡åºï¼Œæ—¶é—´å¤æ‚åº¦O(nlogn)ã€‚åˆèµ·æ¥æ—¶é—´å¤æ‚åº¦O(nlogn)</p><p>é¢å¤–ç©ºé—´å¼€é”€å‡ºåœ¨è°ƒæ•´å †è¿‡ç¨‹ï¼Œæ ¹èŠ‚ç‚¹ä¸‹ç§»äº¤æ¢æ—¶ä¸€ä¸ªæš‚å­˜ç©ºé—´ï¼Œç©ºé—´å¤æ‚åº¦O(1)</p><pre><code>æ¯”è¾ƒæ€§ï¼šå› ä¸ºæ’åºæ—¶å…ƒç´ ä¹‹é—´éœ€è¦æ¯”è¾ƒï¼Œæ‰€ä»¥æ˜¯æ¯”è¾ƒæ’åºç¨³å®šæ€§ï¼šå› ä¸ºå­˜åœ¨ä»»æ„ä½ç½®çš„ä¸¤ä¸ªå…ƒç´ äº¤æ¢ï¼Œæ‰€ä»¥ä¸ºä¸ç¨³å®šæ’åºã€‚æ—¶é—´å¤æ‚åº¦ï¼šæ—¶é—´å¤æ‚åº¦ä¸ºï¼šO(nlogn)ç©ºé—´å¤æ‚åº¦ï¼šç©ºé—´å¤æ‚åº¦ä¹Ÿä¸ºO(1)è®°å¿†æ–¹æ³•ï¼š</code></pre><h2 id="4-å½’å¹¶æ’åº"><a href="#4-å½’å¹¶æ’åº" class="headerlink" title="4. å½’å¹¶æ’åº"></a>4. å½’å¹¶æ’åº</h2><h3 id="7ã€å½’å¹¶æ’åº-Merge-Sort-ã€åˆ†æ²»æ³•-2-4-8æ’å…¥æ’åºã€‘"><a href="#7ã€å½’å¹¶æ’åº-Merge-Sort-ã€åˆ†æ²»æ³•-2-4-8æ’å…¥æ’åºã€‘" class="headerlink" title="7ã€å½’å¹¶æ’åº (Merge Sort)ã€åˆ†æ²»æ³•-2-4-8æ’å…¥æ’åºã€‘"></a>7ã€å½’å¹¶æ’åº (Merge Sort)ã€åˆ†æ²»æ³•-2-4-8æ’å…¥æ’åºã€‘</h3><p>å½’å¹¶æ’åºï¼ˆMERGE-SORTï¼‰æ˜¯å»ºç«‹åœ¨å½’å¹¶æ“ä½œä¸Šçš„ä¸€ç§æœ‰æ•ˆçš„æ’åºç®—æ³•,</p><p>è¯¥ç®—æ³•æ˜¯é‡‡ç”¨åˆ†æ²»æ³•ï¼ˆDivide and Conquerï¼‰çš„ä¸€ä¸ªéå¸¸å…¸å‹çš„åº”ç”¨ã€‚</p><blockquote><p>å½’å¹¶æ’åºé€‚ç”¨äºå­åºåˆ—æœ‰åºçš„æ•°æ®æ’åºã€‚</p></blockquote><h4 id="1-è¿‡ç¨‹å›¾è§£-6"><a href="#1-è¿‡ç¨‹å›¾è§£-6" class="headerlink" title="1.è¿‡ç¨‹å›¾è§£"></a>1.è¿‡ç¨‹å›¾è§£</h4><p><img src="/markdownImages/mergesort.gif" class="lazyload placeholder" data-srcset="/markdownImages/mergesort.gif" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å½’å¹¶æ’åºåŠ¨ç”»å±•ç¤º"></p><h4 id="2-ç®—æ³•æ€æƒ³-6"><a href="#2-ç®—æ³•æ€æƒ³-6" class="headerlink" title="2.ç®—æ³•æ€æƒ³"></a>2.ç®—æ³•æ€æƒ³</h4><p><img src="/markdownImages/mergesort.jpg" class="lazyload placeholder" data-srcset="/markdownImages/mergesort.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å½’å¹¶æ’åºå›¾å½¢å±•ç¤º"><br>ä»ä¸Šå›¾çœ‹åˆ†è§£åçš„æ•°åˆ—å¾ˆåƒä¸€ä¸ªäºŒå‰æ ‘ã€‚</p><ul><li>ä½¿ç”¨é€’å½’å°†æºæ•°åˆ—ä½¿ç”¨äºŒåˆ†æ³•åˆ†æˆå¤šä¸ªå­åˆ—</li><li>ç”³è¯·ç©ºé—´å°†ä¸¤ä¸ªå­åˆ—æ’åºåˆå¹¶ç„¶åè¿”å›</li><li>å°†æ‰€æœ‰å­åˆ—ä¸€æ­¥ä¸€æ­¥åˆå¹¶æœ€åå®Œæˆæ’åº</li></ul><h4 id="3-ä»£ç å®ç°-6"><a href="#3-ä»£ç å®ç°-6" class="headerlink" title="3.ä»£ç å®ç°"></a>3.ä»£ç å®ç°</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">merge_sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""å½’å¹¶æ’åº"""</span>    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> arr    <span class="token comment"># ä½¿ç”¨äºŒåˆ†æ³•å°†æ•°åˆ—åˆ†ä¸¤ä¸ª</span>    mid <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>    left <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token punctuation">:</span>mid<span class="token punctuation">]</span>    right <span class="token operator">=</span> arr<span class="token punctuation">[</span>mid<span class="token punctuation">:</span><span class="token punctuation">]</span>    <span class="token comment"># ä½¿ç”¨é€’å½’è¿ç®—</span>    <span class="token keyword">return</span> marge<span class="token punctuation">(</span>merge_sort<span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token punctuation">,</span> merge_sort<span class="token punctuation">(</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">marge</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""æ’åºåˆå¹¶ä¸¤ä¸ªæ•°åˆ—"""</span>    result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token comment"># ä¸¤ä¸ªæ•°åˆ—éƒ½æœ‰å€¼</span>    <span class="token keyword">while</span> <span class="token builtin">len</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span> <span class="token keyword">and</span> <span class="token builtin">len</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">:</span>        <span class="token comment"># å·¦å³ä¸¤ä¸ªæ•°åˆ—ç¬¬ä¸€ä¸ªæœ€å°æ”¾å‰é¢</span>        <span class="token keyword">if</span> left<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> right<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>            result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>left<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>right<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># åªæœ‰ä¸€ä¸ªæ•°åˆ—ä¸­è¿˜æœ‰å€¼ï¼Œç›´æ¥æ·»åŠ </span>    result <span class="token operator">+=</span> left    result <span class="token operator">+=</span> right    <span class="token keyword">return</span> result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="4-ç®—æ³•åˆ†æ-5"><a href="#4-ç®—æ³•åˆ†æ-5" class="headerlink" title="4.ç®—æ³•åˆ†æ"></a>4.ç®—æ³•åˆ†æ</h4><blockquote><p>å½’å¹¶æ’åºæ˜¯ä¸€ç§ç¨³å®šçš„æ’åºæ–¹æ³•ã€‚å’Œé€‰æ‹©æ’åºä¸€æ ·ï¼Œå½’å¹¶æ’åºçš„æ€§èƒ½ä¸å—è¾“å…¥æ•°æ®çš„å½±å“ï¼Œ</p><p>ä½†è¡¨ç°æ¯”é€‰æ‹©æ’åºå¥½çš„å¤šï¼Œå› ä¸ºå§‹ç»ˆéƒ½æ˜¯O(nlognï¼‰çš„æ—¶é—´å¤æ‚åº¦ã€‚ä»£ä»·æ˜¯éœ€è¦é¢å¤–çš„å†…å­˜ç©ºé—´ã€‚</p></blockquote><ul><li><p>1.æ¯”è¾ƒæ€§ï¼šæ’åºæ—¶å…ƒç´ ä¹‹é—´éœ€è¦æ¯”è¾ƒï¼Œæ‰€ä»¥ä¸º<code>æ¯”è¾ƒæ’åº</code></p></li><li><p>2.ç¨³å®šæ€§ï¼šæˆ‘ä»¬ä»ä»£ç ä¸­å¯ä»¥çœ‹åˆ°å½“å·¦è¾¹çš„å…ƒç´ å°äºç­‰äºå³è¾¹çš„å…ƒç´ å°±æŠŠå·¦è¾¹çš„æ’å‰é¢ï¼Œ</p><p>  è€ŒåŸæœ¬å·¦è¾¹çš„å°±æ˜¯åœ¨å‰é¢ï¼Œæ‰€ä»¥ç›¸åŒå…ƒç´ çš„ç›¸å¯¹é¡ºåºä¸å˜ï¼Œæ•…ä¸º<code>ç¨³å®šæ’åº</code></p></li><li><p>3.æ—¶é—´å¤æ‚åº¦ï¼š å¤æ‚åº¦ä¸º<code>O(nlog^n)</code></p></li><li><p>4.ç©ºé—´å¤æ‚åº¦ï¼šåœ¨åˆå¹¶å­åˆ—æ—¶éœ€è¦ç”³è¯·ä¸´æ—¶ç©ºé—´ï¼Œè€Œä¸”ç©ºé—´å¤§å°éšæ•°åˆ—çš„å¤§å°è€Œå˜åŒ–ï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦ä¸º<code>O(n)</code></p></li><li><p>5.è®°å¿†æ–¹æ³•ï¼šæ‰€è°“å½’å¹¶è‚¯å®šæ˜¯è¦å…ˆåˆ†è§£ï¼Œå†åˆå¹¶</p></li></ul><h2 id="5-çº¿æ€§æ—¶é—´éæ¯”è¾ƒç±»æ’åº"><a href="#5-çº¿æ€§æ—¶é—´éæ¯”è¾ƒç±»æ’åº" class="headerlink" title="5. çº¿æ€§æ—¶é—´éæ¯”è¾ƒç±»æ’åº"></a>5. çº¿æ€§æ—¶é—´éæ¯”è¾ƒç±»æ’åº</h2><p>è¿™ä¸‰ç§æ’åºç®—æ³•éƒ½åˆ©ç”¨äº†æ¡¶çš„æ¦‚å¿µï¼Œä½†å¯¹æ¡¶çš„ä½¿ç”¨æ–¹æ³•ä¸Šæœ‰æ˜æ˜¾å·®å¼‚ï¼š</p><ul><li><p>   åŸºæ•°æ’åºï¼šæ ¹æ®é”®å€¼çš„æ¯ä½æ•°å­—æ¥åˆ†é…æ¡¶ï¼›</p></li><li><p>   è®¡æ•°æ’åºï¼šæ¯ä¸ªæ¡¶åªå­˜å‚¨å•ä¸€é”®å€¼ï¼›</p></li><li><p>   æ¡¶æ’åºï¼šæ¯ä¸ªæ¡¶å­˜å‚¨ä¸€å®šèŒƒå›´çš„æ•°å€¼ï¼›</p></li></ul><h3 id="8ã€è®¡æ•°æ’åºï¼ˆCounting-Sortï¼‰ã€å­—å…¸è®¡æ•°-è¿˜åŸã€‘"><a href="#8ã€è®¡æ•°æ’åºï¼ˆCounting-Sortï¼‰ã€å­—å…¸è®¡æ•°-è¿˜åŸã€‘" class="headerlink" title="8ã€è®¡æ•°æ’åºï¼ˆCounting Sortï¼‰ã€å­—å…¸è®¡æ•°-è¿˜åŸã€‘"></a>8ã€è®¡æ•°æ’åºï¼ˆCounting Sortï¼‰ã€å­—å…¸è®¡æ•°-è¿˜åŸã€‘</h3><p>è®¡æ•°æ’åºç”¨å¾…æ’åºçš„æ•°å€¼ä½œä¸ºè®¡æ•°æ•°ç»„ï¼ˆåˆ—è¡¨ï¼‰çš„ä¸‹æ ‡ï¼Œç»Ÿè®¡æ¯ä¸ªæ•°å€¼çš„ä¸ªæ•°ï¼Œç„¶åä¾æ¬¡è¾“å‡ºå³å¯ã€‚</p><p>è®¡æ•°æ•°ç»„çš„å¤§å°å–å†³äºå¾…æ’æ•°æ®å–å€¼èŒƒå›´ï¼Œæ‰€ä»¥å¯¹æ•°æ®æœ‰ä¸€å®šè¦æ±‚ï¼Œå¦åˆ™ç©ºé—´å¼€é”€æ— æ³•æ‰¿å—ã€‚</p><h4 id="1-è¿‡ç¨‹å›¾è§£-7"><a href="#1-è¿‡ç¨‹å›¾è§£-7" class="headerlink" title="1.è¿‡ç¨‹å›¾è§£"></a>1.è¿‡ç¨‹å›¾è§£</h4><p><img src="/markdownImages/countingsort.gif" class="lazyload placeholder" data-srcset="/markdownImages/countingsort.gif" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="è®¡æ•°æ’åºå›¾å½¢å±•ç¤º"></p><h4 id="2-ç®—æ³•æ€æƒ³-7"><a href="#2-ç®—æ³•æ€æƒ³-7" class="headerlink" title="2.ç®—æ³•æ€æƒ³"></a>2.ç®—æ³•æ€æƒ³</h4><ul><li>æ‰¾å‡ºå¾…æ’åºçš„æ•°ç»„ä¸­æœ€å¤§å’Œæœ€å°çš„å…ƒç´ ï¼›</li><li>ç»Ÿè®¡æ•°ç»„ä¸­æ¯ä¸ªå€¼ä¸ºiçš„å…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œå­˜å…¥æ•°ç»„Cçš„ç¬¬ié¡¹ï¼›</li><li>å¯¹æ‰€æœ‰çš„è®¡æ•°ç´¯åŠ ï¼ˆä»Cä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œæ¯ä¸€é¡¹å’Œå‰ä¸€é¡¹ç›¸åŠ ï¼‰ï¼›</li><li>åå‘å¡«å……ç›®æ ‡æ•°ç»„ï¼šå°†æ¯ä¸ªå…ƒç´ iæ”¾åœ¨æ–°æ•°ç»„çš„ç¬¬C(i)é¡¹ï¼Œæ¯æ”¾ä¸€ä¸ªå…ƒç´ å°±å°†C(i)å‡å»1ã€‚</li></ul><h4 id="3-ä»£ç å®ç°-7"><a href="#3-ä»£ç å®ç°-7" class="headerlink" title="3.ä»£ç å®ç°"></a>3.ä»£ç å®ç°</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">CountSort</span><span class="token punctuation">(</span>lst<span class="token punctuation">)</span><span class="token punctuation">:</span>    n<span class="token operator">=</span><span class="token builtin">len</span><span class="token punctuation">(</span>lst<span class="token punctuation">)</span>    num<span class="token operator">=</span><span class="token builtin">max</span><span class="token punctuation">(</span>lst<span class="token punctuation">)</span>    count<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span>num<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>        count<span class="token punctuation">[</span>lst<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">+=</span><span class="token number">1</span>    arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>num<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>count<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            arr<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span>    <span class="token keyword">return</span> arr<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="4-ç®—æ³•åˆ†æ-6"><a href="#4-ç®—æ³•åˆ†æ-6" class="headerlink" title="4. ç®—æ³•åˆ†æ"></a>4. ç®—æ³•åˆ†æ</h4><blockquote><p>è®¡æ•°æ’åºæ˜¯ä¸€ä¸ªç¨³å®šçš„æ’åºç®—æ³•ã€‚<br>å½“è¾“å…¥çš„å…ƒç´ æ˜¯ n ä¸ª 0åˆ° k ä¹‹é—´çš„æ•´æ•°æ—¶ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯O(n+k)ï¼Œç©ºé—´å¤æ‚åº¦ä¹Ÿæ˜¯O(n+k)ï¼Œå…¶æ’åºé€Ÿåº¦å¿«äºä»»ä½•æ¯”è¾ƒæ’åºç®—æ³•ã€‚<br>å½“kä¸æ˜¯å¾ˆå¤§å¹¶ä¸”åºåˆ—æ¯”è¾ƒé›†ä¸­æ—¶ï¼Œè®¡æ•°æ’åºæ˜¯ä¸€ä¸ªå¾ˆæœ‰æ•ˆçš„æ’åºç®—æ³•ã€‚</p></blockquote><ul><li>æ—¶é—´å¤æ‚åº¦:è®¡æ•°æ’åºåªéœ€éå†ä¸€æ¬¡æ•°æ®ï¼Œåœ¨è®¡æ•°æ•°ç»„ä¸­è®°å½•ï¼Œè¾“å‡ºè®¡æ•°æ•°ç»„ä¸­æœ‰è®°å½•çš„ä¸‹æ ‡ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n+k)ã€‚</li><li>ç©ºé—´å¤æ‚åº¦:ç©ºé—´å¤æ‚åº¦O(n+k)ã€‚</li></ul><h3 id="9ã€æ¡¶æ’åºï¼ˆBucket-Sortï¼‰ã€é“¾è¡¨ã€‘"><a href="#9ã€æ¡¶æ’åºï¼ˆBucket-Sortï¼‰ã€é“¾è¡¨ã€‘" class="headerlink" title="9ã€æ¡¶æ’åºï¼ˆBucket Sortï¼‰ã€é“¾è¡¨ã€‘"></a>9ã€æ¡¶æ’åºï¼ˆBucket Sortï¼‰ã€é“¾è¡¨ã€‘</h3><p>æ¡¶æ’åºå®é™…ä¸Šæ˜¯è®¡æ•°æ’åºçš„æ¨å¹¿ï¼Œä½†å®ç°ä¸Šè¦å¤æ‚è®¸å¤šã€‚</p><p>æ¡¶æ’åºå…ˆç”¨ä¸€å®šçš„å‡½æ•°å…³ç³»å°†æ•°æ®åˆ’åˆ†åˆ°ä¸åŒæœ‰åºçš„åŒºåŸŸï¼ˆæ¡¶ï¼‰å†…ï¼Œç„¶åå­æ•°æ®åˆ†åˆ«åœ¨æ¡¶å†…æ’åºï¼Œä¹‹åé¡ºæ¬¡è¾“å‡ºã€‚</p><p>å½“æ¯ä¸€ä¸ªä¸åŒæ•°æ®åˆ†é…ä¸€ä¸ªæ¡¶æ—¶ï¼Œä¹Ÿå°±ç›¸å½“äºè®¡æ•°æ’åºã€‚</p><p>å‡è®¾nä¸ªæ•°æ®ï¼Œåˆ’åˆ†ä¸ºkä¸ªæ¡¶ï¼Œæ¡¶å†…é‡‡ç”¨å¿«é€Ÿæ’åºï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n)+O(k * n/k<em>log(n/k))=O(n)+O(n</em>(log(n)-log(k))),</p><p>æ˜¾ç„¶ï¼Œkè¶Šå¤§ï¼Œæ—¶é—´å¤æ‚åº¦è¶Šæ¥è¿‘O(n)ï¼Œå½“ç„¶ç©ºé—´å¤æ‚åº¦O(n+k)ä¼šè¶Šå¤§ï¼Œè¿™æ˜¯ç©ºé—´ä¸æ—¶é—´çš„å¹³è¡¡ã€‚</p><h4 id="2-ç®—æ³•åˆ†æ"><a href="#2-ç®—æ³•åˆ†æ" class="headerlink" title="2.ç®—æ³•åˆ†æ"></a>2.ç®—æ³•åˆ†æ</h4><ul><li>è®¾ç½®ä¸€ä¸ªå®šé‡çš„æ•°ç»„å½“ä½œç©ºæ¡¶ï¼›</li><li>éå†è¾“å…¥æ•°æ®ï¼Œå¹¶ä¸”æŠŠæ•°æ®ä¸€ä¸ªä¸€ä¸ªæ”¾åˆ°å¯¹åº”çš„æ¡¶é‡Œå»ï¼›</li><li>å¯¹æ¯ä¸ªä¸æ˜¯ç©ºçš„æ¡¶è¿›è¡Œæ’åºï¼›</li><li>ä»ä¸æ˜¯ç©ºçš„æ¡¶é‡ŒæŠŠæ’å¥½åºçš„æ•°æ®æ‹¼æ¥èµ·æ¥ã€‚ </li></ul><h4 id="3-ä»£ç å®ç°-8"><a href="#3-ä»£ç å®ç°-8" class="headerlink" title="3.ä»£ç å®ç°"></a>3.ä»£ç å®ç°</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">BucketSort</span><span class="token punctuation">(</span>lst<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># æ¡¶å†…ä½¿ç”¨å¿«é€Ÿæ’åº</span>    <span class="token keyword">def</span> <span class="token function">QuickSort</span><span class="token punctuation">(</span>lst<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">def</span> <span class="token function">partition</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span>left<span class="token punctuation">,</span>right<span class="token punctuation">)</span><span class="token punctuation">:</span>            key<span class="token operator">=</span>left         <span class="token comment">#åˆ’åˆ†å‚è€ƒæ•°ç´¢å¼•,é»˜è®¤ä¸ºç¬¬ä¸€ä¸ªæ•°ï¼Œå¯ä¼˜åŒ–</span>            <span class="token keyword">while</span> left<span class="token operator">&lt;</span>right<span class="token punctuation">:</span>                <span class="token keyword">while</span> left<span class="token operator">&lt;</span>right <span class="token keyword">and</span> arr<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token operator">>=</span>arr<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">:</span>                    right<span class="token operator">-=</span><span class="token number">1</span>                <span class="token keyword">while</span> left<span class="token operator">&lt;</span>right <span class="token keyword">and</span> arr<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token operator">&lt;=</span>arr<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">:</span>                    left<span class="token operator">+=</span><span class="token number">1</span>                <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">,</span>arr<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">,</span>arr<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">,</span>arr<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span>arr<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> left         <span class="token keyword">def</span> <span class="token function">quicksort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span>left<span class="token punctuation">,</span>right<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment">#é€’å½’è°ƒç”¨</span>            <span class="token keyword">if</span> left<span class="token operator">>=</span>right<span class="token punctuation">:</span>                <span class="token keyword">return</span>            mid<span class="token operator">=</span>partition<span class="token punctuation">(</span>arr<span class="token punctuation">,</span>left<span class="token punctuation">,</span>right<span class="token punctuation">)</span>            quicksort<span class="token punctuation">(</span>arr<span class="token punctuation">,</span>left<span class="token punctuation">,</span>mid<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>            quicksort<span class="token punctuation">(</span>arr<span class="token punctuation">,</span>mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>right<span class="token punctuation">)</span>        <span class="token comment">#ä¸»å‡½æ•°</span>        n<span class="token operator">=</span><span class="token builtin">len</span><span class="token punctuation">(</span>lst<span class="token punctuation">)</span>        <span class="token keyword">if</span> n<span class="token operator">&lt;=</span><span class="token number">1</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> lst        quicksort<span class="token punctuation">(</span>lst<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> lst    n<span class="token operator">=</span><span class="token builtin">len</span><span class="token punctuation">(</span>lst<span class="token punctuation">)</span>    big<span class="token operator">=</span><span class="token builtin">max</span><span class="token punctuation">(</span>lst<span class="token punctuation">)</span>    num<span class="token operator">=</span>big<span class="token operator">//</span><span class="token number">10</span><span class="token operator">+</span><span class="token number">1</span>    bucket<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>    buckets<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>num<span class="token punctuation">)</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> lst<span class="token punctuation">:</span>        buckets<span class="token punctuation">[</span>i<span class="token operator">//</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span>     <span class="token comment">#åˆ’åˆ†æ¡¶</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> buckets<span class="token punctuation">:</span>                       <span class="token comment">#æ¡¶å†…æ’åº</span>        bucket<span class="token operator">=</span>QuickSort<span class="token punctuation">(</span>i<span class="token punctuation">)</span>    arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> buckets<span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token builtin">list</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">for</span> j <span class="token keyword">in</span> i<span class="token punctuation">:</span>                arr<span class="token punctuation">.</span>append<span class="token punctuation">(</span>j<span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            arr<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>        lst<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    <span class="token keyword">return</span> lst<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="4-ç®—æ³•åˆ†æ-7"><a href="#4-ç®—æ³•åˆ†æ-7" class="headerlink" title="4.ç®—æ³•åˆ†æ"></a>4.ç®—æ³•åˆ†æ</h4><p>æ¡¶æ’åºæœ€å¥½æƒ…å†µä¸‹ä½¿ç”¨çº¿æ€§æ—¶é—´O(n)ï¼Œæ¡¶æ’åºçš„æ—¶é—´å¤æ‚åº¦ï¼Œ</p><p>å–å†³ä¸å¯¹å„ä¸ªæ¡¶ä¹‹é—´æ•°æ®è¿›è¡Œæ’åºçš„æ—¶é—´å¤æ‚åº¦ï¼Œå› ä¸ºå…¶å®ƒéƒ¨åˆ†çš„æ—¶é—´å¤æ‚åº¦éƒ½ä¸ºO(n)ã€‚</p><p>å¾ˆæ˜¾ç„¶ï¼Œæ¡¶åˆ’åˆ†çš„è¶Šå°ï¼Œå„ä¸ªæ¡¶ä¹‹é—´çš„æ•°æ®è¶Šå°‘ï¼Œæ’åºæ‰€ç”¨çš„æ—¶é—´ä¹Ÿä¼šè¶Šå°‘ã€‚ä½†ç›¸åº”çš„ç©ºé—´æ¶ˆè€—å°±ä¼šå¢å¤§ã€‚</p><h3 id="10ã€åŸºæ•°æ’åºï¼ˆRadix-Sortï¼‰"><a href="#10ã€åŸºæ•°æ’åºï¼ˆRadix-Sortï¼‰" class="headerlink" title="10ã€åŸºæ•°æ’åºï¼ˆRadix Sortï¼‰"></a>10ã€åŸºæ•°æ’åºï¼ˆRadix Sortï¼‰</h3><p><code>åŸºæ•°æ’åº</code>æ˜¯ä¸€ç§<code>éæ¯”è¾ƒå‹æ•´æ•°æ’åº</code>ç®—æ³•ï¼Œå…¶åŸç†æ˜¯å°†æ•´æ•°æŒ‰ä½æ•°åˆ‡å‰²æˆä¸åŒçš„æ•°å­—ï¼Œ</p><p>ç„¶åæŒ‰æ¯ä¸ªä½æ•°åˆ†åˆ«æ¯”è¾ƒã€‚ç”±äºæ•´æ•°ä¹Ÿå¯ä»¥è¡¨è¾¾å­—ç¬¦ä¸²ï¼ˆæ¯”å¦‚åå­—æˆ–æ—¥æœŸï¼‰å’Œç‰¹å®šæ ¼å¼çš„æµ®ç‚¹æ•°ï¼Œ</p><p>æ‰€ä»¥åŸºæ•°æ’åºä¹Ÿä¸æ˜¯åªèƒ½ä½¿ç”¨äºæ•´æ•°ã€‚</p><h4 id="1-è¿‡ç¨‹å›¾è§£-8"><a href="#1-è¿‡ç¨‹å›¾è§£-8" class="headerlink" title="1.è¿‡ç¨‹å›¾è§£"></a>1.è¿‡ç¨‹å›¾è§£</h4><p><img src="/markdownImages/radixsort.gif" class="lazyload placeholder" data-srcset="/markdownImages/radixsort.gif" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="åŸºæ•°æ’åºå›¾å½¢å±•ç¤º"></p><h4 id="2-ç®—æ³•åˆ†æ-1"><a href="#2-ç®—æ³•åˆ†æ-1" class="headerlink" title="2.ç®—æ³•åˆ†æ"></a>2.ç®—æ³•åˆ†æ</h4><ul><li>å–å¾—æ•°ç»„ä¸­çš„æœ€å¤§æ•°ï¼Œå¹¶å–å¾—ä½æ•°ï¼›</li><li>arrä¸ºåŸå§‹æ•°ç»„ï¼Œä»æœ€ä½ä½å¼€å§‹å–æ¯ä¸ªä½ç»„æˆradixæ•°ç»„ï¼›</li><li>å¯¹radixè¿›è¡Œè®¡æ•°æ’åºï¼ˆåˆ©ç”¨è®¡æ•°æ’åºé€‚ç”¨äºå°èŒƒå›´æ•°çš„ç‰¹ç‚¹ï¼‰ï¼›</li></ul><h4 id="3ã€ä»£ç å®ç°"><a href="#3ã€ä»£ç å®ç°" class="headerlink" title="3ã€ä»£ç å®ç°"></a>3ã€ä»£ç å®ç°</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> math<span class="token keyword">def</span> <span class="token function">RadixSort</span><span class="token punctuation">(</span>lst<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">getbit</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">:</span>       <span class="token comment">#è¿”å›xçš„ç¬¬iä½ï¼ˆä»å³å‘å·¦ï¼Œä¸ªä½ä¸º0ï¼‰æ•°å€¼</span>        y<span class="token operator">=</span>x<span class="token operator">//</span><span class="token builtin">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span>        z<span class="token operator">=</span>y<span class="token operator">%</span><span class="token number">10</span>        <span class="token keyword">return</span> z    <span class="token keyword">def</span> <span class="token function">CountSort</span><span class="token punctuation">(</span>lst<span class="token punctuation">)</span><span class="token punctuation">:</span>        n<span class="token operator">=</span><span class="token builtin">len</span><span class="token punctuation">(</span>lst<span class="token punctuation">)</span>        num<span class="token operator">=</span><span class="token builtin">max</span><span class="token punctuation">(</span>lst<span class="token punctuation">)</span>        count<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span>num<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>            count<span class="token punctuation">[</span>lst<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">+=</span><span class="token number">1</span>        arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>num<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>count<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                arr<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span>        <span class="token keyword">return</span> arr    Max<span class="token operator">=</span><span class="token builtin">max</span><span class="token punctuation">(</span>lst<span class="token punctuation">)</span>    <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token builtin">int</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span>log10<span class="token punctuation">(</span>Max<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>             <span class="token comment">#å¯¹kä½æ•°æ’kæ¬¡,æ¯æ¬¡æŒ‰æŸä¸€ä½æ¥æ’</span>        arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">]</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> lst<span class="token punctuation">:</span>                 <span class="token comment">#å°†lsï¼ˆå¾…æ’æ•°åˆ—ï¼‰ä¸­æ¯ä¸ªæ•°æŒ‰æŸä¸€ä½åˆ†ç±»ï¼ˆ0-9å…±10ç±»ï¼‰å­˜åˆ°arr[][]äºŒç»´æ•°ç»„ï¼ˆåˆ—è¡¨ï¼‰ä¸­</span>            arr<span class="token punctuation">[</span>getbit<span class="token punctuation">(</span>i<span class="token punctuation">,</span>k<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>         <span class="token comment">#å¯¹arr[]ä¸­æ¯ä¸€ç±»ï¼ˆä¸€ä¸ªåˆ—è¡¨ï¼‰  æŒ‰è®¡æ•°æ’åºæ’å¥½</span>            <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token number">0</span><span class="token punctuation">:</span>                arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>CountSort<span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>        j<span class="token operator">=</span><span class="token number">9</span>        n<span class="token operator">=</span><span class="token builtin">len</span><span class="token punctuation">(</span>lst<span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>     <span class="token comment">#é¡ºåºè¾“å‡ºarr[][]ä¸­æ•°åˆ°lsä¸­ï¼Œå³æŒ‰ç¬¬kä½æ’å¥½</span>            <span class="token keyword">while</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">:</span>                j<span class="token operator">-=</span><span class="token number">1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                lst<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span>i<span class="token punctuation">]</span><span class="token operator">=</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>       <span class="token keyword">return</span> lst    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="4-ç®—æ³•åˆ†æ-8"><a href="#4-ç®—æ³•åˆ†æ-8" class="headerlink" title="4 ç®—æ³•åˆ†æ"></a>4 ç®—æ³•åˆ†æ</h4><p>åŸºæ•°æ’åºåŸºäºåˆ†åˆ«æ’åºï¼Œåˆ†åˆ«æ”¶é›†ï¼Œæ‰€ä»¥æ˜¯ç¨³å®šçš„ã€‚ä½†åŸºæ•°æ’åºçš„æ€§èƒ½æ¯”æ¡¶æ’åºè¦ç•¥å·®ï¼Œæ¯ä¸€æ¬¡å…³é”®å­—çš„æ¡¶åˆ†é…éƒ½éœ€è¦O(n)çš„æ—¶é—´å¤æ‚åº¦ï¼Œ<br>è€Œä¸”åˆ†é…ä¹‹åå¾—åˆ°æ–°çš„å…³é”®å­—åºåˆ—åˆéœ€è¦O(n)çš„æ—¶é—´å¤æ‚åº¦ã€‚å‡å¦‚å¾…æ’æ•°æ®å¯ä»¥åˆ†ä¸ºdä¸ªå…³é”®å­—ï¼Œåˆ™åŸºæ•°æ’åºçš„æ—¶é—´å¤æ‚åº¦å°†æ˜¯O(d*2n) ï¼Œ<br>å½“ç„¶dè¦è¿œè¿œå°äºnï¼Œå› æ­¤åŸºæœ¬ä¸Šè¿˜æ˜¯çº¿æ€§çº§åˆ«çš„ã€‚</p><p>åŸºæ•°æ’åºçš„ç©ºé—´å¤æ‚åº¦ä¸ºO(n+k)ï¼Œå…¶ä¸­kä¸ºæ¡¶çš„æ•°é‡ã€‚ä¸€èˆ¬æ¥è¯´n&gt;&gt;kï¼Œå› æ­¤é¢å¤–ç©ºé—´éœ€è¦å¤§æ¦‚nä¸ªå·¦å³ã€‚</p><h2 id="è¡¥å……ï¼šå¤–éƒ¨æ’åº"><a href="#è¡¥å……ï¼šå¤–éƒ¨æ’åº" class="headerlink" title="è¡¥å……ï¼šå¤–éƒ¨æ’åº"></a>è¡¥å……ï¼šå¤–éƒ¨æ’åº</h2><p>å¤–éƒ¨æ’åºæ˜¯æŒ‡å¤§æ–‡ä»¶æ’åºï¼Œå³å¾…æ’åºçš„æ•°æ®è®°å½•ä»¥æ–‡ä»¶çš„å½¢å¼å­˜å‚¨åœ¨å¤–å­˜å‚¨å™¨ä¸Šã€‚</p><p>ç”±äºæ–‡ä»¶ä¸­çš„è®°å½•å¾ˆå¤šã€ä¿¡æ¯å®¹é‡åºå¤§ï¼Œæ‰€ä»¥æ•´ä¸ªæ–‡ä»¶æ‰€å æ®çš„å­˜å‚¨å•å…ƒå¾€å¾€ä¼šè¶…è¿‡äº†è®¡ç®—æœºçš„å†…å­˜é‡ï¼Œ</p><p>å› æ­¤ï¼Œæ— æ³•å°†æ•´ä¸ªæ–‡ä»¶è°ƒå…¥å†…å­˜ä¸­è¿›è¡Œæ’åºã€‚äºæ˜¯ï¼Œåœ¨æ’åºè¿‡ç¨‹ä¸­éœ€è¿›è¡Œå¤šæ¬¡çš„å†…å¤–å­˜ä¹‹é—´çš„äº¤æ¢ã€‚</p><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œç”±äºä½¿ç”¨çš„å¤–è®¾ä¸ä¸€è‡´ï¼Œé€šå¸¸å¯ä»¥åˆ†ä¸ºç£ç›˜æ–‡ä»¶æ’åºå’Œç£å¸¦æ–‡ä»¶æ’åºä¸¤å¤§ç±»ã€‚</p><p>å¤–éƒ¨æ’åºåŸºæœ¬ä¸Šç”±ä¸¤ä¸ªç›¸å¯¹ç‹¬ç«‹çš„é˜¶æ®µç»„æˆã€‚</p><p>é¦–å…ˆï¼ŒæŒ‰å¯ç”¨å†…å­˜å¤§å°ï¼Œå°†å¤–å­˜ä¸Šå« N ä¸ªè®°å½•çš„æ–‡ä»¶åˆ†æˆè‹¥å¹²é•¿åº¦ä¸º L(&lt;N) çš„å­æ–‡ä»¶ï¼Œ</p><p>ä¾æ¬¡è¯»å…¥å†…å­˜ï¼Œåˆ©ç”¨å†…éƒ¨æ’åºç®—æ³•è¿›è¡Œæ’åºã€‚ç„¶åï¼Œå°†æ’åºåçš„æ–‡ä»¶å†™å…¥å¤–å­˜ï¼Œ</p><p>é€šå¸¸å°†è¿™äº›æ–‡ä»¶ç§°ä¸ºå½’å¹¶æ®µï¼ˆRunï¼‰æˆ–â€œé¡ºä¸²â€ï¼›å¯¹è¿™äº›å½’å¹¶æ®µè¿›è¡Œé€æ­¥å½’å¹¶ï¼Œ</p><p>æœ€ç»ˆå¾—åˆ°æ•´ä¸ªæœ‰åºæ–‡ä»¶ã€‚å¯è§å¤–éƒ¨æ’åºçš„åŸºæœ¬æ–¹æ³•æ˜¯å½’å¹¶æ’åºæ³•ï¼Œä¸‹é¢çš„ä¾‹å­ç»™å‡ºäº†ä¸€ä¸ªç®€å•çš„å¤–éƒ¨æ’åºè§£å†³è¿‡ç¨‹ã€‚</p><p>ã€ä¾‹å­ã€‘ç»™å®šç£ç›˜ä¸Šæœ‰6å¤§å—è®°å½•éœ€è¦æ’åºï¼Œè€Œè®¡ç®—æœºå†…å­˜æœ€å¤šåªèƒ½å¯¹3ä¸ªè®°å½•å—è¿›è¡Œå†…æ’åºï¼Œåˆ™å¤–éƒ¨æ’åºçš„è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚<br><img src="/markdownImages/outsort_example.png" class="lazyload placeholder" data-srcset="/markdownImages/outsort_example.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="åŸºæ•°æ’åºå›¾å½¢å±•ç¤º"><br>ã€è§£æã€‘é¦–å…ˆå°†è¿ç»­çš„3å¤§å—è®°å½•è¯»å…¥å†…å­˜ï¼Œç”¨ä»»ä½•ä¸€ç§å†…éƒ¨æ’åºç®—æ³•å®Œæˆæ’åºï¼Œå†å†™å›ç£ç›˜ã€‚</p><p>ç»è¿‡2æ¬¡3å¤§å—è®°å½•çš„å†…éƒ¨æ’åºï¼Œå¾—åˆ°ä¸Šå›¾ï¼ˆaï¼‰çš„ç»“æœã€‚ç„¶åå¦ç”¨ä¸€ä¸ªå¯å®¹çº³6å¤§å—è®°å½•çš„å‘¨è½¬ç›˜ï¼Œè¾…åŠ©æœ€åçš„å½’å¹¶ã€‚</p><p>æ–¹æ³•æ˜¯å°†å†…å­˜åˆ†æˆ3å—ï¼Œå…¶ä¸­2å—ç”¨äºè¾“å…¥ï¼Œ1å—ç”¨äºè¾“å‡ºï¼ŒæŒ‡å®šä¸€ä¸ªè¾“å…¥å—åªè´Ÿè´£è¯»å–ä¸€ä¸ªå½’å¹¶æ®µä¸­çš„è®°å½•ï¼Œå¦‚ä¸Šå›¾ï¼ˆbï¼‰æ‰€ç¤ºã€‚<br>å½’å¹¶æ­¥éª¤ä¸ºï¼š</p><ul><li>å½“ä»»ä¸€è¾“å…¥å—ä¸ºç©ºæ—¶ï¼Œå½’å¹¶æš‚åœï¼Œå°†ç›¸åº”å½’å¹¶æ®µä¸­çš„ä¸€å—ä¿¡æ¯å†™å…¥å†…å­˜</li><li>å°†å†…å­˜ä¸­2ä¸ªè¾“å…¥å—ä¸­çš„è®°å½•é€ä¸€å½’å¹¶å…¥è¾“å‡ºå—</li><li>å½“è¾“å‡ºå—å†™æ»¡æ—¶ï¼Œå½’å¹¶æš‚åœï¼Œå°†è¾“å‡ºå—ä¸­çš„è®°å½•å†™å…¥å‘¨è½¬ç›˜<br>å¦‚æ­¤å¯å°†2ä¸ªå½’å¹¶æ®µåœ¨å‘¨è½¬ç›˜ä¸Šå½’å¹¶æˆä¸€ä¸ªæœ‰åºçš„å½’å¹¶æ®µã€‚</li></ul><p>ä¸Šä¾‹çš„è§£å†³æ–¹æ³•æ˜¯æœ€ç®€å•çš„å½’å¹¶æ³•ï¼Œäº‹å®ä¸Šå¤–éƒ¨æ’åºçš„æ•ˆç‡è¿˜å¯ä»¥è¿›ä¸€æ­¥æé«˜ã€‚è¦æé«˜å¤–æ’çš„æ•ˆç‡ï¼Œå…³é”®è¦è§£å†³ä»¥ä¸‹4ä¸ªé—®é¢˜ï¼š</p><ul><li>   å¦‚ä½•å‡å°‘å½’å¹¶è½®æ•°</li><li>   å¦‚ä½•æœ‰æ•ˆå®‰æ’å†…å­˜ä¸­çš„è¾“å…¥ã€è¾“å‡ºå—ï¼Œä½¿å¾—æœºå™¨çš„å¹¶è¡Œå¤„ç†èƒ½åŠ›è¢«æœ€å¤§é™åº¦åˆ©ç”¨</li><li>   å¦‚ä½•æœ‰æ•ˆç”Ÿæˆå½’å¹¶æ®µ</li><li>   å¦‚ä½•å°†å½’å¹¶æ®µè¿›è¡Œæœ‰æ•ˆå½’å¹¶</li></ul><p>é’ˆå¯¹è¿™å››å¤§é—®é¢˜ï¼Œäººä»¬è®¾è®¡äº†å¤šç§è§£å†³æ–¹æ¡ˆï¼Œä¾‹å¦‚é‡†ç”¨å¤šè·¯å½’å¹¶å–ä»£ç®€å•çš„äºŒè·¯å½’å¹¶ï¼Œå°±å¯ä»¥å‡å°‘å½’å¹¶è½®æ•°ï¼›</p><p>ä¾‹å¦‚åœ¨å†…å­˜ä¸­åˆ’åˆ†å‡º2ä¸ªè¾“å‡ºå—ï¼Œè€Œä¸æ˜¯åªç”¨ä¸€ä¸ªï¼Œå°±å¯ä»¥è®¾è®¡ç®—æ³•ä½¿å¾—å½’å¹¶æ’åºä¸ä¼šå› ä¸ºç£ç›˜çš„å†™æ“ä½œè€Œæš‚åœï¼Œ</p><p>è¾¾åˆ°å½’å¹¶å’Œå†™å‘¨è½¬ç›˜åŒæ—¶å¹¶è¡Œçš„æ•ˆæœï¼›ä¾‹å¦‚é€šè¿‡ä¸€ç§â€œè´¥è€…æ ‘â€çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥ä¸€æ¬¡ç”Ÿæˆ2å€äºå†…å­˜å®¹é‡çš„å½’å¹¶æ®µï¼›</p><p>ä¾‹å¦‚åˆ©ç”¨å“ˆå¤«æ›¼æ ‘çš„è´ªå¿ƒç­–ç•¥é€‰æ‹©å½’å¹¶æ¬¡åºï¼Œå¯ä»¥è€—è´¹æœ€å°‘çš„ç£ç›˜è¯»å†™æ—¶é—´ç­‰</p><h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><p>å„ç§ç®—æ³•é‡è¦çš„æ—¶ç†è§£&amp;è®°ä½å®ƒä»¬çš„ç®—æ³•åŸç†ï¼Œå› ä¸ºä»£ç æ˜¯æ°¸è¿œè®°ä¸ä½çš„ï¼Œåªè¦è®°ä½åŸç†ä½ å°±èƒ½ç”¨ä¼ªä»£ç å®ç°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ’åº </tag>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸»é¢˜ä»‹ç»-ä¾§è¾¹æ åŠŸèƒ½</title>
      <link href="/post/ben-zhan-jie-shao/zhu-ti-jie-shao-ce-bian-lan-gong-neng/"/>
      <url>/post/ben-zhan-jie-shao/zhu-ti-jie-shao-ce-bian-lan-gong-neng/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é¦–é¡µä¾§è¾¹æ æ”¯æŒçš„ç‰ˆæœ¬ä¸º v2.6.0+</p></blockquote><h1 id="é»˜è®¤çš„ä¾§è¾¹æ "><a href="#é»˜è®¤çš„ä¾§è¾¹æ " class="headerlink" title="é»˜è®¤çš„ä¾§è¾¹æ "></a>é»˜è®¤çš„ä¾§è¾¹æ </h1><p>åœ¨ä¸»é¢˜çš„<code>config.yml</code>æ–‡ä»¶ä¸­é…ç½®</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># sidebarä¾§è¾¹æ </span><span class="token key atrule">sidebar</span><span class="token punctuation">:</span>  <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">position</span><span class="token punctuation">:</span> left <span class="token comment"># left right</span>  <span class="token key atrule">widget_library</span><span class="token punctuation">:</span>    <span class="token key atrule">side_blogger</span><span class="token punctuation">:</span>      <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>      <span class="token key atrule">avatar</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//api.btstu.cn/sjtx/api.php<span class="token punctuation">?</span>lx=c1<span class="token important">&amp;format=images</span>      <span class="token key atrule">shape</span><span class="token punctuation">:</span> rectangle <span class="token comment"># circle, rectangle</span>      <span class="token key atrule">url</span><span class="token punctuation">:</span> /about/      <span class="token key atrule">title</span><span class="token punctuation">:</span> é’å¢¨ä¹¦æ™šé£      <span class="token key atrule">subtitle</span><span class="token punctuation">:</span> æˆ‘æ˜¯å‰¯æ ‡é¢˜      <span class="token key atrule">jinrishici</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># Poetry Today. You can set a string, and it will be displayed when loading fails.</span>      <span class="token key atrule">fontFammily</span><span class="token punctuation">:</span> Long Cang<span class="token punctuation">,</span>cursive      <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'#fff'</span>      <span class="token key atrule">order</span><span class="token punctuation">:</span>  <span class="token comment"># å¡ç‰‡æ’åº, æ•°å€¼è¶Šå°ï¼Œè¶Šåœ¨ä¸Šé¢</span>      <span class="token key atrule">social</span><span class="token punctuation">:</span>        <span class="token punctuation">-</span> <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>rss          <span class="token key atrule">url</span><span class="token punctuation">:</span> /atom.xml        <span class="token punctuation">-</span> <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>envelope          <span class="token key atrule">url</span><span class="token punctuation">:</span> mailto<span class="token punctuation">:</span>me@xxx.com        <span class="token punctuation">-</span> <span class="token key atrule">icon</span><span class="token punctuation">:</span> fab fa<span class="token punctuation">-</span>github          <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/yuang01/hexo<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>bamboo        <span class="token punctuation">-</span> <span class="token key atrule">icon</span><span class="token punctuation">:</span> fab fa<span class="token punctuation">-</span>qq          <span class="token key atrule">url</span><span class="token punctuation">:</span> tencent<span class="token punctuation">:</span>//AddContact/<span class="token punctuation">?</span>fromId=50<span class="token important">&amp;fromSubId=1&amp;subcmd=all&amp;uin=ä½ çš„qqå·ç </span>    <span class="token comment"># ---------------------------------------</span>    <span class="token comment"># category widget</span>    <span class="token key atrule">side_category</span><span class="token punctuation">:</span>      <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>      <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'#fff'</span>      <span class="token key atrule">order</span><span class="token punctuation">:</span>  <span class="token comment"># å¡ç‰‡æ’åº(widgetéƒ½æœ‰)ï¼Œä»»æ„æ•°å­—ï¼Œæ•°å­—å°çš„åœ¨ä¸Šé¢</span>      <span class="token key atrule">header</span><span class="token punctuation">:</span>        <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>folder<span class="token punctuation">-</span>open        <span class="token key atrule">icon_color</span><span class="token punctuation">:</span> <span class="token comment"># æ ‡é¢˜å­—ä½“é¢œè‰²</span>        <span class="token key atrule">title</span><span class="token punctuation">:</span> æ–‡ç« åˆ†ç±»        <span class="token key atrule">url</span><span class="token punctuation">:</span> /blog/categories/    <span class="token comment"># ---------------------------------------</span>    <span class="token comment"># tagcloud widget</span>    <span class="token key atrule">side_tagcloud</span><span class="token punctuation">:</span>      <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>      <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'#fff'</span>      <span class="token key atrule">order</span><span class="token punctuation">:</span>       <span class="token key atrule">header</span><span class="token punctuation">:</span>        <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>tags        <span class="token key atrule">icon_color</span><span class="token punctuation">:</span>         <span class="token key atrule">title</span><span class="token punctuation">:</span> çƒ­é—¨æ ‡ç­¾        <span class="token key atrule">url</span><span class="token punctuation">:</span> /tags/      <span class="token key atrule">min_font</span><span class="token punctuation">:</span> <span class="token number">14</span>      <span class="token key atrule">max_font</span><span class="token punctuation">:</span> <span class="token number">24</span>      <span class="token key atrule">color</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>      <span class="token key atrule">start_color</span><span class="token punctuation">:</span> <span class="token string">'#999'</span>      <span class="token key atrule">end_color</span><span class="token punctuation">:</span> <span class="token string">'#555'</span>    <span class="token comment"># ---------------------------------------</span>    <span class="token comment"># recent_post widget</span>    <span class="token key atrule">side_recent_post</span><span class="token punctuation">:</span>      <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>      <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'#fff'</span>      <span class="token key atrule">limit</span><span class="token punctuation">:</span> <span class="token number">5</span>      <span class="token key atrule">sort</span><span class="token punctuation">:</span> update <span class="token comment"># date</span>      <span class="token key atrule">order</span><span class="token punctuation">:</span>       <span class="token key atrule">header</span><span class="token punctuation">:</span>        <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>book        <span class="token key atrule">icon_color</span><span class="token punctuation">:</span>         <span class="token key atrule">title</span><span class="token punctuation">:</span> æœ€æ–°æ–‡ç«         <span class="token key atrule">url</span><span class="token punctuation">:</span> /tags/    <span class="token comment"># ---------------------------------------</span>    <span class="token comment"># side_archives widget</span>    <span class="token key atrule">side_archives</span><span class="token punctuation">:</span>      <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>      <span class="token key atrule">type</span><span class="token punctuation">:</span> monthly <span class="token comment"># yearly or monthly      or yearly</span>      <span class="token key atrule">format</span><span class="token punctuation">:</span> MMMM YYYY <span class="token comment"># eg: YYYYå¹´MMæœˆ     or YYYY</span>      <span class="token key atrule">timeOrder</span><span class="token punctuation">:</span> <span class="token number">-1</span> <span class="token comment"># Sort of order. 1, asc for ascending; -1, desc for descending æ—¶é—´æ’åº</span>      <span class="token key atrule">limit</span><span class="token punctuation">:</span> <span class="token number">8</span> <span class="token comment"># if set 0 will show all</span>      <span class="token key atrule">order</span><span class="token punctuation">:</span>  <span class="token comment"># widget order å¡ç‰‡æ’åº</span>      <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'#fff'</span>      <span class="token key atrule">header</span><span class="token punctuation">:</span>         <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>archive        <span class="token key atrule">icon_color</span><span class="token punctuation">:</span> red        <span class="token key atrule">title</span><span class="token punctuation">:</span> å½’æ¡£    <span class="token comment"># ---------------------------------------</span>    <span class="token comment"># side_webinfo widget</span>    <span class="token key atrule">side_webinfo</span><span class="token punctuation">:</span>      <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'#fff'</span>      <span class="token key atrule">order</span><span class="token punctuation">:</span>       <span class="token key atrule">header</span><span class="token punctuation">:</span>         <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>chart<span class="token punctuation">-</span>line        <span class="token key atrule">title</span><span class="token punctuation">:</span> ç«™ç‚¹ä¿¡æ¯      <span class="token key atrule">type</span><span class="token punctuation">:</span>        <span class="token key atrule">article</span><span class="token punctuation">:</span>          <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>          <span class="token key atrule">text</span><span class="token punctuation">:</span> <span class="token string">'æ–‡ç« æ•°ç›®ï¼š'</span>          <span class="token key atrule">unit</span><span class="token punctuation">:</span> <span class="token string">'ç¯‡'</span>        <span class="token key atrule">runtime</span><span class="token punctuation">:</span>          <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>          <span class="token key atrule">data</span><span class="token punctuation">:</span> <span class="token string">'2020/01/01'</span>    <span class="token comment"># å¡«å†™å»ºç«™æ—¥æœŸ</span>          <span class="token key atrule">text</span><span class="token punctuation">:</span> <span class="token string">'å·²è¿è¡Œæ—¶é—´ï¼š'</span>          <span class="token key atrule">unit</span><span class="token punctuation">:</span> <span class="token string">'å¤©'</span>        <span class="token key atrule">wordcount</span><span class="token punctuation">:</span>          <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>          <span class="token key atrule">text</span><span class="token punctuation">:</span> <span class="token string">'æœ¬ç«™æ€»å­—æ•°ï¼š'</span>   <span class="token comment"># éœ€è¦å¯ç”¨ wordcount</span>          <span class="token key atrule">unit</span><span class="token punctuation">:</span> <span class="token string">'å­—'</span>        <span class="token key atrule">visitcounter</span><span class="token punctuation">:</span>          <span class="token key atrule">service</span><span class="token punctuation">:</span> busuanzi <span class="token comment"># only busuanzi</span>          <span class="token key atrule">siteuv</span><span class="token punctuation">:</span>            <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>            <span class="token key atrule">text</span><span class="token punctuation">:</span> <span class="token string">'æœ¬ç«™è®¿å®¢æ•°ï¼š'</span>            <span class="token key atrule">unit</span><span class="token punctuation">:</span> <span class="token string">'äºº'</span>          <span class="token key atrule">sitepv</span><span class="token punctuation">:</span>            <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>            <span class="token key atrule">text</span><span class="token punctuation">:</span> <span class="token string">'æœ¬ç«™æ€»è®¿é—®é‡ï¼š'</span>            <span class="token key atrule">unit</span><span class="token punctuation">:</span> <span class="token string">'æ¬¡'</span>        <span class="token key atrule">lastupd</span><span class="token punctuation">:</span>          <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>          <span class="token key atrule">friendlyShow</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>    <span class="token comment"># æ›´å‹å¥½çš„æ—¶é—´æ˜¾ç¤º</span>          <span class="token key atrule">text</span><span class="token punctuation">:</span> <span class="token string">'æœ€åæ´»åŠ¨æ—¶é—´ï¼š'</span>          <span class="token key atrule">unit</span><span class="token punctuation">:</span> <span class="token string">'æ—¥'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="widget-æ’åº"><a href="#widget-æ’åº" class="headerlink" title="widget æ’åº"></a>widget æ’åº</h1><p>åªéœ€è¦é…ç½® <code>order</code> å°±è¡Œã€‚ï¼ˆä½¿ç”¨äº† Flex ä½ˆå±€çš„ order å±¬æ€§)ï¼Œå€¼è¶Šå°è¶Šé å‰(é ä¸Š)</p><h1 id="è‡ªå®šä¹‰ä¾§è¾¹æ "><a href="#è‡ªå®šä¹‰ä¾§è¾¹æ " class="headerlink" title="è‡ªå®šä¹‰ä¾§è¾¹æ "></a>è‡ªå®šä¹‰ä¾§è¾¹æ </h1><h2 id="åˆ›å»º-widget-yml"><a href="#åˆ›å»º-widget-yml" class="headerlink" title="åˆ›å»º widget.yml"></a>åˆ›å»º widget.yml</h2><p>åœ¨Hexoåšå®¢ç›®å½•ä¸­çš„<code>source/_data</code>ï¼ˆå¦‚æœæ²’æœ‰ _data æ–‡ä»¶å¤¾ï¼Œè¯·è‡ªè¡Œåˆ›å»ºï¼‰ï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ widget.yml</p><h2 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># widget_library é‡Œé¢çš„ä¸ä¼šå‡ºç°åœ¨stickyåŒºåŸŸï¼Œä¹Ÿå°±æ˜¯ä¸ä¼šç²˜è´´åœ¨å·¦ä¾§ </span><span class="token key atrule">widget_library</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token key atrule">class_name</span><span class="token punctuation">:</span> test_a  <span class="token key atrule">id_name</span><span class="token punctuation">:</span> test_a  <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token number">0</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> è¿™ä¸ªwidgetä¸ä¼šç²˜è´´  <span class="token key atrule">icon</span><span class="token punctuation">:</span> fab fa<span class="token punctuation">-</span>weibo  <span class="token key atrule">icon_color</span><span class="token punctuation">:</span> <span class="token string">'#d63130'</span>  <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//baidu.com  <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'#fff'</span>  <span class="token key atrule">html</span><span class="token punctuation">:</span> <span class="token string">'haha'</span><span class="token comment"># widget_library_sticky é‡Œé¢çš„ä¼šå‡ºç°åœ¨stickyåŒºåŸŸï¼Œä¼šç²˜è´´åœ¨å·¦ä¾§</span><span class="token key atrule">widget_library_sticky</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token key atrule">class_name</span><span class="token punctuation">:</span> testWidget    <span class="token key atrule">id_name</span><span class="token punctuation">:</span> testWidget    <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token number">-1</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> å¾®åšçƒ­æœ    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fab fa<span class="token punctuation">-</span>weibo    <span class="token key atrule">icon_color</span><span class="token punctuation">:</span> <span class="token string">'#d63130'</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//baidu.com    <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'#fff'</span>    <span class="token key atrule">html</span><span class="token punctuation">:</span> <span class="token string">'xixi'</span><span class="token comment"># home_widgeté‡Œé¢çš„å†…å®¹ä¼šå‡ºç°åœ¨åº§å³é“­é‚£ä¸€ä¸ªæ ç›®é‡Œé¢</span><span class="token key atrule">home_widget</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token key atrule">class_name</span><span class="token punctuation">:</span> welcome    <span class="token key atrule">id_name</span><span class="token punctuation">:</span> welcome    <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token number">-1</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> æ¬¢è¿    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>envelope    <span class="token key atrule">icon_color</span><span class="token punctuation">:</span> blue    <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//baidu.com    <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'#fff'</span>    <span class="token key atrule">html</span><span class="token punctuation">:</span> <span class="token string">'é’ˆä¸æˆ³'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å‚æ•°è§£é‡Š"><a href="#å‚æ•°è§£é‡Š" class="headerlink" title="å‚æ•°è§£é‡Š"></a>å‚æ•°è§£é‡Š</h2><table><thead><tr><th>å‚æ•°</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>class_name</td><td>æ‰€åˆ›å»ºçš„ widget çˆ¶ç±» class å</td></tr><tr><td>id_name</td><td>æ‰€åˆ›å»ºçš„ widget çˆ¶ç±» id å</td></tr><tr><td>order</td><td>æ‰€åˆ›å»ºçš„ widget æ’åº ï¼ˆå¯é€‰ï¼‰</td></tr><tr><td>name</td><td>æ‰€åˆ›å»ºçš„ widget åç§°</td></tr><tr><td>icon</td><td>æ‰€åˆ›å»ºçš„ widget å¤´éƒ¨çš„å­—ä½“å›¾æ ‡</td></tr><tr><td>icon_color</td><td>æ‰€åˆ›å»ºçš„ widget å¤´éƒ¨çš„å­—ä½“å›¾æ ‡çš„é¢œè‰²</td></tr><tr><td>url</td><td>æ‰€åˆ›å»ºçš„ widget å¤´éƒ¨ç‚¹å‡»è·³è½¬çš„é“¾æ¥</td></tr><tr><td>background</td><td>æ‰€åˆ›å»ºçš„ widget çš„èƒŒæ™¯é¢œè‰²</td></tr><tr><td>html</td><td>æ‰€åˆ›å»ºçš„ widget çš„ç›¸å…³ä»£ç </td></tr></tbody></table><p>ç”Ÿæˆçš„ä»£ç ä¸º</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>widget test_a<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test_a<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">order</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token property">background</span><span class="token punctuation">:</span> #fff</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> #d63130</span><span class="token punctuation">"</span></span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>noopener<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://baidu.com<span class="token punctuation">"</span></span> <span class="token attr-name">data-pjax-state</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fab fa-weibo fa-fw<span class="token punctuation">"</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¿™ä¸ªwidgetä¸ä¼šç²˜è´´<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    haha  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœä½ éœ€è¦å¯¹æ·»åŠ çš„ widget è¿›è¡Œ UI è°ƒæ•´ï¼Œè¯·è‡ªè¡Œæ·»åŠ  css åˆ° inject å»ã€‚</p><h2 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><h3 id="é¦–é¡µæ·»åŠ githubæ—¥å†"><a href="#é¦–é¡µæ·»åŠ githubæ—¥å†" class="headerlink" title="é¦–é¡µæ·»åŠ githubæ—¥å†"></a>é¦–é¡µæ·»åŠ githubæ—¥å†</h3><p>ä¾‹å¦‚æˆ‘åœ¨``é‡Œæ·»åŠ ä¸€ä¸ªgithubæ—¥å†ï¼Œé¦–å…ˆæˆ‘åœ¨sourceæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªjsæ–‡ä»¶<code>/githubcalendar/index.js</code>, jsä»£ç å¦‚ä¸‹:</p><details cyan><summary pointer> githubæ—¥å†js </summary>              <div class='content'>              <pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">var github_canlendar = (git_user<span class="token punctuation">,</span> git_color) =<span class="token punctuation">></span> <span class="token punctuation">&#123;</span>    var git_githubapiurl = "https<span class="token punctuation">:</span>//python<span class="token punctuation">-</span>github<span class="token punctuation">-</span>calendar<span class="token punctuation">-</span>api.vercel.app/api<span class="token punctuation">?</span>" + git_user;    var git_fixed = 'fixed';    var git_px = 'px';    var git_month = <span class="token punctuation">[</span><span class="token string">'ä¸€æœˆ'</span><span class="token punctuation">,</span> <span class="token string">'äºŒæœˆ'</span><span class="token punctuation">,</span> <span class="token string">'ä¸‰æœˆ'</span><span class="token punctuation">,</span> <span class="token string">'å››æœˆ'</span><span class="token punctuation">,</span> <span class="token string">'äº”æœˆ'</span><span class="token punctuation">,</span> <span class="token string">'å…­æœˆ'</span><span class="token punctuation">,</span> <span class="token string">'ä¸ƒæœˆ'</span><span class="token punctuation">,</span> <span class="token string">'å…«æœˆ'</span><span class="token punctuation">,</span> <span class="token string">'ä¹æœˆ'</span><span class="token punctuation">,</span> <span class="token string">'åæœˆ'</span><span class="token punctuation">,</span> <span class="token string">'åä¸€æœˆ'</span><span class="token punctuation">,</span> <span class="token string">'åäºŒæœˆ'</span><span class="token punctuation">]</span>;    var git_monthchange = <span class="token punctuation">[</span><span class="token punctuation">]</span>;    var git_oneyearbeforeday = '';    var git_thisday = '';    var git_amonthago = '';    var git_aweekago = '';    var git_weekdatacore = 0;    var git_datacore = 0;    var git_total = 0;    var git_datadate = '';    var git_git_data = <span class="token punctuation">[</span><span class="token punctuation">]</span>;    var git_positionplusdata = <span class="token punctuation">[</span><span class="token punctuation">]</span>;    var git_firstweek = <span class="token punctuation">[</span><span class="token punctuation">]</span>;    var git_lastweek = <span class="token punctuation">[</span><span class="token punctuation">]</span>;    var git_beforeweek = <span class="token punctuation">[</span><span class="token punctuation">]</span>;    var git_thisweekdatacore = 0;    var git_mounthbeforeday = 0;    var git_mounthfirstindex = 0;    var git_crispedges = 'crispedges';    var git_thisdayindex = 0;    var git_amonthagoindex = 0;    var git_amonthagoweek = <span class="token punctuation">[</span><span class="token punctuation">]</span>;    var git_firstdate = <span class="token punctuation">[</span><span class="token punctuation">]</span>;    var git_first2date = <span class="token punctuation">[</span><span class="token punctuation">]</span>;    var git_montharrbefore = <span class="token punctuation">[</span><span class="token punctuation">]</span>;    var git_monthindex = 0;    var retinaCanvas = (canvas<span class="token punctuation">,</span> context<span class="token punctuation">,</span> ratio) =<span class="token punctuation">></span> <span class="token punctuation">&#123;</span>        if (ratio <span class="token punctuation">></span> 1) <span class="token punctuation">&#123;</span>            var canvasWidth = canvas.width;            var canvasHeight = canvas.height;            canvas.width = canvasWidth * ratio;            canvas.height = canvasHeight * ratio;            canvas.style.width = '100%';            canvas.style.height = canvasHeight + 'px';            context.scale(ratio<span class="token punctuation">,</span> ratio);        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>;    function responsiveChart() <span class="token punctuation">&#123;</span>        var ratio = window.devicePixelRatio <span class="token punctuation">|</span><span class="token punctuation">|</span> 1        var git_tooltip_container = document.getElementById('git_tooltip_container');        var git_x = '';        var git_y = '';        var git_span1 = '';        var git_span2 = '';        var c = document.getElementById("gitcanvas");        c.style.width = '100%';        c.style.height = '';        var cmessage = document.getElementById("gitmessage");        var ctx = c.getContext("2d");        width = c.width = document.getElementById("gitcalendarcanvasbox").offsetWidth;        height = c.height = 9 * 0.96 * c.width / git_data.length;        retinaCanvas(c<span class="token punctuation">,</span>ctx<span class="token punctuation">,</span> ratio)        var linemaxwitdh = height/ 9;        var lineminwitdh = 0.8 * linemaxwitdh;        var setposition = <span class="token punctuation">&#123;</span><span class="token key atrule">x</span><span class="token punctuation">:</span> 0.02 * width<span class="token punctuation">,</span> <span class="token key atrule">y</span><span class="token punctuation">:</span> 0.025 * width<span class="token punctuation">&#125;</span>;        for (var week in git_data) <span class="token punctuation">&#123;</span>            weekdata = git_data<span class="token punctuation">[</span>week<span class="token punctuation">]</span>;            for (var day in weekdata) <span class="token punctuation">&#123;</span>                var dataitem = <span class="token punctuation">&#123;</span><span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token key atrule">count</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token key atrule">x</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token key atrule">y</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">&#125;</span>;                git_positionplusdata.push(dataitem);                ctx.fillStyle = git_thiscolor(git_color<span class="token punctuation">,</span> weekdata<span class="token punctuation">[</span>day<span class="token punctuation">]</span>.count);                setposition.y = Math.round(setposition.y * 100) / 100;                dataitem.date = weekdata<span class="token punctuation">[</span>day<span class="token punctuation">]</span>.date;                dataitem.count = weekdata<span class="token punctuation">[</span>day<span class="token punctuation">]</span>.count;                dataitem.x = setposition.x;                dataitem.y = setposition.y;                ctx.fillRect(setposition.x<span class="token punctuation">,</span> setposition.y<span class="token punctuation">,</span> lineminwitdh<span class="token punctuation">,</span> lineminwitdh);                setposition.y = setposition.y + linemaxwitdh            <span class="token punctuation">&#125;</span>            setposition.y = 0.025 * width;            setposition.x = setposition.x + linemaxwitdh        <span class="token punctuation">&#125;</span>        if (document.body.clientWidth <span class="token punctuation">></span> 700) <span class="token punctuation">&#123;</span>            ctx.font = "600  Arial";            ctx.fillStyle = '<span class="token comment">#aaa';</span>            ctx.fillText("æ—¥"<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> 1.9 * linemaxwitdh);            ctx.fillText("äºŒ"<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> 3.9 * linemaxwitdh);            ctx.fillText("å››"<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> 5.9 * linemaxwitdh);            ctx.fillText("å…­"<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> 7.9 * linemaxwitdh);            var monthindexlist = width / 24;            for (var index in git_monthchange) <span class="token punctuation">&#123;</span>                ctx.fillText(git_monthchange<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span> monthindexlist<span class="token punctuation">,</span> 0.7 * linemaxwitdh);                monthindexlist = monthindexlist + width / 12            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        c.onmousemove = function (event) <span class="token punctuation">&#123;</span>            if (document.querySelector('.gitmessage')) <span class="token punctuation">&#123;</span>                git_tooltip_container.innerHTML = ""            <span class="token punctuation">&#125;</span>            getMousePos(c<span class="token punctuation">,</span> event)        <span class="token punctuation">&#125;</span>;        git_tooltip_container.onmousemove = function (event) <span class="token punctuation">&#123;</span>            if (document.querySelector('.gitmessage')) <span class="token punctuation">&#123;</span>                git_tooltip_container.innerHTML = ""            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>;        function getMousePos(canvas<span class="token punctuation">,</span> event) <span class="token punctuation">&#123;</span>            var rect = canvas.getBoundingClientRect();            var x = event.clientX <span class="token punctuation">-</span> rect.left * (canvas.width / rect.width);            var y = event.clientY <span class="token punctuation">-</span> rect.top * (canvas.height / rect.height);            for (var item of git_positionplusdata) <span class="token punctuation">&#123;</span>                var lenthx = x <span class="token punctuation">-</span> item.x;                var lenthy = y <span class="token punctuation">-</span> item.y;                if (0 &lt; lenthx <span class="token important">&amp;&amp;</span> lenthx &lt; lineminwitdh) <span class="token punctuation">&#123;</span>                    if (0 &lt; lenthy <span class="token important">&amp;&amp;</span> lenthy &lt; lineminwitdh) <span class="token punctuation">&#123;</span>                        git_span1 = item.date;                        git_span2 = item.count;                        git_x = event.clientX <span class="token punctuation">-</span> 100;                        git_y = event.clientY <span class="token punctuation">-</span> 60;                        html = tooltip_html(git_x<span class="token punctuation">,</span> git_y<span class="token punctuation">,</span> git_span1<span class="token punctuation">,</span> git_span2);                        append_div_gitcalendar(git_tooltip_container<span class="token punctuation">,</span> html)                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    function addlastmonth() <span class="token punctuation">&#123;</span>        if (git_thisdayindex === 0) <span class="token punctuation">&#123;</span>            thisweekcore(52);            thisweekcore(51);            thisweekcore(50);            thisweekcore(49);            thisweekcore(48);            git_thisweekdatacore += git_firstdate<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span>.count;            git_amonthago = git_firstdate<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span>.date        <span class="token punctuation">&#125;</span> else <span class="token punctuation">&#123;</span>            thisweekcore(52);            thisweekcore(51);            thisweekcore(50);            thisweekcore(49);            thisweek2core();            git_amonthago = git_first2date<span class="token punctuation">[</span>git_thisdayindex <span class="token punctuation">-</span> <span class="token number">1</span><span class="token punctuation">]</span>.date        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    function thisweek2core() <span class="token punctuation">&#123;</span>        for (var i = git_thisdayindex <span class="token punctuation">-</span> 1; i &lt; git_first2date.length; i++) <span class="token punctuation">&#123;</span>            git_thisweekdatacore += git_first2date<span class="token punctuation">[</span>i<span class="token punctuation">]</span>.count        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    function thisweekcore(index) <span class="token punctuation">&#123;</span>        for (var item of git_data<span class="token punctuation">[</span>index<span class="token punctuation">]</span>) <span class="token punctuation">&#123;</span>            git_thisweekdatacore += item.count        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    function addlastweek() <span class="token punctuation">&#123;</span>        for (var item of git_lastweek) <span class="token punctuation">&#123;</span>            git_weekdatacore += item.count        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    function addbeforeweek() <span class="token punctuation">&#123;</span>        for (var i = git_thisdayindex; i &lt; git_beforeweek.length; i++) <span class="token punctuation">&#123;</span>            git_weekdatacore += git_beforeweek<span class="token punctuation">[</span>i<span class="token punctuation">]</span>.count        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    function addweek(data) <span class="token punctuation">&#123;</span>        if (git_thisdayindex === 6) <span class="token punctuation">&#123;</span>            git_aweekago = git_lastweek<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>.date;            addlastweek()        <span class="token punctuation">&#125;</span> else <span class="token punctuation">&#123;</span>            lastweek = data.contributions<span class="token punctuation">[</span><span class="token number">51</span><span class="token punctuation">]</span>;            git_aweekago = lastweek<span class="token punctuation">[</span>git_thisdayindex + 1<span class="token punctuation">]</span>.date;            addlastweek();            addbeforeweek()        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    fetch(git_githubapiurl).then(data =<span class="token punctuation">></span> data.json()).then(data =<span class="token punctuation">></span> <span class="token punctuation">&#123;</span>        git_data = data.contributions;        git_total = data.total;        git_first2date = git_data<span class="token punctuation">[</span><span class="token number">48</span><span class="token punctuation">]</span>;        git_firstdate = git_data<span class="token punctuation">[</span><span class="token number">47</span><span class="token punctuation">]</span>;        git_firstweek = data.contributions<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>;        git_lastweek = data.contributions<span class="token punctuation">[</span><span class="token number">52</span><span class="token punctuation">]</span>;        git_beforeweek = data.contributions<span class="token punctuation">[</span><span class="token number">51</span><span class="token punctuation">]</span>;        git_thisdayindex = git_lastweek.length <span class="token punctuation">-</span> 1;        git_thisday = git_lastweek<span class="token punctuation">[</span>git_thisdayindex<span class="token punctuation">]</span>.date;        git_oneyearbeforeday = git_firstweek<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>.date;        git_monthindex = git_thisday.substring(5<span class="token punctuation">,</span> 7) * 1;        git_montharrbefore = git_month.splice(git_monthindex<span class="token punctuation">,</span> 12 <span class="token punctuation">-</span> git_monthindex);        git_monthchange = git_montharrbefore.concat(git_month);        addweek(data);        addlastmonth();        var html = github_main_box(git_monthchange<span class="token punctuation">,</span> git_data<span class="token punctuation">,</span> git_user<span class="token punctuation">,</span> git_color<span class="token punctuation">,</span> git_total<span class="token punctuation">,</span> git_thisweekdatacore<span class="token punctuation">,</span> git_weekdatacore<span class="token punctuation">,</span> git_oneyearbeforeday<span class="token punctuation">,</span> git_thisday<span class="token punctuation">,</span> git_aweekago<span class="token punctuation">,</span> git_amonthago);        append_div_gitcalendar(github_container<span class="token punctuation">,</span> html);        if(document.getElementById('github_loading'))<span class="token punctuation">&#123;</span>            document.getElementById('github_loading').remove()<span class="token punctuation">&#125;</span>;        responsiveChart()    <span class="token punctuation">&#125;</span>).catch(function (error) <span class="token punctuation">&#123;</span>        console.log(error)    <span class="token punctuation">&#125;</span>);      window.addEventListener('resize'<span class="token punctuation">,</span> function () <span class="token punctuation">&#123;</span>        responsiveChart()    <span class="token punctuation">&#125;</span>)    window.addEventListener('scroll'<span class="token punctuation">,</span> function () <span class="token punctuation">&#123;</span>      if (document.querySelector('.gitmessage')) <span class="token punctuation">&#123;</span>        git_tooltip_container.innerHTML = ""    <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>)    var git_thiscolor = (color<span class="token punctuation">,</span> x) =<span class="token punctuation">></span> <span class="token punctuation">&#123;</span>        if (x === 0) <span class="token punctuation">&#123;</span>            var i = parseInt(x / 2);            return color<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>        <span class="token punctuation">&#125;</span> else if (x &lt; 2) <span class="token punctuation">&#123;</span>            return color<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>        <span class="token punctuation">&#125;</span> else if (x &lt; 20) <span class="token punctuation">&#123;</span>            var i = parseInt(x / 2);            return color<span class="token punctuation">[</span>i<span class="token punctuation">]</span>        <span class="token punctuation">&#125;</span> else <span class="token punctuation">&#123;</span>            return color<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>;    var tooltip_html = (x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> span1<span class="token punctuation">,</span> span2) =<span class="token punctuation">></span> <span class="token punctuation">&#123;</span>        var html = '';        <span class="token key atrule">html += '&lt;div class="gitmessage" style="top:' + y + 'px;left:' + x + 'px;position</span><span class="token punctuation">:</span> fixed;z<span class="token punctuation">-</span>index<span class="token punctuation">:</span>9999"<span class="token punctuation">></span>&lt;div class="angle<span class="token punctuation">-</span>wrapper" style="display<span class="token punctuation">:</span>block;"<span class="token punctuation">></span>&lt;span<span class="token punctuation">></span>' + span1 + '<span class="token important">&amp;nbsp;&lt;/span>&lt;span>'</span> + span2 + ' æ¬¡ä¸Šä¼ &lt;/span<span class="token punctuation">></span>&lt;/div<span class="token punctuation">></span>&lt;/div<span class="token punctuation">></span>';        return html    <span class="token punctuation">&#125;</span>;    var github_canvas_box = () =<span class="token punctuation">></span> <span class="token punctuation">&#123;</span>        <span class="token key atrule">var html = '&lt;div id="gitcalendarcanvasbox"> &lt;canvas id="gitcanvas" style="animation</span><span class="token punctuation">:</span> none;"<span class="token punctuation">></span>&lt;/canvas<span class="token punctuation">></span>&lt;/div<span class="token punctuation">></span>';        return html    <span class="token punctuation">&#125;</span>;    var github_info_box = (user<span class="token punctuation">,</span> color) =<span class="token punctuation">></span> <span class="token punctuation">&#123;</span>        var html = '';        html += '&lt;div id="git_tooltip_container"<span class="token punctuation">></span>&lt;/div<span class="token punctuation">></span>&lt;div class="contrib<span class="token punctuation">-</span>footer clearfix mt<span class="token punctuation">-</span>1 mx<span class="token punctuation">-</span>3 px<span class="token punctuation">-</span>3 pb<span class="token punctuation">-</span>1"<span class="token punctuation">></span>&lt;div class="float<span class="token punctuation">-</span>left text<span class="token punctuation">-</span>gray"<span class="token punctuation">></span>æ•°æ®æ¥æº &lt;a href="https<span class="token punctuation">:</span>//github.com/' + user + '" target="blank"<span class="token punctuation">></span>@' + user + '&lt;/a<span class="token punctuation">></span>&lt;/div<span class="token punctuation">></span>&lt;div class="contrib<span class="token punctuation">-</span>legend text<span class="token punctuation">-</span>gray"<span class="token punctuation">></span>Less &lt;ul class="legend"<span class="token punctuation">></span>&lt;li style="background<span class="token punctuation">-</span>color<span class="token punctuation">:</span>' + color<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> + '"<span class="token punctuation">></span>&lt;/li<span class="token punctuation">></span>&lt;li style="background<span class="token punctuation">-</span>color<span class="token punctuation">:</span>' + color<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> + '"<span class="token punctuation">></span>&lt;/li<span class="token punctuation">></span>&lt;li style="background<span class="token punctuation">-</span>color<span class="token punctuation">:</span>' + color<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> + '"<span class="token punctuation">></span>&lt;/li<span class="token punctuation">></span>&lt;li style="background<span class="token punctuation">-</span>color<span class="token punctuation">:</span>' + color<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> + '"<span class="token punctuation">></span>&lt;/li<span class="token punctuation">></span>&lt;li style="background<span class="token punctuation">-</span>color<span class="token punctuation">:</span>' + color<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> + '"<span class="token punctuation">></span>&lt;/li<span class="token punctuation">></span>&lt;/ul<span class="token punctuation">></span>More &lt;/div<span class="token punctuation">></span>&lt;/div<span class="token punctuation">></span>';        return html    <span class="token punctuation">&#125;</span>;    var github_main_box = (monthchange<span class="token punctuation">,</span> git_data<span class="token punctuation">,</span> user<span class="token punctuation">,</span> color<span class="token punctuation">,</span> total<span class="token punctuation">,</span> thisweekdatacore<span class="token punctuation">,</span> weekdatacore<span class="token punctuation">,</span> oneyearbeforeday<span class="token punctuation">,</span> thisday<span class="token punctuation">,</span> aweekago<span class="token punctuation">,</span> amonthago) =<span class="token punctuation">></span> <span class="token punctuation">&#123;</span>        var html = '';        var canvasbox = github_canvas_box();        var infobox = github_info_box(user<span class="token punctuation">,</span> color);        var style = github_main_style();        html += '&lt;div class="position<span class="token punctuation">-</span>relative"<span class="token punctuation">></span>&lt;div class="border py<span class="token punctuation">-</span>2 graph<span class="token punctuation">-</span>before<span class="token punctuation">-</span>activity<span class="token punctuation">-</span>overview"<span class="token punctuation">></span>&lt;div class="js<span class="token punctuation">-</span>gitcalendar<span class="token punctuation">-</span>graph mx<span class="token punctuation">-</span>md<span class="token punctuation">-</span>2 mx<span class="token punctuation">-</span>3 d<span class="token punctuation">-</span>flex flex<span class="token punctuation">-</span>column flex<span class="token punctuation">-</span>items<span class="token punctuation">-</span>end flex<span class="token punctuation">-</span>xl<span class="token punctuation">-</span>items<span class="token punctuation">-</span>center overflow<span class="token punctuation">-</span>hidden pt<span class="token punctuation">-</span>1 is<span class="token punctuation">-</span>graph<span class="token punctuation">-</span>loading graph<span class="token punctuation">-</span>canvas gitcalendar<span class="token punctuation">-</span>graph height<span class="token punctuation">-</span>full text<span class="token punctuation">-</span>center"<span class="token punctuation">></span>' + canvasbox + '&lt;/div<span class="token punctuation">></span>' + infobox + '&lt;/div<span class="token punctuation">></span>&lt;/div<span class="token punctuation">></span>';        html += '&lt;div style="display<span class="token punctuation">:</span>flex;width<span class="token punctuation">:</span>100%"<span class="token punctuation">></span>&lt;div class="contrib<span class="token punctuation">-</span>column contrib<span class="token punctuation">-</span>column<span class="token punctuation">-</span>first table<span class="token punctuation">-</span>column"<span class="token punctuation">></span>&lt;span class="text<span class="token punctuation">-</span>muted"<span class="token punctuation">></span>è¿‡å»ä¸€å¹´æäº¤&lt;/span<span class="token punctuation">></span>&lt;span class="contrib<span class="token punctuation">-</span>number"<span class="token punctuation">></span>' + total + '&lt;/span<span class="token punctuation">></span>&lt;span class="text<span class="token punctuation">-</span>muted"<span class="token punctuation">></span>' + oneyearbeforeday + '<span class="token important">&amp;nbsp;-&amp;nbsp;'</span> + thisday + '&lt;/span<span class="token punctuation">></span>&lt;/div<span class="token punctuation">></span>&lt;div class="contrib<span class="token punctuation">-</span>column table<span class="token punctuation">-</span>column"<span class="token punctuation">></span>&lt;span class="text<span class="token punctuation">-</span>muted"<span class="token punctuation">></span>æœ€è¿‘ä¸€æœˆæäº¤&lt;/span<span class="token punctuation">></span>&lt;span class="contrib<span class="token punctuation">-</span>number"<span class="token punctuation">></span>' + thisweekdatacore + '&lt;/span<span class="token punctuation">></span>&lt;span class="text<span class="token punctuation">-</span>muted"<span class="token punctuation">></span>' + amonthago + '<span class="token important">&amp;nbsp;-&amp;nbsp;'</span> + thisday + '&lt;/span<span class="token punctuation">></span>&lt;/div<span class="token punctuation">></span>&lt;div class="contrib<span class="token punctuation">-</span>column table<span class="token punctuation">-</span>column"<span class="token punctuation">></span>&lt;span class="text<span class="token punctuation">-</span>muted"<span class="token punctuation">></span>æœ€è¿‘ä¸€å‘¨æäº¤&lt;/span<span class="token punctuation">></span>&lt;span class="contrib<span class="token punctuation">-</span>number"<span class="token punctuation">></span>' + weekdatacore + '&lt;/span<span class="token punctuation">></span>&lt;span class="text<span class="token punctuation">-</span>muted"<span class="token punctuation">></span>' + aweekago + '<span class="token important">&amp;nbsp;-&amp;nbsp;'</span> + thisday + '&lt;/span<span class="token punctuation">></span>&lt;/div<span class="token punctuation">></span>&lt;/div<span class="token punctuation">></span>' + style;        return html    <span class="token punctuation">&#125;</span>;    var github_main_style = () =<span class="token punctuation">></span> <span class="token punctuation">&#123;</span>        style = '&lt;style<span class="token punctuation">></span><span class="token comment">#github_container&#123;text-align:center;margin:0 auto;width:100%;display:flex;display:-webkit-flex;justify-content:center;align-items:center;flex-wrap:wrap;&#125;.gitcalendar-graph text.wday,.gitcalendar-graph text.month&#123;font-size:10px;fill:#aaa;&#125;.contrib-legend&#123;text-align:right;padding:0 14px 10px 0;display:inline-block;float:right;&#125;.contrib-legend .legend&#123;display:inline-block;list-style:none;margin:0 5px;position:relative;bottom:-1px;padding:0;&#125;.contrib-legend .legend li&#123;display:inline-block;width:10px;height:10px;&#125;.text-small&#123;font-size:12px;color:#767676;&#125;.gitcalendar-graph&#123;padding:15px 0 0;text-align:center;&#125;.contrib-column&#123;text-align:center;border-left:1px solid #ddd;border-top:1px solid #ddd;font-size:11px;&#125;.contrib-column-first&#123;border-left:0;&#125;.table-column&#123;padding:10px;display:table-cell;flex:1;vertical-align:top;&#125;.contrib-number&#123;font-weight:300;line-height:1.3em;font-size:24px;display:block;&#125;.gitcalendar img.spinner&#123;width:70px;margin-top:50px;min-height:70px;&#125;.monospace&#123;text-align:center;color:#000;font-family:monospace;&#125;.monospace a&#123;color:#1D75AB;text-decoration:none;&#125;.contrib-footer&#123;font-size:11px;padding:0 10px 12px;text-align:left;width:100%;box-sizing:border-box;height:26px;&#125;.left.text-muted&#123;float:left;margin-left:9px;color:#767676;&#125;.left.text-muted a&#123;color:#4078c0;text-decoration:none;&#125;.left.text-muted a:hover,.monospace a:hover&#123;text-decoration:underline;&#125;h2.f4.text-normal.mb-3&#123;display:none;&#125;.float-left.text-gray&#123;float:left;&#125;#user-activity-overview&#123;display:none;&#125;.day-tooltip&#123;white-space:nowrap;position:absolute;z-index:99999;padding:10px;font-size:12px;color:#959da5;text-align:center;background:rgba(0,0,0,.85);border-radius:3px;display:none;pointer-events:none;&#125;.day-tooltip strong&#123;color:#dfe2e5;&#125;.day-tooltip.is-visible&#123;display:block;&#125;.day-tooltip:after&#123;position:absolute;bottom:-10px;left:50%;width:5px;height:5px;box-sizing:border-box;margin:0 0 0 -5px;content:" ";border:5px solid transparent;border-top-color:rgba(0,0,0,.85)&#125;.position-relative&#123;width:100%;&#125;@media screen and (max-width:650px)&#123;.contrib-column&#123;display:none&#125;&#125;.angle-wrapper&#123;z-index:9999;display:inline;width:200px;height:40px;position:relative;padding:5px 0;background:rgba(0,0,0,0.8);border-radius:8px;text-align:center;color:white;&#125;.angle-box&#123;position:fixed;padding:10px&#125;.angle-wrapper span&#123;padding-bottom:1em;&#125;.angle-wrapper:before&#123;content:"";width:0;height:0;border:10px solid transparent;border-top-color:rgba(0,0,0,0.8);position:absolute;left:47.5%;top:100%;&#125;&lt;/style>';</span>        return style    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>;var append_div_gitcalendar = (parent<span class="token punctuation">,</span> text) =<span class="token punctuation">></span> <span class="token punctuation">&#123;</span>    if (typeof text === 'string') <span class="token punctuation">&#123;</span>        var temp = document.createElement('div');        temp.innerHTML = text;        var frag = document.createDocumentFragment();        while (temp.firstChild) <span class="token punctuation">&#123;</span>            frag.appendChild(temp.firstChild)        <span class="token punctuation">&#125;</span>        parent.appendChild(frag)    <span class="token punctuation">&#125;</span> else <span class="token punctuation">&#123;</span>        parent.appendChild(text)    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>;var loading_git = (color) =<span class="token punctuation">></span> <span class="token punctuation">&#123;</span>    <span class="token key atrule">loading = '&lt;div id="github_loading" style="width:10%;height:100%;margin:0 auto;display</span><span class="token punctuation">:</span> block"<span class="token punctuation">></span>&lt;svg xmlns="http<span class="token punctuation">:</span>//www.w3.org/2000/svg" xmlns<span class="token punctuation">:</span>xlink="http<span class="token punctuation">:</span>//www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable<span class="token punctuation">-</span>background<span class="token punctuation">:</span>new 0 0 50 50" xml<span class="token punctuation">:</span>space="preserve"<span class="token punctuation">></span>&lt;path fill="' + color + '" d="M25.251<span class="token punctuation">,</span>6.461c<span class="token punctuation">-</span><span class="token number">10.318</span><span class="token punctuation">,</span>0<span class="token punctuation">-</span><span class="token number">18.683</span><span class="token punctuation">,</span>8.365<span class="token punctuation">-</span><span class="token number">18.683</span><span class="token punctuation">,</span>18.683h4.068c0<span class="token punctuation">-</span><span class="token number">8.071</span><span class="token punctuation">,</span>6.543<span class="token punctuation">-</span><span class="token number">14.615</span><span class="token punctuation">,</span>14.615<span class="token punctuation">-</span>14.615V6.461z" transform="rotate(275.098 25 25)"<span class="token punctuation">></span>&lt;animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"<span class="token punctuation">></span>&lt;/animateTransform<span class="token punctuation">></span>&lt;/path<span class="token punctuation">></span>&lt;/svg<span class="token punctuation">></span>&lt;/div<span class="token punctuation">></span>';    return loading<span class="token punctuation">&#125;</span>;(function()<span class="token punctuation">&#123;</span>    var git_user = 'yuang01'; // è¿™é‡Œæ›´æ”¹ä¸ºä½ çš„github ç”¨æˆ·å    var github_container = document.getElementById('github_container');    var github_loading = document.getElementById('github_loading');    var git_purple = <span class="token punctuation">[</span><span class="token string">'#ebedf0'</span><span class="token punctuation">,</span> <span class="token string">'#fdcdec'</span><span class="token punctuation">,</span> <span class="token string">'#fc9bd9'</span><span class="token punctuation">,</span> <span class="token string">'#fa6ac5'</span><span class="token punctuation">,</span> <span class="token string">'#f838b2'</span><span class="token punctuation">,</span> <span class="token string">'#f5089f'</span><span class="token punctuation">,</span> <span class="token string">'#c4067e'</span><span class="token punctuation">,</span> <span class="token string">'#92055e'</span><span class="token punctuation">,</span> <span class="token string">'#540336'</span><span class="token punctuation">,</span> <span class="token string">'#48022f'</span><span class="token punctuation">,</span> <span class="token string">'#30021f'</span><span class="token punctuation">,</span><span class="token punctuation">]</span>;    var git_green = <span class="token punctuation">[</span><span class="token string">'#ebedf0'</span><span class="token punctuation">,</span> <span class="token string">'#f0fff4'</span><span class="token punctuation">,</span> <span class="token string">'#dcffe4'</span><span class="token punctuation">,</span> <span class="token string">'#bef5cb'</span><span class="token punctuation">,</span> <span class="token string">'#85e89d'</span><span class="token punctuation">,</span> <span class="token string">'#34d058'</span><span class="token punctuation">,</span> <span class="token string">'#28a745'</span><span class="token punctuation">,</span> <span class="token string">'#22863a'</span><span class="token punctuation">,</span> <span class="token string">'#176f2c'</span><span class="token punctuation">,</span> <span class="token string">'#165c26'</span><span class="token punctuation">,</span> <span class="token string">'#144620'</span><span class="token punctuation">]</span>;    var git_blue = <span class="token punctuation">[</span><span class="token string">'#ebedf0'</span><span class="token punctuation">,</span> <span class="token string">'#f1f8ff'</span><span class="token punctuation">,</span> <span class="token string">'#dbedff'</span><span class="token punctuation">,</span> <span class="token string">'#c8e1ff'</span><span class="token punctuation">,</span> <span class="token string">'#79b8ff'</span><span class="token punctuation">,</span> <span class="token string">'#2188ff'</span><span class="token punctuation">,</span> <span class="token string">'#0366d6'</span><span class="token punctuation">,</span> <span class="token string">'#005cc5'</span><span class="token punctuation">,</span> <span class="token string">'#044289'</span><span class="token punctuation">,</span> <span class="token string">'#032f62'</span><span class="token punctuation">,</span> <span class="token string">'#05264c'</span><span class="token punctuation">,</span><span class="token punctuation">]</span>;    var git_color = git_green;    if (github_container) <span class="token punctuation">&#123;</span>      append_div_gitcalendar(github_container<span class="token punctuation">,</span> loading_git(git_color<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span>));      github_canlendar(git_user<span class="token punctuation">,</span> git_color)    <span class="token punctuation">&#125;</span> else <span class="token punctuation">&#123;</span>      console.log('nonono');    <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>)()    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>              </div>            </details><p>å°† 270è¡Œçš„<code>git_user</code>æ”¹ä¸ºä½ è‡ªå·±çš„ç”¨æˆ·å<br>ç„¶ååœ¨ è‡ªå®šä¹‰ä¾§è¾¹æ çš„home_widget(_data/widget.yamlæ–‡ä»¶)ä¸­å†™å…¥ä»¥ä¸‹å†…å®¹:</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">home_widget</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token key atrule">class_name</span><span class="token punctuation">:</span> my_github_container    <span class="token key atrule">id_name</span><span class="token punctuation">:</span> my_github_container    <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token number">-1</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> æµ‹è¯•æ—¥å†    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>envelope    <span class="token key atrule">icon_color</span><span class="token punctuation">:</span> blue    <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//baidu.com    <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'#fff'</span>    <span class="token key atrule">html</span><span class="token punctuation">:</span> '      &lt;div id="github_container"<span class="token punctuation">></span>&lt;/div<span class="token punctuation">></span>      &lt;script data<span class="token punctuation">-</span>pjax src="/githubcalendar/index.js"<span class="token punctuation">></span>&lt;/script<span class="token punctuation">></span>    '<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åå°±ä¼šåœ¨é¦–é¡µå‡ºç°githubæ—¥å†å›¾</p><h3 id="æ·»åŠ IPç­¾åæ¡£"><a href="#æ·»åŠ IPç­¾åæ¡£" class="headerlink" title="æ·»åŠ IPç­¾åæ¡£"></a>æ·»åŠ IPç­¾åæ¡£</h3><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">home_widget</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token key atrule">class_name</span><span class="token punctuation">:</span> welcome    <span class="token key atrule">id_name</span><span class="token punctuation">:</span> welcome    <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token number">-1</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> æ¬¢è¿    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>envelope    <span class="token key atrule">icon_color</span><span class="token punctuation">:</span> blue    <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//baidu.com    <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'#fff'</span>    <span class="token key atrule">html</span><span class="token punctuation">:</span> <span class="token string">'&lt;img src="https://api.amogu.cn/api/ipimg/" style="width:100%">'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ·»åŠ è½®æ’­å›¾"><a href="#æ·»åŠ è½®æ’­å›¾" class="headerlink" title="æ·»åŠ è½®æ’­å›¾"></a>æ·»åŠ è½®æ’­å›¾</h3><p>åŒæ ·åœ¨<code>source</code>æ–‡ä»¶å¤¹ä¸‹åˆ›å»º<code>mySwiper/index.js</code>å’Œ<code>mySwiper/index.css</code>æ–‡ä»¶ï¼Œç„¶ååˆ›å»º<code>mySwiper/img</code>æ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜æ”¾å›¾ç‰‡ï¼Œè½®æ’­å›¾å˜›ï¼Œè‚¯å®šè¦å›¾ç‰‡ã€‚</p><details green><summary pointer> mySwiper/index.js </summary>              <div class='content'>              <pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">// å¦‚æœæƒ³å˜æ¢è½®æ’­æ–¹å¼ç­‰ï¼Œè¿›é˜¶çš„è¯ï¼Œå¯ä»¥çœ‹è¿™ä¸ª https<span class="token punctuation">:</span>//github.surmon.me/vue<span class="token punctuation">-</span>awesome<span class="token punctuation">-</span>swiper/// å½“ç„¶ä½ ä¹Ÿå¯ä»¥å¼•å…¥jqueryæ’ä»¶ï¼Œéƒ½å¯ä»¥çš„<span class="token punctuation">,</span> ä¸åªæ˜¯è½®æ’­å›¾ï¼Œå…¶ä»–ç‰¹æ•ˆä¹Ÿå¯ä»¥new Vue(<span class="token punctuation">&#123;</span>  <span class="token key atrule">el</span><span class="token punctuation">:</span> <span class="token string">"#mySwiper"</span><span class="token punctuation">,</span>  <span class="token key atrule">data</span><span class="token punctuation">:</span> function () <span class="token punctuation">&#123;</span>    return <span class="token punctuation">&#123;</span>      <span class="token key atrule">swiperOption</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>        <span class="token key atrule">direction</span><span class="token punctuation">:</span> <span class="token string">"vertical"</span><span class="token punctuation">,</span> // è¿™ä¸ªæ˜¯ç«–ç€çš„        <span class="token key atrule">slidesPerView</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token key atrule">spaceBetween</span><span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">,</span>        <span class="token key atrule">mousewheel</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token punctuation">,</span>        // æ³¨é‡Šä¸Šé¢çš„å››ä¸ªï¼Œåˆ™æ°´å¹³æ–¹å‘è½®æ’­        <span class="token key atrule">pagination</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>          <span class="token key atrule">el</span><span class="token punctuation">:</span> <span class="token string">".swiper-pagination"</span><span class="token punctuation">,</span>          <span class="token key atrule">clickable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        // æ³¨é‡Šæ‰ä¸Šé¢è¿™ä¸ªï¼Œåˆ™ä¸æ˜¾ç¤ºå°ç‚¹ç‚¹        <span class="token key atrule">loop</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token punctuation">,</span> // å¾ªç¯        <span class="token key atrule">autoplay</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>          <span class="token key atrule">delay</span><span class="token punctuation">:</span> <span class="token number">2500</span><span class="token punctuation">,</span>          <span class="token key atrule">disableOnInteraction</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> // è‡ªåŠ¨æ’­æ”¾<span class="token punctuation">,</span>æ³¨é‡Šæ‰åˆ™ä¸è‡ªåŠ¨æ’­æ”¾        <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>          <span class="token key atrule">init</span><span class="token punctuation">:</span> function () <span class="token punctuation">&#123;</span>            swiperAnimateCache(this); //éšè—åŠ¨ç”»å…ƒç´             swiperAnimate(this); //åˆå§‹åŒ–å®Œæˆå¼€å§‹åŠ¨ç”»          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>          <span class="token key atrule">slideChangeTransitionEnd</span><span class="token punctuation">:</span> function () <span class="token punctuation">&#123;</span>            swiperAnimate(this); //æ¯ä¸ªslideåˆ‡æ¢ç»“æŸæ—¶ä¹Ÿè¿è¡Œå½“å‰slideåŠ¨ç”»          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        // or data<span class="token punctuation">-</span>swiper<span class="token punctuation">-</span>parallax="<span class="token punctuation">-</span>100"        // ä¸Šé¢æ˜¯æ–‡å­—åŠ¨ç”»æ•ˆæœï¼Œæ³¨é‡Šåˆ™å–æ¶ˆæ–‡å­—åŠ¨ç”»ï¼ŒåŠ¨ç”»æ•ˆæœå‚è§ https<span class="token punctuation">:</span>//www.swiper.com.cn/usage/animate/index.html      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span>;  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token key atrule">computed</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>    swiper() <span class="token punctuation">&#123;</span>      return this.$refs.myswiper.$swiper;    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token key atrule">methods</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>    // é¼ æ ‡ç§»å…¥åœæ­¢è½®æ’­    stopAutoPlay() <span class="token punctuation">&#123;</span>      this.swiperOption.autoplay <span class="token important">&amp;&amp;</span> this.swiper.autoplay.stop();    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    // é¼ æ ‡ç§»å‡ºå¼€å§‹è½®æ’­    startAutoPlay() <span class="token punctuation">&#123;</span>      this.swiperOption.autoplay <span class="token important">&amp;&amp;</span> this.swiper.autoplay.start();    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span>);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>              </div>            </details><details cyan><summary pointer> mySwiper/index.css </summary>              <div class='content'>              <pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">.myswiper .swiper<span class="token punctuation">-</span>slide <span class="token punctuation">&#123;</span>    <span class="token key atrule">position</span><span class="token punctuation">:</span> relative;<span class="token punctuation">&#125;</span>.myswiper .swiper<span class="token punctuation">-</span>slide p <span class="token punctuation">&#123;</span>    <span class="token key atrule">position</span><span class="token punctuation">:</span> absolute;    <span class="token key atrule">font-size</span><span class="token punctuation">:</span> 18px;    <span class="token key atrule">top</span><span class="token punctuation">:</span> 50px;    <span class="token key atrule">left</span><span class="token punctuation">:</span> 10px;    <span class="token key atrule">z-index</span><span class="token punctuation">:</span> 9999;    <span class="token key atrule">color</span><span class="token punctuation">:</span> <span class="token comment">#fff;</span><span class="token punctuation">&#125;</span>.myswiper .swiper<span class="token punctuation">-</span>slide a.toPath <span class="token punctuation">&#123;</span>    <span class="token key atrule">display</span><span class="token punctuation">:</span> block;    <span class="token key atrule">width</span><span class="token punctuation">:</span> 100%;    <span class="token key atrule">height</span><span class="token punctuation">:</span> 100%;<span class="token punctuation">&#125;</span>.myswiper .swiper<span class="token punctuation">-</span>slide h2 <span class="token punctuation">&#123;</span>    <span class="token key atrule">position</span><span class="token punctuation">:</span> absolute;    <span class="token key atrule">top</span><span class="token punctuation">:</span> 10px;    <span class="token key atrule">left</span><span class="token punctuation">:</span> 10px;    <span class="token key atrule">z-index</span><span class="token punctuation">:</span> 9999;    <span class="token key atrule">color</span><span class="token punctuation">:</span> <span class="token comment">#fff;</span>    <span class="token key atrule">font-size</span><span class="token punctuation">:</span> 24px;<span class="token punctuation">&#125;</span>.myswiper .swiper<span class="token punctuation">-</span>slide img <span class="token punctuation">&#123;</span>    <span class="token key atrule">filter</span><span class="token punctuation">:</span> brightness(0.8); /* å›¾ç‰‡å˜æš— <span class="token punctuation">,</span>å­—ä½“çœ‹å¾—æ¸… <span class="token important">*/</span><span class="token punctuation">&#125;</span>.myswiper.swiper<span class="token punctuation">-</span>container<span class="token punctuation">-</span>vertical .swiper<span class="token punctuation">-</span>pagination<span class="token punctuation">-</span>bullet<span class="token punctuation">-</span>active <span class="token punctuation">&#123;</span>    <span class="token key atrule">height</span><span class="token punctuation">:</span> 30px;    <span class="token key atrule">border-radius</span><span class="token punctuation">:</span> 10px;    <span class="token key atrule">transition</span><span class="token punctuation">:</span> all 0.3s;<span class="token punctuation">&#125;</span>/* æš—é»‘æ¨¡å¼æ ·å¼åœ¨  .darkModel <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span>  ç±»ä¸‹ <span class="token important">*/</span>/* ä¾‹å¦‚     .darkModel .aaa <span class="token punctuation">&#123;</span>        <span class="token key atrule">color</span><span class="token punctuation">:</span> <span class="token comment">#c9d1d9;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> <span class="token important">*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>              </div>            </details><p>æœ€ååœ¨è‡ªå®šä¹‰ä¾§è¾¹æ çš„<code>home_widget</code>å†™ä¸Š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">home_widget</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token key atrule">class_name</span><span class="token punctuation">:</span> test2_swiper    <span class="token key atrule">id_name</span><span class="token punctuation">:</span> test2_swiper    <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token number">-1</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> æµ‹è¯•è½®æ’­å›¾    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>envelope    <span class="token key atrule">icon_color</span><span class="token punctuation">:</span> blue    <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//baidu.com    <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'#fff'</span>    <span class="token key atrule">html</span><span class="token punctuation">:</span> '    &lt;div id="mySwiper" @mouseenter="stopAutoPlay()" @mouseleave="startAutoPlay()"<span class="token punctuation">></span>      &lt;swiper class="myswiper" ref="myswiper" style="height<span class="token punctuation">:</span>350px;" <span class="token punctuation">:</span>options="swiperOption"<span class="token punctuation">></span>        &lt;swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>          &lt;a href="http<span class="token punctuation">:</span>//baidu.com" class="toPath"<span class="token punctuation">></span>            <span class="token key atrule">&lt;img class="no-lazy" src="/mySwiper/img/2.jpg" style="width:100%;height:100%;object-fit</span><span class="token punctuation">:</span> cover;"<span class="token punctuation">></span>            &lt;h2 class="ani" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>effect="fadeInDown" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>duration="0.5s" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>delay="0.3s"<span class="token punctuation">></span>æˆ‘æ˜¯æ ‡é¢˜&lt;/h2<span class="token punctuation">></span>            &lt;p class="ani" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>effect="fadeInDown" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>duration="0.5s" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>delay="0.3s"<span class="token punctuation">></span>æˆ‘æ˜¯æè¿°å“¦&lt;/p<span class="token punctuation">></span>          &lt;/a<span class="token punctuation">></span>        &lt;/swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>        &lt;swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>          &lt;a href="http<span class="token punctuation">:</span>//baidu.com" class="toPath"<span class="token punctuation">></span>            <span class="token key atrule">&lt;img class="no-lazy" src="/mySwiper/img/3.jpg" style="width:100%;height:100%;object-fit</span><span class="token punctuation">:</span> cover;"<span class="token punctuation">></span>            &lt;h2 class="ani" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>effect="fadeInDown" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>duration="0.5s" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>delay="0.3s"<span class="token punctuation">></span>æˆ‘æ˜¯æ ‡é¢˜2&lt;/h2<span class="token punctuation">></span>            &lt;p class="ani" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>effect="fadeInDown" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>duration="0.5s" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>delay="0.3s"<span class="token punctuation">></span>æˆ‘æ˜¯æè¿°2&lt;/p<span class="token punctuation">></span>          &lt;/a<span class="token punctuation">></span>        &lt;/swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>        &lt;swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>          &lt;a href="http<span class="token punctuation">:</span>//baidu.com" class="toPath"<span class="token punctuation">></span>            <span class="token key atrule">&lt;img class="no-lazy" src="/mySwiper/img/4.jpg" style="width:100%;height:100%;object-fit</span><span class="token punctuation">:</span> cover;"<span class="token punctuation">></span>            &lt;h2 class="ani" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>effect="fadeInDown" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>duration="0.5s" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>delay="0.3s"<span class="token punctuation">></span>æˆ‘æ˜¯æ ‡é¢˜3&lt;/h2<span class="token punctuation">></span>            &lt;p class="ani" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>effect="fadeInDown" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>duration="0.5s" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>delay="0.3s"<span class="token punctuation">></span>æˆ‘æ˜¯æè¿°3&lt;/p<span class="token punctuation">></span>          &lt;/a<span class="token punctuation">></span>        &lt;/swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>        &lt;swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>          &lt;a href="http<span class="token punctuation">:</span>//baidu.com" class="toPath"<span class="token punctuation">></span>            <span class="token key atrule">&lt;img class="no-lazy" src="/mySwiper/img/5.jpg" style="width:100%;height:100%;object-fit</span><span class="token punctuation">:</span> cover;"<span class="token punctuation">></span>            &lt;h2 class="ani" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>effect="fadeInDown" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>duration="0.5s" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>delay="0.3s"<span class="token punctuation">></span>æˆ‘æ˜¯æ ‡é¢˜4&lt;/h2<span class="token punctuation">></span>            &lt;p class="ani" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>effect="fadeInDown" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>duration="0.5s" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>delay="0.3s"<span class="token punctuation">></span>æˆ‘æ˜¯æè¿°4&lt;/p<span class="token punctuation">></span>          &lt;/a<span class="token punctuation">></span>        &lt;/swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>        &lt;swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>          &lt;a href="http<span class="token punctuation">:</span>//baidu.com" class="toPath"<span class="token punctuation">></span>            <span class="token key atrule">&lt;img class="no-lazy" src="https://api.dujin.org/pic/ghibli/" style="width:100%;height:100%;object-fit</span><span class="token punctuation">:</span> cover;"<span class="token punctuation">></span>            &lt;h2 class="ani" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>effect="fadeInDown" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>duration="0.5s" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>delay="0.3s"<span class="token punctuation">></span>æˆ‘æ˜¯æ ‡é¢˜5&lt;/h2<span class="token punctuation">></span>            &lt;p class="ani" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>effect="fadeInDown" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>duration="0.5s" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>delay="0.3s"<span class="token punctuation">></span>æˆ‘æ˜¯æè¿°5&lt;/p<span class="token punctuation">></span>          &lt;/a<span class="token punctuation">></span>        &lt;/swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>        &lt;swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>          &lt;a href="http<span class="token punctuation">:</span>//baidu.com" class="toPath"<span class="token punctuation">></span>            <span class="token key atrule">&lt;img class="no-lazy" src="/mySwiper/img/7.jpg" style="width:100%;height:100%;object-fit</span><span class="token punctuation">:</span> cover;"<span class="token punctuation">></span>            &lt;h2 class="ani" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>effect="fadeInDown" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>duration="0.5s" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>delay="0.3s"<span class="token punctuation">></span>æˆ‘æ˜¯æ ‡é¢˜6&lt;/h2<span class="token punctuation">></span>            &lt;p class="ani" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>effect="fadeInDown" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>duration="0.5s" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>delay="0.3s"<span class="token punctuation">></span>æˆ‘æ˜¯æè¿°6&lt;/p<span class="token punctuation">></span>          &lt;/a<span class="token punctuation">></span>        &lt;/swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>        &lt;<span class="token tag">!--</span> å¦‚æœä½ æƒ³ç»§ç»­å¢åŠ è½®æ’­å›¾ï¼Œç»§ç»­åœ¨ä¸‹é¢å†™&lt;swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>æˆ‘æ˜¯å†…å®¹&lt;/swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>å°±è¡Œäº† <span class="token punctuation">-</span><span class="token punctuation">-</span><span class="token punctuation">></span><span class="token scalar string">        &lt;div class="swiper-pagination" slot="pagination">&lt;/div></span>      &lt;/swiper<span class="token punctuation">></span>    &lt;/div<span class="token punctuation">></span>    &lt;script src="/mySwiper/index.js"<span class="token punctuation">></span>&lt;/script<span class="token punctuation">></span>    &lt;link href="/mySwiper/index.css" rel="stylesheet"<span class="token punctuation">></span>    '<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„ï¼Œè¯·è‡ªè¡Œä¿®æ”¹aé“¾æ¥åœ°å€å’Œå›¾ç‰‡åœ°å€å’Œæ ‡é¢˜åç§°å’Œæè¿°</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swiper-slide</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://baidu.com<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>toPath<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token comment">&lt;!-- aé“¾æ¥åœ°å€ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-lazy<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/mySwiper/img/2.jpg<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span><span class="token property">object-fit</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>  <span class="token comment">&lt;!-- å›¾ç‰‡åœ°å€ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ani<span class="token punctuation">"</span></span> <span class="token attr-name">swiper-animate-effect</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fadeInDown<span class="token punctuation">"</span></span> <span class="token attr-name">swiper-animate-duration</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.5s<span class="token punctuation">"</span></span> <span class="token attr-name">swiper-animate-delay</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.3s<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æˆ‘æ˜¯æ ‡é¢˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- ä¿®æ”¹æ ‡é¢˜åç§° --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ani<span class="token punctuation">"</span></span> <span class="token attr-name">swiper-animate-effect</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fadeInDown<span class="token punctuation">"</span></span> <span class="token attr-name">swiper-animate-duration</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.5s<span class="token punctuation">"</span></span> <span class="token attr-name">swiper-animate-delay</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.3s<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æˆ‘æ˜¯æè¿°å“¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- ä¿®æ”¹æè¿° --></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>swiper-slide</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœä½ æƒ³åŠ è½®æ’­å›¾æˆ–è€…åˆ é™¤è½®æ’­å›¾ï¼Œåˆ™å¢åŠ æˆ–è€…åˆ é™¤ä¸Šé¢è¿™ä¸ªæ¨¡å—å°±è¡Œäº†ï¼Œè¿™æ ·ï¼Œä¸€ä¸ªè½®æ’­å›¾å°±æ”¾åœ¨äº†é¦–é¡µã€‚</p><h3 id="æ¨ªå‘æ»šåŠ¨ç‰¹æ•ˆ"><a href="#æ¨ªå‘æ»šåŠ¨ç‰¹æ•ˆ" class="headerlink" title="æ¨ªå‘æ»šåŠ¨ç‰¹æ•ˆ"></a>æ¨ªå‘æ»šåŠ¨ç‰¹æ•ˆ</h3><p>é¦–å…ˆéœ€è¦åœ¨sourceæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºbli/index.jså’Œbli/index.cssæ–‡ä»¶</p><details green><summary pointer> bli/index.js </summary>              <div class='content'>              <pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">// ä¸»é¢˜å·²ç»é»˜è®¤cdnå¼•å…¥äº†vue<span class="token punctuation">-</span>seamless<span class="token punctuation">-</span>scrollæ’ä»¶// https<span class="token punctuation">:</span>//chenxuan0000.github.io/vue<span class="token punctuation">-</span>seamless<span class="token punctuation">-</span>scroll/zh/guide/01<span class="token punctuation">-</span>basic.htmlnew Vue(<span class="token punctuation">&#123;</span>  <span class="token key atrule">el</span><span class="token punctuation">:</span> <span class="token string">"#myBli"</span><span class="token punctuation">,</span> <span class="token key atrule">// elä¸è¦æ˜¯æœ€å¤–é¢çš„id_nameï¼Œåº”è¯¥æ˜¯html</span><span class="token punctuation">:</span> ''é‡Œçš„divçš„id  <span class="token key atrule">data</span><span class="token punctuation">:</span> function () <span class="token punctuation">&#123;</span>    return <span class="token punctuation">&#123;</span>      <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token key atrule">listData</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token key atrule">classOption</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>        <span class="token key atrule">limitMoveNum</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>        <span class="token key atrule">direction</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span>;  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token key atrule">methods</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span>);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>              </div>            </details><details green><summary pointer> bli/index.css </summary>              <div class='content'>              <pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment">#myBli .warp &#123;</span>  <span class="token key atrule">width</span><span class="token punctuation">:</span> 100%;  <span class="token key atrule">height</span><span class="token punctuation">:</span> 120px;  <span class="token key atrule">margin</span><span class="token punctuation">:</span> 0 auto;  <span class="token key atrule">overflow</span><span class="token punctuation">:</span> hidden;<span class="token punctuation">&#125;</span><span class="token comment">#myBli .warp ul &#123;</span>  <span class="token key atrule">list-style</span><span class="token punctuation">:</span> none;  <span class="token key atrule">padding</span><span class="token punctuation">:</span> 0;  <span class="token key atrule">margin</span><span class="token punctuation">:</span> 0 auto;<span class="token punctuation">&#125;</span><span class="token comment">#myBli .warp ul.ul-item &#123;</span>  <span class="token key atrule">display</span><span class="token punctuation">:</span> flex;<span class="token punctuation">&#125;</span><span class="token comment">#myBli .warp ul.ul-item .li-item &#123;</span>  <span class="token key atrule">width</span><span class="token punctuation">:</span> 120px;  <span class="token key atrule">display</span><span class="token punctuation">:</span> block;  <span class="token key atrule">height</span><span class="token punctuation">:</span> 120px;  <span class="token key atrule">margin-right</span><span class="token punctuation">:</span> 10px;  <span class="token key atrule">line-height</span><span class="token punctuation">:</span> 120px;  <span class="token key atrule">background-color</span><span class="token punctuation">:</span> <span class="token comment">#999;</span>  <span class="token key atrule">color</span><span class="token punctuation">:</span> <span class="token comment">#fff;</span>  <span class="token key atrule">text-align</span><span class="token punctuation">:</span> center;  <span class="token key atrule">font-size</span><span class="token punctuation">:</span> 30px;<span class="token punctuation">&#125;</span><span class="token comment">#myBli .warp ul.ul-item img &#123;</span>  <span class="token key atrule">width</span><span class="token punctuation">:</span> 100%;  <span class="token key atrule">height</span><span class="token punctuation">:</span> 100%;  <span class="token key atrule">object-fit</span><span class="token punctuation">:</span> cover;<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>              </div>            </details><p>æœ€ååœ¨è‡ªå®šä¹‰ä¾§è¾¹æ çš„home_widgetä¸­åŠ å…¥ä»¥ä¸‹å†…å®¹:</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">home_widget</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token key atrule">class_name</span><span class="token punctuation">:</span> mybilibili    <span class="token key atrule">id_name</span><span class="token punctuation">:</span> mybilibili    <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token number">-1</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> æµ‹è¯•bli    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>envelope    <span class="token key atrule">icon_color</span><span class="token punctuation">:</span> blue    <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//baidu.com    <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'#fff'</span>    <span class="token key atrule">html</span><span class="token punctuation">:</span> '      &lt;div id="myBli"<span class="token punctuation">></span>        &lt;vue<span class="token punctuation">-</span>seamless<span class="token punctuation">-</span>scroll          <span class="token punctuation">:</span>data="listData"          <span class="token punctuation">:</span>class<span class="token punctuation">-</span>option="classOption"          class="warp"        <span class="token punctuation">></span>          &lt;ul class="ul<span class="token punctuation">-</span>item" style="width<span class="token punctuation">:</span>720px;"<span class="token punctuation">></span>            &lt;<span class="token tag">!--</span> åœ¨è¿™é‡Œæ”¹<span class="token punctuation">,</span> æ‰‹åŠ¨ä¿®æ”¹aè¿æ¥çš„hrefå€¼å’Œimgçš„srcå€¼<span class="token punctuation">,</span> å¦‚æœä½ ä¼šè¿›é˜¶ï¼Œä½ å¯ä»¥ä½¿ç”¨v<span class="token punctuation">-</span>for<span class="token punctuation">,</span> æˆ–è€…æ•°æ®ä½¿ç”¨åŠ¨æ€æ•°æ®<span class="token punctuation">-</span><span class="token punctuation">-</span><span class="token punctuation">></span>                        &lt;li class="li<span class="token punctuation">-</span>item"<span class="token punctuation">></span>              &lt;a href="http<span class="token punctuation">:</span>//baidu.com"<span class="token punctuation">></span>                &lt;img class="no<span class="token punctuation">-</span>lazy" src="https<span class="token punctuation">:</span>//pic4.zhimg.com/80/v2<span class="token punctuation">-</span>f549722dac8f777693c090a92498de0f_1440w.jpg"<span class="token punctuation">></span>              &lt;/a<span class="token punctuation">></span>            &lt;/li<span class="token punctuation">></span>            &lt;li class="li<span class="token punctuation">-</span>item"<span class="token punctuation">></span>              &lt;a href="http<span class="token punctuation">:</span>//baidu.com"<span class="token punctuation">></span>                &lt;img class="no<span class="token punctuation">-</span>lazy" src="https<span class="token punctuation">:</span>//pic4.zhimg.com/80/v2<span class="token punctuation">-</span>f549722dac8f777693c090a92498de0f_1440w.jpg"<span class="token punctuation">></span>              &lt;/a<span class="token punctuation">></span>            &lt;/li<span class="token punctuation">></span>            &lt;li class="li<span class="token punctuation">-</span>item"<span class="token punctuation">></span>              &lt;a href="http<span class="token punctuation">:</span>//baidu.com"<span class="token punctuation">></span>                &lt;img class="no<span class="token punctuation">-</span>lazy" src="https<span class="token punctuation">:</span>//pic4.zhimg.com/80/v2<span class="token punctuation">-</span>f549722dac8f777693c090a92498de0f_1440w.jpg"<span class="token punctuation">></span>              &lt;/a<span class="token punctuation">></span>            &lt;/li<span class="token punctuation">></span>            &lt;li class="li<span class="token punctuation">-</span>item"<span class="token punctuation">></span>              &lt;a href="http<span class="token punctuation">:</span>//baidu.com"<span class="token punctuation">></span>                &lt;img class="no<span class="token punctuation">-</span>lazy" src="https<span class="token punctuation">:</span>//pic4.zhimg.com/80/v2<span class="token punctuation">-</span>f549722dac8f777693c090a92498de0f_1440w.jpg"<span class="token punctuation">></span>              &lt;/a<span class="token punctuation">></span>            &lt;/li<span class="token punctuation">></span>            &lt;li class="li<span class="token punctuation">-</span>item"<span class="token punctuation">></span>              &lt;a href="http<span class="token punctuation">:</span>//baidu.com"<span class="token punctuation">></span>                &lt;img class="no<span class="token punctuation">-</span>lazy" src="https<span class="token punctuation">:</span>//pic4.zhimg.com/80/v2<span class="token punctuation">-</span>f549722dac8f777693c090a92498de0f_1440w.jpg"<span class="token punctuation">></span>              &lt;/a<span class="token punctuation">></span>            &lt;/li<span class="token punctuation">></span>            &lt;li class="li<span class="token punctuation">-</span>item"<span class="token punctuation">></span>              &lt;a href="http<span class="token punctuation">:</span>//baidu.com"<span class="token punctuation">></span>                &lt;img class="no<span class="token punctuation">-</span>lazy" src="https<span class="token punctuation">:</span>//pic4.zhimg.com/80/v2<span class="token punctuation">-</span>f549722dac8f777693c090a92498de0f_1440w.jpg"<span class="token punctuation">></span>              &lt;/a<span class="token punctuation">></span>            &lt;/li<span class="token punctuation">></span>            &lt;<span class="token tag">!--</span> åœ¨è¿™é‡Œç»“æŸ <span class="token punctuation">-</span><span class="token punctuation">-</span><span class="token punctuation">></span><span class="token scalar string">          &lt;/ul></span>        &lt;/vue<span class="token punctuation">-</span>seamless<span class="token punctuation">-</span>scroll<span class="token punctuation">></span>      &lt;/div<span class="token punctuation">></span>      &lt;script src="/bli/index.js"<span class="token punctuation">></span>&lt;/script<span class="token punctuation">></span>      &lt;link href="/bli/index.css" rel="stylesheet"<span class="token punctuation">></span>    '<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åŒæ ·ï¼Œè‡ªè¡Œä¿®æ”¹ä¸Šé¢aæ ‡ç­¾çš„é“¾æ¥å’Œå›¾ç‰‡åœ°å€ï¼Œè‡³æ­¤æ¨ªå‘æ»šåŠ¨ç‰¹æ•ˆå®Œæˆã€‚</p><blockquote><p>æ³¨æ„ï¼Œä½¿ç”¨vueå†™æ³•çš„è¯ï¼Œå›¾ç‰‡éœ€è¦å¸¦ä¸Šclass=â€no-lazyâ€ï¼Œå¦åˆ™å¯èƒ½åŠ è½½ä¸å‡ºæ¥ï¼Œï¼ŒjsåŸç”Ÿæˆ–è€…jqueryä¸éœ€è¦å¸¦</p></blockquote><h3 id="ä¾§è¾¹æ å¢åŠ å¾®åšçƒ­æœ"><a href="#ä¾§è¾¹æ å¢åŠ å¾®åšçƒ­æœ" class="headerlink" title="ä¾§è¾¹æ å¢åŠ å¾®åšçƒ­æœ"></a>ä¾§è¾¹æ å¢åŠ å¾®åšçƒ­æœ</h3><p>åŒæ ·åŒæ ·ï¼Œåœ¨sourceæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºweibo/index.jså’Œweibo/index.cssæ–‡ä»¶</p><details green><summary pointer> weibo/index.js </summary>              <div class='content'>              <pre class="line-numbers language-html" data-language="html"><code class="language-html">new Vue(&#123;  el: "#myWeibo", // elä¸è¦æ˜¯æœ€å¤–é¢çš„id_nameï¼Œåº”è¯¥æ˜¯html: ''é‡Œçš„divçš„id  data: function () &#123;    return &#123;      content: [],      classOption: &#123;        singleHeight: 30,      &#125;,    &#125;;  &#125;,  created() &#123;    this.getWeiboList();  &#125;,  methods: &#123;    // è¯·æ±‚å¼€æºapi, è·å–å†å²ä¸Šçš„ä»Šå¤©æ•°æ®    getWeiboList() &#123;      fetch("https://tenapi.cn/resou/", &#123;        method: "GET", // *GET, POST, PUT, DELETE, etc.      &#125;)        .then((res) => &#123;          return res.json();        &#125;)        .then((data) => &#123;          this.content = data.list;        &#125;)        .catch((err) => &#123;          console.log("err", err);        &#125;);    &#125;,  &#125;,&#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>              </div>            </details><details green><summary pointer> weibo/index.css </summary>              <div class='content'>              <pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.weibo-container</span> <span class="token punctuation">&#123;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.weibo-container .left</span> <span class="token punctuation">&#123;</span>    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.weibo-container .name</span> <span class="token punctuation">&#123;</span>    <span class="token property">margin-left</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> -webkit-box<span class="token punctuation">;</span>    <span class="token property">-webkit-box-orient</span><span class="token punctuation">:</span> vertical<span class="token punctuation">;</span>    <span class="token property">-webkit-line-clamp</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">#myWeibo .warp</span> <span class="token punctuation">&#123;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.weibo-container .order</span> <span class="token punctuation">&#123;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #fe962e<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.weibo-container .name a</span><span class="token punctuation">&#123;</span>    <span class="token property">color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.weibo-container .name a:hover</span> <span class="token punctuation">&#123;</span>    <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.weibo-container .red</span> <span class="token punctuation">&#123;</span>    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>              </div>            </details><p>æœ€ååœ¨è‡ªå®šä¹‰ä¾§è¾¹æ çš„widget_library_stickyæˆ–è€…widget_libraryä¸­åŠ å…¥html,</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">widget_library_sticky</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token key atrule">class_name</span><span class="token punctuation">:</span> testWidget    <span class="token key atrule">id_name</span><span class="token punctuation">:</span> testWidget    <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token number">-1</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> å¾®åšçƒ­æœ    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fab fa<span class="token punctuation">-</span>weibo    <span class="token key atrule">icon_color</span><span class="token punctuation">:</span> <span class="token string">'#d63130'</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//baidu.com    <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'#fff'</span>    <span class="token key atrule">html</span><span class="token punctuation">:</span> '      &lt;div id="myWeibo"<span class="token punctuation">></span>      &lt;<span class="token tag">!--</span> å¦‚æœä¸è¦æ»šåŠ¨ï¼Œåˆ™å»æ‰ vue<span class="token punctuation">-</span>seamless<span class="token punctuation">-</span>scrollæ ‡ç­¾å°±è¡Œäº†ï¼Œè¿™ä¸ªæ’ä»¶ä½¿ç”¨cdnå‘å·¦å‘å³æ»šåŠ¨å¥½åƒæœ‰é—®é¢˜ <span class="token punctuation">-</span><span class="token punctuation">-</span><span class="token punctuation">></span>        &lt;vue<span class="token punctuation">-</span>seamless<span class="token punctuation">-</span>scroll          <span class="token punctuation">:</span>data="content"          <span class="token punctuation">:</span>class<span class="token punctuation">-</span>option="classOption"          class="warp"        <span class="token punctuation">></span>          &lt;div class="weibo<span class="token punctuation">-</span>container" v<span class="token punctuation">-</span>for="(item<span class="token punctuation">,</span> index) in content" <span class="token punctuation">:</span>key="index"<span class="token punctuation">></span>            &lt;div class="left"<span class="token punctuation">></span>              &lt;div class="order" <span class="token punctuation">:</span>class="<span class="token punctuation">&#123;</span> <span class="token key atrule">red</span><span class="token punctuation">:</span> index&lt;=2 <span class="token punctuation">&#125;</span>"<span class="token punctuation">></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>index + 1<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>&lt;/div<span class="token punctuation">></span>              &lt;div class="name"<span class="token punctuation">></span>&lt;a <span class="token punctuation">:</span>href="item.url" target="_blank"<span class="token punctuation">></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>item.name<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>&lt;/a<span class="token punctuation">></span>&lt;/div<span class="token punctuation">></span>            &lt;/div<span class="token punctuation">></span>            &lt;div class="hot"<span class="token punctuation">></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>item.hot<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>&lt;/div<span class="token punctuation">></span>          &lt;/div<span class="token punctuation">></span>        &lt;/vue<span class="token punctuation">-</span>seamless<span class="token punctuation">-</span>scroll<span class="token punctuation">></span>      &lt;/div<span class="token punctuation">></span>      &lt;script src="/weibo/index.js"<span class="token punctuation">></span>&lt;/script<span class="token punctuation">></span>      &lt;link href="/weibo/index.css" rel="stylesheet"<span class="token punctuation">></span>    '<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·ï¼Œçƒ­æœä¾§è¾¹æ ä¹Ÿå¼„å¥½äº†ï¼Œå¦‚æœä¸è¦çƒ­æœæ¦œæ»šåŠ¨çš„è¯ï¼Œè‡ªå·±å»æ‰<vue-seamless-scroll></vue-seamless-scroll>è¿™ä¸ªhtmlæ ‡ç­¾å°±è¡Œäº†</p><h3 id="å†å²ä¸Šçš„ä»Šå¤©"><a href="#å†å²ä¸Šçš„ä»Šå¤©" class="headerlink" title="å†å²ä¸Šçš„ä»Šå¤©"></a>å†å²ä¸Šçš„ä»Šå¤©</h3><p>å˜¿å˜¿ï¼ŒåŒæ ·è¦åœ¨sourceæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºhistoryToday/index.jsæ–‡ä»¶</p><details ><summary pointer> historyToday/index.js </summary>              <div class='content'>              <p>åˆæ˜¯vue.jså†™çš„ï¼Œæ— æ‰€è°“ï¼Œä¸éœ€è¦çœ‹æ‡‚, å¤åˆ¶ç²˜è´´å°±è¡Œ</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">// å¦‚æœæƒ³å˜æ¢è½®æ’­æ–¹å¼ç­‰ï¼Œè¿›é˜¶çš„è¯ï¼Œå¯ä»¥çœ‹è¿™ä¸ª https<span class="token punctuation">:</span>//github.surmon.me/vue<span class="token punctuation">-</span>awesome<span class="token punctuation">-</span>swiper/// å½“ç„¶ä½ ä¹Ÿå¯ä»¥å¼•å…¥jqueryæ’ä»¶ï¼Œéƒ½å¯ä»¥çš„<span class="token punctuation">,</span> ä¸åªæ˜¯è½®æ’­å›¾ï¼Œå…¶ä»–ç‰¹æ•ˆä¹Ÿå¯ä»¥new Vue(<span class="token punctuation">&#123;</span>  <span class="token key atrule">el</span><span class="token punctuation">:</span> <span class="token string">"#myHistorySwiper"</span><span class="token punctuation">,</span> <span class="token key atrule">// elä¸è¦æ˜¯æœ€å¤–é¢çš„id_nameï¼Œåº”è¯¥æ˜¯html</span><span class="token punctuation">:</span> ''é‡Œçš„divçš„id  <span class="token key atrule">data</span><span class="token punctuation">:</span> function () <span class="token punctuation">&#123;</span>    return <span class="token punctuation">&#123;</span>      <span class="token key atrule">swiperOption</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>        <span class="token key atrule">effect</span><span class="token punctuation">:</span> <span class="token string">"cube"</span><span class="token punctuation">,</span> // è½®æ’­ç‰¹æ•ˆ        <span class="token key atrule">loop</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token punctuation">,</span> // å¾ªç¯        <span class="token key atrule">autoplay</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>          <span class="token key atrule">delay</span><span class="token punctuation">:</span> <span class="token number">2500</span><span class="token punctuation">,</span>          <span class="token key atrule">disableOnInteraction</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span>;  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token key atrule">computed</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>    swiper() <span class="token punctuation">&#123;</span>      return this.$refs.myhistoryswiper.$swiper;    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  created() <span class="token punctuation">&#123;</span>    this.getHistoryList();  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token key atrule">methods</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>    // é¼ æ ‡ç§»å…¥åœæ­¢è½®æ’­    stopAutoPlay() <span class="token punctuation">&#123;</span>      this.swiperOption.autoplay <span class="token important">&amp;&amp;</span> this.swiper.autoplay.stop();    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    // é¼ æ ‡ç§»å‡ºå¼€å§‹è½®æ’­    startAutoPlay() <span class="token punctuation">&#123;</span>      this.swiperOption.autoplay <span class="token important">&amp;&amp;</span> this.swiper.autoplay.start();    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    // è¯·æ±‚å¼€æºapi<span class="token punctuation">,</span> è·å–å†å²ä¸Šçš„ä»Šå¤©æ•°æ®    getHistoryList() <span class="token punctuation">&#123;</span>      fetch("https<span class="token punctuation">:</span>//tenapi.cn/lishi/<span class="token punctuation">?</span>format=json"<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>        <span class="token key atrule">method</span><span class="token punctuation">:</span> <span class="token string">"GET"</span><span class="token punctuation">,</span> // <span class="token important">*GET</span><span class="token punctuation">,</span> POST<span class="token punctuation">,</span> PUT<span class="token punctuation">,</span> DELETE<span class="token punctuation">,</span> etc.      <span class="token punctuation">&#125;</span>)        .then((res) =<span class="token punctuation">></span> <span class="token punctuation">&#123;</span>          return res.json();        <span class="token punctuation">&#125;</span>)        .then((data) =<span class="token punctuation">></span> <span class="token punctuation">&#123;</span>          this.content = data.content;        <span class="token punctuation">&#125;</span>)        .catch((err) =<span class="token punctuation">></span> <span class="token punctuation">&#123;</span>          console.log("err"<span class="token punctuation">,</span> err);        <span class="token punctuation">&#125;</span>);    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span>);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>              </div>            </details><p>æœ€ååœ¨è‡ªå®šä¹‰ä¾§è¾¹æ çš„widget_library_stickyæˆ–è€…widget_libraryä¸­åŠ å…¥html,</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">widget_library_sticky</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token key atrule">class_name</span><span class="token punctuation">:</span> historyToday    <span class="token key atrule">id_name</span><span class="token punctuation">:</span> historyToday    <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token number">-1</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> å†å²ä¸Šçš„ä»Šå¤©    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>calendar<span class="token punctuation">-</span>week    <span class="token key atrule">icon_color</span><span class="token punctuation">:</span> <span class="token string">'#d63130'</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//baidu.com    <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'#fff'</span>    <span class="token key atrule">html</span><span class="token punctuation">:</span> '      &lt;div id="myHistorySwiper" @mouseenter="stopAutoPlay()" @mouseleave="startAutoPlay()"<span class="token punctuation">></span>        &lt;swiper class="myhistoryswiper" ref="myhistoryswiper" style="height<span class="token punctuation">:</span>80px;" <span class="token punctuation">:</span>options="swiperOption"<span class="token punctuation">></span>          &lt;swiper<span class="token punctuation">-</span>slide v<span class="token punctuation">-</span>for="(item<span class="token punctuation">,</span> index) in content" <span class="token punctuation">:</span>key="index"<span class="token punctuation">></span>            <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>item<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>          &lt;/swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>        &lt;/swiper<span class="token punctuation">></span>      &lt;/div<span class="token punctuation">></span>      &lt;script src="/historyToday/index.js"<span class="token punctuation">></span>&lt;/script<span class="token punctuation">></span>    '<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·å†å²ä¸Šçš„ä»Šå¤©å°±å®Œæˆäº†</p><h3 id="æ‹çˆ±å¢™"><a href="#æ‹çˆ±å¢™" class="headerlink" title="æ‹çˆ±å¢™"></a>æ‹çˆ±å¢™</h3><p>åœ¨sourceæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºlove/index.jsæ–‡ä»¶</p><details ><summary pointer> love/index.js </summary>              <div class='content'>              <p>love/index.js</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">var htmer_time = document.getElementById("htmer_time");var htmer_time_time = null;function setTime() <span class="token punctuation">&#123;</span>  var create_time = Math.round(    new Date(Date.UTC(2018<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">,</span> 0)).getTime() / 1000  );  var timestamp = Math.round(    (new Date().getTime() + 8 * 60 * 60 * 1000) / 1000  );  currentTime = secondToDate(timestamp <span class="token punctuation">-</span> create_time);  currentTimeHtml =    currentTime<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> +    " å¹´ " +    currentTime<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> +    " å¤© " +    currentTime<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> +    " æ—¶ " +    currentTime<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> +    " åˆ† " +    currentTime<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> +    " ç§’";  htmer_time.innerHTML = currentTimeHtml;<span class="token punctuation">&#125;</span>function secondToDate(second) <span class="token punctuation">&#123;</span>  if (<span class="token tag">!second)</span> <span class="token punctuation">&#123;</span>    return 0;  <span class="token punctuation">&#125;</span>  var time = new Array(0<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> 0);  if (second <span class="token punctuation">></span>= 365 * 24 * 3600) <span class="token punctuation">&#123;</span>    time<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> = parseInt(second / (365 * 24 * 3600));    second %= 365 * 24 * 3600;  <span class="token punctuation">&#125;</span>  if (second <span class="token punctuation">></span>= 24 * 3600) <span class="token punctuation">&#123;</span>    time<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> = parseInt(second / (24 * 3600));    second %= 24 * 3600;  <span class="token punctuation">&#125;</span>  if (second <span class="token punctuation">></span>= 3600) <span class="token punctuation">&#123;</span>    time<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> = parseInt(second / 3600);    second %= 3600;  <span class="token punctuation">&#125;</span>  if (second <span class="token punctuation">></span>= 60) <span class="token punctuation">&#123;</span>    time<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> = parseInt(second / 60);    second %= 60;  <span class="token punctuation">&#125;</span>  if (second <span class="token punctuation">></span> 0) <span class="token punctuation">&#123;</span>    time<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> = second;  <span class="token punctuation">&#125;</span>  return time;<span class="token punctuation">&#125;</span>if (htmer_time) <span class="token punctuation">&#123;</span>  htmer_time_time = setInterval(setTime<span class="token punctuation">,</span> 1000);<span class="token punctuation">&#125;</span> else <span class="token punctuation">&#123;</span>  clearInterval(htmer_time_time);<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>              </div>            </details><p>åœ¨ç¬¬6è¡Œä¿®æ”¹æ—¶é—´å°±è¡Œäº†ï¼Œæ”¹æˆä½ è‡ªå·±æƒ³è¦å¼€å§‹çš„æ—¶é—´ï¼Œè¿™é‡Œæ˜¯2018å¹´10æœˆ26å·å¼€å§‹çš„<br>æœ€ååœ¨è‡ªå®šä¹‰ä¾§è¾¹æ çš„widget_library_stickyæˆ–è€…widget_libraryä¸­åŠ å…¥html</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">widget_library_sticky</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token key atrule">class_name</span><span class="token punctuation">:</span> testLove    <span class="token key atrule">id_name</span><span class="token punctuation">:</span> testLove    <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token number">-1</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> æ‹çˆ±å¢™    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>heart    <span class="token key atrule">icon_color</span><span class="token punctuation">:</span> <span class="token string">'#d63130'</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//baidu.com    <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'#fff'</span>    <span class="token key atrule">html</span><span class="token punctuation">:</span> '          <span class="token key atrule">&lt;div style="text-align</span><span class="token punctuation">:</span> center;"<span class="token punctuation">></span>        &lt;img src="https<span class="token punctuation">:</span>//a<span class="token punctuation">-</span>oss.zmki.cn/20190601/img_9879.jpg"          <span class="token key atrule">style="width</span><span class="token punctuation">:</span> <span class="token key atrule">50px;height</span><span class="token punctuation">:</span> <span class="token key atrule">50px;vertical-align</span><span class="token punctuation">:</span> <span class="token key atrule">-20px;border-radius</span><span class="token punctuation">:</span> <span class="token key atrule">50%;margin-right</span><span class="token punctuation">:</span> <span class="token key atrule">5px;margin-bottom</span><span class="token punctuation">:</span> <span class="token key atrule">5px;-webkit-box-shadow</span><span class="token punctuation">:</span> 1px 1px 1px rgba(0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>.1)<span class="token punctuation">,</span> 1px 1px 1px rgba(0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>0.1)<span class="token punctuation">,</span> 1px 1px 1px rgba(0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token key atrule">0.1);box-shadow</span><span class="token punctuation">:</span> 1px 1px 1px rgba(0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>.1)<span class="token punctuation">,</span> 1px 1px 1px rgba(0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>0.1)<span class="token punctuation">,</span> 1px 1px 1px rgba(0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token key atrule">0.1);border</span><span class="token punctuation">:</span> 2px solid <span class="token comment">#fff;" /></span>        <span class="token key atrule">&lt;svg viewbox="0 0 1024 1024" style="margin-left</span><span class="token punctuation">:</span> <span class="token key atrule">5px;margin-right</span><span class="token punctuation">:</span> 5px;" version="1.0" width="15" height="15"          class="my<span class="token punctuation">-</span>face"<span class="token punctuation">></span>          &lt;path            d="M863.597631 513.574282l<span class="token punctuation">-</span>271.33965<span class="token punctuation">-</span>140.213484L729.783667 81.926656c3.583731<span class="token punctuation">-</span>7.87141 7.167462<span class="token punctuation">-</span>15.742819 7.167462<span class="token punctuation">-</span>25.214109C736.887134 25.226908 708.345275 0.012799 672.635953 0.012799a63.611229 63.611229 0 0 0<span class="token punctuation">-</span>39.293053 12.607055c<span class="token punctuation">-</span>1.791866 1.59988<span class="token punctuation">-</span>3.519736 3.19976<span class="token punctuation">-</span>5.311602 3.19976L147.87531 418.925381a55.547834 55.547834 0 0 0<span class="token punctuation">-</span>19.646527 47.356448c1.791866 17.278704 14.27093 33.021523 32.125591 42.492813l271.33965 141.749369L292.504463 945.221908c<span class="token punctuation">-</span>12.479064 25.214109<span class="token punctuation">-</span>1.791866 53.563983 23.166262 69.306802 10.751194 6.335525 23.230258 9.47129 35.709322 9.47129 16.062795 0 32.125591<span class="token punctuation">-</span>4.735645 44.604655<span class="token punctuation">-</span>15.742819l480.091993<span class="token punctuation">-</span>403.297753a55.547834 55.547834 0 0 0 19.646526<span class="token punctuation">-</span>47.228458 61.243407 61.243407 0 0 0<span class="token punctuation">-</span>32.12559<span class="token punctuation">-</span>44.156688z"            fill="<span class="token comment">#515151" /></span>        &lt;/svg<span class="token punctuation">></span>        &lt;img src="https<span class="token punctuation">:</span>//a<span class="token punctuation">-</span>oss.zmki.cn/20190601/img_9878.jpg"          <span class="token key atrule">style="width</span><span class="token punctuation">:</span> <span class="token key atrule">50px;height</span><span class="token punctuation">:</span> <span class="token key atrule">50px;vertical-align</span><span class="token punctuation">:</span> <span class="token key atrule">-20px;border-radius</span><span class="token punctuation">:</span> <span class="token key atrule">50%;margin-left</span><span class="token punctuation">:</span> <span class="token key atrule">5px;margin-bottom</span><span class="token punctuation">:</span> <span class="token key atrule">5px;-webkit-box-shadow</span><span class="token punctuation">:</span> 1px 1px 1px rgba(0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>.1)<span class="token punctuation">,</span> 1px 1px 1px rgba(0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>0.1)<span class="token punctuation">,</span> 1px 1px 1px rgba(0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token key atrule">0.1);box-shadow</span><span class="token punctuation">:</span> 1px 1px 1px rgba(0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>.1)<span class="token punctuation">,</span> 1px 1px 1px rgba(0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>0.1)<span class="token punctuation">,</span> 1px 1px 1px rgba(0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token key atrule">0.1);border</span><span class="token punctuation">:</span> 2px solid <span class="token comment">#fff;" />&lt;br /></span>        &lt;span id="htmer_time"<span class="token punctuation">></span>&lt;/span<span class="token punctuation">></span>      &lt;/div<span class="token punctuation">></span>      &lt;script data<span class="token punctuation">-</span>pjax src="/love/index.js"<span class="token punctuation">></span>&lt;/script<span class="token punctuation">></span>    '<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·ï¼Œæ‹çˆ±å¢™å°±å®Œæˆäº†ï¼Œä½†æ˜¯ï¼Œé™¤äº†ä¿®æ”¹æ—¶é—´ï¼Œä½ è¿˜å¯ä»¥æŠŠä¸¤å¼ å›¾ç‰‡åœ°å€ä¹Ÿä¿®æ”¹æˆä½ è‡ªå·±çš„å›¾ç‰‡åœ°å€</p><p>è¿™å‡ ä¸ªæ¨¡å—å°±ç›¸å½“äºç»™ä½ ä¸€ä¸ªå®¹å™¨ï¼Œä½ å¯ä»¥è‡ªå·±å¾€é‡Œé¢æ–¹htmlï¼Œç„¶åæ”¾jsï¼Œcssï¼Œæ”¾ä¸€äº›è‡ªå·±çš„æ’ä»¶ï¼Œvue.js,jquery.jsï¼ŒåŸç”Ÿjséƒ½å¯ä»¥ï¼Œåªæ˜¯æä¾›ä¸€ä¸ªå®¹å™¨ï¼Œä½ å¯ä»¥è‡ªå·±ææ›´å¥½çœ‹æ›´å¥½ç©çš„æ‰©å±•ï¼Œå¦‚æœä½ æ‡’å¾—æŠ˜è…¾ï¼Œç”¨æˆ‘ä¸Šé¢å†™çš„æ‰©å±•ï¼ˆè‡ªå®šä¹‰ä¾§è¾¹æ ï¼‰ä¹ŸæŒºå¥½çš„ã€‚</p><p>æœ€åæˆ‘å°†æˆ‘çš„source/_data/widget.ymlå†™æ³•è´´ä¸‹æ¥,å¦‚ä¸‹æ‰€ç¤º</p><details ><summary pointer> source/_data/widget.yml </summary>              <div class='content'>              <pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">widget_library</span><span class="token punctuation">:</span><span class="token key atrule">widget_library_sticky</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token key atrule">class_name</span><span class="token punctuation">:</span> testWidget    <span class="token key atrule">id_name</span><span class="token punctuation">:</span> testWidget    <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token number">-1</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> å¾®åšçƒ­æœ    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fab fa<span class="token punctuation">-</span>weibo    <span class="token key atrule">icon_color</span><span class="token punctuation">:</span> <span class="token string">'#d63130'</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//baidu.com    <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'#fff'</span>    <span class="token key atrule">html</span><span class="token punctuation">:</span> '      &lt;div id="myWeibo"<span class="token punctuation">></span>      &lt;<span class="token tag">!--</span> å¦‚æœä¸è¦æ»šåŠ¨ï¼Œåˆ™å»æ‰ vue<span class="token punctuation">-</span>seamless<span class="token punctuation">-</span>scrollæ ‡ç­¾å°±è¡Œäº†ï¼Œè¿™ä¸ªæ’ä»¶ä½¿ç”¨cdnå‘å·¦å‘å³æ»šåŠ¨å¥½åƒæœ‰é—®é¢˜ <span class="token punctuation">-</span><span class="token punctuation">-</span><span class="token punctuation">></span>        &lt;vue<span class="token punctuation">-</span>seamless<span class="token punctuation">-</span>scroll          <span class="token punctuation">:</span>data="content"          <span class="token punctuation">:</span>class<span class="token punctuation">-</span>option="classOption"          class="warp"        <span class="token punctuation">></span>          &lt;div class="weibo<span class="token punctuation">-</span>container" v<span class="token punctuation">-</span>for="(item<span class="token punctuation">,</span> index) in content" <span class="token punctuation">:</span>key="index"<span class="token punctuation">></span>            &lt;div class="left"<span class="token punctuation">></span>              &lt;div class="order" <span class="token punctuation">:</span>class="<span class="token punctuation">&#123;</span> <span class="token key atrule">red</span><span class="token punctuation">:</span> index&lt;=2 <span class="token punctuation">&#125;</span>"<span class="token punctuation">></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>index + 1<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>&lt;/div<span class="token punctuation">></span>              &lt;div class="name"<span class="token punctuation">></span>&lt;a <span class="token punctuation">:</span>href="item.url" target="_blank"<span class="token punctuation">></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>item.name<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>&lt;/a<span class="token punctuation">></span>&lt;/div<span class="token punctuation">></span>            &lt;/div<span class="token punctuation">></span>            &lt;div class="hot"<span class="token punctuation">></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>item.hot<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>&lt;/div<span class="token punctuation">></span>          &lt;/div<span class="token punctuation">></span>        &lt;/vue<span class="token punctuation">-</span>seamless<span class="token punctuation">-</span>scroll<span class="token punctuation">></span>      &lt;/div<span class="token punctuation">></span>      &lt;script src="/weibo/index.js"<span class="token punctuation">></span>&lt;/script<span class="token punctuation">></span>      &lt;link href="/weibo/index.css" rel="stylesheet"<span class="token punctuation">></span>    '  <span class="token punctuation">-</span> <span class="token key atrule">class_name</span><span class="token punctuation">:</span> historyToday    <span class="token key atrule">id_name</span><span class="token punctuation">:</span> historyToday    <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token number">-1</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> å†å²ä¸Šçš„ä»Šå¤©    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>calendar<span class="token punctuation">-</span>week    <span class="token key atrule">icon_color</span><span class="token punctuation">:</span> <span class="token string">'#d63130'</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//baidu.com    <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'#fff'</span>    <span class="token key atrule">html</span><span class="token punctuation">:</span> '      &lt;div id="myHistorySwiper" @mouseenter="stopAutoPlay()" @mouseleave="startAutoPlay()"<span class="token punctuation">></span>        &lt;swiper class="myhistoryswiper" ref="myhistoryswiper" style="height<span class="token punctuation">:</span>80px;" <span class="token punctuation">:</span>options="swiperOption"<span class="token punctuation">></span>          &lt;swiper<span class="token punctuation">-</span>slide v<span class="token punctuation">-</span>for="(item<span class="token punctuation">,</span> index) in content" <span class="token punctuation">:</span>key="index"<span class="token punctuation">></span>            <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>item<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>          &lt;/swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>        &lt;/swiper<span class="token punctuation">></span>      &lt;/div<span class="token punctuation">></span>      &lt;script src="/historyToday/index.js"<span class="token punctuation">></span>&lt;/script<span class="token punctuation">></span>    '  <span class="token punctuation">-</span> <span class="token key atrule">class_name</span><span class="token punctuation">:</span> testLove    <span class="token key atrule">id_name</span><span class="token punctuation">:</span> testLove    <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token number">-1</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> æ‹çˆ±å¢™    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>heart    <span class="token key atrule">icon_color</span><span class="token punctuation">:</span> <span class="token string">'#d63130'</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//baidu.com    <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'#fff'</span>    <span class="token key atrule">html</span><span class="token punctuation">:</span> '          <span class="token key atrule">&lt;div style="text-align</span><span class="token punctuation">:</span> center;"<span class="token punctuation">></span>        &lt;img src="https<span class="token punctuation">:</span>//a<span class="token punctuation">-</span>oss.zmki.cn/20190601/img_9879.jpg"          <span class="token key atrule">style="width</span><span class="token punctuation">:</span> <span class="token key atrule">50px;height</span><span class="token punctuation">:</span> <span class="token key atrule">50px;vertical-align</span><span class="token punctuation">:</span> <span class="token key atrule">-20px;border-radius</span><span class="token punctuation">:</span> <span class="token key atrule">50%;margin-right</span><span class="token punctuation">:</span> <span class="token key atrule">5px;margin-bottom</span><span class="token punctuation">:</span> <span class="token key atrule">5px;-webkit-box-shadow</span><span class="token punctuation">:</span> 1px 1px 1px rgba(0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>.1)<span class="token punctuation">,</span> 1px 1px 1px rgba(0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>0.1)<span class="token punctuation">,</span> 1px 1px 1px rgba(0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token key atrule">0.1);box-shadow</span><span class="token punctuation">:</span> 1px 1px 1px rgba(0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>.1)<span class="token punctuation">,</span> 1px 1px 1px rgba(0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>0.1)<span class="token punctuation">,</span> 1px 1px 1px rgba(0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token key atrule">0.1);border</span><span class="token punctuation">:</span> 2px solid <span class="token comment">#fff;" /></span>        <span class="token key atrule">&lt;svg viewbox="0 0 1024 1024" style="margin-left</span><span class="token punctuation">:</span> <span class="token key atrule">5px;margin-right</span><span class="token punctuation">:</span> 5px;" version="1.0" width="15" height="15"          class="my<span class="token punctuation">-</span>face"<span class="token punctuation">></span>          &lt;path            d="M863.597631 513.574282l<span class="token punctuation">-</span>271.33965<span class="token punctuation">-</span>140.213484L729.783667 81.926656c3.583731<span class="token punctuation">-</span>7.87141 7.167462<span class="token punctuation">-</span>15.742819 7.167462<span class="token punctuation">-</span>25.214109C736.887134 25.226908 708.345275 0.012799 672.635953 0.012799a63.611229 63.611229 0 0 0<span class="token punctuation">-</span>39.293053 12.607055c<span class="token punctuation">-</span>1.791866 1.59988<span class="token punctuation">-</span>3.519736 3.19976<span class="token punctuation">-</span>5.311602 3.19976L147.87531 418.925381a55.547834 55.547834 0 0 0<span class="token punctuation">-</span>19.646527 47.356448c1.791866 17.278704 14.27093 33.021523 32.125591 42.492813l271.33965 141.749369L292.504463 945.221908c<span class="token punctuation">-</span>12.479064 25.214109<span class="token punctuation">-</span>1.791866 53.563983 23.166262 69.306802 10.751194 6.335525 23.230258 9.47129 35.709322 9.47129 16.062795 0 32.125591<span class="token punctuation">-</span>4.735645 44.604655<span class="token punctuation">-</span>15.742819l480.091993<span class="token punctuation">-</span>403.297753a55.547834 55.547834 0 0 0 19.646526<span class="token punctuation">-</span>47.228458 61.243407 61.243407 0 0 0<span class="token punctuation">-</span>32.12559<span class="token punctuation">-</span>44.156688z"            fill="<span class="token comment">#515151" /></span>        &lt;/svg<span class="token punctuation">></span>        &lt;img src="https<span class="token punctuation">:</span>//a<span class="token punctuation">-</span>oss.zmki.cn/20190601/img_9878.jpg"          <span class="token key atrule">style="width</span><span class="token punctuation">:</span> <span class="token key atrule">50px;height</span><span class="token punctuation">:</span> <span class="token key atrule">50px;vertical-align</span><span class="token punctuation">:</span> <span class="token key atrule">-20px;border-radius</span><span class="token punctuation">:</span> <span class="token key atrule">50%;margin-left</span><span class="token punctuation">:</span> <span class="token key atrule">5px;margin-bottom</span><span class="token punctuation">:</span> <span class="token key atrule">5px;-webkit-box-shadow</span><span class="token punctuation">:</span> 1px 1px 1px rgba(0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>.1)<span class="token punctuation">,</span> 1px 1px 1px rgba(0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>0.1)<span class="token punctuation">,</span> 1px 1px 1px rgba(0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token key atrule">0.1);box-shadow</span><span class="token punctuation">:</span> 1px 1px 1px rgba(0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>.1)<span class="token punctuation">,</span> 1px 1px 1px rgba(0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>0.1)<span class="token punctuation">,</span> 1px 1px 1px rgba(0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token key atrule">0.1);border</span><span class="token punctuation">:</span> 2px solid <span class="token comment">#fff;" />&lt;br /></span>        &lt;span id="htmer_time"<span class="token punctuation">></span>&lt;/span<span class="token punctuation">></span>      &lt;/div<span class="token punctuation">></span>      &lt;script data<span class="token punctuation">-</span>pjax src="/love/index.js"<span class="token punctuation">></span>&lt;/script<span class="token punctuation">></span>    '<span class="token key atrule">home_widget</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token key atrule">class_name</span><span class="token punctuation">:</span> welcome    <span class="token key atrule">id_name</span><span class="token punctuation">:</span> welcome    <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token number">-1</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> æ¬¢è¿    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>envelope    <span class="token key atrule">icon_color</span><span class="token punctuation">:</span> blue    <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//baidu.com    <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'#fff'</span>    <span class="token key atrule">html</span><span class="token punctuation">:</span> <span class="token string">'&lt;img src="https://api.amogu.cn/api/ipimg/" style="width:100%">'</span>  <span class="token punctuation">-</span> <span class="token key atrule">class_name</span><span class="token punctuation">:</span> my_github_container    <span class="token key atrule">id_name</span><span class="token punctuation">:</span> my_github_container    <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token number">-1</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> æµ‹è¯•æ—¥å†    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>envelope    <span class="token key atrule">icon_color</span><span class="token punctuation">:</span> blue    <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//baidu.com    <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'#fff'</span>    <span class="token key atrule">html</span><span class="token punctuation">:</span> '      &lt;div id="github_container"<span class="token punctuation">></span>&lt;/div<span class="token punctuation">></span>      &lt;script data<span class="token punctuation">-</span>pjax src="/githubcalendar/index.js"<span class="token punctuation">></span>&lt;/script<span class="token punctuation">></span>    '  <span class="token punctuation">-</span> <span class="token key atrule">class_name</span><span class="token punctuation">:</span> test2    <span class="token key atrule">id_name</span><span class="token punctuation">:</span> test2    <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token number">-1</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> æµ‹è¯•è½®æ’­å›¾    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>envelope    <span class="token key atrule">icon_color</span><span class="token punctuation">:</span> blue    <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//baidu.com    <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'#fff'</span>    <span class="token key atrule">html</span><span class="token punctuation">:</span> '    &lt;div id="mySwiper" @mouseenter="stopAutoPlay()" @mouseleave="startAutoPlay()"<span class="token punctuation">></span>      &lt;swiper class="myswiper" ref="myswiper" style="height<span class="token punctuation">:</span>350px;" <span class="token punctuation">:</span>options="swiperOption"<span class="token punctuation">></span>        &lt;swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>          &lt;a href="http<span class="token punctuation">:</span>//baidu.com" class="toPath"<span class="token punctuation">></span>            <span class="token key atrule">&lt;img class="no-lazy" src="/mySwiper/img/2.jpg" style="width:100%;height:100%;object-fit</span><span class="token punctuation">:</span> cover;"<span class="token punctuation">></span>            &lt;h2 class="ani" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>effect="fadeInDown" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>duration="0.5s" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>delay="0.3s"<span class="token punctuation">></span>æˆ‘æ˜¯æ ‡é¢˜&lt;/h2<span class="token punctuation">></span>            &lt;p class="ani" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>effect="fadeInDown" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>duration="0.5s" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>delay="0.3s"<span class="token punctuation">></span>æˆ‘æ˜¯æè¿°å“¦&lt;/p<span class="token punctuation">></span>          &lt;/a<span class="token punctuation">></span>        &lt;/swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>        &lt;swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>          &lt;a href="http<span class="token punctuation">:</span>//baidu.com" class="toPath"<span class="token punctuation">></span>            <span class="token key atrule">&lt;img class="no-lazy" src="/mySwiper/img/3.jpg" style="width:100%;height:100%;object-fit</span><span class="token punctuation">:</span> cover;"<span class="token punctuation">></span>            &lt;h2 class="ani" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>effect="fadeInDown" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>duration="0.5s" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>delay="0.3s"<span class="token punctuation">></span>æˆ‘æ˜¯æ ‡é¢˜2&lt;/h2<span class="token punctuation">></span>            &lt;p class="ani" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>effect="fadeInDown" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>duration="0.5s" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>delay="0.3s"<span class="token punctuation">></span>æˆ‘æ˜¯æè¿°2&lt;/p<span class="token punctuation">></span>          &lt;/a<span class="token punctuation">></span>        &lt;/swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>        &lt;swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>          &lt;a href="http<span class="token punctuation">:</span>//baidu.com" class="toPath"<span class="token punctuation">></span>            <span class="token key atrule">&lt;img class="no-lazy" src="/mySwiper/img/4.jpg" style="width:100%;height:100%;object-fit</span><span class="token punctuation">:</span> cover;"<span class="token punctuation">></span>            &lt;h2 class="ani" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>effect="fadeInDown" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>duration="0.5s" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>delay="0.3s"<span class="token punctuation">></span>æˆ‘æ˜¯æ ‡é¢˜3&lt;/h2<span class="token punctuation">></span>            &lt;p class="ani" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>effect="fadeInDown" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>duration="0.5s" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>delay="0.3s"<span class="token punctuation">></span>æˆ‘æ˜¯æè¿°3&lt;/p<span class="token punctuation">></span>          &lt;/a<span class="token punctuation">></span>        &lt;/swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>        &lt;swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>          &lt;a href="http<span class="token punctuation">:</span>//baidu.com" class="toPath"<span class="token punctuation">></span>            <span class="token key atrule">&lt;img class="no-lazy" src="/mySwiper/img/5.jpg" style="width:100%;height:100%;object-fit</span><span class="token punctuation">:</span> cover;"<span class="token punctuation">></span>            &lt;h2 class="ani" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>effect="fadeInDown" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>duration="0.5s" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>delay="0.3s"<span class="token punctuation">></span>æˆ‘æ˜¯æ ‡é¢˜4&lt;/h2<span class="token punctuation">></span>            &lt;p class="ani" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>effect="fadeInDown" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>duration="0.5s" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>delay="0.3s"<span class="token punctuation">></span>æˆ‘æ˜¯æè¿°4&lt;/p<span class="token punctuation">></span>          &lt;/a<span class="token punctuation">></span>        &lt;/swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>        &lt;swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>          &lt;a href="http<span class="token punctuation">:</span>//baidu.com" class="toPath"<span class="token punctuation">></span>            <span class="token key atrule">&lt;img class="no-lazy" src="https://api.dujin.org/pic/ghibli/" style="width:100%;height:100%;object-fit</span><span class="token punctuation">:</span> cover;"<span class="token punctuation">></span>            &lt;h2 class="ani" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>effect="fadeInDown" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>duration="0.5s" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>delay="0.3s"<span class="token punctuation">></span>æˆ‘æ˜¯æ ‡é¢˜5&lt;/h2<span class="token punctuation">></span>            &lt;p class="ani" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>effect="fadeInDown" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>duration="0.5s" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>delay="0.3s"<span class="token punctuation">></span>æˆ‘æ˜¯æè¿°5&lt;/p<span class="token punctuation">></span>          &lt;/a<span class="token punctuation">></span>        &lt;/swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>        &lt;swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>          &lt;a href="http<span class="token punctuation">:</span>//baidu.com" class="toPath"<span class="token punctuation">></span>            <span class="token key atrule">&lt;img class="no-lazy" src="/mySwiper/img/7.jpg" style="width:100%;height:100%;object-fit</span><span class="token punctuation">:</span> cover;"<span class="token punctuation">></span>            &lt;h2 class="ani" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>effect="fadeInDown" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>duration="0.5s" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>delay="0.3s"<span class="token punctuation">></span>æˆ‘æ˜¯æ ‡é¢˜6&lt;/h2<span class="token punctuation">></span>            &lt;p class="ani" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>effect="fadeInDown" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>duration="0.5s" swiper<span class="token punctuation">-</span>animate<span class="token punctuation">-</span>delay="0.3s"<span class="token punctuation">></span>æˆ‘æ˜¯æè¿°6&lt;/p<span class="token punctuation">></span>          &lt;/a<span class="token punctuation">></span>        &lt;/swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>        &lt;<span class="token tag">!--</span> å¦‚æœä½ æƒ³ç»§ç»­å¢åŠ è½®æ’­å›¾ï¼Œç»§ç»­åœ¨ä¸‹é¢å†™&lt;swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>æˆ‘æ˜¯å†…å®¹&lt;/swiper<span class="token punctuation">-</span>slide<span class="token punctuation">></span>å°±è¡Œäº† <span class="token punctuation">-</span><span class="token punctuation">-</span><span class="token punctuation">></span><span class="token scalar string">        &lt;div class="swiper-pagination" slot="pagination">&lt;/div></span>      &lt;/swiper<span class="token punctuation">></span>    &lt;/div<span class="token punctuation">></span>    &lt;script src="/mySwiper/index.js"<span class="token punctuation">></span>&lt;/script<span class="token punctuation">></span>    &lt;link href="/mySwiper/index.css" rel="stylesheet"<span class="token punctuation">></span>    '  <span class="token punctuation">-</span> <span class="token key atrule">class_name</span><span class="token punctuation">:</span> mybilibili    <span class="token key atrule">id_name</span><span class="token punctuation">:</span> mybilibili    <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token number">-1</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> æµ‹è¯•bli    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>envelope    <span class="token key atrule">icon_color</span><span class="token punctuation">:</span> blue    <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//baidu.com    <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'#fff'</span>    <span class="token key atrule">html</span><span class="token punctuation">:</span> '      &lt;div id="myBli"<span class="token punctuation">></span>        &lt;vue<span class="token punctuation">-</span>seamless<span class="token punctuation">-</span>scroll          <span class="token punctuation">:</span>data="listData"          <span class="token punctuation">:</span>class<span class="token punctuation">-</span>option="classOption"          class="warp"        <span class="token punctuation">></span>          &lt;ul class="ul<span class="token punctuation">-</span>item" style="width<span class="token punctuation">:</span>720px;"<span class="token punctuation">></span>            &lt;<span class="token tag">!--</span> åœ¨è¿™é‡Œæ”¹<span class="token punctuation">,</span> æ‰‹åŠ¨ä¿®æ”¹aè¿æ¥çš„hrefå€¼å’Œimgçš„srcå€¼<span class="token punctuation">,</span> å¦‚æœä½ ä¼šè¿›é˜¶ï¼Œä½ å¯ä»¥ä½¿ç”¨v<span class="token punctuation">-</span>for<span class="token punctuation">,</span> æˆ–è€…æ•°æ®ä½¿ç”¨åŠ¨æ€æ•°æ®<span class="token punctuation">-</span><span class="token punctuation">-</span><span class="token punctuation">></span>                        &lt;li class="li<span class="token punctuation">-</span>item"<span class="token punctuation">></span>              &lt;a href="http<span class="token punctuation">:</span>//baidu.com"<span class="token punctuation">></span>                &lt;img class="no<span class="token punctuation">-</span>lazy" src="https<span class="token punctuation">:</span>//pic4.zhimg.com/80/v2<span class="token punctuation">-</span>f549722dac8f777693c090a92498de0f_1440w.jpg"<span class="token punctuation">></span>              &lt;/a<span class="token punctuation">></span>            &lt;/li<span class="token punctuation">></span>            &lt;li class="li<span class="token punctuation">-</span>item"<span class="token punctuation">></span>              &lt;a href="http<span class="token punctuation">:</span>//baidu.com"<span class="token punctuation">></span>                &lt;img class="no<span class="token punctuation">-</span>lazy" src="https<span class="token punctuation">:</span>//pic4.zhimg.com/80/v2<span class="token punctuation">-</span>f549722dac8f777693c090a92498de0f_1440w.jpg"<span class="token punctuation">></span>              &lt;/a<span class="token punctuation">></span>            &lt;/li<span class="token punctuation">></span>            &lt;li class="li<span class="token punctuation">-</span>item"<span class="token punctuation">></span>              &lt;a href="http<span class="token punctuation">:</span>//baidu.com"<span class="token punctuation">></span>                &lt;img class="no<span class="token punctuation">-</span>lazy" src="https<span class="token punctuation">:</span>//pic4.zhimg.com/80/v2<span class="token punctuation">-</span>f549722dac8f777693c090a92498de0f_1440w.jpg"<span class="token punctuation">></span>              &lt;/a<span class="token punctuation">></span>            &lt;/li<span class="token punctuation">></span>            &lt;li class="li<span class="token punctuation">-</span>item"<span class="token punctuation">></span>              &lt;a href="http<span class="token punctuation">:</span>//baidu.com"<span class="token punctuation">></span>                &lt;img class="no<span class="token punctuation">-</span>lazy" src="https<span class="token punctuation">:</span>//pic4.zhimg.com/80/v2<span class="token punctuation">-</span>f549722dac8f777693c090a92498de0f_1440w.jpg"<span class="token punctuation">></span>              &lt;/a<span class="token punctuation">></span>            &lt;/li<span class="token punctuation">></span>            &lt;li class="li<span class="token punctuation">-</span>item"<span class="token punctuation">></span>              &lt;a href="http<span class="token punctuation">:</span>//baidu.com"<span class="token punctuation">></span>                &lt;img class="no<span class="token punctuation">-</span>lazy" src="https<span class="token punctuation">:</span>//pic4.zhimg.com/80/v2<span class="token punctuation">-</span>f549722dac8f777693c090a92498de0f_1440w.jpg"<span class="token punctuation">></span>              &lt;/a<span class="token punctuation">></span>            &lt;/li<span class="token punctuation">></span>            &lt;li class="li<span class="token punctuation">-</span>item"<span class="token punctuation">></span>              &lt;a href="http<span class="token punctuation">:</span>//baidu.com"<span class="token punctuation">></span>                &lt;img class="no<span class="token punctuation">-</span>lazy" src="https<span class="token punctuation">:</span>//pic4.zhimg.com/80/v2<span class="token punctuation">-</span>f549722dac8f777693c090a92498de0f_1440w.jpg"<span class="token punctuation">></span>              &lt;/a<span class="token punctuation">></span>            &lt;/li<span class="token punctuation">></span>            &lt;<span class="token tag">!--</span> åœ¨è¿™é‡Œç»“æŸ <span class="token punctuation">-</span><span class="token punctuation">-</span><span class="token punctuation">></span><span class="token scalar string">          &lt;/ul></span>        &lt;/vue<span class="token punctuation">-</span>seamless<span class="token punctuation">-</span>scroll<span class="token punctuation">></span>      &lt;/div<span class="token punctuation">></span>      &lt;script src="/bli/index.js"<span class="token punctuation">></span>&lt;/script<span class="token punctuation">></span>      &lt;link href="/bli/index.css" rel="stylesheet"<span class="token punctuation">></span>    '<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>              </div>            </details>]]></content>
      
      
      <categories>
          
          <category> æœ¬ç«™ä»‹ç» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> çƒ­æœæ¦œ </tag>
            
            <tag> widget </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸»é¢˜ä»‹ç»-æ–‡ç« Front-matter</title>
      <link href="/post/ben-zhan-jie-shao/zhu-ti-jie-shao-wen-zhang-front-matter/"/>
      <url>/post/ben-zhan-jie-shao/zhu-ti-jie-shao-wen-zhang-front-matter/</url>
      
        <content type="html"><![CDATA[<h2 id="æ–‡ç« -Front-matter-ä»‹ç»"><a href="#æ–‡ç« -Front-matter-ä»‹ç»" class="headerlink" title="æ–‡ç«  Front-matter ä»‹ç»"></a>æ–‡ç«  Front-matter ä»‹ç»</h2><p>è¿™ä¸ªæŒ‡çš„æ˜¯ä½ åœ¨ä½ çš„æ–‡ç« é¡µé¢é‡Œé¢å†™çš„å‚æ•°ï¼Œé’ˆå¯¹çš„æ˜¯è¿™ä¸€ç¯‡æ–‡ç« ï¼Œä¾‹å¦‚</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> Hexoä¸»é¢˜<span class="token punctuation">-</span><span class="token punctuation">-</span>Bambooä»‹ç»<span class="token key atrule">date</span><span class="token punctuation">:</span> 2021<span class="token punctuation">-</span>10<span class="token punctuation">-</span>24 14<span class="token punctuation">:</span><span class="token number">06</span><span class="token key atrule">swiper</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># å°†æ”¹æ–‡ç« æ”¾å…¥è½®æ’­å›¾ä¸­</span><span class="token key atrule">swiperImg</span><span class="token punctuation">:</span> <span class="token string">'/medias/1.jpg'</span> <span class="token comment"># è¯¥æ–‡ç« åœ¨è½®æ’­å›¾ä¸­çš„å›¾ç‰‡ï¼Œå¯ä»¥æ˜¯æœ¬åœ°ç›®å½•ä¸‹å›¾ç‰‡ä¹Ÿå¯ä»¥æ˜¯http://xxxå›¾ç‰‡</span><span class="token key atrule">img</span><span class="token punctuation">:</span> <span class="token string">'/medias/1.jpg'</span> <span class="token comment"># è¯¥æ–‡ç« å›¾ç‰‡ï¼Œå¯ä»¥æ˜¯æœ¬åœ°ç›®å½•ä¸‹å›¾ç‰‡ä¹Ÿå¯ä»¥æ˜¯http://xxxå›¾ç‰‡</span><span class="token key atrule">categories</span><span class="token punctuation">:</span> å‰ç«¯<span class="token key atrule">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Hexo<span class="token punctuation">,</span> hexo<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>bamboo<span class="token punctuation">]</span><span class="token key atrule">top</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>Front-matter</code> é€‰é¡¹ä¸­çš„æ‰€æœ‰å†…å®¹å‡ä¸º<strong>éå¿…å¡«</strong>çš„ã€‚ä½†æˆ‘ä»ç„¶å»ºè®®è‡³å°‘å¡«å†™ <code>title</code> å’Œ <code>date</code> çš„å€¼ã€‚</p><table><thead><tr><th>é…ç½®é€‰é¡¹</th><th>é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>title</td><td><code>Markdown</code> çš„æ–‡ä»¶æ ‡é¢˜</td><td>æ–‡ç« æ ‡é¢˜ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹</td></tr><tr><td>date</td><td>æ–‡ä»¶åˆ›å»ºæ—¶çš„æ—¥æœŸæ—¶é—´</td><td>å‘å¸ƒæ—¶é—´ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹ï¼Œä¸”æœ€å¥½ä¿è¯å…¨å±€å”¯ä¸€</td></tr><tr><td>author</td><td>Fengqi</td><td>æ–‡ç« ä½œè€…ï¼Œæ²¡æœ‰è®¾ç½®é»˜è®¤æ˜¯Fengqi</td></tr><tr><td>categories</td><td>æ— </td><td>æ–‡ç« åˆ†ç±»ï¼Œæœ¬ä¸»é¢˜çš„åˆ†ç±»è¡¨ç¤ºå®è§‚ä¸Šå¤§çš„åˆ†ç±»ï¼Œåªå»ºè®®ä¸€ç¯‡æ–‡ç« ä¸€ä¸ªåˆ†ç±»</td></tr><tr><td>tags</td><td>æ— </td><td>æ–‡ç« æ ‡ç­¾ï¼Œä¸€ç¯‡æ–‡ç« å¯ä»¥å¤šä¸ªæ ‡ç­¾</td></tr><tr><td>top</td><td>false</td><td>å°†è¯¥å€¼è®¾ä¸ºtrueï¼Œåˆ™å°†è¯¥ç¯‡æ–‡ç« æ˜¾ç¤ºåœ¨é¦–é¡µçš„ç½®é¡¶æ ç›®ä¸­</td></tr><tr><td>toc</td><td>true</td><td>å°†è¯¥å€¼è®¾ä¸ºfalseï¼Œåˆ™è¯¥ç¯‡æ–‡ç« ä¸æ˜¾ç¤ºå³ä¾§ç›®å½•</td></tr><tr><td>tocOpen</td><td>true</td><td>å°†è¯¥å€¼è®¾ä¸ºfalseï¼Œåˆ™è¯¥ç¯‡æ–‡ç« å³ä¾§ç›®å½•é»˜è®¤æ”¶ç¼©</td></tr><tr><td>onlyTitle</td><td>false</td><td>æ–‡ç« è¯¦æƒ…é¡µå¤´éƒ¨æ˜¯å¦åªæ˜¾ç¤ºæ ‡é¢˜ï¼Œä¸æ˜¾ç¤ºæ—¥æœŸç­‰ä¿¡æ¯</td></tr><tr><td>excerpt</td><td>æ— </td><td>æ–‡ç« æè¿°ï¼ˆæ‘˜è¦ï¼‰ï¼Œè¯¥æ–‡ç« åœ¨é¦–é¡µçš„æè¿°æ–‡å­—ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™å–swiperDesc,å¦‚æœswiperDescä¹Ÿæ²¡æœ‰ï¼Œåˆ™å–æ–‡ç« å†…å®¹ï¼ˆä¼˜å…ˆå– <code>&lt;!-- more --&gt; &quot;</code>ä¸Šé¢çš„å†…å®¹ï¼‰</td></tr><tr><td>swiper</td><td>false</td><td>è¡¨ç¤ºè¯¥æ–‡ç« æ˜¯å¦éœ€è¦åŠ å…¥åˆ°é¦–é¡µè½®æ’­å°é¢ä¸­</td></tr><tr><td>swiperImg</td><td>æ— </td><td>è¡¨ç¤ºè¯¥æ–‡ç« åœ¨é¦–é¡µè½®æ’­å°é¢éœ€è¦æ˜¾ç¤ºçš„å›¾ç‰‡è·¯å¾„ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™é»˜è®¤ä½¿ç”¨æ–‡ç« çš„ç‰¹è‰²å›¾ç‰‡</td></tr><tr><td>swiperDesc</td><td>æ— </td><td>è¡¨ç¤ºè¯¥æ–‡ç« åœ¨é¦–é¡µè½®æ’­å°é¢éœ€è¦æ˜¾ç¤ºçš„æ–‡å­—æè¿°ï¼ˆæ‘˜è¦ï¼‰ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ä½¿ç”¨excerptï¼Œå¦‚æœexcerptä¹Ÿæ²¡æœ‰ï¼Œåˆ™å–æ–‡ç« å†…å®¹</td></tr><tr><td>img</td><td>æ— </td><td>æ–‡ç« ç‰¹å¾å›¾ï¼Œè¯¥æ–‡ç« æ˜¾ç¤ºçš„å›¾ç‰‡ï¼Œæ²¡æœ‰åˆ™é»˜è®¤ä½¿ç”¨æ–‡ç« çš„ç‰¹è‰²å›¾ç‰‡</td></tr><tr><td>bgImg</td><td>-</td><td>å•ç‹¬ä¸ºè¿™ç¯‡æ–‡ç« è®¾ç½®èƒŒæ™¯å›¾ç‰‡æˆ–è€…èƒŒæ™¯é¢œè‰²ï¼Œå¯ä»¥æ˜¯æ•°ç»„ï¼Œæ•°ç»„é‡Œé¢æ”¾å›¾ç‰‡é“¾æ¥ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²é‡Œé¢æ˜¯é¢œè‰²å€¼ï¼Œç©ºå€¼åˆ™èƒŒæ™¯é¢œè‰²é€æ˜</td></tr><tr><td>bgImgTransition</td><td>fade</td><td>è¯¥ç¯‡æ–‡ç« çš„bgImgè®¾ç½®ä¸ºæ•°ç»„,è¯¥å€¼è¡¨ç¤ºèƒŒæ™¯å›¾ç‰‡åˆ‡æ¢çš„åŠ¨ç”», æœ‰ä¸‰ç§å€¼ï¼ˆfade, scale, translate-fadeï¼‰</td></tr><tr><td>bgImgDelay</td><td>180000(ä¸‰åˆ†é’Ÿ)</td><td>è¯¥ç¯‡æ–‡ç« çš„bgImgè®¾ç½®ä¸ºæ•°ç»„,è¯¥å€¼è¡¨ç¤ºèƒŒæ™¯å›¾ç‰‡åˆ‡æ¢çš„å»¶è¿Ÿæ—¶é—´</td></tr><tr><td>comments</td><td>true</td><td>å°†è¯¥å€¼è®¾ä¸ºfalseï¼Œåˆ™è¯¥ç¯‡æ–‡ç« ä¸æ˜¾ç¤ºè¯„è®º</td></tr><tr><td>share</td><td>true</td><td>å°†è¯¥å€¼è®¾ä¸ºfalseï¼Œåˆ™è¯¥ç¯‡æ–‡ç« ä¸æ˜¾ç¤ºåˆ†äº«æŒ‰é’®</td></tr><tr><td>copyright</td><td>true</td><td>å°†è¯¥å€¼è®¾ä¸ºfalseï¼Œåˆ™è¯¥ç¯‡æ–‡ç« ä¸æ˜¾ç¤ºç‰ˆæƒå£°æ˜</td></tr><tr><td>donate</td><td>true</td><td>å°†è¯¥å€¼è®¾ä¸ºfalseï¼Œåˆ™è¯¥ç¯‡æ–‡ç« ä¸æ˜¾ç¤ºæ‰“èµæŒ‰é’®</td></tr><tr><td>prismjs</td><td>æ— </td><td>å¦‚æœä½¿ç”¨çš„æ˜¯hexoè‡ªå¸¦çš„prismjsä»£ç é«˜äº®ï¼Œé€šè¿‡è®¾ç½®è¯¥å€¼ä¸ºè¯¥ç¯‡æ–‡ç« è®¾ç½®ä¸åŒçš„ä»£ç é«˜äº®ä¸»é¢˜ï¼ˆdefault, coy, dark, funky, okaidia, solarizedlight, tomorrow, twilightï¼‰</td></tr><tr><td>mathjax</td><td>false</td><td>mathjaxå…¬å¼</td></tr></tbody></table><p>ä»¥ä¸ŠåŸºæœ¬å°±æ˜¯æ‰€æœ‰çš„é…ç½®é¡¹äº†</p>]]></content>
      
      
      <categories>
          
          <category> æœ¬ç«™ä»‹ç» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸»é¢˜ä»‹ç»-åª’ä½“æ–‡ä»¶ä¹¦å†™åŠŸèƒ½</title>
      <link href="/post/ben-zhan-jie-shao/zhu-ti-jie-shao-mei-ti-wen-jian-shu-xie-gong-neng/"/>
      <url>/post/ben-zhan-jie-shao/zhu-ti-jie-shao-mei-ti-wen-jian-shu-xie-gong-neng/</url>
      
        <content type="html"><![CDATA[<h1 class="bamboo-h " id="getFileæ–‡ä»¶å†™æ³•">getFileæ–‡ä»¶å†™æ³•</h1><br/><h2 id="getFileæ–‡ä»¶åŠŸèƒ½"><a href="#getFileæ–‡ä»¶åŠŸèƒ½" class="headerlink" title="getFileæ–‡ä»¶åŠŸèƒ½"></a>getFileæ–‡ä»¶åŠŸèƒ½</h2><p>ä¼šæŠŠæŸä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šã€‚<br>ä¾‹å¦‚æˆ‘åœ¨sourceæ–‡ä»¶å¤¹ä¸‹ï¼Œåˆ›å»ºäº†ä¸€ä¸ªå«åšimgçš„æ–‡ä»¶å¤¹ï¼ŒæŠŠimgçš„æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šã€‚</p><blockquote><p>  æ³¨æ„ï¼š å¿…é¡»è¦åœ¨sourceæ–‡ä»¶å¤¹ä¸‹ï¼Œæ–‡ä»¶å¤¹åç§°å¯ä»¥éšä¾¿å–ï¼Œä¸‹é¢äº‹ä¾‹ä¸­æ–‡ä»¶å¤¹åç§°å«img<br>    è¯¥æ ‡ç­¾éœ€è¦ä¸»é¢˜ç‰ˆæœ¬ä¸º 2.3.6+</p></blockquote><h2 id="getFileæ–‡ä»¶å†™æ³•ç¤ºä¾‹å¦‚ä¸‹"><a href="#getFileæ–‡ä»¶å†™æ³•ç¤ºä¾‹å¦‚ä¸‹" class="headerlink" title="getFileæ–‡ä»¶å†™æ³•ç¤ºä¾‹å¦‚ä¸‹"></a>getFileæ–‡ä»¶å†™æ³•ç¤ºä¾‹å¦‚ä¸‹</h2><h3 id="è·å–imgæ–‡ä»¶å¤¹ä¸‹çš„-txt-pdfæ–‡ä»¶"><a href="#è·å–imgæ–‡ä»¶å¤¹ä¸‹çš„-txt-pdfæ–‡ä»¶" class="headerlink" title="è·å–imgæ–‡ä»¶å¤¹ä¸‹çš„.txt .pdfæ–‡ä»¶"></a>è·å–<code>img</code>æ–‡ä»¶å¤¹ä¸‹çš„.txt .pdfæ–‡ä»¶</h3><div class="link-group"><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="gougou .txt" href="/img/gougou .txt"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" class="lazyload placeholder" data-srcset="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="right"><p class="text">gougou .txt</p><p class="url">/img/gougou .txt</p></div></a></div><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="gougou.pdf" href="/img/gougou.pdf"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" class="lazyload placeholder" data-srcset="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="right"><p class="text">gougou.pdf</p><p class="url">/img/gougou.pdf</p></div></a></div></div><h3 id="è·å–imgæ–‡ä»¶å¤¹ä¸‹çš„-pngæ–‡ä»¶"><a href="#è·å–imgæ–‡ä»¶å¤¹ä¸‹çš„-pngæ–‡ä»¶" class="headerlink" title="è·å–imgæ–‡ä»¶å¤¹ä¸‹çš„.pngæ–‡ä»¶"></a>è·å–<code>img</code>æ–‡ä»¶å¤¹ä¸‹çš„.pngæ–‡ä»¶</h3><div class="link-group"><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="gougou.png" href="/img/gougou.png"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" class="lazyload placeholder" data-srcset="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="right"><p class="text">gougou.png</p><p class="url">/img/gougou.png</p></div></a></div></div><h3 id="è·å–imgæ–‡ä»¶å¤¹ä¸‹çš„-gifæ–‡ä»¶"><a href="#è·å–imgæ–‡ä»¶å¤¹ä¸‹çš„-gifæ–‡ä»¶" class="headerlink" title="è·å–imgæ–‡ä»¶å¤¹ä¸‹çš„.gifæ–‡ä»¶"></a>è·å–<code>img</code>æ–‡ä»¶å¤¹ä¸‹çš„.gifæ–‡ä»¶</h3><div class="link-group"><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="gougou.gif" href="/img/gougou.gif"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" class="lazyload placeholder" data-srcset="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="right"><p class="text">gougou.gif</p><p class="url">/img/gougou.gif</p></div></a></div></div><h3 id="è·å–imgæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶"><a href="#è·å–imgæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶" class="headerlink" title="è·å–imgæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶"></a>è·å–<code>img</code>æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</h3><div class="link-group"><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="gou.jpg" href="/img/gou.jpg"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" class="lazyload placeholder" data-srcset="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="right"><p class="text">gou.jpg</p><p class="url">/img/gou.jpg</p></div></a></div><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="gougou .txt" href="/img/gougou .txt"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" class="lazyload placeholder" data-srcset="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="right"><p class="text">gougou .txt</p><p class="url">/img/gougou .txt</p></div></a></div><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="gougou.gif" href="/img/gougou.gif"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" class="lazyload placeholder" data-srcset="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="right"><p class="text">gougou.gif</p><p class="url">/img/gougou.gif</p></div></a></div><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="gougou.pdf" href="/img/gougou.pdf"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" class="lazyload placeholder" data-srcset="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="right"><p class="text">gougou.pdf</p><p class="url">/img/gougou.pdf</p></div></a></div><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="gougou.png" href="/img/gougou.png"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" class="lazyload placeholder" data-srcset="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="right"><p class="text">gougou.png</p><p class="url">/img/gougou.png</p></div></a></div></div><h3 id="è·å–imgæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶æŒ‡å®šå·¦ä¾§å›¾ç‰‡"><a href="#è·å–imgæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶æŒ‡å®šå·¦ä¾§å›¾ç‰‡" class="headerlink" title="è·å–imgæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶æŒ‡å®šå·¦ä¾§å›¾ç‰‡"></a>è·å–<code>img</code>æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶æŒ‡å®šå·¦ä¾§å›¾ç‰‡</h3><div class="link-group"><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="gou.jpg" href="/img/gou.jpg"><span class="link-card-backdrop" style="background-image: url(https://tse3-mm.cn.bing.net/th/id/OIP-C.oGbjgWNX4DBXyKf0P_xOmwHaHa?w=212&h=188&c=7&o=5&dpr=1.24&pid=1.7)"></span><div class="left"><img src="https://tse3-mm.cn.bing.net/th/id/OIP-C.oGbjgWNX4DBXyKf0P_xOmwHaHa?w=212&h=188&c=7&o=5&dpr=1.24&pid=1.7" class="lazyload placeholder" data-srcset="https://tse3-mm.cn.bing.net/th/id/OIP-C.oGbjgWNX4DBXyKf0P_xOmwHaHa?w=212&h=188&c=7&o=5&dpr=1.24&pid=1.7" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="right"><p class="text">gou.jpg</p><p class="url">/img/gou.jpg</p></div></a></div><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="gougou .txt" href="/img/gougou .txt"><span class="link-card-backdrop" style="background-image: url(https://tse3-mm.cn.bing.net/th/id/OIP-C.oGbjgWNX4DBXyKf0P_xOmwHaHa?w=212&h=188&c=7&o=5&dpr=1.24&pid=1.7)"></span><div class="left"><img src="https://tse3-mm.cn.bing.net/th/id/OIP-C.oGbjgWNX4DBXyKf0P_xOmwHaHa?w=212&h=188&c=7&o=5&dpr=1.24&pid=1.7" class="lazyload placeholder" data-srcset="https://tse3-mm.cn.bing.net/th/id/OIP-C.oGbjgWNX4DBXyKf0P_xOmwHaHa?w=212&h=188&c=7&o=5&dpr=1.24&pid=1.7" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="right"><p class="text">gougou .txt</p><p class="url">/img/gougou .txt</p></div></a></div><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="gougou.gif" href="/img/gougou.gif"><span class="link-card-backdrop" style="background-image: url(https://tse3-mm.cn.bing.net/th/id/OIP-C.oGbjgWNX4DBXyKf0P_xOmwHaHa?w=212&h=188&c=7&o=5&dpr=1.24&pid=1.7)"></span><div class="left"><img src="https://tse3-mm.cn.bing.net/th/id/OIP-C.oGbjgWNX4DBXyKf0P_xOmwHaHa?w=212&h=188&c=7&o=5&dpr=1.24&pid=1.7" class="lazyload placeholder" data-srcset="https://tse3-mm.cn.bing.net/th/id/OIP-C.oGbjgWNX4DBXyKf0P_xOmwHaHa?w=212&h=188&c=7&o=5&dpr=1.24&pid=1.7" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="right"><p class="text">gougou.gif</p><p class="url">/img/gougou.gif</p></div></a></div><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="gougou.pdf" href="/img/gougou.pdf"><span class="link-card-backdrop" style="background-image: url(https://tse3-mm.cn.bing.net/th/id/OIP-C.oGbjgWNX4DBXyKf0P_xOmwHaHa?w=212&h=188&c=7&o=5&dpr=1.24&pid=1.7)"></span><div class="left"><img src="https://tse3-mm.cn.bing.net/th/id/OIP-C.oGbjgWNX4DBXyKf0P_xOmwHaHa?w=212&h=188&c=7&o=5&dpr=1.24&pid=1.7" class="lazyload placeholder" data-srcset="https://tse3-mm.cn.bing.net/th/id/OIP-C.oGbjgWNX4DBXyKf0P_xOmwHaHa?w=212&h=188&c=7&o=5&dpr=1.24&pid=1.7" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="right"><p class="text">gougou.pdf</p><p class="url">/img/gougou.pdf</p></div></a></div><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="gougou.png" href="/img/gougou.png"><span class="link-card-backdrop" style="background-image: url(https://tse3-mm.cn.bing.net/th/id/OIP-C.oGbjgWNX4DBXyKf0P_xOmwHaHa?w=212&h=188&c=7&o=5&dpr=1.24&pid=1.7)"></span><div class="left"><img src="https://tse3-mm.cn.bing.net/th/id/OIP-C.oGbjgWNX4DBXyKf0P_xOmwHaHa?w=212&h=188&c=7&o=5&dpr=1.24&pid=1.7" class="lazyload placeholder" data-srcset="https://tse3-mm.cn.bing.net/th/id/OIP-C.oGbjgWNX4DBXyKf0P_xOmwHaHa?w=212&h=188&c=7&o=5&dpr=1.24&pid=1.7" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="right"><p class="text">gougou.png</p><p class="url">/img/gougou.png</p></div></a></div></div><h3 id="ä¸Šè¿°ä»£ç ç¤ºä¾‹"><a href="#ä¸Šè¿°ä»£ç ç¤ºä¾‹" class="headerlink" title="ä¸Šè¿°ä»£ç ç¤ºä¾‹"></a>ä¸Šè¿°ä»£ç ç¤ºä¾‹</h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token title important"><span class="token punctuation">###</span> è·å–`img`æ–‡ä»¶å¤¹ä¸‹çš„.txt .pdfæ–‡ä»¶</span>&#123;% getFiles img, txt pdf  %&#125;<span class="token title important"><span class="token punctuation">###</span> è·å–`img`æ–‡ä»¶å¤¹ä¸‹çš„.pngæ–‡ä»¶</span>&#123;% getFiles img, png %&#125;<span class="token title important"><span class="token punctuation">###</span> è·å–`img`æ–‡ä»¶å¤¹ä¸‹çš„.gifæ–‡ä»¶</span>&#123;% getFiles img, gif %&#125;<span class="token title important"><span class="token punctuation">###</span> è·å–`img`æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</span>&#123;% getFiles img %&#125;<span class="token title important"><span class="token punctuation">###</span> è·å–`img`æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶æŒ‡å®šå·¦ä¾§å›¾ç‰‡</span>&#123;% getFiles img, '', https://tse3-mm.cn.bing.net/th/id/OIP-C.oGbjgWNX4DBXyKf0P_xOmwHaHa?w=212&amp;h=188&amp;c=7&amp;o=5&amp;dpr=1.24&amp;pid=1.7 %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 class="bamboo-h " id="inlineimageæ•ˆæœ">inlineimageæ•ˆæœ</h1><br/><p>è¿™æ˜¯ <img no-lazy class="inline" src="http://img.doutula.com/production/uploads/image/2019/08/15/20190815849485_fKMqYD.gif" style="height:1.5em"/> ä¸€æ®µè¯ã€‚</p><p>è¿™åˆæ˜¯ <img no-lazy class="inline" src="http://img.doutula.com/production/uploads/image/2019/08/15/20190815849485_fKMqYD.gif" style="height:40px;"/> ä¸€æ®µè¯ã€‚</p><p>è¿™åˆæ˜¯ <img no-lazy class="inline" src="http://img.doutula.com/production/uploads/image/2019/08/15/20190815849485_fKMqYD.gif" style="height:100px;"/> ä¸€æ®µè¯ã€‚</p><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç "><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç " class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">è¿™æ˜¯ &#123;% inlineimage http://img.doutula.com/production/uploads/image/2019/08/15/20190815849485_fKMqYD.gif %&#125; ä¸€æ®µè¯ã€‚è¿™åˆæ˜¯ &#123;% inlineimage http://img.doutula.com/production/uploads/image/2019/08/15/20190815849485_fKMqYD.gif, height=40px %&#125; ä¸€æ®µè¯ã€‚è¿™åˆæ˜¯ &#123;% inlineimage http://img.doutula.com/production/uploads/image/2019/08/15/20190815849485_fKMqYD.gif, height=100px %&#125; ä¸€æ®µè¯ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 class="bamboo-h " id="è‡ªå®šä¹‰å›¾ç‰‡å¹¶æ·»åŠ æè¿°">è‡ªå®šä¹‰å›¾ç‰‡å¹¶æ·»åŠ æè¿°</h1><br/><h2 id="è‡ªå®šä¹‰å›¾ç‰‡"><a href="#è‡ªå®šä¹‰å›¾ç‰‡" class="headerlink" title="è‡ªå®šä¹‰å›¾ç‰‡"></a>è‡ªå®šä¹‰å›¾ç‰‡</h2><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://pic2.zhimg.com/80/v2-cc93c338d57783702bea4506aee7007d_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-cc93c338d57783702bea4506aee7007d_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="è‡ªå®šä¹‰å›¾ç‰‡"/></div><span class="image-caption">è‡ªå®šä¹‰å›¾ç‰‡</span></div><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -1"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -1" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% image https://pic2.zhimg.com/80/v2-cc93c338d57783702bea4506aee7007d_1440w.jpg?source=1940ef5c, alt=è‡ªå®šä¹‰å›¾ç‰‡ %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="æŒ‡å®šå®½åº¦"><a href="#æŒ‡å®šå®½åº¦" class="headerlink" title="æŒ‡å®šå®½åº¦"></a>æŒ‡å®šå®½åº¦</h2><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://api.ixiaowai.cn/gqapi/gqapi.php" class="lazyload placeholder" data-srcset="https://api.ixiaowai.cn/gqapi/gqapi.php" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="éšæœºç”Ÿæˆé£æ™¯ï¼ˆaltæè¿°å¯æœ‰å¯æ— ï¼‰" style="width:400px;"/></div><span class="image-caption">éšæœºç”Ÿæˆé£æ™¯ï¼ˆaltæè¿°å¯æœ‰å¯æ— ï¼‰</span></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://api.ixiaowai.cn/api/api.php" class="lazyload placeholder" data-srcset="https://api.ixiaowai.cn/api/api.php" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="éšæœºç”ŸæˆäºŒæ¬¡å…ƒå£çº¸" style="width:400px;"/></div><span class="image-caption">éšæœºç”ŸæˆäºŒæ¬¡å…ƒå£çº¸</span></div><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -2"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -2" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% image https://api.ixiaowai.cn/gqapi/gqapi.php, width=400px, alt=éšæœºç”Ÿæˆé£æ™¯ï¼ˆaltæè¿°å¯æœ‰å¯æ— ï¼‰ %&#125;&#123;% image https://api.ixiaowai.cn/api/api.php, width=400px, alt=éšæœºç”ŸæˆäºŒæ¬¡å…ƒå£çº¸ %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="è®¾ç½®å ä½èƒŒæ™¯è‰²"><a href="#è®¾ç½®å ä½èƒŒæ™¯è‰²" class="headerlink" title="è®¾ç½®å ä½èƒŒæ™¯è‰²"></a>è®¾ç½®å ä½èƒŒæ™¯è‰²</h2><div class="img-wrap"><div class="img-bg" style="background:#1D0C04"><img class="img lazyload placeholder" src="https://api.ixiaowai.cn/mcapi/mcapi.php" class="lazyload placeholder" data-srcset="https://api.ixiaowai.cn/mcapi/mcapi.php" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="éšæœºç”Ÿæˆå‘†èŒé…±" style="width:400px;"/></div><span class="image-caption">éšæœºç”Ÿæˆå‘†èŒé…±</span></div><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -3"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -3" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% image  https://api.ixiaowai.cn/mcapi/mcapi.php, width=400px, bg=#1D0C04, alt=éšæœºç”Ÿæˆå‘†èŒé…± %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 class="bamboo-h " id="galleryå›¾ç‰‡">galleryå›¾ç‰‡</h1><br/><blockquote><p>ä½¿ç”¨è¯¥æ ‡ç­¾è¯·å…ˆå°†ä¸»é¢˜ä¸‹çš„_config.ymlä¸­çš„fancyboxè®¾ç½®ä¸ºtrue</p></blockquote><h2 id="ä¸€è¡Œä¸€ä¸ªå›¾ç‰‡"><a href="#ä¸€è¡Œä¸€ä¸ªå›¾ç‰‡" class="headerlink" title="ä¸€è¡Œä¸€ä¸ªå›¾ç‰‡"></a>ä¸€è¡Œä¸€ä¸ªå›¾ç‰‡</h2><div class="gallery ">              <p><img src="https://pic4.zhimg.com/80/v2-515859a54d7c9b89c070c6132dff4527_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic4.zhimg.com/80/v2-515859a54d7c9b89c070c6132dff4527_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"></p>            </div><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -4"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -4" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% gallery %&#125;<span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic4.zhimg.com/80/v2-515859a54d7c9b89c070c6132dff4527_1440w.jpg?source=1940ef5c</span>)</span>&#123;% endgallery %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="ä¸€è¡Œå¤šä¸ªå›¾ç‰‡ï¼ˆä¸æ¢è¡Œï¼‰"><a href="#ä¸€è¡Œå¤šä¸ªå›¾ç‰‡ï¼ˆä¸æ¢è¡Œï¼‰" class="headerlink" title="ä¸€è¡Œå¤šä¸ªå›¾ç‰‡ï¼ˆä¸æ¢è¡Œï¼‰"></a>ä¸€è¡Œå¤šä¸ªå›¾ç‰‡ï¼ˆä¸æ¢è¡Œï¼‰</h2><div class="gallery ">              <p><img src="https://pic2.zhimg.com/80/v2-bcb819edb98e081817066eb6b0e6a2ef_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-bcb819edb98e081817066eb6b0e6a2ef_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic2.zhimg.com/80/v2-c513cb0d2eff43b5391ea682f1ba07c6_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-c513cb0d2eff43b5391ea682f1ba07c6_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"></p>            </div><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -5"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -5" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% gallery %&#125;<span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-bcb819edb98e081817066eb6b0e6a2ef_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-c513cb0d2eff43b5391ea682f1ba07c6_1440w.jpg?source=1940ef5c</span>)</span>&#123;% endgallery %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å¤šè¡Œå¤šä¸ªå›¾ç‰‡ï¼ˆæ¯è¡Œ2ï½8ä¸ªå›¾ç‰‡ï¼‰"><a href="#å¤šè¡Œå¤šä¸ªå›¾ç‰‡ï¼ˆæ¯è¡Œ2ï½8ä¸ªå›¾ç‰‡ï¼‰" class="headerlink" title="å¤šè¡Œå¤šä¸ªå›¾ç‰‡ï¼ˆæ¯è¡Œ2ï½8ä¸ªå›¾ç‰‡ï¼‰"></a>å¤šè¡Œå¤šä¸ªå›¾ç‰‡ï¼ˆæ¯è¡Œ2ï½8ä¸ªå›¾ç‰‡ï¼‰</h2><div class="gallery stretch" col='4'>              <p><img src="https://pic2.zhimg.com/80/v2-bcb819edb98e081817066eb6b0e6a2ef_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-bcb819edb98e081817066eb6b0e6a2ef_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic2.zhimg.com/80/v2-c513cb0d2eff43b5391ea682f1ba07c6_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-c513cb0d2eff43b5391ea682f1ba07c6_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic2.zhimg.com/80/v2-bcb819edb98e081817066eb6b0e6a2ef_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-bcb819edb98e081817066eb6b0e6a2ef_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic2.zhimg.com/80/v2-c513cb0d2eff43b5391ea682f1ba07c6_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-c513cb0d2eff43b5391ea682f1ba07c6_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"></p>            </div><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -6"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -6" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% gallery stretch, 4 %&#125;<span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-bcb819edb98e081817066eb6b0e6a2ef_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-c513cb0d2eff43b5391ea682f1ba07c6_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-bcb819edb98e081817066eb6b0e6a2ef_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-c513cb0d2eff43b5391ea682f1ba07c6_1440w.jpg?source=1940ef5c</span>)</span>&#123;% endgallery %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å¤šè¡Œå¤šä¸ªå›¾ç‰‡ï¼ˆæ¯è¡Œ2ï½8ä¸ªå›¾ç‰‡ï¼‰-1"><a href="#å¤šè¡Œå¤šä¸ªå›¾ç‰‡ï¼ˆæ¯è¡Œ2ï½8ä¸ªå›¾ç‰‡ï¼‰-1" class="headerlink" title="å¤šè¡Œå¤šä¸ªå›¾ç‰‡ï¼ˆæ¯è¡Œ2ï½8ä¸ªå›¾ç‰‡ï¼‰"></a>å¤šè¡Œå¤šä¸ªå›¾ç‰‡ï¼ˆæ¯è¡Œ2ï½8ä¸ªå›¾ç‰‡ï¼‰</h2><div class="gallery stretch" col='8'>              <p><img src="https://pic2.zhimg.com/80/v2-bcb819edb98e081817066eb6b0e6a2ef_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-bcb819edb98e081817066eb6b0e6a2ef_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic2.zhimg.com/80/v2-c513cb0d2eff43b5391ea682f1ba07c6_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-c513cb0d2eff43b5391ea682f1ba07c6_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic2.zhimg.com/80/v2-d0fe3a2cc79628c6a017f0066d4dee63_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-d0fe3a2cc79628c6a017f0066d4dee63_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic4.zhimg.com/80/v2-f7d6c7021cff3e23d8481faec2048890_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic4.zhimg.com/80/v2-f7d6c7021cff3e23d8481faec2048890_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic4.zhimg.com/80/v2-d191b620ff97a55b634786528206002a_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic4.zhimg.com/80/v2-d191b620ff97a55b634786528206002a_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic2.zhimg.com/80/v2-bcb819edb98e081817066eb6b0e6a2ef_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-bcb819edb98e081817066eb6b0e6a2ef_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic2.zhimg.com/80/v2-c513cb0d2eff43b5391ea682f1ba07c6_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-c513cb0d2eff43b5391ea682f1ba07c6_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic2.zhimg.com/80/v2-d0fe3a2cc79628c6a017f0066d4dee63_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-d0fe3a2cc79628c6a017f0066d4dee63_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic4.zhimg.com/80/v2-f7d6c7021cff3e23d8481faec2048890_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic4.zhimg.com/80/v2-f7d6c7021cff3e23d8481faec2048890_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic4.zhimg.com/80/v2-d191b620ff97a55b634786528206002a_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic4.zhimg.com/80/v2-d191b620ff97a55b634786528206002a_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic2.zhimg.com/80/v2-c513cb0d2eff43b5391ea682f1ba07c6_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-c513cb0d2eff43b5391ea682f1ba07c6_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic2.zhimg.com/80/v2-d0fe3a2cc79628c6a017f0066d4dee63_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-d0fe3a2cc79628c6a017f0066d4dee63_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic4.zhimg.com/80/v2-f7d6c7021cff3e23d8481faec2048890_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic4.zhimg.com/80/v2-f7d6c7021cff3e23d8481faec2048890_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"></p>            </div><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -7"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -7" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><p>å¤šè¡Œå¤šä¸ªå›¾ç‰‡ï¼ˆæ¯è¡Œ2ï½8ä¸ªå›¾ç‰‡ï¼‰</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% gallery stretch, 8 %&#125;<span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-bcb819edb98e081817066eb6b0e6a2ef_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-c513cb0d2eff43b5391ea682f1ba07c6_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-d0fe3a2cc79628c6a017f0066d4dee63_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic4.zhimg.com/80/v2-f7d6c7021cff3e23d8481faec2048890_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic4.zhimg.com/80/v2-d191b620ff97a55b634786528206002a_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-bcb819edb98e081817066eb6b0e6a2ef_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-c513cb0d2eff43b5391ea682f1ba07c6_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-d0fe3a2cc79628c6a017f0066d4dee63_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic4.zhimg.com/80/v2-f7d6c7021cff3e23d8481faec2048890_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic4.zhimg.com/80/v2-d191b620ff97a55b634786528206002a_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-c513cb0d2eff43b5391ea682f1ba07c6_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-d0fe3a2cc79628c6a017f0066d4dee63_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic4.zhimg.com/80/v2-f7d6c7021cff3e23d8481faec2048890_1440w.jpg?source=1940ef5c</span>)</span>&#123;% endgallery %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç»„åˆä½¿ç”¨"><a href="#ç»„åˆä½¿ç”¨" class="headerlink" title="ç»„åˆä½¿ç”¨"></a>ç»„åˆä½¿ç”¨</h2><div class="gallery ">              <p><img src="https://pic2.zhimg.com/80/v2-bcb819edb98e081817066eb6b0e6a2ef_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-bcb819edb98e081817066eb6b0e6a2ef_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"></p>            </div><div class="gallery ">              <p><img src="https://pic2.zhimg.com/80/v2-bcb819edb98e081817066eb6b0e6a2ef_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-bcb819edb98e081817066eb6b0e6a2ef_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic2.zhimg.com/80/v2-c513cb0d2eff43b5391ea682f1ba07c6_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-c513cb0d2eff43b5391ea682f1ba07c6_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic2.zhimg.com/80/v2-c513cb0d2eff43b5391ea682f1ba07c6_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-c513cb0d2eff43b5391ea682f1ba07c6_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"></p>            </div><div class="gallery ">              <p><img src="https://pic2.zhimg.com/80/v2-bcb819edb98e081817066eb6b0e6a2ef_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-bcb819edb98e081817066eb6b0e6a2ef_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"><br><img src="https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å›¾ç‰‡æè¿°"></p>            </div><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -8"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -8" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% gallery %&#125;<span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-bcb819edb98e081817066eb6b0e6a2ef_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c</span>)</span>&#123;% endgallery %&#125;&#123;% gallery %&#125;<span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-bcb819edb98e081817066eb6b0e6a2ef_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-c513cb0d2eff43b5391ea682f1ba07c6_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-c513cb0d2eff43b5391ea682f1ba07c6_1440w.jpg?source=1940ef5c</span>)</span>&#123;% endgallery %&#125;&#123;% gallery %&#125;<span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-bcb819edb98e081817066eb6b0e6a2ef_1440w.jpg?source=1940ef5c</span>)</span><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡æè¿°</span>](<span class="token url">https://pic2.zhimg.com/80/v2-f1b467abef1caeb5537f399da4ddbc9d_1440w.jpg?source=1940ef5c</span>)</span>&#123;% endgallery %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 class="bamboo-h " id="galleryGroupå›¾ç‰‡">galleryGroupå›¾ç‰‡</h1><br/> <blockquote><p>æç¤º:ä½¿ç”¨è¯¥æ ‡ç­¾è¯·å…ˆå°†ä¸»é¢˜ä¸‹çš„_config.ymlä¸­çš„fancyboxè®¾ç½®ä¸ºtrue</p></blockquote><h2 id="galleryGroupå›¾ç‰‡ç¤ºä¾‹"><a href="#galleryGroupå›¾ç‰‡ç¤ºä¾‹" class="headerlink" title="galleryGroupå›¾ç‰‡ç¤ºä¾‹"></a>galleryGroupå›¾ç‰‡ç¤ºä¾‹</h2><div class="gallery-group-main">      <figure class="gallery-group">  <img class="gallery-group-img" src='https://pic1.zhimg.com/80/v2-23c3820e8abfb1cef689531af2dc6d09_1440w.jpg?source=1940ef5c' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">å£çº¸</div>  <p>æ”¶è—çš„ä¸€äº›å£çº¸</p>  <a href='/gallery/bizhi'></a>  </figcaption>  </figure>        <figure class="gallery-group">  <img class="gallery-group-img" src='https://pic1.zhimg.com/80/v2-8d542d68cbbf0e5f503da9e3f72b8447_1440w.jpg?source=1940ef5c' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">å¤å…¸å›¾ç‰‡</div>  <p>ä¸­å›½å¤å…¸å›¾ç‰‡</p>  <a href='/gallery/gudian'></a>  </figcaption>  </figure>        <figure class="gallery-group">  <img class="gallery-group-img" src='https://pic1.zhimg.com/80/v2-56164ef0695767475935c9e019c594ae_1440w.jpg?source=1940ef5c' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">é£æ™¯</div>  <p>é£æ™¯å›¾ç‰‡</p>  <a href='/gallery/fengjing'></a>  </figcaption>  </figure>  </div><h3 id="ä¸Šè¿°ç¤ºä¾‹ä»£ç "><a href="#ä¸Šè¿°ç¤ºä¾‹ä»£ç " class="headerlink" title="ä¸Šè¿°ç¤ºä¾‹ä»£ç "></a>ä¸Šè¿°ç¤ºä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gallery-group-main<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    &#123;% galleryGroup 'å£çº¸' 'æ”¶è—çš„ä¸€äº›å£çº¸' '/gallery/bizhi' https://pic1.zhimg.com/80/v2-23c3820e8abfb1cef689531af2dc6d09_1440w.jpg?source=1940ef5c %&#125;    &#123;% galleryGroup 'å¤å…¸å›¾ç‰‡' 'ä¸­å›½å¤å…¸å›¾ç‰‡' '/gallery/gudian' https://pic1.zhimg.com/80/v2-8d542d68cbbf0e5f503da9e3f72b8447_1440w.jpg?source=1940ef5c %&#125;    &#123;% galleryGroup 'é£æ™¯' 'é£æ™¯å›¾ç‰‡' '/gallery/fengjing' https://pic1.zhimg.com/80/v2-56164ef0695767475935c9e019c594ae_1440w.jpg?source=1940ef5c %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 class="bamboo-h " id="audioéŸ³é¢‘æ•ˆæœå±•ç¤º">audioéŸ³é¢‘æ•ˆæœå±•ç¤º</h1><br/><div class="audio"><audio controls preload><source src='http://qiniu.cunzhuang.top/%E5%85%AD%E5%93%B2%20-%20%E4%BD%A0%E7%9A%84%E5%BF%83%E6%98%AF%E5%90%A6%E4%B9%9F%E6%9C%89%E6%88%91%E7%9A%84%E5%90%8D.mp3' type='audio/mp3'>Your browser does not support the audio tag.</audio></div><h3 id="ä¸Šè¿°ç¤ºä¾‹ä»£ç -1"><a href="#ä¸Šè¿°ç¤ºä¾‹ä»£ç -1" class="headerlink" title="ä¸Šè¿°ç¤ºä¾‹ä»£ç "></a>ä¸Šè¿°ç¤ºä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% title h1, audioéŸ³é¢‘æ•ˆæœå±•ç¤º %&#125;&#123;% audio http://qiniu.cunzhuang.top/%E5%85%AD%E5%93%B2%20-%20%E4%BD%A0%E7%9A%84%E5%BF%83%E6%98%AF%E5%90%A6%E4%B9%9F%E6%9C%89%E6%88%91%E7%9A%84%E5%90%8D.mp3 %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h1 class="bamboo-h " id="videoæ¼”ç¤º">videoæ¼”ç¤º</h1><br/><p>100%å®½åº¦</p><div class="video"><video controls preload><source src='https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4' type='video/mp4'>Your browser does not support the video tag.</video></div><p>50%å®½åº¦</p><div class="videos" col='2'><div class="video"><video controls preload><source src='https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4' type='video/mp4'>Your browser does not support the video tag.</video></div></div><p>25%å®½åº¦</p><div class="videos" col='4'><div class="video"><video controls preload><source src='https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4' type='video/mp4'>Your browser does not support the video tag.</video></div></div><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -9"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -9" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% title h1, videoæ¼”ç¤º %&#125;100%å®½åº¦&#123;% video  https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4 %&#125;50%å®½åº¦&#123;% videos, 2 %&#125;&#123;% video  https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4 %&#125;&#123;% video  https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4 %&#125;&#123;% video  https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4 %&#125;&#123;% video  https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4 %&#125;&#123;% endvideos %&#125;25%å®½åº¦&#123;% videos, 4 %&#125;&#123;% video  https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4 %&#125;&#123;% video  https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4 %&#125;&#123;% video  https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4 %&#125;&#123;% video  https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4 %&#125;&#123;% video  https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4 %&#125;&#123;% video  https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4 %&#125;&#123;% video  https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4 %&#125;&#123;% video  https://assets.mixkit.co/videos/preview/mixkit-down-the-river-in-a-bamboo-canoe-6804-large.mp4 %&#125;&#123;% endvideos %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æœ¬ç«™ä»‹ç» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> markdown </tag>
            
            <tag> media </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸»é¢˜ä»‹ç»-githubä¹¦å†™åŠŸèƒ½</title>
      <link href="/post/ben-zhan-jie-shao/zhu-ti-jie-shao-github-shu-xie-gong-neng/"/>
      <url>/post/ben-zhan-jie-shao/zhu-ti-jie-shao-github-shu-xie-gong-neng/</url>
      
        <content type="html"><![CDATA[<h1 class="bamboo-h " id="Githubç”¨æˆ·å¡ç‰‡">Githubç”¨æˆ·å¡ç‰‡</h1><br/><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/jimyfengqi"><img src="https://github-readme-stats.vercel.app/api/?username=jimyfengqi&show_owner=true" class="lazyload placeholder" data-srcset="https://github-readme-stats.vercel.app/api/?username=jimyfengqi&show_owner=true" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></a><h3 id="ä¸Šè¿°ç¤ºä¾‹ä»£ç "><a href="#ä¸Šè¿°ç¤ºä¾‹ä»£ç " class="headerlink" title="ä¸Šè¿°ç¤ºä¾‹ä»£ç "></a>ä¸Šè¿°ç¤ºä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% ghcard jimyfengqi %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="è¡¨æ ¼ä¸­åŠ å…¥ç”¨æˆ·å¡ç‰‡"><a href="#è¡¨æ ¼ä¸­åŠ å…¥ç”¨æˆ·å¡ç‰‡" class="headerlink" title="è¡¨æ ¼ä¸­åŠ å…¥ç”¨æˆ·å¡ç‰‡"></a>è¡¨æ ¼ä¸­åŠ å…¥ç”¨æˆ·å¡ç‰‡</h2><table><thead><tr><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/jimyfengqi"><img src="https://github-readme-stats.vercel.app/api/?username=jimyfengqi&show_owner=true" class="lazyload placeholder" data-srcset="https://github-readme-stats.vercel.app/api/?username=jimyfengqi&show_owner=true" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></a></th><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/jimyfengqi"><img src="https://github-readme-stats.vercel.app/api/?username=jimyfengqi&theme=vue&show_owner=true" class="lazyload placeholder" data-srcset="https://github-readme-stats.vercel.app/api/?username=jimyfengqi&theme=vue&show_owner=true" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></a></th></tr></thead><tbody><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/jimyfengqi"><img src="https://github-readme-stats.vercel.app/api/?username=jimyfengqi&theme=buefy&show_owner=true" class="lazyload placeholder" data-srcset="https://github-readme-stats.vercel.app/api/?username=jimyfengqi&theme=buefy&show_owner=true" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/jimyfengqi"><img src="https://github-readme-stats.vercel.app/api/?username=jimyfengqi&theme=solarized-light&show_owner=true" class="lazyload placeholder" data-srcset="https://github-readme-stats.vercel.app/api/?username=jimyfengqi&theme=solarized-light&show_owner=true" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/jimyfengqi"><img src="https://github-readme-stats.vercel.app/api/?username=jimyfengqi&theme=onedark&show_owner=true" class="lazyload placeholder" data-srcset="https://github-readme-stats.vercel.app/api/?username=jimyfengqi&theme=onedark&show_owner=true" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/jimyfengqi"><img src="https://github-readme-stats.vercel.app/api/?username=jimyfengqi&theme=solarized-dark&show_owner=true" class="lazyload placeholder" data-srcset="https://github-readme-stats.vercel.app/api/?username=jimyfengqi&theme=solarized-dark&show_owner=true" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/jimyfengqi"><img src="https://github-readme-stats.vercel.app/api/?username=jimyfengqi&theme=algolia&show_owner=true" class="lazyload placeholder" data-srcset="https://github-readme-stats.vercel.app/api/?username=jimyfengqi&theme=algolia&show_owner=true" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/jimyfengqi"><img src="https://github-readme-stats.vercel.app/api/?username=jimyfengqi&theme=calm&show_owner=true" class="lazyload placeholder" data-srcset="https://github-readme-stats.vercel.app/api/?username=jimyfengqi&theme=calm&show_owner=true" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></a></td></tr></tbody></table><h3 id="ä¸Šè¿°ç¤ºä¾‹ä»£ç -1"><a href="#ä¸Šè¿°ç¤ºä¾‹ä»£ç -1" class="headerlink" title="ä¸Šè¿°ç¤ºä¾‹ä»£ç "></a>ä¸Šè¿°ç¤ºä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">| &#123;% ghcard jimyfengqi %&#125; | &#123;% ghcard jimyfengqi, theme=vue %&#125; || -- | -- || &#123;% ghcard jimyfengqi, theme=buefy %&#125; | &#123;% ghcard jimyfengqi, theme=solarized-light %&#125; || &#123;% ghcard jimyfengqi, theme=onedark %&#125; | &#123;% ghcard jimyfengqi, theme=solarized-dark %&#125; || &#123;% ghcard jimyfengqi, theme=algolia %&#125; | &#123;% ghcard jimyfengqi, theme=calm %&#125; |<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å•ä¸ªé¡¹ç›®å¡ç‰‡"><a href="#å•ä¸ªé¡¹ç›®å¡ç‰‡" class="headerlink" title="å•ä¸ªé¡¹ç›®å¡ç‰‡"></a>å•ä¸ªé¡¹ç›®å¡ç‰‡</h2><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/jimyfengqi/hexo-theme-bomboo"><img src="https://github-readme-stats.vercel.app/api/pin/?username=jimyfengqi&repo=hexo-theme-bomboo&show_owner=true" class="lazyload placeholder" data-srcset="https://github-readme-stats.vercel.app/api/pin/?username=jimyfengqi&repo=hexo-theme-bomboo&show_owner=true" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></a><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/jimyfengqi/hexo-theme-bomboo"><img src="https://github-readme-stats.vercel.app/api/pin/?username=jimyfengqi&repo=hexo-theme-bomboo&show_owner=true" class="lazyload placeholder" data-srcset="https://github-readme-stats.vercel.app/api/pin/?username=jimyfengqi&repo=hexo-theme-bomboo&show_owner=true" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></a><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/jimyfengqi/hexo-theme-bomboo"><img src="https://github-readme-stats.vercel.app/api/pin/?username=jimyfengqi&repo=hexo-theme-bomboo&show_owner=true" class="lazyload placeholder" data-srcset="https://github-readme-stats.vercel.app/api/pin/?username=jimyfengqi&repo=hexo-theme-bomboo&show_owner=true" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></a><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/jimyfengqi/hexo-theme-bomboo"><img src="https://github-readme-stats.vercel.app/api/pin/?username=jimyfengqi&repo=hexo-theme-bomboo&show_owner=true" class="lazyload placeholder" data-srcset="https://github-readme-stats.vercel.app/api/pin/?username=jimyfengqi&repo=hexo-theme-bomboo&show_owner=true" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></a><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç "><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç " class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% ghcard jimyfengqi/hexo-theme-bomboo %&#125;&#123;% ghcard jimyfengqi/hexo-theme-bomboo %&#125;&#123;% ghcard jimyfengqi/hexo-theme-bomboo %&#125;&#123;% ghcard jimyfengqi/hexo-theme-bomboo %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è¡¨æ ¼ä¸­åŠ å…¥å•ä¸ªé¡¹ç›®å¡ç‰‡"><a href="#è¡¨æ ¼ä¸­åŠ å…¥å•ä¸ªé¡¹ç›®å¡ç‰‡" class="headerlink" title="è¡¨æ ¼ä¸­åŠ å…¥å•ä¸ªé¡¹ç›®å¡ç‰‡"></a>è¡¨æ ¼ä¸­åŠ å…¥å•ä¸ªé¡¹ç›®å¡ç‰‡</h2><table><thead><tr><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/jimyfengqi/hexo-theme-bomboo"><img src="https://github-readme-stats.vercel.app/api/pin/?username=jimyfengqi&repo=hexo-theme-bomboo&show_owner=true" class="lazyload placeholder" data-srcset="https://github-readme-stats.vercel.app/api/pin/?username=jimyfengqi&repo=hexo-theme-bomboo&show_owner=true" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></a></th><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/jimyfengqi/hexo-theme-bomboo"><img src="https://github-readme-stats.vercel.app/api/pin/?username=jimyfengqi&repo=hexo-theme-bomboo&theme=vue&show_owner=true" class="lazyload placeholder" data-srcset="https://github-readme-stats.vercel.app/api/pin/?username=jimyfengqi&repo=hexo-theme-bomboo&theme=vue&show_owner=true" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></a></th></tr></thead><tbody><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/jimyfengqi/hexo-theme-bomboo"><img src="https://github-readme-stats.vercel.app/api/pin/?username=jimyfengqi&repo=hexo-theme-bomboo&theme=buefy&show_owner=true" class="lazyload placeholder" data-srcset="https://github-readme-stats.vercel.app/api/pin/?username=jimyfengqi&repo=hexo-theme-bomboo&theme=buefy&show_owner=true" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/jimyfengqi/hexo-theme-bomboo"><img src="https://github-readme-stats.vercel.app/api/pin/?username=jimyfengqi&repo=hexo-theme-bomboo&theme=solarized-light&show_owner=true" class="lazyload placeholder" data-srcset="https://github-readme-stats.vercel.app/api/pin/?username=jimyfengqi&repo=hexo-theme-bomboo&theme=solarized-light&show_owner=true" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/jimyfengqi/hexo-theme-bomboo"><img src="https://github-readme-stats.vercel.app/api/pin/?username=jimyfengqi&repo=hexo-theme-bomboo&theme=onedark&show_owner=true" class="lazyload placeholder" data-srcset="https://github-readme-stats.vercel.app/api/pin/?username=jimyfengqi&repo=hexo-theme-bomboo&theme=onedark&show_owner=true" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/jimyfengqi/hexo-theme-bomboo"><img src="https://github-readme-stats.vercel.app/api/pin/?username=jimyfengqi&repo=hexo-theme-bomboo&theme=solarized-dark&show_owner=true" class="lazyload placeholder" data-srcset="https://github-readme-stats.vercel.app/api/pin/?username=jimyfengqi&repo=hexo-theme-bomboo&theme=solarized-dark&show_owner=true" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/jimyfengqi/hexo-theme-bomboo"><img src="https://github-readme-stats.vercel.app/api/pin/?username=jimyfengqi&repo=hexo-theme-bomboo&theme=algolia&show_owner=true" class="lazyload placeholder" data-srcset="https://github-readme-stats.vercel.app/api/pin/?username=jimyfengqi&repo=hexo-theme-bomboo&theme=algolia&show_owner=true" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/jimyfengqi/hexo-theme-bomboo"><img src="https://github-readme-stats.vercel.app/api/pin/?username=jimyfengqi&repo=hexo-theme-bomboo&theme=calm&show_owner=true" class="lazyload placeholder" data-srcset="https://github-readme-stats.vercel.app/api/pin/?username=jimyfengqi&repo=hexo-theme-bomboo&theme=calm&show_owner=true" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></a></td></tr></tbody></table><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -1"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -1" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">| &#123;% ghcard jimyfengqi/hexo-theme-bomboo %&#125; | &#123;% ghcard jimyfengqi/hexo-theme-bomboo, theme=vue %&#125; || -- | -- || &#123;% ghcard jimyfengqi/hexo-theme-bomboo, theme=buefy %&#125; | &#123;% ghcard jimyfengqi/hexo-theme-bomboo, theme=solarized-light %&#125; || &#123;% ghcard jimyfengqi/hexo-theme-bomboo, theme=onedark %&#125; | &#123;% ghcard jimyfengqi/hexo-theme-bomboo, theme=solarized-dark %&#125; || &#123;% ghcard jimyfengqi/hexo-theme-bomboo, theme=algolia %&#125; | &#123;% ghcard jimyfengqi/hexo-theme-bomboo, theme=calm %&#125; |<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 class="bamboo-h " id="issues-sitesæ ‡ç­¾">issues-sitesæ ‡ç­¾</h1><br/><p>è¯¥æ ‡ç­¾ä¼šå»æ‹¿åˆ°æŸä¸ªrepoä»“åº“çš„issueå†…å®¹ï¼Œç”¨sitesæ ‡ç­¾çš„å½¢å¼æ˜¾ç¤ºå‡ºæ¥ï¼Œå¯ä»¥ç”¨åšç½‘ç«™çš„å‹é“¾åŠŸèƒ½<br>è¯¥æ ‡ç­¾å’Œissues-timelineæ ‡ç­¾éƒ½é€‚ç”¨äºgithubå’Œgitee</p><h2 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h2><p>issueé‡Œé¢éœ€è¦æœ‰JSONä»£ç å—ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>    <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>    <span class="token property">"avatar"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>    <span class="token property">"screenshot"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>    <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Githubå†™æ³•"><a href="#Githubå†™æ³•" class="headerlink" title="Githubå†™æ³•"></a>Githubå†™æ³•</h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% issues sites | api=https://api.github.com/repos/jimyfengqi/friends/issues?sort=updated&amp;state=open&amp;page=1&amp;per_page=100&amp;labels=active %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="Giteeå†™æ³•"><a href="#Giteeå†™æ³•" class="headerlink" title="Giteeå†™æ³•"></a>Giteeå†™æ³•</h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% issues sites | api=https://gitee.com/api/v5/repos/jimyfengqi/friends/issues?sort=updated&amp;state=open&amp;page=1&amp;per_page=100&amp;labels=active %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>yuang01: ç”¨æˆ·åï¼Œfriends: ä»“åº“å<br>ä¸Šä¾‹ä¸­çš„ labels=active å‚æ•°å¯ä»¥æ§åˆ¶é»˜è®¤çš„ issue ä¸æ˜¾ç¤ºï¼Œåªæœ‰è‡ªå·±å®¡æ ¸é€šè¿‡æ·»åŠ äº† active æ ‡ç­¾ä¹‹åæ‰ä¼šæ˜¾ç¤ºã€‚<br>å½“ç„¶labelä¹Ÿæ˜¯è‡ªå·±è®¾ç½®çš„ï¼Œä½ å¯ä»¥è‡ªå·±é€‰æ‹©ä¸€ä¸ªå¥½è¯†åˆ«çš„æ ‡ç­¾<br>ä¸Šè¿°ç¤ºä¾‹å¯¹åº”çš„ä»“åº“é“¾æ¥ï¼š<br><a href="https://github.com/jimyfengqi/friends">github</a><br><a href="https://gitee.com/jimyfengqi/friends">gitee</a></p><h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><p>å¯ä»¥ç‚¹å‡» <a href="https://jimyfengqi.github.io/friends/">å‹é“¾</a> æŸ¥çœ‹</p><h1 class="bamboo-h " id="issues-timelineæ ‡ç­¾">issues-timelineæ ‡ç­¾</h1><br/> <p>è¯¥æ ‡ç­¾ä¼šå»æ‹¿åˆ°æŸä¸ªrepoä»“åº“çš„issueå†…å®¹ï¼Œç”¨timelineæ ‡ç­¾çš„å½¢å¼æ˜¾ç¤ºå‡ºæ¥</p><h3 id="githubå†™æ³•"><a href="#githubå†™æ³•" class="headerlink" title="githubå†™æ³•"></a>githubå†™æ³•</h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% issues timeline | api=https://api.github.com/repos/jimyfengqi/hexo-theme-bomboo/issues?sort=updated&amp;state=closed&amp;page=1&amp;per_page=100 %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>api=xxx:jimyfengqiæ˜¯æˆ‘çš„githubç”¨æˆ·åï¼Œhexo-theme-bombooæ˜¯æˆ‘çš„ä»“åº“åï¼Œstate=closedï¼Œè¡¨ç¤ºæ‹¿åˆ°çŠ¶æ€ä¸ºcloseçš„issueï¼Œæ ¹æ®è‡ªå·±å®é™…æƒ…å†µæ›´æ”¹</code></pre><h3 id="Giteeå†™æ³•-1"><a href="#Giteeå†™æ³•-1" class="headerlink" title="Giteeå†™æ³•"></a>Giteeå†™æ³•</h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% issues timeline | api=https://gitee.com/api/v5/repos/jimyfengqi/friends/issues %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>api=xxx:jimyfengqiæ˜¯æˆ‘çš„giteeç”¨æˆ·åï¼Œfriendsæ˜¯æˆ‘giteeçš„ä»“åº“åï¼Œå…¶ä»–å‚æ•°è¯·è§æ–‡æ¡£</code></pre><h2 id="issue-api"><a href="#issue-api" class="headerlink" title="issue api"></a>issue api</h2><p><a href="https://docs.github.com/cn/rest/overview/resources-in-the-rest-api">githubçš„å¼€æ”¾api</a><br><a href="https://gitee.com/api/v5/swagger#/getV5ReposOwnerRepoIssues">giteeçš„å¼€æ”¾api</a></p><h2 id="repoä»“åº“æ•ˆæœ"><a href="#repoä»“åº“æ•ˆæœ" class="headerlink" title="repoä»“åº“æ•ˆæœ"></a>repoä»“åº“æ•ˆæœ</h2><p>ä¸‹é¢çš„æ•ˆæœæ˜¯æ¥è‡ªäºè¿™è¿™ä¸¤ä¸ªä»“åº“çš„issue</p><p>hexo-theme-bomboo (Github)</p><p><a href="https://github.com/jimyfengqi/hexo-theme-bomboo/issues?q=is:issue+is:closed+sort:updated-desc">https://github.com/jimyfengqi/hexo-theme-bomboo/issues?q=is%3Aissue+is%3Aclosed+sort%3Aupdated-desc</a></p><p>friends (Gitee)</p><p><a href="https://gitee.com/jimyfengqi/friends/issues">https://gitee.com/jimyfengqi/friends/issues</a></p><h3 id="Githubæ•ˆæœ-example"><a href="#Githubæ•ˆæœ-example" class="headerlink" title="Githubæ•ˆæœ(example)"></a>Githubæ•ˆæœ(example)</h3><div class="issues-api timeline"api="https://api.github.com/repos/jimyfengqi/hexo-theme-bomboo/issues?sort=updated&state=closed&page=1&per_page=100"></div><h3 id="Giteeæ•ˆæœ-example"><a href="#Giteeæ•ˆæœ-example" class="headerlink" title="Giteeæ•ˆæœ(example)"></a>Giteeæ•ˆæœ(example)</h3><div class="issues-api timeline"api="https://gitee.com/api/v5/repos/jimyfengqi/friends/issues"></div>]]></content>
      
      
      <categories>
          
          <category> æœ¬ç«™ä»‹ç» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸»é¢˜ä»‹ç»-æ–‡æ¡£ä¹¦å†™åŠŸèƒ½</title>
      <link href="/post/ben-zhan-jie-shao/zhu-ti-jie-shao-wen-dang-shu-xie-gong-neng/"/>
      <url>/post/ben-zhan-jie-shao/zhu-ti-jie-shao-wen-dang-shu-xie-gong-neng/</url>
      
        <content type="html"><![CDATA[<h1 class="bamboo-h-b" id="æˆ‘æ˜¯æ ‡é¢˜ï¼Œ1çº§æ ‡é¢˜" style="color:!important">æˆ‘æ˜¯æ ‡é¢˜ï¼Œ1çº§æ ‡é¢˜</h1><div></div><h2 class="bamboo-h-b" id="æˆ‘æ˜¯æ ‡é¢˜ï¼Œ 2çº§æ ‡é¢˜" style="color:#895546!important">æˆ‘æ˜¯æ ‡é¢˜ï¼Œ 2çº§æ ‡é¢˜</h2><div></div><h3 class="bamboo-h-b" id="æˆ‘æ˜¯æ ‡é¢˜ï¼Œ 3çº§æ ‡é¢˜" style="color:red!important">æˆ‘æ˜¯æ ‡é¢˜ï¼Œ 3çº§æ ‡é¢˜</h3><div></div><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç "><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç " class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% titleB h1, æˆ‘æ˜¯æ ‡é¢˜ï¼Œ 1çº§æ ‡é¢˜ %&#125;&#123;% titleB h2, æˆ‘æ˜¯æ ‡é¢˜ï¼Œ 2çº§æ ‡é¢˜, #895546 %&#125;&#123;% titleB h3, æˆ‘æ˜¯æ ‡é¢˜ï¼Œ 3çº§æ ‡é¢˜, red %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h1 class="bamboo-h " id="æ®µè½æ–‡æœ¬æ ‡ç­¾æ¼”ç¤ºæ•ˆæœ">æ®µè½æ–‡æœ¬æ ‡ç­¾æ¼”ç¤ºæ•ˆæœ</h1><br/><p class='p yellow'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š</p><p class='p '>æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š</p><p class='p primary'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š</p><p class='p info'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š</p><p class='p warning'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š</p><p class='p danger'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š</p><p class='p success'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š</p><p class='p red'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š</p><p class='p green'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š</p><p class='p blue'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š</p><p class='p center'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š</p><p class='p center large danger'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š</p><p class='p center large info'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š</p><p class='p center small'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š</p><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -1"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -1" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% p yellow, æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š %&#125;&#123;% p, æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š %&#125;&#123;% p primary, æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š %&#125;&#123;% p info, æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š %&#125;&#123;% p warning, æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š %&#125;&#123;% p danger, æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š %&#125;&#123;% p success, æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š %&#125;&#123;% p red, æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š %&#125;&#123;% p green, æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š %&#125;&#123;% p blue, æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š %&#125;&#123;% p center, æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š %&#125;&#123;% p center large danger, æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š %&#125;&#123;% p center large info, æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š %&#125;&#123;% p center small, æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®å¤§è¨è¾¾æ‰€å¤šæ’’å¤šæ’’å¤šæ’’å¤§å¤šå¤šæ’’å¤šæ’’å¤šæ’’å¤§æ‰€å¤šæ’’å¤§å¤š %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 class="bamboo-h " id="æ–‡æœ¬é«˜äº®æ ‡ç­¾æ¼”ç¤ºæ•ˆæœ">æ–‡æœ¬é«˜äº®æ ‡ç­¾æ¼”ç¤ºæ•ˆæœ</h1><br/><p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—<span class='pbg yellow'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®</span>ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜<br>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—<span class='pbg '>æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®</span>ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜<br>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—<span class='pbg info'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®</span>ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜<br>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—<span class='pbg warning'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®</span>ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜<br>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—<span class='pbg danger'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®</span>ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜<br>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—<span class='pbg success'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®</span>ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜<br>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—<span class='pbg red'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®</span>ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜<br>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—<span class='pbg green'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®</span>ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜<br>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—<span class='pbg blue'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®</span>ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜<br>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—<span class='pbg cyan'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº®</span>ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜</p><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -2"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -2" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—&#123;% pbg yellow, æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº® %&#125;ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—&#123;% pbg, æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº® %&#125;ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—&#123;% pbg info, æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº® %&#125;ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—&#123;% pbg warning, æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº® %&#125;ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—&#123;% pbg danger, æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº® %&#125;ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—&#123;% pbg success, æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº® %&#125;ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—&#123;% pbg red, æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº® %&#125;ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—&#123;% pbg green, æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº® %&#125;ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜ è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—&#123;% pbg blue, æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº® %&#125;ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—&#123;% pbg cyan, æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬é«˜äº® %&#125;ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 class="bamboo-h " id="æ–‡å­—é¢œè‰²æ ‡ç­¾æ¼”ç¤ºæ•ˆæœ">æ–‡å­—é¢œè‰²æ ‡ç­¾æ¼”ç¤ºæ•ˆæœ</h1><br/><p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—<span class='p yellow'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡å­—é«˜äº®</span>ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜<br>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—<span class='p '>æˆ‘æ˜¯ä¸€ä¸ªæ–‡å­—é«˜äº®</span>ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜<br>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—<span class='p primary'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡å­—é«˜äº®</span>ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜<br>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—<span class='p info'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡å­—é«˜äº®</span>ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜<br>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—<span class='p warning'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡å­—é«˜äº®</span>ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜<br>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—<span class='p danger'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡å­—é«˜äº®</span>ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜<br>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—<span class='p success'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡å­—é«˜äº®</span>ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜<br>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—<span class='p red'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡å­—é«˜äº®</span>ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜<br>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—<span class='p green'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡å­—é«˜äº®</span>ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜<br>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—<span class='p blue'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡å­—é«˜äº®</span>ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜</p><span class='p center green'>æˆ‘æ˜¯ä¸€ä¸ªå±…ä¸­æ–‡å­—é«˜äº®</span><p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—<span class='p large'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡å­—é«˜äº®</span>ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜<br>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—<span class='p small danger'>æˆ‘æ˜¯ä¸€ä¸ªæ–‡å­—é«˜äº®</span>ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜</p><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -3"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -3" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—&#123;% span yellow, æˆ‘æ˜¯ä¸€ä¸ªæ–‡å­—é«˜äº® %&#125;ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—&#123;% span, æˆ‘æ˜¯ä¸€ä¸ªæ–‡å­—é«˜äº® %&#125;ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—&#123;% span primary, æˆ‘æ˜¯ä¸€ä¸ªæ–‡å­—é«˜äº® %&#125;ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—&#123;% span info, æˆ‘æ˜¯ä¸€ä¸ªæ–‡å­—é«˜äº® %&#125;ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—&#123;% span warning, æˆ‘æ˜¯ä¸€ä¸ªæ–‡å­—é«˜äº® %&#125;ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—&#123;% span danger, æˆ‘æ˜¯ä¸€ä¸ªæ–‡å­—é«˜äº® %&#125;ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—&#123;% span success, æˆ‘æ˜¯ä¸€ä¸ªæ–‡å­—é«˜äº® %&#125;ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—&#123;% span red, æˆ‘æ˜¯ä¸€ä¸ªæ–‡å­—é«˜äº® %&#125;ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—&#123;% span green, æˆ‘æ˜¯ä¸€ä¸ªæ–‡å­—é«˜äº® %&#125;ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—&#123;% span blue, æˆ‘æ˜¯ä¸€ä¸ªæ–‡å­—é«˜äº® %&#125;ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜&#123;% span center green, æˆ‘æ˜¯ä¸€ä¸ªå±…ä¸­æ–‡å­—é«˜äº® %&#125;è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—&#123;% span large, æˆ‘æ˜¯ä¸€ä¸ªæ–‡å­—é«˜äº® %&#125;ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡å­—&#123;% span small danger, æˆ‘æ˜¯ä¸€ä¸ªæ–‡å­—é«˜äº® %&#125;ï¼Œå”±ç€æˆ‘ä»¬å¿ƒè‚ çš„æ›²æŠ˜<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 class="bamboo-h " id="Textæ–‡æœ¬æ ·å¼æ ‡ç­¾æ¼”ç¤º">Textæ–‡æœ¬æ ·å¼æ ‡ç­¾æ¼”ç¤º</h1><br/><p>å¸¦ <u>ä¸‹åˆ’çº¿</u> çš„æ–‡æœ¬</p><p>å¸¦ <emp>ç€é‡å·</emp> çš„æ–‡æœ¬</p><p>å¸¦ <wavy>æ³¢æµªçº¿</wavy> çš„æ–‡æœ¬</p><p>å¸¦ <del>åˆ é™¤çº¿</del> çš„æ–‡æœ¬</p><p>é”®ç›˜æ ·å¼çš„æ–‡æœ¬ <kbd>command</kbd> + <kbd>D</kbd></p><p>å¯†ç æ ·å¼çš„æ–‡æœ¬ï¼š<psw>è¿™é‡Œæ²¡æœ‰éªŒè¯ç </psw></p><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -4"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -4" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% title h2, Textæ–‡æœ¬æ ·å¼æ ‡ç­¾æ¼”ç¤º %&#125;å¸¦ &#123;% u ä¸‹åˆ’çº¿ %&#125; çš„æ–‡æœ¬å¸¦ &#123;% emp ç€é‡å· %&#125; çš„æ–‡æœ¬å¸¦ &#123;% wavy æ³¢æµªçº¿ %&#125; çš„æ–‡æœ¬å¸¦ &#123;% del åˆ é™¤çº¿ %&#125; çš„æ–‡æœ¬é”®ç›˜æ ·å¼çš„æ–‡æœ¬ &#123;% kbd command %&#125; + &#123;% kbd D %&#125;å¯†ç æ ·å¼çš„æ–‡æœ¬ï¼š&#123;% psw è¿™é‡Œæ²¡æœ‰éªŒè¯ç  %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 class="bamboo-h " id="Noteæ ‡ç­¾æ¼”ç¤ºæ•ˆæœ">Noteæ ‡ç­¾æ¼”ç¤ºæ•ˆæœ</h1><br/><blockquote><p>markdowné»˜è®¤å†™æ³•ï¼Œå·¦è¾¹æ¡†é¢œè‰²ï¼Œéšç€ä¸»é¢˜è‰²æ”¹å˜</p></blockquote><div class="note "><p>æˆ‘æœ‰ä¸€åªå°æ¯›é©´ï¼Œæˆ‘ä»æ¥éƒ½ä¸éª‘ã€‚</p></div><div class="note quote"><p>é€‚åˆå¼•ç”¨ä¸€æ®µè¯</p></div><div class="note warning"><p>è¿™æ˜¯ä¸€ä¸ªè­¦å‘Š</p></div><div class="note danger"><p>è¿™æ˜¯ä¸€ä¸ªé”™è¯¯</p></div><div class="note success"><p>è¿™æ˜¯ä¸€ä¸ªæˆåŠŸ</p></div><div class="note info"><p>è¿™æ˜¯ä¸€ä¸ªä¿¡æ¯</p></div><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -5"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -5" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token blockquote punctuation">></span> markdowné»˜è®¤å†™æ³•ï¼Œå·¦è¾¹æ¡†é¢œè‰²ï¼Œéšç€ä¸»é¢˜è‰²æ”¹å˜&#123;% note, æˆ‘æœ‰ä¸€åªå°æ¯›é©´ï¼Œæˆ‘ä»æ¥éƒ½ä¸éª‘ã€‚ %&#125;&#123;% note quote, é€‚åˆå¼•ç”¨ä¸€æ®µè¯ %&#125;&#123;% note warning, è¿™æ˜¯ä¸€ä¸ªè­¦å‘Š %&#125;&#123;% note danger, è¿™æ˜¯ä¸€ä¸ªé”™è¯¯ %&#125;&#123;% note success, è¿™æ˜¯ä¸€ä¸ªæˆåŠŸ %&#125;&#123;% note info, è¿™æ˜¯ä¸€ä¸ªä¿¡æ¯ %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 class="bamboo-h " id="NoteBlockæ ‡ç­¾æ¼”ç¤ºæ•ˆæœ">NoteBlockæ ‡ç­¾æ¼”ç¤ºæ•ˆæœ</h1><br/><div class="note base"><p><strong>æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰</strong></p><p>asdsd</p></div><div class="note quote"><p><strong>æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰</strong></p><p>asdsd</p></div><div class="note warning"><p><strong>æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰</strong></p><p>asdsd</p></div><div class="note success"><p><strong>æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰</strong></p><p>asdsd</p></div><div class="note danger"><p><strong>æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰</strong></p><p>asdsd</p></div><div class="note info"><p><strong>æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰</strong></p><p>asdsd</p></div><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -6"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -6" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% noteblock base, æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰ %&#125;    asdsd&#123;% endnoteblock %&#125;&#123;% noteblock quote, æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰ %&#125;    asdsd&#123;% endnoteblock %&#125;&#123;% noteblock warning, æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰ %&#125;    asdsd&#123;% endnoteblock %&#125;&#123;% noteblock success, æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰ %&#125;    asdsd&#123;% endnoteblock %&#125;&#123;% noteblock danger, æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰ %&#125;    asdsd&#123;% endnoteblock %&#125;&#123;% noteblock info, æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰ %&#125;    asdsd&#123;% endnoteblock %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 class="bamboo-h " id="è¿›åº¦æ¡ç¤ºä¾‹">è¿›åº¦æ¡ç¤ºä¾‹</h1><br/> <blockquote><p>è¯¥æ ‡ç­¾é€‚ç”¨ç‰ˆæœ¬ä¸º1.8.1åŠä»¥ä¸Š</p></blockquote><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-danger"  style="width: 70%" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æµ‹è¯•</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-info"  style="width: 60%" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æµ‹è¯•</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-success"  style="width: 60%" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æµ‹è¯•</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-warning"  style="width: 60%" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æµ‹è¯•</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-primary"  style="width: 60%" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æµ‹è¯•</p></div></div><p>è‡ªå®šä¹‰é¢œè‰²(Custom colors)</p><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped" style="background-color: #000!important; width: 60%" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æµ‹è¯•</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped" style="background-color: #2f54eb!important; width: 60%" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æµ‹è¯•</p></div></div><h3 id="ä¸Šè¿°ç¤ºä¾‹ä»£ç "><a href="#ä¸Šè¿°ç¤ºä¾‹ä»£ç " class="headerlink" title="ä¸Šè¿°ç¤ºä¾‹ä»£ç "></a>ä¸Šè¿°ç¤ºä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% progress 70 danger è¿›åº¦æ¡æµ‹è¯• %&#125;&#123;% progress 60 info è¿›åº¦æ¡æµ‹è¯• %&#125;&#123;% progress 60 success è¿›åº¦æ¡æµ‹è¯• %&#125;&#123;% progress 60 warning è¿›åº¦æ¡æµ‹è¯• %&#125;&#123;% progress 60 primary è¿›åº¦æ¡æµ‹è¯• %&#125;è‡ªå®šä¹‰é¢œè‰²(Custom colors)&#123;% progress 60 #000 è¿›åº¦æ¡æµ‹è¯• %&#125;&#123;% progress 60 #2f54eb è¿›åº¦æ¡æµ‹è¯• %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 class="bamboo-h " id="Linkæ•ˆæœ">Linkæ•ˆæœ</h1><br/><div class="tagLink"><a class="link-card" title="ç‚¹å‡»è·³è½¬åˆ°ç™¾åº¦" href="http://www.baidu.com"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg" class="lazyload placeholder" data-srcset="https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="right"><p class="text">ç‚¹å‡»è·³è½¬åˆ°ç™¾åº¦</p><p class="url">http://www.baidu.com</p></div></a></div><div class="tagLink"><a class="link-card" title="ç‚¹å‡»è·³è½¬åˆ°ç™¾åº¦" href="http://www.baidu.com"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg" class="lazyload placeholder" data-srcset="https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="right"><p class="text">ç‚¹å‡»è·³è½¬åˆ°ç™¾åº¦</p><p class="url">http://www.baidu.com</p></div></a></div><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -7"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -7" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% link ç‚¹å‡»è·³è½¬åˆ°ç™¾åº¦, http://www.baidu.com, https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg %&#125;&#123;% link ç‚¹å‡»è·³è½¬åˆ°ç™¾åº¦, http://www.baidu.com, https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="å¤šè¡Œé“¾æ¥"><a href="#å¤šè¡Œé“¾æ¥" class="headerlink" title="å¤šè¡Œé“¾æ¥"></a>å¤šè¡Œé“¾æ¥</h2><div class="link-group"><div class="tagLink"><a class="link-card" title="ç‚¹å‡»è·³è½¬åˆ°ç™¾åº¦" href="http://www.baidu.com"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg" class="lazyload placeholder" data-srcset="https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="right"><p class="text">ç‚¹å‡»è·³è½¬åˆ°ç™¾åº¦</p><p class="url">http://www.baidu.com</p></div></a></div><div class="tagLink"><a class="link-card" title="ç‚¹å‡»è·³è½¬åˆ°ç™¾åº¦" href="http://www.baidu.com"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg" class="lazyload placeholder" data-srcset="https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="right"><p class="text">ç‚¹å‡»è·³è½¬åˆ°ç™¾åº¦</p><p class="url">http://www.baidu.com</p></div></a></div><div class="tagLink"><a class="link-card" title="ç‚¹å‡»è·³è½¬åˆ°ç™¾åº¦" href="http://www.baidu.com"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg" class="lazyload placeholder" data-srcset="https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="right"><p class="text">ç‚¹å‡»è·³è½¬åˆ°ç™¾åº¦</p><p class="url">http://www.baidu.com</p></div></a></div><div class="tagLink"><a class="link-card" title="ç‚¹å‡»è·³è½¬åˆ°ç™¾åº¦" href="http://www.baidu.com"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg" class="lazyload placeholder" data-srcset="https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="right"><p class="text">ç‚¹å‡»è·³è½¬åˆ°ç™¾åº¦</p><p class="url">http://www.baidu.com</p></div></a></div></div><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -8"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -8" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% linkgroup %&#125;&#123;% link ç‚¹å‡»è·³è½¬åˆ°ç™¾åº¦, http://www.baidu.com, https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg %&#125;&#123;% link ç‚¹å‡»è·³è½¬åˆ°ç™¾åº¦, http://www.baidu.com, https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg %&#125;&#123;% link ç‚¹å‡»è·³è½¬åˆ°ç™¾åº¦, http://www.baidu.com, https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg %&#125;&#123;% link ç‚¹å‡»è·³è½¬åˆ°ç™¾åº¦, http://www.baidu.com, https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg %&#125;&#123;% endlinkgroup %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 class="bamboo-h " id="åœ†å½¢è¿›åº¦æ¡ç¤ºä¾‹">åœ†å½¢è¿›åº¦æ¡ç¤ºä¾‹</h1><br/> <blockquote><p>è¯¥æ ‡ç­¾é€‚ç”¨ç‰ˆæœ¬ä¸º2.0.7+åŠä»¥ä¸Š</p></blockquote>    <div class="bamboo-circle" style="height: 136px;">      <svg width="136" height="136" viewBox="0 0 272 272">        <path d="M 136,136 m 0,-130    a 130,130 0 1 1 0,260    a 130,130 0 1 1 0,-260" stroke="#f3f3f3" stroke-width="12" fill-opacity="0"></path>        <path d="M 136,136 m 0,-130    a 130,130 0 1 1 0,260    a 130,130 0 1 1 0,-260" stroke-linecap="round" stroke="#f66" stroke-width="12" fill-opacity="0" style="stroke-dasharray: 816.8140899333462px 816.8140899333462px; stroke-dashoffset: 245.04422698000383px; transition:stroke-dashoffset 0.6s ease 0s, stroke 0.6s ease;"></path>      </svg>      <div class="bamboo-circle-content bamboo-circle-danger">        <p>è¿›åº¦æ¡æµ‹è¯•</p>      </div>    </div>    <div class="bamboo-circle" style="height: 136px;">      <svg width="136" height="136" viewBox="0 0 272 272">        <path d="M 136,136 m 0,-130    a 130,130 0 1 1 0,260    a 130,130 0 1 1 0,-260" stroke="#f3f3f3" stroke-width="12" fill-opacity="0"></path>        <path d="M 136,136 m 0,-130    a 130,130 0 1 1 0,260    a 130,130 0 1 1 0,-260" stroke-linecap="round" stroke="#409eff" stroke-width="12" fill-opacity="0" style="stroke-dasharray: 816.8140899333462px 816.8140899333462px; stroke-dashoffset: 163.36281798666926px; transition:stroke-dashoffset 0.6s ease 0s, stroke 0.6s ease;"></path>      </svg>      <div class="bamboo-circle-content bamboo-circle-info">        <p>è¿›åº¦æ¡æµ‹è¯•</p>      </div>    </div>    <div class="bamboo-circle" style="height: 136px;">      <svg width="136" height="136" viewBox="0 0 272 272">        <path d="M 136,136 m 0,-130    a 130,130 0 1 1 0,260    a 130,130 0 1 1 0,-260" stroke="#f3f3f3" stroke-width="12" fill-opacity="0"></path>        <path d="M 136,136 m 0,-130    a 130,130 0 1 1 0,260    a 130,130 0 1 1 0,-260" stroke-linecap="round" stroke="#67c23a" stroke-width="12" fill-opacity="0" style="stroke-dasharray: 816.8140899333462px 816.8140899333462px; stroke-dashoffset: 326.7256359733385px; transition:stroke-dashoffset 0.6s ease 0s, stroke 0.6s ease;"></path>      </svg>      <div class="bamboo-circle-content bamboo-circle-success">        <p>è¿›åº¦æ¡æµ‹è¯•</p>      </div>    </div>    <div class="bamboo-circle" style="height: 136px;">      <svg width="136" height="136" viewBox="0 0 272 272">        <path d="M 136,136 m 0,-130    a 130,130 0 1 1 0,260    a 130,130 0 1 1 0,-260" stroke="#f3f3f3" stroke-width="12" fill-opacity="0"></path>        <path d="M 136,136 m 0,-130    a 130,130 0 1 1 0,260    a 130,130 0 1 1 0,-260" stroke-linecap="round" stroke="#e6a23c" stroke-width="12" fill-opacity="0" style="stroke-dasharray: 816.8140899333462px 816.8140899333462px; stroke-dashoffset: 408.4070449666731px; transition:stroke-dashoffset 0.6s ease 0s, stroke 0.6s ease;"></path>      </svg>      <div class="bamboo-circle-content bamboo-circle-warning">        <p>è¿›åº¦æ¡æµ‹è¯•</p>      </div>    </div>    <div class="bamboo-circle" style="height: 136px;">      <svg width="136" height="136" viewBox="0 0 272 272">        <path d="M 136,136 m 0,-130    a 130,130 0 1 1 0,260    a 130,130 0 1 1 0,-260" stroke="#f3f3f3" stroke-width="12" fill-opacity="0"></path>        <path d="M 136,136 m 0,-130    a 130,130 0 1 1 0,260    a 130,130 0 1 1 0,-260" stroke-linecap="round" stroke="#42b983" stroke-width="12" fill-opacity="0" style="stroke-dasharray: 816.8140899333462px 816.8140899333462px; stroke-dashoffset: 81.68140899333463px; transition:stroke-dashoffset 0.6s ease 0s, stroke 0.6s ease;"></path>      </svg>      <div class="bamboo-circle-content bamboo-circle-primary">        <p>è¿›åº¦æ¡æµ‹è¯•</p>      </div>    </div><p>è‡ªå®šä¹‰é¢œè‰²(Custom colors)</p>    <div class="bamboo-circle" style="height: 136px;">      <svg width="136" height="136" viewBox="0 0 272 272">        <path d="M 136,136 m 0,-130    a 130,130 0 1 1 0,260    a 130,130 0 1 1 0,-260" stroke="#f3f3f3" stroke-width="12" fill-opacity="0"></path>        <path d="M 136,136 m 0,-130    a 130,130 0 1 1 0,260    a 130,130 0 1 1 0,-260" stroke-linecap="round" stroke="#12e9e9" stroke-width="12" fill-opacity="0" style="stroke-dasharray: 816.8140899333462px 816.8140899333462px; stroke-dashoffset: 245.04422698000383px; transition:stroke-dashoffset 0.6s ease 0s, stroke 0.6s ease;"></path>      </svg>      <div class="bamboo-circle-content bamboo-circle-#12e9e9">        <p>70%</p>      </div>    </div>    <div class="bamboo-circle" style="height: 136px;">      <svg width="136" height="136" viewBox="0 0 272 272">        <path d="M 136,136 m 0,-130    a 130,130 0 1 1 0,260    a 130,130 0 1 1 0,-260" stroke="#f3f3f3" stroke-width="12" fill-opacity="0"></path>        <path d="M 136,136 m 0,-130    a 130,130 0 1 1 0,260    a 130,130 0 1 1 0,-260" stroke-linecap="round" stroke="skyblue" stroke-width="12" fill-opacity="0" style="stroke-dasharray: 816.8140899333462px 816.8140899333462px; stroke-dashoffset: 245.04422698000383px; transition:stroke-dashoffset 0.6s ease 0s, stroke 0.6s ease;"></path>      </svg>      <div class="bamboo-circle-content bamboo-circle-skyblue">        <p>70%</p>      </div>    </div><h3 id="ä¸Šè¿°ç¤ºä¾‹ä»£ç -1"><a href="#ä¸Šè¿°ç¤ºä¾‹ä»£ç -1" class="headerlink" title="ä¸Šè¿°ç¤ºä¾‹ä»£ç "></a>ä¸Šè¿°ç¤ºä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% progressCircle 70 danger è¿›åº¦æ¡æµ‹è¯• %&#125;&#123;% progressCircle 80 info è¿›åº¦æ¡æµ‹è¯• %&#125;&#123;% progressCircle 60 success è¿›åº¦æ¡æµ‹è¯• %&#125;&#123;% progressCircle 50 warning è¿›åº¦æ¡æµ‹è¯• %&#125;&#123;% progressCircle 90 primary è¿›åº¦æ¡æµ‹è¯• %&#125;è‡ªå®šä¹‰é¢œè‰²(Custom colors)&#123;% progressCircle 70 #12e9e9 70% %&#125;&#123;% progressCircle 70 skyblue 70% %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 class="bamboo-h " id="æŒ‰é’®">æŒ‰é’®</h1><br/> <h2 id="èå…¥æ®µè½ä¸­æŒ‰é’®"><a href="#èå…¥æ®µè½ä¸­æŒ‰é’®" class="headerlink" title="èå…¥æ®µè½ä¸­æŒ‰é’®"></a>èå…¥æ®µè½ä¸­æŒ‰é’®</h2><p>ä¸è®¾ç½®ä»»ä½•å‚æ•°çš„ <span class='btn'><a class="button" href='/' title='æŒ‰é’®'>æŒ‰é’®</a></span> é€‚åˆèå…¥æ®µè½ä¸­ã€‚</p><p>ä¸è®¾ç½®ä»»ä½•å‚æ•°çš„ <span class='btn warning'><a class="button" href='/' title='æŒ‰é’®'>æŒ‰é’®</a></span> é€‚åˆèå…¥æ®µè½ä¸­ã€‚</p><p>ä¸è®¾ç½®ä»»ä½•å‚æ•°çš„ <span class='btn info'><a class="button" href='/' title='æŒ‰é’®'>æŒ‰é’®</a></span> é€‚åˆèå…¥æ®µè½ä¸­ã€‚</p><p>ä¸è®¾ç½®ä»»ä½•å‚æ•°çš„ <span class='btn success'><a class="button" href='/' title='æŒ‰é’®'>æŒ‰é’®</a></span> é€‚åˆèå…¥æ®µè½ä¸­ã€‚</p><p>ä¸è®¾ç½®ä»»ä½•å‚æ•°çš„ <span class='btn danger'><a class="button" href='/' title='æŒ‰é’®'>æŒ‰é’®</a></span> é€‚åˆèå…¥æ®µè½ä¸­ã€‚</p><h3 id="ä¸Šè¿°å®ä¾‹æºç "><a href="#ä¸Šè¿°å®ä¾‹æºç " class="headerlink" title="ä¸Šè¿°å®ä¾‹æºç "></a>ä¸Šè¿°å®ä¾‹æºç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">ä¸è®¾ç½®ä»»ä½•å‚æ•°çš„ &#123;% btn æŒ‰é’®, / %&#125; é€‚åˆèå…¥æ®µè½ä¸­ã€‚ä¸è®¾ç½®ä»»ä½•å‚æ•°çš„ &#123;% btn warning, æŒ‰é’®, / %&#125; é€‚åˆèå…¥æ®µè½ä¸­ã€‚ä¸è®¾ç½®ä»»ä½•å‚æ•°çš„ &#123;% btn info, æŒ‰é’®, / %&#125; é€‚åˆèå…¥æ®µè½ä¸­ã€‚ä¸è®¾ç½®ä»»ä½•å‚æ•°çš„ &#123;% btn success, æŒ‰é’®, / %&#125; é€‚åˆèå…¥æ®µè½ä¸­ã€‚ä¸è®¾ç½®ä»»ä½•å‚æ•°çš„ &#123;% btn danger, æŒ‰é’®, / %&#125; é€‚åˆèå…¥æ®µè½ä¸­ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç©ºå¿ƒå’Œå®å¿ƒæŒ‰é’®"><a href="#ç©ºå¿ƒå’Œå®å¿ƒæŒ‰é’®" class="headerlink" title="ç©ºå¿ƒå’Œå®å¿ƒæŒ‰é’®"></a>ç©ºå¿ƒå’Œå®å¿ƒæŒ‰é’®</h2><span class='btn hollow'><a class="button" href='https://baidu.com' title='ç¤ºä¾‹åšå®¢'><i class='fab fa-qq'></i>ç¤ºä¾‹åšå®¢</a></span><span class='btn solid'><a class="button" href='https://baidu.com' title='ç¤ºä¾‹åšå®¢'><i class='fab fa-weixin'></i>ç¤ºä¾‹åšå®¢</a></span><h3 id="ä¸Šè¿°å®ä¾‹æºç -1"><a href="#ä¸Šè¿°å®ä¾‹æºç -1" class="headerlink" title="ä¸Šè¿°å®ä¾‹æºç "></a>ä¸Šè¿°å®ä¾‹æºç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% btn hollow, ç¤ºä¾‹åšå®¢, https://baidu.com, fab fa-qq %&#125;&#123;% btn solid, ç¤ºä¾‹åšå®¢, https://baidu.com, fab fa-weixin %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="å¤§ç‚¹çš„æŒ‰é’®å’Œæ ·å¼"><a href="#å¤§ç‚¹çš„æŒ‰é’®å’Œæ ·å¼" class="headerlink" title="å¤§ç‚¹çš„æŒ‰é’®å’Œæ ·å¼"></a>å¤§ç‚¹çš„æŒ‰é’®å’Œæ ·å¼</h2><span class='btn center large'><a class="button" href='https://baidu.com' title='å¼€å§‹ä½¿ç”¨'><i class='fa fa-download'></i>å¼€å§‹ä½¿ç”¨</a></span><h3 id="ä¸Šè¿°å®ä¾‹æºç -2"><a href="#ä¸Šè¿°å®ä¾‹æºç -2" class="headerlink" title="ä¸Šè¿°å®ä¾‹æºç "></a>ä¸Šè¿°å®ä¾‹æºç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% btn center large, å¼€å§‹ä½¿ç”¨, https://baidu.com, fa fa-download %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 class="bamboo-h " id="ç¯å½¢æŒ‰é’®">ç¯å½¢æŒ‰é’®</h1><br/><span class='btn center large round solid'><a class="button" href='https://baidu.com' title='å¼€å§‹ä½¿ç”¨'><i class='fa fa-download'></i>å¼€å§‹ä½¿ç”¨</a></span><h3 id="ä¸Šè¿°å®ä¾‹æºç -3"><a href="#ä¸Šè¿°å®ä¾‹æºç -3" class="headerlink" title="ä¸Šè¿°å®ä¾‹æºç "></a>ä¸Šè¿°å®ä¾‹æºç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% btn center large round solid, å¼€å§‹ä½¿ç”¨, https://baidu.com, fa fa-download %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="warningç­‰é¢œè‰²æŒ‰é’®"><a href="#warningç­‰é¢œè‰²æŒ‰é’®" class="headerlink" title="warningç­‰é¢œè‰²æŒ‰é’®"></a>warningç­‰é¢œè‰²æŒ‰é’®</h2><span class='btn large round solid warning'><a class="button" href='https://baidu.com' title='å¼€å§‹ä½¿ç”¨'><i class='fa fa-download'></i>å¼€å§‹ä½¿ç”¨</a></span><span class='btn large round solid info'><a class="button" href='https://baidu.com' title='å¼€å§‹ä½¿ç”¨'><i class='fa fa-download'></i>å¼€å§‹ä½¿ç”¨</a></span><span class='btn large round solid success'><a class="button" href='https://baidu.com' title='å¼€å§‹ä½¿ç”¨'><i class='fa fa-download'></i>å¼€å§‹ä½¿ç”¨</a></span><span class='btn large round solid danger'><a class="button" href='https://baidu.com' title='å¼€å§‹ä½¿ç”¨'><i class='fa fa-download'></i>å¼€å§‹ä½¿ç”¨</a></span><span class='btn large solid success'><a class="button" href='https://baidu.com' title='å¼€å§‹ä½¿ç”¨'><i class='fa fa-download'></i>å¼€å§‹ä½¿ç”¨</a></span><h3 id="ä¸Šè¿°å®ä¾‹æºç -4"><a href="#ä¸Šè¿°å®ä¾‹æºç -4" class="headerlink" title="ä¸Šè¿°å®ä¾‹æºç "></a>ä¸Šè¿°å®ä¾‹æºç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% btn large round solid warning, å¼€å§‹ä½¿ç”¨, https://baidu.com, fa fa-download %&#125;&#123;% btn large round solid info, å¼€å§‹ä½¿ç”¨, https://baidu.com, fa fa-download %&#125;&#123;% btn large round solid success, å¼€å§‹ä½¿ç”¨, https://baidu.com, fa fa-download %&#125;&#123;% btn large round solid danger, å¼€å§‹ä½¿ç”¨, https://baidu.com, fa fa-download %&#125;&#123;% btn large solid success, å¼€å§‹ä½¿ç”¨, https://baidu.com, fa fa-download %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="warningç­‰é¢œè‰²ç©ºå¿ƒæŒ‰é’®"><a href="#warningç­‰é¢œè‰²ç©ºå¿ƒæŒ‰é’®" class="headerlink" title="warningç­‰é¢œè‰²ç©ºå¿ƒæŒ‰é’®"></a>warningç­‰é¢œè‰²ç©ºå¿ƒæŒ‰é’®</h2><span class='btn large warning hollow'><a class="button" href='https://baidu.com' title='å¼€å§‹ä½¿ç”¨'><i class='fa fa-download'></i>å¼€å§‹ä½¿ç”¨</a></span><span class='btn large info hollow'><a class="button" href='https://baidu.com' title='å¼€å§‹ä½¿ç”¨'><i class='fa fa-download'></i>å¼€å§‹ä½¿ç”¨</a></span><span class='btn large success hollow'><a class="button" href='https://baidu.com' title='å¼€å§‹ä½¿ç”¨'><i class='fa fa-download'></i>å¼€å§‹ä½¿ç”¨</a></span><span class='btn large danger hollow'><a class="button" href='https://baidu.com' title='å¼€å§‹ä½¿ç”¨'><i class='fa fa-download'></i>å¼€å§‹ä½¿ç”¨</a></span><span class='btn success hollow'><a class="button" href='https://baidu.com' title='å¼€å§‹ä½¿ç”¨'><i class='fa fa-download'></i>å¼€å§‹ä½¿ç”¨</a></span><h3 id="ä¸Šè¿°å®ä¾‹æºç -5"><a href="#ä¸Šè¿°å®ä¾‹æºç -5" class="headerlink" title="ä¸Šè¿°å®ä¾‹æºç "></a>ä¸Šè¿°å®ä¾‹æºç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% btn large warning hollow, å¼€å§‹ä½¿ç”¨, https://baidu.com, fa fa-download %&#125;&#123;% btn large info hollow, å¼€å§‹ä½¿ç”¨, https://baidu.com, fa fa-download %&#125;&#123;% btn large success hollow, å¼€å§‹ä½¿ç”¨, https://baidu.com, fa fa-download %&#125;&#123;% btn large danger hollow, å¼€å§‹ä½¿ç”¨, https://baidu.com, fa fa-download %&#125;&#123;% btn success hollow, å¼€å§‹ä½¿ç”¨, https://baidu.com, fa fa-download %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="warningç­‰é¢œè‰²ç©ºå¿ƒç¯å½¢å±…ä¸­æŒ‰é’®"><a href="#warningç­‰é¢œè‰²ç©ºå¿ƒç¯å½¢å±…ä¸­æŒ‰é’®" class="headerlink" title="warningç­‰é¢œè‰²ç©ºå¿ƒç¯å½¢å±…ä¸­æŒ‰é’®"></a>warningç­‰é¢œè‰²ç©ºå¿ƒç¯å½¢å±…ä¸­æŒ‰é’®</h2><span class='btn large danger hollow center round'><a class="button" href='https://baidu.com' title='å¼€å§‹ä½¿ç”¨'><i class='fa fa-download'></i>å¼€å§‹ä½¿ç”¨</a></span><span class='btn danger hollow center round'><a class="button" href='https://baidu.com' title='å¼€å§‹ä½¿ç”¨'><i class='fa fa-download'></i>å¼€å§‹ä½¿ç”¨</a></span><h3 id="ä¸Šè¿°å®ä¾‹æºç -6"><a href="#ä¸Šè¿°å®ä¾‹æºç -6" class="headerlink" title="ä¸Šè¿°å®ä¾‹æºç "></a>ä¸Šè¿°å®ä¾‹æºç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% btn large danger hollow center round, å¼€å§‹ä½¿ç”¨, https://baidu.com, fa fa-download %&#125;&#123;% btn danger hollow center round, å¼€å§‹ä½¿ç”¨, https://baidu.com, fa fa-download %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="å¸¦æœ‰å¤´åƒå’Œåç§°çš„æŒ‰é’®"><a href="#å¸¦æœ‰å¤´åƒå’Œåç§°çš„æŒ‰é’®" class="headerlink" title="å¸¦æœ‰å¤´åƒå’Œåç§°çš„æŒ‰é’®"></a>å¸¦æœ‰å¤´åƒå’Œåç§°çš„æŒ‰é’®</h2><div class="btns circle grid2">            <a class="button" href='https://baidu.com' title='è‰å¸½æµ·è´¼å›¢'><img src='https://img2.woyaogexing.com/2021/01/30/007e3777e7e64c4aae95ae812708a7bf!400x400.jpeg'>è‰å¸½æµ·è´¼å›¢</a><a class="button" href='https://baidu.com' title='å°ç»µç¾Š'><img src='https://img2.woyaogexing.com/2021/01/30/4c59f9dd4aae421fae21344aec8c7b60!400x400.jpeg'>å°ç»µç¾Š</a><a class="button" href='https://baidu.com' title='æ²«å…®'><img src='https://img2.woyaogexing.com/2021/01/30/1b2aec116f0b49c682badc5befd43905!400x400.jpeg'>æ²«å…®</a><a class="button" href='https://baidu.com' title='å‡¯çˆ¹'><img src='https://p.qqan.com/up/2021-1/16112058848478910.jpg'>å‡¯çˆ¹</a><a class="button" href='https://baidu.com' title='é˜¿ç¦»'><img src='https://p.qqan.com/up/2021-1/16118869719896010.jpg'>é˜¿ç¦»</a><a class="button" href='https://baidu.com' title='éŸ©ä¿¡'><img src='https://p.qqan.com/up/2021-1/16118869704182020.jpg'>éŸ©ä¿¡</a>          </div><h3 id="ä¸Šè¿°å®ä¾‹æºç -7"><a href="#ä¸Šè¿°å®ä¾‹æºç -7" class="headerlink" title="ä¸Šè¿°å®ä¾‹æºç "></a>ä¸Šè¿°å®ä¾‹æºç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% btns circle grid2 %&#125;  &#123;% cell è‰å¸½æµ·è´¼å›¢, https://baidu.com, https://img2.woyaogexing.com/2021/01/30/007e3777e7e64c4aae95ae812708a7bf!400x400.jpeg %&#125;  &#123;% cell å°ç»µç¾Š, https://baidu.com, https://img2.woyaogexing.com/2021/01/30/4c59f9dd4aae421fae21344aec8c7b60!400x400.jpeg %&#125;  &#123;% cell æ²«å…®, https://baidu.com, https://img2.woyaogexing.com/2021/01/30/1b2aec116f0b49c682badc5befd43905!400x400.jpeg %&#125;  &#123;% cell å‡¯çˆ¹, https://baidu.com, https://p.qqan.com/up/2021-1/16112058848478910.jpg %&#125;  &#123;% cell é˜¿ç¦», https://baidu.com, https://p.qqan.com/up/2021-1/16118869719896010.jpg %&#125;  &#123;% cell éŸ©ä¿¡, https://baidu.com, https://p.qqan.com/up/2021-1/16118869704182020.jpg %&#125;&#123;% endbtns %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¸€è¡Œä¸‰ä¸ªå¸¦æœ‰å¤´åƒå’Œåç§°çš„æŒ‰é’®"><a href="#ä¸€è¡Œä¸‰ä¸ªå¸¦æœ‰å¤´åƒå’Œåç§°çš„æŒ‰é’®" class="headerlink" title="ä¸€è¡Œä¸‰ä¸ªå¸¦æœ‰å¤´åƒå’Œåç§°çš„æŒ‰é’®"></a>ä¸€è¡Œä¸‰ä¸ªå¸¦æœ‰å¤´åƒå’Œåç§°çš„æŒ‰é’®</h2><div class="btns circle grid3">            <a class="button" href='https://baidu.com' title='QQå¤´åƒ'><img src='http://q1.qlogo.cn/g?b=qq&nk=1730241541&s=640'>QQå¤´åƒ</a><a class="button" href='https://baidu.com' title='éšæœºåŠ¨æ¼«å¤´åƒ'><img src='http://api.btstu.cn/sjtx/api.php?lx=c1&format=images'>éšæœºåŠ¨æ¼«å¤´åƒ</a><a class="button" href='https://baidu.com' title='éšæœºç”·ç”Ÿå¤´åƒ'><img src='http://api.btstu.cn/sjtx/api.php?lx=a1&format=images'>éšæœºç”·ç”Ÿå¤´åƒ</a><a class="button" href='https://baidu.com' title='éšæœºå¥³ç”Ÿå¤´åƒ'><img src='http://api.btstu.cn/sjtx/api.php?lx=b1&format=images'>éšæœºå¥³ç”Ÿå¤´åƒ</a><a class="button" href='https://baidu.com' title='éšæœºåŠ¨æ¼«å¥³å¤´åƒ'><img src='http://api.btstu.cn/sjtx/api.php?lx=c2&format=images'>éšæœºåŠ¨æ¼«å¥³å¤´åƒ</a><a class="button" href='https://baidu.com' title='éšæœºåŠ¨æ¼«ç”·å¤´åƒ'><img src='http://api.btstu.cn/sjtx/api.php?lx=c3&format=images'>éšæœºåŠ¨æ¼«ç”·å¤´åƒ</a>          </div><h3 id="ä¸Šè¿°å®ä¾‹æºç -8"><a href="#ä¸Šè¿°å®ä¾‹æºç -8" class="headerlink" title="ä¸Šè¿°å®ä¾‹æºç "></a>ä¸Šè¿°å®ä¾‹æºç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% btns circle grid3 %&#125;  &#123;% cell QQå¤´åƒ, https://baidu.com, http://q1.qlogo.cn/g?b=qq&amp;nk=1730241541&amp;s=640 %&#125;  &#123;% cell éšæœºåŠ¨æ¼«å¤´åƒ, https://baidu.com, http://api.btstu.cn/sjtx/api.php?lx=c1&amp;format=images %&#125;  &#123;% cell éšæœºç”·ç”Ÿå¤´åƒ, https://baidu.com, http://api.btstu.cn/sjtx/api.php?lx=a1&amp;format=images %&#125;  &#123;% cell éšæœºå¥³ç”Ÿå¤´åƒ, https://baidu.com, http://api.btstu.cn/sjtx/api.php?lx=b1&amp;format=images %&#125;  &#123;% cell éšæœºåŠ¨æ¼«å¥³å¤´åƒ, https://baidu.com, http://api.btstu.cn/sjtx/api.php?lx=c2&amp;format=images %&#125;  &#123;% cell éšæœºåŠ¨æ¼«ç”·å¤´åƒ, https://baidu.com, http://api.btstu.cn/sjtx/api.php?lx=c3&amp;format=images %&#125;&#123;% endbtns %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¸€è¡Œå››ä¸ªå¸¦æœ‰å¤´åƒå’Œåç§°çš„æŒ‰é’®"><a href="#ä¸€è¡Œå››ä¸ªå¸¦æœ‰å¤´åƒå’Œåç§°çš„æŒ‰é’®" class="headerlink" title="ä¸€è¡Œå››ä¸ªå¸¦æœ‰å¤´åƒå’Œåç§°çš„æŒ‰é’®"></a>ä¸€è¡Œå››ä¸ªå¸¦æœ‰å¤´åƒå’Œåç§°çš„æŒ‰é’®</h2><div class="btns circle grid4">            <a class="button" href='https://baidu.com' title='éšæœºGithubå¤´åƒ'><img src='https://api.prodless.com/avatar.png'>éšæœºGithubå¤´åƒ</a><a class="button" href='https://baidu.com' title='éšæœºGithubå¤´åƒ'><img src='https://api.prodless.com/avatar.png'>éšæœºGithubå¤´åƒ</a><a class="button" href='https://baidu.com' title='éšæœºGithubå¤´åƒ'><img src='https://api.prodless.com/avatar.png'>éšæœºGithubå¤´åƒ</a><a class="button" href='https://baidu.com' title='éšæœºGithubå¤´åƒ'><img src='https://api.prodless.com/avatar.png'>éšæœºGithubå¤´åƒ</a><a class="button" href='https://baidu.com' title='éšæœºGithubå¤´åƒ'><img src='https://api.prodless.com/avatar.png'>éšæœºGithubå¤´åƒ</a>          </div><h3 id="ä¸Šè¿°å®ä¾‹æºç -9"><a href="#ä¸Šè¿°å®ä¾‹æºç -9" class="headerlink" title="ä¸Šè¿°å®ä¾‹æºç "></a>ä¸Šè¿°å®ä¾‹æºç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% btns circle grid4 %&#125;  &#123;% cell éšæœºGithubå¤´åƒ, https://baidu.com, https://api.prodless.com/avatar.png %&#125;  &#123;% cell éšæœºGithubå¤´åƒ, https://baidu.com, https://api.prodless.com/avatar.png %&#125;  &#123;% cell éšæœºGithubå¤´åƒ, https://baidu.com, https://api.prodless.com/avatar.png %&#125;  &#123;% cell éšæœºGithubå¤´åƒ, https://baidu.com, https://api.prodless.com/avatar.png %&#125;  &#123;% cell éšæœºGithubå¤´åƒ, https://baidu.com, https://api.prodless.com/avatar.png %&#125;&#123;% endbtns %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¸€è¡Œäº”ä¸ªå¸¦æœ‰å¤´åƒå’Œåç§°çš„æŒ‰é’®"><a href="#ä¸€è¡Œäº”ä¸ªå¸¦æœ‰å¤´åƒå’Œåç§°çš„æŒ‰é’®" class="headerlink" title="ä¸€è¡Œäº”ä¸ªå¸¦æœ‰å¤´åƒå’Œåç§°çš„æŒ‰é’®"></a>ä¸€è¡Œäº”ä¸ªå¸¦æœ‰å¤´åƒå’Œåç§°çš„æŒ‰é’®</h2><div class="btns circle grid5">            <a class="button" href='https://baidu.com' title='éšæœºå¤´åƒ'><img src='https://picsum.photos/200'>éšæœºå¤´åƒ</a><a class="button" href='https://baidu.com' title='éšæœºå¤´åƒid'><img src='https://picsum.photos/id/1/200'>éšæœºå¤´åƒid</a><a class="button" href='https://baidu.com' title='éšæœºå¤´åƒid'><img src='https://picsum.photos/id/2/200'>éšæœºå¤´åƒid</a><a class="button" href='https://baidu.com' title='éšæœºå¤´åƒid'><img src='https://picsum.photos/id/3/200'>éšæœºå¤´åƒid</a><a class="button" href='https://baidu.com' title='éšæœºå¤´åƒid'><img src='https://picsum.photos/id/4/200'>éšæœºå¤´åƒid</a>          </div><div class="btns circle grid5">            <a class="button" href='https://baidu.com' title='éšæœºé£æ™¯'><img src='https://api.ixiaowai.cn/gqapi/gqapi.php'>éšæœºé£æ™¯</a><a class="button" href='https://baidu.com' title='éšæœºé£æ™¯'><img src='https://api.ixiaowai.cn/gqapi/gqapi.php'>éšæœºé£æ™¯</a><a class="button" href='https://baidu.com' title='éšæœºé£æ™¯'><img src='https://api.ixiaowai.cn/gqapi/gqapi.php'>éšæœºé£æ™¯</a><a class="button" href='https://baidu.com' title='éšæœºé£æ™¯'><img src='https://api.ixiaowai.cn/gqapi/gqapi.php'>éšæœºé£æ™¯</a><a class="button" href='https://baidu.com' title='éšæœºé£æ™¯'><img src='https://api.ixiaowai.cn/gqapi/gqapi.php'>éšæœºé£æ™¯</a>          </div><h3 id="ä¸Šè¿°å®ä¾‹æºç -10"><a href="#ä¸Šè¿°å®ä¾‹æºç -10" class="headerlink" title="ä¸Šè¿°å®ä¾‹æºç "></a>ä¸Šè¿°å®ä¾‹æºç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% btns circle grid5 %&#125;  &#123;% cell éšæœºå¤´åƒ, https://baidu.com, https://picsum.photos/200 %&#125;  &#123;% cell éšæœºå¤´åƒid, https://baidu.com, https://picsum.photos/id/1/200 %&#125;  &#123;% cell éšæœºå¤´åƒid, https://baidu.com, https://picsum.photos/id/2/200 %&#125;  &#123;% cell éšæœºå¤´åƒid, https://baidu.com, https://picsum.photos/id/3/200 %&#125;  &#123;% cell éšæœºå¤´åƒid, https://baidu.com, https://picsum.photos/id/4/200 %&#125;&#123;% endbtns %&#125;&#123;% btns circle grid5 %&#125;  &#123;% cell éšæœºé£æ™¯, https://baidu.com,   https://api.ixiaowai.cn/gqapi/gqapi.php %&#125;  &#123;% cell éšæœºé£æ™¯, https://baidu.com,   https://api.ixiaowai.cn/gqapi/gqapi.php %&#125;  &#123;% cell éšæœºé£æ™¯, https://baidu.com,   https://api.ixiaowai.cn/gqapi/gqapi.php %&#125;  &#123;% cell éšæœºé£æ™¯, https://baidu.com,   https://api.ixiaowai.cn/gqapi/gqapi.php %&#125;  &#123;% cell éšæœºé£æ™¯, https://baidu.com,   https://api.ixiaowai.cn/gqapi/gqapi.php %&#125;&#123;% endbtns %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 class="bamboo-h " id="ç¯å½¢å›¾æ ‡æŒ‰é’®">ç¯å½¢å›¾æ ‡æŒ‰é’®</h1><br/><h2 id="ç¯å½¢å›¾æ ‡æŒ‰é’®"><a href="#ç¯å½¢å›¾æ ‡æŒ‰é’®" class="headerlink" title="ç¯å½¢å›¾æ ‡æŒ‰é’®"></a>ç¯å½¢å›¾æ ‡æŒ‰é’®</h2><div class="btns rounded grid5">            <a class="button" href='/' title='ä¸‹è½½æºç '><i class='fa fa-download'></i>ä¸‹è½½æºç </a><a class="button" href='/' title='æŸ¥çœ‹æ–‡æ¡£'><i class='fa fa-book'></i>æŸ¥çœ‹æ–‡æ¡£</a>          </div><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -9"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -9" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% btns rounded grid5 %&#125;  &#123;% cell ä¸‹è½½æºç , /, fa fa-download %&#125;  &#123;% cell æŸ¥çœ‹æ–‡æ¡£, /, fa fa-book %&#125;&#123;% endbtns %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç¯å½¢å›¾æ ‡å¡«å……æŒ‰é’®"><a href="#ç¯å½¢å›¾æ ‡å¡«å……æŒ‰é’®" class="headerlink" title="ç¯å½¢å›¾æ ‡å¡«å……æŒ‰é’®"></a>ç¯å½¢å›¾æ ‡å¡«å……æŒ‰é’®</h2><div class="btns rounded grid5 center">            <a class="button" href='/' title='ä¸‹è½½æºç '><i class='fa fa-download'></i>ä¸‹è½½æºç </a><a class="button" href='/' title='æŸ¥çœ‹æ–‡æ¡£'><i class='fa fa-book'></i>æŸ¥çœ‹æ–‡æ¡£</a>          </div><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -10"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -10" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% btns rounded grid5 center %&#125;  &#123;% cell ä¸‹è½½æºç , /, fa fa-download %&#125;  &#123;% cell æŸ¥çœ‹æ–‡æ¡£, /, fa fa-book %&#125;&#123;% endbtns %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç¯å½¢å›¾æ ‡å¡«å……æŒ‰é’®-1"><a href="#ç¯å½¢å›¾æ ‡å¡«å……æŒ‰é’®-1" class="headerlink" title="ç¯å½¢å›¾æ ‡å¡«å……æŒ‰é’®"></a>ç¯å½¢å›¾æ ‡å¡«å……æŒ‰é’®</h2><div class="btns rounded grid5 fill">            <a class="button" href='/' title='ä¸‹è½½æºç '><i class='fa fa-download'></i>ä¸‹è½½æºç </a><a class="button" href='/' title='æŸ¥çœ‹æ–‡æ¡£'><i class='fa fa-book'></i>æŸ¥çœ‹æ–‡æ¡£</a>          </div><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -11"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -11" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% btns rounded grid5 fill %&#125;  &#123;% cell ä¸‹è½½æºç , /, fa fa-download %&#125;  &#123;% cell æŸ¥çœ‹æ–‡æ¡£, /, fa fa-book %&#125;&#123;% endbtns %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h1 class="bamboo-h " id="åœ†å½¢å›¾æ ‡æŒ‰é’®">åœ†å½¢å›¾æ ‡æŒ‰é’®</h1><br/><div class="btns circle center grid5">            <a href='/medias/reward/wechat.bmp'>  <i class='fa fa-apple'></i>  <b>è¿™ä¸ªæ˜¯å¾®ä¿¡</b>  <p class='p red'>å¾®ä¿¡</p>  <img src='/medias/reward/wechat.bmp'></a><a href='https://apps.apple.com/cn/app/heart-mate-lite-hrm-utility/id1475747930?ls=1'>  <i class='fa fa-apple'></i>  <b>è¿™ä¸ªæ˜¯æ”¯ä»˜å®</b>  <p class='p green'>æ”¯ä»˜å®</p>  <img src='/medias/reward/alipay.bmp'></a>          </div><h3 id="ä¸Šè¿°ç¤ºä¾‹ä»£ç -2"><a href="#ä¸Šè¿°ç¤ºä¾‹ä»£ç -2" class="headerlink" title="ä¸Šè¿°ç¤ºä¾‹ä»£ç "></a>ä¸Šè¿°ç¤ºä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% btns circle center grid5 %&#125;  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/medias/reward/wechat.bmp<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>fa fa-apple<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">></span></span>è¿™ä¸ªæ˜¯å¾®ä¿¡<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span>    &#123;% p red, å¾®ä¿¡ %&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/medias/reward/wechat.bmp<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>https://apps.apple.com/cn/app/heart-mate-lite-hrm-utility/id1475747930?ls=1<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>fa fa-apple<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">></span></span>è¿™ä¸ªæ˜¯æ”¯ä»˜å®<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span>    &#123;% p green, æ”¯ä»˜å® %&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/medias/reward/alipay.bmp<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>&#123;% endbtns %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 class="bamboo-h " id="radioæ ‡ç­¾æ¼”ç¤ºæ•ˆæœ">radioæ ‡ç­¾æ¼”ç¤ºæ•ˆæœ</h1><br/><div class='checkbox'><input type="radio" />            <p>çº¯æ–‡æœ¬æµ‹è¯•</p>            </div><div class='checkbox checked'><input type="radio" checked="checked"/>            <p>æ”¯æŒç®€å•çš„ <a href="https://guides.github.com/features/mastering-markdown/">markdown</a> è¯­æ³•</p>            </div><div class='checkbox red'><input type="radio" />            <p>æ”¯æŒè‡ªå®šä¹‰é¢œè‰²</p>            </div><div class='checkbox green'><input type="radio" />            <p>ç»¿è‰²</p>            </div><div class='checkbox yellow'><input type="radio" />            <p>é»„è‰²</p>            </div><div class='checkbox cyan'><input type="radio" />            <p>é’è‰²</p>            </div><div class='checkbox blue'><input type="radio" />            <p>è“è‰²</p>            </div><div class='checkbox warning'><input type="radio" />            <p>warningè‰²</p>            </div><div class='checkbox success'><input type="radio" />            <p>successè‰²</p>            </div><div class='checkbox danger'><input type="radio" />            <p>dangerè‰²</p>            </div><div class='checkbox info'><input type="radio" />            <p>infoè‰²</p>            </div><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -12"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -12" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% radio çº¯æ–‡æœ¬æµ‹è¯• %&#125;&#123;% radio checked, æ”¯æŒç®€å•çš„ <span class="token url">[<span class="token content">markdown</span>](<span class="token url">https://guides.github.com/features/mastering-markdown/</span>)</span> è¯­æ³• %&#125;&#123;% radio red, æ”¯æŒè‡ªå®šä¹‰é¢œè‰² %&#125;&#123;% radio green, ç»¿è‰² %&#125;&#123;% radio yellow, é»„è‰² %&#125;&#123;% radio cyan, é’è‰² %&#125;&#123;% radio blue, è“è‰² %&#125;&#123;% radio warning, warningè‰² %&#125;&#123;% radio success, successè‰² %&#125;&#123;% radio danger, dangerè‰² %&#125;&#123;% radio info, infoè‰² %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 class="bamboo-h " id="CheckBoxå›¾å½¢ç¤ºä¾‹">CheckBoxå›¾å½¢ç¤ºä¾‹</h1><br/><div class='checkbox'><input type="checkbox" />            <p>çº¯æ–‡æœ¬æµ‹è¯•</p>            </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>            <p>æ”¯æŒç®€å•çš„ <a href="https://guides.github.com/features/mastering-markdown/">markdown</a> è¯­æ³•</p>            </div><div class='checkbox red'><input type="checkbox" />            <p>æ”¯æŒè‡ªå®šä¹‰é¢œè‰²</p>            </div><div class='checkbox green checked'><input type="checkbox" checked="checked"/>            <p>ç»¿è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox yellow checked'><input type="checkbox" checked="checked"/>            <p>é»„è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox cyan checked'><input type="checkbox" checked="checked"/>            <p>é’è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>è“è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox plus green checked'><input type="checkbox" checked="checked"/>            <p>å¢åŠ </p>            </div><div class='checkbox minus yellow checked'><input type="checkbox" checked="checked"/>            <p>å‡å°‘</p>            </div><div class='checkbox times red checked'><input type="checkbox" checked="checked"/>            <p>å‰</p>            </div><h3 id="ä¸Šè¿°ç¤ºä¾‹ä»£ç -3"><a href="#ä¸Šè¿°ç¤ºä¾‹ä»£ç -3" class="headerlink" title="ä¸Šè¿°ç¤ºä¾‹ä»£ç "></a>ä¸Šè¿°ç¤ºä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% checkbox çº¯æ–‡æœ¬æµ‹è¯• %&#125;&#123;% checkbox checked, æ”¯æŒç®€å•çš„ <span class="token url">[<span class="token content">markdown</span>](<span class="token url">https://guides.github.com/features/mastering-markdown/</span>)</span> è¯­æ³• %&#125;&#123;% checkbox red, æ”¯æŒè‡ªå®šä¹‰é¢œè‰² %&#125;&#123;% checkbox green checked, ç»¿è‰² + é»˜è®¤é€‰ä¸­ %&#125;&#123;% checkbox yellow checked, é»„è‰² + é»˜è®¤é€‰ä¸­ %&#125;&#123;% checkbox cyan checked, é’è‰² + é»˜è®¤é€‰ä¸­ %&#125;&#123;% checkbox blue checked, è“è‰² + é»˜è®¤é€‰ä¸­ %&#125;&#123;% checkbox plus green checked, å¢åŠ  %&#125;&#123;% checkbox minus yellow checked, å‡å°‘ %&#125;&#123;% checkbox times red checked, å‰ %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 class="bamboo-h " id="tabç¤ºä¾‹">tabç¤ºä¾‹</h1><br/><h2 id="tabæ ‡ç­¾ç¤ºä¾‹å¦‚ä¸‹"><a href="#tabæ ‡ç­¾ç¤ºä¾‹å¦‚ä¸‹" class="headerlink" title="tabæ ‡ç­¾ç¤ºä¾‹å¦‚ä¸‹"></a>tabæ ‡ç­¾ç¤ºä¾‹å¦‚ä¸‹</h2><div class="tabs" id="tab-id"><ul class="nav-tabs"><li class="tab active"><a class="#tab-id-1">æ ç›®1</a></li><li class="tab"><a class="#tab-id-2">æ ç›®2</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab-id-1"><p>è¿™æ˜¯æ ç›®1çš„å†…å®¹</p></div><div class="tab-pane" id="tab-id-2"><p>è¿™æ˜¯æ ç›®2çš„å†…å®¹ï¼Œä»¥åè¦è®°å¾—æ€ä¹ˆå†™</p></div></div></div><h3 id="ä¸Šè¿°ç¤ºä¾‹ä»£ç -4"><a href="#ä¸Šè¿°ç¤ºä¾‹ä»£ç -4" class="headerlink" title="ä¸Šè¿°ç¤ºä¾‹ä»£ç "></a>ä¸Šè¿°ç¤ºä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% tabs tab-id %&#125;<span class="token comment">&lt;!-- tab æ ç›®1 --></span>è¿™æ˜¯æ ç›®1çš„å†…å®¹<span class="token comment">&lt;!-- endtab --></span><span class="token comment">&lt;!-- tab æ ç›®2 --></span>è¿™æ˜¯æ ç›®2çš„å†…å®¹ï¼Œä»¥åè¦è®°å¾—æ€ä¹ˆå†™<span class="token comment">&lt;!-- endtab --></span>&#123;% endtabs %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 class="bamboo-h " id="foldingæ•ˆæœ">foldingæ•ˆæœ</h1><br/><h2 id="å›¾ç‰‡æŠ˜å "><a href="#å›¾ç‰‡æŠ˜å " class="headerlink" title="å›¾ç‰‡æŠ˜å "></a>å›¾ç‰‡æŠ˜å </h2><details ><summary pointer> æŸ¥çœ‹å›¾ç‰‡æµ‹è¯• </summary>              <div class='content'>              <p><img src="https://pic4.zhimg.com/80/v2-5e0b1aaa1994f6d7cb9aac94a6f4e0b3_1440w.jpg" class="lazyload placeholder" data-srcset="https://pic4.zhimg.com/80/v2-5e0b1aaa1994f6d7cb9aac94a6f4e0b3_1440w.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p>              </div>            </details><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -13"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -13" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% folding æŸ¥çœ‹å›¾ç‰‡æµ‹è¯• %&#125;  ![](https://pic4.zhimg.com/80/v2-5e0b1aaa1994f6d7cb9aac94a6f4e0b3_1440w.jpg)&#123;% endfolding %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="é»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡†"><a href="#é»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡†" class="headerlink" title="é»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡†"></a>é»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡†</h2><details cyan open><summary pointer> æŸ¥çœ‹é»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡† </summary>              <div class='content'>              <p>è¿™æ˜¯ä¸€ä¸ªé»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡†ã€‚</p>              </div>            </details><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -14"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -14" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% folding cyan open, æŸ¥çœ‹é»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡† %&#125;  è¿™æ˜¯ä¸€ä¸ªé»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡†ã€‚&#123;% endfolding %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä»£ç æŠ˜å "><a href="#ä»£ç æŠ˜å " class="headerlink" title="ä»£ç æŠ˜å "></a>ä»£ç æŠ˜å </h2><details green><summary pointer> æŸ¥çœ‹ä»£ç æµ‹è¯• </summary>              <div class='content'>              <p>è¿™é‡Œå†™ä»£ç é«˜äº®éƒ¨åˆ†</p>              </div>            </details><p>###ä¸Šè¿°äº‹ä¾‹ä»£ç </p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% folding green, æŸ¥çœ‹ä»£ç æµ‹è¯• %&#125;è¿™é‡Œå†™ä»£ç é«˜äº®éƒ¨åˆ†&#123;% endfolding %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="åˆ—è¡¨æŠ˜å "><a href="#åˆ—è¡¨æŠ˜å " class="headerlink" title="åˆ—è¡¨æŠ˜å "></a>åˆ—è¡¨æŠ˜å </h2><details yellow><summary pointer> æŸ¥çœ‹åˆ—è¡¨æµ‹è¯• </summary>              <div class='content'>              <ul><li>haha</li><li>hehe</li></ul>              </div>            </details><p>###ä¸Šè¿°äº‹ä¾‹ä»£ç </p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% folding yellow, æŸ¥çœ‹åˆ—è¡¨æµ‹è¯• %&#125;  <span class="token list punctuation">-</span> haha  <span class="token list punctuation">-</span> hehe&#123;% endfolding %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åµŒå¥—æŠ˜å "><a href="#åµŒå¥—æŠ˜å " class="headerlink" title="åµŒå¥—æŠ˜å "></a>åµŒå¥—æŠ˜å </h2><details red><summary pointer> æŸ¥çœ‹åµŒå¥—æµ‹è¯• </summary>              <div class='content'>              <details blue><summary pointer> æŸ¥çœ‹åµŒå¥—æµ‹è¯•2 </summary>              <div class='content'>              <details ><summary pointer> æŸ¥çœ‹åµŒå¥—æµ‹è¯•3 </summary>              <div class='content'>              <p>hahaha <span><img src='https://image.dbbqb.com/202101221115/7cdd741907c2ea150d054d24c4da6594/4d0G' ></span></p>              </div>            </details>              </div>            </details>              </div>            </details><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -15"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -15" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% folding red, æŸ¥çœ‹åµŒå¥—æµ‹è¯• %&#125;&#123;% folding blue, æŸ¥çœ‹åµŒå¥—æµ‹è¯•2 %&#125;&#123;% folding æŸ¥çœ‹åµŒå¥—æµ‹è¯•3 %&#125;hahaha <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>https://image.dbbqb.com/202101221115/7cdd741907c2ea150d054d24c4da6594/4d0G<span class="token punctuation">'</span></span> <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>&#123;% endfolding %&#125;&#123;% endfolding %&#125;&#123;% endfolding %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 class="bamboo-h " id="site-cardæ ‡ç­¾æ¼”ç¤ºæ•ˆæœ">site-cardæ ‡ç­¾æ¼”ç¤ºæ•ˆæœ</h1><br/><div class="site-card-group"><a class="site-card" href="http://www.baidu.com"><div class="img"><img src="https://pic4.zhimg.com/v2-7fcb0d73e1d90788ccf136e22ba7b1bd_r.jpg" class="lazyload placeholder" data-srcset="https://pic4.zhimg.com/v2-7fcb0d73e1d90788ccf136e22ba7b1bd_r.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="info style="background: rgb(0, 0, 0) center center""><img src="https://pic4.zhimg.com/80/v2-45eb5749949e7f90a5c788f9bc5721ef_1440w.jpg" class="lazyload placeholder" data-srcset="https://pic4.zhimg.com/80/v2-45eb5749949e7f90a5c788f9bc5721ef_1440w.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/><span class="title">æœ¨å…®</span><span class="desc">è¿™æ˜¯æè¿°</span></div></a><a class="site-card" href="https://yuang01.gitee.io/"><div class="img"><img src="https://pic4.zhimg.com/80/v2-f549722dac8f777693c090a92498de0f_1440w.jpg" class="lazyload placeholder" data-srcset="https://pic4.zhimg.com/80/v2-f549722dac8f777693c090a92498de0f_1440w.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="info style="background: rgb(0, 0, 0) center center""><img src="https://pic3.zhimg.com/80/v2-8bb491487280587026cd576b224ca91e_1440w.jpg" class="lazyload placeholder" data-srcset="https://pic3.zhimg.com/80/v2-8bb491487280587026cd576b224ca91e_1440w.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/><span class="title">yuang01</span><span class="desc">è¿™æ˜¯æè¿°å“¦</span></div></a><a class="site-card" href="http://www.baidu.com"><div class="img"><img src="https://pic4.zhimg.com/v2-7fcb0d73e1d90788ccf136e22ba7b1bd_r.jpg" class="lazyload placeholder" data-srcset="https://pic4.zhimg.com/v2-7fcb0d73e1d90788ccf136e22ba7b1bd_r.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="info style="background: rgb(0, 0, 0) center center""><img src="https://pic4.zhimg.com/80/v2-45eb5749949e7f90a5c788f9bc5721ef_1440w.jpg" class="lazyload placeholder" data-srcset="https://pic4.zhimg.com/80/v2-45eb5749949e7f90a5c788f9bc5721ef_1440w.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/><span class="title">æœ¨å…®</span><span class="desc">è¿™æ˜¯æè¿°</span></div></a><a class="site-card" href="https://yuang01.gitee.io/"><div class="img"><img src="https://pic4.zhimg.com/80/v2-f549722dac8f777693c090a92498de0f_1440w.jpg" class="lazyload placeholder" data-srcset="https://pic4.zhimg.com/80/v2-f549722dac8f777693c090a92498de0f_1440w.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="info style="background: rgb(0, 0, 0) center center""><img src="https://pic3.zhimg.com/80/v2-8bb491487280587026cd576b224ca91e_1440w.jpg" class="lazyload placeholder" data-srcset="https://pic3.zhimg.com/80/v2-8bb491487280587026cd576b224ca91e_1440w.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/><span class="title">yuang01</span><span class="desc">è¿™æ˜¯æè¿°å“¦</span></div></a><a class="site-card" href="http://www.baidu.com"><div class="img"><img src="https://pic4.zhimg.com/v2-7fcb0d73e1d90788ccf136e22ba7b1bd_r.jpg" class="lazyload placeholder" data-srcset="https://pic4.zhimg.com/v2-7fcb0d73e1d90788ccf136e22ba7b1bd_r.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="info style="background: rgb(0, 0, 0) center center""><img src="https://pic4.zhimg.com/80/v2-45eb5749949e7f90a5c788f9bc5721ef_1440w.jpg" class="lazyload placeholder" data-srcset="https://pic4.zhimg.com/80/v2-45eb5749949e7f90a5c788f9bc5721ef_1440w.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/><span class="title">æœ¨å…®</span><span class="desc">è¿™æ˜¯æè¿°</span></div></a></div><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -16"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -16" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% sitegroup %&#125;    &#123;% site æœ¨å…®, url=http://www.baidu.com, screenshot=https://pic4.zhimg.com/v2-7fcb0d73e1d90788ccf136e22ba7b1bd_r.jpg, avatar=https://pic4.zhimg.com/80/v2-45eb5749949e7f90a5c788f9bc5721ef_1440w.jpg, description=è¿™æ˜¯æè¿° %&#125;    &#123;% site yuang01, url=https://yuang01.gitee.io/, screenshot=https://pic4.zhimg.com/80/v2-f549722dac8f777693c090a92498de0f_1440w.jpg, avatar=https://pic3.zhimg.com/80/v2-8bb491487280587026cd576b224ca91e_1440w.jpg, description=è¿™æ˜¯æè¿°å“¦ %&#125;    &#123;% site æœ¨å…®, url=http://www.baidu.com, screenshot=https://pic4.zhimg.com/v2-7fcb0d73e1d90788ccf136e22ba7b1bd_r.jpg, avatar=https://pic4.zhimg.com/80/v2-45eb5749949e7f90a5c788f9bc5721ef_1440w.jpg, description=è¿™æ˜¯æè¿° %&#125;    &#123;% site yuang01, url=https://yuang01.gitee.io/, screenshot=https://pic4.zhimg.com/80/v2-f549722dac8f777693c090a92498de0f_1440w.jpg, avatar=https://pic3.zhimg.com/80/v2-8bb491487280587026cd576b224ca91e_1440w.jpg, description=è¿™æ˜¯æè¿°å“¦ %&#125;    &#123;% site æœ¨å…®, url=http://www.baidu.com, screenshot=https://pic4.zhimg.com/v2-7fcb0d73e1d90788ccf136e22ba7b1bd_r.jpg, avatar=https://pic4.zhimg.com/80/v2-45eb5749949e7f90a5c788f9bc5721ef_1440w.jpg, description=è¿™æ˜¯æè¿° %&#125;&#123;% endsitegroup %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 class="bamboo-h " id="timelineæ—¶é—´çº¿æ ‡ç­¾æ¼”ç¤ºæ•ˆæœ">timelineæ—¶é—´çº¿æ ‡ç­¾æ¼”ç¤ºæ•ˆæœ</h1><br/><div class="timeline">    <div class="timenode"><div class="meta"><p><p>2021-01-01 <a href="https://github.com/yuang01/hexo-theme-bamboo">1.0.3 -&gt; 1.0.3</a></p></p></div><div class="body"><ol><li>æˆ‘æ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡å­—<code>ghghgh</code>ã€‚</li><li>æˆ‘æ˜¯ä¸€ä¸ªæµ‹è¯•é—®é¢˜äºŒâ€™qweqwâ€™ï¼Œè¯·é—®ä¼é¹…è¯·é—®è¯·é—®ä½›æŒ¡æ€<code>fgfgf</code>ä½›ç¬¬ä¸‰èŠ‚è¯¾ã€‚</li><li>æˆ‘æ˜¯ä¸€ä¸ªæµ‹è¯•é—®é¢˜ä¸‰â€™fgfgfgâ€™ï¼Œè¯·é—®ä¼é¹…è¯·é—®è¯·é—®ä½›æŒ¡æ€<code>trtrtr</code>ä½›ç¬¬ä¸‰èŠ‚è¯¾ã€‚</li></ol></div></div>    <div class="timenode"><div class="meta"><p><p>2020-08-15 <a href="https://github.com/yuang01/hexo-theme-bamboo">1.0.2 -&gt; 1.0.2</a></p></p></div><div class="body"><p>è¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡å­—    </p></div></div>    <div class="timenode"><div class="meta"><p><p>2020-08-08 <a href="https://github.com/yuang01/hexo-theme-bamboo">1.0.0 -&gt; 1.0.0</a></p></p></div><div class="body"><ol><li>æˆ‘æ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡å­—<code>ghghgh</code>ã€‚</li><li>æˆ‘æ˜¯ä¸€ä¸ªæµ‹è¯•é—®é¢˜äºŒâ€™qweqwâ€™ï¼Œè¯·é—®ä¼é¹…è¯·é—®è¯·é—®ä½›æŒ¡æ€<code>fgfgf</code>ä½›ç¬¬ä¸‰èŠ‚è¯¾ã€‚</li><li>æˆ‘æ˜¯ä¸€ä¸ªæµ‹è¯•é—®é¢˜ä¸‰â€™fgfgfgâ€™ï¼Œè¯·é—®ä¼é¹…è¯·é—®è¯·é—®ä½›æŒ¡æ€<code>trtrtr</code>ä½›ç¬¬ä¸‰èŠ‚è¯¾ã€‚</li></ol></div></div></div><h3 id="ä¸Šè¿°äº‹ä¾‹ä»£ç -17"><a href="#ä¸Šè¿°äº‹ä¾‹ä»£ç -17" class="headerlink" title="ä¸Šè¿°äº‹ä¾‹ä»£ç "></a>ä¸Šè¿°äº‹ä¾‹ä»£ç </h3><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% timeline %&#125;<span class="token code keyword">    &#123;% timenode 2021-01-01 [1.0.3 -> 1.0.3](https://github.com/yuang01/hexo-theme-bamboo) %&#125;        1. æˆ‘æ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡å­—`ghghgh`ã€‚        2. æˆ‘æ˜¯ä¸€ä¸ªæµ‹è¯•é—®é¢˜äºŒ'qweqw'ï¼Œè¯·é—®ä¼é¹…è¯·é—®è¯·é—®ä½›æŒ¡æ€`fgfgf`ä½›ç¬¬ä¸‰èŠ‚è¯¾ã€‚        2. æˆ‘æ˜¯ä¸€ä¸ªæµ‹è¯•é—®é¢˜ä¸‰'fgfgfg'ï¼Œè¯·é—®ä¼é¹…è¯·é—®è¯·é—®ä½›æŒ¡æ€`trtrtr`ä½›ç¬¬ä¸‰èŠ‚è¯¾ã€‚    &#123;% endtimenode %&#125;</span><span class="token code keyword">    &#123;% timenode 2020-08-15 [1.0.2 -> 1.0.2](https://github.com/yuang01/hexo-theme-bamboo) %&#125;        è¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡å­—    &#123;% endtimenode %&#125;</span><span class="token code keyword">    &#123;% timenode 2020-08-08 [1.0.0 -> 1.0.0](https://github.com/yuang01/hexo-theme-bamboo) %&#125;        1. æˆ‘æ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡å­—`ghghgh`ã€‚        2. æˆ‘æ˜¯ä¸€ä¸ªæµ‹è¯•é—®é¢˜äºŒ'qweqw'ï¼Œè¯·é—®ä¼é¹…è¯·é—®è¯·é—®ä½›æŒ¡æ€`fgfgf`ä½›ç¬¬ä¸‰èŠ‚è¯¾ã€‚        2. æˆ‘æ˜¯ä¸€ä¸ªæµ‹è¯•é—®é¢˜ä¸‰'fgfgfg'ï¼Œè¯·é—®ä¼é¹…è¯·é—®è¯·é—®ä½›æŒ¡æ€`trtrtr`ä½›ç¬¬ä¸‰èŠ‚è¯¾ã€‚    &#123;% endtimenode %&#125;</span>&#123;% endtimeline %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æœ¬ç«™ä»‹ç» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸»é¢˜ä»‹ç»-é¡µé¢é…ç½®</title>
      <link href="/post/ben-zhan-jie-shao/zhu-ti-jie-shao-ye-mian-pei-zhi/"/>
      <url>/post/ben-zhan-jie-shao/zhu-ti-jie-shao-ye-mian-pei-zhi/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>æ³¨æ„</strong>: iconä½¿ç”¨çš„ <a href="https://fontawesome.dashgame.com/">Font Awesome</a> ç‰ˆæœ¬ä¸º <code>5.15.3</code>ã€‚</p></blockquote><h1 class="bamboo-h " id="é¡µé¢åŸºæœ¬åŠŸèƒ½">é¡µé¢åŸºæœ¬åŠŸèƒ½</h1><br/><h2 id="é¦–é¡µè½®æ’­å›¾"><a href="#é¦–é¡µè½®æ’­å›¾" class="headerlink" title="é¦–é¡µè½®æ’­å›¾"></a>é¦–é¡µè½®æ’­å›¾</h2><p>é¦–é¡µè½®æ’­å›¾åœ¨<code>source/_posts/xxx.md</code>ä¹Ÿå°±æ˜¯æ–‡ç« é¡µé¢é…ç½®ï¼Œå¦‚æœä½ æƒ³è®©æŸä¸ªæ–‡ç« æ”¾åœ¨é¦–é¡µè½®æ’­ä¸­ï¼Œåªç”¨è®¾ç½®<code>swiper: true</code>å³å¯ï¼Œå¯ä»¥é€šè¿‡<code>swiperImg: xxx</code>æ¥é…ç½®è½®æ’­å›¾ç‰‡ï¼Œå¦‚ä¸‹æ‰€ç¤º</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> Hello world<span class="token key atrule">date</span><span class="token punctuation">:</span> 2021<span class="token punctuation">-</span>10<span class="token punctuation">-</span>20 21<span class="token punctuation">:</span><span class="token number">11</span><span class="token key atrule">swiper</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token key atrule">swiperImg</span><span class="token punctuation">:</span> <span class="token string">'https://ssyerv1.oss-cn-hangzhou.aliyuncs.com/picture/c080ff4434354e35af9dab0a3ee1b9f7.jpg!sswm'</span><span class="token key atrule">swiperDesc</span><span class="token punctuation">:</span> <span class="token string">'æˆ‘æ˜¯æ–‡ç« åœ¨è½®æ’­å›¾ä¸­çš„æ‘˜è¦'</span><span class="token punctuation">---</span>æˆ‘æ˜¯æ–‡ç« å†…å®¹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>swiperImg</code>å¯ä»¥æ˜¯cdnåœ°å€ï¼Œä¹Ÿå¯ä»¥æ˜¯æœ¬åœ°åœ°å€ï¼Œä¾‹å¦‚<code>/medias/4.png</code><br>å¯ä»¥é€šè¿‡ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ä¸­çš„<code>swiper</code>å±æ€§å¯¹è½®æ’­è¿›è¡Œè°ƒæ•´</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># é¦–é¡µè½®æ’­å›¾è®¾ç½®</span><span class="token key atrule">swiper</span><span class="token punctuation">:</span>  <span class="token comment"># å½“åœ¨.mdæ–‡ä»¶ä¸­ï¼Œè®¾ç½®swiper:trueï¼Œä¼šå°†è¯¥æ–‡ç« æ”¾åˆ°è½®æ’­ä¸­ï¼Œ</span>  <span class="token key atrule">showPrevNext</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># æ˜¯å¦æ˜¾ç¤ºå·¦å³åˆ‡æ¢æŒ‰é’®</span>  <span class="token key atrule">showIndicators</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment"># æ˜¯å¦æ˜¾ç¤ºæŒ‡ç¤ºå™¨</span>  <span class="token key atrule">autoplay</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># æ˜¯å¦è‡ªåŠ¨è½®æ’­</span>  <span class="token key atrule">loop</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># è®©è½®æ’­çœ‹èµ·æ¥æ˜¯å¾ªç¯çš„, ä¾‹å¦‚falseçš„è¯ï¼Œåˆ°è¾¾æœ€åä¸€ä¸ªè½®æ’­å›¾çš„æ—¶å€™ï¼Œå³æŒ‰é’®ä¸èƒ½ç‚¹å‡»</span>  <span class="token key atrule">delay</span><span class="token punctuation">:</span> <span class="token number">5000</span> <span class="token comment"># åˆ‡æ¢å»¶è¿Ÿæ—¶é—´</span>  <span class="token key atrule">effect</span><span class="token punctuation">:</span> <span class="token string">'slide'</span> <span class="token comment"># 'fade': æ·¡å…¥æ·¡å‡ºæ•ˆæœ</span>  <span class="token key atrule">textAnimated</span><span class="token punctuation">:</span> <span class="token string">'fadeInDown'</span> <span class="token comment"># æ–‡å­—åŠ¨ç”»ï¼Œå±æ€§ä½¿ç”¨ animate.css, https://daneden.github.io/animate.css/</span>  <span class="token key atrule">textDuration</span><span class="token punctuation">:</span> <span class="token string">'0.2s'</span> <span class="token comment"># æ–‡å­—åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆå•ä½ç§’ï¼‰</span>  <span class="token key atrule">textDelay</span><span class="token punctuation">:</span> <span class="token string">'0.1s'</span> <span class="token comment"># æ–‡å­—åŠ¨ç”»å»¶è¿Ÿæ—¶é—´ï¼ˆå•ä½ç§’ï¼‰</span>  <span class="token key atrule">readMoreBtn</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># é˜…è¯»æ›´å¤šæŒ‰é’®æ˜¯å¦æ˜¾ç¤º</span>  <span class="token key atrule">readMoreBtnBackgroundColor</span><span class="token punctuation">:</span> <span class="token string">''</span> <span class="token comment"># é˜…è¯»æ›´å¤šæŒ‰é’®èƒŒæ™¯é¢œè‰²,ç©ºå­—ç¬¦ä¸²åˆ™é»˜è®¤ä½¿ç”¨ä¸»é¢˜é¢œè‰²</span>  <span class="token key atrule">bubble</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># è½®æ’­å›¾æ˜¯å¦æ˜¾ç¤ºæ°”æ³¡,ä¹Ÿå¯ä»¥æ‰“å¼€åº•ä¸‹çš„èŠ±ç“£æˆ–è€…é›ªèŠ±ç‰¹æ•ˆ sakuraï¼ˆèŠ±ç“£ï¼‰: true snow(é›ªèŠ±): true</span>  <span class="token comment"># å½“æ²¡æœ‰æ–‡ç« è®¾ç½®swiper: trueæ—¶å€™ï¼Œè½®æ’­å›¾ä¼šæ˜¾ç¤ºä»¥ä¸‹defaulté»˜è®¤å†…å®¹ï¼Œå¯è‡ªè¡Œåˆ‡æ¢å¯¹åº”å†…å®¹</span>  <span class="token key atrule">defaultImg</span><span class="token punctuation">:</span> <span class="token string">'https://w.wallhaven.cc/full/eo/wallhaven-eo678l.jpg'</span> <span class="token comment"># å›¾ç‰‡ï¼Œæ²¡æœ‰åˆ™éšæœºé€‰å–</span>  <span class="token key atrule">defaultVideo</span><span class="token punctuation">:</span> <span class="token string">''</span> <span class="token comment"># videoï¼Œmin-width:992px show</span>  <span class="token key atrule">defaultVideoLoadingImg</span><span class="token punctuation">:</span> <span class="token string">'https://img14.360buyimg.com/ddimg/jfs/t1/150557/6/19578/249564/60320406Ed5c42418/0d18299f505e4268.gif'</span> <span class="token comment"># video loading img -- use .gif img, è§†é¢‘é¢„åŠ è½½åŠ¨ç”»ï¼Œä½¿ç”¨gifå›¾ç‰‡ä½œä¸ºloadingï¼Œä¸ºç©ºåˆ™è§†é¢‘æ²¡æœ‰é¢„åŠ è½½åŠ¨ç”»</span>  <span class="token key atrule">defaultTile</span><span class="token punctuation">:</span> <span class="token string">'é’å¢¨ä¹¦æ™šé£'</span> <span class="token comment"># æ ‡é¢˜</span>  <span class="token key atrule">defaultDesc</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'ç…®é…’æ´—å‡€å°˜åš£ï¼Œè®ºçŸ¥äº¤'</span><span class="token punctuation">,</span> <span class="token string">'ä¸‡èˆ¬ä»˜ä¹‹ä¸€ç¬‘ï¼Œå…±å•è€'</span><span class="token punctuation">]</span> <span class="token comment">#æ è¿°ï¼Œä¾‹å¦‚ ['ç…®é…’æ´—å‡€å°˜åš£ï¼Œè®ºçŸ¥äº¤', 'ä¸‡èˆ¬ä»˜ä¹‹ä¸€ç¬‘ï¼Œå…±å•è€']</span>  <span class="token key atrule">defaultLeftBtnText</span><span class="token punctuation">:</span> <span class="token string">'é˜…è¯»æ–‡æ¡£'</span> <span class="token comment"># å·¦è¾¹æŒ‰é’®æ–‡å­—, ç©ºå­—ç¬¦ä¸²åˆ™ä¸æ˜¾ç¤º</span>  <span class="token key atrule">defaultLeftBtnLink</span><span class="token punctuation">:</span> <span class="token string">'https://yuang01.gitee.io/2021/02/08/hexo-theme-bamboo-new/'</span> <span class="token comment"># å·¦è¾¹æŒ‰é’®é“¾æ¥ </span>  <span class="token key atrule">defaultRightBtnText</span><span class="token punctuation">:</span> <span class="token string">'ä¸‹è½½ä¸»é¢˜'</span> <span class="token comment"># å³è¾¹æŒ‰é’®çš„æ–‡å­—ï¼Œç©ºå­—ç¬¦ä¸²åˆ™ä¸æ˜¾ç¤º</span>  <span class="token key atrule">defaultRightBtnLink</span><span class="token punctuation">:</span> <span class="token string">'https://gitee.com/yuang01/hexo-theme-bamboo/repository/archive/dev.zip'</span> <span class="token comment"># å³è¾¹çš„æŒ‰é’®çš„é“¾æ¥</span>  <span class="token key atrule">defaultDescTyped</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># defaultDescæ–‡å­—æ˜¯å¦å¼€å¯æ‰“å­—ç‰¹æ•ˆ  is typed</span>  <span class="token key atrule">defaultDescTypedSpeed</span><span class="token punctuation">:</span> <span class="token number">100</span> <span class="token comment"># defaultDesc æ‰“å­—é€Ÿåº¦, typed typeSpeed</span>  <span class="token key atrule">defaultDescTypedBackSpeed</span><span class="token punctuation">:</span> <span class="token number">50</span> <span class="token comment"># defaultDesc æ‰“å­—è¿”å›é€Ÿåº¦ typed backSpeed</span>  <span class="token key atrule">defaultDescTypedLoop</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># defaultDescæ–‡å­—çš„æ‰“å­—ç‰¹æ•ˆæ˜¯å¦å¾ªç¯  typed loop</span>  <span class="token comment"># defaultAddToSwiperè¡¨ç¤ºï¼šå½“æœ‰æ–‡ç« è®¾ç½®äº†swiper: trueçš„æ—¶å€™ï¼Œå°†ä¸Šé¢çš„ é»˜è®¤å†…å®¹ æ”¾åœ¨è½®æ’­å›¾çš„ç¬¬ä¸€é¡µ</span>  <span class="token key atrule">defaultAddToSwiper</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># å¼€å¯è¿™ä¸ªï¼Œåˆ™loopé»˜è®¤ä¸ºfalse</span>  <span class="token key atrule">bothSideBlur</span><span class="token punctuation">:</span> <span class="token string">'300000px'</span> <span class="token comment"># è½®æ’­å›¾ä¸¤è¾¹æ¨¡ç³Šç¨‹åº¦ï¼Œpxè¶Šå¤§è¶Šæ¨¡ç³Šï¼Œé’ˆå¯¹ä¸‹é¢çš„imgwidthFullã€fullä¸ºfalseçš„æ—¶å€™</span>  <span class="token comment">## è½®æ’­å›¾æ ·å¼æ›´æ”¹</span>  <span class="token comment"># è½®æ’­å›¾çš„æ–‡å­—å’ŒæŒ‰é’®å±…ä¸­æ˜¾ç¤º (é’ˆå¯¹ imgwidthFullå’Œ fulléƒ½æ˜¯falseçš„æ—¶å€™)</span>  <span class="token key atrule">textCenter</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token comment"># å›¾ç‰‡å®½åº¦ä¸º100% (è½®æ’­å›¾çš„æ–‡å­—å’ŒæŒ‰é’®åªèƒ½å±…ä¸­æ˜¾ç¤º)</span>  <span class="token key atrule">imgwidthFull</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token comment"># æ•´ä¸ªè½®æ’­å›¾å®½é«˜éƒ½æ˜¯100%  (è½®æ’­å›¾çš„æ–‡å­—å’ŒæŒ‰é’®åªèƒ½å±…ä¸­æ˜¾ç¤º)</span>  <span class="token key atrule">full</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># full ä¼˜å…ˆçº§å¤§äº imgwidthFull</span>  <span class="token comment"># ä¸¤è¾¹é€æ˜ï¼ŒimgwidthFull/full: falseçš„æ—¶å€™ï¼Œè®¾ç½®è¯¥å€¼ä¸ºtrueï¼Œåˆ™ä¸¤è¾¹çš„æ¨¡ç³Šæ•ˆæœä¸ºé€æ˜</span>  <span class="token key atrule">bothSideTransparent</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>defaultAddToSwiperè¡¨ç¤ºï¼Œå½“æœ‰æ–‡ç« è®¾ç½®äº†swiper:trueçš„æ—¶å€™ï¼Œå°†defaulté»˜è®¤è½®æ’­å›¾ä½œä¸ºç¬¬ä¸€å¼ è½®æ’­å›¾</li><li>é€šè¿‡textCenteræ§åˆ¶è½®æ’­å›¾çš„æ–‡å­—å’ŒæŒ‰é’®æ˜¯å¦å±…ä¸­æ˜¾ç¤º, imgwidthFullè®¾ç½®è½®æ’­å›¾æ˜¯å¦å®½åº¦ä¸º100%ï¼Œä½†æ˜¯é«˜åº¦ä¸ä¸º100%ï¼Œfullè¡¨ç¤ºè½®æ’­å›¾å®½é«˜éƒ½æ˜¯100%</li><li>è¿˜å¯ä»¥é€šè¿‡è®¾ç½®defaultVideoå‚æ•°å°†é»˜è®¤è½®æ’­å›¾çš„èƒŒæ™¯è®¾ç½®ä¸ºè§†é¢‘ï¼Œè§†é¢‘åœ¨å±å¹•å¤§äº992pxçš„æ—¶å€™æ˜¾ç¤ºï¼Œå°äº992pxåˆ™æ˜¾ç¤ºå›¾ç‰‡ã€‚</li><li>å¦‚æœä½ ä¸æƒ³å¯¼èˆªé€æ˜ï¼Œåˆ™å¯ä»¥è®¾ç½®åº•ä¸‹çš„color_scheme.common.headerMenuTransparentä¸ºfalse</li></ul><blockquote><p>é‚£å…è´¹çš„è§†é¢‘ä»å“ªé‡Œæ‰¾å‘¢ï¼Œæˆ‘æ¨èä¸‹é¢ä¸¤ä¸ªå…è´¹è§†é¢‘ç½‘ç«™ï¼Œç›´æ¥å³é”®å¤åˆ¶ç½‘ç«™è§†é¢‘é“¾æ¥å°±è¡Œäº†ï¼Œä¸ç”¨ä¸‹è½½ä¸‹æ¥</p></blockquote><div class="tagLink"><a class="link-card" title="mixkitè§†é¢‘ç½‘ç«™" href="https://mixkit.co/"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg" class="lazyload placeholder" data-srcset="https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="right"><p class="text">mixkitè§†é¢‘ç½‘ç«™</p><p class="url">https://mixkit.co/</p></div></a></div><div class="tagLink"><a class="link-card" title="coverrå…è´¹è§†é¢‘ç½‘ç«™" href="https://coverr.co/"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg" class="lazyload placeholder" data-srcset="https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="right"><p class="text">coverrå…è´¹è§†é¢‘ç½‘ç«™</p><p class="url">https://coverr.co/</p></div></a></div><h2 id="é¦–é¡µåº§å³é“­"><a href="#é¦–é¡µåº§å³é“­" class="headerlink" title="é¦–é¡µåº§å³é“­"></a>é¦–é¡µåº§å³é“­</h2><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">motto:  on: true  title: 'åº§å³é“­'  content: 'æ²‰æ·€åæˆ‘æ„¿æ„åšä¸ªæ¸©æš–çš„äººï¼Œæœ‰è‡ªå·±çš„å–œå¥½ï¼Œæœ‰è‡ªå·±çš„åŸåˆ™ï¼Œæœ‰è‡ªå·±çš„ä¿¡ä»°ï¼Œä¸æ€¥åŠŸè¿‘åˆ©ï¼Œä¸æµ®å¤¸è½»è–„ã€‚å® è¾±ä¸æƒŠï¼Œæ·¡å®šå®‰é€¸ï¼Œå¿ƒé™å¦‚æ°´ï¼Œä¸å¿˜åˆå¿ƒï¼Œæ–¹å¾—å§‹ç»ˆã€‚â€”â€”å‡ŒèŒœ'  background: 'url("https://img10.360buyimg.com/ddimg/jfs/t1/166587/8/21344/72069/6088c24fEda5fdeb6/f9<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é¦–é¡µå…¬å‘Š"><a href="#é¦–é¡µå…¬å‘Š" class="headerlink" title="é¦–é¡µå…¬å‘Š"></a>é¦–é¡µå…¬å‘Š</h2><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">notice</span><span class="token punctuation">:</span>  <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">seamless</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># ä¸ºtrueæ—¶ï¼Œåˆ™æ— ç¼ä¸åœæ­¢æ»šåŠ¨ï¼Œfalseæ˜¯ä¼šåœä¸€ä¸‹çš„æ»šåŠ¨</span>  <span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token string">'å…¬å‘Š'</span>  <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'url("https://img10.360buyimg.com/ddimg/jfs/t1/166587/8/21344/72069/6088c24fEda5fdeb6/f9730ab637b7ca47.png")'</span> <span class="token comment"># url("xxx") or red or #000 or rgba() ..</span>  <span class="token key atrule">list</span><span class="token punctuation">:</span> <span class="token comment"># listç›¸å½“äºæ•°ç»„å¯¹è±¡ï¼Œ[&#123;title:'xx',date: 'xx', url: 'xxx', color: 'red'&#125;]æ ¹æ®è‡ªå·±å®é™…æƒ…å†µï¼Œå¢åŠ æˆ–è€…åˆ é™¤</span>    <span class="token punctuation">-</span> <span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token string">'#åšå®¢æ›´æ–°åˆ°2.0äº†'</span>      <span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token string">'2021-04-28'</span>      <span class="token key atrule">url</span><span class="token punctuation">:</span> <span class="token string">'http://baidu.com'</span>   <span class="token comment"># å¯ä»¥ä¸ºç©º, ä¹Ÿå¯ä»¥æ˜¯æœ¬åœ°é¡µé¢åœ°å€å¦‚ '/archives'</span>      <span class="token key atrule">color</span><span class="token punctuation">:</span> red   <span class="token comment"># å­—ä½“é¢œè‰²</span>    <span class="token punctuation">-</span> <span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token string">'#æ–°å¢ è½®æ’­å›¾æ”¯æŒä¸‰ç§æ¨¡å¼äº†ï¼ŒåŠŸèƒ½ä¹Ÿå¢å¼ºäº† ~'</span>      <span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token string">'2021-04-28'</span>      <span class="token key atrule">url</span><span class="token punctuation">:</span> <span class="token string">'http://baidu.com'</span>      <span class="token key atrule">color</span><span class="token punctuation">:</span> red    <span class="token punctuation">-</span> <span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token string">'#æ–°å¢ æ”¯æŒäºŒçº§å¯¼èˆª'</span>      <span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token string">'2021-04-28'</span>      <span class="token key atrule">url</span><span class="token punctuation">:</span> <span class="token string">'http://baidu.com'</span>      <span class="token key atrule">color</span><span class="token punctuation">:</span> blue    <span class="token punctuation">-</span> <span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token string">'#æ–°å¢ å½’æ¡£ï¼Œåˆ†ç±»ç­‰é¡µé¢å¤´éƒ¨å›¾ç‰‡ä½ç½®å¯ä»¥è®¾ç½®ä¸ºè§†é¢‘ ~'</span>      <span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token string">'2021-04-28'</span>      <span class="token key atrule">url</span><span class="token punctuation">:</span> <span class="token string">'http://baidu.com'</span>      <span class="token key atrule">color</span><span class="token punctuation">:</span> <span class="token string">'#42b983'</span>    <span class="token punctuation">-</span> <span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token string">'#æ–°å¢ å¤´éƒ¨å¯¼èˆªå¯ä»¥è®¾ç½®ä¸ºåœ¨é¡¶éƒ¨é€æ˜ï¼Œå¹¶ä¸”å¯ä»¥ä»»æ„è®¾ç½®èƒŒæ™¯é¢œè‰²äº† ~'</span>      <span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token string">'2021-04-28'</span>      <span class="token key atrule">url</span><span class="token punctuation">:</span> <span class="token string">'http://baidu.com'</span>    <span class="token punctuation">-</span> <span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token string">'#æ–°å¢ é¦–é¡µå¢åŠ äº†åº§å³é“­å’Œå…¬å‘Šæ ç›® ~'</span>      <span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token string">'2021-04-28'</span>      <span class="token key atrule">url</span><span class="token punctuation">:</span> <span class="token string">'http://baidu.com'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="githubåœ°å€"><a href="#githubåœ°å€" class="headerlink" title="githubåœ°å€"></a>githubåœ°å€</h2><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># githubåœ°å€, å¤´éƒ¨å¯¼èˆªå³ä¸Šè§’çš„githubé“¾æ¥</span><span class="token key atrule">Github</span><span class="token punctuation">:</span>   <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/yuang01/hexo<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>bamboo<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç½‘ç«™faviconå’Œlogo"><a href="#ç½‘ç«™faviconå’Œlogo" class="headerlink" title="ç½‘ç«™faviconå’Œlogo"></a>ç½‘ç«™faviconå’Œlogo</h2><p>è®¾ç½®ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ä¸­çš„<code>favicon</code>å’Œlogoå±æ€§å³å¯</p><h2 id="é¡µé¢åˆ·æ–°æ—¶é¢„åŠ è½½åŠ¨ç”»"><a href="#é¡µé¢åˆ·æ–°æ—¶é¢„åŠ è½½åŠ¨ç”»" class="headerlink" title="é¡µé¢åˆ·æ–°æ—¶é¢„åŠ è½½åŠ¨ç”»"></a>é¡µé¢åˆ·æ–°æ—¶é¢„åŠ è½½åŠ¨ç”»</h2><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">preloader</span><span class="token punctuation">:</span>  <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="å›åˆ°é¡¶éƒ¨"><a href="#å›åˆ°é¡¶éƒ¨" class="headerlink" title="å›åˆ°é¡¶éƒ¨"></a>å›åˆ°é¡¶éƒ¨</h2><p>è®¾ç½®ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ä¸­çš„<code>goTop</code>å±æ€§å³å¯æ§åˆ¶éšè—æ˜¾ç¤º</p><h2 id="æ–‡ç« è¯¦æƒ…é¡µå›¾ç‰‡æ”¾å¤§åŠŸèƒ½"><a href="#æ–‡ç« è¯¦æƒ…é¡µå›¾ç‰‡æ”¾å¤§åŠŸèƒ½" class="headerlink" title="æ–‡ç« è¯¦æƒ…é¡µå›¾ç‰‡æ”¾å¤§åŠŸèƒ½"></a>æ–‡ç« è¯¦æƒ…é¡µå›¾ç‰‡æ”¾å¤§åŠŸèƒ½</h2><p>è®¾ç½®ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ä¸­çš„<code>fancybox</code>å±æ€§å³å¯</p><h2 id="ä¿®æ”¹é¡µè„š"><a href="#ä¿®æ”¹é¡µè„š" class="headerlink" title="ä¿®æ”¹é¡µè„š"></a>ä¿®æ”¹é¡µè„š</h2><p>é¡µè„šåº•éƒ¨çš„ç½‘ç«™ç»Ÿè®¡åŠŸèƒ½ï¼Œä½¿ç”¨çš„æ˜¯<a href="http://busuanzi.ibruce.info/">ä¸è’œå­</a>ï¼Œè®¾ç½®ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ä¸­çš„<code>busuanzi</code>å±æ€§å³å¯æ§åˆ¶éšè—æ˜¾ç¤º<br>é¡µè„šä¿¡æ¯å¯ä»¥åœ¨<code>/layout/_partial/footer.ejs</code> æ–‡ä»¶ä¸­è¿›è¡Œæ‰‹åŠ¨ä¿®æ”¹ã€‚æœ¬ä¸»é¢˜ä½¿ç”¨<a href="http://www.fontawesome.com.cn/faicons/">Font Awesomeå›¾æ ‡</a></p><blockquote><p><strong>æ³¨æ„</strong>: æœ¬ä¸»é¢˜ä¸­ä½¿ç”¨çš„ <code>Font Awesome</code> ç‰ˆæœ¬ä¸º <code>5.15.3</code>ã€‚</p></blockquote><h2 id="ä¿®æ”¹æ‰“èµçš„äºŒç»´ç å›¾ç‰‡"><a href="#ä¿®æ”¹æ‰“èµçš„äºŒç»´ç å›¾ç‰‡" class="headerlink" title="ä¿®æ”¹æ‰“èµçš„äºŒç»´ç å›¾ç‰‡"></a>ä¿®æ”¹æ‰“èµçš„äºŒç»´ç å›¾ç‰‡</h2><p>è®¾ç½®ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ä¸­çš„<code>donate</code>å±æ€§ä¸ºtrueï¼Œç„¶åæ›´æ”¹<code>Alipay</code>å’Œ<code>WeChatpay</code>å›¾ç‰‡è·¯å¾„å³å¯</p><h2 id="æ–‡ç« è¯¦æƒ…é¡µåˆ†äº«åŠŸèƒ½"><a href="#æ–‡ç« è¯¦æƒ…é¡µåˆ†äº«åŠŸèƒ½" class="headerlink" title="æ–‡ç« è¯¦æƒ…é¡µåˆ†äº«åŠŸèƒ½"></a>æ–‡ç« è¯¦æƒ…é¡µåˆ†äº«åŠŸèƒ½</h2><p>è®¾ç½®ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ä¸­çš„<code>sharejs</code>å±æ€§trueæˆ–è€…falseå³å¯</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># åˆ†äº«åŠŸèƒ½</span><span class="token key atrule">sharejs</span><span class="token punctuation">:</span>   <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">sites</span><span class="token punctuation">:</span> twitter<span class="token punctuation">,</span>facebook<span class="token punctuation">,</span>google<span class="token punctuation">,</span>qq<span class="token punctuation">,</span>qzone<span class="token punctuation">,</span>wechat<span class="token punctuation">,</span>weibo<span class="token punctuation">,</span>douban<span class="token punctuation">,</span>linkedin<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆ"><a href="#é¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆ" class="headerlink" title="é¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆ"></a>é¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆ</h2><p>è®¾ç½®ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ä¸­çš„<code>cursor_effect</code>å±æ€§trueæˆ–è€…falseå³å¯</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># é¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆ</span><span class="token key atrule">cursor_effect</span><span class="token punctuation">:</span>  <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">type</span><span class="token punctuation">:</span> explosion  <span class="token comment"># fireworks: ç¤¼èŠ± | explosion: çˆ†ç‚¸ | love: æµ®å‡ºçˆ±å¿ƒ | text: æµ®å‡ºæ–‡å­—</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å¤åˆ¶æˆåŠŸæé†’"><a href="#å¤åˆ¶æˆåŠŸæé†’" class="headerlink" title="å¤åˆ¶æˆåŠŸæé†’"></a>å¤åˆ¶æˆåŠŸæé†’</h2><p>å½“å¤åˆ¶å†…å®¹æ—¶å€™ï¼Œæ˜¯å¦æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæç¤º,æç¤ºè¯­å¯ä»¥è‡ªå·±ä¿®æ”¹<br>è®¾ç½®ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ä¸­çš„<code>copy</code>å±æ€§trueæˆ–è€…falseå³å¯</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># å¤åˆ¶æˆåŠŸæç¤º</span><span class="token key atrule">copy</span><span class="token punctuation">:</span>  <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token string">'æˆåŠŸ'</span>  <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token string">'å¤åˆ¶æˆåŠŸäº†å“¦'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é›ªèŠ±é£˜è½å’ŒèŠ±ç“£é£˜è½ç‰¹æ•ˆ"><a href="#é›ªèŠ±é£˜è½å’ŒèŠ±ç“£é£˜è½ç‰¹æ•ˆ" class="headerlink" title="é›ªèŠ±é£˜è½å’ŒèŠ±ç“£é£˜è½ç‰¹æ•ˆ"></a>é›ªèŠ±é£˜è½å’ŒèŠ±ç“£é£˜è½ç‰¹æ•ˆ</h2><p>è®¾ç½®ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ä¸­çš„<code>snow</code>æˆ–è€…<code>sakura</code>å±æ€§trueæˆ–è€…falseå³å¯</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># é¦–é¡µé›ªèŠ±é£˜è½æ•ˆæœ--å†¬å¤©</span><span class="token key atrule">snow</span><span class="token punctuation">:</span>  <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token key atrule">onlyPc</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># è®¾ä¸ºtrueï¼Œåªæœ‰pcç«¯æ˜¾ç¤ºé›ªèŠ±ç‰¹æ•ˆ</span><span class="token comment"># é¦–é¡µèŠ±ç“£é£˜è½æ•ˆæœ--æ˜¥å¤©</span><span class="token key atrule">sakura</span><span class="token punctuation">:</span>  <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token key atrule">onlyPc</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># è®¾ä¸ºtrueï¼Œåªæœ‰pcç«¯æ˜¾ç¤ºèŠ±ç“£ç‰¹æ•ˆ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ–‡ç« è¯¦æƒ…é¡µçš„æ ‡é¢˜æ˜¾ç¤ºä½ç½®"><a href="#æ–‡ç« è¯¦æƒ…é¡µçš„æ ‡é¢˜æ˜¾ç¤ºä½ç½®" class="headerlink" title="æ–‡ç« è¯¦æƒ…é¡µçš„æ ‡é¢˜æ˜¾ç¤ºä½ç½®"></a>æ–‡ç« è¯¦æƒ…é¡µçš„æ ‡é¢˜æ˜¾ç¤ºä½ç½®</h2><p>è®¾ç½®ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ä¸­çš„<code>postTitleTop</code>å±æ€§trueæˆ–è€…falseå³å¯ï¼Œtrueçš„æ—¶å€™ï¼Œæ˜¾ç¤ºåœ¨ä¸Šæ–¹çš„å›¾ç‰‡ä¸­ï¼Œfalseæ˜¾ç¤ºåœ¨æ–‡ç« å†…å®¹ä¸Šé¢</p><h2 id="è¾“å…¥æ¡†æ‰“å­—ç‰¹æ•ˆ"><a href="#è¾“å…¥æ¡†æ‰“å­—ç‰¹æ•ˆ" class="headerlink" title="è¾“å…¥æ¡†æ‰“å­—ç‰¹æ•ˆ"></a>è¾“å…¥æ¡†æ‰“å­—ç‰¹æ•ˆ</h2><p>æœç´¢å¼¹æ¡†ä¸­çš„è¾“å…¥æ¡†æ‰“å­—ç‰¹æ•ˆï¼Œè®¾ç½®ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ä¸­çš„<code>inputEffects</code>å±æ€§ä¸ºtrueæˆ–è€…falseå³å¯ã€‚</p><h2 id="live-2däººç‰©"><a href="#live-2däººç‰©" class="headerlink" title="live-2däººç‰©"></a>live-2däººç‰©</h2><p>è®¾ç½®ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ä¸­çš„<code>live2d</code>å±æ€§ä¸ºtrueæˆ–è€…falseï¼Œå¯ä»¥é€šè¿‡<code>modelId</code>å±æ€§é€‰æ‹©æ¨¡å‹ï¼Œæ³¨æ„ï¼Œlive-2däººç‰©åªæœ‰åœ¨å±å¹•å®½åº¦æœ€å°ä¸º992pxçš„æ—¶å€™æ‰æ˜¾ç¤º</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">modelId</span><span class="token punctuation">:</span> <span class="token number">2</span>  <span class="token comment"># 0 or 1 or 2 or 3 or 4 or 5 or 6</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="æ»šåŠ¨åŠ¨ç”»"><a href="#æ»šåŠ¨åŠ¨ç”»" class="headerlink" title="æ»šåŠ¨åŠ¨ç”»"></a>æ»šåŠ¨åŠ¨ç”»</h2><blockquote><p>è®¾ç½®ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ä¸­çš„<code>aos</code>å±æ€§å¯¹é¦–é¡µä¸­çš„æ–‡ç« åˆ—è¡¨åŠ¨ç”»è¿›è¡Œæ§åˆ¶ï¼Œå…·ä½“å‚è€ƒå®˜ç½‘<a href="https://github.com/michalsnik/aos#animations">aos.js</a><br>ç›®å‰ä½¿ç”¨çš„å¦ä¸€ä¸ªåŠ¨ç”»ç‰¹æ•ˆ</p></blockquote><h2 id="æ–‡ç« è¯¦æƒ…é¡µç›®å½•"><a href="#æ–‡ç« è¯¦æƒ…é¡µç›®å½•" class="headerlink" title="æ–‡ç« è¯¦æƒ…é¡µç›®å½•"></a>æ–‡ç« è¯¦æƒ…é¡µç›®å½•</h2><p>è®¾ç½®ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„_config.ymlæ–‡ä»¶ä¸­çš„tocçš„onå±æ€§ï¼Œæ§åˆ¶æ‰€æœ‰æ–‡ç« æ˜¯å¦æ˜¾ç¤ºï¼Œè¿˜å¯ä»¥åœ¨åœ¨å•ä¸ªæ–‡ç« mdé¡µé¢é‡Œé€šè¿‡tocå±æ€§æ§åˆ¶è¯¥æ–‡ç« çš„ç›®å½•æ˜¯å¦æ˜¾ç¤ºã€‚</p><p>tocä¸‹çš„openå‚æ•°æ§åˆ¶æ‰€æœ‰çš„æ–‡ç« é»˜è®¤æ˜¯å¦å±•å¼€æˆ–è€…æ”¶ç¼©ï¼Œè¿˜å¯ä»¥åœ¨å•ä¸ªæ–‡ç« mdé¡µé¢é‡Œé€šè¿‡tocOpenå‚æ•°æ§åˆ¶è¯¥æ–‡ç« (å…·ä½“æŸä¸ªæ–‡ç« )çš„ç›®å½•é»˜è®¤æ˜¯å¦å±•å¼€æ”¶ç¼©,å‚æ•°å¦‚ä¸‹:</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„`_config.yml`æ–‡ä»¶ä¸­çš„`toc`å±æ€§</span><span class="token comment"># æ–‡ç« ç›®å½•</span><span class="token key atrule">toc</span><span class="token punctuation">:</span>  <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># æ˜¯å¦æ˜¾ç¤º</span>  <span class="token key atrule">heading</span><span class="token punctuation">:</span> h2<span class="token punctuation">,</span> h3<span class="token punctuation">,</span> h4  <span class="token key atrule">open</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># æ˜¯å¦å±•å¼€ï¼Œfalseåˆ™æ”¶ç¼©</span>  <span class="token key atrule">showBtn</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># æ˜¯å¦æ˜¾ç¤ºå±•å¼€æ”¶ç¼©æŒ‰é’®</span>  <span class="token key atrule">showOrderNumber</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># æ˜¯å¦æ˜¾ç¤ºåºå·</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># å•ä¸ªæ–‡ç« é‡Œæ§åˆ¶æ˜¾ç¤ºå’Œéšè—ï¼Œå±•å¼€å’Œæ”¶ç¼©</span><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> æˆ‘æ˜¯æ–‡ç« æ ‡é¢˜<span class="token key atrule">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'vue'</span><span class="token punctuation">,</span> <span class="token string">'html'</span><span class="token punctuation">]</span><span class="token key atrule">categories</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'å‰ç«¯'</span><span class="token punctuation">,</span> <span class="token string">'è¿ç»´'</span><span class="token punctuation">,</span> <span class="token string">'æ”»åŸç‹®'</span><span class="token punctuation">]</span><span class="token key atrule">toc</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># è¯¥æ–‡ç« ç›®å½•ä¸æ˜¾ç¤º</span><span class="token key atrule">tocOpen</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># è¯¥æ–‡ç« ç›®å½•æ”¶ç¼©</span><span class="token punctuation">---</span>æˆ‘æ˜¯æ–‡ç« å†…å®¹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="éŸ³ä¹"><a href="#éŸ³ä¹" class="headerlink" title="éŸ³ä¹"></a>éŸ³ä¹</h2><p>è®¾ç½®ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ä¸­çš„<code>music</code>å±æ€§ï¼Œæ§åˆ¶å…¶æ˜¾ç¤ºéšè—å’Œå…¶ä»–ä¸€äº›è°ƒæ•´, <code>music</code>ä¸­çš„<code>fixed</code>å±æ€§å»ºè®®ä½¿ç”¨<code>true</code><br>å¯ä»¥æ·»åŠ å¤šä¸ªéŸ³ä¹æº</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">music</span><span class="token punctuation">:</span>  <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">autoHide</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>    <span class="token comment"># hide automaticaly</span>  <span class="token comment">#  server: tencent   #requiremusic platform: netease, tencent, kugou, xiami, baidu</span>  <span class="token comment">#  type: playlist    #require song, playlist, album, search, artist</span>  <span class="token comment">#  id: 8062553743     #requiresong id / playlist id / album id / search keyword</span>  <span class="token key atrule">source</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">server</span><span class="token punctuation">:</span> netease     <span class="token comment"># æ­Œæ‰‹-å¼ å«-è„±èƒæ¢éª¨</span>      <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">1365053719</span>      <span class="token key atrule">type</span><span class="token punctuation">:</span> song    <span class="token punctuation">-</span> <span class="token key atrule">server</span><span class="token punctuation">:</span> netease     <span class="token comment"># ä¸“è¾‘-è®¸åµ©å•æ›²é›†-è®¸åµ©</span>      <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">16959</span>      <span class="token key atrule">type</span><span class="token punctuation">:</span> album    <span class="token punctuation">-</span> <span class="token key atrule">server</span><span class="token punctuation">:</span> netease     <span class="token comment">#ä¸ªäººæ­Œå•</span>      <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">4888271555</span>      <span class="token key atrule">type</span><span class="token punctuation">:</span> playlist    <span class="token punctuation">-</span> <span class="token key atrule">server</span><span class="token punctuation">:</span> tencent     <span class="token comment"># æ­Œæ‰‹-å¼ å«-æœºå™¨çµç èœåˆ€</span>      <span class="token key atrule">id</span><span class="token punctuation">:</span> 003FaEB64D0QIa      <span class="token key atrule">type</span><span class="token punctuation">:</span> song    <span class="token punctuation">-</span> <span class="token key atrule">server</span><span class="token punctuation">:</span> tencent     <span class="token comment"># æ­Œæ‰‹-é™ˆå¥•è¿…</span>      <span class="token key atrule">id</span><span class="token punctuation">:</span> 003Nz2So3XXYek      <span class="token key atrule">type</span><span class="token punctuation">:</span> artist    <span class="token punctuation">-</span> <span class="token key atrule">server</span><span class="token punctuation">:</span> tencent     <span class="token comment"># ä¸“è¾‘-è®¤äº†å§-é™ˆå¥•è¿…</span>      <span class="token key atrule">id</span><span class="token punctuation">:</span> 003yQidc3s7P65      <span class="token key atrule">type</span><span class="token punctuation">:</span> album    <span class="token punctuation">-</span> <span class="token key atrule">server</span><span class="token punctuation">:</span> tencent     <span class="token comment">#ä¸ªäººæ­Œå•</span>      <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">8197627936</span>      <span class="token key atrule">type</span><span class="token punctuation">:</span> playlist    <span class="token punctuation">-</span> <span class="token key atrule">server</span><span class="token punctuation">:</span> kugou           <span class="token comment"># æ­Œæ‰‹-Gai-å…°èŠ±è‰</span>      <span class="token key atrule">id</span><span class="token punctuation">:</span> 0127069EBDBCF0AD6BF0B60CE873835D      <span class="token key atrule">type</span><span class="token punctuation">:</span> song    <span class="token punctuation">-</span> <span class="token key atrule">server</span><span class="token punctuation">:</span> kugou           <span class="token comment"># æ­Œæ‰‹-Gai</span>      <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">718960</span>      <span class="token key atrule">type</span><span class="token punctuation">:</span> artist    <span class="token punctuation">-</span> <span class="token key atrule">server</span><span class="token punctuation">:</span> kugou         <span class="token comment"># ä¸“è¾‘-ä¸€ä¸‡ä¸ªç†ç”±-éƒ‘æº</span>      <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">1787575</span>      <span class="token key atrule">type</span><span class="token punctuation">:</span> album    <span class="token punctuation">-</span> <span class="token key atrule">server</span><span class="token punctuation">:</span> kugou         <span class="token comment">#ä¸ªäººæ­Œå•</span>      <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">3947753</span>      <span class="token key atrule">type</span><span class="token punctuation">:</span> playlist  <span class="token key atrule">fixed</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>       <span class="token comment"># å¼€å¯å¸åº•æ¨¡å¼ï¼Œå»ºè®®å¼€å¯</span>  <span class="token key atrule">autoplay</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>   <span class="token comment"># æ˜¯å¦è‡ªåŠ¨æ’­æ”¾</span>  <span class="token key atrule">theme</span><span class="token punctuation">:</span> <span class="token string">'#42b983'</span>  <span class="token key atrule">loop</span><span class="token punctuation">:</span> <span class="token string">'all'</span>       <span class="token comment"># éŸ³é¢‘å¾ªç¯æ’­æ”¾, å¯é€‰å€¼: 'all', 'one', 'none'</span>  <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token string">'random'</span>   <span class="token comment"># éŸ³é¢‘å¾ªç¯é¡ºåº, å¯é€‰å€¼: 'list', 'random'</span>  <span class="token key atrule">preload</span><span class="token punctuation">:</span> <span class="token string">'auto'</span>   <span class="token comment"># é¢„åŠ è½½ï¼Œå¯é€‰å€¼: 'none', 'metadata', 'auto'</span>  <span class="token key atrule">volume</span><span class="token punctuation">:</span> <span class="token number">0.7</span>       <span class="token comment"># é»˜è®¤éŸ³é‡ï¼Œè¯·æ³¨æ„æ’­æ”¾å™¨ä¼šè®°å¿†ç”¨æˆ·è®¾ç½®ï¼Œç”¨æˆ·æ‰‹åŠ¨è®¾ç½®éŸ³é‡åé»˜è®¤éŸ³é‡å³å¤±æ•ˆ</span>  <span class="token key atrule">listFolded</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment"># åˆ—è¡¨é»˜è®¤æŠ˜å </span>  <span class="token key atrule">hideLrc</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>     <span class="token comment"># éšè—æ­Œè¯</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç‰ˆæƒä¿¡æ¯"><a href="#ç‰ˆæƒä¿¡æ¯" class="headerlink" title="ç‰ˆæƒä¿¡æ¯"></a>ç‰ˆæƒä¿¡æ¯</h2><p>å¯ä»¥åœ¨<code>source/_posts/xxx.md</code>æ–‡ä»¶ä¸­è®¾ç½®<code>copyright</code>trueæˆ–è€…falseï¼Œå•ç‹¬è®¾ç½®æŸä¸ªæ–‡ç« çš„ç‰ˆæƒä¿¡æ¯æ˜¯å¦æ˜¾ç¤ºï¼Œä¹Ÿå¯ä»¥åœ¨ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ä¸­çš„<code>copyright</code>å±æ€§è®¾ç½®trueæˆ–è€…falseå¯¹æ‰€æœ‰æ–‡ç« çš„ç‰ˆæƒä¿¡æ¯è¿›è¡Œæ˜¾ç¤ºéšè—æ§åˆ¶</p><h2 id="æ–‡ç« ç½®é¡¶"><a href="#æ–‡ç« ç½®é¡¶" class="headerlink" title="æ–‡ç« ç½®é¡¶"></a>æ–‡ç« ç½®é¡¶</h2><p>å¯ä»¥åœ¨<code>source/_posts/xxx.md</code>æ–‡ä»¶ä¸­è®¾ç½®<code>top: true</code>ï¼Œå°†è¯¥æ–‡ç« æ”¾åœ¨é¦–é¡µçš„æ–‡ç« ç½®é¡¶æ ç›®ä¸­ï¼Œå¯ä»¥åœ¨ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ä¸­çš„<code>topArticle</code>å±æ€§è®¾ç½®trueæˆ–è€…falseæ§åˆ¶é¦–é¡µçš„æ–‡ç« ç½®é¡¶æ ç›®æ˜¾ç¤ºå’Œéšè—ã€‚</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> Hello World<span class="token key atrule">date</span><span class="token punctuation">:</span> 2021<span class="token punctuation">-</span>10<span class="token punctuation">-</span>21 21<span class="token punctuation">:</span><span class="token number">11</span><span class="token key atrule">top</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token punctuation">---</span>æˆ‘æ˜¯æ–‡ç« å†…å®¹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è¯„è®º"><a href="#è¯„è®º" class="headerlink" title="è¯„è®º"></a>è¯„è®º</h2><p>ä¸»é¢˜ä¸­å†…ç½®äº†<code>valine</code>, <code>miniValine</code>, <code>livere</code>, <code>gitment</code>, <code>gitalk</code>, <code>changyan</code>è¯„è®º<br>é€šè¿‡ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ä¸­çš„ç›¸åº”å±æ€§è¿›è¡Œè®¾ç½®<br>æ¨èä½¿ç”¨<code>valine</code>å’Œ<code>livere</code><br>è¿™é‡Œé‡ç‚¹è¯´ä¸€ä¸‹<code>valine</code>è¯„è®ºé…ç½®</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">valine</span><span class="token punctuation">:</span>  <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># æ˜¯å¦å¯ç”¨</span>  <span class="token key atrule">appid</span><span class="token punctuation">:</span> <span class="token comment"># ä½ çš„appid --> https://valine.js.org/quickstart.htmlï¼Œè¯·é˜…è¯»è¿™ä¸ªè·å–appidå’Œappkey</span>  <span class="token key atrule">appkey</span><span class="token punctuation">:</span> <span class="token comment"># ä½ çš„key</span>  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> <span class="token string">''</span> <span class="token comment"># åŒ¿åè€…å¤´åƒé€‰é¡¹ https://valine.js.org/avatar.html è®¿å®¢çš„å¤´åƒ,æœ€å¥½å¯ç”¨ä¸‹é¢çš„`requiredFields`ä¸­çš„é‚®ç®±å¿…å¡«ï¼Œå¡«å†™qqé‚®ç®±ï¼Œå¤´åƒä¼šå˜æˆqqå¤´åƒ</span>  <span class="token key atrule">placeholder</span><span class="token punctuation">:</span> <span class="token string">'å®¢å®˜ï¼Œè¯´ç‚¹ä»€ä¹ˆå§'</span> <span class="token comment"># è¯„è®ºå†…å®¹è¾“å…¥æ¡†çš„ placeholder</span>  <span class="token key atrule">master</span><span class="token punctuation">:</span> <span class="token string">'xxxxxx'</span> <span class="token comment"># åšä¸»æ ‡ç­¾è¯†åˆ«ï¼Œåšä¸»é‚®ç®±md5 å¯ä»¥å»md5åŠ å¯†ç½‘ç«™ï¼Œä¾‹å¦‚ https://md5jiami.51240.com/ ï¼Œå°†è‡ªå·±çš„é‚®ç®±è¾“å…¥ï¼Œ å¾—åˆ° 32ä½å°å†™ çš„å­—ç¬¦ä¸²å¡«å…¥è¿™é‡Œ</span>  <span class="token key atrule">friends</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'xxxxxxx'</span><span class="token punctuation">,</span> <span class="token string">'xxxxxx'</span><span class="token punctuation">]</span> <span class="token comment"># å°ä¼™ä¼´çš„ é‚®ç®±md5ï¼Œ æ˜¯ä¸ªæ•°ç»„</span>  <span class="token key atrule">requiredFields</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'nick'</span><span class="token punctuation">,</span> <span class="token string">'mail'</span><span class="token punctuation">]</span> <span class="token comment"># è®¾ç½®å¿…å¡«é¡¹ ['nick', 'mail'] nickä¸ºæ˜µç§°å¿…å¡«ï¼Œ mailä¸ºé‚®ç®±å¿…å¡«, ç©ºæ•°ç»„ï¼Œåˆ™ä¸æ ¡éªŒ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é¼ æ ‡æ‰‹åŠ¿"><a href="#é¼ æ ‡æ‰‹åŠ¿" class="headerlink" title="é¼ æ ‡æ‰‹åŠ¿"></a>é¼ æ ‡æ‰‹åŠ¿</h2><p>è®¾ç½®ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„_config.ymlæ–‡ä»¶ä¸­çš„cursorå±æ€§ï¼Œå¯è‡ªè¡Œæ›¿æ¢é“¾æ¥ï¼Œå‚æ•°å¦‚ä¸‹:</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># é¼ æ ‡æ‰‹åŠ¿</span><span class="token key atrule">cursor</span><span class="token punctuation">:</span>  <span class="token key atrule">pointer</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//zhutix.com/wp<span class="token punctuation">-</span>content/themes/b2/x2.cur  <span class="token key atrule">default</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//zhutix.com/wp<span class="token punctuation">-</span>content/themes/b2/x1.cur  <span class="token key atrule">text</span><span class="token punctuation">:</span>   <span class="token key atrule">zoom-in</span><span class="token punctuation">:</span>   <span class="token key atrule">zoom-out</span><span class="token punctuation">:</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å­—æ•°ç»Ÿè®¡"><a href="#å­—æ•°ç»Ÿè®¡" class="headerlink" title="å­—æ•°ç»Ÿè®¡"></a>å­—æ•°ç»Ÿè®¡</h2><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># wordcountå­—æ•°ç»Ÿè®¡, éœ€è¦ npm i hexo-wordcount å®‰è£…</span><span class="token key atrule">wordcount</span><span class="token punctuation">:</span>  <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="å¤©æ°”"><a href="#å¤©æ°”" class="headerlink" title="å¤©æ°”"></a>å¤©æ°”</h2><p>è®¾ç½®ä¸»é¢˜æ–‡ä»¶å¤¹<code>_config.yml</code>çš„weatherå±æ€§trueæˆ–è€…falseï¼Œæ§åˆ¶æ˜¾ç¤ºå’Œéšè—</p><h2 id="èƒŒå½±å½©å¸¦"><a href="#èƒŒå½±å½©å¸¦" class="headerlink" title="èƒŒå½±å½©å¸¦"></a>èƒŒå½±å½©å¸¦</h2><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># èƒŒå½±å½©å¸¦</span><span class="token key atrule">ribbon</span><span class="token punctuation">:</span>  <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="å›¾ç‰‡æ‡’åŠ è½½"><a href="#å›¾ç‰‡æ‡’åŠ è½½" class="headerlink" title="å›¾ç‰‡æ‡’åŠ è½½"></a>å›¾ç‰‡æ‡’åŠ è½½</h2><p>è®¾ç½®ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ä¸­çš„loadingImgå±æ€§ï¼Œå¯è‡ªè¡Œä¿®æ”¹é¢„åŠ è½½å›¾ç‰‡é“¾æ¥</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># å›¾ç‰‡æ‡’åŠ è½½</span><span class="token comment"># https://www.npmjs.com/package/vanilla-lazyload</span><span class="token key atrule">lazyload</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">js</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//cdn.jsdelivr.net/npm/vanilla<span class="token punctuation">-</span>lazyload@17.1.0/dist/lazyload.min.js  <span class="token key atrule">onlypost</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token key atrule">loadingImg</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//img2.baidu.com/it/u=2037979560<span class="token punctuation">,</span>2772131037<span class="token important">&amp;fm=26&amp;fmt=auto&amp;gp=0.jpg</span>  <span class="token key atrule">blurIn</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># æ¨¡ç³ŠåŠ è½½æ•ˆæœ ï¼ˆloadingImgä¸ºç©ºæ—¶æœ‰æ•ˆï¼‰</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å…³ç¯"><a href="#å…³ç¯" class="headerlink" title="å…³ç¯"></a>å…³ç¯</h2><p>è®¾ç½®ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ä¸­çš„darkå±æ€§ï¼Œæ§åˆ¶å¤´éƒ¨å¯¼èˆªçš„å¼€å…³ç¯æŒ‰é’®æ˜¯å¦æ˜¾ç¤ºï¼Œæ§åˆ¶æ˜¯å¦é»˜è®¤æ˜¾ç¤ºå…³ç¯, å…·ä½“å¦‚ä¸‹</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># é»‘å¤œæ¨¡å¼, å…³ç¯</span><span class="token key atrule">dark</span><span class="token punctuation">:</span>  <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># æ˜¯å¦åœ¨å¤´éƒ¨å¯¼èˆªä¸Šæ˜¾ç¤ºå¼€å…³ç¯</span>  <span class="token key atrule">default</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token comment"># trueä¸ºé»˜è®¤å…³ç¯çŠ¶æ€ï¼ˆåˆ·æ–°é¡µé¢å’Œè·³è½¬é¡µé¢éƒ½æ˜¯å…³ç¯çŠ¶æ€ï¼‰ï¼Œfalseä¸ºé»˜è®¤å¼€ç¯çŠ¶æ€(ç½‘é¡µç¬¬ä¸€æ¬¡æ‰“å¼€çš„æ—¶å€™ä¸ºå¼€ç¯çŠ¶æ€)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å¼¹å¹•"><a href="#å¼¹å¹•" class="headerlink" title="å¼¹å¹•"></a>å¼¹å¹•</h2><p>æ˜¾ç¤ºå½“å‰é¡µé¢çš„å¼¹å¹•</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># å¼¹å¹• åªå¯¹valineè¯„è®ºæœ‰æ•ˆï¼Œéœ€è¦å¼€å¯valineè¯„è®º</span><span class="token key atrule">danmu</span><span class="token punctuation">:</span>  <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">loop</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># è®¾ä¸ºtrueï¼Œåˆ™å¼¹å¹•å®Œäº†ä¹‹åï¼Œç»§ç»­æŸ¥è¯¢è¯„è®ºæ¥å£ï¼Œå°†è¯¥ç¯‡æ–‡ç« çš„è¯„è®ºå†æ˜¾ç¤ºåœ¨å¼¹å¹•é‡Œ</span>  <span class="token key atrule">delay</span><span class="token punctuation">:</span> <span class="token number">5000</span> <span class="token comment"># æ¯æ¡å¼¹å¹•ä¹‹é—´å‡ºç°çš„é—´éš”æ—¶é—´</span>  <span class="token key atrule">speed</span><span class="token punctuation">:</span> <span class="token number">20</span> <span class="token comment"># å¼¹å¹•è¿è¡Œçš„é€Ÿåº¦, è¶Šå°è¶Šå¿«</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç¯ç¬¼"><a href="#ç¯ç¬¼" class="headerlink" title="ç¯ç¬¼"></a>ç¯ç¬¼</h2><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">lantern</span><span class="token punctuation">:</span>  <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">left</span><span class="token punctuation">:</span> <span class="token string">'æ˜¥'</span> <span class="token comment"># å·¦è¾¹ç¯ç¬¼çš„æ–‡å­—ï¼Œ ç©ºå­—ç¬¦ä¸²åˆ™æ²¡æœ‰æ–‡å­—</span>  <span class="token key atrule">right</span><span class="token punctuation">:</span> <span class="token string">'èŠ‚'</span> <span class="token comment"># å³è¾¹ç¯ç¬¼çš„æ–‡å­—</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ–‡ç« æ ‡é¢˜æ‰“å­—ç‰¹æ•ˆ"><a href="#æ–‡ç« æ ‡é¢˜æ‰“å­—ç‰¹æ•ˆ" class="headerlink" title="æ–‡ç« æ ‡é¢˜æ‰“å­—ç‰¹æ•ˆ"></a>æ–‡ç« æ ‡é¢˜æ‰“å­—ç‰¹æ•ˆ</h2><p>æ–‡ç« è¯¦æƒ…é¡µä¸Šçš„æ ‡é¢˜æ‰“å­—æ•ˆæœ</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># æ–‡ç« è¯¦æƒ…é¡µå›¾ç‰‡ä¸Šçš„æ ‡é¢˜æ‰“å­—æ•ˆæœ</span><span class="token key atrule">typed</span><span class="token punctuation">:</span>  <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">loop</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># æ˜¯å¦å¾ªç¯</span>  <span class="token key atrule">showCursor</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># æ˜¯å¦æ˜¾ç¤ºå…‰æ ‡</span>  <span class="token key atrule">startDelay</span><span class="token punctuation">:</span> <span class="token number">100</span> <span class="token comment"># å¼€å§‹å»¶è¿Ÿ</span>  <span class="token key atrule">typeSpeed</span><span class="token punctuation">:</span> <span class="token number">100</span> <span class="token comment"># æ‰“å­—é€Ÿåº¦</span>  <span class="token key atrule">backSpeed</span><span class="token punctuation">:</span> <span class="token number">50</span> <span class="token comment"># åˆ é™¤é€Ÿåº¦</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ–‡ç« å¤´éƒ¨æ°”æ³¡æ˜¾ç¤º"><a href="#æ–‡ç« å¤´éƒ¨æ°”æ³¡æ˜¾ç¤º" class="headerlink" title="æ–‡ç« å¤´éƒ¨æ°”æ³¡æ˜¾ç¤º"></a>æ–‡ç« å¤´éƒ¨æ°”æ³¡æ˜¾ç¤º</h2><p>æ–‡ç« è¯¦æƒ…é¡µå¤´éƒ¨æ°”æ³¡æ•ˆæœ</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># æ–‡ç« è¯¦æƒ…é¡µå›¾ç‰‡ä¸Šçš„æ°”æ³¡æ•ˆæœ</span><span class="token key atrule">bubble</span><span class="token punctuation">:</span>  <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="é¦–é¡µæ–‡ç« å›¾ç‰‡æ˜¾ç¤ºä½ç½®"><a href="#é¦–é¡µæ–‡ç« å›¾ç‰‡æ˜¾ç¤ºä½ç½®" class="headerlink" title="é¦–é¡µæ–‡ç« å›¾ç‰‡æ˜¾ç¤ºä½ç½®"></a>é¦–é¡µæ–‡ç« å›¾ç‰‡æ˜¾ç¤ºä½ç½®</h2><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># é¦–é¡µæ–‡ç« å›¾ç‰‡æ˜¯å¦ä¸€å·¦ä¸€å³äº¤é”™æ˜¾ç¤º</span><span class="token key atrule">homePostImgsPosition</span><span class="token punctuation">:</span>  <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">left</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># å½“ä¸Šé¢çš„onè®¾ç½®ä¸ºfalseï¼ˆä¸äº¤å‰æ˜¾ç¤ºï¼‰ï¼Œåˆ™æŒ‡å®šleftä¸ºtrueçš„æ—¶å€™ï¼Œå›¾ç‰‡åœ¨å·¦è¾¹æ˜¾ç¤º</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å½’æ¡£ã€æ ‡ç­¾ã€åˆ†ç±»ã€å…³äºæˆ‘ã€å‹æƒ…é“¾æ¥é¡µé¢å›¾ç‰‡è‡ªå®šä¹‰"><a href="#å½’æ¡£ã€æ ‡ç­¾ã€åˆ†ç±»ã€å…³äºæˆ‘ã€å‹æƒ…é“¾æ¥é¡µé¢å›¾ç‰‡è‡ªå®šä¹‰" class="headerlink" title="å½’æ¡£ã€æ ‡ç­¾ã€åˆ†ç±»ã€å…³äºæˆ‘ã€å‹æƒ…é“¾æ¥é¡µé¢å›¾ç‰‡è‡ªå®šä¹‰"></a>å½’æ¡£ã€æ ‡ç­¾ã€åˆ†ç±»ã€å…³äºæˆ‘ã€å‹æƒ…é“¾æ¥é¡µé¢å›¾ç‰‡è‡ªå®šä¹‰</h2><p>é€šè¿‡ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ä¸­çš„ç›¸åº”å±æ€§è¿›è¡Œè®¾ç½®ï¼Œå±æ€§å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># å½’æ¡£é¡µé¢å›¾ç‰‡ or 'http://xxx'</span><span class="token key atrule">archiveImg</span><span class="token punctuation">:</span> <span class="token string">'/medias/archive.jpg'</span><span class="token comment"># æ ‡ç­¾é¡µé¢å›¾ç‰‡</span><span class="token key atrule">tagImg</span><span class="token punctuation">:</span> <span class="token string">'/medias/tag.jpg'</span><span class="token comment"># æ ‡ç­¾è¯¦æƒ…é¡µé¢å›¾ç‰‡</span><span class="token key atrule">tagDetailImg</span><span class="token punctuation">:</span> <span class="token string">'/medias/tagDetail.jpg'</span><span class="token comment"># åˆ†ç±»é¡µé¢å›¾ç‰‡</span><span class="token key atrule">categoriesImg</span><span class="token punctuation">:</span> <span class="token string">'/medias/categories.jpg'</span><span class="token comment">#åˆ†ç±»è¯¦æƒ…é¡µé¢å›¾ç‰‡</span><span class="token key atrule">categoryDetailImg</span><span class="token punctuation">:</span> <span class="token string">'/medias/categoryDetail.jpg'</span><span class="token comment"># å…³äºæˆ‘é¡µé¢å›¾ç‰‡</span><span class="token key atrule">aboutImg</span><span class="token punctuation">:</span> <span class="token string">'/medias/about.jpg'</span><span class="token comment"># å‹æƒ…é“¾æ¥é¡µé¢å›¾ç‰‡</span><span class="token key atrule">friendsImg</span><span class="token punctuation">:</span> <span class="token string">'/medias/friend.jpg'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ›´æ”¹ä¸»é¢˜é¢œè‰²"><a href="#æ›´æ”¹ä¸»é¢˜é¢œè‰²" class="headerlink" title="æ›´æ”¹ä¸»é¢˜é¢œè‰²"></a>æ›´æ”¹ä¸»é¢˜é¢œè‰²</h2><p>é»˜è®¤ä¸»é¢˜é¢œè‰²æ˜¯ç»¿è‰²(#42b983)ï¼Œå¯ä»¥é€šè¿‡æ›´æ”¹ä¸»é¢˜æ–‡ä»¶å¤¹<code>hexo-theme-bamboo</code>ä¸‹çš„æ–‡ä»¶ï¼š<code>source/css/_partial/custom.styl</code>,å°†æ–‡ä»¶ä¸­çš„æ‰€æœ‰(#42b983)é¢œè‰²å€¼æ›¿æ¢æˆä½ æƒ³è¦çš„é¢œè‰²ï¼Œç„¶åæ›´æ”¹è¯¥æ–‡ä»¶ä¸‹çš„<code>blockquote</code>èƒŒæ™¯é¢œè‰²ï¼Œä»£ç å¦‚ä¸‹:</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">// æ–‡ç« è¯¦æƒ…é¡µçš„blockquoteï¼Œmdä¸­çš„ > æ ‡ç­¾çš„å·¦è¾¹æ¡†å’ŒèƒŒæ™¯é¢œè‰².post-detail</span> <span class="token punctuation">&#123;</span>  <span class="token selector">blockquote</span> <span class="token punctuation">&#123;</span>      <span class="token property">border-left</span><span class="token punctuation">:</span> 4px solid #42b983<span class="token punctuation">;</span>      <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>66<span class="token punctuation">,</span> 185<span class="token punctuation">,</span> 131<span class="token punctuation">,</span> .1<span class="token punctuation">)</span><span class="token punctuation">;</span> // æ›´æ”¹è¿™ä¸ªèƒŒæ™¯é¢œè‰²ä¸ºä½ æƒ³è¦çš„çš„é¢œè‰²å€¼  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>blockquoteæ ·å¼æŒ‡çš„æ˜¯ä¸‹é¢è¿™ä¸ª</p><blockquote><p>æˆ‘æ˜¯blockquote</p></blockquote><p>ä¾‹å¦‚ï¼Œæˆ‘å°†è¯¥æ–‡ä»¶ä¸‹çš„æ‰€æœ‰é¢œè‰²è®¾ç½®ä¸º<code>skyblue</code>ï¼Œæ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹<br><img src="https://img13.360buyimg.com/ddimg/jfs/t1/120336/2/13322/273081/5f69b8d1E737e6277/8fdc796d2d3a82b3.png" class="lazyload placeholder" data-srcset="https://img13.360buyimg.com/ddimg/jfs/t1/120336/2/13322/273081/5f69b8d1E737e6277/8fdc796d2d3a82b3.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="theme-color"></p><p>ä»£ç é«˜äº®é¢œè‰²ï¼Œå¯ä»¥é€šè¿‡ä¹‹å‰ä»‹ç»çš„ä»£ç é«˜äº®è¿›è¡Œæ›´æ”¹</p><h2 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h2><p>ä»£ç é«˜äº®å¦‚é‡åˆ°èŠ±æ‹¬å·å˜æˆäº†<code>&amp;#123;&amp;#125;</code>è¿™æ ·çš„å­—ç¬¦ä¸²ï¼Œåœ¨æ ¹ç›®å½•ä¸‹è¾“å…¥npm install <a href="mailto:&#x68;&#x65;&#x78;&#111;&#x40;&#52;&#x2e;&#x32;&#x2e;&#x31;">&#x68;&#x65;&#x78;&#111;&#x40;&#52;&#x2e;&#x32;&#x2e;&#x31;</a>å³å¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æœ¬ç«™ä»‹ç» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸»é¢˜ä»‹ç»-åŸºæœ¬é…ç½®</title>
      <link href="/post/ben-zhan-jie-shao/zhu-ti-jie-shao-ji-ben-pei-zhi/"/>
      <url>/post/ben-zhan-jie-shao/zhu-ti-jie-shao-ji-ben-pei-zhi/</url>
      
        <content type="html"><![CDATA[<p>è¿™æ˜¯ä¸€æ¬¾<span class='p large red'>H</span><span class='p large green'>E</span><span class='p large blue'>X</span><span class='p large info'>O</span>ä¸»é¢˜</p><blockquote><p><strong>æ³¨æ„</strong>: iconä½¿ç”¨çš„ <a href="https://fontawesome.dashgame.com/">Font Awesome</a> ç‰ˆæœ¬ä¸º <code>5.15.3</code>ã€‚</p></blockquote><h2 class="bamboo-h " id="ä¸‹è½½">ä¸‹è½½</h2><br/><p>é¦–å…ˆä½ éœ€è¦æœ‰ä¸€ä¸ª <a href="https://hexo.io/zh-cn/">Hexo</a> ï¼ŒæŒ‰ç…§å®˜ç½‘çš„æŒ‡å¯¼åšæ³•ï¼Œå¾ˆå®¹æ˜“çš„å°±èƒ½åˆ›å»ºä¸€ä¸ªhexoåšå®¢ã€‚</p><div class="tabs" id="tab-id"><ul class="nav-tabs"><li class="tab active"><a class="#tab-id-1">Githubå®‰è£…</a></li><li class="tab"><a class="#tab-id-2">Giteeå®‰è£…</a></li><li class="tab"><a class="#tab-id-3">npmå®‰è£…</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab-id-1"><p>å½“ä½ æœ‰äº†hexoåšå®¢ä¹‹åï¼Œè¿›å…¥<code>themes</code>æ–‡ä»¶å¤¹ä¸‹ä½¿ç”¨ <code>Git clone</code> å‘½ä»¤æ¥ä¸‹è½½:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone https://github.com/jimyfengqi/hexo-theme-bomboo.git<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div class="tagLink"><a class="link-card" title="hexo-theme-bamboo" href="https://gitub.com/yuang01/hexo-theme-bamboo"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg" class="lazyload placeholder" data-srcset="https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="right"><p class="text">hexo-theme-bamboo</p><p class="url">https://gitub.com/yuang01/hexo-theme-bamboo</p></div></a></div><p>æˆ–è€…ç‚¹å‡»ä¸‹è½½zipåŒ…ï¼Œè§£å‹æ”¾å…¥themesæ–‡ä»¶å¤¹ä¸‹</p><p><span class='btn center large'><a class="button" href='https://github.com/jimyfengqi/hexo-theme-bomboo/archive/dev.zip' title='å¼€å§‹ä¸‹è½½'><i class='fa fa-download'></i>å¼€å§‹ä¸‹è½½</a></span></p></div><div class="tab-pane" id="tab-id-2"><p>å½“ä½ æœ‰äº†hexoåšå®¢ä¹‹åï¼Œè¿›å…¥<code>themes</code>æ–‡ä»¶å¤¹ä¸‹ä½¿ç”¨ <code>Git clone</code> å‘½ä»¤æ¥ä¸‹è½½:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone https://gitee.com/yuang01/hexo-theme-bamboo.git<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div class="tagLink"><a class="link-card" title="hexo-theme-bamboo" href="https://gitee.com/yuang01/hexo-theme-bamboo"><span class="link-card-backdrop" style="background-image: url(https://img10.360buyimg.com/ddimg/jfs/t1/154000/26/17136/4231/601cb685E622bcee5/1a923dacb1d98f64.jpg)"></span><div class="left"><img src="https://img10.360buyimg.com/ddimg/jfs/t1/154000/26/17136/4231/601cb685E622bcee5/1a923dacb1d98f64.jpg" class="lazyload placeholder" data-srcset="https://img10.360buyimg.com/ddimg/jfs/t1/154000/26/17136/4231/601cb685E622bcee5/1a923dacb1d98f64.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"/></div><div class="right"><p class="text">hexo-theme-bamboo</p><p class="url">https://gitee.com/yuang01/hexo-theme-bamboo</p></div></a></div><p>æˆ–è€…ç‚¹å‡»ä¸‹è½½zipåŒ…ï¼Œè§£å‹æ”¾å…¥themesæ–‡ä»¶å¤¹ä¸‹</p><p><span class='btn center large'><a class="button" href='https://gitee.com/yuang01/hexo-theme-bamboo/repository/archive/dev.zip' title='å¼€å§‹ä¸‹è½½'><i class='fa fa-download'></i>å¼€å§‹ä¸‹è½½</a></span></p></div><div class="tab-pane" id="tab-id-3"><blockquote><p>æ­¤æ–¹æ³•åªæ”¯æŒHexoåœ¨5.0.0ç‰ˆæœ¬ä»¥ä¸Š<br>é€šè¿‡ npm å®‰è£…å¹¶ä¸ä¼šåœ¨ themes é‡Œç”Ÿæˆä¸»é¢˜æ–‡ä»¶å¤¹ï¼Œè€Œæ˜¯åœ¨ node_modules é‡Œç”Ÿæˆ</p></blockquote><p>åœ¨ä½ çš„åšå®¢æ ¹ç›®å½•é‡Œ</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i hexo-theme-bamboo<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>å‡çº§æ–¹æ³•ï¼šåœ¨åšå®¢æ ¹ç›®å½•ä¸‹ï¼Œè¿è¡Œ npm update hexo-theme-bamboo</p></blockquote><h3 id="åº”ç”¨ä¸»é¢˜"><a href="#åº”ç”¨ä¸»é¢˜" class="headerlink" title="åº”ç”¨ä¸»é¢˜"></a>åº”ç”¨ä¸»é¢˜</h3><p>ä¿®æ”¹hexoæ ¹ç›®å½•ä¸‹çš„ç«™ç‚¹é…ç½®æ–‡ä»¶_config.ymlï¼ŒæŠŠä¸»é¢˜æ”¹ä¸ºbamboo</p><p>æ¥ç€åœ¨hexoæ ¹ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶_config.bamboo.yml,ä»node_modulesæ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ°hexo-theme-bambooæ–‡ä»¶å¤¹ä¸‹çš„_config.ymlï¼Œå°†é‡Œé¢çš„å†…å®¹å¤åˆ¶åˆ°_config.bamboo.ymlæ–‡ä»¶ä¸­å³å¯ï¼Œåœ¨_config.bamboo.ymlæ–‡ä»¶ä¸­å¯¹ä¸»é¢˜è¿›è¡Œé…ç½®</p></div></div></div><h2 class="bamboo-h " id="åŸºæœ¬é…ç½®">åŸºæœ¬é…ç½®</h2><br/> <h3 id="åˆ‡æ¢ä¸»é¢˜"><a href="#åˆ‡æ¢ä¸»é¢˜" class="headerlink" title="åˆ‡æ¢ä¸»é¢˜"></a>åˆ‡æ¢ä¸»é¢˜</h3><p>ä¿®æ”¹ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> çš„  <code>theme</code> çš„å€¼ï¼š<code>theme: hexo-theme-bamboo</code></p><h4 id="config-yml-æ–‡ä»¶çš„å…¶å®ƒä¿®æ”¹å»ºè®®"><a href="#config-yml-æ–‡ä»¶çš„å…¶å®ƒä¿®æ”¹å»ºè®®" class="headerlink" title="_config.yml æ–‡ä»¶çš„å…¶å®ƒä¿®æ”¹å»ºè®®:"></a><code>_config.yml</code> æ–‡ä»¶çš„å…¶å®ƒä¿®æ”¹å»ºè®®:</h4><ul><li>è¯·ä¿®æ”¹ <code>_config.yml</code> çš„ <code>url</code> çš„å€¼ä¸ºä½ çš„ç½‘ç«™ä¸» <code>URL</code>ï¼ˆå¦‚ï¼š<code>http://xxx.github.io</code>ï¼‰ã€‚<code>author</code>å€¼æ”¹ä¸ºä½ çš„åç§°ï¼ˆå¦‚ï¼šyuangï¼‰ï¼Œ<code>description</code>å€¼éšä¾¿å†™ä¸€æ®µæè¿°ï¼ˆå¦‚ï¼šåƒç£¨ä¸‡å‡»è¿˜åšåŠ²ï¼Œä»»å°”ä¸œè¥¿å—åŒ—é£ï¼‰</li><li>å¦‚æœä½ æ˜¯ä¸­æ–‡ç”¨æˆ·ï¼Œåˆ™å»ºè®®ä¿®æ”¹ <code>language</code> çš„å€¼ä¸º <code>zh-CN</code>ã€‚</li></ul><h3 id="ä»£ç é«˜äº®"><a href="#ä»£ç é«˜äº®" class="headerlink" title="ä»£ç é«˜äº®"></a>ä»£ç é«˜äº®</h3><p>æœ¬ä¸»é¢˜æ”¯æŒä¸‰ç§ä»£ç é«˜äº®æ–¹å¼ï¼Œå‰ä¸¤ç§æ˜¯hexoå†…ç½®çš„highlightå’Œprismjsï¼Œåä¸€ç§æ˜¯ä½¿ç”¨çš„æ’ä»¶hexo-prism-pluginã€‚ä¸‰ç§æ–¹å¼çœ‹ä¸ªäººå–œå¥½é€‰æ‹©ä¸€ç§ä½œä¸ºé«˜äº®</p><div class="tabs" id="tab-2"><ul class="nav-tabs"><li class="tab active"><a class="#tab-2-1">highlightä¸»é¢˜é»˜è®¤</a></li><li class="tab"><a class="#tab-2-2">prismjs(æ¨è)</a></li><li class="tab"><a class="#tab-2-3">hexo-prismjs-plugin</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab-2-1"><p>é¦–å…ˆéœ€è¦åœ¨æ ¹ç›®å½•ä¸‹çš„_config.yml æ–‡ä»¶ä¸­ï¼Œå°†highlightçš„enableè®¾ç½®ä¸ºtrueï¼Œè¿™æ ·å°±å¼€å¯äº†highlightçš„ä»£ç é«˜äº®ï¼Œé»˜è®¤è¿™ä¸ªæ˜¯å¼€å¯çš„ã€‚ç„¶åä½ å¯ä»¥åœ¨æœ¬ä¸»é¢˜ç›®å½•ä¸‹çš„_config.yml æ–‡ä»¶ä¸­é€šè¿‡highlightå‚æ•°ï¼Œè‡ªå®šä¹‰ä»£ç é«˜äº®é¢œè‰²ï¼Œå¦‚ä¸‹æ‰€ç¤º</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># https://github.com/chriskempson/tomorrow-theme</span><span class="token key atrule">highlight</span><span class="token punctuation">:</span>  <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'#2d2d2d'</span>  <span class="token key atrule">currentLine</span><span class="token punctuation">:</span> <span class="token string">'#393939'</span>  <span class="token key atrule">selection</span><span class="token punctuation">:</span> <span class="token string">'#515151'</span>  <span class="token key atrule">foreground</span><span class="token punctuation">:</span> <span class="token string">'#cccccc'</span>  <span class="token key atrule">comment</span><span class="token punctuation">:</span> <span class="token string">'#999999'</span>  <span class="token key atrule">red</span><span class="token punctuation">:</span> <span class="token string">'#f2777a'</span>  <span class="token key atrule">orange</span><span class="token punctuation">:</span> <span class="token string">'#f99157'</span>  <span class="token key atrule">yellow</span><span class="token punctuation">:</span> <span class="token string">'#ffcc66'</span>  <span class="token key atrule">green</span><span class="token punctuation">:</span> <span class="token string">'#99cc99'</span>  <span class="token key atrule">aqua</span><span class="token punctuation">:</span> <span class="token string">'#66cccc'</span>  <span class="token key atrule">blue</span><span class="token punctuation">:</span> <span class="token string">'#6699cc'</span>  <span class="token key atrule">purple</span><span class="token punctuation">:</span> <span class="token string">'#cc99cc'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><div class="tab-pane" id="tab-2-2"><p>è¯·å…ˆç¡®ä¿ä½ çš„<span class='p red'>hexoç‰ˆæœ¬ä¸º5.0</span> ä»¥ä¸Š,åœ¨æ ¹ç›®å½•ä¸‹çš„package.jsonä¸­å¯ä»¥æŸ¥çœ‹hexoçš„ç‰ˆæœ¬ã€‚<br>å¦‚æœä¸æ˜¯5.0.ä»¥ä¸Šï¼Œè¯·å…ˆå‡çº§ï¼Œä¾‹å¦‚åœ¨æ ¹ç›®å½•ä¸‹ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼Œè¿™ä¸ªä¸‹è½½çš„ç‰ˆæœ¬å·æ˜¯5.3.0ç‰ˆæœ¬ï¼Œä½ å¯ä»¥æŒ‡å®šä¸‹è½½æœ€æ–°çš„ç‰ˆæœ¬</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo@5.3.0<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>é¦–å…ˆéœ€è¦åœ¨æ ¹ç›®å½•ä¸‹çš„_config.yml æ–‡ä»¶ä¸­ï¼Œå°†highlightçš„enableè®¾ç½®ä¸ºfalseï¼Œç„¶å<br>å°†prismjsçš„enableè®¾ç½®ä¸ºtrueï¼Œå¦‚ä¸‹æ‰€ç¤º</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">prismjs</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">preprocess</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">line_number</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">tab_replace</span><span class="token punctuation">:</span> <span class="token string">''</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åå¯ä»¥é€šè¿‡æœ¬ä¸»é¢˜ç›®å½•ä¸‹çš„_config.yml æ–‡ä»¶ä¸­prismjså‚æ•°æ¥é€‰æ‹©ä¸»é¢˜<br>ä¾‹å¦‚:</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">prismjs</span><span class="token punctuation">:</span>  <span class="token key atrule">theme</span><span class="token punctuation">:</span> <span class="token string">'default'</span> <span class="token comment"># default, coy, dark, funky, okaidia, solarizedlight, tomorrow, twilight</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¦å¤–ï¼Œå½“ä½ ä½¿ç”¨çš„æ˜¯prismjsä½œä¸ºä»£ç é«˜äº®çš„è¯,ä½ è¿˜å¯ä»¥åœ¨å•ç‹¬çš„æ–‡ç« ä¸­è®¾ç½®ä»£ç é«˜äº®ä¸»é¢˜ï¼Œè¿™æ ·å¯ä»¥å®ç°ä¸åŒçš„é¡µé¢ï¼Œæœ‰ä¸åŒçš„ä»£ç é«˜äº®ä¸»é¢˜ï¼Œæ–‡ç« ä¸­è®¾ç½®ä»£ç å¦‚ä¸‹</p><p>title: Hexoä¸»é¢˜â€“Bambooä»‹ç»<br>date: 2021-01-5 23:28<br>swiper: true<br>swiperImg: â€˜/medias/11.jpgâ€™<br>img: â€˜/medias/7.jpgâ€™<br>categories: å‰ç«¯<br>tags: [Hexo, hexo-theme-bamboo]<br>top: true<br>prismjs: dark # è®¾ç½®è¯¥ç¯‡æ–‡ç« çš„ä»£ç é«˜äº®ä¸»é¢˜ä¸ºdark</p></div><div class="tab-pane" id="tab-2-3"><p>å¦‚æœä½¿ç”¨hexo-prism-pluginè¿™ä¸ªHexoæ’ä»¶æ¥åšä»£ç é«˜äº®ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i -S hexo-prism-plugin<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç„¶åï¼Œä¿®æ”¹ Hexo æ ¹ç›®å½•ä¸‹çš„_config.yml æ–‡ä»¶ä¸­çš„ highlight.enable çš„å€¼ä¸º falseï¼Œprismjs.enableå€¼ä¸ºfalse, å¹¶æ–°å¢è¯¥æ’ä»¶ç›¸å…³çš„é…ç½®ï¼Œä¸»è¦é…ç½®å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">highlight</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token key atrule">prismjs</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token key atrule">preprocess</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">line_number</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">tab_replace</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token key atrule">prism_plugin</span><span class="token punctuation">:</span>  <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">'preprocess'</span>    <span class="token comment"># realtime/preprocess</span>  <span class="token key atrule">theme</span><span class="token punctuation">:</span> <span class="token string">'tomorrow'</span>    <span class="token comment"># è¿™é‡Œå¯ä»¥é€‰æ‹©ä¸åŒæ ·å¼çš„ä¸»é¢˜</span>  <span class="token key atrule">line_number</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>    <span class="token comment"># default false</span>  custom_css<span class="token punctuation">:</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ä¸ªæ’ä»¶ç›®å‰æ¸²æŸ“æœ‰ç‚¹å°é—®é¢˜ï¼Œä»£ç é«˜äº®å¦‚é‡åˆ°èŠ±æ‹¬å·å˜æˆäº†&#123;&#125;è¿™æ ·çš„å­—ç¬¦ä¸²ï¼Œä»¥ä¸‹æ–¹å¼å¯è§£å†³ï¼š<br>å°†node_modules\hexo-prism-plugin\src\index.jsä¸­çš„mapæ”¹ä¸ºå¦‚ä¸‹</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token string">'&amp;#39;'</span><span class="token operator">:</span> <span class="token string">'\''</span><span class="token punctuation">,</span>  <span class="token string">'&amp;amp;'</span><span class="token operator">:</span> <span class="token string">'&amp;'</span><span class="token punctuation">,</span>  <span class="token string">'&amp;gt;'</span><span class="token operator">:</span> <span class="token string">'>'</span><span class="token punctuation">,</span>  <span class="token string">'&amp;lt;'</span><span class="token operator">:</span> <span class="token string">'&lt;'</span><span class="token punctuation">,</span>  <span class="token string">'&amp;quot;'</span><span class="token operator">:</span> <span class="token string">'"'</span><span class="token punctuation">,</span>  <span class="token string">'&amp;#123;'</span><span class="token operator">:</span> <span class="token string">'&#123;'</span><span class="token punctuation">,</span>  <span class="token string">'&amp;#125;'</span><span class="token operator">:</span> <span class="token string">'&#125;'</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åé‡å¯æœåŠ¡ï¼Œhexo clean &amp;&amp; hexo så³å¯<br>å¸è½½å‘½ä»¤å¦‚ä¸‹ï¼Œå¦‚æœä½ å®‰è£…äº†æ­¤æ’ä»¶ï¼Œåæ¥æƒ³ä½¿ç”¨å‰ä¸¤ç§é«˜äº®ï¼Œè¯·å…ˆå¸è½½æ­¤æ’ä»¶</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> un hexo-install prism-plugin<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></div></div><p>è¿™ä¸ªä¸»é¢˜é‡‡ç”¨çš„æ˜¯<a href="https://github.com/ele828/hexo-prism-plugin">hexo-prism-plugin</a>è¿™ä¸ªHexoæ’ä»¶æ¥åšä»£ç é«˜äº®ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i -S hexo-prism-plugin<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç„¶åï¼Œä¿®æ”¹ Hexo æ ¹ç›®å½•ä¸‹ <code>_config.yml</code> æ–‡ä»¶ä¸­ <code>highlight.enable</code> çš„å€¼ä¸º <code>false</code>ï¼Œå¹¶æ–°å¢ <code>prism</code> æ’ä»¶ç›¸å…³çš„é…ç½®ï¼Œä¸»è¦é…ç½®å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">highlight</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token key atrule">prism_plugin</span><span class="token punctuation">:</span>  <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">'preprocess'</span>    <span class="token comment"># realtime/preprocess</span>  <span class="token key atrule">theme</span><span class="token punctuation">:</span> <span class="token string">'tomorrow'</span>    <span class="token comment"># è¿™é‡Œå¯ä»¥é€‰æ‹©ä¸åŒæ ·å¼çš„ä¸»é¢˜</span>  <span class="token key atrule">line_number</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>    <span class="token comment"># default false</span>  custom_css<span class="token punctuation">:</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æœç´¢"><a href="#æœç´¢" class="headerlink" title="æœç´¢"></a>æœç´¢</h3><p>æœ¬ä¸»é¢˜ä¸­è¿˜ä½¿ç”¨åˆ°äº† <a href="https://github.com/wzpan/hexo-generator-search">hexo-generator-search</a> çš„ Hexo æ’ä»¶æ¥åšå†…å®¹æœç´¢ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-generator-search --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ä»¥ä¸‹çš„é…ç½®é¡¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">search</span><span class="token punctuation">:</span>  <span class="token key atrule">path</span><span class="token punctuation">:</span> search.xml  <span class="token key atrule">field</span><span class="token punctuation">:</span> post<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>åœ¨ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ä¸­è®¾ç½®<code>search</code>ä¸ºtrueæˆ–è€…falseæ§åˆ¶æ˜¾ç¤ºéšè—</p><h3 id="æ–°å»ºåˆ†ç±»-categories-é¡µ"><a href="#æ–°å»ºåˆ†ç±»-categories-é¡µ" class="headerlink" title="æ–°å»ºåˆ†ç±» categories é¡µ"></a>æ–°å»ºåˆ†ç±» categories é¡µ</h3><p><code>categories</code> é¡µæ˜¯ç”¨æ¥å±•ç¤ºæ‰€æœ‰åˆ†ç±»çš„é¡µé¢ï¼Œä¹Ÿå°±æ˜¯å¯¼èˆªä¸Šçš„åˆ†ç±»é¡µé¢ï¼Œå¦‚æœåœ¨ä½ çš„åšå®¢ <code>source</code> ç›®å½•ä¸‹è¿˜æ²¡æœ‰ <code>categories/index.md</code> æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æ‰‹åŠ¨æˆ–è€…ä½¿ç”¨å‘½ä»¤æ–°å»ºä¸€ä¸ªï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo new page <span class="token string">"categories"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç¼–è¾‘ä½ åˆšåˆšæ–°å»ºçš„é¡µé¢æ–‡ä»¶ <code>/source/categories/index.md</code>ï¼Œè‡³å°‘éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> categories<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2021-10-14 15:30:30</span><span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"categories"</span><span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token string">"categories"</span><span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ–°å»ºæ ‡ç­¾-tags-é¡µ"><a href="#æ–°å»ºæ ‡ç­¾-tags-é¡µ" class="headerlink" title="æ–°å»ºæ ‡ç­¾ tags é¡µ"></a>æ–°å»ºæ ‡ç­¾ tags é¡µ</h3><p><code>tags</code> é¡µæ˜¯ç”¨æ¥å±•ç¤ºæ‰€æœ‰æ ‡ç­¾çš„é¡µé¢ï¼Œå¦‚æœåœ¨ä½ çš„åšå®¢ <code>source</code> ç›®å½•ä¸‹è¿˜æ²¡æœ‰ <code>tags/index.md</code> æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æ–°å»ºä¸€ä¸ªï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo new page <span class="token string">"tags"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç¼–è¾‘ä½ åˆšåˆšæ–°å»ºçš„é¡µé¢æ–‡ä»¶ <code>/source/tags/index.md</code>ï¼Œè‡³å°‘éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> tags<span class="token key atrule">date</span><span class="token punctuation">:</span> 2021<span class="token punctuation">-</span>10 15<span class="token punctuation">:</span><span class="token datetime number">30:30</span><span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"tags"</span><span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token string">"tags"</span><span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ–°å»ºå…³äºæˆ‘-about-é¡µ"><a href="#æ–°å»ºå…³äºæˆ‘-about-é¡µ" class="headerlink" title="æ–°å»ºå…³äºæˆ‘ about é¡µ"></a>æ–°å»ºå…³äºæˆ‘ about é¡µ</h3><p><code>about</code> é¡µæ˜¯ç”¨æ¥å±•ç¤º<strong>å…³äºæˆ‘å’Œæˆ‘çš„åšå®¢</strong>ä¿¡æ¯çš„é¡µé¢ï¼Œå¦‚æœåœ¨ä½ çš„åšå®¢ <code>source</code> ç›®å½•ä¸‹è¿˜æ²¡æœ‰ <code>about/index.md</code> æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æ–°å»ºä¸€ä¸ªï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo new page <span class="token string">"about"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç„¶åå¯ä»¥åœ¨æœ¬ä¸»é¢˜ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ä¸‹ï¼Œç¼–è¾‘ä»¥ä¸‹å­—æ®µè¿›è¡Œå…³äºæˆ‘é¡µé¢ä¿¡æ¯çš„æ›´æ”¹</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">baseInfo <span class="token comment"># åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬å¹´é¾„ï¼Œæ€§åˆ«ï¼Œåæ ‡ï¼ŒçŠ¶æ€</span>skills   <span class="token comment"># æŠ€èƒ½</span>project   <span class="token comment"># æŠ€èƒ½</span>socialAccounts <span class="token comment"># ç¤¾äº¤è´¦å·</span>games   <span class="token comment"># æ¸¸æˆ</span>books   <span class="token comment">#ä¹¦ç±</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><details green><summary pointer> baseInfoåŸºæœ¬ä¿¡æ¯ </summary>              <div class='content'>              <p><code>baseInfo</code>ä¸»è¦åŒ…å«å¹´é¾„ï¼Œæ€§åˆ«ï¼Œåæ ‡ï¼ŒçŠ¶æ€ï¼Œæ ¼å¼å¦‚ä¸‹ï¼Œ<strong>æ³¨æ„ç©ºæ ¼ç¼©è¿›å“¦</strong></p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">baseInfo</span><span class="token punctuation">:</span>  <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># æ˜¯å¦æ˜¾ç¤º</span>  <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">99</span> <span class="token comment"># å¹´é¾„</span>  <span class="token key atrule">sex</span><span class="token punctuation">:</span> <span class="token string">'ç”·'</span> <span class="token comment"># æ€§åˆ«</span>  <span class="token key atrule">coordinate</span><span class="token punctuation">:</span> <span class="token string">'ç«æ˜Ÿ'</span> <span class="token comment"># åæ ‡</span>  <span class="token key atrule">status</span><span class="token punctuation">:</span> <span class="token string">'åˆ’æ°´ä¸­'</span> <span class="token comment"># çŠ¶æ€</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>              </div>            </details><details cyan><summary pointer> skillå¡«å†™æˆ‘çš„æŠ€èƒ½ </summary>              <div class='content'>              <p><code>skills</code> å¡«å†™æˆ‘çš„æŠ€èƒ½ï¼Œæ ¼å¼å¦‚ä¸‹ï¼Œ<strong>æ³¨æ„ç©ºæ ¼ç¼©è¿›å“¦</strong></p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># å…³äºæˆ‘ æŠ€èƒ½</span><span class="token key atrule">skills</span><span class="token punctuation">:</span>  <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># æ˜¯å¦æ˜¾ç¤º</span>  <span class="token key atrule">data</span><span class="token punctuation">:</span> <span class="token comment"># è¿™ä¸ªdataä¸èƒ½å¿˜äº†ï¼Œä¸‹é¢çš„å­—æ®µæ³¨æ„ç¼©è¿›</span>    <span class="token key atrule">HTML5</span><span class="token punctuation">:</span> <span class="token comment"># è¿™é‡Œå†™ä½ çš„æŠ€èƒ½åç§°ï¼Œå¦‚ HTML5æˆ–è€…java</span>      <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'red'</span> <span class="token comment"># è¿›åº¦æ¡é¢œè‰²</span>      <span class="token key atrule">percent</span><span class="token punctuation">:</span> 90% <span class="token comment"># è¿›åº¦æ¡ç™¾åˆ†æ¯”</span>    <span class="token key atrule">JavaScript</span><span class="token punctuation">:</span>      <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'linear-gradient(120deg, #a1c4fd 0%, #c2e9fb 100%)'</span>      <span class="token key atrule">percent</span><span class="token punctuation">:</span> 85%    <span class="token key atrule">CSS</span><span class="token punctuation">:</span>      <span class="token key atrule">background</span><span class="token punctuation">:</span> <span class="token string">'#000'</span>      <span class="token key atrule">percent</span><span class="token punctuation">:</span> 70%<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>              </div>            </details><details green><summary pointer> socialAccountså¡«å†™æˆ‘çš„ç¤¾äº¤è´¦å· </summary>              <div class='content'>              <p><code>socialAccounts</code>å¡«å†™æˆ‘çš„ç¤¾äº¤è´¦å·ï¼Œæ ¼å¼å¦‚ä¸‹ï¼Œ<strong>æ³¨æ„ç©ºæ ¼ç¼©è¿›å“¦</strong></p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">socialAccounts</span><span class="token punctuation">:</span>   <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">data</span><span class="token punctuation">:</span> <span class="token comment"># è¿™ä¸ªdataä¸èƒ½å¿˜äº†ï¼Œä¸‹é¢çš„å­—æ®µæ³¨æ„ç¼©è¿›</span>    <span class="token key atrule">QQ</span><span class="token punctuation">:</span> <span class="token comment"># ç¤¾äº¤è½¯ä»¶åç§°</span>      <span class="token key atrule">icon</span><span class="token punctuation">:</span> fa fa<span class="token punctuation">-</span>qq  <span class="token comment"># å›¾æ ‡ï¼Œå¯ä»¥ä¸ºç©ºï¼Œå‰é¢åŠ ä¸Šfaï¼Œå‡å¦‚å›¾æ ‡åç§°å«fa-quoraï¼Œå°±æ˜¯ fa fa-quora, </span>      <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token number">12345678</span> <span class="token comment"># è´¦å·åç§°</span>      <span class="token key atrule">url</span><span class="token punctuation">:</span> <span class="token string">'http://www.baidu.com'</span> <span class="token comment"># è´¦å·é“¾æ¥åœ°å€</span>    <span class="token key atrule">å¾®ä¿¡</span><span class="token punctuation">:</span>      <span class="token key atrule">icon</span><span class="token punctuation">:</span> fa fa<span class="token punctuation">-</span>weixin      <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token number">12345678</span>      <span class="token key atrule">url</span><span class="token punctuation">:</span> <span class="token string">'http://www.baidu.com'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>              </div>            </details><details green><summary pointer> gameså¡«å†™æˆ‘çš„æ¸¸æˆä¿¡æ¯ </summary>              <div class='content'>              <p><code>games</code> å¡«å†™æˆ‘çš„æ¸¸æˆï¼Œæ ¼å¼å¦‚ä¸‹ï¼Œ<strong>æ³¨æ„ç©ºæ ¼ç¼©è¿›å“¦</strong></p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">games</span><span class="token punctuation">:</span>  <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># æ˜¯å¦æ˜¾ç¤º</span>  <span class="token key atrule">data</span><span class="token punctuation">:</span> <span class="token comment"># è¿™ä¸ªdataä¸èƒ½å¿˜äº†ï¼Œä¸‹é¢çš„å­—æ®µæ³¨æ„ç¼©è¿›</span>    <span class="token key atrule">ç‹è€…è£è€€</span><span class="token punctuation">:</span> <span class="token comment"># æ¸¸æˆåç§°ï¼Œä¸‹é¢çš„imgæ˜¯æ¸¸æˆå›¾ç‰‡</span>      <span class="token key atrule">img</span><span class="token punctuation">:</span> <span class="token string">'https://pic2.zhimg.com/80/v2-54730a36304842b86a57a237b8b39945_720w.jpg?source=1940ef5c'</span>    <span class="token key atrule">è‹±é›„æ€</span><span class="token punctuation">:</span>      <span class="token key atrule">img</span><span class="token punctuation">:</span> <span class="token string">'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=1909008358,1888649581&amp;fm=26&amp;gp=0.jpg'</span>    <span class="token key atrule">å’Œå¹³ç²¾è‹±</span><span class="token punctuation">:</span>      <span class="token key atrule">img</span><span class="token punctuation">:</span> <span class="token string">'https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1595596612190&amp;di=dbf2030780758c4724ecb1f07f2f4f73&amp;imgtype=0&amp;src=http%3A%2F%2Fimgup04.51wxjz.com%2F51wxjz%2F2019-06%2F05%2F09%2F15596983468928_0.png'</span>    <span class="token key atrule">è‹±é›„è”ç›Ÿ</span><span class="token punctuation">:</span>      <span class="token key atrule">img</span><span class="token punctuation">:</span> <span class="token string">'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3035766587,2822701570&amp;fm=26&amp;gp=0.jpg'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>              </div>            </details><details green><summary pointer> bookså¡«å†™æˆ‘çš„ä¹¦ç± </summary>              <div class='content'>              <p><code>books</code> å¡«å†™æˆ‘çš„ä¹¦ç±ï¼Œæ ¼å¼å¦‚ä¸‹ï¼Œ<strong>æ³¨æ„ç©ºæ ¼ç¼©è¿›å“¦</strong></p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">books</span><span class="token punctuation">:</span>  <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># æ˜¯å¦æ˜¾ç¤º</span>  <span class="token key atrule">data</span><span class="token punctuation">:</span> <span class="token comment"># è¿™ä¸ªdataä¸èƒ½å¿˜äº†ï¼Œä¸‹é¢çš„å­—æ®µæ³¨æ„ç¼©è¿›</span>    <span class="token key atrule">æ˜æœé‚£äº›äº‹å„¿</span><span class="token punctuation">:</span> <span class="token comment"># ä¹¦ç±åç§°ï¼Œä¸‹é¢çš„imgæ˜¯ä¹¦ç±å›¾ç‰‡</span>      <span class="token key atrule">img</span><span class="token punctuation">:</span> <span class="token string">'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=2736238052,2078148140&amp;fm=26&amp;gp=0.jpg'</span>    <span class="token key atrule">æ˜¥ç§‹å·¦ä¼ </span><span class="token punctuation">:</span>      <span class="token key atrule">img</span><span class="token punctuation">:</span> <span class="token string">'https://pic2.zhimg.com/50/v2-6f33f60312de25ddcb795fc81ee91b38_720w.jpg?source=54b3c3a5'</span>    <span class="token key atrule">å­™å­å…µæ³•</span><span class="token punctuation">:</span>      <span class="token key atrule">img</span><span class="token punctuation">:</span> <span class="token string">'https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=710999414,899378807&amp;fm=26&amp;gp=0.jpg'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>              </div>            </details><h3 id="æ–°å»ºå‹æƒ…è¿æ¥-friends-é¡µ"><a href="#æ–°å»ºå‹æƒ…è¿æ¥-friends-é¡µ" class="headerlink" title="æ–°å»ºå‹æƒ…è¿æ¥ friends é¡µ"></a>æ–°å»ºå‹æƒ…è¿æ¥ friends é¡µ</h3><div class="tabs" id="tab-3"><ul class="nav-tabs"><li class="tab active"><a class="#tab-3-1">Markdownæ–‡ä»¶é…ç½®(å½“å‰ä½¿ç”¨çš„)</a></li><li class="tab"><a class="#tab-3-2">æ–°å»ºjsonæ–‡ä»¶(æ—§ç‰ˆç”¨çš„-ä¸æ¨è)</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab-3-1"><blockquote><p>è¯¥åŠŸèƒ½éœ€è¦ä¸»é¢˜ç‰ˆæœ¬ä¸º2.1.5+</p></blockquote><p>friends é¡µæ˜¯ç”¨æ¥å±•ç¤ºå‹æƒ…è¿æ¥ä¿¡æ¯çš„é¡µé¢ï¼Œå¦‚æœåœ¨ä½ çš„åšå®¢ source ç›®å½•ä¸‹è¿˜æ²¡æœ‰ friends/index.md æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æ–°å»ºä¸€ä¸ªï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-none"><code class="language-none">hexo new page &quot;friends&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç¼–è¾‘ä½ åˆšåˆšæ–°å»ºçš„é¡µé¢æ–‡ä»¶ /source/friends/index.md</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> friends<span class="token key atrule">date</span><span class="token punctuation">:</span> 2021<span class="token punctuation">-</span>010<span class="token punctuation">-</span>17 15<span class="token punctuation">:</span><span class="token datetime number">30:30</span><span class="token key atrule">onlyTitle</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># åªæ˜¾ç¤ºtitle</span><span class="token key atrule">toc</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># ä¸æ˜¾ç¤ºæ–‡ç« ç›®å½•</span><span class="token comment"># type: "friends" # è¿™ä¸ªä¸è¦äº†</span><span class="token comment"># layout: "friends" # è¿™ä¸ªä¸è¦äº†</span><span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ—¶å€™ä¼šç”Ÿæˆsource/friends/index.mdæ–‡ä»¶ï¼Œåœ¨mdæ–‡ä»¶é‡Œè‡ªå®šä¹‰å†™å‹é“¾å°±è¡Œäº†ã€‚</p></div><div class="tab-pane" id="tab-3-2"><p><code>friends</code> é¡µæ˜¯ç”¨æ¥å±•ç¤º<strong>å‹æƒ…è¿æ¥</strong>ä¿¡æ¯çš„é¡µé¢ï¼Œå¦‚æœåœ¨ä½ çš„åšå®¢ <code>source</code> ç›®å½•ä¸‹è¿˜æ²¡æœ‰ <code>friends/index.md</code> æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æ–°å»ºä¸€ä¸ªï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo new page <span class="token string">"friends"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç¼–è¾‘ä½ åˆšåˆšæ–°å»ºçš„é¡µé¢æ–‡ä»¶ <code>/source/friends/index.md</code>ï¼Œè‡³å°‘éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> friends<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2020-09-14 15:30:30</span><span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"friends"</span><span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token string">"friends"</span><span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åŒæ—¶ï¼Œåœ¨ä½ çš„åšå®¢ <code>source</code> ç›®å½•ä¸‹æ–°å»º <code>_data</code> ç›®å½•ï¼Œåœ¨ <code>_data</code> ç›®å½•ä¸­æ–°å»º <code>friends.json</code> æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span><span class="token punctuation">&#123;</span>  <span class="token property">"avatar"</span><span class="token operator">:</span> <span class="token string">"https://pic2.zhimg.com/80/v2-d1bd22e7dc847ae62028ae336d55ded9_720w.jpg?source=1940ef5c"</span><span class="token punctuation">,</span>  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"å¦‚æ¢¦äº¦å¦‚å¹»"</span><span class="token punctuation">,</span>  <span class="token property">"introduction"</span><span class="token operator">:</span> <span class="token string">"çƒŸé›¨å¦‚æ±Ÿå—"</span><span class="token punctuation">,</span>  <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://gitee.com/yuang01"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>  <span class="token property">"avatar"</span><span class="token operator">:</span> <span class="token string">"https://pic1.zhimg.com/80/v2-1a60e33c33810a4d81a80282b8ca7a33_720w.jpg?source=1940ef5c"</span><span class="token punctuation">,</span>  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"é’ç¯æš®é›¨"</span><span class="token punctuation">,</span>  <span class="token property">"introduction"</span><span class="token operator">:</span> <span class="token string">"å±±æ°´å¦‚å¢¨æŸ“"</span><span class="token punctuation">,</span>  <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://gitee.com/yuang01"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>  <span class="token property">"avatar"</span><span class="token operator">:</span> <span class="token string">"https://pic2.zhimg.com/80/v2-134122ca13d041f5ec1f2680f2677318_720w.jpg?source=1940ef5c"</span><span class="token punctuation">,</span>  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"å¯„æƒ…å±±æ°´èŠ±è‰é—´"</span><span class="token punctuation">,</span>  <span class="token property">"introduction"</span><span class="token operator">:</span> <span class="token string">"å®›å¦‚ä¸¹é’æœªå¹²"</span><span class="token punctuation">,</span>  <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://gitee.com/yuang01"</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></div></div><h3 id="ä¸­æ–‡é“¾æ¥è½¬æ‹¼éŸ³ï¼ˆå¯é€‰çš„ï¼‰"><a href="#ä¸­æ–‡é“¾æ¥è½¬æ‹¼éŸ³ï¼ˆå¯é€‰çš„ï¼‰" class="headerlink" title="ä¸­æ–‡é“¾æ¥è½¬æ‹¼éŸ³ï¼ˆå¯é€‰çš„ï¼‰"></a>ä¸­æ–‡é“¾æ¥è½¬æ‹¼éŸ³ï¼ˆå¯é€‰çš„ï¼‰</h3><p>å¦‚æœä½ çš„æ–‡ç« åç§°æ˜¯ä¸­æ–‡çš„ï¼Œé‚£ä¹ˆ Hexo é»˜è®¤ç”Ÿæˆçš„æ°¸ä¹…é“¾æ¥ä¹Ÿä¼šæœ‰ä¸­æ–‡ï¼Œè¿™æ ·ä¸åˆ©äº <code>SEO</code>ï¼Œä¸” <code>gitment</code> è¯„è®ºå¯¹ä¸­æ–‡é“¾æ¥ä¹Ÿä¸æ”¯æŒã€‚æˆ‘ä»¬å¯ä»¥ç”¨ <a href="https://github.com/viko16/hexo-permalink-pinyin">hexo-permalink-pinyin</a> Hexo æ’ä»¶ä½¿åœ¨ç”Ÿæˆæ–‡ç« æ—¶ç”Ÿæˆä¸­æ–‡æ‹¼éŸ³çš„æ°¸ä¹…é“¾æ¥ã€‚<br>å®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i hexo-permalink-pinyin --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ä»¥ä¸‹çš„é…ç½®é¡¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">permalink_pinyin</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">separator</span><span class="token punctuation">:</span> <span class="token string">'-'</span> <span class="token comment"># default: '-'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>æ³¨</strong>ï¼šé™¤äº†æ­¤æ’ä»¶å¤–ï¼Œ<a href="https://github.com/rozbo/hexo-abbrlink">hexo-abbrlink</a> æ’ä»¶ä¹Ÿå¯ä»¥ç”Ÿæˆéä¸­æ–‡çš„é“¾æ¥ã€‚</p></blockquote><h3 id="æ·»åŠ -RSS-è®¢é˜…æ”¯æŒï¼ˆå¯é€‰çš„ï¼‰"><a href="#æ·»åŠ -RSS-è®¢é˜…æ”¯æŒï¼ˆå¯é€‰çš„ï¼‰" class="headerlink" title="æ·»åŠ  RSS è®¢é˜…æ”¯æŒï¼ˆå¯é€‰çš„ï¼‰"></a>æ·»åŠ  RSS è®¢é˜…æ”¯æŒï¼ˆå¯é€‰çš„ï¼‰</h3><p>æœ¬ä¸»é¢˜ä¸­è¿˜ä½¿ç”¨åˆ°äº† <a href="https://github.com/hexojs/hexo-generator-feed">hexo-generator-feed</a> çš„ Hexo æ’ä»¶æ¥åš <code>RSS</code>ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-generator-feed --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ä»¥ä¸‹çš„é…ç½®é¡¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">feed</span><span class="token punctuation">:</span>  <span class="token key atrule">type</span><span class="token punctuation">:</span> atom  <span class="token key atrule">path</span><span class="token punctuation">:</span> atom.xml  <span class="token key atrule">limit</span><span class="token punctuation">:</span> <span class="token number">20</span>  <span class="token key atrule">hub</span><span class="token punctuation">:</span>  <span class="token key atrule">content</span><span class="token punctuation">:</span>  <span class="token key atrule">content_limit</span><span class="token punctuation">:</span> <span class="token number">140</span>  <span class="token key atrule">content_limit_delim</span><span class="token punctuation">:</span> <span class="token string">' '</span>  <span class="token key atrule">order_by</span><span class="token punctuation">:</span> <span class="token punctuation">-</span>date<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 class="bamboo-h " id="Pjax">Pjax</h2><br/><p>é¡µé¢ä¸åˆ·æ–°è·³è½¬ï¼ŒéŸ³ä¹å¯ä»¥ä¸é—´æ–­æ’­æ”¾ã€‚å…³é—­åˆ™è·³è½¬é¡µé¢æ—¶å€™åˆ·æ–°é¡µé¢</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">pjax</span><span class="token punctuation">:</span>  <span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">animation</span><span class="token punctuation">:</span> circle <span class="token comment"># false, nprogress, circle</span>  <span class="token key atrule">animationColor</span><span class="token punctuation">:</span> <span class="token string">'orangered'</span> <span class="token comment"># animationä¸º nprogressæ—¶å€™çš„åŠ¨ç”»é¢œè‰², red or #000 ...</span>  <span class="token key atrule">cacheBust</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># url åœ°å€è¿½åŠ æ—¶é—´æˆ³ï¼Œç”¨ä»¥é¿å…æµè§ˆå™¨ç¼“å­˜</span>  <span class="token key atrule">timeout</span><span class="token punctuation">:</span> <span class="token number">5000</span>    <span class="token comment"># The timeout in milliseconds for the XHR requests. Set to 0 to disable the timeout.</span>  <span class="token key atrule">banUrl</span><span class="token punctuation">:</span>          <span class="token comment"># è¢«å±è”½çš„ url åœ°å€å°†ä¸å¯ç”¨ pjax è·³è½¬ï¼Œå¯ä»¥åœ¨æ§åˆ¶å°ä¸‹ä½¿ç”¨ window.location.pathname è·å–</span>      <span class="token comment"># - '/xxx/'     </span>      <span class="token comment"># - '/xxx/' </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æœ¬ç«™ä»‹ç» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoç»¼åˆç¯‡ä¹‹ç½‘ç«™åœ°å›¾sitemap</title>
      <link href="/post/django-quan-wang-zhan-da-jian/django-zong-he-pian-zhi-wang-zhan-di-tu-sitemap/"/>
      <url>/post/django-quan-wang-zhan-da-jian/django-zong-he-pian-zhi-wang-zhan-di-tu-sitemap/</url>
      
        <content type="html"><![CDATA[<h1 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h1><p>ç½‘ç«™åœ°å›¾æ˜¯æ ¹æ®ç½‘ç«™çš„ç»“æ„ã€æ¡†æ¶ã€å†…å®¹ï¼Œç”Ÿæˆçš„å¯¼èˆªç½‘é¡µï¼Œæ˜¯ä¸€ä¸ªç½‘ç«™æ‰€æœ‰é“¾æ¥çš„å®¹å™¨ã€‚å¾ˆå¤šç½‘ç«™çš„è¿æ¥å±‚æ¬¡æ¯”è¾ƒæ·±ï¼Œèœ˜è››å¾ˆéš¾æŠ“å–åˆ°ï¼Œç½‘ç«™åœ°å›¾å¯ä»¥æ–¹ä¾¿æœç´¢å¼•æ“æˆ–è€…ç½‘ç»œèœ˜è››æŠ“å–ç½‘ç«™é¡µé¢ï¼Œäº†è§£ç½‘ç«™çš„æ¶æ„ï¼Œä¸ºç½‘ç»œèœ˜è››æŒ‡è·¯ï¼Œå¢åŠ ç½‘ç«™å†…å®¹é¡µé¢çš„æ”¶å½•æ¦‚ç‡ã€‚ç½‘ç«™åœ°å›¾ä¸€èˆ¬å­˜æ”¾åœ¨åŸŸåæ ¹ç›®å½•ä¸‹å¹¶å‘½åä¸ºsitemap<br>ä¸€ä¸ªå…¸å‹çš„sitemapï¼Œå…¶å†…å®¹ç‰‡æ®µå¦‚ä¸‹ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">è¯¥ XML æ–‡ä»¶å¹¶æœªåŒ…å«ä»»ä½•å…³è”çš„æ ·å¼ä¿¡æ¯ã€‚æ–‡æ¡£æ ‘æ˜¾ç¤ºå¦‚ä¸‹ã€‚ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>urlset</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>loc</span><span class="token punctuation">></span></span>http://example.com/blog/read/?blogid=63<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>loc</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lastmod</span><span class="token punctuation">></span></span>2020-12-01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lastmod</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>changefreq</span><span class="token punctuation">></span></span>weekly<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>changefreq</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>priority</span><span class="token punctuation">></span></span>0.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>priority</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>loc</span><span class="token punctuation">></span></span>http://example.com/blog/read/?blogid=61<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>loc</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lastmod</span><span class="token punctuation">></span></span>2020-12-01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lastmod</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>changefreq</span><span class="token punctuation">></span></span>weekly<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>changefreq</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>priority</span><span class="token punctuation">></span></span>0.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>priority</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>urlset</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Djangoè‡ªå¸¦äº†ä¸€ä¸ªé«˜çº§çš„ç”Ÿæˆç½‘ç«™åœ°å›¾çš„æ¡†æ¶ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°åˆ›å»ºå‡ºXMLæ ¼å¼çš„ç½‘ç«™åœ°å›¾ã€‚åˆ›å»ºç½‘ç«™åœ°å›¾ï¼Œåªéœ€ç¼–å†™ä¸€ä¸ªSitemapç±»ï¼Œå¹¶åœ¨URLconfä¸­ç¼–å†™å¯¹åº”çš„è®¿é—®è·¯ç”±ã€‚</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>å®‰è£…sitemapæ¡†æ¶çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>åœ¨INSTALLED_APPSè®¾ç½®ä¸­æ·»åŠ <pre class="line-numbers language-python" data-language="python"><code class="language-python">INSTALLED_APPS <span class="token operator">=</span><span class="token punctuation">[</span> <span class="token string">'django.contrib.sitemaps'</span>  <span class="token string">'django.contrib.site'</span>  <span class="token punctuation">]</span> SITE_ID <span class="token operator">=</span> <span class="token number">1</span>         <span class="token comment"># è®¾ç½®å½“å‰ç«™ç‚¹</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>æ·»åŠ è¿™ä¸¤ä¸ªapp, åŠ å…¥SITE_ID = 1æ¥åˆ¶å®šå½“å‰çš„ç«™ç‚¹ã€‚<br>ç„¶åç™»é™†Djangoåå°ï¼Œä¿®æ”¹SITEä¸ºä½ Djangoç½‘ç«™çš„åŸŸåå’Œåç§°<br>æ‰§è¡Œæ•°æ®è¿ç§»<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">python manage.py migrate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="æ·»åŠ sitemapåŠŸèƒ½"><a href="#æ·»åŠ sitemapåŠŸèƒ½" class="headerlink" title="æ·»åŠ sitemapåŠŸèƒ½"></a>æ·»åŠ sitemapåŠŸèƒ½</h1><h2 id="ï¼ˆ1ï¼‰åˆ›å»ºsitemap"><a href="#ï¼ˆ1ï¼‰åˆ›å»ºsitemap" class="headerlink" title="ï¼ˆ1ï¼‰åˆ›å»ºsitemap"></a>ï¼ˆ1ï¼‰åˆ›å»ºsitemap</h2></li></ol><p>åˆ›å»ºsitemap.py.å†…å®¹ç±»ä¼¼ä¸‹é¢çš„ä»£ç ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>sitemaps <span class="token keyword">import</span> Sitemap<span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> Blog<span class="token punctuation">,</span> Tag<span class="token punctuation">,</span> Category<span class="token keyword">from</span> user<span class="token punctuation">.</span>models <span class="token keyword">import</span> UserInfo<span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> reverse<span class="token comment"># é™æ€å†…å®¹åŠ å…¥åœ°å›¾</span><span class="token keyword">class</span> <span class="token class-name">StaticViewSitemap</span><span class="token punctuation">(</span>Sitemap<span class="token punctuation">)</span><span class="token punctuation">:</span>    priority <span class="token operator">=</span> <span class="token number">0.5</span>    changefreq <span class="token operator">=</span> <span class="token string">'daily'</span>    <span class="token keyword">def</span> <span class="token function">items</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'blog:haystack'</span><span class="token punctuation">,</span> <span class="token string">'blog:about'</span><span class="token punctuation">,</span> <span class="token string">'blog:archives'</span><span class="token punctuation">,</span> <span class="token punctuation">]</span>    <span class="token keyword">def</span> <span class="token function">location</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> reverse<span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">BlogSitemap</span><span class="token punctuation">(</span>Sitemap<span class="token punctuation">)</span><span class="token punctuation">:</span>    changefreq <span class="token operator">=</span> <span class="token string">"weekly"</span>    priority <span class="token operator">=</span> <span class="token number">0.5</span>    <span class="token comment"># protocol = 'https'</span>    <span class="token keyword">def</span> <span class="token function">items</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> Blog<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">lastmod</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> obj<span class="token punctuation">.</span>modified_time    <span class="token keyword">def</span> <span class="token function">location</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token string">'/blog/read/?blogid=&#123;&#125;'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">CategorySiteMap</span><span class="token punctuation">(</span>Sitemap<span class="token punctuation">)</span><span class="token punctuation">:</span>    changefreq <span class="token operator">=</span> <span class="token string">"Weekly"</span>    priority <span class="token operator">=</span> <span class="token string">"0.6"</span>    <span class="token keyword">def</span> <span class="token function">items</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> Category<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">lastmod</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> obj<span class="token punctuation">.</span>created_time    <span class="token comment"># åœ¨modelé‡Œé¢å®šä¹‰è¿‡get_absolute_urlæ–¹æ³•å,æ­¤æ–¹æ³•å¯ä»¥çœç•¥</span>    <span class="token keyword">def</span> <span class="token function">location</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token string">'/blog/get_categories/?category_name=&#123;&#125;'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">TagSiteMap</span><span class="token punctuation">(</span>Sitemap<span class="token punctuation">)</span><span class="token punctuation">:</span>    changefreq <span class="token operator">=</span> <span class="token string">"Weekly"</span>    priority <span class="token operator">=</span> <span class="token string">"0.3"</span>    <span class="token keyword">def</span> <span class="token function">items</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> Tag<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">lastmod</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> obj<span class="token punctuation">.</span>created_time    <span class="token keyword">def</span> <span class="token function">location</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token string">'/blog/get_tags/?tag_id=&#123;&#125;'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">UserSiteMap</span><span class="token punctuation">(</span>Sitemap<span class="token punctuation">)</span><span class="token punctuation">:</span>    changefreq <span class="token operator">=</span> <span class="token string">"Weekly"</span>    priority <span class="token operator">=</span> <span class="token string">"0.3"</span>    <span class="token keyword">def</span> <span class="token function">items</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> UserInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">lastmod</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> obj<span class="token punctuation">.</span>date_joined    <span class="token keyword">def</span> <span class="token function">location</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token string">'/user/profile/?userid=&#123;&#125;'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ï¼ˆ2ï¼‰urlè·¯ç”±é…ç½®"><a href="#ï¼ˆ2ï¼‰urlè·¯ç”±é…ç½®" class="headerlink" title="ï¼ˆ2ï¼‰urlè·¯ç”±é…ç½®"></a>ï¼ˆ2ï¼‰urlè·¯ç”±é…ç½®</h2><p>url.pyä¸­åŠ å…¥:</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> blog<span class="token punctuation">.</span>blog_sitemap <span class="token keyword">import</span> BlogSitemap<span class="token punctuation">,</span> CategorySiteMap<span class="token punctuation">,</span> TagSiteMap<span class="token punctuation">,</span> UserSiteMap<span class="token punctuation">,</span> StaticViewSitemap<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>sitemaps<span class="token punctuation">.</span>views <span class="token keyword">import</span> sitemapsitemaps <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    <span class="token string">'blog'</span><span class="token punctuation">:</span> BlogSitemap<span class="token punctuation">,</span>    <span class="token string">'Category'</span><span class="token punctuation">:</span> CategorySiteMap<span class="token punctuation">,</span>    <span class="token string">'Tag'</span><span class="token punctuation">:</span> TagSiteMap<span class="token punctuation">,</span>    <span class="token string">'User'</span><span class="token punctuation">:</span> UserSiteMap<span class="token punctuation">,</span>    <span class="token string">'static'</span><span class="token punctuation">:</span> StaticViewSitemap<span class="token punctuation">&#125;</span>url<span class="token punctuation">(</span><span class="token string">r'^sitemap\.xml$'</span><span class="token punctuation">,</span> sitemap<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">'sitemaps'</span><span class="token punctuation">:</span> sitemaps<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        name<span class="token operator">=</span><span class="token string">'sitemap'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è‡³æ­¤ï¼Œå…¨éƒ¨å®Œæˆï¼Œè¿è¡Œä½ çš„djangoç¨‹åºï¼Œæµè§ˆå™¨è¾“å…¥:</p><p><a href="http://127.0.0.1:8000/sitemap.xml">http://127.0.0.1:8000/sitemap.xml</a></p><p>å°±å¯ä»¥çœ‹è§å·²ç»æˆåŠŸç”Ÿæˆäº†ï¼Œç„¶åå°±å¯ä»¥æäº¤è¿™ä¸ªåœ°å€ç»™æœç´¢å¼•æ“ã€‚</p><h1 id="Sitemapç±»è¯¦è§£"><a href="#Sitemapç±»è¯¦è§£" class="headerlink" title="Sitemapç±»è¯¦è§£"></a>Sitemapç±»è¯¦è§£</h1><p><strong>class Sitemap[source]</strong></p><pre><code> Sitemapç±»å¯ä»¥å®šä¹‰ä»¥ä¸‹æ–¹æ³•/å±æ€§ï¼š</code></pre><p><strong>1.  items[source]</strong></p><pre><code>å¿…é¡»å®šä¹‰ã€‚è¿”å›å¯¹è±¡åˆ—è¡¨çš„æ–¹æ³•ã€‚</code></pre><p>æ¡†æ¶ä¸å…³å¿ƒå¯¹è±¡çš„ç±»å‹ï¼Œé‡è¦çš„æ˜¯è¿™äº›å¯¹è±¡å°†è¢«ä¼ é€’ç»™location()ï¼Œlastmod()ï¼Œchangefreq()å’Œpriority()æ–¹æ³•ã€‚<br><strong>2. location[source]</strong></p><pre><code>å¯é€‰ã€‚ å…¶å€¼å¯ä»¥æ˜¯ä¸€ä¸ªæ–¹æ³•æˆ–å±æ€§ã€‚</code></pre><p>å¦‚æœæ˜¯ä¸€ä¸ªæ–¹æ³•, å®ƒåº”è¯¥ä¸ºitems()è¿”å›çš„å¯¹è±¡çš„ç»å¯¹è·¯å¾„.</p><p>å¦‚æœå®ƒæ˜¯ä¸€ä¸ªå±æ€§ï¼Œå®ƒçš„å€¼åº”è¯¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºitems()è¿”å›çš„æ¯ä¸ªå¯¹è±¡çš„ç»å¯¹è·¯å¾„ã€‚</p><p>ä¸Šé¢æ‰€è¯´çš„â€œç»å¯¹è·¯å¾„â€è¡¨ç¤ºä¸åŒ…å«åè®®å’ŒåŸŸåçš„URLã€‚ ä¾‹å­ï¼š</p><ul><li>æ­£ç¡®ï¼šâ€™/foo/bar/â€˜ </li><li>é”™è¯¯ï¼šâ€™example.com/foo/bar/â€˜</li><li>é”™è¯¯ï¼šâ€™<a href="https://example.com/foo/bar/&#39;">https://example.com/foo/bar/&#39;</a></li></ul><p>å¦‚æœæœªæä¾›locationï¼Œæ¡†æ¶å°†è°ƒç”¨items()<strong>è¿”å›çš„æ¯ä¸ªå¯¹è±¡ä¸Šçš„get_absolute_url()æ–¹æ³•</strong>ã€‚</p><p>è¯¥å±æ€§æœ€ç»ˆåæ˜ åˆ°HTMLé¡µé¢ä¸Šçš„æ ‡ç­¾ã€‚<br><strong>3. lastmod</strong></p><pre><code>å¯é€‰ã€‚ ä¸€ä¸ªæ–¹æ³•æˆ–å±æ€§ã€‚è¡¨ç¤ºå½“å‰æ¡ç›®æœ€åçš„ä¿®æ”¹æ—¶é—´ã€‚</code></pre><p><strong>4. changefreq</strong></p><pre><code>å¯é€‰ã€‚ ä¸€ä¸ªæ–¹æ³•æˆ–å±æ€§ã€‚è¡¨ç¤ºå½“å‰æ¡ç›®ä¿®æ”¹çš„é¢‘ç‡ã€‚</code></pre><p>changefreqçš„å…è®¸å€¼ä¸ºï¼š</p><pre><code>    &#39;always&#39;  &#39;hourly&#39;  &#39;daily&#39;  &#39;weekly&#39;  &#39;monthly&#39;  &#39;yearly&#39; &#39;never&#39;</code></pre><p><strong>5. priority</strong></p><pre><code>å¯é€‰ã€‚è¡¨ç¤ºå½“å‰æ¡ç›®åœ¨ç½‘ç«™ä¸­çš„æƒé‡ç³»æ•°ï¼Œä¼˜å…ˆçº§ã€‚</code></pre><p>ç¤ºä¾‹å€¼ï¼š0.4ï¼Œ1.0ã€‚ é¡µé¢çš„é»˜è®¤ä¼˜å…ˆçº§ä¸º0.5ï¼Œæœ€é«˜ä¸º1.0ã€‚<br><strong>6. protocol</strong></p><pre><code>å¯é€‰çš„ã€‚å®šä¹‰ç½‘ç«™åœ°å›¾ä¸­çš„ç½‘å€çš„åè®®ï¼ˆâ€˜httpâ€™æˆ–â€™httpsâ€™ï¼‰ã€‚</code></pre><p><strong>7. limit</strong></p><pre><code>å¯é€‰çš„ã€‚å®šä¹‰ç½‘ç«™åœ°å›¾çš„æ¯ä¸ªç½‘é¡µä¸ŠåŒ…å«çš„æœ€å¤§è¶…çº§é“¾æ¥æ•°ã€‚</code></pre><p><strong>8. i18n</strong></p><pre><code>å¯é€‰çš„ã€‚ä¸€ä¸ªbooleanå±æ€§ï¼Œå®šä¹‰æ˜¯å¦åº”ä½¿ç”¨æ‰€æœ‰è¯­è¨€ç”Ÿæˆæ­¤ç½‘ç«™åœ°å›¾ã€‚é»˜è®¤å€¼ä¸ºFalseã€‚</code></pre><h1 id="é€šçŸ¥Google"><a href="#é€šçŸ¥Google" class="headerlink" title="é€šçŸ¥Google"></a>é€šçŸ¥Google</h1><p>å½“ä½ çš„sitemapå˜åŒ–çš„æ—¶å€™ï¼Œä½ ä¼šæƒ³é€šçŸ¥Googleï¼Œä»¥ä¾¿è®©å®ƒçŸ¥é“å¯¹ä½ çš„ç«™ç‚¹è¿›è¡Œé‡æ–°ç´¢å¼•ã€‚ æ¡†æ¶å°±æä¾›äº†è¿™æ ·çš„ä¸€ä¸ªå‡½æ•°ï¼š </p><pre class="line-numbers language-python" data-language="python"><code class="language-python">django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>sitemaps<span class="token punctuation">.</span>ping_google<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ping_google() æœ‰ä¸€ä¸ªå¯é€‰çš„å‚æ•° sitemap_url ï¼Œå®ƒåº”è¯¥æ˜¯ä½ çš„ç«™ç‚¹åœ°å›¾çš„URLç»å¯¹åœ°å€</p><p>å¦‚æœä¸èƒ½å¤Ÿç¡®å®šä½ çš„sitemap URL, ping_google() ä¼šå¼•å‘ django.contrib.sitemaps.SitemapNotFound å¼‚å¸¸ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æ¨¡å‹ä¸­çš„ save() æ–¹æ³•æ¥è°ƒç”¨ ping_google() ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>sitemaps <span class="token keyword">import</span> ping_google <span class="token keyword">class</span> <span class="token class-name">Entry</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># ...</span>  <span class="token keyword">def</span> <span class="token function">save</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token builtin">super</span><span class="token punctuation">(</span>Entry<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>      ping_google<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">except</span> Exception<span class="token punctuation">:</span>      <span class="token comment"># Bare 'except' because we could get a variety</span>      <span class="token comment"># of HTTP-related exceptions.</span>      <span class="token keyword">pass</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸€ä¸ªæ›´æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆæ˜¯ç”¨ cron è„šæœ¬æˆ–ä»»åŠ¡è°ƒåº¦è¡¨æ¥è°ƒç”¨ ping_google() ï¼Œè¯¥æ–¹æ³•ä½¿ç”¨Httpç›´æ¥è¯·æ±‚GoogleæœåŠ¡å™¨ï¼Œä»è€Œå‡å°‘æ¯æ¬¡è°ƒç”¨ save() æ—¶å ç”¨çš„ç½‘ç»œå¸¦å®½ã€‚    </p>]]></content>
      
      
      <categories>
          
          <category> Djangoå…¨ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoç»¼åˆç¯‡ä¹‹celery4 å®šæ—¶ä»»åŠ¡çš„å®ç°æ–°é—»çƒ­æ¦œ</title>
      <link href="/post/django-quan-wang-zhan-da-jian/django-zong-he-pian-zhi-celery4-ding-shi-ren-wu-de-shi-xian-xin-wen-re-bang/"/>
      <url>/post/django-quan-wang-zhan-da-jian/django-zong-he-pian-zhi-celery4-ding-shi-ren-wu-de-shi-xian-xin-wen-re-bang/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h1><p>ç³»ç»Ÿï¼šUbuntuç³»ç»Ÿ<br>ç¼–è¾‘å™¨ï¼šPycharm<br>Pythonç‰ˆæœ¬ï¼špython3.6ï¼ˆè‡ªå¸¦celery4.3.0ï¼‰<br>ç¬¬ä¸‰æ–¹åŒ…ä¾èµ–ï¼š django3.0.8</p><h1 id="æœ¬æ–‡ç®€ä»‹"><a href="#æœ¬æ–‡ç®€ä»‹" class="headerlink" title="æœ¬æ–‡ç®€ä»‹"></a>æœ¬æ–‡ç®€ä»‹</h1><p>è¿™ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»äº†celery4+django3å®šæ—¶ä»»åŠ¡çš„å®ç°, ç”¨äºå®šæ—¶è·å–çƒ­é—¨ç½‘ç«™çš„æ¦œå•ï¼Œç»„æˆä¸€ä¸ªæ–°é—»èšåˆç½‘ç«™</p><p>ç½‘ä¸Šæœ‰å¾ˆå¤šcelery + djangoå®ç°å®šæ—¶ä»»åŠ¡çš„æ•™ç¨‹ï¼Œä¸è¿‡å®ƒä»¬å¤§å¤šæ•°æ˜¯åŸºäºdjcelery + celery3çš„ï¼› æˆ–è€…æ˜¯ä½¿ç”¨django_celery_beaté…ç½®è¾ƒä¸ºç¹ççš„ã€‚</p><p>æ˜¾ç„¶ç®€æ´è€Œé«˜æ•ˆæ‰æ˜¯æˆ‘ä»¬æœ€ç»ˆçš„è¿½æ±‚ï¼Œè€Œcelery4å·²ç»ä¸éœ€è¦é¢å¤–æ’ä»¶å³å¯ä¸djangoç»“åˆå®ç°å®šæ—¶ä»»åŠ¡äº†ï¼ŒåŸç”Ÿçš„celery beatå°±å¯ä»¥å¾ˆå¥½çš„å®ç°å®šæ—¶ä»»åŠ¡åŠŸèƒ½ã€‚</p><p>å½“ç„¶ä½¿ç”¨åŸç”Ÿæ–¹æ¡ˆçš„åŒæ—¶æœ‰å‡ ç‚¹æ’ä»¶æ‰€å¸¦æ¥çš„å¥½å¤„è¢«æˆ‘ä»¬æ”¾å¼ƒäº†ï¼š</p><pre><code>1.æ’ä»¶æä¾›çš„å®šæ—¶ä»»åŠ¡ç®¡ç†å°†ä¸åœ¨å¯ç”¨ï¼Œå½“æˆ‘ä»¬åªéœ€è¦ä»»åŠ¡å®šæœŸæ‰§è¡Œè€Œä¸éœ€è¦äººä¸ºè°ƒåº¦çš„æ—¶å€™è¿™ç‚¹å¿½ç•¥ä¸è®¡ã€‚2.æ— æ³•é«˜æ•ˆçš„ç®¡ç†æˆ–è¿½è¸ªå®šæ—¶ä»»åŠ¡ï¼Œå®šæ—¶ä»»åŠ¡çš„è·Ÿè¸ªå…¶å®äº¤ç»™æ—¥å¿—æ›´åˆç†ï¼Œä½†æ˜¯å¯¹ä»»åŠ¡çš„ä¿®æ”¹å°±æ²¡æœ‰é‚£ä¹ˆæ–¹ä¾¿äº†ï¼Œä¸è¿‡å¦‚æœä¸éœ€è¦ç»å¸¸å˜æ›´/å¢å‡ä»»åŠ¡çš„è¯è¿™ç‚¹ä¹Ÿåœ¨å¯æ¥å—èŒƒå›´å†…ã€‚</code></pre><h1 id="é¡¹ç›®å†…å®¹"><a href="#é¡¹ç›®å†…å®¹" class="headerlink" title="é¡¹ç›®å†…å®¹"></a>é¡¹ç›®å†…å®¹</h1><h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><pre class="line-numbers language-sh" data-language="sh"><code class="language-sh">django-admin startproject Websitecd Websitepython3 manage.py startapp hottouch .&#x2F;Website&#x2F;celery.py  .&#x2F;hot&#x2F;tasks.py start-celery.sh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢çš„å‘½ä»¤åˆ†åˆ«ä¸ºï¼š</p><ul><li>åˆ›å»ºä¸€ä¸ªåå­—ä¸ºWebsiteçš„é¡¹ç›®</li><li>åˆ›å»ºä¸€ä¸ªåå­—ä¸ºhotçš„åº”ç”¨</li><li>åˆ›å»ºceleryç›¸å…³çš„æ–‡ä»¶<br>åˆ›å»ºå®Œæˆåï¼ŒåŸºæœ¬çš„ç›®å½•ç»“æ„ï¼š<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">..&#x2F;Website&#x2F;â”œâ”€â”€ hotâ”‚   â”œâ”€â”€ admin.pyâ”‚   â”œâ”€â”€ apps.pyâ”‚   â”œâ”€â”€ __init__.pyâ”‚   â”œâ”€â”€ migrationsâ”‚   â”‚   â””â”€â”€ __init__.pyâ”‚   â”œâ”€â”€ models.pyâ”‚   â”œâ”€â”€ tasks.pyâ”‚   â”œâ”€â”€ tests.pyâ”‚   â””â”€â”€ views.pyâ”œâ”€â”€ manage.pyâ”œâ”€â”€ start-celery.shâ””â”€â”€ Website    â”œâ”€â”€ asgi.py    â”œâ”€â”€ celery.py    â”œâ”€â”€ __init__.py    â”œâ”€â”€ settings.py    â”œâ”€â”€ urls.py    â””â”€â”€ wsgi.py<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><p>å…¶ä¸­hotæ˜¯æˆ‘ä»¬çš„appï¼Œç”¨äºæ–°é—»èšåˆï¼ŒWebsiteåˆ™æ˜¯æˆ‘ä»¬çš„projectã€‚</p><h2 id="æ¨¡å‹è®¾è®¡"><a href="#æ¨¡å‹è®¾è®¡" class="headerlink" title="æ¨¡å‹è®¾è®¡"></a>æ¨¡å‹è®¾è®¡</h2><p>éœ€è¦è€ƒè™‘æ˜¯å¦ä»…ä»…å±•ç¤ºå®æ—¶çš„ä¿¡æ¯<br>å¦‚æœä»…ä»…å±•ç¤ºå®æ—¶çš„ä¿¡æ¯ï¼Œå°†è·å–åˆ°çš„æ–°é—»æ¦œå•å†…å®¹åšæˆjsonæ ¼å¼ç›´æ¥é€ç»™å‰ç«¯<br>å¦‚æœè¿˜éœ€è¦å°†æ¯æ¡ä¿¡æ¯æ’åºï¼Œç»Ÿè®¡ä¸€ä¸‹å†å²ä¿¡æ¯<br>é‚£ä¹ˆéœ€è¦è®¾è®¡ä¸€ä¸ªæ–°çš„modelï¼Œæ¥å­˜è´®æ¯æ¡ä¿¡æ¯</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># hot/models.py</span><span class="token keyword">class</span> <span class="token class-name">Hot</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    STATUS <span class="token operator">=</span> <span class="token punctuation">(</span>        <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'æ— æ•ˆ'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'æœ‰æ•ˆ'</span><span class="token punctuation">)</span>    <span class="token punctuation">)</span>    hot_name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">'çƒ­æ¦œæº'</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">256</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    type_name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">'æ¦œå•ç±»å‹'</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">256</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    content <span class="token operator">=</span> models<span class="token punctuation">.</span>TextField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">'å†…å®¹'</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    create_time <span class="token operator">=</span> models<span class="token punctuation">.</span>DateTimeField<span class="token punctuation">(</span>auto_now_add<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">"åˆ›å»ºæ—¶é—´"</span><span class="token punctuation">)</span>    update_time <span class="token operator">=</span> models<span class="token punctuation">.</span>DateTimeField<span class="token punctuation">(</span>auto_now<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">'æ›´æ–°æ—¶é—´'</span><span class="token punctuation">)</span>    status <span class="token operator">=</span> models<span class="token punctuation">.</span>SmallIntegerField<span class="token punctuation">(</span>choices<span class="token operator">=</span>STATUS<span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">'æ˜¯å¦æœ‰æ•ˆ'</span><span class="token punctuation">)</span>    <span class="token builtin">sorted</span> <span class="token operator">=</span> models<span class="token punctuation">.</span>SmallIntegerField<span class="token punctuation">(</span><span class="token string">'æ’åº'</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>hot_name <span class="token operator">+</span> self<span class="token punctuation">.</span>type_name    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        ordering <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'-sorted'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è§†å›¾å†…å®¹"><a href="#è§†å›¾å†…å®¹" class="headerlink" title="è§†å›¾å†…å®¹"></a>è§†å›¾å†…å®¹</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># hot/views.py</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render<span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> Hot<span class="token keyword">def</span> <span class="token function">hot</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    è¿”å›æ¦œå•ä¿¡æ¯    :param request:    :return:    """</span>    hot_queryset <span class="token operator">=</span> Hot<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>status<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>    data <span class="token operator">=</span> <span class="token punctuation">&#123;</span>        <span class="token string">'title'</span><span class="token punctuation">:</span> <span class="token string">'çƒ­ç‚¹èšåˆ'</span><span class="token punctuation">,</span>        <span class="token string">'hot_queryset'</span><span class="token punctuation">:</span> hot_queryset    <span class="token punctuation">&#125;</span>      <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'hot/hot.html'</span><span class="token punctuation">,</span> context<span class="token operator">=</span>data<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="taskè®¾ç½®"><a href="#taskè®¾ç½®" class="headerlink" title="taskè®¾ç½®"></a>taskè®¾ç½®</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> __future__ <span class="token keyword">import</span> absolute_import<span class="token punctuation">,</span> unicode_literals<span class="token keyword">import</span> sys<span class="token keyword">import</span> os<span class="token keyword">import</span> django<span class="token keyword">from</span> subprocess <span class="token keyword">import</span> getstatusoutput<span class="token comment"># å°†å½“å‰ç›®å½•åŠ å…¥djangoç¯å¢ƒ</span>sys<span class="token punctuation">.</span>path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>abspath<span class="token punctuation">(</span>__file__<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>sys<span class="token punctuation">.</span>path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>abspath<span class="token punctuation">(</span>__file__<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>sys<span class="token punctuation">.</span>path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>abspath<span class="token punctuation">(</span>__file__<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"DJANGO_SETTINGS_MODULE"</span><span class="token punctuation">:</span> <span class="token string">"Website.settings"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>django<span class="token punctuation">.</span>setup<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">from</span> celery <span class="token keyword">import</span> shared_task<span class="token keyword">from</span> concurrent<span class="token punctuation">.</span>futures <span class="token keyword">import</span> ThreadPoolExecutor<span class="token keyword">from</span> hot<span class="token punctuation">.</span>crawler <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">from</span> hot<span class="token punctuation">.</span>models <span class="token keyword">import</span> Hot<span class="token decorator annotation punctuation">@shared_task</span><span class="token keyword">def</span> <span class="token function">run_crawler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    å®šæ—¶ä¸€ä¸ªå°æ—¶æ›´æ–°ä¸€æ¬¡çˆ¬å–    :return:    """</span>    crawler_list <span class="token operator">=</span> <span class="token punctuation">[</span>crawler_github<span class="token punctuation">]</span><span class="token comment"># å¯ä»¥è‡ªå·±æ·»åŠ å…¶ä»–å†…å®¹</span>    <span class="token keyword">with</span> ThreadPoolExecutor<span class="token punctuation">(</span>max_workers<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">as</span> pool<span class="token punctuation">:</span>        <span class="token keyword">def</span> <span class="token function">get_result</span><span class="token punctuation">(</span>future<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token triple-quoted-string string">"""            è¿™ä¸ªæ˜¯ add_done_callback()æ–¹æ³•æ¥æ·»åŠ å›è°ƒå‡½æ•°,            future.result()ä¸ºå‡½æ•°è¿è¡Œçš„ç»“æœ            :param future:            :return:            """</span>            crawler_result <span class="token operator">=</span> future<span class="token punctuation">.</span>result<span class="token punctuation">(</span><span class="token punctuation">)</span>            hot_name <span class="token operator">=</span> crawler_result<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'hot_name'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>            type_name <span class="token operator">=</span> crawler_result<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'type_name'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>                      content <span class="token operator">=</span> crawler_result<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'content'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> hot_name<span class="token punctuation">:</span>                hot <span class="token operator">=</span> Hot<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>hot_name<span class="token operator">=</span>hot_name<span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span>                                <span class="token keyword">if</span> <span class="token keyword">not</span> hot<span class="token punctuation">:</span>                    Hot<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>hot_name<span class="token operator">=</span>hot_name<span class="token punctuation">,</span> type_name<span class="token operator">=</span>type_name<span class="token punctuation">,</span> content<span class="token operator">=</span>content<span class="token punctuation">)</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    hot<span class="token punctuation">.</span>content <span class="token operator">=</span> content                    hot<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>         <span class="token keyword">for</span> future1 <span class="token keyword">in</span> crawler_list<span class="token punctuation">:</span>            pool<span class="token punctuation">.</span>submit<span class="token punctuation">(</span>future1<span class="token punctuation">)</span><span class="token punctuation">.</span>add_done_callback<span class="token punctuation">(</span>get_result<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'done'</span><span class="token punctuation">)</span>run_crawler<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„åˆ°äº†è¿™é‡Œç”¨åˆ°è‡ªå·±å†™çš„crawler ï¼Œ è¿™é‡Œé¢æ”¾çš„æ˜¯å„ç§çˆ¬è™«<br>è¿™é‡Œæ‹¿ä¸€ä¸ªä¸¾ä¾‹</p><h2 id="github-çˆ¬è™«"><a href="#github-çˆ¬è™«" class="headerlink" title="github çˆ¬è™«"></a>github çˆ¬è™«</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">crawler_github</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    è·å–github çƒ­æ¦œ    :return:    """</span>    url <span class="token operator">=</span> <span class="token string">'https://github.com/trending'</span>    headers <span class="token operator">=</span> <span class="token punctuation">&#123;</span>        <span class="token string">'Host'</span><span class="token punctuation">:</span> <span class="token string">'github.com'</span><span class="token punctuation">,</span>        <span class="token string">'Referer'</span><span class="token punctuation">:</span> <span class="token string">'https://github.com/explore'</span>    <span class="token punctuation">&#125;</span>    response_html <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span>    content_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">if</span> response_html<span class="token punctuation">:</span>        tree <span class="token operator">=</span> etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>response_html<span class="token punctuation">.</span>text<span class="token punctuation">)</span>        article_list <span class="token operator">=</span> tree<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">"//article[@class='Box-row']"</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> article <span class="token keyword">in</span> article_list<span class="token punctuation">:</span>            title <span class="token operator">=</span> article<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'string(./h1/a)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>            href <span class="token operator">=</span> <span class="token string">'https://github.com/%s'</span> <span class="token operator">%</span> article<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./h1/a/@href'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>            describe <span class="token operator">=</span> article<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'string(./p)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>                      content_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">'title'</span><span class="token punctuation">:</span> <span class="token string">'%s---%s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>title<span class="token punctuation">,</span> describe<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'href'</span><span class="token punctuation">:</span> href <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span><span class="token string">'hot_name'</span><span class="token punctuation">:</span> <span class="token string">'GitHub'</span><span class="token punctuation">,</span>            <span class="token string">'type_name'</span><span class="token punctuation">:</span> <span class="token string">'çƒ­æ¦œ'</span><span class="token punctuation">,</span>            <span class="token string">'crawler_name'</span><span class="token punctuation">:</span> sys<span class="token punctuation">.</span>_getframe<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>f_code<span class="token punctuation">.</span>co_name<span class="token punctuation">,</span>            <span class="token string">'content'</span><span class="token punctuation">:</span> content_list<span class="token punctuation">,</span>            <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è·¯ç”±é…ç½®"><a href="#è·¯ç”±é…ç½®" class="headerlink" title="è·¯ç”±é…ç½®"></a>è·¯ç”±é…ç½®</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># hot/urls.py</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> viewsapp_name <span class="token operator">=</span> <span class="token string">'hot'</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token comment"># åˆ†ç±»é¡µé¢</span>    path<span class="token punctuation">(</span><span class="token string">'hot'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>hot<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'hot'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸»è·¯ç”±é…ç½®</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token punctuation">,</span> includeurlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    path<span class="token punctuation">(</span><span class="token string">'admin/'</span><span class="token punctuation">,</span> admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>urls<span class="token punctuation">)</span><span class="token punctuation">,</span>    path<span class="token punctuation">(</span><span class="token string">'hot/'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">'hot.urls'</span><span class="token punctuation">,</span> namespace<span class="token operator">=</span><span class="token string">'hot'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># æ–°é—»çƒ­æ¦œ    ]   </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="Celeryå®šæ—¶ä»»åŠ¡é…ç½®"><a href="#Celeryå®šæ—¶ä»»åŠ¡é…ç½®" class="headerlink" title="Celeryå®šæ—¶ä»»åŠ¡é…ç½®"></a>Celeryå®šæ—¶ä»»åŠ¡é…ç½®</h1><p>é’ˆå¯¹celery, æˆ‘ä»¬éœ€è¦å…³å¿ƒçš„ä¸»è¦æ˜¯ celery.py ï¼Œ settings.py ï¼Œ tasks.py å’Œ start-celery.sh ã€‚</p><h2 id="å»ºç«‹celery"><a href="#å»ºç«‹celery" class="headerlink" title="å»ºç«‹celery"></a>å»ºç«‹celery</h2><p>é¦–å…ˆæ˜¯celery.pyï¼Œæƒ³è®©celeryæ‰§è¡Œä»»åŠ¡å°±å¿…é¡»å®ä¾‹åŒ–ä¸€ä¸ªcelery appï¼Œå¹¶æŠŠsettings.pyé‡Œçš„é…ç½®ä¼ å…¥appï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> __future__ <span class="token keyword">import</span> absolute_import<span class="token keyword">import</span> os<span class="token keyword">from</span> celery <span class="token keyword">import</span> Celery<span class="token keyword">from</span> celery<span class="token punctuation">.</span>schedules <span class="token keyword">import</span> crontab<span class="token keyword">from</span> datetime <span class="token keyword">import</span> timedelta<span class="token comment"># è®¾ç½®djangoç¯å¢ƒ</span>os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>setdefault<span class="token punctuation">(</span><span class="token string">'DJANGO_SETTINGS_MODULE'</span><span class="token punctuation">,</span> <span class="token string">'Website.settings'</span><span class="token punctuation">)</span><span class="token comment"># åˆ›å»ºceleryå®¢æˆ·ç«¯,å¹¶èµ·åˆ«å(æ²¡æœ‰å®é™…æ„ä¹‰)</span>app <span class="token operator">=</span> Celery<span class="token punctuation">(</span><span class="token string">'Celery_Website'</span><span class="token punctuation">)</span><span class="token comment"># åŠ è½½é…ç½®:è®©å®¢æˆ·ç«¯å’ŒworkerçŸ¥é“brokerçš„å­˜åœ¨ï¼Œ</span><span class="token comment"># - 'django.conf:settings'è¡¨ç¤ºdjango,conf.settingsä¹Ÿå°±æ˜¯djangoé¡¹ç›®çš„é…ç½®ï¼Œceleryä¼šæ ¹æ®å‰é¢è®¾ç½®çš„ç¯å¢ƒå˜é‡è‡ªåŠ¨æŸ¥æ‰¾å¹¶å¯¼å…¥</span><span class="token comment"># - namespaceè¡¨ç¤ºåœ¨settings.pyä¸­celeryé…ç½®é¡¹çš„åå­—çš„ç»Ÿä¸€å‰ç¼€ï¼Œè¿™é‡Œæ˜¯'CELERY_'ï¼Œé…ç½®é¡¹çš„åå­—ä¹Ÿéœ€è¦å¤§å†™</span>app<span class="token punctuation">.</span>config_from_object<span class="token punctuation">(</span><span class="token string">'django.conf:settings'</span><span class="token punctuation">,</span> namespace<span class="token operator">=</span><span class="token string">'CELERY'</span><span class="token punctuation">)</span><span class="token comment"># è‡ªåŠ¨å°†å¼‚æ­¥ä»»åŠ¡æ³¨å†Œåˆ°celery_app</span><span class="token comment"># æç¤º:ä¸éœ€è¦æ‰¾tasks.py å› ä¸ºceleryé»˜è®¤ä¼šå»å„ä¸ªappsä¸‹é¢å»æ‰¾ä¸tasks.pyåŒåçš„æ–‡ä»¶</span>app<span class="token punctuation">.</span>autodiscover_tasks<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># é…ç½®brokerçš„ä½ç½®: æ–¹ä¾¿celeryå®¢æˆ·ç«¯å‘brokerä¸­å‘å¸ƒä»»åŠ¡,ä¹Ÿä¸ºäº†workerä»brokerä¸­å–ä»»åŠ¡</span>broker_url <span class="token operator">=</span> <span class="token string">"redis://127.0.0.1/14"</span><span class="token comment"># æ›´æ–°é…ç½®ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥åœ¨settingé‡Œé¢æ·»åŠ </span>app<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>update<span class="token punctuation">(</span>    CELERYBEAT_SCHEDULE<span class="token operator">=</span><span class="token punctuation">&#123;</span>        <span class="token string">'å®šæ—¶è·å–çƒ­æ¦œ'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>            <span class="token string">'task'</span><span class="token punctuation">:</span> <span class="token string">'hot.tasks.run_crawler'</span><span class="token punctuation">,</span>              <span class="token comment"># 'schedule':  crontab(minute='*/1'),    # å®šæ—¶ä»»åŠ¡</span>            <span class="token string">'schedule'</span><span class="token punctuation">:</span>  timedelta<span class="token punctuation">(</span>seconds<span class="token operator">=</span><span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">,</span>     <span class="token comment"># å‘¨æœŸæ€§ä»»åŠ¡,æ¯ååˆ†é’Ÿä¸€æ¬¡</span>            <span class="token string">'args'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å¯¼å…¥celery"><a href="#å¯¼å…¥celery" class="headerlink" title="å¯¼å…¥celery"></a>å¯¼å…¥celery</h2><p>é…ç½®å°±æ˜¯è¿™ä¹ˆç®€å•ï¼Œä¸ºäº†èƒ½åœ¨djangoé‡Œä½¿ç”¨è¿™ä¸ªappï¼Œæˆ‘ä»¬éœ€è¦åœ¨Website/<strong>init</strong>.pyä¸­å¯¼å…¥å®ƒï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> __future__ <span class="token keyword">import</span> absolute_import<span class="token punctuation">,</span> unicode_literals<span class="token keyword">from</span> <span class="token punctuation">.</span>celery <span class="token keyword">import</span> app <span class="token keyword">as</span> celery_app__all__ <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'celery_app'</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é…ç½®celery"><a href="#é…ç½®celery" class="headerlink" title="é…ç½®celery"></a>é…ç½®celery</h2><p>ä»»åŠ¡é…ç½®å®Œæˆåæˆ‘ä»¬å°±è¦é…ç½®celeryäº†ï¼Œæˆ‘ä»¬é€‰æ‹©redisä½œä¸ºä»»åŠ¡é˜Ÿåˆ—ï¼Œå¼ºçƒˆå»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨rabbitmqæˆ–è€…redisä½œä¸ºä»»åŠ¡é˜Ÿåˆ—æˆ–ç»“æœç¼“å­˜åç«¯ï¼Œè€Œä¸åº”è¯¥ä½¿ç”¨å…³ç³»å‹æ•°æ®åº“ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># setting.py</span><span class="token comment"># redis</span>REDIS_PORT <span class="token operator">=</span> <span class="token number">6379</span>REDIS_DB <span class="token operator">=</span> <span class="token number">0</span><span class="token comment"># ä»ç¯å¢ƒå˜é‡ä¸­å–å¾—redisæœåŠ¡å™¨åœ°å€</span>REDIS_HOST <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'REDIS_ADDR'</span><span class="token punctuation">,</span> <span class="token string">'redis'</span><span class="token punctuation">)</span> <span class="token comment"># celery settings</span><span class="token comment"># è¿™ä¸¤é¡¹å¿…é¡»è®¾ç½®ï¼Œå¦åˆ™ä¸èƒ½æ­£å¸¸å¯åŠ¨celery beat</span>CELERY_ENABLE_UTC <span class="token operator">=</span> <span class="token boolean">True</span>CELERY_TIMEZONE <span class="token operator">=</span> TIME_ZONE<span class="token comment"># ä»»åŠ¡é˜Ÿåˆ—é…ç½®</span>CELERY_BROKER_URL <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'redis://</span><span class="token interpolation"><span class="token punctuation">&#123;</span>REDIS_HOST<span class="token punctuation">&#125;</span></span><span class="token string">:</span><span class="token interpolation"><span class="token punctuation">&#123;</span>REDIS_PORT<span class="token punctuation">&#125;</span></span><span class="token string">/</span><span class="token interpolation"><span class="token punctuation">&#123;</span>REDIS_DB<span class="token punctuation">&#125;</span></span><span class="token string">'</span></span>CELERY_ACCEPT_CONTENT <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token punctuation">]</span>CELERY_RESULT_BACKEND <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'redis://</span><span class="token interpolation"><span class="token punctuation">&#123;</span>REDIS_HOST<span class="token punctuation">&#125;</span></span><span class="token string">:</span><span class="token interpolation"><span class="token punctuation">&#123;</span>REDIS_PORT<span class="token punctuation">&#125;</span></span><span class="token string">/</span><span class="token interpolation"><span class="token punctuation">&#123;</span>REDIS_DB<span class="token punctuation">&#125;</span></span><span class="token string">'</span></span>CELERY_TASK_SERIALIZER <span class="token operator">=</span> <span class="token string">'json'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è®¾ç½®å®šæ—¶ä»»åŠ¡"><a href="#è®¾ç½®å®šæ—¶ä»»åŠ¡" class="headerlink" title="è®¾ç½®å®šæ—¶ä»»åŠ¡"></a>è®¾ç½®å®šæ—¶ä»»åŠ¡</h2><p>ç„¶åæ˜¯æˆ‘ä»¬çš„å®šæ—¶ä»»åŠ¡è®¾ç½®,å‰é¢æˆ‘ä»¬å…¶å®å·²ç»å°†å®šæ—¶ä»»åŠ¡æ”¾å…¥celery.py é‡Œé¢äº†ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ”¾åœ¨è®¾ç½®æ–‡ä»¶ä¸­ï¼š</p><pre class="line-numbers language-none"><code class="language-none">from celery.schedules import crontabCELERY_BEAT_SCHEDULE&#x3D;&#123;    &#39;fetch_news_every-1-hour&#39;: &#123;      &#39;task&#39;: &#39;news.tasks.fetch_all_news&#39;,      &#39;schedule&#39;: crontab(minute&#x3D;0, hour&#x3D;&#39;*&#x2F;1&#39;),    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®šæ—¶ä»»åŠ¡é…ç½®å¯¹è±¡æ˜¯ä¸€ä¸ªdictï¼Œç”±ä»»åŠ¡åå’Œé…ç½®é¡¹ç»„æˆï¼Œä¸»è¦é…ç½®æƒ³å¦‚ä¸‹ï¼š</p><pre><code>taskï¼šä»»åŠ¡å‡½æ•°æ‰€åœ¨çš„æ¨¡å—ï¼Œæ¨¡å—è·¯å¾„å¾—å†™å…¨ï¼Œå¦åˆ™æ‰¾ä¸åˆ°å°†æ— æ³•è¿è¡Œè¯¥ä»»åŠ¡scheduleï¼šå®šæ—¶ç­–ç•¥ï¼Œä¸€èˆ¬ä½¿ç”¨ celery.schedules.crontab ï¼Œä¸Šé¢ä¾‹å­ä¸ºæ¯å°æ—¶çš„0åˆ†æ‰§è¡Œä¸€æ¬¡ä»»åŠ¡ï¼Œå…·ä½“å†™æ³•ä¸linuxçš„crontabç±»ä¼¼å¯ä»¥å‚è€ƒæ–‡æ¡£è¯´æ˜argsï¼šæ˜¯ä¸ªå…ƒç»„ï¼Œç»™å‡ºä»»åŠ¡éœ€è¦çš„å‚æ•°ï¼Œå¦‚æœä¸éœ€è¦å‚æ•°ä¹Ÿå¯ä»¥ä¸å†™è¿›é…ç½®ï¼Œå°±åƒä¾‹å­ä¸­çš„ä¸€æ ·å…¶ä½™é…ç½®é¡¹è¾ƒå°‘ç”¨ï¼Œå¯ä»¥å‚è€ƒæ–‡æ¡£</code></pre><p>è‡³æ­¤ï¼Œé…ç½®celery beatçš„éƒ¨åˆ†å°±ç»“æŸäº†ã€‚</p><h3 id="å¯åŠ¨celery-beat"><a href="#å¯åŠ¨celery-beat" class="headerlink" title="å¯åŠ¨celery beat"></a>å¯åŠ¨celery beat</h3><p>é…ç½®å®Œæˆååªéœ€è¦å¯åŠ¨celeryäº†ã€‚</p><p>å¯åŠ¨ä¹‹å‰é…ç½®ä¸€ä¸‹ç¯å¢ƒã€‚ä¸è¦ç”¨rootè¿è¡Œceleryï¼ä¸è¦ç”¨rootè¿è¡Œceleryï¼ä¸è¦ç”¨rootè¿è¡Œceleryï¼é‡è¦çš„äº‹æƒ…è¯´ä¸‰éã€‚</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># start-celery.shï¼šexport REDIS_ADDR&#x3D;127.0.0.1celery -A Website worker -l info -B -f &#x2F;path&#x2F;to&#x2F;log<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>-A è¡¨ç¤ºappæ‰€åœ¨çš„ç›®å½•ï¼Œ-Bè¡¨ç¤ºå¯åŠ¨celery beatè¿è¡Œå®šæ—¶ä»»åŠ¡ã€‚</p><p>celeryæ­£å¸¸å¯åŠ¨åå°±å¯ä»¥é€šè¿‡æ—¥å¿—æ¥æŸ¥çœ‹ä»»åŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œäº†ï¼š</p>]]></content>
      
      
      <categories>
          
          <category> Djangoå…¨ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoç»¼åˆç¯‡ä¹‹django-haystacké…ç½®è¯¦è§£è¿‡ç¨‹</title>
      <link href="/post/django-quan-wang-zhan-da-jian/django-zong-he-pian-zhi-django-haystack-pei-zhi-xiang-jie-guo-cheng/"/>
      <url>/post/django-quan-wang-zhan-da-jian/django-zong-he-pian-zhi-django-haystack-pei-zhi-xiang-jie-guo-cheng/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>djangoæ˜¯pythonè¯­è¨€çš„ä¸€ä¸ªwebæ¡†æ¶ï¼ŒåŠŸèƒ½å¼ºå¤§ã€‚é…åˆä¸€äº›æ’ä»¶å¯ä¸ºwebç½‘ç«™å¾ˆæ–¹ä¾¿åœ°æ·»åŠ æœç´¢åŠŸèƒ½ã€‚</p><p>æœç´¢å¼•æ“ä½¿ç”¨whooshï¼Œæ˜¯ä¸€ä¸ªçº¯pythonå®ç°çš„å…¨æ–‡æœç´¢å¼•æ“ï¼Œå°å·§ç®€å•ã€‚</p><p>ä¸­æ–‡æœç´¢éœ€è¦è¿›è¡Œä¸­æ–‡åˆ†è¯ï¼Œä½¿ç”¨jiebaã€‚</p><p>ç›´æ¥åœ¨djangoé¡¹ç›®ä¸­ä½¿ç”¨whooshéœ€è¦å…³æ³¨ä¸€äº›åŸºç¡€ç»†èŠ‚é—®é¢˜ï¼Œè€Œé€šè¿‡haystackè¿™ä¸€æœç´¢æ¡†æ¶ï¼Œå¯ä»¥æ–¹ä¾¿åœ°åœ¨djangoä¸­ç›´æ¥æ·»åŠ æœç´¢åŠŸèƒ½ï¼Œæ— éœ€å…³æ³¨ç´¢å¼•å»ºç«‹ã€æœç´¢è§£æç­‰ç»†èŠ‚é—®é¢˜ã€‚</p><p>haystackæ”¯æŒå¤šç§æœç´¢å¼•æ“ï¼Œä¸ä»…ä»…æ˜¯whooshï¼Œä½¿ç”¨solrã€elastic searchç­‰æœç´¢ï¼Œä¹Ÿå¯é€šè¿‡haystackï¼Œè€Œä¸”ç›´æ¥åˆ‡æ¢å¼•æ“å³å¯ï¼Œç”šè‡³æ— éœ€ä¿®æ”¹æœç´¢ä»£ç ã€‚</p><h1 id="é…ç½®æœç´¢"><a href="#é…ç½®æœç´¢" class="headerlink" title="é…ç½®æœç´¢"></a>é…ç½®æœç´¢</h1><h2 id="1-å®‰è£…ç›¸å…³åŒ…"><a href="#1-å®‰è£…ç›¸å…³åŒ…" class="headerlink" title="1.å®‰è£…ç›¸å…³åŒ…"></a>1.å®‰è£…ç›¸å…³åŒ…</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">pip install django-haystackpip install whooshpip install jieba<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="2-é…ç½®djangoçš„settings"><a href="#2-é…ç½®djangoçš„settings" class="headerlink" title="2.é…ç½®djangoçš„settings"></a>2.é…ç½®djangoçš„settings</h2><p>ä¿®æ”¹settings.pyæ–‡ä»¶ï¼Œæ·»åŠ haystackåº”ç”¨ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">(</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token string">'haystack'</span><span class="token punctuation">,</span> <span class="token comment">#å°†haystackæ”¾åœ¨æœ€å</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨settingsä¸­è¿½åŠ haystackçš„ç›¸å…³é…ç½®ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">HAYSTACK_CONNECTIONS <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    <span class="token string">'default'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>        <span class="token comment"># æ­¤å¤„ä¸ºé»˜è®¤çš„WhooshEngineï¼Œåé¢ä¼šä¿®æ”¹å®ƒ,å› æ­¤æŠŠå®ƒæ³¨é‡Šæ‰</span>        <span class="token comment"># 'ENGINE': 'haystack.backends.whoosh_cn_backend.WhooshEngine', </span>        <span class="token string">'ENGINE'</span><span class="token punctuation">:</span> <span class="token string">'blog.whoosh_cn_backend.WhooshEngine'</span><span class="token punctuation">,</span>        <span class="token string">'PATH'</span><span class="token punctuation">:</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>BASE_DIR<span class="token punctuation">,</span> <span class="token string">'whoosh_index'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment"># æ·»åŠ æ­¤é¡¹ï¼Œå½“æ•°æ®åº“æ”¹å˜æ—¶ï¼Œä¼šè‡ªåŠ¨æ›´æ–°ç´¢å¼•ï¼Œéå¸¸æ–¹ä¾¿</span>HAYSTACK_SIGNAL_PROCESSOR <span class="token operator">=</span> <span class="token string">'haystack.signals.RealtimeSignalProcessor'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>HAYSTACK_CONNECTIONS çš„ ENGINE æŒ‡å®šäº† django haystack ä½¿ç”¨çš„æœç´¢å¼•æ“ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº† blog.whoosh_cn_backend.WhooshEngineï¼Œè™½ç„¶ç›®å‰è¿™ä¸ªå¼•æ“è¿˜ä¸å­˜åœ¨ï¼Œä½†æˆ‘ä»¬æ¥ä¸‹æ¥ä¼šåˆ›å»ºå®ƒã€‚</p></li><li><p>PATH æŒ‡å®šäº†ç´¢å¼•æ–‡ä»¶éœ€è¦å­˜æ”¾çš„ä½ç½®ï¼Œæˆ‘ä»¬è®¾ç½®ä¸ºé¡¹ç›®æ ¹ç›®å½• BASE_DIR ä¸‹çš„ whoosh_index æ–‡ä»¶å¤¹ï¼ˆåœ¨å»ºç«‹ç´¢å¼•æ˜¯ä¼šè‡ªåŠ¨åˆ›å»ºï¼‰ã€‚</p></li><li><p>HAYSTACK_SIGNAL_PROCESSOR æŒ‡å®šä»€ä¹ˆæ—¶å€™æ›´æ–°ç´¢å¼•ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨haystack.signals.RealtimeSignalProcessorï¼Œä½œç”¨æ˜¯æ¯å½“æœ‰æ–‡ç« æ›´æ–°æ—¶å°±æ›´æ–°ç´¢å¼•ã€‚ç”±äºåšå®¢æ–‡ç« æ›´æ–°ä¸ä¼šå¤ªé¢‘ç¹ï¼Œå› æ­¤å®æ—¶æ›´æ–°æ²¡æœ‰é—®é¢˜ã€‚</p><h2 id="3-æ·»åŠ url"><a href="#3-æ·»åŠ url" class="headerlink" title="3.æ·»åŠ url"></a>3.æ·»åŠ url</h2></li></ul><p>åœ¨æ•´ä¸ªé¡¹ç›®çš„urls.pyä¸­ï¼Œé…ç½®æœç´¢åŠŸèƒ½çš„urlè·¯å¾„ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># path('search/', include('haystack.urls')), #è¿™æ˜¯é»˜è®¤çš„æœç´¢è·¯ç”±</span>    path<span class="token punctuation">(</span><span class="token string">'blog_search/'</span><span class="token punctuation">,</span> BlogSearchView<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'haystack'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                  <span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœä¸é‡æ–°æœç´¢è§†å›¾ï¼Œé‚£ä¹ˆæ·»åŠ ä¸Šé¢æ³¨é‡Šæ‰çš„è·¯ç”±å°±å¯ä»¥äº†ã€‚<br>æˆ‘ä»¬æ·»åŠ äº†è‡ªå·±é‡æ–°å†™çš„ä¸€ä¸ªæœç´¢è§†å›¾ï¼Œä¸‹é¢ä¼šå…·ä½“ä»‹ç»ã€‚</p><h2 id="4-åœ¨åº”ç”¨ç›®å½•ä¸‹ï¼Œæ·»åŠ ä¸€ä¸ªç´¢å¼•"><a href="#4-åœ¨åº”ç”¨ç›®å½•ä¸‹ï¼Œæ·»åŠ ä¸€ä¸ªç´¢å¼•" class="headerlink" title="4.åœ¨åº”ç”¨ç›®å½•ä¸‹ï¼Œæ·»åŠ ä¸€ä¸ªç´¢å¼•"></a>4.åœ¨åº”ç”¨ç›®å½•ä¸‹ï¼Œæ·»åŠ ä¸€ä¸ªç´¢å¼•</h2><p>åœ¨å­åº”ç”¨çš„ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º search_indexes.py çš„æ–‡ä»¶ã€‚<br><strong>è¿™æ˜¯ django haystack çš„è§„å®š</strong>ã€‚è¦ç›¸å¯¹æŸä¸ª app ä¸‹çš„æ•°æ®è¿›è¡Œå…¨æ–‡æ£€ç´¢ï¼Œå°±è¦åœ¨è¯¥ app ä¸‹åˆ›å»ºä¸€ä¸ª search_indexes.py æ–‡ä»¶ï¼Œç„¶ååˆ›å»ºä¸€ä¸ª XXIndex ç±»ï¼ˆXX ä¸ºå«æœ‰è¢«æ£€ç´¢æ•°æ®çš„æ¨¡å‹ï¼Œå¦‚è¿™é‡Œçš„ Blogï¼‰ï¼Œå¹¶ä¸”ç»§æ‰¿ SearchIndex å’Œ Indexableã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> haystack <span class="token keyword">import</span> indexes<span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> Blog   <span class="token comment"># ä¿®æ”¹æ­¤å¤„ï¼Œæ·»åŠ è‡ªå·±model</span><span class="token comment"># ç±»åå¿…é¡»ä¸ºéœ€è¦æ£€ç´¢çš„Model_name+Indexï¼Œè¿™é‡Œéœ€è¦æ£€ç´¢Blogï¼Œæ‰€ä»¥åˆ›å»ºBlogIndex</span><span class="token keyword">class</span> <span class="token class-name">BlogIndex</span><span class="token punctuation">(</span>indexes<span class="token punctuation">.</span>SearchIndex<span class="token punctuation">,</span> indexes<span class="token punctuation">.</span>Indexable<span class="token punctuation">)</span><span class="token punctuation">:</span>    text <span class="token operator">=</span> indexes<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>document<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> use_template<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    â‘¢ <span class="token comment"># æ­¤å¤–å¯ä»¥å­˜åœ¨ï¼Œå¯ä»¥ä¸å­˜åœ¨ï¼Œçœ‹å…·ä½“éœ€è¦çš„æ•°æ®</span>    <span class="token triple-quoted-string string">"""ä¸‹é¢è¿™äº›å­—æ®µï¼Œåœ¨ç´¢å¼•ç±»ä¸­è¿›è¡Œç”³æ˜ï¼Œåœ¨REST frameworkä¸­ï¼Œç´¢å¼•ç±»çš„å­—æ®µå¯ä»¥è¢«ä½œä¸ºç´¢å¼•æŸ¥è¯¢ç»“æœè¿”å›æ•°æ®é¢æ¥æº"""</span>        <span class="token builtin">id</span> <span class="token operator">=</span> indexes<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>model_attr<span class="token operator">=</span><span class="token string">'id'</span><span class="token punctuation">)</span>    name <span class="token operator">=</span> indexes<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>model_attr<span class="token operator">=</span><span class="token string">'name'</span><span class="token punctuation">)</span>    price <span class="token operator">=</span> indexes<span class="token punctuation">.</span>DecimalField<span class="token punctuation">(</span>model_attr<span class="token operator">=</span><span class="token string">'price'</span><span class="token punctuation">)</span>    <span class="token triple-quoted-string string">"""ä¹Ÿå°±æ˜¯è¯´ï¼Œå‰ç«¯åœ¨ç´¢å¼•çš„æ—¶å€™ï¼Œå¯ä»¥æŒ‰ç…§text=xxx,ä¹Ÿå¯ä»¥æŒ‰ç…§id=xxx,name=xxxç­‰ï¼Œæˆ‘ä»¬çš„æ•°æ®è¿”å›ä¹Ÿæ˜¯è¿”å›id,name,price """</span>    <span class="token keyword">def</span> <span class="token function">get_model</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> Blog                     <span class="token comment"># æ·»åŠ è‡ªå·±model</span>    <span class="token keyword">def</span> <span class="token function">index_queryset</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> using<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>get_model<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¯´æ˜ï¼š</p><ul><li><p>ä¿®æ”¹ä¸Šæ–‡ä¸­ä¸‰å¤„æ³¨é‡Šå³å¯</p></li><li><p>æ­¤æ–‡ä»¶æŒ‡å®šå¦‚ä½•é€šè¿‡å·²æœ‰æ•°æ®æ¥å»ºç«‹ç´¢å¼•ã€‚get_modelå¤„ï¼Œç›´æ¥å°†djangoä¸­çš„modelæ”¾è¿‡æ¥ï¼Œä¾¿å¯ä»¥ç›´æ¥å®Œæˆç´¢å¼•å•¦ï¼Œæ— éœ€å…³æ³¨æ•°æ®åº“è¯»å–ã€ç´¢å¼•å»ºç«‹ç­‰ç»†èŠ‚ã€‚</p></li><li><p>text=indexes.CharField ï¼ŒæŒ‡å®šäº†å°†æ¨¡å‹ç±»ä¸­çš„å“ªäº›å­—æ®µå»ºç«‹ç´¢å¼•ï¼Œè€Œuse_template=Trueè¯´æ˜åç»­æˆ‘ä»¬è¿˜è¦æŒ‡å®šä¸€ä¸ªæ¨¡æ¿æ–‡ä»¶ï¼Œå‘ŠçŸ¥å…·ä½“æ˜¯å“ªäº›å­—æ®µ<br>æ¯ä¸ªç´¢å¼•é‡Œé¢å¿…é¡»æœ‰ä¸”åªèƒ½æœ‰ä¸€ä¸ªå­—æ®µä¸º document=Trueï¼Œè¿™ä»£è¡¨ django haystack å’Œæœç´¢å¼•æ“å°†ä½¿ç”¨æ­¤å­—æ®µçš„å†…å®¹ä½œä¸ºç´¢å¼•è¿›è¡Œæ£€ç´¢(primary field)ã€‚æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨ä¸€ä¸ªå­—æ®µè®¾ç½®äº†document=Trueï¼Œåˆ™ä¸€èˆ¬çº¦å®šæ­¤å­—æ®µåä¸ºtextï¼Œè¿™æ˜¯åœ¨ SearchIndex ç±»é‡Œé¢ä¸€è´¯çš„å‘½åï¼Œä»¥é˜²æ­¢åå°æ··ä¹±</p></li><li><p>use_template=True åœ¨ text å­—æ®µä¸­ï¼Œè¿™æ ·å°±å…è®¸æˆ‘ä»¬ä½¿ç”¨æ•°æ®æ¨¡æ¿å»å»ºç«‹æœç´¢å¼•æ“ç´¢å¼•çš„æ–‡ä»¶ï¼Œè¯´å¾—é€šä¿—ç‚¹å°±æ˜¯ç´¢å¼•é‡Œé¢éœ€è¦å­˜æ”¾ä¸€äº›ä»€ä¹ˆä¸œè¥¿ï¼Œä¾‹å¦‚ Post çš„ title å­—æ®µï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥é€šè¿‡ title å†…å®¹æ¥æ£€ç´¢ Post æ•°æ®äº†ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡å¦‚ä½ æœç´¢ Python ï¼Œé‚£ä¹ˆå°±å¯ä»¥æ£€ç´¢å‡º title ä¸­å«æœ‰ Python çš„Blogäº†ã€‚</p></li></ul><h2 id="5-æŒ‡å®šç´¢å¼•æ¨¡æ¿æ–‡ä»¶"><a href="#5-æŒ‡å®šç´¢å¼•æ¨¡æ¿æ–‡ä»¶" class="headerlink" title="5.æŒ‡å®šç´¢å¼•æ¨¡æ¿æ–‡ä»¶"></a>5.æŒ‡å®šç´¢å¼•æ¨¡æ¿æ–‡ä»¶</h2><p>åœ¨é¡¹ç›®çš„â€œtemplates/search/indexes/åº”ç”¨åç§°/â€ä¸‹åˆ›å»ºâ€œæ¨¡å‹ç±»åç§°_text.txtâ€æ–‡ä»¶ï¼ˆä¾‹å¦‚ templates/search/indexes/blog/blog_text.txt),å…¨å°å†™å³å¯ã€‚</p><p>æ­¤æ–‡ä»¶æŒ‡å®šå°†æ¨¡å‹ä¸­çš„å“ªäº›å­—æ®µå»ºç«‹ç´¢å¼•ï¼Œå†™å…¥å¦‚ä¸‹å†…å®¹ï¼šï¼ˆä¸è¦æ”¹æ‰object,å¯ä»¥ç»§ç»­æ·»åŠ å…¶ä»–çš„å­—æ®µ) </p><pre class="line-numbers language-none"><code class="language-none"># templates&#x2F;search&#x2F;indexes&#x2F;blog&#x2F;blog_text.txt&#123;&#123; object.title &#125;&#125;&#123;&#123; object.body &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="6-æŒ‡å®šæœç´¢ç»“æœé¡µé¢"><a href="#6-æŒ‡å®šæœç´¢ç»“æœé¡µé¢" class="headerlink" title="6.æŒ‡å®šæœç´¢ç»“æœé¡µé¢"></a>6.æŒ‡å®šæœç´¢ç»“æœé¡µé¢</h2><p>åœ¨templates/search/ä¸‹é¢ï¼Œå»ºç«‹ä¸€ä¸ªsearch.htmlé¡µé¢ã€‚</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>&#123;% if query %&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>æœç´¢ç»“æœå¦‚ä¸‹ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>    &#123;% for result in page.object_list %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/&#123;&#123; result.object.id &#125;&#125;/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; result.object.title&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>    &#123;% empty %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>å•¥ä¹Ÿæ²¡æ‰¾åˆ°<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>    &#123;% endfor %&#125;    &#123;% if page.has_previous or page.has_next %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>            &#123;% if page.has_previous %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?q=&#123;&#123; query &#125;&#125;<span class="token entity named-entity" title="&amp;">&amp;amp;</span>page=&#123;&#123; page.previous_page_number &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;% endif %&#125;<span class="token entity named-entity" title="&laquo;">&amp;laquo;</span> ä¸Šä¸€é¡µ&#123;% if page.has_previous %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>&#123;% endif %&#125;        |            &#123;% if page.has_next %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?q=&#123;&#123; query &#125;&#125;<span class="token entity named-entity" title="&amp;">&amp;amp;</span>page=&#123;&#123; page.next_page_number &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;% endif %&#125;ä¸‹ä¸€é¡µ <span class="token entity named-entity" title="&raquo;">&amp;raquo;</span>&#123;% if page.has_next %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>&#123;% endif %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    &#123;% endif %&#125;&#123;% endif %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="7-ä½¿ç”¨jiebaä¸­æ–‡åˆ†è¯å™¨"><a href="#7-ä½¿ç”¨jiebaä¸­æ–‡åˆ†è¯å™¨" class="headerlink" title="7.ä½¿ç”¨jiebaä¸­æ–‡åˆ†è¯å™¨"></a>7.ä½¿ç”¨jiebaä¸­æ–‡åˆ†è¯å™¨</h2><p>åœ¨haystackçš„å®‰è£…æ–‡ä»¶å¤¹ä¸‹ï¼Œæ‰¾åˆ°æ–‡ä»¶è·¯å¾„å¦‚â€œ/usr/local/lib/python3.6/dist-packages/django_haystack-2.8.1-py3.6.egg/haystack/backends/whoosh_backend.pyâ€ï¼Œå¤åˆ¶ä¸€ä»½åˆ°è‡ªå·±çš„app è·¯å¾„ä¸‹é‡å‘½åä¸ºwhoosh_cn_backend.pyï¼Œç„¶åæ·»åŠ ä¿®æ”¹å¦‚ä¸‹å†…å®¹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># é¡¶éƒ¨å¼•å…¥jiebaä¸­çš„ä¸­æ–‡åˆ†è¯å™¨</span><span class="token keyword">from</span> jieba<span class="token punctuation">.</span>analyse <span class="token keyword">import</span> ChineseAnalyzer<span class="token comment"># åœ¨æ•´ä¸ªpyæ–‡ä»¶ä¸­ï¼ŒæŸ¥æ‰¾</span>analyzer<span class="token operator">=</span>StemmingAnalyzer<span class="token punctuation">(</span><span class="token punctuation">)</span>å…¨éƒ¨æ”¹ä¸ºæ”¹ä¸ºanalyzer<span class="token operator">=</span>ChineseAnalyzer<span class="token punctuation">(</span><span class="token punctuation">)</span>æ€»å…±å¤§æ¦‚æœ‰ä¸¤ä¸‰å¤„å§<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="8-ä¿®æ”¹æœç´¢é»˜è®¤å¼•æ“"><a href="#8-ä¿®æ”¹æœç´¢é»˜è®¤å¼•æ“" class="headerlink" title="8.ä¿®æ”¹æœç´¢é»˜è®¤å¼•æ“"></a>8.ä¿®æ”¹æœç´¢é»˜è®¤å¼•æ“</h2><p>å¦‚æœä¹‹å‰å·²ç»åšäº†ä¿®æ”¹ï¼Œè¿™ä¸€æ­¥å°±å¯ä»¥è·³è¿‡äº†ï¼Œä¿®æ”¹settings.pyæ–‡ä»¶</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">HAYSTACK_CONNECTIONS <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    <span class="token string">'default'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>        <span class="token comment"># æ­¤å¤„ä¸ºé»˜è®¤çš„WhooshEngineï¼Œåé¢ä¼šä¿®æ”¹å®ƒ,å› æ­¤æŠŠå®ƒæ³¨é‡Šæ‰</span>        <span class="token comment"># 'ENGINE': 'haystack.backends.whoosh_cn_backend.WhooshEngine', </span>        <span class="token string">'ENGINE'</span><span class="token punctuation">:</span> <span class="token string">'blog.whoosh_cn_backend.WhooshEngine'</span><span class="token punctuation">,</span>        <span class="token string">'PATH'</span><span class="token punctuation">:</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>BASE_DIR<span class="token punctuation">,</span> <span class="token string">'whoosh_index'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">## 10.å®ç°æœç´¢å…¥å£åœ¨ç½‘é¡µä¸­åŠ å…¥æœç´¢æ¡†ï¼š&#96;&#96;&#96;html&lt;form method&#x3D;&#39;get&#39; action&#x3D;&quot;&#x2F;blog&#x2F;blog_search&#x2F;&quot; target&#x3D;&quot;_blank&quot;&gt;    &lt;input type&#x3D;&quot;text&quot; name&#x3D;&quot;q&quot;&gt;    &lt;input type&#x3D;&quot;submit&quot; value&#x3D;&quot;æŸ¥è¯¢&quot;&gt;&lt;&#x2F;form&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„ï¼Œç”±äºæˆ‘ä»¬è‡ªå®šä¹‰äº†search_viewçš„è·¯ç”±ï¼Œå› æ­¤ï¼Œè¿™é‡Œçš„actionéœ€è¦å†™æˆå†™å¯¹çš„ä½ç½®ï¼Œæˆ–è€…</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>blog:haystack<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>get<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="10-è‡ªå®šä¹‰æœç´¢è§†å›¾"><a href="#10-è‡ªå®šä¹‰æœç´¢è§†å›¾" class="headerlink" title="10. è‡ªå®šä¹‰æœç´¢è§†å›¾"></a>10. è‡ªå®šä¹‰æœç´¢è§†å›¾</h2><h2 id="11-åºåˆ—åŒ–APIè®¾ç½®"><a href="#11-åºåˆ—åŒ–APIè®¾ç½®" class="headerlink" title="11. åºåˆ—åŒ–APIè®¾ç½®"></a>11. åºåˆ—åŒ–APIè®¾ç½®</h2><h3 id="1-å®‰è£…ç›¸å…³åŒ…-1"><a href="#1-å®‰è£…ç›¸å…³åŒ…-1" class="headerlink" title="1.å®‰è£…ç›¸å…³åŒ…"></a>1.å®‰è£…ç›¸å…³åŒ…</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">pip install drf-haystack pip install djangorestframework <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å®‰è£…éœ€è¦çš„ç¬¬ä¸‰æ–¹åŒ…</p><h3 id="2-ç¼–å†™åºåˆ—åŒ–ç±»"><a href="#2-ç¼–å†™åºåˆ—åŒ–ç±»" class="headerlink" title="2.ç¼–å†™åºåˆ—åŒ–ç±»"></a>2.ç¼–å†™åºåˆ—åŒ–ç±»</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># blog/serializer.py</span><span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">from</span> <span class="token punctuation">.</span>search_indexes <span class="token keyword">import</span> BlogIndex<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>serializers <span class="token keyword">import</span> ModelSerializer<span class="token keyword">from</span> drf_haystack<span class="token punctuation">.</span>serializers <span class="token keyword">import</span> HaystackSerializerMixin<span class="token keyword">class</span> <span class="token class-name">BlogSerializers</span><span class="token punctuation">(</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        model <span class="token operator">=</span> Blog        fields <span class="token operator">=</span> <span class="token string">'__all__'</span>        <span class="token keyword">class</span> <span class="token class-name">BlogIndexSerializer</span><span class="token punctuation">(</span>HaystackSerializerMixin<span class="token punctuation">,</span> BlogSerializers<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">(</span>BlogSerializers<span class="token punctuation">.</span>Meta<span class="token punctuation">)</span><span class="token punctuation">:</span>        index_classes <span class="token operator">=</span> <span class="token punctuation">[</span>BlogIndex<span class="token punctuation">]</span>        search_fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'text'</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'content'</span><span class="token punctuation">]</span>  <span class="token comment"># ä¸èƒ½å’Œæ­£å¸¸æœç´¢ä¸€æ ·ä½¿ç”¨qå‚æ•°</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œåºåˆ—åŒ–Blogæ•°æ® å’ŒBlogIndexæ•°æ®</p><p>æ³¨æ„BlogIndexSerializer ä¸­çš„search_fields ï¼Œè¿™é‡Œå¯æŸ¥è¯¢çš„æ•°æ®æºå¯¹åº”Blogçš„Modelä¸­çš„æ•°æ®</p><h3 id="3-è§†å›¾è®¾ç½®"><a href="#3-è§†å›¾è®¾ç½®" class="headerlink" title="3.è§†å›¾è®¾ç½®"></a>3.è§†å›¾è®¾ç½®</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> drf_haystack<span class="token punctuation">.</span>viewsets <span class="token keyword">import</span> HaystackViewSet<span class="token keyword">from</span> <span class="token punctuation">.</span>serializers <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">from</span> <span class="token punctuation">.</span>models improt Blog<span class="token keyword">class</span> <span class="token class-name">BlogSearchViewSet</span><span class="token punctuation">(</span>HaystackViewSet<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    è¿”å›åšå®¢æ–‡ç« æœç´¢åˆ—è¡¨    """</span>    index_models <span class="token operator">=</span> <span class="token punctuation">[</span>Blog<span class="token punctuation">]</span>    serializer_class <span class="token operator">=</span> BlogIndexSerializer<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-é…ç½®urlsè·¯ç”±"><a href="#4-é…ç½®urlsè·¯ç”±" class="headerlink" title="4.é…ç½®urlsè·¯ç”±"></a>4.é…ç½®urlsè·¯ç”±</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token keyword">from</span> blog <span class="token keyword">import</span> views <span class="token keyword">as</span> blog_view<span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> routersrouter <span class="token operator">=</span> routers<span class="token punctuation">.</span>DefaultRouter<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># å› ä¸ºè§†å›¾æ²¡æœ‰å®šä¹‰query_setå­—æ®µï¼Œå› æ­¤éœ€è¦åŠ ä¸Šbasenameå­—æ®µ</span>router<span class="token punctuation">.</span>register<span class="token punctuation">(</span><span class="token string">r'blog_search'</span><span class="token punctuation">,</span> blog_view<span class="token punctuation">.</span>BlogSearchViewSet<span class="token punctuation">,</span> basename<span class="token operator">=</span><span class="token string">'blog_search'</span><span class="token punctuation">)</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    path<span class="token punctuation">(</span><span class="token string">'api/'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span>router<span class="token punctuation">.</span>urls<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token comment"># APIè·¯ç”±</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="12-ç”Ÿæˆç´¢å¼•"><a href="#12-ç”Ÿæˆç´¢å¼•" class="headerlink" title="12.ç”Ÿæˆç´¢å¼•"></a>12.ç”Ÿæˆç´¢å¼•</h2><p>æ‰‹åŠ¨ç”Ÿæˆä¸€æ¬¡ç´¢å¼•ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">python3 manage.py rebuild_index<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="ä¸°å¯Œçš„è‡ªå®šä¹‰"><a href="#ä¸°å¯Œçš„è‡ªå®šä¹‰" class="headerlink" title="ä¸°å¯Œçš„è‡ªå®šä¹‰"></a>ä¸°å¯Œçš„è‡ªå®šä¹‰</h1><p>ä¸Šé¢åªæ˜¯å¿«é€Ÿå®Œæˆä¸€ä¸ªåŸºæœ¬çš„æœç´¢å¼•æ“ï¼Œhaystackè¿˜æœ‰æ›´å¤šå¯è‡ªå®šä¹‰ï¼Œæ¥å®ç°ä¸ªæ€§åŒ–çš„éœ€æ±‚ã€‚</p><pre><code>å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šhttp://django-haystack.readthedocs.io/en/master/</code></pre><h1 id="è‡ªå®šä¹‰æœç´¢view"><a href="#è‡ªå®šä¹‰æœç´¢view" class="headerlink" title="è‡ªå®šä¹‰æœç´¢view"></a>è‡ªå®šä¹‰æœç´¢view</h1><p>ä¸Šé¢çš„é…ç½®ä¸­ï¼Œæœç´¢ç›¸å…³çš„è¯·æ±‚è¢«å¯¼å…¥åˆ°haystack.urlsä¸­ï¼Œå¦‚æœæƒ³è‡ªå®šä¹‰æœç´¢çš„viewï¼Œå®ç°æ›´å¤šåŠŸèƒ½ï¼Œå¯ä»¥ä¿®æ”¹ã€‚</p><h2 id="1-è‡ªå®šä¹‰è·¯ç”±"><a href="#1-è‡ªå®šä¹‰è·¯ç”±" class="headerlink" title="1.è‡ªå®šä¹‰è·¯ç”±"></a>1.è‡ªå®šä¹‰è·¯ç”±</h2><p>haystack.urlsä¸­å†…å®¹å…¶å®å¾ˆç®€å•ï¼Œ</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls <span class="token keyword">import</span> url  <span class="token keyword">from</span> <span class="token punctuation">.</span>views <span class="token keyword">import</span> SearchView    urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>      path<span class="token punctuation">(</span><span class="token string">'blog_search/'</span><span class="token punctuation">,</span> BlogSearchView<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'haystack'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token punctuation">]</span>  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-è‡ªå®šä¹‰è§†å›¾"><a href="#2-è‡ªå®šä¹‰è§†å›¾" class="headerlink" title="2.è‡ªå®šä¹‰è§†å›¾"></a>2.è‡ªå®šä¹‰è§†å›¾</h2><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬å†™ä¸€ä¸ªviewï¼Œç»§æ‰¿è‡ªSearchViewï¼Œå³å¯å°†æœç´¢çš„urlå¯¼å…¥åˆ°è‡ªå®šä¹‰viewä¸­å¤„ç†å•¦ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> haystack<span class="token punctuation">.</span>views <span class="token keyword">import</span> SearchView<span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> Blog<span class="token keyword">import</span> json<span class="token keyword">from</span> django<span class="token punctuation">.</span>http <span class="token keyword">import</span> HttpResponse<span class="token keyword">class</span> <span class="token class-name">BlogSearchView</span><span class="token punctuation">(</span>SearchView<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># é‡å†™templateçš„ä½ç½®</span>    template <span class="token operator">=</span> <span class="token string">'search/blog_search.html'</span>    <span class="token keyword">def</span> <span class="token function">get_context</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        context <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span>BlogSearchView<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>get_context<span class="token punctuation">(</span><span class="token punctuation">)</span>        results <span class="token operator">=</span> self<span class="token punctuation">.</span>results        <span class="token comment"># å½“æœç´¢å¼•æ“æ‰¾ä¸åˆ°æ—¶ï¼Œé‡æ–°ä»æ•°æ®åº“ä¸­æ‰¾ä¸€é</span>        <span class="token keyword">if</span> results<span class="token punctuation">.</span>__len__<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">:</span>            results <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>            search_blogs <span class="token operator">=</span> Blog<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>title__icontains<span class="token operator">=</span>self<span class="token punctuation">.</span>query<span class="token punctuation">,</span>                                               content__icontains<span class="token operator">=</span>self<span class="token punctuation">.</span>query<span class="token punctuation">)</span><span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">'-created_time'</span><span class="token punctuation">)</span>            <span class="token keyword">for</span> search_blog <span class="token keyword">in</span> search_blogs<span class="token punctuation">:</span>                results<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"object"</span><span class="token punctuation">:</span> search_blog<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token comment"># å°†resultç»“æœè¿”å›ä¸ºBlogåˆ—è¡¨</span>        results <span class="token operator">=</span> <span class="token punctuation">[</span>blog<span class="token punctuation">[</span><span class="token string">'object'</span><span class="token punctuation">]</span> <span class="token keyword">for</span> blog <span class="token keyword">in</span> results<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">if</span> results<span class="token punctuation">.</span>__len__<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span> <span class="token keyword">else</span> results        context<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">&#123;</span>            <span class="token string">'title'</span><span class="token punctuation">:</span> <span class="token string">'åšå®¢æœç´¢'</span><span class="token punctuation">,</span>            <span class="token string">'results'</span><span class="token punctuation">:</span> results        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> context<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æŸ¥çœ‹SearchViewçš„æºç æˆ–æ–‡æ¡£ï¼Œäº†è§£æ¯ä¸ªæ–¹æ³•æ˜¯åšä»€ä¹ˆçš„ï¼Œä¾¿å¯æœ‰é’ˆå¯¹æ€§åœ°è¿›è¡Œä¿®æ”¹ã€‚</p><ul><li> ä¸Šé¢é‡å†™äº†templateå˜é‡ï¼Œä¿®æ”¹äº†æœç´¢ç»“æœé¡µé¢æ¨¡æ¿çš„ä½ç½®ã€‚</li><li> é‡å†™get_contextæ–¹æ³•ï¼Œæ·»åŠ ä¸€äº›è‡ªå·±æƒ³è¦çš„å­—æ®µï¼Œä¿®æ”¹resultsçš„æ ¼å¼<h2 id="3-é«˜äº®æœç´¢å…³é”®å­—"><a href="#3-é«˜äº®æœç´¢å…³é”®å­—" class="headerlink" title="3.é«˜äº®æœç´¢å…³é”®å­—"></a>3.é«˜äº®æœç´¢å…³é”®å­—</h2></li></ul><p>åœ¨æœç´¢ç»“æœé¡µçš„æ¨¡æ¿ä¸­ï¼Œå¯ä»¥ä½¿ç”¨highlightæ ‡ç­¾ï¼ˆéœ€è¦å…ˆloadä¸€ä¸‹ï¼‰</p><pre class="line-numbers language-none"><code class="language-none">&#123;% highlight &lt;text_block&gt; with &lt;query&gt; [css_class &quot;class_name&quot;] [html_tag &quot;span&quot;] [max_length 200] %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>text_blockå³ä¸ºå…¨éƒ¨æ–‡å­—ï¼Œqueryä¸ºé«˜äº®å…³é”®å­—ï¼Œåé¢å¯é€‰å‚æ•°ï¼Œå¯ä»¥å®šä¹‰é«˜äº®å…³é”®å­—çš„htmlæ ‡ç­¾ã€cssç±»åï¼Œä»¥åŠæ•´ä¸ªé«˜äº®éƒ¨åˆ†çš„æœ€é•¿é•¿åº¦ã€‚</p><pre><code>é«˜äº®éƒ¨åˆ†çš„æºç ä½äº haystack/templatetags/lighlight.py å’Œ haystack/utils/lighlighting.pyæ–‡ä»¶ä¸­ï¼Œå¯å¤åˆ¶è¿›è¡Œä¿®æ”¹ï¼Œå®ç°è‡ªå®šä¹‰é«˜äº®åŠŸèƒ½ã€‚</code></pre>]]></content>
      
      
      <categories>
          
          <category> Djangoå…¨ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoè§†é¢‘ç½‘ç«™æ­å»º--step07æ”¶è—ä¸ç‚¹èµåŠŸèƒ½</title>
      <link href="/post/django-shi-pin-wang-zhan-da-jian/step07-shou-cang-yu-dian-zan-gong-neng/"/>
      <url>/post/django-shi-pin-wang-zhan-da-jian/step07-shou-cang-yu-dian-zan-gong-neng/</url>
      
        <content type="html"><![CDATA[<p>#æ”¶è—ä¸ç‚¹èµåŠŸèƒ½<br>æœ¬èŠ‚è®²ä¸€ä¸‹ä¸ªäººèœå•ä¸­å¦å¤–ä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„åŠŸèƒ½ï¼Œâ€œæˆ‘çš„æ”¶è—â€ä¸â€œæˆ‘çš„å–œæ¬¢â€ã€‚<br>é€šè¿‡å­¦ä¹ è¿™ä¸¤ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬ä¼šåŠ æ·±å¯¹djangoä¸­é€šç”¨è§†å›¾ç±»çš„ç†è§£ä¸åº”ç”¨ã€‚</p><p>##æˆ‘çš„æ”¶è—<br>###æ¨¡å‹<br>ä¸Šä¸€èŠ‚å·²ç»å®ç°è¿™ä¸ªæ¨¡å‹äº†<br>æˆ‘çš„æ”¶è—ã€æˆ‘çš„å–œæ¬¢ï¼Œéƒ½æ˜¯ä¸æˆ‘å…³è”ï¼Œåˆå› ä¸ºï¼Œæˆ‘å¯ä»¥æ”¶è—å¤šä¸ªè§†é¢‘ï¼Œè§†é¢‘ä¹Ÿå¯ä»¥è¢«å¤šä¸ªç”¨æˆ·æ”¶è—ï¼Œæ‰€ä»¥ç”¨æˆ·ä¸è§†é¢‘æ˜¯å±äºå¤šå¯¹å¤šçš„å…³ç³»ã€‚<br>æ‰€ä»¥æˆ‘ä»¬åœ¨videoæ¨¡å‹ä¸Šæ·»åŠ ä¸¤ä¸ªå­—æ®µlikedå’Œcollectedï¼Œåˆ†åˆ«å¯¹åº”æˆ‘å–œæ¬¢å’Œæˆ‘æ”¶è—ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># video/models.py</span><span class="token keyword">class</span> <span class="token class-name">Video</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># è§‚çœ‹æ¬¡æ•°ã€‚æ•°æ®ç±»å‹æ˜¯IntegerFieldï¼Œé»˜è®¤æ˜¯0</span>    view_count <span class="token operator">=</span> models<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token comment"># å–œæ¬¢çš„ç”¨æˆ·ã€‚æ•°æ®ç±»å‹æ˜¯ManyToManyFieldï¼Œè¿™æ˜¯ä¸€ç§å¤šå¯¹å¤šçš„å…³ç³»ï¼Œè¡¨ç¤ºä¸€ä¸ªè§†é¢‘å¯ä»¥è¢«å¤šä¸ªç”¨æˆ·å–œæ¬¢ï¼Œä¸€ä¸ªç”¨æˆ·ä¹Ÿå¯ä»¥å–œæ¬¢å¤šä¸ªè§†é¢‘ã€‚è®°å¾—è®¾ç½®ç”¨æˆ·è¡¨ä¸ºsettings.AUTH_USER_MODEL</span>    liked <span class="token operator">=</span> models<span class="token punctuation">.</span>ManyToManyField<span class="token punctuation">(</span>settings<span class="token punctuation">.</span>AUTH_USER_MODEL<span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> related_name<span class="token operator">=</span><span class="token string">"liked_videos"</span><span class="token punctuation">)</span>    <span class="token comment"># æ”¶è—çš„ç”¨æˆ·ã€‚æ•°æ®ç±»å‹æ˜¯ManyToManyFieldï¼Œè¿™æ˜¯ä¸€ç§å¤šå¯¹å¤šçš„å…³ç³»ï¼Œè¡¨ç¤ºä¸€ä¸ªè§†é¢‘å¯ä»¥è¢«å¤šä¸ªç”¨æˆ·æ”¶è—ï¼Œä¸€ä¸ªç”¨æˆ·ä¹Ÿå¯ä»¥æ”¶è—å¤šä¸ªè§†é¢‘ã€‚è®¾ç½®ç”¨æˆ·è¡¨ä¸ºsettings.AUTH_USER_MODEL</span>    collected <span class="token operator">=</span> models<span class="token punctuation">.</span>ManyToManyField<span class="token punctuation">(</span>settings<span class="token punctuation">.</span>AUTH_USER_MODEL<span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> related_name<span class="token operator">=</span><span class="token string">"collected_videos"</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    created_time <span class="token operator">=</span> models<span class="token punctuation">.</span>DateTimeField<span class="token punctuation">(</span>auto_now_add<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥çœ‹å‡ºlikedå’Œcollectedå­—æ®µéƒ½æ˜¯å±äºManyToManyFieldç±»å‹ï¼Œè¡¨ç¤ºè§†é¢‘ä¸ç”¨æˆ·æ˜¯å¤šå¯¹å¤šçš„å…³ç³»ã€‚</p><p>å¹¶åˆ†åˆ«è®¾ç½®å®ƒä»¬çš„åˆ«åä¸ºâ€liked_videosâ€å’Œâ€collected_videosâ€ï¼Œé€šè¿‡åˆ«åä¹Ÿå¯ä»¥è®¿é—®åˆ°æ•°æ®ã€‚<br>###è·¯ç”±è®¾ç½®<br>ä¸‹é¢æˆ‘ä»¬æ¥æ·»åŠ ä¸¤è€…çš„è·¯ç”±ï¼Œæ·»åŠ åœ¨users/urls.pyä¸‹é¢ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">path<span class="token punctuation">(</span><span class="token string">'&lt;int:pk>/collect_videos/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>CollectListView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'collect_videos'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>path<span class="token punctuation">(</span><span class="token string">'&lt;int:pk>/like_videos/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>LikeListView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'like_videos'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å…¶ä¸­ï¼Œæˆ‘çš„æ”¶è—çš„è§†å›¾ç±»æ˜¯CollectListViewï¼Œæˆ‘çš„å–œæ¬¢çš„è§†å›¾ç±»æ˜¯LikeListViewã€‚æˆ‘ä»¬å…ˆæ¥å®ç°CollectListView</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># userprofile/views.py</span><span class="token keyword">class</span> <span class="token class-name">CollectListView</span><span class="token punctuation">(</span>generic<span class="token punctuation">.</span>ListView<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> User    template_name <span class="token operator">=</span> <span class="token string">'users/collect_videos.html'</span>    context_object_name <span class="token operator">=</span> <span class="token string">'video_list'</span>    paginate_by <span class="token operator">=</span> <span class="token number">10</span>    <span class="token keyword">def</span> <span class="token function">get_context_data</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">,</span> object_list<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        context <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span>CollectListView<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>get_context_data<span class="token punctuation">(</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>        paginator <span class="token operator">=</span> context<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'paginator'</span><span class="token punctuation">)</span>        page <span class="token operator">=</span> context<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'page_obj'</span><span class="token punctuation">)</span>        page_list <span class="token operator">=</span> get_page_list<span class="token punctuation">(</span>paginator<span class="token punctuation">,</span> page<span class="token punctuation">)</span>        context<span class="token punctuation">[</span><span class="token string">'page_list'</span><span class="token punctuation">]</span> <span class="token operator">=</span> page_list        <span class="token keyword">return</span> context    <span class="token keyword">def</span> <span class="token function">get_queryset</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        user <span class="token operator">=</span> get_object_or_404<span class="token punctuation">(</span>User<span class="token punctuation">,</span> pk<span class="token operator">=</span>self<span class="token punctuation">.</span>kwargs<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'pk'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        videos <span class="token operator">=</span> user<span class="token punctuation">.</span>collected_videos<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> videos<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸é¦–é¡µå±•ç¤ºçš„åŠŸèƒ½ç±»ä¼¼ï¼Œè¿™é‡ŒåŒæ ·ç»§æ‰¿äº†ListViewé€šç”¨è§†å›¾ç±»ã€‚å¹¶ä½¿ç”¨äº†å…¬å…±å‡½æ•°get_page_listå¯¹æ•°æ®è¿›è¡Œåˆ†é¡µã€‚<br>åœ¨è·å–æ”¶è—æ•°æ®åˆ—è¡¨æ—¶ï¼Œæˆ‘ä»¬ç”¨çš„æ˜¯user.collected_videos.all()ï¼Œå…¶ä¸­collected_videoså°±æ˜¯å‰é¢å®šä¹‰çš„åˆ«åã€‚<br>å¹¶é€šè¿‡é…ç½®template_nameå°†æ•°æ®ä¼ é€’ç»™æ¨¡æ¿æ–‡ä»¶users/collect_videos.htmlã€‚<br>###å‰ç«¯ä»£ç <br>æ¨¡æ¿æ–‡ä»¶å…³é”®ä»£ç </p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æˆ‘çš„æ”¶è—<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui unstackable items<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    &#123;% for item in video_list %&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui tiny image<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            &#123;% thumbnail item.cover "300x200" crop="center" as im %&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui image<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123; im.url &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            &#123;% empty %&#125;            &#123;% endthumbnail %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>middle aligned content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>header<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>video:detail<span class="token punctuation">'</span> item.pk %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; item.title &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    &#123;% empty %&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>æš‚æ— æ•°æ®<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>    &#123;% endfor %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>&#123;% include "base/page_nav.html" %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>##æˆ‘çš„å–œæ¬¢</p><p>ä¸‹é¢æ¥å¼€å‘æˆ‘çš„å–œæ¬¢åŠŸèƒ½</p><p>è¯¥åŠŸèƒ½ä¸æˆ‘çš„æ”¶è—åŠŸèƒ½ç±»ä¼¼ã€‚å› ä¸ºå‰é¢å·²ç»æ·»åŠ äº†like_videosè·¯ç”±ï¼Œæˆ‘ä»¬ç›´æ¥å†™LikeListViewçš„ä»£ç </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">LikeListView</span><span class="token punctuation">(</span>generic<span class="token punctuation">.</span>ListView<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> User    template_name <span class="token operator">=</span> <span class="token string">'users/like_videos.html'</span>    context_object_name <span class="token operator">=</span> <span class="token string">'video_list'</span>    paginate_by <span class="token operator">=</span> <span class="token number">10</span>    <span class="token keyword">def</span> <span class="token function">get_context_data</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">,</span> object_list<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        context <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span>LikeListView<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>get_context_data<span class="token punctuation">(</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>        paginator <span class="token operator">=</span> context<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'paginator'</span><span class="token punctuation">)</span>        page <span class="token operator">=</span> context<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'page_obj'</span><span class="token punctuation">)</span>        page_list <span class="token operator">=</span> get_page_list<span class="token punctuation">(</span>paginator<span class="token punctuation">,</span> page<span class="token punctuation">)</span>        context<span class="token punctuation">[</span><span class="token string">'page_list'</span><span class="token punctuation">]</span> <span class="token operator">=</span> page_list        <span class="token keyword">return</span> context    <span class="token keyword">def</span> <span class="token function">get_queryset</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        user <span class="token operator">=</span> get_object_or_404<span class="token punctuation">(</span>User<span class="token punctuation">,</span> pk<span class="token operator">=</span>self<span class="token punctuation">.</span>kwargs<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'pk'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        videos <span class="token operator">=</span> user<span class="token punctuation">.</span>liked_videos<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> videos<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸æˆ‘çš„æ”¶è—çš„æ¨¡å¼ä¸€æ¨¡ä¸€æ ·ï¼ŒåŒæ ·æ˜¯ç»§æ‰¿ListViewå¹¶è®¾ç½®ç›¸å…³modelä¸template_nameå˜é‡ã€‚æœ€ç»ˆé€šè¿‡users/like_videos.htmlæ¥æ¸²æŸ“ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Djangoè§†é¢‘ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoè§†é¢‘ç½‘ç«™æ­å»º--step3é¦–é¡µåŠŸèƒ½</title>
      <link href="/post/django-shi-pin-wang-zhan-da-jian/step3-shou-ye-gong-neng/"/>
      <url>/post/django-shi-pin-wang-zhan-da-jian/step3-shou-ye-gong-neng/</url>
      
        <content type="html"><![CDATA[<p>#é¦–é¡µåŠŸèƒ½<br>åœ¨æœ¬è®²ä¸­ï¼Œæˆ‘ä»¬å¼€å§‹é¦–é¡µåŠŸèƒ½çš„å¼€å‘ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œ<br>å­¦ä¹ åˆ°Djangoä¸­çš„é€šç”¨è§†å›¾ç±»ã€åˆ†é¡µå¯¹è±¡paginatorä»¥åŠforeignKeyå¤–é”®çš„ä½¿ç”¨ã€‚</p><p>é¦–é¡µæ‹†è§£ä¸º4ä¸ªå°çš„ä¸šåŠ¡æ¨¡å—æ¥å¼€å‘ï¼Œåˆ†åˆ«æ˜¯ï¼šåˆ—è¡¨æ˜¾ç¤ºã€åˆ†é¡µåŠŸèƒ½ã€æœç´¢åŠŸèƒ½ã€åˆ†ç±»åŠŸèƒ½ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬åˆ†åˆ«å¯¹è¿™å››ä¸ªåŠŸèƒ½æ¨¡å—è¿›è¡Œå¼€å‘è®²è§£ã€‚<br>å¼€å‘æ€è·¯</p><p>å¼€å‘ä¸€ä¸ªåŠŸèƒ½çš„åŸºæœ¬æ€è·¯æ˜¯ï¼šå…ˆæ–°å»ºåº”ç”¨ï¼Œç„¶ååˆ†æåŠŸèƒ½æ¶‰åŠåˆ°å“ªäº›ä¸šåŠ¡ï¼Œä»è€Œåˆ†æå‡ºéœ€è¦çš„æ•°æ®åº“å­—æ®µï¼Œç„¶åç¼–å†™æ¨¡å‹ï¼Œä¹‹åå°±æ˜¯å±•ç¤ºé˜¶æ®µï¼Œé€šè¿‡urlè·¯ç”±é…ç½®è§†å›¾å‡½æ•°ï¼Œæ¥å°†æ¨¡å‹é‡Œé¢çš„æ•°æ®æ˜¾ç¤ºå‡ºæ¥ã€‚</p><p>okï¼Œæˆ‘ä»¬é€šè¿‡å‘½ä»¤å»ºç«‹åº”ç”¨ï¼Œå‘½åä¸ºvideoã€‚æ‰§è¡Œåï¼Œdjangoå°†ä¸ºæˆ‘ä»¬æ–°å»ºvideoæ–‡ä»¶å¤¹ã€‚</p><pre><code>python3 manage.py startapp video</code></pre><p>ä¸‹é¢çš„åŠŸèƒ½æ¨¡å—å¼€å‘éƒ½åœ¨è¯¥åº”ç”¨(video)ä¸‹è¿›è¡Œã€‚<br>##å»ºæ¨¡å‹</p><p>æ­¤å¤„ï¼Œæˆ‘ä»¬éœ€è¦å»ºç«‹ä¸¤ä¸ªæ¨¡å‹ï¼Œåˆ†åˆ«æ˜¯åˆ†ç±»è¡¨(classification)å’Œè§†é¢‘åˆ—è¡¨(video)ã€‚</p><p>ä»–ä»¬æ˜¯å¤šå¯¹ä¸€çš„å…³ç³»(ä¸€ä¸ªåˆ†ç±»å¯¹åº”å¤šä¸ªè§†é¢‘ï¼Œä¸€ä¸ªè§†é¢‘å¯¹åº”ä¸€ä¸ªåˆ†ç±»)ã€‚</p><p>é¦–å…ˆç¼–å†™Classificationè¡¨ï¼Œåœ¨model.pyä¸‹é¢ï¼Œæˆ‘ä»¬é”®å…¥å¦‚ä¸‹ä»£ç ã€‚</p><p>å­—æ®µæœ‰title(åˆ†ç±»åç§°)å’Œstatus(æ˜¯å¦å¯ç”¨)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models<span class="token keyword">class</span> <span class="token class-name">Classification</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    list_display <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">,</span><span class="token punctuation">)</span>    title <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span>blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    status <span class="token operator">=</span> models<span class="token punctuation">.</span>BooleanField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        db_table <span class="token operator">=</span> <span class="token string">"v_classification"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å­—æ®µè¯´æ˜</p><pre><code>title      åˆ†ç±»åç§°ã€‚æ•°æ®ç±»å‹æ˜¯CharFieldï¼Œæœ€å¤§é•¿åº¦ä¸ºmax_length=100ï¼Œå…è®¸ä¸ºç©ºnull=Truestatus     æ˜¯å¦å¯ç”¨ã€‚æ•°æ®ç±»å‹æ˜¯BooleanField,é»˜è®¤ä¸ºdefault=Truedb_table   è¡¨å</code></pre><p>ç„¶åç¼–å†™Videoæ¨¡å‹ï¼Œæ ¹æ®ç½‘ç«™ä¸šåŠ¡ï¼Œæˆ‘ä»¬è®¾ç½®äº†title(æ ‡é¢˜)ã€ desc(æè¿°)ã€ classification(åˆ†ç±»)ã€file(è§†é¢‘æ–‡ä»¶)ã€cover(å°é¢)ã€status(å‘å¸ƒçŠ¶æ€)ç­‰å­—æ®µã€‚</p><p>å…¶ä¸­classificationæ˜¯ä¸€ä¸ªForeignKeyå¤–é”®å­—æ®µï¼Œè¡¨ç¤ºä¸€ä¸ªåˆ†ç±»å¯¹åº”å¤šä¸ªè§†é¢‘ï¼Œä¸€ä¸ªè§†é¢‘å¯¹åº”ä¸€ä¸ªåˆ†ç±»(å¤šå¯¹ä¸€)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models<span class="token keyword">class</span> <span class="token class-name">Video</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    STATUS_CHOICES <span class="token operator">=</span> <span class="token punctuation">(</span>        <span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">,</span> <span class="token string">'å‘å¸ƒä¸­'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'æœªå‘å¸ƒ'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">)</span>    title <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>                             <span class="token comment"># æ ‡é¢˜</span>    desc <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">255</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>                              <span class="token comment"># æè¿°</span>    classification <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>Classification<span class="token punctuation">,</span> on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>     <span class="token comment"># å¤–é”®å…³è”åˆ†ç±»</span>    <span class="token builtin">file</span> <span class="token operator">=</span> models<span class="token punctuation">.</span>FileField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">255</span><span class="token punctuation">)</span>                                                     <span class="token comment"># è§†é¢‘æ–‡ä»¶åœ°å€</span>    cover <span class="token operator">=</span> models<span class="token punctuation">.</span>ImageField<span class="token punctuation">(</span>upload_to<span class="token operator">=</span><span class="token string">'cover/'</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>                        <span class="token comment"># å°é¢,è®¾ç½®äº†å­˜è´®ç›®å½•</span>    status <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> choices<span class="token operator">=</span>STATUS_CHOICES<span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>      <span class="token comment"># å‘å¸ƒçŠ¶æ€</span>    created_time <span class="token operator">=</span> models<span class="token punctuation">.</span>DateTimeField<span class="token punctuation">(</span>auto_now_add<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>            <span class="token comment"># åˆ›å»ºæ—¶é—´ è‡ªåŠ¨ç”Ÿæˆæ—¶é—´</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        db_table <span class="token operator">=</span> <span class="token string">"v_video"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å­—æ®µè¯´æ˜</p><pre><code>title       è§†é¢‘æ ‡é¢˜ã€‚æ•°æ®ç±»å‹æ˜¯charFieldï¼Œæœ€å¤§é•¿åº¦ä¸ºmax_length=100ï¼Œå…è®¸ä¸ºç©ºnull=Truedesc        è§†é¢‘æè¿°ã€‚æ•°æ®ç±»å‹æ˜¯charFieldï¼Œæœ€å¤§é•¿åº¦ä¸ºmax_length=255ï¼Œå…è®¸ä¸ºç©ºnull=Truefile        è§†é¢‘æ–‡ä»¶åœ°å€ã€‚æ•°æ®ç±»å‹æ˜¯fileFieldã€‚å…¶ä¸­å­˜çš„æ˜¯è§†é¢‘æ–‡ä»¶çš„åœ°å€ï¼Œåœ¨ä¹‹åçš„è§†é¢‘ç®¡ç†ä¸­æˆ‘ä»¬å°†ä¼šå¯¹è§†é¢‘çš„ä¸Šä¼ è¿›è¡Œå…·ä½“çš„è®²è§£ã€‚cover       è§†é¢‘å°é¢ã€‚æ•°æ®ç±»å‹æ˜¯ImageFieldã€‚å­˜å‚¨ç›®å½•ä¸ºupload_to=â€˜cover/â€™ï¼Œå…è®¸ä¸ºç©ºnull=Truestatus      è§†é¢‘çŠ¶æ€ã€‚æ˜¯ä¸€ä¸ªé€‰æ‹©çŠ¶æ€ï¼Œç”¨choicesè®¾ç½®å¤šé€‰å…ƒç¥–ã€‚created_time åˆ›å»ºæ—¶é—´ã€‚æ•°æ®ç±»å‹æ˜¯DateTimeField ã€‚è®¾ç½®è‡ªåŠ¨ç”Ÿæˆæ—¶é—´auto_now_add=True</code></pre><p>ForeignKey  è¡¨æ˜ä¸€ç§ä¸€å¯¹å¤šçš„å…³è”å…³ç³»ã€‚</p><p>æ¯”å¦‚è¿™é‡Œæˆ‘ä»¬çš„è§†é¢‘å’Œåˆ†ç±»çš„å…³ç³»ï¼Œä¸€ä¸ªè§†é¢‘åªèƒ½å¯¹åº”ä¸€ä¸ªåˆ†ç±»ï¼Œè€Œä¸€ä¸ªåˆ†ç±»ä¸‹å¯ä»¥æœ‰å¤šä¸ªè§†é¢‘ã€‚</p><p>æ›´å¤šå…³äºForeinkKeyçš„è¯´æ˜ï¼Œå¯ä»¥å‚çœ‹ <a href="https://docs.djangoproject.com/zh-hans/3.1/topics/db/examples/many_to_one/" title="å®˜æ–¹ä»‹ç»">ForeignKey</a></p><p>å°†æ–°å»ºå¥½çš„æ¨¡å‹æ³¨å†Œä¸€ä¸‹,åœ¨video/admin.py æ³¨å†Œå¦‚ä¸‹</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> admin<span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> <span class="token operator">*</span><span class="token comment"># Register your models here.)</span>admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>register<span class="token punctuation">(</span>Classification<span class="token punctuation">)</span>admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>register<span class="token punctuation">(</span>Video<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>##è·¯ç”±é…ç½®å’Œæ³¨å†Œapp</p><p>è¦æƒ³è®¿é—®åˆ°é¦–é¡µï¼Œå¿…é¡»å…ˆé…ç½®å¥½è·¯ç”±ã€‚åœ¨videoä¸‹å»ºç«‹urls.pyæ–‡ä»¶<br>å‘½åç©ºé—´ä¸ºappçš„åå­—â€˜videoâ€™ï¼Œæ·»åŠ è·¯ç”±ä¿¡æ¯</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> viewsapp_name <span class="token operator">=</span> <span class="token string">'video'</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    path<span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>IndexView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'index'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    path<span class="token punctuation">(</span><span class="token string">'search/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>SearchListView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'search'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åŒæ—¶åœ¨projectä¸­çš„urls.py æ·»åŠ è·¯ç”±ä¿¡æ¯</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    path<span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>IndexView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'index'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    path<span class="token punctuation">(</span><span class="token string">'search/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>SearchListView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'search'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨è®¾ç½®ä¸­æ·»åŠ å®‰è£…å’Œä½¿ç”¨çš„appï¼Œ settingsã€‚py</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token string">'django.contrib.admin'</span><span class="token punctuation">,</span>    <span class="token string">'django.contrib.auth'</span><span class="token punctuation">,</span>    <span class="token string">'django.contrib.contenttypes'</span><span class="token punctuation">,</span>    <span class="token string">'django.contrib.sessions'</span><span class="token punctuation">,</span>    <span class="token string">'django.contrib.messages'</span><span class="token punctuation">,</span>    <span class="token string">'django.contrib.staticfiles'</span><span class="token punctuation">,</span>    <span class="token string">'users'</span><span class="token punctuation">,</span>    <span class="token string">'video'</span><span class="token punctuation">,</span>                     <span class="token comment"># æ–°æ·»åŠ çš„app</span>    <span class="token string">'sorl.thumbnail'</span><span class="token punctuation">,</span>            <span class="token comment"># æœ¬æ¬¡ä½¿ç”¨çš„appï¼Œé€šè¿‡thumbnailæ·»åŠ ç¼©ç•¥å›¾  </span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸€æ¡pathè¯­å¥å°±ä»£è¡¨ä¸€æ¡è·¯ç”±ä¿¡æ¯ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨æµè§ˆå™¨è¾“å…¥127.0.0.1:8000/video/indexæ¥è®¿é—®é¦–é¡µäº†ã€‚<br>##æ˜¾ç¤ºåˆ—è¡¨<br>æ˜¾ç¤ºåˆ—è¡¨æ•°æ®éå¸¸ç®€å•ï¼Œæˆ‘ä»¬ä½¿ç”¨djangoä¸­å†…ç½®çš„è§†å›¾æ¨¡ç‰ˆç±»ListViewæ¥æ˜¾ç¤ºï¼Œé¦–å…ˆåœ¨view.pyä¸­ç¼–å†™IndexViewç±»ï¼Œç”¨å®ƒæ¥æ˜¾ç¤ºåˆ—è¡¨æ•°æ®ã€‚é”®å…¥å¦‚ä¸‹ä»£ç </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">IndexView</span><span class="token punctuation">(</span>generic<span class="token punctuation">.</span>ListView<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> Video    template_name <span class="token operator">=</span> <span class="token string">'video/index.html'</span>    context_object_name <span class="token operator">=</span> <span class="token string">'video_list'</span>  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ­¤å¤„ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†djangoæä¾›çš„é€šç”¨è§†å›¾ç±»ListView, ListViewä½¿ç”¨å¾ˆç®€å•ï¼Œåªéœ€è¦æˆ‘ä»¬ç®€å•çš„é…ç½®å‡ è¡Œä»£ç ï¼Œå³å¯å°†æ•°æ®åº“é‡Œé¢çš„æ•°æ®æ¸²æŸ“åˆ°å‰ç«¯ã€‚æ¯”å¦‚ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬é…ç½®äº†</p><pre><code>model = Video, ä½œç”¨äºVideoæ¨¡å‹template_name = â€˜video/index.htmlâ€™ ï¼Œå‘Šè¯‰ListViewè¦ä½¿ç”¨æˆ‘ä»¬å·²ç»åˆ›å»ºçš„æ¨¡ç‰ˆæ–‡ä»¶ã€‚context_object_name = â€˜video_listâ€™ ï¼Œä¸Šä¸‹æ–‡å˜é‡åï¼Œå‘Šè¯‰ListViewï¼Œåœ¨å‰ç«¯æ¨¡ç‰ˆæ–‡ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨è¯¥å˜é‡åæ¥å±•ç°æ•°æ®ã€‚</code></pre><p>##åˆ†ç±»åŠŸèƒ½</p><p>åœ¨å†™åˆ†ç±»åŠŸèƒ½ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå­¦ä¹ ä¸€ä¸ªå›è°ƒå‡½æ•° get_context_data()</p><p>è¿™æ˜¯ListViewè§†å›¾ç±»ä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨ get_context_data() å‡½æ•°ä¸­ï¼Œå¯ä»¥ä¼ ä¸€äº›é¢å¤–å†…å®¹åˆ°æ¨¡æ¿ã€‚</p><p>å› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¥å‡½æ•°æ¥ä¼ é€’åˆ†ç±»æ•°æ®ã€‚</p><p>è¦ä½¿ç”¨å®ƒï¼Œå¾ˆç®€å•ã€‚</p><p>åªéœ€è¦åœ¨IndexViewç±»ä¸‹é¢ï¼Œè¿½åŠ get_context_data()çš„å®ç°å³å¯ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">IndexView</span><span class="token punctuation">(</span>generic<span class="token punctuation">.</span>ListView<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> Video    template_name <span class="token operator">=</span> <span class="token string">'video/index.html'</span>    context_object_name <span class="token operator">=</span> <span class="token string">'video_list'</span>     <span class="token keyword">def</span> <span class="token function">get_context_data</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">,</span> object_list<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        context <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span>IndexView<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>get_context_data<span class="token punctuation">(</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>        classification_list <span class="token operator">=</span> Classification<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>status<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span>        context<span class="token punctuation">[</span><span class="token string">'classification_list'</span><span class="token punctuation">]</span> <span class="token operator">=</span> classification_list        <span class="token keyword">return</span> context<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬å°†åˆ†ç±»æ•°æ®é€šè¿‡Classification.objects.filter(status=True).values()ä»æ•°æ®åº“é‡Œé¢è¿‡æ»¤å‡ºæ¥ï¼Œç„¶åèµ‹ç»™classification_listï¼Œæœ€åæ”¾åˆ°contextå­—å…¸é‡Œé¢ã€‚</p><p>åœ¨å‰ç«¯æ¨¡æ¿ï¼ˆtemplates/video/index.htmlï¼‰ä¸­ï¼Œå°±å¯ä»¥é€šè¿‡classification_listæ¥å–æ•°æ®ã€‚æ·»åŠ ä»£ç </p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>classification<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui red label<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å…¨éƒ¨<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    &#123;% for item in classification_list %&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui label<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; item.title &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    &#123;% endfor %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½“ç„¶ç°åœ¨åªæ˜¯å®ç°äº†åˆ†ç±»å±•ç¤ºæ•ˆæœï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç»§ç»­å®ç°ç‚¹å‡»æ•ˆæœï¼Œå³ç‚¹å‡»ä¸åŒçš„åˆ†ç±»ï¼Œæ˜¾ç¤ºä¸åŒçš„è§†é¢‘åˆ—è¡¨ã€‚</p><p>æˆ‘ä»¬å…ˆç»™æ¯ä¸ªåˆ†ç±»æŒ‰é’®åŠ ä¸Šhrefé“¾æ¥</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>classification<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui red label<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>home<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å…¨éƒ¨<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    &#123;% for item in classification_list %&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui label<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?c=&#123;&#123; item.id &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; item.title &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    &#123;% endfor %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é€šè¿‡æ·»åŠ ?c= è¿™é‡Œç”¨cä»£è¡¨åˆ†ç±»çš„idï¼Œç‚¹å‡»åï¼Œä¼šä¼ åˆ°è§†å›¾ç±»ä¸­ï¼Œåœ¨è§†å›¾ç±»ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ get_queryset() å‡½æ•°ï¼Œå°†getæ•°æ®å–å‡ºæ¥ã€‚é€šè¿‡self.request.GET.get(â€œcâ€, None) èµ‹ç»™cï¼Œåˆ¤æ–­cæ˜¯å¦ä¸ºNoneï¼Œå¦‚æœä¸ºNoneï¼Œå°±å“åº”å…¨éƒ¨ï¼Œå¦‚æœæœ‰å€¼ï¼Œå°±é€šè¿‡get_object_or_404(Classification, pk=self.c)å…ˆè·å–å½“å‰ç±»ï¼Œç„¶åclassification.video_setè·å–å¤–é”®æ•°æ®ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">get_queryset</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>    self<span class="token punctuation">.</span>c <span class="token operator">=</span> self<span class="token punctuation">.</span>request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> self<span class="token punctuation">.</span>c<span class="token punctuation">:</span>        classification <span class="token operator">=</span> get_object_or_404<span class="token punctuation">(</span>Classification<span class="token punctuation">,</span> pk<span class="token operator">=</span>self<span class="token punctuation">.</span>c<span class="token punctuation">)</span>        <span class="token keyword">return</span> classification<span class="token punctuation">.</span>video_set<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">'-created_time'</span><span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> Video<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>status<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">'-created_time'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>##åˆ†é¡µåŠŸèƒ½</p><p>åœ¨Djangoä¸­ï¼Œæœ‰ç°æˆçš„åˆ†é¡µè§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¼€å‘è€…çœäº†ä¸å°‘äº‹æƒ…ã€‚å¦‚æœæ˜¯ç®€å•çš„åˆ†é¡µï¼Œåªéœ€è¦é…ç½®ä¸€ä¸‹paginate_byå³å¯å®ç°ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">IndexView</span><span class="token punctuation">(</span>generic<span class="token punctuation">.</span>ListView<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> Video    template_name <span class="token operator">=</span> <span class="token string">'video/index.html'</span>    context_object_name <span class="token operator">=</span> <span class="token string">'video_list'</span>    paginate_by <span class="token operator">=</span> <span class="token number">12</span>    c <span class="token operator">=</span> <span class="token boolean">None</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·æ¯é¡µçš„åˆ†é¡µæ•°æ®å°±èƒ½æ­£ç¡®çš„æ˜¾ç¤ºå‡ºæ¥æ¥ï¼Œç°åœ¨æ¥å®Œå–„åº•éƒ¨çš„é¡µç æ¡ã€‚</p><p>é¡µç åˆ—è¡¨éœ€è¦è§†å›¾ç±»å’Œæ¨¡æ¿å…±åŒæ¥å®Œæˆï¼Œæˆ‘ä»¬å…ˆæ¥å†™è§†å›¾ç±»ã€‚</p><p>åœ¨å‰é¢æˆ‘ä»¬å·²ç»å†™è¿‡get_context_dataäº†ï¼Œè¯¥å‡½æ•°çš„ä¸»è¦åŠŸèƒ½å°±æ˜¯ä¼ é€’é¢å¤–çš„æ•°æ®ç»™æ¨¡æ¿ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬å°±åˆ©ç”¨get_context_dataæ¥ä¼ é€’é¡µç æ•°æ®ã€‚</p><p>æˆ‘ä»¬å…ˆå®šä¹‰ä¸€ä¸ªå·¥å…·å‡½æ•°ï¼Œå«get_page_listã€‚<br> åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶helpers.pyè¯¥æ–‡ä»¶å½“ä½œä¸€ä¸ªå…¨å±€çš„å·¥å…·ç±»ï¼Œç”¨æ¥å­˜æ”¾å„ç§å·¥å…·å‡½æ•°ã€‚</p><p> æŠŠget_page_listæ”¾åˆ°helpers.pyé‡Œé¢ è¯¥å‡½æ•°ç”¨æ¥ç”Ÿäº§é¡µç åˆ—è¡¨ï¼Œä¸ä½†è¿™é‡Œå¯ä»¥ä½¿ç”¨ï¼Œä»¥ååœ¨å…¶ä»–åœ°æ–¹ä¹Ÿå¯ä»¥è°ƒç”¨è¯¥å‡½æ•°ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">get_page_list</span><span class="token punctuation">(</span>paginator<span class="token punctuation">,</span> page<span class="token punctuation">)</span><span class="token punctuation">:</span>    page_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">if</span> paginator<span class="token punctuation">.</span>num_pages <span class="token operator">></span> <span class="token number">10</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> page<span class="token punctuation">.</span>number <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">:</span>            start_page <span class="token operator">=</span> <span class="token number">1</span>        <span class="token keyword">elif</span> page<span class="token punctuation">.</span>number <span class="token operator">></span> paginator<span class="token punctuation">.</span>num_pages <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">:</span>            start_page <span class="token operator">=</span> paginator<span class="token punctuation">.</span>num_pages <span class="token operator">-</span> <span class="token number">9</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            start_page <span class="token operator">=</span> page<span class="token punctuation">.</span>number <span class="token operator">-</span> <span class="token number">5</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>start_page<span class="token punctuation">,</span> start_page <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            page_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> paginator<span class="token punctuation">.</span>num_pages <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            page_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span>    <span class="token keyword">return</span> page_list<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ†é¡µé€»è¾‘ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">if</span> é¡µæ•°<span class="token operator">>=</span><span class="token number">10</span><span class="token punctuation">:</span>    å½“å‰é¡µ<span class="token operator">&lt;=</span><span class="token number">5</span>æ—¶ï¼Œèµ·å§‹é¡µä¸º<span class="token number">1</span>    å½“å‰é¡µ<span class="token operator">></span><span class="token punctuation">(</span>æ€»é¡µæ•°<span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span>æ—¶ï¼Œèµ·å§‹é¡µä¸º<span class="token punctuation">(</span>æ€»é¡µæ•°<span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">)</span>    å…¶ä»–æƒ…å†µ èµ·å§‹é¡µä¸º<span class="token punctuation">(</span>å½“å‰é¡µ<span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸¾ä¾‹ï¼š</p><pre><code>å‡è®¾ä¸€å…±16é¡µæƒ…å†µ1: å½“å‰é¡µ==5  åˆ™é¡µç åˆ—è¡¨ä¸º[1,2,3,4,5,6,7,8,9,10]æƒ…å†µ2: å½“å‰é¡µ==8  åˆ™é¡µç åˆ—è¡¨ä¸º[3,4,5,6,7,8,9,10,11,12]æƒ…å†µ3: å½“å‰é¡µ==15 åˆ™é¡µç åˆ—è¡¨ä¸º[7,8,9,10,11,12,13,14,15,16]`</code></pre><p>å½“ç„¶ä½ çœ‹åˆ°è¿™ä¸ªé€»è¾‘ä¼šæœ‰ç‚¹ä¹±ï¼Œå»ºè®®å¤§å®¶è¯»ç€ä»£ç ï¼Œå¤šè¯•éªŒå‡ éã€‚</p><p>å½“æ‹¿åˆ°é¡µç åˆ—è¡¨ï¼Œæˆ‘ä»¬ç»§ç»­æ”¹å†™get_context_data()å‡½æ•°ã€‚ å°†è·å–åˆ°çš„classification_listè¿½åŠ åˆ°contextå­—å…¸ä¸­ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>    self<span class="token punctuation">.</span>c <span class="token operator">=</span> self<span class="token punctuation">.</span>request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">get_context_data</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">,</span> object_list<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>    context <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span>IndexView<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>get_context_data<span class="token punctuation">(</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>    classification_list <span class="token operator">=</span> Classification<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>status<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span>    context<span class="token punctuation">[</span><span class="token string">'classification_list'</span><span class="token punctuation">]</span> <span class="token operator">=</span> classification_list    paginator <span class="token operator">=</span> context<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'paginator'</span><span class="token punctuation">)</span>             <span class="token comment"># è¿”å›çš„æ˜¯åˆ†é¡µå¯¹è±¡</span>    page <span class="token operator">=</span> context<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'page_obj'</span><span class="token punctuation">)</span>                   <span class="token comment"># è¿”å›çš„æ˜¯å½“å‰é¡µç </span>    page_list <span class="token operator">=</span> get_page_list<span class="token punctuation">(</span>paginator<span class="token punctuation">,</span> page<span class="token punctuation">)</span>    context<span class="token punctuation">[</span><span class="token string">'page_list'</span><span class="token punctuation">]</span> <span class="token operator">=</span> page_list    context<span class="token punctuation">[</span><span class="token string">'c'</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>c    context<span class="token punctuation">[</span><span class="token string">'classification_list'</span><span class="token punctuation">]</span> <span class="token operator">=</span> classification_list    <span class="token keyword">return</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½“æ•°æ®ä¼ é€’ç»™æ¨¡æ¿ä¹‹åï¼Œæ¨¡æ¿å°±è´Ÿè´£æ˜¾ç¤ºå‡ºæ¥å°±è¡Œäº†ã€‚</p><p>å› ä¸ºåˆ†é¡µåŠŸèƒ½æ¯”è¾ƒå¸¸ç”¨ï¼Œæ‰€ä»¥éœ€è¦æŠŠå®ƒå•ç‹¬æ‹¿å‡ºæ¥å°è£…åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬æ–°å»ºtemplates/base/page_nav.htmlæ–‡ä»¶ã€‚ç„¶ååœ¨index.htmlé‡Œé¢æˆ‘ä»¬å°†è¯¥æ–‡ä»¶includeè¿›æ¥ã€‚</p><pre><code>&#123;% include "base/page_nav.html" %&#125;</code></pre><p>æ‰“å¼€page_nav.htmlï¼Œå†™å…¥ä»£ç </p><pre class="line-numbers language-html" data-language="html"><code class="language-html">&#123;% if is_paginated %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video-page<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui circular labels<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        &#123;% if page_obj.has_previous %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui circular label<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?page=&#123;&#123; page_obj.previous_page_number &#125;&#125;&#123;% if c %&#125;&amp;c=&#123;&#123;c&#125;&#125;&#123;% endif %&#125;&#123;% if q %&#125;&amp;q=&#123;&#123;q&#125;&#125;&#123;% endif %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token entity named-entity" title="&lt;">&amp;lt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        &#123;% endif %&#125;        &#123;% for i in page_list %&#125;        &#123;% if page_obj.number == i %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui red circular label<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; i &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        &#123;% else %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui circular label<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?page=&#123;&#123; i &#125;&#125;&#123;% if c %&#125;&amp;c=&#123;&#123;c&#125;&#125;&#123;% endif %&#125;&#123;% if q %&#125;&amp;q=&#123;&#123;q&#125;&#125;&#123;% endif %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; i &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        &#123;% endif %&#125;        &#123;% endfor %&#125;        &#123;% if page_obj.has_next %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui circular label<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?page=&#123;&#123; page_obj.next_page_number &#125;&#125;&#123;% if c %&#125;&amp;c=&#123;&#123;c&#125;&#125;&#123;% endif %&#125;&#123;% if q %&#125;&amp;q=&#123;&#123;q&#125;&#125;&#123;% endif %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token entity named-entity" title="&gt;">&amp;gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        &#123;% endif %&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>&#123;% endif %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬ç”¨åˆ°äº†page_objå¯¹è±¡çš„å‡ ä¸ªå±æ€§ï¼š</p><pre><code>    has_previous    previous_page_number    next_page_number</code></pre><p>é€šè¿‡è¿™å‡ ä¸ªå±æ€§ï¼Œå³å¯å®ç°å¤æ‚çš„é¡µç æ˜¾ç¤ºæ•ˆæœã€‚å…¶ä¸­æˆ‘ä»¬è¿˜è¿™hrefé‡Œé¢åŠ äº†</p><pre><code>&#123;% if c %&#125;&amp;c=&#123;&#123;c&#125;&#125;</code></pre><p>ä»£è¡¨åˆ†ç±»çš„idã€‚<br>##æœç´¢åŠŸèƒ½</p><p>è¦å®ç°æœç´¢ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæœç´¢æ¡†</p><p>å› ä¸ºæœç´¢æ¡†æ˜¯å¾ˆå¤šé¡µé¢éƒ½éœ€è¦çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠä»£ç å†™åˆ°templates/base/header.htmlæ–‡ä»¶é‡Œé¢ã€‚</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui small icon input v-video-search<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>prompt<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123; q &#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æœç´¢è§†é¢‘<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>v-search<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>search<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>search icon<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">cursor</span><span class="token punctuation">:</span>pointer<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç‚¹å‡»æœç´¢æˆ–å›è½¦çš„ä»£ç å†™åœ¨äº†static/js/header.jsé‡Œé¢ã€‚</p><p>æˆ‘ä»¬è¿˜éœ€è¦é…ç½®ä¸€ä¸‹è·¯ç”±ï¼Œæ·»åŠ ä¸€è¡Œæœç´¢çš„è·¯ç”±ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">app_name <span class="token operator">=</span> <span class="token string">'video'</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    path<span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>IndexView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'index'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    path<span class="token punctuation">(</span><span class="token string">'search/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>SearchListView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'search'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœç´¢è·¯ç”±æŒ‡å‘çš„è§†å›¾ç±»ä¸ºSearchListView</p><p>ä¸‹é¢æˆ‘ä»¬æ¥å†™SearchListViewçš„ä»£ç </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">SearchListView</span><span class="token punctuation">(</span>generic<span class="token punctuation">.</span>ListView<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> Video    template_name <span class="token operator">=</span> <span class="token string">'video/search.html'</span>    context_object_name <span class="token operator">=</span> <span class="token string">'video_list'</span>    paginate_by <span class="token operator">=</span> <span class="token number">8</span>    q <span class="token operator">=</span> <span class="token string">''</span>    <span class="token keyword">def</span> <span class="token function">get_queryset</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>q <span class="token operator">=</span> self<span class="token punctuation">.</span>request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"q"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> Video<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>title__contains<span class="token operator">=</span>self<span class="token punctuation">.</span>q<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>status<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">get_context_data</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">,</span> object_list<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        context <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span>SearchListView<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>get_context_data<span class="token punctuation">(</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>        paginator <span class="token operator">=</span> context<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'paginator'</span><span class="token punctuation">)</span>        page <span class="token operator">=</span> context<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'page_obj'</span><span class="token punctuation">)</span>        page_list <span class="token operator">=</span> get_page_list<span class="token punctuation">(</span>paginator<span class="token punctuation">,</span> page<span class="token punctuation">)</span>        context<span class="token punctuation">[</span><span class="token string">'page_list'</span><span class="token punctuation">]</span> <span class="token operator">=</span> page_list        context<span class="token punctuation">[</span><span class="token string">'q'</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>q        <span class="token keyword">return</span> context<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…³é”®ä»£ç å°±æ˜¯Video.objects.filter(title__contains=self.q).filter(status=0)<br>title__containsæ˜¯åŒ…å«çš„æ„æ€ï¼Œè¡¨ç¤ºæŸ¥è¯¢titleåŒ…å«qçš„è®°å½•ã€‚åˆ©ç”¨filterå°†æ•°æ®è¿‡æ»¤å‡ºæ¥ã€‚è¿™é‡Œå†™äº†ä¸¤å±‚è¿‡æ»¤ï¼Œç¬¬ä¸€å±‚è¿‡æ»¤æœç´¢å…³é”®è¯ï¼Œç¬¬äºŒå±‚è¿‡æ»¤statuså·²å‘å¸ƒçš„è§†é¢‘ã€‚</p><p>å¦å¤–ï¼Œè¿™é‡Œä¹Ÿç”¨åˆ°äº†get_context_dataæ¥å­˜æ”¾é¢å¤–çš„æ•°æ®ï¼ŒåŒ…æ‹¬åˆ†é¡µæ•°æ®ã€qå…³é”®è¯ã€‚</p><p>é…ç½®æ¨¡æ¿æ–‡ä»¶æ˜¯templates/video/search.html</p><p>å› æ­¤æ¨¡æ¿ä»£ç å†™åœ¨search.htmlé‡Œé¢</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui unstackable items<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    &#123;% for item in video_list %&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui tiny image<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            &#123;% thumbnail item.cover "300x200" crop="center" as im %&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui image<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123; im.url &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            &#123;% empty %&#125;            &#123;% endthumbnail %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>middle aligned content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>header<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>video:detail<span class="token punctuation">'</span> item.pk %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; item.title &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    &#123;% empty %&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>æš‚æ— æ•°æ®<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>    &#123;% endfor %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>&#123;% include "base/page_nav.html" %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>##å…¶ä»–<br>media åª’ä½“æ–‡ä»¶éœ€è¦æ·»åŠ <br>åœ¨è®¾ç½®ä¸­éœ€è¦æ·»åŠ </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># åª’ä½“æ–‡ä»¶ä¸Šä¼ è·¯å¾„ï¼ŒåŒ…æ‹¬è§†é¢‘å°é¢ï¼Œä¸ªäººå¤´åƒ</span>MEDIA_ROOT <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>BASE_DIR<span class="token punctuation">,</span> <span class="token string">'upload'</span><span class="token punctuation">)</span>MEDIA_URL <span class="token operator">=</span> <span class="token string">'/upload/'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>åŒæ—¶éœ€è¦è®²åª’ä½“æ–‡ä»¶è·¯å¾„åŠ å…¥åˆ°è·¯ç”±è¡¨ä¸­</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>conf <span class="token keyword">import</span> settings<span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls<span class="token punctuation">.</span>static <span class="token keyword">import</span> staticurlpatterns <span class="token operator">+=</span> static<span class="token punctuation">(</span>settings<span class="token punctuation">.</span>MEDIA_URL<span class="token punctuation">,</span> document_root<span class="token operator">=</span>settings<span class="token punctuation">.</span>MEDIA_ROOT<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Djangoè§†é¢‘ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoè§†é¢‘ç½‘ç«™æ­å»º--step5è¯¦æƒ…é¡µé¢å¼€å‘</title>
      <link href="/post/django-shi-pin-wang-zhan-da-jian/step5-xiang-qing-ye-mian-kai-fa/"/>
      <url>/post/django-shi-pin-wang-zhan-da-jian/step5-xiang-qing-ye-mian-kai-fa/</url>
      
        <content type="html"><![CDATA[<p>#è¯¦æƒ…é¡µé¢å¼€å‘<br>åœ¨æœ¬è®²ä¸­ï¼Œæˆ‘ä»¬å¼€å§‹è¯¦æƒ…é¡µåŠŸèƒ½çš„å¼€å‘.</p><p>è¯¦æƒ…é¡µå°±æ˜¯å¯¹å•ä¸ªè§†é¢‘è¿›è¡Œæ’­æ”¾å¹¶å±•ç¤ºè§†é¢‘çš„ç›¸å…³ä¿¡æ¯ï¼Œæ¯”å¦‚è§†é¢‘æ ‡é¢˜ã€æè¿°ã€è¯„è®ºä¿¡æ¯ã€ç›¸å…³æ¨èç­‰ã€‚</p><p>æˆ‘ä»¬å°†ä¼šå­¦ä¹ åˆ°é€šç”¨è§†å›¾ç±»DetailViewçš„ä½¿ç”¨ã€è¯„è®ºåŠ¨æ€åŠ è½½ã€ä»¥åŠå¦‚ä½•é€šè¿‡ajaxå®ç°å–œæ¬¢å’Œæ”¶è—åŠŸèƒ½ï¼Œå¹¶é€šè¿‡ä¸€æ®µæ®µå¾ˆé…·çš„ä»£ç æ¥è¯´æ˜è¿™äº›åŠŸèƒ½ã€‚</p><p>#æ•´ä½“åŠŸèƒ½</p><ul><li>1.è¯¦æƒ…é¡µåŠŸèƒ½ã€‚</li><li>2.å¯¹å•ä¸ªè§†é¢‘è¿›è¡Œå±•ç¤ºï¼ŒåŒ…æ‹¬æ ‡é¢˜ã€æè¿°ã€è§‚çœ‹æ¬¡æ•°</li><li>3.ç‚¹èµå’Œæ”¶è—åŠŸèƒ½ã€‚</li><li>4.è¯„è®ºåŠŸèƒ½ï¼Œé€šè¿‡ä¸Šæ‹‰ç½‘é¡µå³å¯åˆ†é¡µåŠ è½½è¯„è®ºåˆ—è¡¨ï¼Œç”¨æˆ·è¿˜èƒ½æ·»åŠ è¯„è®ºã€‚</li><li>5.ä¾§æ æ¨èè§†é¢‘åˆ—è¡¨ï¼Œæ¨èé€»è¾‘ä¸ºæ¨èè§‚çœ‹æ¬¡æ•°æœ€å¤šçš„è§†é¢‘ã€‚</li><li>6.listé¡µé¢ç‚¹å‡»æŸä¸ªè§†é¢‘æˆ–è€…å…¶æ ‡é¢˜è·³è½¬åˆ°è¯¦æƒ…é¡µã€‚</li></ul><p>æˆ‘ä»¬æŠŠè¯¦æƒ…é¡µåˆ†ä¸º4ä¸ªå°çš„ä¸šåŠ¡æ¨¡å—æ¥å¼€å‘ï¼Œåˆ†åˆ«æ˜¯ï¼šè§†é¢‘è¯¦æƒ…æ˜¾ç¤ºã€å–œæ¬¢å’Œæ”¶è—åŠŸèƒ½ã€è¯„è®ºåŠŸèƒ½ã€æ¨èåŠŸèƒ½ã€‚ä¸‹é¢æˆ‘ä»¬åˆ†åˆ«å¯¹è¿™å››ä¸ªåŠŸèƒ½æ¨¡å—è¿›è¡Œå¼€å‘è®²è§£ã€‚<br>##è§†é¢‘è¯¦æƒ…æ˜¾ç¤º</p><p>ä¸Šä¸€è®²ä¸­ï¼Œæˆ‘ä»¬å·²ç»å»ºç«‹äº†videoæ¨¡å‹ï¼Œæ‰€ä»¥ä¸å¿…å†æ–°å»ºæ¨¡å‹ï¼Œæˆ‘ä»¬å°±åœ¨videoæ¨¡å‹çš„åŸºç¡€ä¸Šè¿›è¡Œæ‰©å±•ã€‚</p><p>ä¸Šä¸€è®²ï¼Œæˆ‘ä»¬åˆ›å»ºçš„å­—æ®µæœ‰</p><pre><code>title       è§†é¢‘æ ‡é¢˜ã€‚æ•°æ®ç±»å‹æ˜¯charFieldï¼Œæœ€å¤§é•¿åº¦ä¸ºmax_length=100ï¼Œå…è®¸ä¸ºç©ºnull=Truedesc        è§†é¢‘æè¿°ã€‚æ•°æ®ç±»å‹æ˜¯charFieldï¼Œæœ€å¤§é•¿åº¦ä¸ºmax_length=255ï¼Œå…è®¸ä¸ºç©ºnull=Truefile        è§†é¢‘æ–‡ä»¶åœ°å€ã€‚æ•°æ®ç±»å‹æ˜¯fileFieldã€‚å…¶ä¸­å­˜çš„æ˜¯è§†é¢‘æ–‡ä»¶çš„åœ°å€ï¼Œåœ¨ä¹‹åçš„è§†é¢‘ç®¡ç†ä¸­æˆ‘ä»¬å°†ä¼šå¯¹è§†é¢‘çš„ä¸Šä¼ è¿›è¡Œå…·ä½“çš„è®²è§£ã€‚cover       è§†é¢‘å°é¢ã€‚æ•°æ®ç±»å‹æ˜¯ImageFieldã€‚å­˜å‚¨ç›®å½•ä¸ºupload_to=â€˜cover/â€™ï¼Œå…è®¸ä¸ºç©ºnull=Truestatus      è§†é¢‘çŠ¶æ€ã€‚æ˜¯ä¸€ä¸ªé€‰æ‹©çŠ¶æ€ï¼Œç”¨choicesè®¾ç½®å¤šé€‰å…ƒç¥–ã€‚created_time åˆ›å»ºæ—¶é—´ã€‚æ•°æ®ç±»å‹æ˜¯DateTimeField ã€‚è®¾ç½®è‡ªåŠ¨ç”Ÿæˆæ—¶é—´auto_now_add=True</code></pre><p>è¿™äº›å­—æ®µç›®å‰æ˜¯ä¸å¤Ÿç”¨çš„ï¼Œæˆ‘ä»¬å†åŠ å‡ ä¸ªå­—æ®µï¼Œéœ€è¦åŠ <strong>è§‚å¯Ÿæ¬¡æ•°ã€å–œæ¬¢çš„ç”¨æˆ·ã€æ”¶è—çš„ç”¨æˆ·</strong>ã€‚</p><p>videoæ¨¡å‹æ‰©å±•åå¦‚ä¸‹</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Video</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    STATUS_CHOICES <span class="token operator">=</span> <span class="token punctuation">(</span>        <span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">,</span> <span class="token string">'å‘å¸ƒä¸­'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'æœªå‘å¸ƒ'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">)</span>    title <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span>blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    desc <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">255</span><span class="token punctuation">,</span>blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    classification <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>Classification<span class="token punctuation">,</span> on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token builtin">file</span> <span class="token operator">=</span> models<span class="token punctuation">.</span>FileField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">255</span><span class="token punctuation">)</span>    cover <span class="token operator">=</span> models<span class="token punctuation">.</span>ImageField<span class="token punctuation">(</span>upload_to<span class="token operator">=</span><span class="token string">'cover/'</span><span class="token punctuation">,</span>blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    status <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">1</span> <span class="token punctuation">,</span>choices<span class="token operator">=</span>STATUS_CHOICES<span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    view_count <span class="token operator">=</span> models<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    liked <span class="token operator">=</span> models<span class="token punctuation">.</span>ManyToManyField<span class="token punctuation">(</span>settings<span class="token punctuation">.</span>AUTH_USER_MODEL<span class="token punctuation">,</span>                                   blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> related_name<span class="token operator">=</span><span class="token string">"liked_videos"</span><span class="token punctuation">)</span>    collected <span class="token operator">=</span> models<span class="token punctuation">.</span>ManyToManyField<span class="token punctuation">(</span>settings<span class="token punctuation">.</span>AUTH_USER_MODEL<span class="token punctuation">,</span>                                   blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> related_name<span class="token operator">=</span><span class="token string">"collected_videos"</span><span class="token punctuation">)</span>    created_time <span class="token operator">=</span> models<span class="token punctuation">.</span>DateTimeField<span class="token punctuation">(</span>auto_now_add<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ–°å¢äº†3ä¸ªå­—æ®µ</p><pre><code>view_count è§‚çœ‹æ¬¡æ•°ã€‚æ•°æ®ç±»å‹æ˜¯IntegerFieldï¼Œé»˜è®¤æ˜¯0liked å–œæ¬¢çš„ç”¨æˆ·ã€‚æ•°æ®ç±»å‹æ˜¯ManyToManyFieldï¼Œè¿™æ˜¯ä¸€ç§å¤šå¯¹å¤šçš„å…³ç³»ï¼Œ                è¡¨ç¤ºä¸€ä¸ªè§†é¢‘å¯ä»¥è¢«å¤šä¸ªç”¨æˆ·å–œæ¬¢ï¼Œä¸€ä¸ªç”¨æˆ·ä¹Ÿå¯ä»¥å–œæ¬¢å¤šä¸ªè§†é¢‘ã€‚                è®°å¾—è®¾ç½®ç”¨æˆ·è¡¨ä¸ºsettings.AUTH_USER_MODELcollected æ”¶è—çš„ç”¨æˆ·ã€‚æ•°æ®ç±»å‹æ˜¯ManyToManyFieldï¼Œè¿™æ˜¯ä¸€ç§å¤šå¯¹å¤šçš„å…³ç³»ï¼Œ                    è¡¨ç¤ºä¸€ä¸ªè§†é¢‘å¯ä»¥è¢«å¤šä¸ªç”¨æˆ·æ”¶è—ï¼Œä¸€ä¸ªç”¨æˆ·ä¹Ÿå¯ä»¥æ”¶è—å¤šä¸ªè§†é¢‘ã€‚                    è®¾ç½®ç”¨æˆ·è¡¨ä¸ºsettings.AUTH_USER_MODELæ›´å¤šå…³äºManyToManyFieldçš„ä½¿ç”¨ä»‹ç»ï¼Œå¯ä»¥æŸ¥è¯¢djangoå®˜ç½‘çš„ä»‹ç»ã€‚</code></pre><p>ä¸‹é¢å°±æ˜¯è¯¦æƒ…å±•ç¤ºé˜¶æ®µï¼Œæˆ‘ä»¬å…ˆé…ç½®å¥½è¯¦æƒ…é¡µçš„è·¯ç”±ä¿¡æ¯ï¼Œåœ¨video/urls.pyä¸­è¿½åŠ detailçš„è·¯ç”±ä¿¡æ¯ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">video<span class="token operator">/</span>urls<span class="token punctuation">.</span>pyapp_name <span class="token operator">=</span> <span class="token string">'video'</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    path<span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>IndexView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'index'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    path<span class="token punctuation">(</span><span class="token string">'search/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>SearchListView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'search'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    path<span class="token punctuation">(</span><span class="token string">'detail/&lt;int:pk>/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>VideoDetailView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'detail'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>path(&#39;detail/&lt;int:pk&gt;/&#39;, views.VideoDetailView.as_view(), name=&#39;detail&#39;)</code></pre><p>å³è¡¨ç¤ºè¯¦æƒ…ä¿¡æ¯ï¼Œæ³¨æ„æ¯æ¡è§†é¢‘éƒ½æ˜¯æœ‰è‡ªå·±çš„ä¸»é”®çš„ï¼Œæ‰€ä»¥è®¾ç½®è·¯å¾„åŒ¹é…ä¸ºdetail/<a href="int:pk">int:pk</a>/,å…¶ä¸­<a href="int:pk">int:pk</a>è¡¨ç¤ºä¸»é”®ï¼Œ</p><p>è¿™æ˜¯djangoä¸­è¡¨ç¤ºä¸»é”®çš„ä¸€ç§æ–¹æ³•ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨æµè§ˆå™¨è¾“å…¥127.0.0.1:8000/video/detail/xxxæ¥è®¿é—®è¯¦æƒ…äº†ã€‚</p><p>å¦‚ä½•æ˜¾ç¤ºè¯¦æƒ…å‘¢ï¼Œdjangoä¸ºæˆ‘ä»¬æä¾›äº†DetailViewã€‚</p><p>urls.pyä¸­è®¾ç½®çš„è§†å›¾ç±»æ˜¯VideoDetailViewï¼Œæˆ‘ä»¬è®©VideoDetailViewç»§æ‰¿DetailViewå³å¯ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">VideoDetailView</span><span class="token punctuation">(</span>generic<span class="token punctuation">.</span>DetailView<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> Video    template_name <span class="token operator">=</span> <span class="token string">'video/detail.html'</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>çœ‹èµ·æ¥è¶…çº§ç®€å•ï¼Œdjangoå°±æ˜¯å¦‚æ­¤çš„é…·ï¼Œåªéœ€è¦æˆ‘ä»¬é…ç½®å‡ è¡Œä»£ç ï¼Œå°±èƒ½å®ç°å¾ˆå¼ºå¤§çš„åŠŸèƒ½ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬é…ç½®modelä¸ºVideoæ¨¡å‹ï¼Œæ¨¡æ¿ä¸ºvideo/detail.htmlï¼Œå…¶å®ƒçš„å·¥ä½œéƒ½ä¸ç”¨ç®¡ï¼Œå…¨éƒ½äº¤ç»™djangoå»å¹²</p><p>æ¨¡æ¿æ–‡ä»¶ä½äºtemplates/video/detail.htmlï¼Œå®ƒçš„ä»£ç æ¯”è¾ƒç®€å•ï¼Œè¿™é‡Œå°±ä¸è´´äº†ã€‚</p><p>##è§‚çœ‹æ¬¡æ•°<br>è§‚çœ‹æ¬¡æ•°çš„å±•ç¤ºï¼Œæœ¬è´¨ä¸Šå°±æ˜¯æ•°æ®åº“é‡Œçš„ä¸€ä¸ªè‡ªå¢å­—æ®µï¼Œæ¯æ¬¡è§‚çœ‹çš„æ—¶å€™ï¼Œview_countè‡ªåŠ¨åŠ 1ã€‚</p><p>å¯¹äºè¿™ä¸ªå°éœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦åšä¸¤ä»¶äº‹æƒ…ï¼Œé¦–å…ˆè¿™videoæ¨¡å‹é‡Œé¢ï¼Œæ·»åŠ ä¸€ä¸ªæ¬¡æ•°è‡ªå¢å‡½æ•°ï¼Œå‘½åä¸ºincrease_view_countï¼Œè¿™å¾ˆç®€å•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">increase_view_count</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>    self<span class="token punctuation">.</span>view_count <span class="token operator">+=</span> <span class="token number">1</span>    self<span class="token punctuation">.</span>save<span class="token punctuation">(</span>update_fields<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'view_count'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ç„¶åï¼Œè¿˜éœ€è¦æˆ‘ä»¬åœ¨VideoDetailViewè§†å›¾ç±»é‡Œé¢è°ƒç”¨åˆ°è¿™ä¸ªå‡½æ•°ã€‚è¿™ä¸ªæ—¶å€™get_object()æ´¾ä¸Šç”¨åœºäº†ã€‚</p><p>å› ä¸ºæ¯æ¬¡è°ƒç”¨DetailViewçš„æ—¶å€™ï¼Œdjangoéƒ½ä¼šå›è°ƒget_object()è¿™ä¸ªå‡½æ•°ã€‚</p><p>å› æ­¤æˆ‘ä»¬å¯ä»¥æŠŠincrease_view_count()æ”¾åˆ°get_object()é‡Œé¢æ‰§è¡Œã€‚å®Œç¾çš„ä»£ç å¦‚ä¸‹</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">VideoDetailView</span><span class="token punctuation">(</span>generic<span class="token punctuation">.</span>DetailView<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> Video    template_name <span class="token operator">=</span> <span class="token string">'video/detail.html'</span>    <span class="token keyword">def</span> <span class="token function">get_object</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> queryset<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        obj <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get_object<span class="token punctuation">(</span><span class="token punctuation">)</span>        obj<span class="token punctuation">.</span>increase_view_count<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># é€šè¿‡è°ƒç”¨Videoä¸­çš„increase_view_count è·å–è§‚çœ‹æ¬¡æ•°</span>        <span class="token keyword">return</span> obj<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>##ç‚¹èµæ”¶è—åŠŸèƒ½<br>ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å°±èƒ½åœ¨è¯¦æƒ…é¡µçœ‹åˆ°æ ‡é¢˜ã€æè¿°ã€è§‚çœ‹æ¬¡æ•°ã€æ”¶è—æ¬¡æ•°ã€å–œæ¬¢æ¬¡æ•°ã€‚</p><p>è™½ç„¶å¯ä»¥æ˜¾ç¤ºæ”¶è—äººæ•°ã€å–œæ¬¢äººæ•°ã€‚ä½†æ˜¯ç›®å‰è¿˜æ²¡å®ç°ç‚¹å‡»å–œæ¬¢/æ”¶è—çš„åŠŸèƒ½ã€‚ä¸‹é¢æˆ‘ä»¬æ¥å®ç°ã€‚</p><p>æ”¶è—å’Œç‚¹èµæ˜¯ä¸€ç»„åŠ¨ä½œï¼Œå› æ­¤å¯ä»¥ç”¨ajaxæ¥å®ç°ï¼šç”¨æˆ·ç‚¹å‡»åè°ƒç”¨åç«¯æ¥å£ï¼Œæ¥å£è¿”å›jsonæ•°æ®ï¼Œå‰ç«¯æ˜¾ç¤ºç»“æœã€‚</p><p>æ—¢ç„¶éœ€è¦æ¥å£ï¼Œé‚£æˆ‘ä»¬å…ˆæ·»åŠ å–œæ¬¢/æ”¶è—æ¥å£çš„è·¯ç”±ï¼Œåœ¨video/urls.pyè¿½åŠ ä»£ç å¦‚ä¸‹</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">path<span class="token punctuation">(</span><span class="token string">'like/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>like<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'like'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>path<span class="token punctuation">(</span><span class="token string">'collect/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>collect<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'collect'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç”±äºä¸¤ä¸ªåŠŸèƒ½å®ç°éå¸¸ç±»ä¼¼ï¼Œé™äºç¯‡å¹…ï¼Œè¿™é‡Œåªè¯´æ˜ä¸€ä¸‹åŠŸèƒ½ã€‚</p><p>æˆ‘ä»¬å…ˆå†™likeå‡½æ•°ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token decorator annotation punctuation">@ajax_required</span><span class="token decorator annotation punctuation">@require_http_methods</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"POST"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">like</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> <span class="token keyword">not</span> request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>is_authenticated<span class="token punctuation">:</span>        <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"msg"</span><span class="token punctuation">:</span> <span class="token string">"è¯·å…ˆç™»å½•"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    video_id <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">[</span><span class="token string">'video_id'</span><span class="token punctuation">]</span>    video <span class="token operator">=</span> Video<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span>pk<span class="token operator">=</span>video_id<span class="token punctuation">)</span>    user <span class="token operator">=</span> request<span class="token punctuation">.</span>user    video<span class="token punctuation">.</span>switch_like<span class="token punctuation">(</span>user<span class="token punctuation">)</span>    <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"likes"</span><span class="token punctuation">:</span> video<span class="token punctuation">.</span>count_likers<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"user_liked"</span><span class="token punctuation">:</span> video<span class="token punctuation">.</span>user_liked<span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é¦–å…ˆåˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•ï¼Œå¦‚æœç™»å½•äº†åˆ™è°ƒç”¨switch_like(user)æ¥å®ç°å–œæ¬¢æˆ–ä¸å–œæ¬¢åŠŸèƒ½ï¼Œæœ€åè¿”å›jsonã€‚</p><p>æ³¨æ„è¿™é‡Œæ·»åŠ äº†ä¸¤ä¸ªæ³¨è§£@ajax_requiredå’Œ@require_http_methods([â€œPOSTâ€])ï¼Œåˆ†åˆ«éªŒè¯requestå¿…é¡»æ˜¯ajaxå’Œpostè¯·æ±‚ã€‚<br>è¿™ä¸¤ä¸ªè£…é¥°å™¨ajax_requiredæ˜¯ç”±è‡ªå·±çš„helperå®ç°çš„ï¼Œç›®çš„æ˜¯åŠ è½½ajax</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">utils<span class="token operator">/</span>video_helpers<span class="token punctuation">.</span>py<span class="token keyword">from</span> django<span class="token punctuation">.</span>http <span class="token keyword">import</span> HttpResponseBadRequest<span class="token keyword">def</span> <span class="token function">ajax_required</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""Not a mixin, but a nice decorator to validate than a request is AJAX"""</span>    <span class="token keyword">def</span> <span class="token function">wrap</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> request<span class="token punctuation">.</span>is_ajax<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> HttpResponseBadRequest<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> f<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>    wrap<span class="token punctuation">.</span>__doc__ <span class="token operator">=</span> f<span class="token punctuation">.</span>__doc__    wrap<span class="token punctuation">.</span>__name__ <span class="token operator">=</span> f<span class="token punctuation">.</span>__name__    <span class="token keyword">return</span> wrap<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>require_http_methodsæ–¹æ³•åˆ™æ˜¯è‡ªå¸¦çš„ï¼Œè¦æ±‚è¯·æ±‚çš„æ–¹å¼æ˜¯POST.</p><p>switch_like()å‡½æ•°åˆ™å†™åœ¨äº†video/model.pyé‡Œé¢</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># ç”¨æˆ·å·²ç»ç‚¹å‡»è¿‡å–œæ¬¢äº†ï¼Œå°±ç§»é™¤ï¼Œæ²¡ç‚¹å‡»å°±æ·»åŠ </span><span class="token keyword">def</span> <span class="token function">switch_like</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> user <span class="token keyword">in</span> self<span class="token punctuation">.</span>liked<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>liked<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>user<span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>liked<span class="token punctuation">.</span>add<span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token comment"># ç»Ÿè®¡å–œæ¬¢äººæ•°</span><span class="token keyword">def</span> <span class="token function">count_likers</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">return</span> self<span class="token punctuation">.</span>liked<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å–œæ¬¢</span><span class="token keyword">def</span> <span class="token function">user_liked</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> user <span class="token keyword">in</span> self<span class="token punctuation">.</span>liked<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token number">0</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰€æœ‰çš„åç«¯å·¥ä½œéƒ½å‡†å¤‡å¥½äº†ï¼Œæˆ‘ä»¬å†æŠŠè§†çº¿è½¬å‘å‰ç«¯ã€‚å‰ç«¯ä¸»è¦æ˜¯å†™ajaxä»£ç ã€‚</p><p>ç”±äºajaxä»£ç é‡è¾ƒå¤§ï¼Œæˆ‘ä»¬å°è£…åˆ°ä¸€ä¸ªå•ç‹¬çš„jsæ–‡ä»¶ä¸­ ==&gt; static/js/detail.js</p><p>åœ¨detail.jsä¸­ï¼Œæˆ‘ä»¬å…ˆå®ç°ç‚¹èµçš„ajaxè°ƒç”¨ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">static</span><span class="token operator">/</span>js<span class="token operator">/</span>detail<span class="token punctuation">.</span>js<span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// å†™å…¥csrf</span>    $<span class="token punctuation">.</span><span class="token function">getScript</span><span class="token punctuation">(</span><span class="token string">"/static/js/csrftoken.js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å–œæ¬¢</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#like"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      <span class="token keyword">var</span> video_id <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#like"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"video-id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>            url<span class="token operator">:</span> <span class="token string">'/video/like/'</span><span class="token punctuation">,</span>            data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>                video_id<span class="token operator">:</span> video_id<span class="token punctuation">,</span>                <span class="token string">'csrf_token'</span><span class="token operator">:</span> csrftoken            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            type<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>            dataType<span class="token operator">:</span> <span class="token string">'json'</span><span class="token punctuation">,</span>            <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">var</span> code <span class="token operator">=</span> data<span class="token punctuation">.</span>code                <span class="token keyword">if</span><span class="token punctuation">(</span>code <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    <span class="token keyword">var</span> likes <span class="token operator">=</span> data<span class="token punctuation">.</span>likes                    <span class="token keyword">var</span> user_liked <span class="token operator">=</span> data<span class="token punctuation">.</span>user_liked                    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#like-count'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>likes<span class="token punctuation">)</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>user_liked <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#like'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"grey"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"red"</span><span class="token punctuation">)</span>                    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>                        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#like'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"red"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"grey"</span><span class="token punctuation">)</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>                    <span class="token keyword">var</span> msg <span class="token operator">=</span> data<span class="token punctuation">.</span>msg                    <span class="token function">alert</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>              <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"ç‚¹èµå¤±è´¥"</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šè¿°ä»£ç ä¸­ï¼Œå…³é”®ä»£ç æ˜¯$.ajax()å‡½æ•°ï¼Œæˆ‘ä»¬ä¼ å…¥äº†å‚æ•°ï¼švideo_idå’Œcsrftokenã€‚</p><p>å…¶ä¸­csrftokenå¯é€šè¿‡/static/js/csrftoken.jsç”Ÿæˆã€‚</p><p>åœ¨successå›è°ƒä¸­ï¼Œé€šè¿‡åˆ¤æ–­user_likedçš„å€¼æ¥ç¡®å®šè‡ªå·±æ˜¯å¦å–œæ¬¢è¿‡ï¼Œç„¶åæ”¹å˜æ¨¡æ¿ä¸­ç›¸åº”çš„cssã€‚</p><p>##æ¨èåŠŸèƒ½</p><p>æ¯ä¸ªç½‘ç«™éƒ½æœ‰è‡ªå·±çš„æ¨èåŠŸèƒ½ï¼Œä¸”éƒ½æœ‰è‡ªå·±çš„æ¨èé€»è¾‘ã€‚è¿™é‡Œçš„æ¨èé€»è¾‘æ˜¯æ ¹æ®è®¿é—®æ¬¡æ•°æœ€é«˜çš„nä¸ªè§†é¢‘æ¥é™åºæ’åºï¼Œç„¶åæ¨èç»™ç”¨æˆ·çš„ã€‚</p><p>å®ç°èµ·æ¥éå¸¸å®¹æ˜“ï¼Œæˆ‘ä»¬çŸ¥é“è¯¦æƒ…é¡µå®ç°ç”¨çš„æ˜¯VideoDetailViewï¼Œæˆ‘ä»¬å¯ä»¥åœ¨get_context_data()ä¸­æŠŠæ¨èå†…å®¹ä¼ é€’ç»™å‰ç«¯æ¨¡æ¿ã€‚</p><p>åªéœ€è¦æˆ‘ä»¬æ”¹å†™VideoDetailViewçš„get_context_date()å‡½æ•°ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">get_context_data</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>    context <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span>VideoDetailView<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>get_context_data<span class="token punctuation">(</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>    recommend_list <span class="token operator">=</span> Video<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get_recommend_list<span class="token punctuation">(</span><span class="token punctuation">)</span>    context<span class="token punctuation">[</span><span class="token string">'recommend_list'</span><span class="token punctuation">]</span> <span class="token operator">=</span> recommend_list    <span class="token keyword">return</span> context<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ”¹å†™åï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€è¡Œ</p><pre><code>recommend_list = Video.objects.get_recommend_list()</code></pre><p>æˆ‘ä»¬æŠŠè·å–æ¨èåˆ—è¡¨çš„å‡½æ•°get_recommend_list()å°è£…åˆ°äº†Videoæ¨¡å‹é‡Œé¢ã€‚<br>åœ¨Video/models.pyé‡Œé¢,æˆ‘ä»¬è¿½åŠ ä»£ç :</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">VideoQuerySet</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>query<span class="token punctuation">.</span>QuerySet<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">get_recommend_list</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>status<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">'-view_count'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å…³é”®æ˜¯self.filter(status=0).order_by(â€˜-view_countâ€™)[:4]ï¼Œé€šè¿‡order_byæŠŠview_counté™åºæ’åºï¼Œå¹¶é€‰å–å‰4æ¡æ•°æ®ã€‚</p><p>æ³¨æ„æ­¤å¤„æˆ‘ä»¬ç”¨äº†VideoQuerySetæŸ¥è¯¢å™¨ï¼Œéœ€è¦æˆ‘ä»¬åœ¨Videoä¸‹é¢æ·»åŠ ä¸€è¡Œä¾èµ–ã€‚è¡¨ç¤ºç”¨VideoQuerySetä½œä¸ºVideoçš„æŸ¥è¯¢ç®¡ç†å™¨ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">objects <span class="token operator">=</span> VideoQuerySet<span class="token punctuation">.</span>as_manager<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å½“æ¨¡æ¿æ‹¿åˆ°æ•°æ®åï¼Œå³å¯æ¸²æŸ“æ˜¾ç¤ºã€‚è¿™é‡Œæˆ‘ä»¬å°†æ¨èä¾§æ çš„ä»£ç å°è£…åˆ°templates/video/recommend.htmlé‡Œé¢ã€‚</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"># templates/video/recommend.html&#123;% load thumbnail %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video-side-title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ¨èåˆ—è¡¨<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui unstackable divided items<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    &#123;% for item in recommend_list %&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui tiny image<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            &#123;% thumbnail item.cover "300x200" crop="center" as im %&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui image<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123; im.url &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            &#123;% empty %&#125;            &#123;% endthumbnail %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>middle aligned content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span> header-title<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>video:detail<span class="token punctuation">'</span> item.pk %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; item.title &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>meta<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>description<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; item.view_count &#125;&#125;æ¬¡è§‚çœ‹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    &#123;% empty %&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>æš‚æ— æ¨è<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>    &#123;% endfor %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¹¶åœ¨detail.htmlä¸­å°†å®ƒåŒ…å«è¿›æ¥</p><pre><code>&#123;% include "video/recommend.html" %&#125;</code></pre><p>##è¯„è®ºåŠŸèƒ½</p><p>è¯„è®ºåŒºä½äºè¯¦æƒ…é¡µä¸‹ä¾§ï¼Œæ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ã€‚å…±åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šè¯„è®ºformå’Œè¯„è®ºåˆ—è¡¨ã€‚</p><p>è¯„è®ºåŠŸèƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—ï¼Œè¯¥åŠŸèƒ½é€šç”¨æ€§è¾ƒé«˜ï¼Œåœ¨å…¶ä»–å¾ˆå¤šç½‘ç«™ä¸­éƒ½æœ‰è¯„è®ºåŠŸèƒ½ï¼Œ</p><p>ä¸ºäº†é¿å…ä»¥åå¼€å‘å…¶ä»–ç½‘ç«™æ—¶é‡å¤é€ è½®å­ï¼Œæˆ‘ä»¬å»ºç«‹ä¸€ä¸ªæ–°çš„åº”ç”¨ï¼Œå‘½åä¸ºcomment</p><pre class="line-numbers language-shell" data-language="shell"><div class="caption"><span>script</span></div><code class="language-shell">python3 manage.py startapp comment<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºcommentæ¨¡å‹</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># ä½äºcomment/models.py</span><span class="token keyword">class</span> <span class="token class-name">Comment</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    user <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>settings<span class="token punctuation">.</span>AUTH_USER_MODEL<span class="token punctuation">,</span> on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">)</span>    nickname <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span>blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    avatar <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span>blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    video <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>Video<span class="token punctuation">,</span> on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">)</span>    content <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>    timestamp <span class="token operator">=</span> models<span class="token punctuation">.</span>DateTimeField<span class="token punctuation">(</span>auto_now_add<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>     <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        db_table <span class="token operator">=</span> <span class="token string">"v_comment"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>user ç”¨æˆ·ã€‚æ•°æ®ç±»å‹æ˜¯ForeignKeyï¼Œå¤–é”®æ˜¯settings.AUTH_USER_MODELï¼Œå¹¶è®¾ç½®ä¸ºçº§è”åˆ é™¤on_delete=models.CASCADEnickname ç”¨æˆ·æ˜µç§°ã€‚æ•°æ®ç±»å‹æ˜¯CharFieldã€‚avatar å¤´åƒã€‚æ•°æ®ç±»å‹æ˜¯CharFieldã€‚video å¯¹åº”çš„è§†é¢‘ã€‚æ•°æ®ç±»å‹æ˜¯ForeignKeyï¼Œå¯¹åº”Videoæ¨¡å‹ï¼Œçº§è”åˆ é™¤ on_delete=models.CASCADEcontent è¯„è®ºå†…å®¹ã€‚ æ•°æ®ç±»å‹æ˜¯CharFieldã€‚timestamp è¯„è®ºæ—¶é—´ã€‚ æ•°æ®ç±»å‹æ˜¯DateTimeFieldã€‚</code></pre><p>æœ‰äº†æ¨¡å‹ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸“å¿ƒå†™ä¸šåŠ¡ä»£ç äº†ï¼Œé¦–å…ˆåœ¨commentä¸‹å»ºç«‹è·¯ç”±æ–‡ä»¶urls.pyã€‚å¹¶å†™å…¥ä»£ç :</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> viewsapp_name <span class="token operator">=</span> <span class="token string">'comment'</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    path<span class="token punctuation">(</span><span class="token string">'submit_comment/&lt;int:pk>'</span><span class="token punctuation">,</span>views<span class="token punctuation">.</span>submit_comment<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'submit_comment'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    path<span class="token punctuation">(</span><span class="token string">'get_comments/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>get_comments<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'get_comments'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬é…ç½®äº†ä¸¤æ¡è·¯ç”±ä¿¡æ¯ï¼šè¯„è®ºæäº¤ å’Œ è·å–è¯„è®ºã€‚</p><p>æäº¤è¯„è®ºï¼Œéœ€è¦ä¸€ä¸ªformï¼Œæˆ‘ä»¬æŠŠformæ”¾åˆ°video/forms.py</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> django <span class="token keyword">import</span> forms<span class="token keyword">from</span> comment<span class="token punctuation">.</span>models <span class="token keyword">import</span> Comment<span class="token keyword">class</span> <span class="token class-name">CommentForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>    content <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>error_messages<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'required'</span><span class="token punctuation">:</span> <span class="token string">'ä¸èƒ½ä¸ºç©º'</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>Textarea<span class="token punctuation">(</span>attrs <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">'placeholder'</span><span class="token punctuation">:</span> <span class="token string">'è¯·è¾“å…¥è¯„è®ºå†…å®¹'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">)</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        model <span class="token operator">=</span> Comment        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'content'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶ååœ¨video/views.pyçš„VideoDetailViewä¸‹æ·»åŠ formçš„ç›¸å…³ä»£ç ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">VideoDetailView</span><span class="token punctuation">(</span>generic<span class="token punctuation">.</span>DetailView<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> Video    template_name <span class="token operator">=</span> <span class="token string">'video/detail.html'</span>    <span class="token keyword">def</span> <span class="token function">get_object</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> queryset<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        obj <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get_object<span class="token punctuation">(</span><span class="token punctuation">)</span>        obj<span class="token punctuation">.</span>increase_view_count<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> obj    <span class="token keyword">def</span> <span class="token function">get_context_data</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        context <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span>VideoDetailView<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>get_context_data<span class="token punctuation">(</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>        form <span class="token operator">=</span> CommentForm<span class="token punctuation">(</span><span class="token punctuation">)</span>         context<span class="token punctuation">[</span><span class="token string">'form'</span><span class="token punctuation">]</span> <span class="token operator">=</span> form         <span class="token keyword">return</span> context<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨get_context_data()å‡½æ•°é‡Œé¢ï¼Œæˆ‘ä»¬æŠŠformä¼ é€’ç»™æ¨¡æ¿ã€‚</p><p>åŒæ ·çš„ï¼Œæäº¤è¯„è®ºä¹Ÿæ˜¯å¼‚æ­¥çš„ï¼Œæˆ‘ä»¬ç”¨ajaxå®ç°ï¼Œæˆ‘ä»¬æ‰“å¼€static/js/detail.jsï¼Œå†™å…¥</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// æäº¤è¯„è®º</span><span class="token keyword">var</span> frm <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#comment_form'</span><span class="token punctuation">)</span>frm<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        type<span class="token operator">:</span> frm<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'method'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        url<span class="token operator">:</span> frm<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'action'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        dataType<span class="token operator">:</span><span class="token string">'json'</span><span class="token punctuation">,</span>        data<span class="token operator">:</span> frm<span class="token punctuation">.</span><span class="token function">serialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> code <span class="token operator">=</span> data<span class="token punctuation">.</span>code            <span class="token keyword">var</span> msg <span class="token operator">=</span> data<span class="token punctuation">.</span>msg            <span class="token keyword">if</span><span class="token punctuation">(</span>code <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#id_content'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.comment-list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prepend</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#comment-result'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">"è¯„è®ºæˆåŠŸ"</span><span class="token punctuation">)</span>                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.info'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeOut</span><span class="token punctuation">(</span><span class="token number">800</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#comment-result'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.info'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeOut</span><span class="token punctuation">(</span><span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¯„è®ºé€šè¿‡ajaxæäº¤åï¼Œæˆ‘ä»¬åœ¨submit_comment()ä¸­å°±èƒ½æ¥æ”¶åˆ°è¿™ä¸ªè¯·æ±‚ã€‚å¤„ç†å¦‚ä¸‹</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">submit_comment</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>pk<span class="token punctuation">)</span><span class="token punctuation">:</span>    video <span class="token operator">=</span> get_object_or_404<span class="token punctuation">(</span>Video<span class="token punctuation">,</span> pk <span class="token operator">=</span> pk<span class="token punctuation">)</span>    form <span class="token operator">=</span> CommentForm<span class="token punctuation">(</span>data<span class="token operator">=</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">)</span>    <span class="token keyword">if</span> form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        new_comment <span class="token operator">=</span> form<span class="token punctuation">.</span>save<span class="token punctuation">(</span>commit<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>        new_comment<span class="token punctuation">.</span>user <span class="token operator">=</span> request<span class="token punctuation">.</span>user        new_comment<span class="token punctuation">.</span>nickname <span class="token operator">=</span> request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>nickname        new_comment<span class="token punctuation">.</span>avatar <span class="token operator">=</span> request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>avatar        new_comment<span class="token punctuation">.</span>video <span class="token operator">=</span> video        new_comment<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>        data <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        data<span class="token punctuation">[</span><span class="token string">'nickname'</span><span class="token punctuation">]</span> <span class="token operator">=</span> request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>nickname        data<span class="token punctuation">[</span><span class="token string">'avatar'</span><span class="token punctuation">]</span> <span class="token operator">=</span> request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>avatar        data<span class="token punctuation">[</span><span class="token string">'timestamp'</span><span class="token punctuation">]</span> <span class="token operator">=</span> datetime<span class="token punctuation">.</span>fromtimestamp<span class="token punctuation">(</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>timestamp<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        data<span class="token punctuation">[</span><span class="token string">'content'</span><span class="token punctuation">]</span> <span class="token operator">=</span> new_comment<span class="token punctuation">.</span>content        comments <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        comments<span class="token punctuation">.</span>append<span class="token punctuation">(</span>data<span class="token punctuation">)</span>        html <span class="token operator">=</span> render_to_string<span class="token punctuation">(</span>            <span class="token string">"comment/comment_single.html"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">"comments"</span><span class="token punctuation">:</span> comments<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"code"</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"html"</span><span class="token punctuation">:</span> html<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"code"</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'msg'</span><span class="token punctuation">:</span><span class="token string">'è¯„è®ºå¤±è´¥!'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨æ¥æ”¶å‡½æ•°ä¸­ï¼Œé€šè¿‡formè‡ªå¸¦çš„éªŒè¯å‡½æ•°æ¥ä¿å­˜è®°å½•ï¼Œç„¶åå°†è¿™æ¡è®°å½•è¿”å›åˆ°å‰ç«¯æ¨¡æ¿ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å¼€å§‹è¯„è®ºåˆ—è¡¨çš„å¼€å‘ã€‚</p><p>è¯„è®ºåˆ—è¡¨éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†çš„æ˜¯ä¸Šæ‹‰åŠ¨æ€åŠ è½½çš„æ–¹æ¡ˆï¼Œå³å½“é¡µé¢æ‹‰åˆ°æœ€ä¸‹ä¾§æ—¶ï¼ŒjsåŠ è½½ä»£ç ä¼šè‡ªåŠ¨çš„è·å–ä¸‹ä¸€é¡µçš„æ•°æ®å¹¶æ˜¾ç¤ºå‡ºæ¥ã€‚</p><p>å‰ç«¯éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ç§åŸºäºjsçš„å¼€æºåŠ è½½æ’ä»¶ã€‚åŸºäºè¿™ä¸ªæ’ä»¶ï¼Œå¯ä»¥å¾ˆå®¹æ˜“å®ç°ç½‘é¡µçš„ä¸Šæ‹‰åŠ¨æ€åŠ è½½æ•ˆæœã€‚</p><p>å®ƒä½¿ç”¨è¶…çº§ç®€å•ï¼Œä»…éœ€è¦è°ƒç”¨$(â€™.commentsâ€™).dropload({})å³å¯ã€‚æˆ‘ä»¬æŠŠè°ƒç”¨çš„ä»£ç å°è£…åœ¨static/js/load_comments.jsé‡Œé¢ã€‚</p><p>å®Œæ•´çš„è°ƒç”¨ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-none"><code class="language-none">$(function()&#123;    &#x2F;&#x2F; é¡µæ•°    var page &#x3D; 0;    &#x2F;&#x2F; æ¯é¡µå±•ç¤º15ä¸ª    var page_size &#x3D; 15;    &#x2F;&#x2F; dropload    $(&#39;.comments&#39;).dropload(&#123;        scrollArea : window,        loadDownFn : function(me)&#123;            page++;            $.ajax(&#123;                type: &#39;GET&#39;,                url: comments_url,                data:&#123;                     video_id: video_id,                     page: page,                     page_size: page_size                &#125;,                dataType: &#39;json&#39;,                success: function(data)&#123;                    var code &#x3D; data.code                    var count &#x3D; data.comment_count                    if(code &#x3D;&#x3D; 0)&#123;                        $(&#39;#id_comment_label&#39;).text(count + &quot;æ¡è¯„è®º&quot;);                        $(&#39;.comment-list&#39;).append(data.html);                        me.resetload();                    &#125;else&#123;                        me.lock();                        me.noData();                        me.resetload();                    &#125;                &#125;,                error: function(xhr, type)&#123;                    me.resetload();                &#125;            &#125;);        &#125;    &#125;);&#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸ç”¨è¿‡å¤šçš„è§£é‡Šï¼Œè¿™æ®µä»£ç å·²ç»éå¸¸éå¸¸æ¸…æ™°äº†ï¼Œæœ¬è´¨è¿˜æ˜¯ajaxçš„æ¥å£è¯·æ±‚è°ƒç”¨ï¼Œè°ƒç”¨åè¿”å›ç»“æœæ›´æ–°å‰ç«¯ç½‘é¡µå†…å®¹ã€‚</p><p>æˆ‘ä»¬çœ‹åˆ°ajaxè°ƒç”¨çš„æ¥å£æ˜¯get_commentsï¼Œæˆ‘ä»¬ç»§ç»­æ¥å®ç°å®ƒï¼Œå®ƒä½äºcomment/views.pyä¸­ã€‚<br>ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼Œå½“è·å–åˆ°pageå’Œpage_sizeåï¼Œä½¿ç”¨paginatorå¯¹è±¡æ¥å®ç°åˆ†é¡µã€‚æœ€åé€šè¿‡render_to_stringå°†htmlä¼ é€’ç»™æ¨¡æ¿ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">comment<span class="token operator">/</span>view<span class="token punctuation">.</span>py<span class="token keyword">def</span> <span class="token function">get_comments</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> <span class="token keyword">not</span> request<span class="token punctuation">.</span>is_ajax<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> HttpResponseBadRequest<span class="token punctuation">(</span><span class="token punctuation">)</span>    page <span class="token operator">=</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'page'</span><span class="token punctuation">)</span>    page_size <span class="token operator">=</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'page_size'</span><span class="token punctuation">)</span>    video_id <span class="token operator">=</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'video_id'</span><span class="token punctuation">)</span>    video <span class="token operator">=</span> get_object_or_404<span class="token punctuation">(</span>Video<span class="token punctuation">,</span> pk<span class="token operator">=</span>video_id<span class="token punctuation">)</span>    comments <span class="token operator">=</span> video<span class="token punctuation">.</span>comment_set<span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">'-timestamp'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    comment_count <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>comments<span class="token punctuation">)</span>    paginator <span class="token operator">=</span> Paginator<span class="token punctuation">(</span>comments<span class="token punctuation">,</span> page_size<span class="token punctuation">)</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        rows <span class="token operator">=</span> paginator<span class="token punctuation">.</span>page<span class="token punctuation">(</span>page<span class="token punctuation">)</span>    <span class="token keyword">except</span> PageNotAnInteger<span class="token punctuation">:</span>        rows <span class="token operator">=</span> paginator<span class="token punctuation">.</span>page<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">except</span> EmptyPage<span class="token punctuation">:</span>        rows <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>rows<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">:</span>        code <span class="token operator">=</span> <span class="token number">0</span>        html <span class="token operator">=</span> render_to_string<span class="token punctuation">(</span>            <span class="token string">"comment/comment_single.html"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">"comments"</span><span class="token punctuation">:</span> rows<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        code <span class="token operator">=</span> <span class="token number">1</span>        html <span class="token operator">=</span> <span class="token string">""</span>    <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token string">"code"</span><span class="token punctuation">:</span>code<span class="token punctuation">,</span>        <span class="token string">"html"</span><span class="token punctuation">:</span> html<span class="token punctuation">,</span>        <span class="token string">"comment_count"</span><span class="token punctuation">:</span> comment_count    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>##åˆ—è¡¨é¡µé¢è·³è½¬<br>åœ¨é¦–é¡µé‡Œé¢å·²ç»åŠ è½½äº†è§†é¢‘å†…å®¹ï¼Œç°åœ¨è¿˜æ²¡æœ‰ç‚¹å‡»æŒ‘æˆ˜åˆ°è¯¦æƒ…é¡µï¼Œç°åœ¨åŠ ä¸Š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui card<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>video:detail<span class="token punctuation">'</span> item.pk %&#125;<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>               &#123;% thumbnail item.cover "300x200" crp="center" as im %&#125;               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui image<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123; im.url &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>               &#123;% empty %&#125;               &#123;% endthumbnail %&#125;               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>large play icon v-play-icon<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>header<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>video:detail<span class="token punctuation">'</span> item.pk %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; item.title &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>meta<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>date<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å‘å¸ƒäº&#123;&#123; item.created_time|time_since&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>description<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                   &#123;&#123; item.view_count&#125;&#125;æ¬¡è§‚çœ‹               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å’Œrecommendé¡µé¢ä¸€æ ·ï¼Œé€šè¿‡ video:detail æ–¹æ³•ç»„åˆè°ƒç”¨detailæ–¹æ³•ï¼Œè®¿é—®åˆ°è¯¦æƒ…é¡µé¢</p>]]></content>
      
      
      <categories>
          
          <category> Djangoè§†é¢‘ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoè§†é¢‘ç½‘ç«™æ­å»º--step06ä¸ªäººä¸­å¿ƒåŠŸèƒ½</title>
      <link href="/post/django-shi-pin-wang-zhan-da-jian/step06-ge-ren-zhong-xin-gong-neng/"/>
      <url>/post/django-shi-pin-wang-zhan-da-jian/step06-ge-ren-zhong-xin-gong-neng/</url>
      
        <content type="html"><![CDATA[<p>#ä¸ªäººä¸­å¿ƒåŠŸèƒ½<br>ä»æœ¬è®²èµ·ï¼Œæˆ‘ä»¬å¼€å§‹ä¸ªäººä¸­å¿ƒåŠŸèƒ½çš„å¼€å‘ã€‚ä¸ªäººä¸­å¿ƒé‡Œé¢åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†</p><ul><li>ä¸ªäººèµ„æ–™</li><li>ä¿®æ”¹å¯†ç </li><li>è®¢é˜…è®¾ç½®</li><li>æ„è§åé¦ˆ</li></ul><p>é€šè¿‡è¿™éƒ¨åˆ†çš„å¼€å‘ï¼Œæˆ‘ä»¬å°†ä¼šæ¥è§¦åˆ°æ›´å¤šdjangoçš„ç”¨æ³•ã€‚</p><p>##æ•´ä½“åŠŸèƒ½</p><p>ä¸ªäººä¸­å¿ƒæ¨¡å—æ˜¯å¯¹ç”¨æˆ·çš„ä¿¡æ¯è¿›è¡Œå±•ç¤ºå¹¶å¯ä»¥ç¼–è¾‘ã€‚</p><p>å…¶ä¸­ä¸ªäººèµ„æ–™ã€ä¿®æ”¹å¯†ç ã€è®¢é˜…è®¾ç½®æ˜¯å¯¹ç”¨æˆ·ä¿¡æ¯çš„ç¼–è¾‘ï¼Œåé¦ˆå»ºè®®æ˜¯å±äºåˆ›å»ºæ–°æ•°æ®ã€‚<br>##ä¸ªäººèµ„æ–™</p><p>è¿™é‡Œä¸»è¦æ˜¯å¯¹ä¸ªäººèµ„æ–™è¿›è¡Œç¼–è¾‘ï¼Œå…ˆæ˜¾ç¤ºç”¨æˆ·åŸæœ‰çš„ä¿¡æ¯ï¼Œ</p><p>ç„¶åç”¨æˆ·å³å¯å¯¹å…¶è¿›è¡Œä¿®æ”¹å¹¶ä¿å­˜ï¼Œå¯¹äºç¼–è¾‘åŠŸèƒ½ï¼Œdjangoæœ‰è‡ªå·±çš„è§£å†³æ–¹æ¡ˆï¼Œ</p><p>å³é€šè¿‡é€šç”¨è§†å›¾ç±»UpdateViewå¯¹æ¨¡å‹è¿›è¡Œæ›´æ”¹ã€‚å…³äºUpdateçš„ä»‹ç»ï¼ŒåŒå­¦ä»¬å¯æŸ¥é˜…å®˜ç½‘ä»‹ç»</p><p>å› ä¸ºå‰é¢å·²ç»å»ºç«‹è¿‡useræ¨¡å‹ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸ç”¨å†æ¬¡å»ºç«‹äº†ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ä¹‹å‰çš„useræ¨¡å‹å³å¯ã€‚<br>###å»ºç«‹form<br>é¦–å…ˆéœ€è¦æ–°å»ºä¸€å¼ formæ¥å­˜æ”¾ä¸ªäººä¿¡æ¯ï¼Œå®ƒå’Œuserprofileä¸­çš„User modelå·®ä¸å¤šï¼Œä½†è¿™é‡Œæ—¶ä¸€ä¸ªform</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#userprofile/forms.py</span><span class="token keyword">from</span> django <span class="token keyword">import</span> forms<span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> User<span class="token comment"># å¤´åƒå¤§å°ï¼Œè¿™é‡Œåªæ˜¯é™åˆ¶å›¾ç‰‡å¤§å°ï¼Œåé¢å¯ä»¥ç›´æ¥ä¿®æ”¹å…¶å¤§å°</span><span class="token keyword">def</span> <span class="token function">avatar_file_size</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">:</span>    limit <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span>    <span class="token keyword">if</span> value<span class="token punctuation">.</span>size <span class="token operator">></span> limit<span class="token punctuation">:</span>        <span class="token keyword">raise</span> ValidationError<span class="token punctuation">(</span><span class="token string">'å¤´åƒæ–‡ä»¶å¤ªå¤§äº†ï¼Œè¯·é™åˆ¶åœ¨2Mä¹‹å†…'</span><span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">ProfileForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>    nickname <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>min_length<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>                               max_length<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span>                               required<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>                               error_messages<span class="token operator">=</span><span class="token punctuation">&#123;</span>                                   <span class="token string">'min_length'</span><span class="token punctuation">:</span> <span class="token string">'æ˜µç§°è‡³å°‘4ä¸ªå­—ç¬¦'</span><span class="token punctuation">,</span>                                   <span class="token string">'min_length'</span><span class="token punctuation">:</span> <span class="token string">'æ˜µç§°ä¸èƒ½å¤šäº20ä¸ªå­—ç¬¦'</span><span class="token punctuation">,</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                               widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>TextInput<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    avatar <span class="token operator">=</span> forms<span class="token punctuation">.</span>ImageField<span class="token punctuation">(</span>required<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>avatar_file_size<span class="token punctuation">]</span><span class="token punctuation">,</span>                              widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>FileInput<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'n'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    email <span class="token operator">=</span> forms<span class="token punctuation">.</span>EmailField<span class="token punctuation">(</span>required<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>                             error_messages<span class="token operator">=</span><span class="token punctuation">&#123;</span>                                 <span class="token string">'invalid'</span><span class="token punctuation">:</span> <span class="token string">'è¯·è¾“å…¥æœ‰æ•ˆçš„Emailåœ°å€'</span><span class="token punctuation">,</span>                             <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                             widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>EmailInput<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    gender <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>min_length<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>max_length<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>required<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>                             widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>HiddenInput<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    mobile <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>min_length<span class="token operator">=</span><span class="token number">11</span><span class="token punctuation">,</span>max_length<span class="token operator">=</span><span class="token number">11</span><span class="token punctuation">,</span>required<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>                             error_messages<span class="token operator">=</span><span class="token punctuation">&#123;</span>                                 <span class="token string">'min_length'</span><span class="token punctuation">:</span> <span class="token string">'è¯·è¾“å…¥11ä½æ‰‹æœºå·'</span><span class="token punctuation">,</span>                                 <span class="token string">'max_length'</span><span class="token punctuation">:</span> <span class="token string">'è¯·è¾“å…¥11ä½æ‰‹æœºå·'</span><span class="token punctuation">,</span>                             <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                             widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>NumberInput<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        model <span class="token operator">=</span> User        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'nickname'</span><span class="token punctuation">,</span> <span class="token string">'avatar'</span><span class="token punctuation">,</span> <span class="token string">'email'</span><span class="token punctuation">,</span> <span class="token string">'gender'</span><span class="token punctuation">,</span> <span class="token string">'mobile'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œå¯¹å¤´åƒå›¾ç‰‡åšäº†ä¸€ä¸ªé™åˆ¶,ä¸»è¦æ—¶é™åˆ¶å…¶å°ºå¯¸ï¼Œç›®å‰å…ˆè¿™æ ·é™åˆ¶ï¼Œåé¢æœ‰æ—¶é—´ä¼šæŠŠè¿™é‡Œä¿®æ”¹ä¸€ä¸‹ï¼Œç›´æ¥æŠŠä¸Šä¼ çš„å›¾ç‰‡è¿›è¡Œç¼©æ”¾æˆ–è€…æ”¾å¤§ï¼Œå¼„æˆç»Ÿä¸€å°ºå¯¸</p><p>å…¶ä»–å„ä¸ªå­—æ®µä¹Ÿæœ‰å¯¹åº”çš„é™åˆ¶è§„åˆ™</p><p>##æ›´æ–°è·¯ç”±è¡¨</p><p>å…¶æ¬¡æˆ‘ä»¬åšçš„å°±æ˜¯åœ¨users/urls.pyä¸­æ·»åŠ ä¸ªäººèµ„æ–™çš„è·¯ç”±ï¼Œ</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># users/urls.py</span>path<span class="token punctuation">(</span><span class="token string">'profile/&lt;int:pk>/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>ProfileView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'profile'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦ä¼ ä¸€ä¸ªintå‚æ•°åšä¸ºä¸»é”®ï¼Œå¹¶ä¼ é€’ç»™è§†å›¾ç±»ProfileViewã€‚<br>###æ›´æ–°è§†å›¾<br>ä¸‹é¢æˆ‘ä»¬è½¬å‘ProfileViewï¼Œå®ƒçš„å†™æ³•è¶…çº§ç®€å•</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>mixins <span class="token keyword">import</span> LoginRequiredMixin<span class="token keyword">from</span> utils<span class="token punctuation">.</span>video_helpers <span class="token keyword">import</span> AuthorRequiredMixin<span class="token keyword">from</span> django<span class="token punctuation">.</span>views <span class="token keyword">import</span> generic<span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> messages<span class="token keyword">class</span> <span class="token class-name">ProfileView</span><span class="token punctuation">(</span>LoginRequiredMixin<span class="token punctuation">,</span>AuthorRequiredMixin<span class="token punctuation">,</span> generic<span class="token punctuation">.</span>UpdateView<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> User    form_class <span class="token operator">=</span> ProfileForm    template_name <span class="token operator">=</span> <span class="token string">'users/profile.html'</span>    <span class="token keyword">def</span> <span class="token function">get_success_url</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        messages<span class="token punctuation">.</span>success<span class="token punctuation">(</span>self<span class="token punctuation">.</span>request<span class="token punctuation">,</span> <span class="token string">"ä¿å­˜æˆåŠŸ"</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> reverse<span class="token punctuation">(</span><span class="token string">'userprofile:profile'</span><span class="token punctuation">,</span> kwargs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'pk'</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>pk<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œç»§æ‰¿äº†UpdateViewæ¥å®ç°æ›´æ–°æ“ä½œï¼Œå’ŒDetailViewç±»ä¼¼ï¼Œæˆ‘ä»¬è¿™é‡Œä¹Ÿè®¾ç½®äº†modelå’Œtemplate_name è¿˜æœ‰form_classã€‚</p><p>å½“æ›´æ–°æˆåŠŸåï¼Œdjangoä¼šå›è°ƒget_success_urlæ¥å°†ç»“æœå‘Šè¯‰æ¨¡æ¿ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨get_success_urlé‡Œé¢åšä¸€äº›å®šåˆ¶çš„å·¥ä½œï¼Œæˆ‘ä»¬å¯ä»¥ä¼ ä¸€äº›è‡ªå·±çš„å‚æ•°ã€‚</p><p>ç®€å•çš„å‡ è¡Œä»£ç ï¼Œå°±å®ç°äº†ä¸ªäººèµ„æ–™çš„æ›´æ–°ï¼Œå†æ¬¡å½°æ˜¾äº†djangoæ¡†æ¶çš„å¼ºå¤§ã€‚</p><p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬è¿˜ç»§æ‰¿äº†LoginRequiredMixinå’ŒAuthorRequiredMixinä¸¤ä¸ªç±»ï¼Œè¿™ä¸¤ä¸ªç±»å±äºå…¬å…±ç±»ï¼Œ</p><p>å…¶ä¸­LoginRequiredMixinçš„ç”¨é€”æ˜¯ï¼šåªå…è®¸ç™»å½•çš„ç”¨æˆ·è®¿é—®è¯¥è§†å›¾ç±»ï¼Œ</p><p>AuthorRequiredMixinçš„ç”¨é€”æ˜¯ï¼šåªå…è®¸ç”¨æˆ·è‡ªå·±æŸ¥çœ‹è‡ªå·±çš„ä¸ªäººèµ„æ–™ï¼Œåˆ«äººæ˜¯æ— æ³•æŸ¥çœ‹çš„ã€‚</p><p>å…¶ä¸­AuthorRequiredMixinçš„ä»£ç ä½äºvideoproject/utils/helpers.pyã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>core<span class="token punctuation">.</span>exceptions <span class="token keyword">import</span> PermissionDenied<span class="token comment"># åªå…è®¸ç”¨æˆ·è‡ªå·±æŸ¥çœ‹è‡ªå·±çš„ä¸ªäººèµ„æ–™ï¼Œåˆ«äººæ˜¯æ— æ³•æŸ¥çœ‹çš„</span><span class="token keyword">class</span> <span class="token class-name">AuthorRequiredMixin</span><span class="token punctuation">(</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">dispatch</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        obj <span class="token operator">=</span> self<span class="token punctuation">.</span>get_object<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> obj <span class="token operator">!=</span> self<span class="token punctuation">.</span>request<span class="token punctuation">.</span>user<span class="token punctuation">:</span>            <span class="token keyword">raise</span> PermissionDenied        <span class="token keyword">return</span> <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>dispatch<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å‰ç«¯ä»£ç æœ€åç»Ÿä¸€å†è®²</p><p>##ä¿®æ”¹å¯†ç </p><p>åŒæ ·çš„ï¼Œä¿®æ”¹å¯†ç ä¹Ÿæ˜¯å±äºæ›´æ–°æ“ä½œã€‚</p><p>æ¨¡å‹å½“ç„¶æ˜¯ç”¨useræ¨¡å‹ï¼Œä¸å¿…å†å»ºã€‚<br>###æ›´æ–°è·¯ç”±<br>æˆ‘ä»¬å…ˆæ·»åŠ è·¯ç”±</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">path<span class="token punctuation">(</span><span class="token string">'change_password/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>change_password<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'change_password'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>###æ·»åŠ form<br>æ–°å¢ä¸€ä¸ªæ”¹å¯†ç çš„è¡¨å•</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># userprofile/forms.py</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>forms <span class="token keyword">import</span> PasswordChangeForm<span class="token comment"># æ”¹å¯†ç </span><span class="token keyword">class</span> <span class="token class-name">ChangePwdForm</span><span class="token punctuation">(</span>PasswordChangeForm<span class="token punctuation">)</span><span class="token punctuation">:</span>    old_password <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>error_messages<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'required'</span><span class="token punctuation">:</span> <span class="token string">'ä¸èƒ½ä¸ºç©º'</span><span class="token punctuation">,</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                                   widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>PasswordInput<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'placeholder'</span><span class="token punctuation">:</span> <span class="token string">'è¯·è¾“å…¥æ—§å¯†ç '</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    new_password1 <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>error_messages<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'required'</span><span class="token punctuation">:</span> <span class="token string">'ä¸èƒ½ä¸ºç©º'</span><span class="token punctuation">,</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                                    widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>PasswordInput<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'placeholder'</span><span class="token punctuation">:</span> <span class="token string">'è¯·è¾“å…¥æ–°å¯†ç '</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    new_password2 <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>error_messages<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'required'</span><span class="token punctuation">:</span> <span class="token string">'ä¸èƒ½ä¸ºç©º'</span><span class="token punctuation">,</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                                    widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>PasswordInput<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'placeholder'</span><span class="token punctuation">:</span> <span class="token string">'è¯·è¾“å…¥ç¡®è®¤å¯†ç '</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>###æ·»åŠ è§†å›¾å‡½æ•°<br>ä¿®æ”¹å¯†ç æ¯”è¾ƒç‰¹æ®Šï¼Œéœ€è¦å¯¹å¯†ç è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œå› æ­¤æˆ‘ä»¬é€šè¿‡è§†å›¾å‡½æ•°change_passwordæ¥æ‰‹å†™ä»£ç </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># userprofile/views.py</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth <span class="token keyword">import</span> update_session_auth_hash<span class="token keyword">from</span> <span class="token punctuation">.</span>forms <span class="token keyword">import</span> ChangePwdForm<span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> messages<span class="token comment"># ä¿®æ”¹å¯†ç </span><span class="token keyword">def</span> <span class="token function">change_password</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">:</span>        form <span class="token operator">=</span> ChangePwdForm<span class="token punctuation">(</span>request<span class="token punctuation">.</span>user<span class="token punctuation">,</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">)</span>        <span class="token keyword">if</span> form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            user <span class="token operator">=</span> form<span class="token punctuation">.</span>save<span class="token punctuation">(</span>commit<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token keyword">not</span> user<span class="token punctuation">.</span>is_staff <span class="token keyword">and</span> <span class="token keyword">not</span> user<span class="token punctuation">.</span>is_superuser<span class="token punctuation">:</span>                user<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>                update_session_auth_hash<span class="token punctuation">(</span>request<span class="token punctuation">,</span> user<span class="token punctuation">)</span>  <span class="token comment"># æ›´æ–°session éå¸¸é‡è¦ï¼</span>                messages<span class="token punctuation">.</span>success<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'ä¿®æ”¹æˆåŠŸ'</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">'userprofile:change_password'</span><span class="token punctuation">)</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                messages<span class="token punctuation">.</span>warning<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'æ— æƒä¿®æ”¹ç®¡ç†å‘˜å¯†ç '</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">'userprofile:change_password'</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">print</span><span class="token punctuation">(</span>form<span class="token punctuation">.</span>errors<span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        form <span class="token operator">=</span> ChangePwdForm<span class="token punctuation">(</span>request<span class="token punctuation">.</span>user<span class="token punctuation">)</span>    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span>                  <span class="token string">'registration/change_password.html'</span><span class="token punctuation">,</span>                  <span class="token punctuation">&#123;</span><span class="token string">'form'</span><span class="token punctuation">:</span> form<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½“æ‹¿åˆ°formä¹‹åï¼Œé€šè¿‡éªŒè¯formåˆæ³•æ€§ï¼Œç„¶åè°ƒç”¨user.save()æ¥ä¿å­˜ä¿®æ”¹ã€‚<br>ç„¶åé€šè¿‡update_session_auth_hashæ¥æ›´æ–°session, å¯†ç æ›´æ”¹ä¹‹åä¸€å®šè¦æ›´æ–°ä¼šè¯ã€‚</p><p>è¿™æ ·å°±å®ç°äº†ä¿®æ”¹å¯†ç åŠŸèƒ½ã€‚</p><p>##è®¢é˜…è®¾ç½®</p><p>å¾ˆå¤šç½‘ç«™éƒ½æœ‰è®¢é˜…è®¾ç½®åŠŸèƒ½ï¼Œå½“ç”¨æˆ·è®¢é˜…äº†ç½‘ç«™å†…å®¹ä¹‹åï¼Œç½‘ç«™æœ‰äº†æ–°å†…å®¹ï¼Œå‘è®¢é˜…ç”¨æˆ·æ¨é€ç›¸å…³å†…å®¹ã€‚<br>###æ·»åŠ è¡¨å•<br>è®¢é˜…åŠŸèƒ½ä¹Ÿéœ€è¦æ·»åŠ è¡¨å•</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># userprofile/forms.py</span><span class="token keyword">class</span> <span class="token class-name">SubscribeForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        model <span class="token operator">=</span> User        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'subscribe'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>###è·¯ç”±è®¾ç½®<br>æˆ‘ä»¬å…ˆåœ¨users/urls.pyä¸‹æ·»åŠ è®¢é˜…åŠŸèƒ½çš„è·¯ç”±</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">path<span class="token punctuation">(</span><span class="token string">'subscribe/&lt;int:pk>/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>SubscribeView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'subscribe'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æˆ‘ä»¬è®¾ç½®çš„è®¢é˜…è§†å›¾ç±»ä¸ºSubscribeViewï¼Œå› ä¸ºè®¢é˜…çš„åŠŸèƒ½å’Œä¿®æ”¹ä¸ªäººèµ„æ–™åŠŸèƒ½ç±»ä¼¼ï¼Œä¹Ÿæ˜¯å±äºæ›´æ–°æ“ä½œï¼Œæ‰€ä»¥åŒæ ·æ˜¯ä½¿ç”¨UpdateViewæ¥æ›´æ–°ã€‚<br>###æ·»åŠ è§†å›¾</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># userprofile/views.py</span><span class="token keyword">class</span> <span class="token class-name">SubscribeView</span><span class="token punctuation">(</span>LoginRequiredMixin<span class="token punctuation">,</span>AuthorRequiredMixin<span class="token punctuation">,</span> generic<span class="token punctuation">.</span>UpdateView<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> User    form_class <span class="token operator">=</span> SubscribeForm    template_name <span class="token operator">=</span> <span class="token string">'users/subscribe.html'</span>    <span class="token keyword">def</span> <span class="token function">get_success_url</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        messages<span class="token punctuation">.</span>success<span class="token punctuation">(</span>self<span class="token punctuation">.</span>request<span class="token punctuation">,</span> <span class="token string">"ä¿å­˜æˆåŠŸ"</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> reverse<span class="token punctuation">(</span><span class="token string">'userprofile:subscribe'</span><span class="token punctuation">,</span> kwargs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'pk'</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>pk<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è®¢é˜…åŠŸèƒ½å®ç°å’ŒProfileçš„å®ç°æœ‰ç‚¹ç±»ä¼¼<br>##åé¦ˆä¸å»ºè®®<br>###æ·»åŠ model<br>è¿™é‡Œæˆ‘ä»¬éœ€è¦åœ¨users/models.pyä¸‹æ–°å»ºä¸€ä¸ªåé¦ˆè¡¨ï¼Œå‘½åä¸ºFeedbackï¼Œ</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Feedback</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    contact <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>    content <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">)</span>    timestamp <span class="token operator">=</span> models<span class="token punctuation">.</span>DateTimeField<span class="token punctuation">(</span>auto_now_add<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        db_table <span class="token operator">=</span> <span class="token string">"v_feedback"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¯¥è¡¨ä¸€å…±æœ‰3ä¸ªå­—æ®µï¼Œåˆ†åˆ«æ˜¯</p><pre><code>contact è”ç³»æ–¹å¼content å†…å®¹timestamp æ—¶é—´</code></pre><p>###æ·»åŠ è¡¨å•<br>å†™å®Œmodelä¹‹åï¼Œè¿˜éœ€è¦æ·»åŠ è¡¨å•ç±»</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># userprofile/forms.py</span><span class="token keyword">class</span> <span class="token class-name">FeedbackForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>    content <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>min_length<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span>                              max_length<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">,</span>                              error_messages<span class="token operator">=</span><span class="token punctuation">&#123;</span>                                   <span class="token string">'min_length'</span><span class="token punctuation">:</span> <span class="token string">'è‡³å°‘4ä¸ªå­—ç¬¦'</span><span class="token punctuation">,</span>                                   <span class="token string">'max_length'</span><span class="token punctuation">:</span> <span class="token string">'ä¸èƒ½å¤šäº200ä¸ªå­—ç¬¦'</span><span class="token punctuation">,</span>                                   <span class="token string">'required'</span><span class="token punctuation">:</span> <span class="token string">'å†…å®¹ä¸èƒ½ä¸ºç©º'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                              widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>Textarea<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'placeholder'</span><span class="token punctuation">:</span> <span class="token string">'è¯·è¾“å…¥å†…å®¹'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    contact <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>required<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>                              widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>TextInput<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'placeholder'</span><span class="token punctuation">:</span> <span class="token string">'è¯·è¾“å…¥è”ç³»æ–¹å¼'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        model <span class="token operator">=</span> Feedback        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'content'</span><span class="token punctuation">,</span> <span class="token string">'contact'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å†™å®Œmodelä¹‹åï¼Œæˆ‘ä»¬å°±èƒ½å†™ä¸šåŠ¡ä»£ç äº†ã€‚<br>###è®¾ç½®è·¯ç”±<br>å…ˆæ·»åŠ è·¯ç”±</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">path<span class="token punctuation">(</span><span class="token string">'feedback/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>FeedbackView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'feedback'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æˆ‘ä»¬è®¾ç½®è·¯ç”±æŒ‡å‘FeedbackViewè§†å›¾ç±»ã€‚<br>###è§†å›¾ä¸šåŠ¡<br>æˆ‘ä»¬ç›´æ¥è´´å‡ºFeedbackViewçš„ä»£ç </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># userprofile/views.py</span><span class="token keyword">from</span> ratelimit<span class="token punctuation">.</span>decorators <span class="token keyword">import</span> ratelimit<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>mixins <span class="token keyword">import</span> LoginRequiredMixin<span class="token keyword">from</span> django<span class="token punctuation">.</span>views <span class="token keyword">import</span> generic<span class="token keyword">class</span> <span class="token class-name">FeedbackView</span><span class="token punctuation">(</span>LoginRequiredMixin<span class="token punctuation">,</span> generic<span class="token punctuation">.</span>CreateView<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> Feedback    form_class <span class="token operator">=</span> FeedbackForm    template_name <span class="token operator">=</span> <span class="token string">'users/feedback.html'</span>    <span class="token decorator annotation punctuation">@ratelimit</span><span class="token punctuation">(</span>key<span class="token operator">=</span><span class="token string">'ip'</span><span class="token punctuation">,</span> rate<span class="token operator">=</span><span class="token string">'2/m'</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        was_limited <span class="token operator">=</span> <span class="token builtin">getattr</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'limited'</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> was_limited<span class="token punctuation">:</span>            messages<span class="token punctuation">.</span>warning<span class="token punctuation">(</span>self<span class="token punctuation">.</span>request<span class="token punctuation">,</span> <span class="token string">"æ“ä½œå¤ªé¢‘ç¹äº†ï¼Œè¯·1åˆ†é’Ÿåå†è¯•"</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'userprofile/feedback.html'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">'form'</span><span class="token punctuation">:</span> FeedbackForm<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>post<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">get_success_url</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        messages<span class="token punctuation">.</span>success<span class="token punctuation">(</span>self<span class="token punctuation">.</span>request<span class="token punctuation">,</span> <span class="token string">"æäº¤æˆåŠŸ"</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> reverse<span class="token punctuation">(</span><span class="token string">'userprofile:feedback'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬çœ‹åˆ°è¿™ä¸ªåœ°æ–¹ç»§æ‰¿çš„æ˜¯CreateViewç±»ï¼Œè¯¥ç±»å±äºæ–°å»ºé€šç”¨è§†å›¾ç±»ã€‚åªè¦æˆ‘ä»¬é…ç½®å¥½modelã€form_classã€template_nameï¼Œdjangoå°±è‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»ºè®°å½•ã€‚</p><p>å¦å¤–ï¼Œæˆ‘ä»¬è¿˜ä½¿ç”¨äº†ä¸€ç§é™æµé‡çš„æŠ€æœ¯ï¼šratelimitã€‚è¿™æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹ç±»åº“ï¼Œé€šè¿‡ä½¿ç”¨ä»–ï¼Œå¯ä»¥é˜²æ­¢æ¶æ„æäº¤æ•°æ®ã€‚å®ƒä½¿ç”¨è¶…çº§ç®€å•ï¼Œåªéœ€è¦é…ç½®å¥½keyå’Œrateå³å¯ï¼Œkeyä»£è¡¨ä¸šåŠ¡ï¼Œrateä»£è¡¨é€Ÿç‡ï¼Œè¿™é‡Œæˆ‘ä»¬è®¾ç½®keyä¸ºipï¼Œå³é™åˆ¶ipåœ°å€ï¼Œrateä¸ºâ€™2/mâ€™ï¼Œè¡¨ç¤ºæ¯åˆ†é’Ÿé™åˆ¶è¯·æ±‚2æ¬¡ã€‚è¶…è¿‡2æ¬¡å°±æç¤ºç”¨æˆ·æ“ä½œé¢‘ç¹ã€‚</p><p>è¿™æ ·æˆ‘ä»¬å°±å®Œç¾çš„å®ç°äº†ç”¨æˆ·åé¦ˆã€‚</p><p>##å‰ç«¯ä¸šåŠ¡<br>å‰ç«¯ä¸»è¦ä¿®æ”¹æˆ–æ·»åŠ è¿™äº›å†…å®¹</p><pre class="line-numbers language-none"><code class="language-none">â”€â”€ baseâ”‚Â Â  â”œâ”€â”€ base.htmlâ”‚Â Â  â”œâ”€â”€ header.htmlâ”‚Â Â  â”œâ”€â”€ left_nav.htmlâ”‚Â Â  â”œâ”€â”€ menu.htmlâ”‚Â Â  â””â”€â”€ page_nav.htmlâ”œâ”€â”€ registration|   â””â”€â”€ change_password.htmlâ””â”€â”€ â”€â”€ users    â”œâ”€â”€ feedback.html    â”œâ”€â”€ profile.html    â””â”€â”€ subscribe.html<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»baseé‡Œé¢å°±æœ‰åŠ è½½header,header åŠ è½½menu,è€Œmenué¡µé¢å°±æ˜¯åŠ è½½ä¸ªäººä¿¡æ¯çš„é¡µé¢</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">&#123;% if user.is_authenticated %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui inline dropdown<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>v-header-avatar<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span>inline-block<span class="token punctuation">;</span><span class="token property">font-weight</span><span class="token punctuation">:</span>bold<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>        &#123;% thumbnail user.avatar "200x200" crop="center" as im %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui avatar image<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123; im.url &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        &#123;% empty %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui avatar image<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>img/img_default_avatar.png<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        &#123;% endthumbnail %&#125;        &#123;&#123; user.username &#125;&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dropdown icon<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menu<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript">window<span class="token punctuation">.</span>location<span class="token operator">=</span><span class="token string">'&#123;% url '</span>userprofile<span class="token operator">:</span>profile<span class="token string">' user.pk %&#125;'</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user icon<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>ä¸ªäººèµ„æ–™<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript">window<span class="token punctuation">.</span>location<span class="token operator">=</span><span class="token string">'&#123;% url '</span>userprofile<span class="token operator">:</span>profile<span class="token string">' user.pk %&#125;'</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bookmark icon<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>æˆ‘çš„æ”¶è—<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript">window<span class="token punctuation">.</span>location<span class="token operator">=</span><span class="token string">'&#123;% url '</span>userprofile<span class="token operator">:</span>profile<span class="token string">' user.pk %&#125;'</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>heart icon<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>æˆ‘çš„å–œæ¬¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript">window<span class="token punctuation">.</span>location<span class="token operator">=</span><span class="token string">'&#123;% url '</span>userprofile<span class="token operator">:</span>logout<span class="token string">' %&#125;'</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sign-out icon<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>é€€å‡º<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>&#123;% else %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui tiny secondary basic button<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>v-header-login<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>userprofile:login<span class="token punctuation">'</span> %&#125;?next=&#123;&#123; request.path &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç™»å½•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>&#123;% endif %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœç”¨æˆ·ç™»å½•çš„è¯ï¼Œå°±èƒ½çœ‹åˆ°ç”¨æˆ·å¤´åƒï¼Œç‚¹å‡»æ˜¾ç¤ºä¸‹æ‹‰èœå•ï¼Œé‡Œé¢æœ‰ä¸ªäººèµ„æ–™ï¼Œ(æˆ‘çš„æ”¶è—ï¼Œæˆ‘çš„å–œæ¬¢, è¿™ä¸¤ä¸ªåŠŸèƒ½åé¢å®ç°) é€€å‡ºåŠŸèƒ½<br>ç”¨æˆ·æ²¡ç™»å½•çš„è¯ï¼Œå°±æ˜¾ç¤ºç™»å½•2å­—<br>ç‚¹å‡»ä¸ªäººèµ„æ–™èƒ½è·³è½¬åˆ°æ–°çš„é¡µé¢</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">&#123;% extends 'base/base.html' %&#125;&#123;% load static %&#125;&#123;% load thumbnail %&#125;&#123;% block content %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>v-settings<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui two column grid <span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>four wide column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            &#123;% include "base/left_nav.html" %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>twelve wide column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>v-settings-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui form<span class="token punctuation">"</span></span> <span class="token attr-name">novalidate</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>userprofile:profile<span class="token punctuation">'</span> form.instance.pk %&#125;<span class="token punctuation">"</span></span>                      <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    &#123;% csrf_token %&#125;                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sixteen wide inline field v-form-field<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">></span></span>å¤´åƒ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>v-inline-middle<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id_avatar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                &#123;% thumbnail user.avatar "200x200" crop="center" as im %&#125;                                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui mini circular image<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123; im.url &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                &#123;% empty %&#125;                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui mini circular  image<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>img/img_default_avatar.png<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                &#123;% endthumbnail %&#125;                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                            &#123;&#123;form.avatar&#125;&#125;                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file_is_choose<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>n<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ–‡ä»¶å·²é€‰æ‹©<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sixteen wide inline field v-form-field<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">></span></span>æ˜µç§°<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                        &#123;&#123;form.nickname&#125;&#125;                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sixteen wide inline field v-form-field<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">></span></span>Email<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                        &#123;&#123;form.email&#125;&#125;                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sixteen wide inline field v-form-field<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">></span></span>æ‰‹æœºå·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                        &#123;&#123;form.mobile&#125;&#125;                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sixteen wide inline field v-form-field<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">></span></span>æ€§åˆ«<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui selection  dropdown<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            &#123;&#123;form.gender&#125;&#125;                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dropdown icon<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>default text<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¯·é€‰æ‹©<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menu<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token attr-name">data-value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>M<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç”·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token attr-name">data-value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>F<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å¥³<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui primary button<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¿å­˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>                    &#123;% include "base/form_errors.html" %&#125;                    &#123;% include "base/form_messages.html" %&#125;                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>&#123;% endblock content %&#125;&#123;% block script %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.ui .dropdown'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">dropdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#id_avatar"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">change</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#file_is_choose"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>js/left_nav.js<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>&#123;% endblock script %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ä¸ªé¡µé¢æœ‰å‡ ç‚¹æ³¨æ„</p><ul><li>1.ç»§æ‰¿baseé¡µé¢</li><li>2.åŒ…å« <code>&#123;% include "base/left_nav.html" %&#125;</code>ï¼Œå³æŠŠèœå•å•ç‹¬æ‹¿å‡ºæ¥ï¼Œç‚¹å‡»è·³è½¬,<br>  é€šè¿‡æœ€ä¸‹é¢çš„<code>&lt;script src=&quot;&#123;% static 'js/left_nav.js' %&#125;&quot;&gt;&lt;/script&gt;</code>åŠ è½½æ–°çš„é¡µé¢</li><li>3.æ€§åˆ«é€‰æ‹©è¿™é‡Œé€šè¿‡è°ƒç”¨ä¸‹æ¥èœå•é€‰æ‹©ï¼Œä¸‹æ‹‰èœå•çš„è°ƒç”¨æ˜¯é€šè¿‡jså®ç°çš„</li></ul><p>ç„¶åå…¶ä»–å‡ ä¸ªé¡µé¢ç±»ä¼¼<br>##å…¶ä»–<br>è®¢é˜…è®¾ç½®å¯èƒ½éœ€è¦è®¾ç½®é‚®ç®±ï¼Œè¿™é‡Œå°±æ²¡è®¾ç½®ï¼Œåé¢å†å®Œå–„</p>]]></content>
      
      
      <categories>
          
          <category> Djangoè§†é¢‘ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoç»¼åˆç¯‡ä¹‹æ·»åŠ xadminåŠŸèƒ½</title>
      <link href="/post/django-quan-wang-zhan-da-jian/django-zong-he-pian-zhi-tian-jia-xadmin-gong-neng/"/>
      <url>/post/django-quan-wang-zhan-da-jian/django-zong-he-pian-zhi-tian-jia-xadmin-gong-neng/</url>
      
        <content type="html"><![CDATA[<p>#æ·»åŠ xadminåŠŸèƒ½</p><p>django2.0,ä»¥åŠdjango3.0ç›´æ¥ä½¿ç”¨xadminåŠŸèƒ½å·²ç»ä¸å¤ªå‹å¥½äº†<br>å¦‚æœç›´æ¥ä½¿ç”¨pipçš„æ–¹å¼å®‰è£… django-xadminä¼šé‡åˆ°å¾ˆå¤šé”™è¯¯çš„å‘<br>è¿™é‡Œä½¿ç”¨ä¸€ä¸ªæ–°çš„æ–¹å¼æ·»åŠ xadminåŠŸèƒ½<br>##ä¸‹è½½æ–‡ä»¶<br>åœ¨è¿™é‡Œ<a href="https://gitee.com/voldemort/xadmin-django3/tree/master">https://gitee.com/voldemort/xadmin-django3/tree/master</a> æˆ‘ä»¬éœ€è¦çš„xadminå†…å®¹</p><p>ä¸‹è½½ä¹‹ååªä½¿ç”¨xadminè¿™ä¸ªæ–‡ä»¶å¤¹<br>å°†æ•´ä¸ªæ–‡ä»¶å¤¹å¤åˆ¶ ç„¶ååœ¨è‡ªå·±çš„é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹æ–°å»ºæ–‡ä»¶å¤¹ extra_apps,ç„¶åxadminç²˜è´´è¿‡æ¥</p><p>åŒæ—¶éœ€è¦å®‰è£…</p><pre><code>django-crispy-forms==1.8.1django-import-export==2.0.2django-reversion==3.0.7django-formtools==2.2.0future==0.18.2httplib2==0.9.2six==1.14.0</code></pre><p>ä¸Šé¢æ ‡æ³¨çš„ç‰ˆæœ¬,æœ€å¥½æ˜¯å¤§äºç­‰äºå…¶ç‰ˆæœ¬<br>DjangoUEditoræ˜¯æ ¹æ®è€çš„xadminæ–°æ·»åŠ çš„åŠŸèƒ½</p><pre class="line-numbers language-none"><code class="language-none">##æ·»åŠ åˆ°é¡¹ç›®ä¸­settings.pyä¸‹æ–°å¢&#96;&#96;&#96;pythonimport syssys.path.insert(0,os.path.join(BASE_DIR,&#39;extra_apps&#39;))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·æˆ‘ä»¬çš„é¡¹ç›®å°±å¯ä»¥è®¿é—®åˆ°xadminäº†</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token string">'django.contrib.admin'</span><span class="token punctuation">,</span><span class="token comment">#ç®¡ç†ç½‘ç«™</span>    <span class="token string">'django.contrib.auth'</span><span class="token punctuation">,</span><span class="token comment">#è®¤è¯æ¨¡å—</span>    <span class="token string">'django.contrib.contenttypes'</span><span class="token punctuation">,</span><span class="token comment">#å†…éƒ¨æ¡†æ¶</span>    <span class="token string">'django.contrib.sessions'</span><span class="token punctuation">,</span><span class="token comment">#ä¼šè¯ç®¡ç†</span>    <span class="token string">'django.contrib.messages'</span><span class="token punctuation">,</span><span class="token comment">#æ¶ˆæ¯æ¡†æ¶</span>    <span class="token string">'django.contrib.staticfiles'</span><span class="token punctuation">,</span><span class="token comment">#æ˜ å°„çš„é™æ€èµ„æº</span>    <span class="token string">'xadmin'</span><span class="token punctuation">,</span>                   <span class="token comment"># xadminã€€ã€€ç›¸å…³</span>    <span class="token string">'crispy_forms'</span><span class="token punctuation">,</span>             <span class="token comment"># xadminã€€ã€€ç›¸å…³</span>    <span class="token string">'DjangoUeditor'</span><span class="token punctuation">,</span>            <span class="token comment"># xadminã€€ã€€å†…çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å°†xadminæ·»åŠ åˆ°é¡¹ç›®ä¸­,æ¯•ç«Ÿä»–ä¹Ÿæ˜¯ä¸€ä¸ªæ–°çš„app,åŒæ—¶æ·»åŠ çš„è¿˜æœ‰crispy_forms</p><p>##æ·»åŠ è·¯ç”±<br>urls.pyä¸­æ–°å¢è·¯ç”±</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token punctuation">,</span> include<span class="token keyword">import</span> xadmin    <span class="token comment"># å¯Œæ–‡æœ¬ç›¸å…³url</span>    path<span class="token punctuation">(</span><span class="token string">'xadmin/'</span><span class="token punctuation">,</span> xadmin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>urls<span class="token punctuation">)</span><span class="token punctuation">,</span>                      <span class="token comment"># xadminç›¸å…³</span>    path<span class="token punctuation">(</span><span class="token string">'ueditor/'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">'DjangoUeditor.urls'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token comment"># å¯Œæ–‡æœ¬ç¼–è¾‘å™¨</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>##å°†è‡ªå·±çš„appæ³¨å†Œåˆ°xadmin<br>åœ¨admin.pyåŒçº§ç›®å½•ä¸‹å»ºç«‹adminx.py,é…ç½®æ ¼å¼å¦‚ä¸‹</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> xadmin<span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> <span class="token operator">*</span><span class="token comment"># Register your models here.</span><span class="token keyword">import</span> xadmin<span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">from</span> xadmin <span class="token keyword">import</span> views<span class="token comment"># æ­¤ç±»å¯ä»¥å®šä¹‰adminåå°æ˜¾ç¤ºçš„å­—æ®µï¼Œæ¯”å¦‚æ–‡ç« åˆ—è¡¨æ˜¾ç¤ºæ ‡é¢˜ï¼Œåˆ›å»ºæ—¶é—´ï¼Œ</span><span class="token keyword">class</span> <span class="token class-name">BlogAdmin</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""åšå®¢æ–‡ç« """</span>    <span class="token comment"># å±•ç¤ºçš„å­—æ®µ</span>    list_display <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'excerpt'</span><span class="token punctuation">,</span> <span class="token string">'read_num'</span><span class="token punctuation">,</span> <span class="token string">'appreciate'</span><span class="token punctuation">,</span>                    <span class="token string">'created_time'</span><span class="token punctuation">,</span> <span class="token string">'tags'</span><span class="token punctuation">,</span> <span class="token string">'category'</span><span class="token punctuation">,</span> <span class="token string">'status'</span><span class="token punctuation">]</span>    <span class="token comment"># æŒ‰æ–‡ç« åè¿›è¡Œæœç´¢</span>    search_fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span>    <span class="token comment"># ç­›é€‰</span>    list_filter <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'created_time'</span><span class="token punctuation">,</span> <span class="token string">'category'</span><span class="token punctuation">,</span> <span class="token string">'status'</span><span class="token punctuation">]</span>    <span class="token comment"># ä¿®æ”¹å›¾æ ‡</span>    model_icon <span class="token operator">=</span> <span class="token string">'fa fa-file-text'</span>    <span class="token comment"># ä¿®æ”¹é»˜è®¤æ’åº</span>    ordering <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'-id'</span><span class="token punctuation">]</span>    <span class="token comment"># è®¾ç½®åªè¯»å­—æ®µ</span>    readonly_fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'read_num'</span><span class="token punctuation">]</span>    <span class="token comment"># ä¸æ˜¾ç¤ºæŸä¸€å­—æ®µ</span>    exclude <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">]</span>    list_display_link <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span>    style_fields <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">'content'</span><span class="token punctuation">:</span> <span class="token string">'ueditor'</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">CategoryAdmin</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""åˆ†ç±»"""</span>    list_display <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'created_time'</span><span class="token punctuation">]</span>    search_fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span>    model_icon <span class="token operator">=</span> <span class="token string">'fa fa-file-text'</span><span class="token keyword">class</span> <span class="token class-name">TagAdmin</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""æ ‡ç­¾"""</span>    list_display <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">]</span>    search_fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span>    model_icon <span class="token operator">=</span> <span class="token string">'fa fa-file-text'</span>xadmin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>register<span class="token punctuation">(</span>Blog<span class="token punctuation">,</span> BlogAdmin<span class="token punctuation">)</span>xadmin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>register<span class="token punctuation">(</span>Category<span class="token punctuation">,</span> CategoryAdmin<span class="token punctuation">)</span>xadmin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>register<span class="token punctuation">(</span>Tag<span class="token punctuation">,</span> TagAdmin<span class="token punctuation">)</span><span class="token comment"># ä¿®æ”¹xadminçš„åŸºç¡€é…ç½®</span><span class="token keyword">class</span> <span class="token class-name">BaseSetting</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># å…è®¸ä½¿ç”¨ä¸»é¢˜</span>    enable_themes <span class="token operator">=</span> <span class="token boolean">True</span>            <span class="token comment"># å¼€å¯è‡ªå®šä¹‰ä¸»é¢˜</span>    use_bootswatch <span class="token operator">=</span> <span class="token boolean">True</span><span class="token comment"># ä¿®æ”¹xadminçš„å…¨å±€é…ç½®</span><span class="token keyword">class</span> <span class="token class-name">GlobalSetting</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    site_title <span class="token operator">=</span> <span class="token string">'è‡ªå·±çš„å…¨ç«™'</span>    site_footer <span class="token operator">=</span> <span class="token string">'2020ä¸­è‡ªå·±å»ºç«‹çš„å…¨ç«™'</span>    <span class="token comment"># Modelsæ”¶èµ·åŠŸèƒ½</span>    menu_style <span class="token operator">=</span> <span class="token string">'accordion'</span>xadmin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>register<span class="token punctuation">(</span>views<span class="token punctuation">.</span>CommAdminView<span class="token punctuation">,</span> GlobalSetting<span class="token punctuation">)</span>xadmin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>register<span class="token punctuation">(</span>views<span class="token punctuation">.</span>BaseAdminView<span class="token punctuation">,</span> BaseSetting<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>##æ›´æ–°æ•°æ®åº“<br>å»ºç«‹ä¸xadminç›¸å…³çš„è¡¨,å¹¶å°†è¡¨æ·»åŠ åˆ°æ•°æ®åº“</p><pre><code>python manage.py makemigrationspython manage.py migrate</code></pre><p>##æ›´æ¢xadminçš„logo<br>base.pyæ›´æ”¹æºç ,æ¢logo</p><pre><code>base.png</code></pre><p>##æ±‰åŒ–æ˜¾ç¤ºèœå•åå­—</p><p>é¦–å…ˆè‡ªå·±å®šä¹‰çš„modelæ–‡ä»¶ä¸­ï¼Œå¯¹äºæ¯ä¸€ä¸ªå˜é‡ï¼Œæ·»åŠ å‚æ•°verbose_name</p><pre><code>author = models.ForeignKey(UserInfo, verbose_name=&#39;ä½œè€…&#39;, on_delete=models.CASCADE)title = models.CharField(max_length=128, verbose_name=&quot;æ ‡é¢˜&quot;)</code></pre><p>å¯¹äºapp.pyæ–‡ä»¶åšå‡ºå¯¹åº”çš„ä¿®æ”¹</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>apps <span class="token keyword">import</span> AppConfig<span class="token keyword">class</span> <span class="token class-name">BlogConfig</span><span class="token punctuation">(</span>AppConfig<span class="token punctuation">)</span><span class="token punctuation">:</span>    name <span class="token operator">=</span> <span class="token string">'blog'</span>    verbose_name <span class="token operator">=</span> <span class="token string">"åšå®¢ç®¡ç†"</span>ã€€ã€€ã€€<span class="token comment">#å¯¹åº”æ±‰åŒ–</span>    mean_icon <span class="token operator">=</span> <span class="token string">'fa fa-user'</span>ã€€<span class="token comment"># æ·»åŠ å›¾æ ‡</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åä¸€æ­¥ï¼Œç›¸å¯¹åº”çš„appä¸‹é¢çš„__init__.pyæ–‡ä»¶ä¸­ï¼Œæ·»åŠ å¦‚ä¸‹ï¼š</p><pre><code>default_app_config = &quot;blog.apps.BlogConfig&quot;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Djangoå…¨ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoè§†é¢‘ç½‘ç«™æ­å»º--step16åå°é‚®ä»¶ç®¡ç†</title>
      <link href="/post/django-shi-pin-wang-zhan-da-jian/step16-hou-tai-you-jian-guan-li/"/>
      <url>/post/django-shi-pin-wang-zhan-da-jian/step16-hou-tai-you-jian-guan-li/</url>
      
        <content type="html"><![CDATA[<p>#é‚®ä»¶ç®¡ç†åŠŸèƒ½</p><p>è®¢é˜…åŠŸèƒ½å·²ç»å®ç°äº†ï¼šå½“ç”¨æˆ·è®¢é˜…å¼€å¯è®¢é˜…åŠŸèƒ½åï¼Œç½‘ç«™ä¼šé€šè¿‡åå°ç»™ç”¨æˆ·å‘é€ç½‘ç«™æœ€æ–°çš„ä¸€äº›åŠ¨å‘ã€‚<br>ä½†æ˜¯æœ‰æ—¶å€™éœ€è¦å…³é—­æ¨é€åŠŸèƒ½ï¼Œæ¯”å¦‚ç½‘ç«™é‚®ä»¶åšä¸€äº›è°ƒæ•´ä¹‹ç±»çš„ã€‚</p><p>å› æ­¤éœ€è¦çµæ´»çš„è®¾ç½®å‘é€é‚®ä»¶åŠŸèƒ½ã€‚</p><p>æœ¬èŠ‚æ¥å®ç°è¿™ä¸ªåŠŸèƒ½<br>###è·¯ç”±è®¾ç½®</p><p>æˆ‘ä»¬å…ˆæ¥å†™è®¢é˜…æ¨é€çš„è·¯ç”±ï¼Œ</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -----------------------è®¾ç½®----------------------------</span>path<span class="token punctuation">(</span><span class="token string">'setting/&lt;int:pk>/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>SettingView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'setting'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>åŒæ—¶ä¿®æ”¹myadmin/base.htmlæ–‡ä»¶</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui divider<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>myadmin:setting<span class="token punctuation">'</span> 1 %&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>setting<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è®¾ç½®<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å°†è·¯ç”±è®¾ç½®ä¸º SettingView</p><h2 id="è§†å›¾è®¾ç½®"><a href="#è§†å›¾è®¾ç½®" class="headerlink" title="è§†å›¾è®¾ç½®"></a>è§†å›¾è®¾ç½®</h2><p> SettingView çš„ä»£ç </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># éœ€adminæ‰‹åŠ¨æ·»åŠ 1æ¡è®°å½•</span><span class="token keyword">class</span> <span class="token class-name">SettingView</span><span class="token punctuation">(</span>SuperUserRequiredMixin<span class="token punctuation">,</span> generic<span class="token punctuation">.</span>UpdateView<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> Setting    form_class <span class="token operator">=</span> SettingForm    template_name <span class="token operator">=</span> <span class="token string">'myadmin/setting.html'</span>    <span class="token keyword">def</span> <span class="token function">get_success_url</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        messages<span class="token punctuation">.</span>success<span class="token punctuation">(</span>self<span class="token punctuation">.</span>request<span class="token punctuation">,</span> <span class="token string">"ä¿å­˜æˆåŠŸ"</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> reverse<span class="token punctuation">(</span><span class="token string">'myadmin:setting'</span><span class="token punctuation">,</span> kwargs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'pk'</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>kwargs<span class="token punctuation">[</span><span class="token string">'pk'</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ˜¯ä¸€ä¸ªæ›´æ–°è§†å›¾ç±»ï¼ŒåŠŸèƒ½å’Œå‰é¢çš„userã€videoçš„ updateæ–¹æ³•ç±»ä¼¼</p><p>ä½¿ç”¨modelå’Œform_class å‘å‰ç«¯ä¼ é€’æ›´æ–°æ•°æ®<br>##æ¨¡å‹è¡¨å•çš„åˆ›å»º<br>è¿™é‡Œæ¨¡æ¿Settingå’Œè¡¨å•SettingForméœ€è¦é‡æ–°åˆ›å»º</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># myadmin/models.py</span><span class="token keyword">class</span> <span class="token class-name">Setting</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    switch_mail <span class="token operator">=</span> models<span class="token punctuation">.</span>BooleanField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        db_table <span class="token operator">=</span> <span class="token string">"v_setting"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ›å»ºä¸€ä¸ªæ¨¡å‹åªæœ‰ä¸€ä¸ªå¸ƒå°”å‹å­—æ®µï¼Œå†³å®šæ˜¯å¦å¼€å¯é‚®ä»¶æœåŠ¡</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">SettingForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        model <span class="token operator">=</span> Setting        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'switch_mail'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¡¨å•å†…å®¹ä¹Ÿå¾ˆç®€å•</p><h2 id="æ³¨å†Œæ·»åŠ æ•°æ®"><a href="#æ³¨å†Œæ·»åŠ æ•°æ®" class="headerlink" title="æ³¨å†Œæ·»åŠ æ•°æ®"></a>æ³¨å†Œæ·»åŠ æ•°æ®</h2><p>è¡¨å•åˆ›å»ºå®Œæ¯•éœ€è¦è¿›è¡Œæ•°æ®è¿ç§»</p><pre class="line-numbers language-none"><code class="language-none">python3 manage.py makemigrationspython3 manage.py migrate<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä½†æ˜¯ç°åœ¨è¡¨å•ä¸­æ²¡æœ‰æ•°æ®ï¼Œæ‰€ä»¥ä¸¤ç§æ–¹æ³•ï¼Œ</p><ul><li>ä¸€ä¸ªç›´æ¥è¿›è¡Œæ•°æ®åº“æ“ä½œï¼Œåœ¨è¿™ä¸ªè¡¨ä¸­æ’å…¥ä¸€æ¡æ•°æ®</li><li>å°†æ¨¡å‹Settingsæ·»åŠ æ³¨å†Œåˆ°adminåå°ï¼Œé€šè¿‡è‡ªå¸¦çš„åå°æ‰‹åŠ¨æ·»åŠ <br>å¦‚æœæ·»åŠ åˆ°adminåå°ï¼Œä¸è¦å¿˜äº†ä¿®æ”¹adminæ–‡ä»¶<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># myadmin/admin.py</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> admin<span class="token keyword">from</span> myadmin<span class="token punctuation">.</span>models <span class="token keyword">import</span> Settingadmin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>register<span class="token punctuation">(</span>Setting<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>##å‰ç«¯æ–‡ä»¶<br>ç°åœ¨æ·»åŠ å‰ç«¯æ–‡ä»¶ï¼Œå°±èƒ½çœ‹åˆ°è¿™ä¸ªåŠŸèƒ½äº†,è¿™æ˜¯ä¸€ä¸ªå•é€‰æ¡†ï¼Œä¿å­˜æˆåŠŸé¡µé¢ç®€å•çš„æç¤ºä¸€ä¸‹<pre class="line-numbers language-html" data-language="html"><code class="language-html">&#123;% extends 'myadmin/base.html' %&#125;&#123;% load static %&#125;&#123;% load thumbnail %&#125;&#123;% block content %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui grid<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>ç½‘ç«™è®¾ç½®<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui divider<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>v-form-wrap<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui form<span class="token punctuation">"</span></span> <span class="token attr-name">novalidate</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>myadmin:setting<span class="token punctuation">'</span> 1 %&#125;<span class="token punctuation">"</span></span>                  <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                &#123;% csrf_token %&#125;                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>field<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui checkbox<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                      &#123;&#123;form.switch_mail&#125;&#125;                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">></span></span>å¼€å¯é‚®ä»¶æœåŠ¡<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui primary button<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¿å­˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>                &#123;% include "base/form_errors.html" %&#125;                &#123;% include "base/form_messages.html" %&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>&#123;% endblock content %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>##ä¿®æ”¹å‘é€é‚®ä»¶é€»è¾‘<br>å‰ç«¯åŸºæœ¬åŠŸèƒ½å®ç°äº†ï¼Œä¸‹é¢å®ç°æœ¬èŠ‚çš„æ ¸å¿ƒåŠŸèƒ½</li></ul><p>å‰ç«¯ç‚¹å‡»å·²ç»èƒ½å®ç°æ•°æ®çš„æ›´æ–°äº†ï¼Œç°åœ¨éœ€è¦è®²è¿™ä¸ªæ•°æ®åˆ©ç”¨èµ·æ¥</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># è®¢é˜…æ¨é€åŠŸèƒ½</span><span class="token keyword">class</span> <span class="token class-name">SubscribeView</span><span class="token punctuation">(</span>SuperUserRequiredMixin<span class="token punctuation">,</span> generic<span class="token punctuation">.</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token keyword">def</span> <span class="token function">post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>is_superuser<span class="token punctuation">:</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token comment"># åˆ†ç»„,ä¸¤ä¸ªä¸€ç»„ï¼Œåˆ†åˆ«å‘é€é‚®ä»¶</span>        email_list <span class="token operator">=</span> <span class="token punctuation">[</span>email_list<span class="token punctuation">[</span>i<span class="token punctuation">:</span>i <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>email_list<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span>        switch_mail_flag <span class="token operator">=</span> Setting<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>switch_mail   <span class="token comment"># è·å–æ˜¯å¦å‘é€é‚®ä»¶æ ‡å¿—ä½</span>        <span class="token keyword">if</span> email_list<span class="token punctuation">:</span>            <span class="token keyword">for</span> to_list <span class="token keyword">in</span> email_list<span class="token punctuation">:</span>                <span class="token keyword">try</span><span class="token punctuation">:</span>                    <span class="token keyword">if</span> switch_mail_flag<span class="token punctuation">:</span>                        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"send email to %s"</span> <span class="token operator">%</span> to_list<span class="token punctuation">)</span>                        send_html_email<span class="token punctuation">(</span>subject<span class="token punctuation">,</span> html_message<span class="token punctuation">,</span> to_list<span class="token punctuation">)</span>                    <span class="token keyword">else</span><span class="token punctuation">:</span>                        <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"msg"</span><span class="token punctuation">:</span> <span class="token string">"é‚®ä»¶æœåŠ¡æœªå¼€å¯"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  <span class="token comment"># é€šçŸ¥å‰ç«¯æœåŠ¡æœªå¼€å¯</span>                <span class="token keyword">except</span> smtplib<span class="token punctuation">.</span>SMTPException <span class="token keyword">as</span> e<span class="token punctuation">:</span>                <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨å‘é€é‚®ä»¶å‰ï¼Œè·å–switch_mailè¿™ä¸ªå€¼ï¼Œæ ¹æ®å®ƒçš„å€¼å†³å®šæ˜¯å¦å‘é€é‚®ä»¶</p><p>å¦‚æœæœåŠ¡æœªå¼€å¯ï¼Œé€šçŸ¥å‰ç«¯</p>]]></content>
      
      
      <categories>
          
          <category> Djangoè§†é¢‘ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoè§†é¢‘ç½‘ç«™æ­å»º--step15æ•°æ®æ€»è§ˆåŠŸèƒ½</title>
      <link href="/post/django-shi-pin-wang-zhan-da-jian/step15-shu-ju-zong-lan-gong-neng/"/>
      <url>/post/django-shi-pin-wang-zhan-da-jian/step15-shu-ju-zong-lan-gong-neng/</url>
      
        <content type="html"><![CDATA[<p>#æ•°æ®æ€»è§ˆåŠŸèƒ½<br>æ•°æ®æ€»è§ˆåŠŸèƒ½ï¼Œæ˜¯å¯¹ç½‘ç«™ä¸­äº§ç”Ÿçš„æ•°æ®è¿›è¡Œä¸€ä¸ªç»Ÿè®¡ï¼Œç»Ÿè®¡å‡ºè§†é¢‘æ•°ã€å‘å¸ƒæ•°ã€ç”¨æˆ·æ•°ã€è¯„è®ºæ•°ï¼Œç­‰ç­‰ã€‚è®©ç®¡ç†è€…å¯¹ç½‘ç«™æ•°æ®æœ‰ä¸€ä¸ªæ¸…æ™°çš„è®¤è¯†ï¼Œåšåˆ°å¿ƒä¸­æœ‰æ•°ã€‚</p><p>åœ¨æœ¬ç«™ä¸­ï¼Œç¬”è€…ä¸€å…±åˆ—ä¸¾äº†ä¸‹é¢å‡ ç§æ•°æ®ï¼šè§†é¢‘æ•°ã€å‘å¸ƒä¸­<br>æœªå‘å¸ƒã€ç”¨æˆ·æ•°ã€ç”¨æˆ·æ–°å¢ã€è¯„è®ºæ•°ã€è¯„è®ºæ–°å¢ï¼Œç­‰å‡ é¡¹å†…å®¹ã€‚</p><p>æˆ‘ä»¬æŠŠæ‰€æœ‰çš„æ•°æ®éƒ½å°è£…åˆ°äº†ä¸€ä¸ªå‡½æ•°é‡Œé¢ï¼Œå³ IndexView å®ƒä½äºåå°ç®¡ç†çš„é¦–é¡µã€‚<br>##è·¯ç”±è®¾ç½®</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">path<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>IndexView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'index'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>##è§†å›¾è®¾ç½®<br>é€šè¿‡IndexViewå®ç°è§†å›¾ï¼ŒIndexViewä»£ç å¦‚ä¸‹</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">IndexView</span><span class="token punctuation">(</span>AdminUserRequiredMixin<span class="token punctuation">,</span> generic<span class="token punctuation">.</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">:</span>        video_count <span class="token operator">=</span> Video<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get_count<span class="token punctuation">(</span><span class="token punctuation">)</span>        video_has_published_count <span class="token operator">=</span> Video<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get_published_count<span class="token punctuation">(</span><span class="token punctuation">)</span>        video_not_published_count <span class="token operator">=</span> Video<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get_not_published_count<span class="token punctuation">(</span><span class="token punctuation">)</span>        user_count <span class="token operator">=</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span>        user_today_count <span class="token operator">=</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>exclude<span class="token punctuation">(</span>date_joined__lt<span class="token operator">=</span>datetime<span class="token punctuation">.</span>date<span class="token punctuation">.</span>today<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span>        comment_count <span class="token operator">=</span> Comment<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get_count<span class="token punctuation">(</span><span class="token punctuation">)</span>        comment_today_count <span class="token operator">=</span> Comment<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get_today_count<span class="token punctuation">(</span><span class="token punctuation">)</span>        data <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"video_count"</span><span class="token punctuation">:</span> video_count<span class="token punctuation">,</span>                <span class="token string">"video_has_published_count"</span><span class="token punctuation">:</span> video_has_published_count<span class="token punctuation">,</span>                <span class="token string">"video_not_published_count"</span><span class="token punctuation">:</span> video_not_published_count<span class="token punctuation">,</span>                <span class="token string">"user_count"</span><span class="token punctuation">:</span> user_count<span class="token punctuation">,</span>                <span class="token string">"user_today_count"</span><span class="token punctuation">:</span> user_today_count<span class="token punctuation">,</span>                <span class="token string">"comment_count"</span><span class="token punctuation">:</span> comment_count<span class="token punctuation">,</span>                <span class="token string">"comment_today_count"</span><span class="token punctuation">:</span> comment_today_count<span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> render<span class="token punctuation">(</span>self<span class="token punctuation">.</span>request<span class="token punctuation">,</span> <span class="token string">'myadmin/index.html'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸è§†é¢‘ç›¸å…³çš„ç»Ÿè®¡ï¼Œæˆ‘ä»¬å°è£…åˆ°äº†Videoçš„models.pyä¸‹é¢, ä¹‹å‰å·²ç»å†™å¥½äº†ï¼Œç°åœ¨æ¥è°ƒç”¨å®ƒ</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># video/models.py</span><span class="token keyword">class</span> <span class="token class-name">VideoQuerySet</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>query<span class="token punctuation">.</span>QuerySet<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># è§†é¢‘æ€»æ•°</span>    <span class="token keyword">def</span> <span class="token function">get_count</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># å‘å¸ƒæ•°</span>    <span class="token keyword">def</span> <span class="token function">get_published_count</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>status<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># æœªå‘å¸ƒæ•°</span>    <span class="token keyword">def</span> <span class="token function">get_not_published_count</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>status<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»¥ä¸Šæ•°æ®ï¼Œå¤§éƒ½ä½¿ç”¨äº†filterè¿‡æ»¤å™¨è¿›è¡Œäº†è¿‡æ»¤ï¼Œæœ€åé€šè¿‡count()å‡½æ•°è¿”å›ç»™ä¸šåŠ¡æ–¹ã€‚</p><p>ä¸ç”¨æˆ·ç›¸å…³çš„ç»Ÿè®¡ï¼Œæˆ‘ä»¬ç›´æ¥é€šè¿‡countå’Œexcludeå°†ç›¸å…³æ•°æ®è¿‡æ»¤å‡ºæ¥ã€‚</p><p>ä¸è¯„è®ºç›¸å…³çš„ç»Ÿè®¡ï¼Œå°è£…åˆ°äº†Commentçš„models.pyä¸‹é¢ï¼Œ</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">CommentQuerySet</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>query<span class="token punctuation">.</span>QuerySet<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># è¯„è®ºæ€»æ•°</span>    <span class="token keyword">def</span> <span class="token function">get_count</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># ä»Šæ—¥æ–°å¢</span>    <span class="token keyword">def</span> <span class="token function">get_today_count</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>exclude<span class="token punctuation">(</span>timestamp__lt<span class="token operator">=</span>datetime<span class="token punctuation">.</span>date<span class="token punctuation">.</span>today<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­ï¼Œä»Šæ—¥æ–°å¢è¯„è®ºï¼Œæˆ‘ä»¬é€šè¿‡excludeæ¥è¿‡æ»¤æ—¶é—´ï¼Œä½¿ç”¨äº† lt æ ‡ç­¾æ¥è¿‡æ»¤</p>]]></content>
      
      
      <categories>
          
          <category> Djangoè§†é¢‘ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoè§†é¢‘ç½‘ç«™æ­å»º--step14åå°åé¦ˆåŠŸèƒ½</title>
      <link href="/post/django-shi-pin-wang-zhan-da-jian/step14-hou-tai-fan-kui-gong-neng/"/>
      <url>/post/django-shi-pin-wang-zhan-da-jian/step14-hou-tai-fan-kui-gong-neng/</url>
      
        <content type="html"><![CDATA[<p>#åå¤©åé¦ˆåŠŸèƒ½<br>ç”¨æˆ·åé¦ˆç®¡ç†åŠŸèƒ½ï¼Œæ˜¯å¯¹å‰ç«¯ç”¨æˆ·åé¦ˆçš„é—®é¢˜è¿›è¡Œå±•ç¤ºï¼Œå¹¶å¯å®ç°åˆ é™¤åŠŸèƒ½ã€‚</p><p>å®ƒå¯ä»¥å®æ—¶çš„è·Ÿè¸ªåˆ°ç”¨æˆ·å¯¹ç½‘ç«™çš„å„ç§æ„è§å’Œåæ§½ï¼Œå¼€å‘è€…èƒ½åŠæ—¶ä¿®ç¼®ç½‘ç«™åŠŸèƒ½æˆ–è€…ä¿®æ”¹ç½‘ç«™bugã€‚</p><p>##è·¯ç”±è®¾ç½®<br>åé¦ˆç®¡ç†åŒ…æ‹¬åé¦ˆåˆ—è¡¨å’Œåé¦ˆåˆ é™¤ï¼Œå®ƒä»¬çš„è·¯ç”±æ˜¯</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">path<span class="token punctuation">(</span><span class="token string">'feedback_list/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>FeedbackListView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'feedback_list'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>path<span class="token punctuation">(</span><span class="token string">'feedback_delete/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>feedback_delete<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'feedback_delete'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>åˆ†åˆ«è¡¨ç¤ºåé¦ˆåˆ—è¡¨å’Œåé¦ˆåˆ é™¤åŠŸèƒ½ã€‚<br>ä¿®æ”¹myadmin/base.html</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>myadmin:feedback_list<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>feedback_list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç”¨æˆ·åé¦ˆ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>##è§†å›¾è®¾ç½®<br>åˆ—è¡¨æ˜¯ç”±FeedbackListViewè´Ÿè´£æ¥å±•ç¤ºï¼Œä»£ç å¦‚ä¸‹</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">FeedbackListView</span><span class="token punctuation">(</span>AdminUserRequiredMixin<span class="token punctuation">,</span> generic<span class="token punctuation">.</span>ListView<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> Feedback            <span class="token comment"># å¤ç”¨ä¹‹å‰userprofileä¸­å®šä¹‰çš„æ¨¡å‹</span>    template_name <span class="token operator">=</span> <span class="token string">'myadmin/feedback_list.html'</span>    context_object_name <span class="token operator">=</span> <span class="token string">'feedback_list'</span>    paginate_by <span class="token operator">=</span> <span class="token number">10</span>            <span class="token comment"># æ¯é¡µ10æ¡</span>    q <span class="token operator">=</span> <span class="token string">''</span>    <span class="token keyword">def</span> <span class="token function">get_context_data</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">,</span> object_list<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        context <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span>FeedbackListView<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>get_context_data<span class="token punctuation">(</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>        paginator <span class="token operator">=</span> context<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'paginator'</span><span class="token punctuation">)</span>        page <span class="token operator">=</span> context<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'page_obj'</span><span class="token punctuation">)</span>        page_list <span class="token operator">=</span> get_page_list<span class="token punctuation">(</span>paginator<span class="token punctuation">,</span> page<span class="token punctuation">)</span>        context<span class="token punctuation">[</span><span class="token string">'page_list'</span><span class="token punctuation">]</span> <span class="token operator">=</span> page_list        context<span class="token punctuation">[</span><span class="token string">'q'</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>q        <span class="token keyword">return</span> context    <span class="token keyword">def</span> <span class="token function">get_queryset</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>q <span class="token operator">=</span> self<span class="token punctuation">.</span>request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"q"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> Feedback<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>content__contains<span class="token operator">=</span>self<span class="token punctuation">.</span>q<span class="token punctuation">)</span><span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">'-timestamp'</span><span class="token punctuation">)</span> <span class="token comment"># æ ¹æ®å†…å®¹æŸ¥è¯¢æŒ‰æ—¶é—´æ’åº</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åŒæ ·æ˜¯ç»§æ‰¿è‡ªListViewé€šç”¨è§†å›¾ï¼ŒåŒæ ·æ˜¯é…ç½®äº†modelã€templateã€åˆ†é¡µã€‚</p><p>åœ¨get_context_data()å‡½æ•°ä¸­ï¼Œä¼ é€’äº†åˆ†é¡µæ•°æ®ï¼›åœ¨get_queryset()ä¸­ï¼Œä¼ é€’äº†æœç´¢æ•°æ®ã€‚</p><p>å½“ä½ åˆ é™¤ä¸€æ¡çš„æ—¶å€™ï¼Œä¼šè§¦å‘ç›¸åº”çš„ajaxä»£ç ï¼Œajaxä½äºstatic/js/myadmin/feedback_list.jsï¼Œ</p><p>ajaxæœ€ç»ˆçš„å¹•åé»‘æ‰‹æ˜¯feedback_deleteæ¥å£ï¼Œå®ƒä½äºmyadmin/views.pyï¼Œ</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token decorator annotation punctuation">@ajax_required</span><span class="token decorator annotation punctuation">@require_http_methods</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"POST"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">feedback_delete</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>     feedback_id <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">[</span><span class="token string">'feedback_id'</span><span class="token punctuation">]</span>    instance <span class="token operator">=</span> Feedback<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>feedback_id<span class="token punctuation">)</span>    instance<span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"msg"</span><span class="token punctuation">:</span> <span class="token string">"success"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è·å–åˆ° feedback å®ä¾‹åï¼Œé€šè¿‡instance.delete()åˆ é™¤</p><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><p>åé¦ˆå»ºè®®å±•ç¤ºé¡µé¢æœ‰ä¸ªå°bugï¼Œå­—æ•°è¿‡é•¿çš„æ—¶å€™ï¼Œæ˜¾ç¤ºæœ‰ç‚¹é—®é¢˜ï¼Œä¼šçœ‹ä¸åˆ°åé¢çš„åˆ é™¤æŒ‰é’®</p>]]></content>
      
      
      <categories>
          
          <category> Djangoè§†é¢‘ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoè§†é¢‘ç½‘ç«™æ­å»º--step13åå°è®¢é˜…æ¨é€åŠŸèƒ½</title>
      <link href="/post/django-shi-pin-wang-zhan-da-jian/step13-hou-tai-ding-yue-tui-song-gong-neng/"/>
      <url>/post/django-shi-pin-wang-zhan-da-jian/step13-hou-tai-ding-yue-tui-song-gong-neng/</url>
      
        <content type="html"><![CDATA[<p>#è®¢é˜…é‚®ä»¶æ¨é€åŠŸèƒ½<br>æœ¬è®²æˆ‘ä»¬ä¼šè®²åˆ°ä¸€äº›å…³äºå‘é‚®ä»¶çš„æŠ€æœ¯ã€‚</p><p>è®¢é˜…åŠŸèƒ½æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„åŠŸèƒ½ï¼Œå½“ç”¨æˆ·è®¢é˜…æŸä¸ªç½‘ç«™åï¼Œç½‘ç«™ä¼šé€šè¿‡åå°ç»™ç”¨æˆ·å‘é€ç½‘ç«™æœ€æ–°çš„ä¸€äº›åŠ¨å‘ï¼Œä¸€èˆ¬æ˜¯é€šè¿‡é‚®ä»¶æ¥å‘é€çš„ã€‚</p><p>å½“ä½ é˜…è¯»å®Œæœ¬èŠ‚å†…å®¹ï¼Œä¼šå¯¹å‘é‚®ä»¶çš„æµç¨‹æœ‰ä¸€ä¸ªå¤§æ¦‚çš„äº†è§£ã€‚</p><h2 id="é…ç½®ç›¸å…³å‚æ•°"><a href="#é…ç½®ç›¸å…³å‚æ•°" class="headerlink" title="é…ç½®ç›¸å…³å‚æ•°"></a>é…ç½®ç›¸å…³å‚æ•°</h2><p>å‘é€é‚®ä»¶æ˜¯éœ€è¦é…ç½®ç›¸å…³å‚æ•°çš„ï¼Œä¸”æ¯ä¸ªé‚®ä»¶æœåŠ¡å•†éƒ½æœ‰è‡ªå·±çš„é…ç½®å€¼ï¼Œç¬”è€…ä½¿ç”¨çš„æ˜¯163é‚®ç®±ï¼Œåœ¨settings.pyè¿½åŠ å¦‚ä¸‹é…ç½®</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">EMAIL_BACKEND <span class="token operator">=</span> <span class="token string">'django.core.mail.backends.smtp.EmailBackend'</span><span class="token comment"># é‚®ä»¶é…ç½®</span>EMAIL_USE_SSL <span class="token operator">=</span> <span class="token boolean">True</span>EMAIL_HOST <span class="token operator">=</span> <span class="token string">'smtp.163.com'</span>EMAIL_PORT <span class="token operator">=</span> <span class="token number">465</span>EMAIL_HOST_USER <span class="token operator">=</span> <span class="token string">''</span>        <span class="token comment"># 163é‚®ç®±å¯ç”¨</span>EMAIL_HOST_PASSWORD <span class="token operator">=</span> <span class="token string">''</span>    <span class="token comment"># é‚®ç®±å¯†ç </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸€å®šè¦è®°å¾—é…ç½® EMAIL_BACKENDï¼Œ å› ä¸ºdjangoé»˜è®¤é…ç½®çš„æ˜¯ä¸€ç§æ¨¡æ‹Ÿå‘é‚®ä»¶çš„ BackEnd ï¼Œå¹¶ä¸èƒ½ä½¿ç”¨ï¼Œæ•…è¦æ›¿æ¢ã€‚<br>###è·¯ç”±è®¾ç½®</p><p>æˆ‘ä»¬å…ˆæ¥å†™è®¢é˜…æ¨é€çš„è·¯ç”±ï¼Œ</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">path<span class="token punctuation">(</span><span class="token string">'subscribe/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>SubscribeView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'subscribe'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åŒæ—¶ä¿®æ”¹myadmin/base.htmlæ–‡ä»¶</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>myadmin:subscribe<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>subscribe<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è®¢é˜…é€šçŸ¥<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å°†è·¯ç”±è®¾ç½®ä¸º SubscribeView</p><h2 id="è§†å›¾è®¾ç½®"><a href="#è§†å›¾è®¾ç½®" class="headerlink" title="è§†å›¾è®¾ç½®"></a>è§†å›¾è®¾ç½®</h2><p> SubscribeView çš„ä»£ç </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># è®¢é˜…æ¨é€åŠŸèƒ½</span><span class="token keyword">class</span> <span class="token class-name">SubscribeView</span><span class="token punctuation">(</span>SuperUserRequiredMixin<span class="token punctuation">,</span> generic<span class="token punctuation">.</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">:</span>        video_list <span class="token operator">=</span> Video<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get_published_list<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">"myadmin/subscribe.html"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">'video_list'</span><span class="token punctuation">:</span> video_list<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>is_superuser<span class="token punctuation">:</span>            <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"msg"</span><span class="token punctuation">:</span> <span class="token string">"æ— æƒé™"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>        video_id <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">[</span><span class="token string">'video_id'</span><span class="token punctuation">]</span>        video <span class="token operator">=</span> Video<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>video_id<span class="token punctuation">)</span>      <span class="token comment"># é€šè¿‡ä¸»é”®è·å–åˆ°è§†é¢‘çš„å½“å‰å®ä¾‹</span>        subject <span class="token operator">=</span> video<span class="token punctuation">.</span>title        context <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">'video'</span><span class="token punctuation">:</span> video<span class="token punctuation">,</span> <span class="token string">'site_url'</span><span class="token punctuation">:</span> settings<span class="token punctuation">.</span>SITE_URL<span class="token punctuation">&#125;</span>                          <span class="token comment"># ä½¿ç”¨SITE_URLæ„å»ºç½‘å€</span>        html_message <span class="token operator">=</span> render_to_string<span class="token punctuation">(</span><span class="token string">'myadmin/mail_template.html'</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span>        email_list <span class="token operator">=</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>subscribe<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">.</span>values_list<span class="token punctuation">(</span><span class="token string">'email'</span><span class="token punctuation">,</span> flat<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment"># è·å–åˆ°æ‰€æœ‰è®¢é˜…ç”¨æˆ·çš„emailåœ°å€åˆ°email_list</span>        <span class="token comment"># åˆ†ç»„,ä¸¤ä¸ªä¸€ç»„ï¼Œåˆ†åˆ«å‘é€é‚®ä»¶</span>        email_list <span class="token operator">=</span> <span class="token punctuation">[</span>email_list<span class="token punctuation">[</span>i<span class="token punctuation">:</span>i <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>email_list<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span>        <span class="token keyword">if</span> email_list<span class="token punctuation">:</span>            <span class="token keyword">for</span> to_list <span class="token keyword">in</span> email_list<span class="token punctuation">:</span>                <span class="token keyword">try</span><span class="token punctuation">:</span>                    send_html_email<span class="token punctuation">(</span>subject<span class="token punctuation">,</span> html_message<span class="token punctuation">,</span> to_list<span class="token punctuation">)</span>                <span class="token keyword">except</span> smtplib<span class="token punctuation">.</span>SMTPException <span class="token keyword">as</span> e<span class="token punctuation">:</span>                    logger<span class="token punctuation">.</span>error<span class="token punctuation">(</span>e<span class="token punctuation">)</span>                    <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"msg"</span><span class="token punctuation">:</span> <span class="token string">"å‘é€å¤±è´¥"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"msg"</span><span class="token punctuation">:</span> <span class="token string">"success"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"msg"</span><span class="token punctuation">:</span> <span class="token string">"é‚®ä»¶åˆ—è¡¨ä¸ºç©º"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ˜¯ä¸€ä¸ªæ™®é€šçš„è§†å›¾ç±»ï¼ŒåŠŸèƒ½æ˜¯ç”±getå’Œpostå…±åŒæ¥å®Œæˆçš„ã€‚</p><p>getä¸­è®¾ç½®äº†è¦æ˜¾ç¤ºçš„æ¨¡æ¿æ–‡ä»¶myadmin/subscribe.html</p><p>å½“æˆ‘ä»¬è¦ç»™ç”¨æˆ·å‘é€é‚®ä»¶çš„æ—¶å€™ï¼Œéœ€è¦å…ˆé€‰æ‹©è¦æ¨é€çš„è§†é¢‘ã€‚ç„¶åç‚¹å‡»é€šçŸ¥è®¢é˜…ç”¨æˆ·ï¼Œå³å¯è§¦å‘ajaxå‘é€ä»£ç </p><p>ï¼Œajaxä»£ç ä½äºstatic/js/myadmin/send_mail.jsï¼Œé‡Œé¢æœ€ç»ˆè°ƒç”¨çš„æ˜¯SubscribeViewä¸­çš„postæ–¹æ³•ï¼Œ</p><p>postæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡ä¸»é”®è·å–åˆ°è§†é¢‘çš„å½“å‰å®ä¾‹ï¼Œå¹¶ä¸”è¿˜è·å–åˆ°æ‰€æœ‰è®¢é˜…ç”¨æˆ·çš„emailåœ°å€æ”¾åˆ°email_listä¸­ï¼Œ</p><p>æœ€åè°ƒç”¨send_html_emailå°†é‚®ä»¶å‘é€å‡ºå»ï¼Œsend_html_emailå°è£…åœ¨video_helpers.pyï¼Œå®ƒçš„å…·ä½“ä»£ç æ˜¯</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">send_html_email</span><span class="token punctuation">(</span>subject<span class="token punctuation">,</span> html_message<span class="token punctuation">,</span> to_list<span class="token punctuation">)</span><span class="token punctuation">:</span>    plain_message <span class="token operator">=</span> strip_tags<span class="token punctuation">(</span>html_message<span class="token punctuation">)</span>    from_email <span class="token operator">=</span> settings<span class="token punctuation">.</span>EMAIL_HOST_USER    send_mail<span class="token punctuation">(</span>subject<span class="token punctuation">,</span> plain_message<span class="token punctuation">,</span> from_email<span class="token punctuation">,</span> to_list<span class="token punctuation">,</span> html_message<span class="token operator">=</span>html_message<span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">send_email</span><span class="token punctuation">(</span>subject<span class="token punctuation">,</span> content<span class="token punctuation">,</span> to_list<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        message <span class="token operator">=</span> <span class="token punctuation">(</span>subject<span class="token punctuation">,</span> content<span class="token punctuation">,</span> settings<span class="token punctuation">.</span>EMAIL_HOST_USER<span class="token punctuation">,</span> to_list<span class="token punctuation">)</span>        send_mass_mail<span class="token punctuation">(</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">except</span> smtplib<span class="token punctuation">.</span>SMTPException <span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"--> send fail"</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"fail"</span><span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"--> send success"</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"success"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»ä»£ç å¯ä»¥çœ‹å‡ºï¼Œç¨‹åºæœ€ç»ˆè°ƒç”¨çš„æ˜¯djangoè‡ªå¸¦çš„ send_mass_mail å‡½æ•°ï¼Œè¯¥å‡½æ•°å°è£…äº†å‘é€é‚®ä»¶çš„ç»†èŠ‚ã€‚</p><p>å½“ç„¶è¿˜å¯ä»¥ä½¿ç”¨ send_mail å‡½æ•°ï¼Œsend_mailæ¯æ¬¡å‘é‚®ä»¶éƒ½ä¼šå»ºç«‹ä¸€ä¸ªè¿æ¥ï¼Œå‘å¤šå°é‚®ä»¶æ—¶å»ºç«‹å¤šä¸ªè¿æ¥ã€‚</p><p>è€Œ send_mass_mail æ˜¯å»ºç«‹å•ä¸ªè¿æ¥å‘é€å¤šå°é‚®ä»¶ï¼Œæ‰€ä»¥ä¸€æ¬¡æ€§å‘é€å¤šå°é‚®ä»¶æ—¶ send_mass_mail è¦ä¼˜äº send_mailã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Djangoè§†é¢‘ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoè§†é¢‘ç½‘ç«™æ­å»º--step12åå°ç”¨æˆ·ç®¡ç†åŠŸèƒ½</title>
      <link href="/post/django-shi-pin-wang-zhan-da-jian/step12-hou-tai-yong-hu-guan-li-gong-neng/"/>
      <url>/post/django-shi-pin-wang-zhan-da-jian/step12-hou-tai-yong-hu-guan-li-gong-neng/</url>
      
        <content type="html"><![CDATA[<p>#åå°ç”¨æˆ·ç®¡ç†åŠŸèƒ½<br>ç”¨æˆ·ç®¡ç†åŠŸèƒ½,è·Ÿå…¶ä»–åŠŸèƒ½ä¹Ÿç±»ä¼¼ï¼Œå¢åˆ æ”¹æŸ¥</p><p>##è·¯ç”±è®¾ç½®<br>å…ˆåœ¨urls.pyä¸‹æ·»åŠ ç›¸å…³çš„è·¯ç”±</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">path<span class="token punctuation">(</span><span class="token string">'user_add/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>UserAddView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'user_add'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>path<span class="token punctuation">(</span><span class="token string">'user_list/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>UserListView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'user_list'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>path<span class="token punctuation">(</span><span class="token string">'user_edit/&lt;int:pk>'</span><span class="token punctuation">,</span>views<span class="token punctuation">.</span>UserEditView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'user_edit'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>path<span class="token punctuation">(</span><span class="token string">'user_delete/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>user_delete<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'user_delete'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>#ç”¨æˆ·æ·»åŠ <br>æ·»åŠ ç”¨æˆ·å‰éœ€è¦åˆ›å»ºä¸€ä¸ªè¡¨å•æ¥å­˜è´®ç”¨æˆ·ç›¸å…³çš„æ•°æ®</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">UserAddForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>    username <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>min_length<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span>                               max_length<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span>                               error_messages<span class="token operator">=</span><span class="token punctuation">&#123;</span>                                   <span class="token string">'min_length'</span><span class="token punctuation">:</span> <span class="token string">'ç”¨æˆ·åä¸å°‘äº4ä¸ªå­—ç¬¦'</span><span class="token punctuation">,</span>                                   <span class="token string">'max_length'</span><span class="token punctuation">:</span> <span class="token string">'ç”¨æˆ·åä¸èƒ½å¤šäº30ä¸ªå­—ç¬¦'</span><span class="token punctuation">,</span>                                   <span class="token string">'required'</span><span class="token punctuation">:</span> <span class="token string">'ç”¨æˆ·åä¸èƒ½ä¸ºç©º'</span><span class="token punctuation">,</span>                               <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                               widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>TextInput<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'placeholder'</span><span class="token punctuation">:</span> <span class="token string">'è¯·è¾“å…¥ç”¨æˆ·å'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    password <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>min_length<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span>                               max_length<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span>                               error_messages<span class="token operator">=</span><span class="token punctuation">&#123;</span>                                   <span class="token string">'min_length'</span><span class="token punctuation">:</span> <span class="token string">'å¯†ç ä¸å°‘äº4ä¸ªå­—ç¬¦'</span><span class="token punctuation">,</span>                                   <span class="token string">'max_length'</span><span class="token punctuation">:</span> <span class="token string">'å¯†ç ä¸èƒ½å¤šäº30ä¸ªå­—ç¬¦'</span><span class="token punctuation">,</span>                                   <span class="token string">'required'</span><span class="token punctuation">:</span> <span class="token string">'å¯†ç ä¸èƒ½ä¸ºç©º'</span><span class="token punctuation">,</span>                               <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                               widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>PasswordInput<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'placeholder'</span><span class="token punctuation">:</span> <span class="token string">'è¯·è¾“å…¥å¯†ç '</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        model <span class="token operator">=</span> User        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'username'</span><span class="token punctuation">,</span> <span class="token string">'password'</span><span class="token punctuation">,</span> <span class="token string">'is_staff'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸»è¦æ˜¯ç”¨æˆ·åå’Œå¯†ç ï¼Œis_staffå…ƒç´ <br>ç”¨æˆ·æ·»åŠ çš„è§†å›¾ç±»æ˜¯UserAddView</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">UserAddView</span><span class="token punctuation">(</span>SuperUserRequiredMixin<span class="token punctuation">,</span> generic<span class="token punctuation">.</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">:</span>        form <span class="token operator">=</span> UserAddForm<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> render<span class="token punctuation">(</span>self<span class="token punctuation">.</span>request<span class="token punctuation">,</span> <span class="token string">'myadmin/user_add.html'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">'form'</span><span class="token punctuation">:</span> form<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">:</span>        form <span class="token operator">=</span> UserAddForm<span class="token punctuation">(</span>data<span class="token operator">=</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">)</span>        <span class="token keyword">if</span> form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            user <span class="token operator">=</span> form<span class="token punctuation">.</span>save<span class="token punctuation">(</span>commit<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>            password <span class="token operator">=</span> form<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'password'</span><span class="token punctuation">)</span>            user<span class="token punctuation">.</span>set_password<span class="token punctuation">(</span>password<span class="token punctuation">)</span>            user<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> render<span class="token punctuation">(</span>self<span class="token punctuation">.</span>request<span class="token punctuation">,</span> <span class="token string">'myadmin/user_add_success.html'</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> render<span class="token punctuation">(</span>self<span class="token punctuation">.</span>request<span class="token punctuation">,</span> <span class="token string">'myadmin/user_add.html'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">'form'</span><span class="token punctuation">:</span> form<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ˜¯ä¸€ä¸ªæ™®é€šçš„è§†å›¾ç±»ï¼Œé€šè¿‡get()å’Œpost()æ¥å®Œæˆç”¨æˆ·æ·»åŠ çš„åŠŸèƒ½ï¼Œgeté‡Œé¢è´Ÿè´£é¡µé¢çš„å±•ç¤ºï¼Œposté‡Œé¢è´Ÿè´£é€»è¾‘å¤„ç†ã€‚</p><p>åœ¨getä¸­ï¼Œåˆå§‹åŒ–formä¸ºUserAddFormï¼Œå› ä¸ºæ·»åŠ çš„ç”¨æˆ·æ˜¯æœ‰ç±»åˆ«çš„ï¼Œæ‰€ä»¥åœ¨UserAddFormä¸­åº”ç”¨äº†is_staffå­—æ®µæ¥è¡¨ç¤ºç®¡ç†å‘˜ã€‚</p><p>åœ¨postä¸­ï¼Œæˆ‘ä»¬é€šè¿‡user.set_password(password)æ¥è®¾ç½®æ–°å¯†ç ã€‚user.save()æ¥ä¿å­˜è®°å½•åˆ°æ•°æ®åº“ã€‚</p><p>ä¿å­˜æˆåŠŸåä¼šè·³è½¬åˆ°myadmin/user_add_success.htmlé¡µé¢ã€‚</p><p>##ç”¨æˆ·åˆ—è¡¨</p><p>ç”¨æˆ·æ·»åŠ æˆåŠŸåï¼Œå½“ä½ ç‚¹å‡»ç”¨æˆ·åˆ—è¡¨ï¼Œå³å¯çœ‹åˆ°ç”¨æˆ·åˆ—è¡¨æ•°æ®ã€‚</p><p>ä½¿ç”¨çš„æ˜¯UserListViewè§†å›¾ç±»ï¼Œè¯¥ç±»æ˜¯ç»§æ‰¿è‡ªListViewé€šç”¨è§†å›¾ç±»çš„ã€‚å› æ­¤ åªéœ€è¦æˆ‘ä»¬æ·»åŠ å®ç°åˆ—è¡¨åŠŸèƒ½ã€‚UserListViewä»£ç å¦‚ä¸‹</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">UserListView</span><span class="token punctuation">(</span>AdminUserRequiredMixin<span class="token punctuation">,</span> generic<span class="token punctuation">.</span>ListView<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> User    template_name <span class="token operator">=</span> <span class="token string">'myadmin/user_list.html'</span>    context_object_name <span class="token operator">=</span> <span class="token string">'user_list'</span>    paginate_by <span class="token operator">=</span> <span class="token number">10</span>    q <span class="token operator">=</span> <span class="token string">''</span>    <span class="token keyword">def</span> <span class="token function">get_context_data</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">,</span> object_list<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        context <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span>UserListView<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>get_context_data<span class="token punctuation">(</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>        paginator <span class="token operator">=</span> context<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'paginator'</span><span class="token punctuation">)</span>        page <span class="token operator">=</span> context<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'page_obj'</span><span class="token punctuation">)</span>        page_list <span class="token operator">=</span> get_page_list<span class="token punctuation">(</span>paginator<span class="token punctuation">,</span> page<span class="token punctuation">)</span>        context<span class="token punctuation">[</span><span class="token string">'page_list'</span><span class="token punctuation">]</span> <span class="token operator">=</span> page_list        context<span class="token punctuation">[</span><span class="token string">'q'</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>q        <span class="token keyword">return</span> context    <span class="token keyword">def</span> <span class="token function">get_queryset</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>q <span class="token operator">=</span> self<span class="token punctuation">.</span>request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"q"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>username__contains<span class="token operator">=</span>self<span class="token punctuation">.</span>q<span class="token punctuation">)</span><span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">'-date_joined'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è·Ÿä¹‹å‰ä¸€æ ·ï¼Œé€šè¿‡ListViewå±•ç°æ•°æ®ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ListViewæ˜¯æœ‰å¤šä¸ªå›è°ƒå‡½æ•°çš„ï¼Œè¿™é‡Œå°±æ˜¯é€šè¿‡get_context_data()å’Œget_queryset()å›è°ƒå‡½æ•°æ¥å®ç°åˆ—è¡¨ä¸­çš„åŠŸèƒ½çš„ã€‚</p><p>åœ¨get_context_data()ä¸­å®ç°äº†åˆ—è¡¨åˆ†é¡µåŠŸèƒ½ï¼Œåœ¨get_queryset()ä¸­å®ç°äº†æœç´¢åŠŸèƒ½ã€‚</p><p>##ç”¨æˆ·ç¼–è¾‘<br>å½“ä½ ç‚¹å‡»ç¼–è¾‘æŒ‰é’®çš„æ—¶å€™ï¼Œå³å¯è¿›å…¥ç¼–è¾‘é¡µé¢ã€‚<br>ç¼–è¾‘é¡µé¢ä¹Ÿéœ€è¦åˆ›å»ºä¸€ä¸ªè¡¨å•æ¥å­˜è´®å®ƒçš„æ•°æ®</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">username_validate</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> value <span class="token operator">==</span> <span class="token string">"admin"</span><span class="token punctuation">:</span>        <span class="token keyword">raise</span> ValidationError<span class="token punctuation">(</span><span class="token string">'ä¸èƒ½ç¼–è¾‘è¶…çº§ç®¡ç†å‘˜'</span><span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">UserEditForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>    username <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>min_length<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span>                               max_length<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span>                               required<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>                               validators<span class="token operator">=</span><span class="token punctuation">[</span>username_validate<span class="token punctuation">]</span><span class="token punctuation">,</span>                               error_messages<span class="token operator">=</span><span class="token punctuation">&#123;</span>                                  <span class="token string">'min_length'</span><span class="token punctuation">:</span> <span class="token string">'è‡³å°‘4ä¸ªå­—ç¬¦'</span><span class="token punctuation">,</span>                                  <span class="token string">'max_length'</span><span class="token punctuation">:</span> <span class="token string">'ä¸èƒ½å¤šäº30ä¸ªå­—ç¬¦'</span><span class="token punctuation">,</span>                                  <span class="token string">'required'</span><span class="token punctuation">:</span> <span class="token string">'ç”¨æˆ·åä¸èƒ½ä¸ºç©º'</span>                               <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                               widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>TextInput<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'placeholder'</span><span class="token punctuation">:</span> <span class="token string">'è¯·è¾“å…¥ç”¨æˆ·å'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        model <span class="token operator">=</span> User        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'username'</span><span class="token punctuation">,</span> <span class="token string">'is_staff'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹åº”çš„è§†å›¾è®¾ç½®å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">UserEditView</span><span class="token punctuation">(</span>SuperUserRequiredMixin<span class="token punctuation">,</span> generic<span class="token punctuation">.</span>UpdateView<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> User    form_class <span class="token operator">=</span> UserEditForm    template_name <span class="token operator">=</span> <span class="token string">'myadmin/user_edit.html'</span>    <span class="token keyword">def</span> <span class="token function">get_success_url</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        messages<span class="token punctuation">.</span>success<span class="token punctuation">(</span>self<span class="token punctuation">.</span>request<span class="token punctuation">,</span> <span class="token string">"ä¿å­˜æˆåŠŸ"</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> reverse<span class="token punctuation">(</span><span class="token string">'myadmin:user_edit'</span><span class="token punctuation">,</span> kwargs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'pk'</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>kwargs<span class="token punctuation">[</span><span class="token string">'pk'</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åŒæ ·æ˜¯ç»§æ‰¿è‡ªUpdateViewï¼Œä»…éœ€è¦é…ç½®å¥½modelã€form_classã€template_nameå³å¯</p><p>##ç”¨æˆ·åˆ é™¤</p><p>å½“ä½ ç‚¹å‡»åˆ é™¤æŒ‰é’®çš„æ—¶å€™ï¼Œä¼šå¼¹å‡ºç¡®è®¤æ¡†è®©ä½ åˆ é™¤ã€‚ç„¶åç½‘ç«™é€šè¿‡ajaxè°ƒç”¨user_deleteæ¥å®ç°çœŸæ­£çš„åˆ é™¤æ“ä½œï¼Œå…¶ä¸­ï¼Œajaxä»£ç ä½äºstatic/js/myadmin/user_list.js</p><p>çœŸæ­£çš„åˆ é™¤å‡½æ•°æ˜¯user_deleteï¼Œä¸‹é¢æ˜¯å®ƒçš„çœŸé¢ç›®</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token decorator annotation punctuation">@ajax_required</span><span class="token decorator annotation punctuation">@require_http_methods</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"POST"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">user_delete</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>     user_id <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">[</span><span class="token string">'user_id'</span><span class="token punctuation">]</span>    instance <span class="token operator">=</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>user_id<span class="token punctuation">)</span>     instance<span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"msg"</span><span class="token punctuation">:</span> <span class="token string">"success"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é¦–å…ˆè·å–åˆ°å½“å‰ç”¨æˆ·çš„å®ä¾‹ï¼Œç„¶åé€šè¿‡ instance.delete()åˆ é™¤.</p><p>##å‰ç«¯é¡µé¢<br>ç…§ä¾‹éœ€è¦ä¿®æ”¹base.htmlæ–‡ä»¶</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>myadmin:user_list<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user_list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç”¨æˆ·åˆ—è¡¨<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>myadmin:user_add<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user_add<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ·»åŠ ç”¨æˆ·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å…¶ä»–éœ€è¦æ·»åŠ çš„æ–‡ä»¶å¦‚ä¸‹</p><pre class="line-numbers language-none"><code class="language-none">æ–°æ–‡ä»¶ï¼š   static&#x2F;js&#x2F;myadmin&#x2F;user_list.jsä¿®æ”¹ï¼š     templates&#x2F;myadmin&#x2F;base.htmlæ–°æ–‡ä»¶ï¼š   templates&#x2F;myadmin&#x2F;user_add.htmlæ–°æ–‡ä»¶ï¼š   templates&#x2F;myadmin&#x2F;user_add_success.htmlæ–°æ–‡ä»¶ï¼š   templates&#x2F;myadmin&#x2F;user_edit.htmlæ–°æ–‡ä»¶ï¼š   templates&#x2F;myadmin&#x2F;user_list.htmlæ–°æ–‡ä»¶ï¼š   templates&#x2F;myadmin&#x2F;user_list_modal.html<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Djangoè§†é¢‘ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoè§†é¢‘ç½‘ç«™æ­å»º--step11åå°è¯„è®ºåŠŸèƒ½</title>
      <link href="/post/django-shi-pin-wang-zhan-da-jian/step11-hou-tai-ping-lun-gong-neng/"/>
      <url>/post/django-shi-pin-wang-zhan-da-jian/step11-hou-tai-ping-lun-gong-neng/</url>
      
        <content type="html"><![CDATA[<p>#åå°è¯„è®ºåŠŸèƒ½<br>æœ¬è®²ä¸­æ¥è®²è¯„è®ºç®¡ç†åŠŸèƒ½ï¼Œæ•°æ®åº“ä¸­çš„æ¯ä¸€æ¡æ˜¯æ¥è‡ªç”¨æˆ·çš„è¯„ä»·ï¼Œ</p><p>å› æ­¤åå°ä¸­çš„è¯„è®ºç®¡ç†åªæœ‰è¯„è®ºåˆ—è¡¨å’Œè¯„è®ºåˆ é™¤åŠŸèƒ½ï¼Œæ²¡æœ‰å¢åŠ è¯„è®ºå’Œç¼–è¾‘è¯„è®ºã€‚<br>##è·¯ç”±è®¾ç½®<br>ç…§ä¾‹æˆ‘ä»¬å…ˆæ·»åŠ è¯„è®ºç®¡ç†çš„ç›¸å…³è·¯ç”±</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># myadmin/urls.py</span>    <span class="token comment"># ----------------------è¯„è®ºç®¡ç†----------------------------</span>    path<span class="token punctuation">(</span><span class="token string">'comment_list/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>CommentListView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'comment_list'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    path<span class="token punctuation">(</span><span class="token string">'comment_delete/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>comment_delete<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'comment_delete'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>åªæ·»åŠ åˆ—è¡¨å’Œåˆ é™¤åŠŸèƒ½<br>##è§†å›¾è®¾ç½®<br>é¦–å…ˆæ˜¯è¯„è®ºåˆ—è¡¨çš„å±•ç¤ºï¼Œæˆ‘ä»¬é€šè¿‡CommentListViewè§†å›¾ç±»æ¥å®ç°ï¼Œè¯¥ç±»ä¾ç„¶æ˜¯ç»§æ‰¿ListViewæ¥å®ç°çš„ã€‚ä»£ç å¦‚ä¸‹</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">CommentListView</span><span class="token punctuation">(</span>AdminUserRequiredMixin<span class="token punctuation">,</span> generic<span class="token punctuation">.</span>ListView<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> Comment    template_name <span class="token operator">=</span> <span class="token string">'myadmin/comment_list.html'</span>    context_object_name <span class="token operator">=</span> <span class="token string">'comment_list'</span>    paginate_by <span class="token operator">=</span> <span class="token number">10</span>    q <span class="token operator">=</span> <span class="token string">''</span>    <span class="token keyword">def</span> <span class="token function">get_context_data</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">,</span> object_list<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        context <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span>CommentListView<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>get_context_data<span class="token punctuation">(</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>        paginator <span class="token operator">=</span> context<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'paginator'</span><span class="token punctuation">)</span>        page <span class="token operator">=</span> context<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'page_obj'</span><span class="token punctuation">)</span>        page_list <span class="token operator">=</span> get_page_list<span class="token punctuation">(</span>paginator<span class="token punctuation">,</span> page<span class="token punctuation">)</span>        context<span class="token punctuation">[</span><span class="token string">'page_list'</span><span class="token punctuation">]</span> <span class="token operator">=</span> page_list        context<span class="token punctuation">[</span><span class="token string">'q'</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>q        <span class="token keyword">return</span> context    <span class="token keyword">def</span> <span class="token function">get_queryset</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>q <span class="token operator">=</span> self<span class="token punctuation">.</span>request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"q"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> Comment<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>content__contains<span class="token operator">=</span>self<span class="token punctuation">.</span>q<span class="token punctuation">)</span><span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">'-timestamp'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é€šè¿‡ç»§æ‰¿ListViewæ¥å®ç°è¯„è®ºåˆ—è¡¨çš„å±•ç¤ºï¼Œé€šè¿‡get_context_data()æ¥å®ç°åˆ†é¡µåŠŸèƒ½ï¼Œé€šè¿‡get_queryset()æ¥å®ç°æœç´¢åŠŸèƒ½ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬ç»§ç»­å®ç°åˆ é™¤åŠŸèƒ½ï¼Œè¯¥åŠŸèƒ½æ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦é€šè¿‡ajaxå°†video_idä¼ ç»™åˆ é™¤æ¥å£å³å¯ï¼Œ</p><p>ajaxçš„ä»£ç ä½äºstatic/js/myadmin/comment_list.jsï¼Œ</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// å†™å…¥csrf</span>$<span class="token punctuation">.</span><span class="token function">getScript</span><span class="token punctuation">(</span><span class="token string">"/static/js/csrftoken.js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.comment-delete'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      <span class="token keyword">var</span> tr <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">"tr"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">var</span> comment_id <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>tr<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"comment-id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.ui.tiny.modal.delete'</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">modal</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>          closable  <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token function-variable function">onDeny</span>    <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>          <span class="token function-variable function">onApprove</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>                url<span class="token operator">:</span> api_comment_delete<span class="token punctuation">,</span>                data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>                    <span class="token string">'comment_id'</span><span class="token operator">:</span>comment_id<span class="token punctuation">,</span>                    <span class="token string">'csrf_token'</span><span class="token operator">:</span> csrftoken                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                type<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>                dataType<span class="token operator">:</span> <span class="token string">'json'</span><span class="token punctuation">,</span>                <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token keyword">var</span> code <span class="token operator">=</span> data<span class="token punctuation">.</span>code                     <span class="token keyword">var</span> msg <span class="token operator">=</span> data<span class="token punctuation">.</span>msg                     <span class="token keyword">if</span><span class="token punctuation">(</span>code <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                        window<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>                        <span class="token function">alert</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token operator">+</span>data<span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">modal</span><span class="token punctuation">(</span><span class="token string">'show'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ é™¤è¯„è®ºçš„æ¥å£æ˜¯api_comment_deleteï¼Œæœ€ç»ˆä¼šè°ƒç”¨åˆ°comment_deleteï¼Œä»£ç å¦‚ä¸‹</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token decorator annotation punctuation">@ajax_required</span><span class="token decorator annotation punctuation">@require_http_methods</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"POST"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">comment_delete</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>     comment_id <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">[</span><span class="token string">'comment_id'</span><span class="token punctuation">]</span>    instance <span class="token operator">=</span> Comment<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>comment_id<span class="token punctuation">)</span>    instance<span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"msg"</span><span class="token punctuation">:</span> <span class="token string">"success"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é€»è¾‘è¿˜ç®—æ¸…æ™°ï¼Œå³å…ˆæ‹¿åˆ°è¯„è®ºçš„idï¼Œç„¶åè·å–åˆ°è¯¥æ¡è¯„è®ºï¼Œæœ€åinstance.delete()åˆ é™¤</p><p>##å‰ç«¯è®¾ç½®<br>å…ˆçœ‹ä¸€ä¸‹éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶</p><pre class="line-numbers language-none"><code class="language-none">ä¿®æ”¹ï¼š     templates&#x2F;myadmin&#x2F;base.htmlæ–°æ–‡ä»¶ï¼š   templates&#x2F;myadmin&#x2F;comment_list.htmlæ–°æ–‡ä»¶ï¼š   templates&#x2F;myadmin&#x2F;comment_list_modal.html<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­base.htmlæ–‡ä»¶éœ€è¦å°†è¯„è®ºåœ°å€æ·»åŠ è¿›å»,å®ç°è·³è½¬</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>myadmin:comment_list<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment_list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¯„è®ºåˆ—è¡¨<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>comment_list.htmlæ–‡ä»¶ä¸ºæ–°æ·»åŠ çš„æ–‡ä»¶ï¼Œå¤§ä½“å¸ƒå±€è·Ÿvideo_list.htmlç±»ä¼¼</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">&#123;% extends 'myadmin/base.html' %&#125;&#123;% load static %&#125;&#123;% load video_tag %&#125;&#123;% block content %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui grid<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui header six wide column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¯„è®ºåˆ—è¡¨<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>v-title-extra ten wide column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui action input v-admin-search<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Search...<span class="token punctuation">"</span></span>  <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;q&#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>v-search<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui small button<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>search<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æœç´¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui divider<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui unstackable single line striped selectable table<span class="token punctuation">"</span></span>  <span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thead</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>#id<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>ç”¨æˆ·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>æ˜µç§°<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>è§†é¢‘åå­—<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>è¯„è®ºå†…å®¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>è¯„è®ºæ—¶é—´<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>æ“ä½œ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thead</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video-list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            &#123;% for item in comment_list %&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">comment-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;item.id&#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span> &#123;&#123;item.user_id&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span> &#123;&#123;item.user.username&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span> &#123;&#123;item.nickname&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span> &#123;&#123;item.video.title&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span> &#123;&#123; item.content | comment_slice &#125;&#125; <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span> &#123;&#123;item.timestamp|date:'Y-m-d H:i'&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui button comment-delete<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>åˆ é™¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>            &#123;% empty %&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>æš‚æ—¶æ²¡æœ‰è¯„è®º<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>            &#123;% endfor %&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tfoot</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">colspan</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>6<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    &#123;% include 'myadmin/page_nav.html' %&#125;                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tfoot</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>&#123;% endblock content %&#125;&#123;% block modal %&#125;&#123;% include "myadmin/comment_list_modal.html" %&#125;&#123;% endblock modal %&#125;&#123;% block script %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token keyword">var</span> search_url <span class="token operator">=</span> <span class="token string">"&#123;% url 'myadmin:comment_list' %&#125;"</span>    <span class="token keyword">var</span> api_comment_delete <span class="token operator">=</span> <span class="token string">"&#123;% url 'myadmin:comment_delete' %&#125;"</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>js/myadmin/comment_list.js<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>&#123;% endblock script %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å°åŠŸèƒ½ï¼Œå®ƒè°ƒç”¨äº†è‡ªå®šä¹‰æ ‡ç­¾ video_tagï¼Œä½¿ç”¨è¿™ä¸ªé‡Œé¢çš„å‡½æ•°æ—¶éœ€è¦çš„æ—¶å€™éœ€è¦æå‰æ³¨å†Œ<br>åœ¨è®¾ç½®ä¸­æ·»åŠ libraries</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># videoproject/settings.py</span>TEMPLATES <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>         <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token string">'OPTIONS'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>            <span class="token string">'context_processors'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>            <span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token string">'libraries'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>                <span class="token string">'my_customs_tag'</span><span class="token punctuation">:</span> <span class="token string">'video.templatetags.video_tag'</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è‡ªå®šä¹‰çš„æ ‡ç­¾æ–‡ä»¶ï¼Œå…ˆæ³¨å†Œï¼Œç„¶åæ·»åŠ è‡ªå·±æƒ³ç”¨çš„å‡½æ•°.</p><p>è¿™é‡Œä»…ä»…æ˜¯æ·»åŠ ä¸€ä¸ªå‡½æ•°ï¼Œå¤„ç†è¯„è®ºåœ¨é¡µé¢æ˜¾ç¤ºè¿‡é•¿çš„é—®é¢˜, è¶…è¿‡50ä¸ªå­—ç›´æ¥æˆªæ–­</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> django <span class="token keyword">import</span> templateregister <span class="token operator">=</span> template<span class="token punctuation">.</span>Library<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># åˆ†è¯</span><span class="token decorator annotation punctuation">@register<span class="token punctuation">.</span>filter</span><span class="token keyword">def</span> <span class="token function">comment_slice</span><span class="token punctuation">(</span>comment<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">return</span> comment<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">'...'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Djangoè§†é¢‘ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoè§†é¢‘ç½‘ç«™æ­å»º--step10åå°è§†é¢‘åˆ†ç±»åŠŸèƒ½</title>
      <link href="/post/django-shi-pin-wang-zhan-da-jian/step10-hou-tai-shi-pin-fen-lei-gong-neng/"/>
      <url>/post/django-shi-pin-wang-zhan-da-jian/step10-hou-tai-shi-pin-fen-lei-gong-neng/</url>
      
        <content type="html"><![CDATA[<p>#è§†é¢‘åˆ†ç±»<br>è§†é¢‘åˆ†ç±»çš„åŠŸèƒ½ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å†…å®¹</p><ul><li>åˆ†ç±»åˆ—è¡¨</li><li>æ·»åŠ åˆ†ç±»</li><li>ä¿®æ”¹åˆ†ç±»</li><li>åˆ é™¤åˆ†ç±»</li></ul><p>åˆ†ç±»ç®¡ç†åŠŸèƒ½åŒ…æ‹¬åˆ†ç±»çš„å¢åˆ æ”¹æŸ¥ã€‚<br>###è·¯ç”±è®¾ç½®<br>å¢åˆ æ”¹æŸ¥çš„è·¯ç”±æ˜¯</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">path<span class="token punctuation">(</span><span class="token string">'classification_add/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>ClassificationAddView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'classification_add'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>path<span class="token punctuation">(</span><span class="token string">'classification_list/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>ClassificationListView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'classification_list'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>path<span class="token punctuation">(</span><span class="token string">'classification_edit/&lt;int:pk>/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>ClassificationEditView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'classification_edit'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>path<span class="token punctuation">(</span><span class="token string">'classification_delete/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>classification_delete<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'classification_delete'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>###æ·»åŠ åˆ†ç±»<br>å…ˆæ¥çœ‹åˆ†ç±»æ·»åŠ çš„åŠŸèƒ½</p><p>åˆ†ç±»æ·»åŠ æ˜¯é€šè¿‡ClassificationAddViewè§†å›¾ç±»æ¥å®ç°çš„ï¼Œä»£ç å¦‚ä¸‹</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">ClassificationAddView</span><span class="token punctuation">(</span>SuperUserRequiredMixin<span class="token punctuation">,</span> generic<span class="token punctuation">.</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">:</span>        form <span class="token operator">=</span> ClassificationAddForm<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> render<span class="token punctuation">(</span>self<span class="token punctuation">.</span>request<span class="token punctuation">,</span> <span class="token string">'myadmin/classification_add.html'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">'form'</span><span class="token punctuation">:</span> form<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">:</span>        form <span class="token operator">=</span> ClassificationAddForm<span class="token punctuation">(</span>data<span class="token operator">=</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">)</span>        <span class="token keyword">if</span> form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            form<span class="token punctuation">.</span>save<span class="token punctuation">(</span>commit<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> render<span class="token punctuation">(</span>self<span class="token punctuation">.</span>request<span class="token punctuation">,</span> <span class="token string">'myadmin/classification_add_success.html'</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> render<span class="token punctuation">(</span>self<span class="token punctuation">.</span>request<span class="token punctuation">,</span> <span class="token string">'myadmin/classification_add.html'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">'form'</span><span class="token punctuation">:</span> form<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ­¤å¤„æ˜¯é€šè¿‡getå’Œpostä¸€åŒæ¥å®ç°çš„ï¼Œget()è´Ÿè´£å±•ç¤ºç•Œé¢ï¼Œpost()è´Ÿè´£é€»è¾‘åˆ¤æ–­ã€‚</p><p>åœ¨post()ä¸­ï¼Œç›´æ¥è°ƒç”¨form.saveæ¥ä¿å­˜è®°å½•ï¼Œç„¶åè·³è½¬åˆ°æˆåŠŸé¡µmyadmin/classification_add_success.htmlã€‚<br>###æŸ¥çœ‹åˆ†ç±»åˆ—è¡¨<br>ç„¶åç‚¹å‡»è§†é¢‘åˆ—è¡¨ï¼Œå³å¯æŸ¥çœ‹åˆ—è¡¨ï¼Œè§†é¢‘åˆ—è¡¨çš„è§†å›¾ç±»æ˜¯ClassificationListViewï¼Œå³</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">ClassificationListView</span><span class="token punctuation">(</span>AdminUserRequiredMixin<span class="token punctuation">,</span> generic<span class="token punctuation">.</span>ListView<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> Classification    template_name <span class="token operator">=</span> <span class="token string">'myadmin/classification_list.html'</span>    context_object_name <span class="token operator">=</span> <span class="token string">'classification_list'</span>    paginate_by <span class="token operator">=</span> <span class="token number">10</span>    q <span class="token operator">=</span> <span class="token string">''</span>    <span class="token keyword">def</span> <span class="token function">get_context_data</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">,</span> object_list<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        context <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span>ClassificationListView<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>get_context_data<span class="token punctuation">(</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>        paginator <span class="token operator">=</span> context<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'paginator'</span><span class="token punctuation">)</span>        page <span class="token operator">=</span> context<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'page_obj'</span><span class="token punctuation">)</span>        page_list <span class="token operator">=</span> get_page_list<span class="token punctuation">(</span>paginator<span class="token punctuation">,</span> page<span class="token punctuation">)</span>        context<span class="token punctuation">[</span><span class="token string">'page_list'</span><span class="token punctuation">]</span> <span class="token operator">=</span> page_list        context<span class="token punctuation">[</span><span class="token string">'q'</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>q        <span class="token keyword">return</span> context    <span class="token keyword">def</span> <span class="token function">get_queryset</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>q <span class="token operator">=</span> self<span class="token punctuation">.</span>request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"q"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> Classification<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>title__contains<span class="token operator">=</span>self<span class="token punctuation">.</span>q<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç»§æ‰¿ListViewæ¥æ˜¾ç¤ºåˆ—è¡¨ï¼Œé€šè¿‡get_queryset()æ¥å®ç°æœç´¢åŠŸèƒ½ï¼Œé€šè¿‡get_context_data()æ¥å®ç°åˆ†é¡µåŠŸèƒ½ï¼Œé€šè¿‡template_nameæ¥æŒ‡å®šæ¨¡æ¿</p><p>æ¥ç€æ¥å®ç°ç¼–è¾‘å’Œåˆ é™¤åŠŸèƒ½ã€‚</p><p>ç¼–è¾‘å¯¹åº”çš„è§†å›¾ç±»æ˜¯ClassificationEditViewï¼Œå®ƒçš„å®ç°è¶…çº§ç®€å•ï¼Œç»§æ‰¿UpdateViewå³å¯ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">ClassificationEditView</span><span class="token punctuation">(</span>SuperUserRequiredMixin<span class="token punctuation">,</span> generic<span class="token punctuation">.</span>UpdateView<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> Classification    form_class <span class="token operator">=</span> ClassificationEditForm    template_name <span class="token operator">=</span> <span class="token string">'myadmin/classification_edit.html'</span>    <span class="token keyword">def</span> <span class="token function">get_success_url</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        messages<span class="token punctuation">.</span>success<span class="token punctuation">(</span>self<span class="token punctuation">.</span>request<span class="token punctuation">,</span> <span class="token string">"ä¿å­˜æˆåŠŸ"</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> reverse<span class="token punctuation">(</span><span class="token string">'myadmin:classification_edit'</span><span class="token punctuation">,</span> kwargs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'pk'</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>kwargs<span class="token punctuation">[</span><span class="token string">'pk'</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¼–è¾‘é¡µé¢å’Œæ·»åŠ é¡µé¢å¾ˆç›¸ä¼¼<br>###åˆ é™¤åŠŸèƒ½<br>æœ€åæ˜¯åˆ é™¤åŠŸèƒ½ï¼Œæ˜¯é€šè¿‡ajaxæ¥å®ç°çš„ï¼Œajaxä»£ç ä½äºstatic/js/myadmin/classification_list.jsï¼Œ<br>åœ¨ajaxä¸­ï¼Œé€šè¿‡è°ƒç”¨åˆ é™¤æ¥å£classification_deleteæ¥å®ç°åˆ é™¤åŠŸèƒ½ï¼Œ</p><p>æ¥å£classification_deleteçš„ä»£ç ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token decorator annotation punctuation">@ajax_required</span><span class="token decorator annotation punctuation">@require_http_methods</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"POST"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">classification_delete</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    classification_id <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">[</span><span class="token string">'classification_id'</span><span class="token punctuation">]</span>    instance <span class="token operator">=</span> Classification<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>classification_id<span class="token punctuation">)</span>    instance<span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"msg"</span><span class="token punctuation">:</span> <span class="token string">"success"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Djangoè§†é¢‘ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoè§†é¢‘ç½‘ç«™æ­å»º--step09åå°è§†é¢‘ç®¡ç†åŠŸèƒ½</title>
      <link href="/post/django-shi-pin-wang-zhan-da-jian/step09-hou-tai-shi-pin-guan-li-gong-neng/"/>
      <url>/post/django-shi-pin-wang-zhan-da-jian/step09-hou-tai-shi-pin-guan-li-gong-neng/</url>
      
        <content type="html"><![CDATA[<p>#åå°è§†é¢‘ç®¡ç†åŠŸèƒ½<br>ä»æœ¬è®²å¼€å§‹ï¼Œæˆ‘ä»¬å¼€å§‹è§†é¢‘ç®¡ç†åŠŸèƒ½çš„å¼€å‘ï¼Œè§†é¢‘ç®¡ç†åŒ…æ‹¬</p><ul><li>è§†é¢‘ä¸Šä¼ </li><li>è§†é¢‘åˆ—è¡¨</li><li>è§†é¢‘ç¼–è¾‘</li><li>è§†é¢‘åˆ é™¤</li></ul><p>è¿™ä¸€è®²éå¸¸é‡è¦ï¼Œå› ä¸ºå°†å­¦ä¹ åˆ°ä¸€äº›ä¹‹å‰æ²¡æœ‰å­¦è¿‡çš„æŠ€æœ¯ï¼Œæ¯”å¦‚å¤§æ–‡ä»¶ä¸Šä¼ æŠ€æœ¯ã€‚<br>##è§†é¢‘ä¸Šä¼ </p><p>æˆ‘ä»¬å…ˆæ¥å®ç°è§†é¢‘çš„ä¸Šä¼ ï¼Œè§†é¢‘çš„ä¸Šä¼ é‡‡ç”¨çš„æ˜¯åˆ†å—ä¸Šä¼ çš„ç­–ç•¥ï¼Œå¹¶ç”¨äº†åˆ†å—ä¸Šä¼ ç±»åº“ï¼šdjango_chunked_uploadï¼Œä½¿ç”¨è¯¥ç±»åº“ï¼Œå†é…åˆå‰ç«¯ä¸Šä¼ jsåº“ï¼ˆjquery.fileupload.jsï¼‰ï¼Œå³å¯å®Œç¾çš„å®ç°æ–‡ä»¶çš„åˆ†å—ä¸Šä¼ åŠŸèƒ½ã€‚<br>###è·¯ç”±è®¾ç½®<br>ç…§ä¾‹å…ˆç¼–å†™æ·»åŠ è§†é¢‘çš„è·¯ç”±</p><p>æ·»åŠ è§†é¢‘ï¼Œå½“ç„¶éœ€è¦ä¸Šä¼ è§†é¢‘çš„é¡µé¢ï¼Œæˆ‘ä»¬çš„é¡µé¢æ˜¯video_addè·¯ç”±æ¥æ˜¾ç¤ºï¼Œé€šè¿‡urls .pyä¸­æŒ‡å®š</p><pre class="line-numbers language-none"><code class="language-none"># myadmin&#x2F;urls.pypath(&#39;video_add&#x2F;&#39;, views.AddVideoView.as_view(), name&#x3D;&#39;video_add&#39;),    #ä¸Šä¼ è§†é¢‘path(&#39;chunked_upload&#x2F;&#39;,  views.MyChunkedUploadView.as_view(), name&#x3D;&#39;api_chunked_upload&#39;),  # ä¸Šä¼ æ¥å£path(&#39;chunked_upload_complete&#x2F;&#39;, views.MyChunkedUploadCompleteView.as_view(),name&#x3D;&#39;api_chunked_upload_complete&#39;),  # ä¸Šä¼ è§†é¢‘å®Œæˆæ¥å£<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>###æ·»åŠ è§†å›¾<br>AddViewViewä»…ä»…ç”¨æ¥æ˜¾ç¤ºä¸Šä¼ é¡µé¢ï¼Œå®ƒçš„ä»£ç å¾ˆç®€å•</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">AddVideoView</span><span class="token punctuation">(</span>SuperUserRequiredMixin<span class="token punctuation">,</span> TemplateView<span class="token punctuation">)</span><span class="token punctuation">:</span>    template_name <span class="token operator">=</span> <span class="token string">'myadmin/video_add.html'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>åªæ˜¯ç»§æ‰¿äº†TemplateViewæ¥æ˜¾ç¤ºmyadmin/video_add.html<br>###å‰ç«¯</p><pre class="line-numbers language-none"><code class="language-none">templates&#x2F;myadmin&#x2F;â”œâ”€â”€ base.html                       # åŸºç¡€é¡µé¢â”œâ”€â”€ login.html                      # ç™»å½•é¡µé¢â”œâ”€â”€ video_add.html                  # æ·»åŠ è§†é¢‘é¡µé¢â”œâ”€â”€ video_edit.html                 # ç¼–è¾‘è§†é¢‘é¡µé¢â”œâ”€â”€ video_list.html                 # åˆ—è¡¨é¡µé¢â”œâ”€â”€ video_list_modal.html           â”œâ”€â”€ video_publish.html              # å‘å¸ƒé¡µé¢ï¼Œè·Ÿç¼–è¾‘é¡µé¢ç±»ä¼¼â””â”€â”€ video_publish_success.html      # å‘å¸ƒæˆåŠŸé¡µé¢<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>myadmin/video_add.htmlä¸­å®ç°äº†ä¸Šä¼ è§†é¢‘çš„å…¨è¿‡ç¨‹ï¼Œè§†é¢‘çš„ä¸Šä¼ é‡‡ç”¨çš„æ˜¯åˆ†å—ä¸Šä¼ çš„ç­–ç•¥ï¼Œ</p><p>å‰ç«¯ä½¿ç”¨çš„æ˜¯jsä¸Šä¼ åº“ï¼ˆjquery.fileupload.jsï¼‰ï¼Œåç«¯ä½¿ç”¨çš„æ˜¯django_chunked_uploadã€‚</p><p>ä¸Šä¼ çš„é€»è¾‘æ˜¯è¿™æ ·çš„ï¼š</p><ul><li>å‰ç«¯å…ˆé€‰æ‹©ä¸€ä¸ªæ–‡ä»¶ï¼Œé€šè¿‡jquery.fileupload.jsä¸­çš„$.fileupload()æ–¹æ³•æ¥ä¸Šä¼ æ–‡ä»¶ï¼›</li><li>åç«¯æ¥æ”¶åˆ°ååˆ†æ‰¹è¿”å›å·²ä¸Šä¼ å—çš„è¿›åº¦ï¼›</li><li>å‰ç«¯æ ¹æ®è¿›åº¦æ¥æ›´æ–°ç•Œé¢ï¼›</li></ul><p>ç”±äºä¸Šä¼ å‰éœ€è¦åšä¸€äº›æ ¡éªŒçš„æ“ä½œï¼Œä»£ç è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠä¸Šä¼ çš„ä»£ç å°è£…åˆ°äº†ä¸€ä¸ªjsä¸­:static/js/myadmin/video_upload.jsï¼Œ<br>è¿™äº›å†…å®¹åŸºæœ¬éƒ½æ˜¯django_chunked_uploadä¸­çš„demoæ¨¡æ¿å†…å®¹ï¼Œä¸»è¦çš„ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#chunked_upload"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fileupload</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  url<span class="token operator">:</span> api_chunked_uplad<span class="token punctuation">,</span>  dataType<span class="token operator">:</span> <span class="token string">"json"</span><span class="token punctuation">,</span>  maxChunkSize<span class="token operator">:</span> <span class="token number">100000</span><span class="token punctuation">,</span> <span class="token comment">// Chunks of 100 kB</span>  formData<span class="token operator">:</span> form_data<span class="token punctuation">,</span>  <span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// Called before starting upload</span>    <span class="token keyword">var</span> fileSize <span class="token operator">=</span> data<span class="token punctuation">.</span>originalFiles<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'size'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> type <span class="token operator">=</span> data<span class="token punctuation">.</span>originalFiles<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>fileSize <span class="token operator">></span> <span class="token number">100000000</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'æ–‡ä»¶å¤ªå¤§äº†ï¼Œè¯·ä¸Šä¼ 100Mä»¥å†…çš„æ–‡ä»¶'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>type<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"video/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'è§†é¢‘æ ¼å¼ä¸æ­£ç¡®'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    form_data<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">calculate_md5</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Again, chunks of 100 kB</span>    data<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#progress_label'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#progress_layout'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token function-variable function">chunkdone</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// Called after uploading each chunk</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>form_data<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      form_data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>        <span class="token punctuation">&#123;</span><span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"upload_id"</span><span class="token punctuation">,</span> <span class="token string">"value"</span><span class="token operator">:</span> data<span class="token punctuation">.</span>result<span class="token punctuation">.</span>upload_id<span class="token punctuation">&#125;</span>      <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">var</span> progress <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>loaded <span class="token operator">/</span> data<span class="token punctuation">.</span>total <span class="token operator">*</span> <span class="token number">100.0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>progress<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>progress <span class="token operator">></span> lastprogress<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        lastprogress <span class="token operator">=</span> progress        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#upload_progress'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">progress</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>            percent<span class="token operator">:</span> progress        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token function-variable function">done</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// Called when the file has completely uploaded</span>    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>      type<span class="token operator">:</span> <span class="token string">"POST"</span><span class="token punctuation">,</span>      url<span class="token operator">:</span> api_chunked_upload_complete<span class="token punctuation">,</span>      data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>        csrfmiddlewaretoken<span class="token operator">:</span> csrf<span class="token punctuation">,</span>        upload_id<span class="token operator">:</span> data<span class="token punctuation">.</span>result<span class="token punctuation">.</span>upload_id<span class="token punctuation">,</span>        md5<span class="token operator">:</span> md5      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      dataType<span class="token operator">:</span> <span class="token string">"json"</span><span class="token punctuation">,</span>      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#upload_label'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">'ä¸Šä¼ æˆåŠŸ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#upload_progress'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">progress</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>            percent<span class="token operator">:</span> <span class="token number">100</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#next_layout'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#next'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            window<span class="token punctuation">.</span>location <span class="token operator">=</span> <span class="token string">'/myadmin/video_publish/'</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>video_id        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨$.fileupload()æ–¹æ³•ä¸­ï¼Œæœ‰ä¸€ä¸ªå›è°ƒæ–¹æ³•chunkdone()ï¼Œè¯¥æ–¹æ³•æ˜¯ç”¨æ¥æ›´æ–°è¿›åº¦çš„ï¼Œå‘Šè¯‰å‰ç«¯å·²ç»ä¸Šä¼ äº†å¤šå°‘å­—èŠ‚ã€‚</p><p>å¦å¤–è¿˜æœ‰ä¸€ä¸ªå›è°ƒæ–¹æ³•done()ï¼Œè¯¥æ–¹æ³•è¡¨ç¤ºä¸Šä¼ å®Œæ¯•ï¼Œå‰ç«¯å¯åœ¨é‡Œé¢åšä¸€äº›é¢å¤–çš„äº‹æƒ…ã€‚</p><p>ä¸Šä¼ å®Œæ¯•åï¼Œè°ƒç”¨äº†ä¸€ä¸ªæ¥å£api_chunked_upload_completeï¼Œæ¥ç»™åç«¯å‘é€ä¸€ä¸ªå›æ‰§ï¼šæˆ‘å·²ä¸Šä¼ å®Œæ¯•ã€‚<br>###ä¸Šä¼ æˆåŠŸè§†å›¾<br>api_chunked_uploadå’Œapi_chunked_upload_completeçš„è·¯ç”±å·²ç»é…å¥½</p><p>åœ¨MyChunkedUploadCompleteViewä¸­ï¼Œæˆ‘ä»¬åœ¨åˆ©ç”¨Videoæ¨¡å‹åˆ›å»ºäº†è¿™æ¡è§†é¢‘</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># myadmin/models.py</span><span class="token keyword">from</span> chunked_upload<span class="token punctuation">.</span>models <span class="token keyword">import</span> ChunkedUpload<span class="token comment"># ä¸Šä¼ è§†é¢‘æ¨¡å—ç”¨åˆ°çš„ï¼Œ åŸºæœ¬æ²¡æ”¹åŠ¨å’Œdemoä¸€æ ·</span>MyChunkedUpload <span class="token operator">=</span> ChunkedUpload<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è§†å›¾ä¸­ä½¿ç”¨å®ƒ</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># myadmin/views.py</span><span class="token comment"># ä¸Šä¼ è§†é¢‘</span><span class="token keyword">class</span> <span class="token class-name">MyChunkedUploadView</span><span class="token punctuation">(</span>ChunkedUploadView<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> MyChunkedUpload    field_name <span class="token operator">=</span> <span class="token string">'the_file'</span><span class="token keyword">class</span> <span class="token class-name">MyChunkedUploadCompleteView</span><span class="token punctuation">(</span>ChunkedUploadCompleteView<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> MyChunkedUpload    <span class="token comment"># ä¸Šä¼ è§†é¢‘å›è°ƒå‡½æ•°    </span>    <span class="token keyword">def</span> <span class="token function">on_completion</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> uploaded_file<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'uploaded--->'</span><span class="token punctuation">,</span> uploaded_file<span class="token punctuation">.</span>name<span class="token punctuation">)</span>        <span class="token comment"># è§†é¢‘ä¸Šä¼ æˆåŠŸå›è°ƒå‡½æ•°</span>    <span class="token keyword">def</span> <span class="token function">get_response_data</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> chunked_upload<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">:</span>        video <span class="token operator">=</span> Video<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token operator">=</span>chunked_upload<span class="token punctuation">.</span><span class="token builtin">file</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span><span class="token string">'code'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'video_id'</span><span class="token punctuation">:</span> video<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">,</span> <span class="token string">'msg'</span><span class="token punctuation">:</span> <span class="token string">'success'</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>##è§†é¢‘å‘å¸ƒ</p><p>ç„¶åç”¨æˆ·ç‚¹å‡»ä¸‹ä¸€æ­¥ï¼Œè¿›å…¥video_publishé¡µé¢ï¼Œå¼€å§‹å‘å¸ƒå‰çš„èµ„æ–™å¡«å†™<br>###è§†é¢‘å‘å¸ƒè·¯ç”±è®¾ç½®</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">video_publishçš„è·¯ç”±æ˜¯    path<span class="token punctuation">(</span><span class="token string">'video_publish/&lt;int:pk>/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>VideoPublishView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'video_publish'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># è§†é¢‘å‘å¸ƒï¼Œåé¢å¯ä»¥æ‹“å±•ä¸ºè§†é¢‘å®¡æ ¸æˆåŠŸåå‘å¸ƒ</span>    path<span class="token punctuation">(</span><span class="token string">'video_publish_success/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>VideoPublishSuccessView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'video_publish_success'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># è§†é¢‘å‘å¸ƒæˆåŠŸ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>###è§†é¢‘å‘å¸ƒè§†å›¾<br>å‘å¸ƒåˆ—è¡¨ç”¨åˆ°VideoPublishFormï¼Œå› æ­¤éœ€è¦åˆ›å»º</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># myadmin/forms.py</span><span class="token keyword">from</span> django <span class="token keyword">import</span> forms<span class="token keyword">from</span> video<span class="token punctuation">.</span>models <span class="token keyword">import</span> Video<span class="token keyword">class</span> <span class="token class-name">VideoPublishForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>    title <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>min_length<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">,</span> required<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>                            error_messages<span class="token operator">=</span><span class="token punctuation">&#123;</span>                                  <span class="token string">'min_length'</span><span class="token punctuation">:</span> <span class="token string">'è‡³å°‘4ä¸ªå­—ç¬¦'</span><span class="token punctuation">,</span>                                  <span class="token string">'max_length'</span><span class="token punctuation">:</span> <span class="token string">'ä¸èƒ½å¤šäº200ä¸ªå­—ç¬¦'</span><span class="token punctuation">,</span>                                  <span class="token string">'required'</span><span class="token punctuation">:</span> <span class="token string">'æ ‡é¢˜ä¸èƒ½ä¸ºç©º'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                            widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>TextInput<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'placeholder'</span><span class="token punctuation">:</span> <span class="token string">'è¯·è¾“å…¥å†…å®¹'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    desc <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>min_length<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">,</span> required<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>                           error_messages<span class="token operator">=</span><span class="token punctuation">&#123;</span>                              <span class="token string">'min_length'</span><span class="token punctuation">:</span> <span class="token string">'è‡³å°‘4ä¸ªå­—ç¬¦'</span><span class="token punctuation">,</span>                              <span class="token string">'max_length'</span><span class="token punctuation">:</span> <span class="token string">'ä¸èƒ½å¤šäº200ä¸ªå­—ç¬¦'</span><span class="token punctuation">,</span>                              <span class="token string">'required'</span><span class="token punctuation">:</span> <span class="token string">'æè¿°ä¸èƒ½ä¸ºç©º'</span>                           <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                           widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>Textarea<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'placeholder'</span><span class="token punctuation">:</span> <span class="token string">'è¯·è¾“å…¥å†…å®¹'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    cover <span class="token operator">=</span> forms<span class="token punctuation">.</span>ImageField<span class="token punctuation">(</span>required<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>                             error_messages<span class="token operator">=</span><span class="token punctuation">&#123;</span>                                 <span class="token string">'required'</span><span class="token punctuation">:</span> <span class="token string">'å°é¢ä¸èƒ½ä¸ºç©º'</span>                             <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                             widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>FileInput<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'n'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    status <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>min_length<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> required<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>                             widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>HiddenInput<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'value'</span><span class="token punctuation">:</span> <span class="token string">'0'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        model <span class="token operator">=</span> Video        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'desc'</span><span class="token punctuation">,</span> <span class="token string">'status'</span><span class="token punctuation">,</span> <span class="token string">'cover'</span><span class="token punctuation">,</span> <span class="token string">'classification'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>video_publishçš„è§†å›¾ç±»æ˜¯VideoPublishViewï¼Œå®ƒçš„ä»£ç å¦‚ä¸‹</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">VideoPublishView</span><span class="token punctuation">(</span>SuperUserRequiredMixin<span class="token punctuation">,</span> generic<span class="token punctuation">.</span>UpdateView<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> Video    form_class <span class="token operator">=</span> VideoPublishForm    template_name <span class="token operator">=</span> <span class="token string">'myadmin/video_publish.html'</span>    <span class="token keyword">def</span> <span class="token function">get_context_data</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        context <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span>VideoPublishView<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>get_context_data<span class="token punctuation">(</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>        clf_list <span class="token operator">=</span> Classification<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span>        clf_data <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">'clf_list'</span><span class="token punctuation">:</span>clf_list<span class="token punctuation">&#125;</span>        context<span class="token punctuation">.</span>update<span class="token punctuation">(</span>clf_data<span class="token punctuation">)</span>        <span class="token keyword">return</span> context    <span class="token keyword">def</span> <span class="token function">get_success_url</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> reverse<span class="token punctuation">(</span><span class="token string">'myadmin:video_publish_success'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œå¯¹åº”çš„é¡µé¢æ˜¯myadmin/video_publish.html</p><p>è¦å¡«å†™çš„è§†é¢‘èµ„æ–™æœ‰è§†é¢‘æ ‡é¢˜ã€æè¿°ã€åˆ†ç±»ã€å°é¢ï¼Œ</p><p>å…¶ä¸­åˆ†ç±»æ˜¯é€šè¿‡get_context_data()å¸¦è¿‡æ¥çš„ï¼Œ</p><p>å¡«å†™åï¼Œç‚¹å‡»å‘å¸ƒï¼Œdjangoå°†é€šè¿‡UpdateViewè‡ªåŠ¨ä¸ºä½ æ›´æ–°è§†é¢‘ä¿¡æ¯ã€‚å¹¶é€šè¿‡get_success_urlè·³è½¬åˆ°æˆåŠŸé¡µé¢myadmin:video_publish_successï¼Œå®ƒçš„è·¯ç”±æ˜¯</p><p>é€šè¿‡ video_publish_success è°ƒç”¨ VideoPublishSuccessViewã€‚</p><p>å¯¹åº”VideoPublishSuccessViewæ˜¯</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">VideoPublishSuccessView</span><span class="token punctuation">(</span>generic<span class="token punctuation">.</span>TemplateView<span class="token punctuation">)</span><span class="token punctuation">:</span>    template_name <span class="token operator">=</span> <span class="token string">'myadmin/video_publish_success.html'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>åˆ°æ­¤è§†é¢‘æ·»åŠ åŠŸèƒ½å®Œæˆ</p><p>##è§†é¢‘åˆ—è¡¨</p><p>è§†é¢‘åˆ—è¡¨çš„è·¯ç”±æ˜¯</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">path<span class="token punctuation">(</span><span class="token string">'video_list/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>VideoListView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'video_list'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¯¹åº”çš„è§†å›¾ç±»æ˜¯VideoListView</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">VideoListView</span><span class="token punctuation">(</span>AdminUserRequiredMixin<span class="token punctuation">,</span> generic<span class="token punctuation">.</span>ListView<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> Video    template_name <span class="token operator">=</span> <span class="token string">'myadmin/video_list.html'</span>    context_object_name <span class="token operator">=</span> <span class="token string">'video_list'</span>    paginate_by <span class="token operator">=</span> <span class="token number">10</span>    q <span class="token operator">=</span> <span class="token string">''</span>    <span class="token keyword">def</span> <span class="token function">get_context_data</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">,</span> object_list<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        context <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span>VideoListView<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>get_context_data<span class="token punctuation">(</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>        paginator <span class="token operator">=</span> context<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'paginator'</span><span class="token punctuation">)</span>        page <span class="token operator">=</span> context<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'page_obj'</span><span class="token punctuation">)</span>        page_list <span class="token operator">=</span> get_page_list<span class="token punctuation">(</span>paginator<span class="token punctuation">,</span> page<span class="token punctuation">)</span>        context<span class="token punctuation">[</span><span class="token string">'page_list'</span><span class="token punctuation">]</span> <span class="token operator">=</span> page_list        context<span class="token punctuation">[</span><span class="token string">'q'</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>q        <span class="token keyword">return</span> context    <span class="token keyword">def</span> <span class="token function">get_queryset</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>q <span class="token operator">=</span> self<span class="token punctuation">.</span>request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"q"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> Video<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get_search_list<span class="token punctuation">(</span>self<span class="token punctuation">.</span>q<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œç»§æ‰¿äº†ListViewæ¥æ˜¾ç¤ºè§†é¢‘åˆ—è¡¨ï¼Œå¹¶é€šè¿‡get_querysetå®ç°äº†æœç´¢åŠŸèƒ½ï¼Œé€šè¿‡get_context_data()å®ç°äº†åˆ†é¡µåŠŸèƒ½ã€‚<br>##è§†é¢‘ç¼–è¾‘<br>é¡µé¢ä¸­è¿˜æœ‰ç¼–è¾‘å’Œåˆ é™¤çš„åŠŸèƒ½ã€‚</p><p>ç¼–è¾‘å‘¢ï¼Œæ˜¯å¯¹å•ä¸ªè§†é¢‘å¯¹èµ„æ–™è¿›è¡Œæ›´æ–°ï¼Œåˆ é™¤å³åˆ é™¤æœ¬æ¡è§†é¢‘å’Œè§†é¢‘æ–‡ä»¶ã€‚</p><p>æˆ‘ä»¬å…ˆå®ç°ç¼–è¾‘åŠŸèƒ½ï¼Œè·¯ç”±æ˜¯</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">path<span class="token punctuation">(</span><span class="token string">'video_edit/&lt;int:pk>/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>VideoEditView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'video_edit'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¯¹åº”å¯¹è§†å›¾ç±»æ˜¯VideoEditViewï¼Œè¿™ä¸ªè§†å›¾ç±»æ˜¯éœ€è¦ä¼ é€’ä¸»é”®çš„ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">VideoEditView</span><span class="token punctuation">(</span>SuperUserRequiredMixin<span class="token punctuation">,</span> generic<span class="token punctuation">.</span>UpdateView<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> Video    form_class <span class="token operator">=</span> VideoEditForm    template_name <span class="token operator">=</span> <span class="token string">'myadmin/video_edit.html'</span>    <span class="token keyword">def</span> <span class="token function">get_context_data</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        context <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span>VideoEditView<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>get_context_data<span class="token punctuation">(</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>        clf_list <span class="token operator">=</span> Classification<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span>        clf_data <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">'clf_list'</span><span class="token punctuation">:</span>clf_list<span class="token punctuation">&#125;</span>        context<span class="token punctuation">.</span>update<span class="token punctuation">(</span>clf_data<span class="token punctuation">)</span>        <span class="token keyword">return</span> context    <span class="token keyword">def</span> <span class="token function">get_success_url</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        messages<span class="token punctuation">.</span>success<span class="token punctuation">(</span>self<span class="token punctuation">.</span>request<span class="token punctuation">,</span> <span class="token string">"ä¿å­˜æˆåŠŸ"</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> reverse<span class="token punctuation">(</span><span class="token string">'myadmin:video_edit'</span><span class="token punctuation">,</span> kwargs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'pk'</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>kwargs<span class="token punctuation">[</span><span class="token string">'pk'</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>```    å…¶å®ç¼–è¾‘é¡µé¢å’Œå‘å¸ƒé¡µé¢å¾ˆç›¸ä¼¼ï¼Œéƒ½æ˜¯ç»§æ‰¿UpdateViewè§†å›¾ç±»ï¼Œå¹¶åœ¨get_context_data<span class="token punctuation">(</span><span class="token punctuation">)</span>é‡Œé¢ä¼ é€’åˆ†ç±»ä¿¡æ¯ã€‚æœ€ç»ˆæˆåŠŸåé€šè¿‡messages<span class="token punctuation">.</span>success<span class="token punctuation">(</span>self<span class="token punctuation">.</span>request<span class="token punctuation">,</span> <span class="token string">"ä¿å­˜æˆåŠŸ"</span><span class="token punctuation">)</span>æ¶ˆæ¯å‘Šä¹‹å‰ç«¯ã€‚<span class="token comment">##è§†é¢‘åˆ é™¤</span>åˆ é™¤åŠŸèƒ½å°±æ›´åŠ ç®€å•äº†ã€‚è·¯ç”±æ˜¯```pythonpath<span class="token punctuation">(</span><span class="token string">'video_delete/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>video_delete<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'video_delete'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œé€šè¿‡video_deleteå‡½æ•°æ¥å®ç°ï¼Œå‰ç«¯é€šè¿‡ajaxï¼ˆajaxä»£ç ä½äºstatic/js/myadmin/video_list.jsï¼‰è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token decorator annotation punctuation">@ajax_required</span><span class="token decorator annotation punctuation">@require_http_methods</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"POST"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">video_delete</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    video_id <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">[</span><span class="token string">'video_id'</span><span class="token punctuation">]</span>    instance <span class="token operator">=</span> Video<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>video_id<span class="token punctuation">)</span>    instance<span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"msg"</span><span class="token punctuation">:</span> <span class="token string">"success"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è·å–è¯¥è§†é¢‘ï¼Œç„¶åinstance.delete()åˆ é™¤ä¹‹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Djangoè§†é¢‘ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoè§†é¢‘ç½‘ç«™æ­å»º--step08åå°ç™»å½•</title>
      <link href="/post/django-shi-pin-wang-zhan-da-jian/step08-hou-tai-deng-lu/"/>
      <url>/post/django-shi-pin-wang-zhan-da-jian/step08-hou-tai-deng-lu/</url>
      
        <content type="html"><![CDATA[<p>#åå°ç™»å½•åŠŸèƒ½<br>ä»æœ¬è®²èµ·ï¼Œæˆ‘ä»¬ä¼šä»‹ç»åå°ç®¡ç†ç³»ç»Ÿçš„å¼€å‘ï¼Œåå°ç®¡ç†</p><p>ä¸»è¦æ˜¯å¯¹æ•°æ®åº“ä¸­çš„æ•°æ®è¿›è¡Œå¢ã€åˆ ã€æ”¹ã€æŸ¥çš„æ“ä½œï¼Œæ»¡è¶³ç½‘ç«™ç®¡ç†å‘˜å¯¹ç½‘ç«™çš„ç®¡ç†ä¸ç»´æŠ¤çš„éœ€æ±‚ã€‚</p><p>å…¶å®ï¼Œdjangoè‡ªå¸¦çš„ä¹Ÿæœ‰ä¸€ä¸ªåå°ç®¡ç†ç³»ç»Ÿï¼ˆ/adminï¼‰ï¼Œä½†æ˜¯è‡ªå¸¦çš„åå°éå¸¸ç®€é™‹ï¼Œ</p><p>æ— è®ºæ˜¯ç•Œé¢ï¼Œè¿˜æ˜¯åŠŸèƒ½ä¸Šï¼Œéƒ½æ— æ³•æ»¡è¶³ç”¨æˆ·çš„éœ€æ±‚ï¼Œå› æ­¤ï¼Œéœ€è¦è‡ªå·±å¼€å‘äº†ä¸€å¥—åå°ç®¡ç†ç³»ç»Ÿã€‚<br>##åˆ›å»ºæ–°çš„app<br>åå°ç®¡ç†å±äºä¸€ä¸ªå•ç‹¬çš„æ¨¡å—ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„åº”ç”¨ï¼Œå‘½åä¸ºmyadmin</p><pre class="line-numbers language-shell" data-language="shell"><div class="caption"><span>script</span></div><code class="language-shell">python3 manage.py startapp myadmin<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¹‹åçš„åŠŸèƒ½éƒ½æ˜¯åŸºäºmyadminæ¥å®ç°çš„ã€‚</p><p>å› ä¸ºå‰é¢æˆ‘ä»¬å·²ç»åˆ›å»ºäº†useræ¨¡å—ï¼Œæ‰€ä»¥æ­¤å¤„çš„ç™»å½•åŠŸèƒ½æ˜¯åŸºäºä¹‹å‰çš„useræ¨¡å—æ¥å®ç°çš„ã€‚<br>##æ·»åŠ è·¯ç”±<br>é¦–å…ˆåœ¨myadmin/urls.pyä¸­æ·»åŠ ç™»å½•å’Œç™»å‡ºçš„è·¯ç”±</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> viewsapp_name <span class="token operator">=</span> <span class="token string">'myadmin'</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    path<span class="token punctuation">(</span><span class="token string">'login/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>login<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'login'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    path<span class="token punctuation">(</span><span class="token string">'logout/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>logout<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'logout'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬æ¥å†™loginå‡½æ•°</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth <span class="token keyword">import</span> authenticate<span class="token punctuation">,</span> login <span class="token keyword">as</span> auth_login<span class="token punctuation">,</span> logout <span class="token keyword">as</span> auth_logout<span class="token comment"># å¤ç”¨userprofileä¸­çš„UserLoginForm</span><span class="token keyword">from</span> userprofile<span class="token punctuation">.</span>forms <span class="token keyword">import</span> UserLoginForm<span class="token keyword">def</span> <span class="token function">login</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">:</span>        form <span class="token operator">=</span> UserLoginForm<span class="token punctuation">(</span>request<span class="token operator">=</span>request<span class="token punctuation">,</span> data<span class="token operator">=</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">)</span>        <span class="token keyword">if</span> form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            username <span class="token operator">=</span> form<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'username'</span><span class="token punctuation">)</span>            password <span class="token operator">=</span> form<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'password'</span><span class="token punctuation">)</span>            user <span class="token operator">=</span> authenticate<span class="token punctuation">(</span>username<span class="token operator">=</span>username<span class="token punctuation">,</span> password<span class="token operator">=</span>password<span class="token punctuation">)</span>            <span class="token keyword">if</span> user <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span> <span class="token keyword">and</span> user<span class="token punctuation">.</span>is_staff<span class="token punctuation">:</span>                auth_login<span class="token punctuation">(</span>request<span class="token punctuation">,</span> user<span class="token punctuation">)</span>                <span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">'myadmin:index'</span><span class="token punctuation">)</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                form<span class="token punctuation">.</span>add_error<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'è¯·è¾“å…¥ç®¡ç†å‘˜è´¦å·'</span><span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        form <span class="token operator">=</span> UserLoginForm<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'myadmin/login.html'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">'form'</span><span class="token punctuation">:</span> form<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é¦–å…ˆè¿™é‡Œå¤ç”¨äº†ä¹‹å‰åˆ›å»ºçš„ è¡¨å•UserLoginForm<br>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†useræ¨¡å‹ä¸­çš„ä¸€ä¸ªå­—æ®µis_staffï¼Œç”¨å®ƒæ¥è¡¨ç¤ºæ˜¯å¦æ˜¯ç®¡ç†å‘˜ï¼Œ<br>æ‰€ä»¥é€šè¿‡if user is not None and user.is_staffæ¥åˆ¤æ–­ç®¡ç†å‘˜ï¼Œå¦‚æœæ˜¯ç®¡ç†å‘˜ï¼Œåˆ™auth_loginç™»å½•å¹¶redirectè·³è½¬åˆ°ä¸»é¡µã€‚</p><p>ä¸‹é¢æˆ‘ä»¬æ¥å®ç°logoutå‡½æ•°</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">logout</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    auth_logout<span class="token punctuation">(</span>request<span class="token punctuation">)</span>    <span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">'myadmin:login'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ç™»å‡ºåï¼Œç›´æ¥è·³è½¬åˆ°loginé¡µé¢ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Djangoè§†é¢‘ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoè§†é¢‘ç½‘ç«™æ­å»º--step4å‰ç«¯é¡µé¢æ•´åˆ</title>
      <link href="/post/django-shi-pin-wang-zhan-da-jian/step4-qian-duan-ye-mian-zheng-he/"/>
      <url>/post/django-shi-pin-wang-zhan-da-jian/step4-qian-duan-ye-mian-zheng-he/</url>
      
        <content type="html"><![CDATA[<p>#å‰ç«¯é¡µé¢æ•´åˆ<br>åœ¨æœ¬è®²ä¸­ï¼Œæˆ‘ä»¬å¼€å§‹å‰ç«¯é¡µé¢æ•´åˆ</p><p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå‰ç«¯é¡µé¢ä¹Ÿå¾ˆé‡è¦ï¼Œæœ¬æ¬¡å†…å®¹ç®€å•çš„å¯¹å‰é¢ä¸‰èŠ‚å†…å®¹çš„å‰ç«¯é¡µé¢åšä¸€ä¸ªç®€å•çš„æ•´åˆ</p><p>å°˜å½’å°˜ï¼ŒåœŸå½’åœŸï¼Œå†…å®¹æ•´ç†ä¹‹åä¼šè®²å†…å®¹çœ‹çš„æ›´åŠ æ¸…æ™°</p><h1 id="åŸºç¡€é¡µé¢"><a href="#åŸºç¡€é¡µé¢" class="headerlink" title="åŸºç¡€é¡µé¢"></a>åŸºç¡€é¡µé¢</h1><p>åŸºç¡€é¡µé¢åŒ…æ‹¬ï¼Œheader base footerä¸‰ä¸ªéƒ¨åˆ†</p><h2 id="baseé¡µé¢"><a href="#baseé¡µé¢" class="headerlink" title="baseé¡µé¢"></a>baseé¡µé¢</h2><p>æ‰€æœ‰çš„é¡µé¢éƒ½èµ·å§‹äºè¿™ä¸ªé¡µé¢</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">&#123;% load static %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Content-Type<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/html; charset=UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>description<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>åŸºäºDjangoçš„è§†ç»¼åˆç½‘ç«™<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>   <span class="token comment">&lt;!-- å½“å‰é¡µé¢ç½‘ç«™æ ‡é¢˜ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>&#123;% block title %&#125;&#123;% endblock %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- å¼•å…¥semantic-uiæ–‡ä»¶        --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>semantic-ui/semantic.min.css<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>css/semantic.custom.css<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>css/style.css<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    &#123;% block css %&#125;&#123;% endblock css %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>&#123;% include "base/header.html" %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui container<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>v-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    &#123;% block content %&#125;    &#123;% endblock content %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>&lt;<span class="token comment">&lt;!-- å¼•å…¥æ³¨è„š --></span>&#123;% include "base/footer.html" %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>semantic-ui/semantic.min.js<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>&#123;% block script %&#125; &#123;% endblock script %&#125;&#123;% block modal %&#125; &#123;% endblock modal %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ä¸ªé¡µé¢å¯ä»¥åˆ†ä¸ºå‡ ä¸ªéƒ¨åˆ†<br>head å†…å®¹ï¼Œ å¼•å…¥åŸºç¡€çš„è®¾ç½®ï¼Œç„¶åæ—¶é¡µé¢æ ‡é¢˜ï¼Œ å¿…è¦çš„å‰ç«¯å¸ƒå±€æ–‡ä»¶ å…¶ä»–çš„cssæ–‡ä»¶<br>body éƒ¨åˆ†ï¼Œ å…ˆæ˜¯å¯¼å…¥header æ–‡ä»¶ï¼Œ ç•™ä¸‹cotentå†…å®¹ï¼Œå…¶ä»–é¡µé¢å¯¼å…¥çš„éƒ¨åˆ†ï¼Œéƒ½æ”¾åœ¨è¿™ä¸ªåœ°æ–¹</p><p>footerå†…å®¹  å¿…è¦çš„footerå†…å®¹ï¼Œ ç„¶åå¼•å…¥JavaScriptå†…å®¹ï¼Œå…¶ä»–çš„scriptå†…å®¹å’Œmodalå†…å®¹</p><h2 id="headeré¡µé¢"><a href="#headeré¡µé¢" class="headerlink" title="headeré¡µé¢"></a>headeré¡µé¢</h2><p>header é¡µé¢æ”¾å…¥ å¯¼èˆªæ å†…å®¹ï¼Œ ä»¥åŠèœå•æ å†…å®¹<br>è¿™é‡Œåšä¸ªç¤ºèŒƒï¼Œåé¢ä¼šè¿›è¡Œä¿®æ”¹</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">&#123;% load static %&#125; <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui inverted menu<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>header item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Brand<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>active item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Vitae<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui dropdown item<span class="token punctuation">"</span></span> <span class="token attr-name">tabindex</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            Dropdown<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dropdown icon<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menu<span class="token punctuation">"</span></span> <span class="token attr-name">tabindex</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>-1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Action<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Another Action<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Something else here<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>divider<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Separated Link<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>divider<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>One more separated link<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>right menu<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Login<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>v-header-extra<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        &#123;% include "base/menu.html" %&#125;     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="footeré¡µé¢"><a href="#footeré¡µé¢" class="headerlink" title="footeré¡µé¢"></a>footeré¡µé¢</h2><p>footeré¡µé¢ä¸€èˆ¬æ”¾ä¸€äº›å¤‡æ¡ˆä¿¡æ¯ï¼Œç½‘ç«™åå­—ï¼Œlogo,ç›¸å…³é“¾æ¥ç­‰</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">&#123;% load static %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui vertical footer segment <span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui center aligned container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui divider<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--        &lt;img src="&#123;% static 'img/logo.png' %&#125;" class="ui centered mini image">--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui horizontal   small divided link list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è‡ªä¸»å¼€å‘åšå®¢ç»¼åˆç½‘ç«™å…¬å¸<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è”ç³»æˆ‘ä»¬<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>äº¬ICPè¯090287<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>#åˆ†ç±»é¡µé¢</p><p>##ç”¨æˆ·ç•Œé¢</p><p>å®ƒåœ¨registrationæ–‡ä»¶å¤¹ä¸‹<br>ç™»å½•é¡µé¢ï¼Œ ç»§æ‰¿baseæ–‡ä»¶å¤¹çš„baseå†…å®¹ï¼Œç„¶åæ·»åŠ è‡ªå·±çš„å†…å®¹</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">&#123;% extends "base/base.html" %&#125;&#123;% load static %&#125;&#123;% block title %&#125; ç™»å½• &#123;% endblock title %&#125;&#123;% block content %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>v-account-body<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui middle aligned center aligned grid<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column v-account<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui teal image header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                ç™»å½•è´¦æˆ·        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui large form<span class="token punctuation">"</span></span> <span class="token attr-name">novalidate</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>userprofile:login<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span>              <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            &#123;% csrf_token %&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui stacked segment<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>field<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui left icon input<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user icon<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>                        &#123;&#123;form.username&#125;&#125;                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>field<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui left icon input<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lock icon<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>                        &#123;&#123;form.password&#125;&#125;                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hidden<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>next<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123; next &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui fluid large teal submit button<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç™»å½•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            &#123;% include "base/form_errors.html" %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui message<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>userprofile:signup<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ³¨å†Œ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>&#123;% endblock content %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è§†é¢‘ç•Œé¢"><a href="#è§†é¢‘ç•Œé¢" class="headerlink" title="è§†é¢‘ç•Œé¢"></a>è§†é¢‘ç•Œé¢</h2>]]></content>
      
      
      <categories>
          
          <category> Djangoè§†é¢‘ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoè§†é¢‘ç½‘ç«™æ­å»º--step2æ³¨å†Œç™»å½•åŠŸèƒ½</title>
      <link href="/post/django-shi-pin-wang-zhan-da-jian/step2-zhu-ce-deng-lu-gong-neng/"/>
      <url>/post/django-shi-pin-wang-zhan-da-jian/step2-zhu-ce-deng-lu-gong-neng/</url>
      
        <content type="html"><![CDATA[<p>#æ³¨å†Œç™»å½•åŠŸèƒ½</p><p>ç”¨æˆ·æ³¨å†Œç™»å½•æ˜¯ä¸€ä¸ªç½‘ç«™çš„åŸºæœ¬åŠŸèƒ½ï¼Œdjangoå¯¹è¿™éƒ¨åˆ†è¿›è¡Œäº†å¾ˆå¥½çš„å°è£…ï¼Œ</p><p>æˆ‘ä»¬åªéœ€è¦åœ¨djangoçš„åŸºç¡€ä¸Šåšäº›ç®€å•çš„ä¿®æ”¹å°±å¯ä»¥è¾¾åˆ°æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœã€‚</p><p>åœ¨æœ¬è®²ä¸­ï¼Œæˆ‘ä»¬ä¼šç”¨åˆ°userä¸­çš„ç”¨æˆ·æˆæƒæ–¹é¢çš„ä¸€äº›å‡½æ•°ï¼Œè¿˜ä¼šå¯¹djangoä¸­çš„userè¿›è¡Œæ‰©å±•ï¼Œä»¥åŠdjangoä¸­çš„forméªŒè¯ã€‚</p><p>#åˆ›å»ºusersåº”ç”¨</p><p>djangoçš„è®¾è®¡å“²å­¦æ˜¯ï¼Œä¸€ä¸ªåº”ç”¨åªæä¾›ä¸€ç§åŠŸèƒ½ï¼Œæ¯”å¦‚usersåº”ç”¨åªæä¾›ç”¨æˆ·ç›¸å…³åŠŸèƒ½ï¼Œcommentåº”ç”¨åªæä¾›è¯„è®ºç›¸å…³åŠŸèƒ½ï¼Œ</p><p>è¿™èƒ½æé«˜ä»£ç çš„é‡å¤åˆ©ç”¨ç‡ã€‚</p><p>åœ¨djangoä¸­ï¼Œåªéœ€è¦ä¸‹é¢ä¸€æ¡å‘½ä»¤ï¼Œå³å¯å»ºç«‹usersåº”ç”¨</p><pre><code>python3 manage.py startapp userprofile</code></pre><p>###å»ºè¡¨</p><p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç”¨æˆ·è¡¨ï¼Œç”¨æ¥å®ç°ç™»å½•æ³¨å†ŒåŠŸèƒ½ï¼Œè™½ç„¶djangoå·²ç»è‡ªå¸¦æ¥ç”¨æˆ·ç™»å½•æ³¨å†ŒåŠŸèƒ½ï¼Œä¹Ÿæœ‰ç›¸åº”çš„è¡¨ï¼Œä½†æ˜¯ä¸ç¬¦åˆä¸­å›½äººä¹ æƒ¯ï¼Œéœ€è¦æˆ‘ä»¬å¯¹useræ¨¡å‹è¿›è¡Œè‡ªå®šä¹‰ã€‚</p><p>å®ç°è‡ªå®šä¹‰Useræ¨¡å‹æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯ç»§æ‰¿AbstractBaseUserï¼ŒAbstractBaseUserå®ç°äº†Userçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œæˆ‘ä»¬åªéœ€åŠ ä¸€äº›é¢å¤–çš„å­—æ®µè¿›è¡Œè¡¥å……å³å¯ã€‚</p><p>Useræ¨¡å‹åŸæœ‰çš„å­—æ®µæœ‰ï¼š</p><pre><code>usernamepasswordlast_loginis_superuserfirst_namelast_nameemailis_staffis_activedate_joined</code></pre><p>è¿™äº›éƒ½æ˜¯æœ€åŸºæœ¬çš„å­—æ®µï¼Œå¹¶ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚</p><p>æ ¹æ®ç½‘ç«™è‡ªèº«ä¸šåŠ¡ï¼Œæˆ‘ä»¬åˆæ·»åŠ äº†ä¸‹é¢çš„å­—æ®µ</p><pre><code>nickname(æ˜µç§°)avatar(å¤´åƒ)mobile(æ‰‹æœºå·)gender(æ€§åˆ«)subscribe(æ˜¯å¦è®¢é˜…)</code></pre><p>æˆ‘ä»¬åªéœ€åœ¨userprofile/models.pyä¸­å†™å…¥ä»£ç </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>models <span class="token keyword">import</span> AbstractUser<span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models<span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">(</span>AbstractUser<span class="token punctuation">)</span><span class="token punctuation">:</span>    GENDER_CHOICES <span class="token operator">=</span> <span class="token punctuation">(</span>        <span class="token punctuation">(</span><span class="token string">'M'</span><span class="token punctuation">,</span> <span class="token string">'ç”·'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">(</span><span class="token string">'F'</span><span class="token punctuation">,</span> <span class="token string">'å¥³'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">)</span>    nickname <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>    avatar <span class="token operator">=</span> models<span class="token punctuation">.</span>FileField<span class="token punctuation">(</span>upload_to<span class="token operator">=</span><span class="token string">'avatar/'</span><span class="token punctuation">)</span>    mobile <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> unique<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">13</span><span class="token punctuation">)</span>    gender <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> choices<span class="token operator">=</span>GENDER_CHOICES<span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    subscribe <span class="token operator">=</span> models<span class="token punctuation">.</span>BooleanField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        db_table <span class="token operator">=</span> <span class="token string">"tb_user"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>genderæ˜¯æ€§åˆ«å­—æ®µï¼Œå…¶ä¸­ç”¨åˆ°äº†choices=GENDER_CHOICESã€‚è¿™ç§æ–¹å¼å¸¸å¸¸ç”¨åœ¨ä¸‹æ‹‰æ¡†æˆ–å•å¤šé€‰æ¡†ï¼Œä¾‹å¦‚ Må¯¹åº”ç”· Få¯¹åº”å¥³ã€‚</code></pre><p>##urlé…ç½®</p><p>åœ¨userprofileæ–‡ä»¶å¤¹ä¸‹é¢ï¼Œæ–°å»ºurls.pyæ–‡ä»¶ï¼Œå†™å…¥ç™»å½•ã€æ³¨å†Œå’Œé€€å‡ºçš„urlä¿¡æ¯ã€‚</p><p>app_nameæ˜¯å‘½åç©ºé—´ï¼Œæˆ‘ä»¬å‘½åä¸ºâ€˜usersâ€™ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> viewsapp_name <span class="token operator">=</span> <span class="token string">'userprofile'</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    path<span class="token punctuation">(</span><span class="token string">'login/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>login<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'login'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    path<span class="token punctuation">(</span><span class="token string">'signup/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>signup<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'signup'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    path<span class="token punctuation">(</span><span class="token string">'logout/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>logout<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'logout'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åŒæ—¶æ›´æ”¹ä¸»è·¯ç”±è¡¨ï¼Œå³ä¿®æ”¹å·¥ç¨‹æ–‡ä»¶ä¸‹çš„urls.py</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> admin<span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token punctuation">,</span> includeurlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    path<span class="token punctuation">(</span><span class="token string">'admin/'</span><span class="token punctuation">,</span> admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>urls<span class="token punctuation">)</span><span class="token punctuation">,</span>    path<span class="token punctuation">(</span><span class="token string">'userprofile/'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">'userprofile.urls'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åéœ€è¦æ³¨å†Œè¿™ä¸ªAPPï¼Œ åœ¨admin.py ä¸­æ·»åŠ ä¿¡æ¯å¦‚ä¸‹</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> Useradmin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>register<span class="token punctuation">(</span>User<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>åŒæ—¶å°†è¿™ä¸ªappæ³¨å†Œåˆ°è®¾ç½®ä¸­ï¼Œåœ¨settingæ–‡ä»¶ä¸­æ·»åŠ </p><pre class="line-numbers language-python" data-language="python"><code class="language-python">INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token string">'django.contrib.admin'</span><span class="token punctuation">,</span>    <span class="token string">'django.contrib.auth'</span><span class="token punctuation">,</span>    <span class="token string">'django.contrib.contenttypes'</span><span class="token punctuation">,</span>    <span class="token string">'django.contrib.sessions'</span><span class="token punctuation">,</span>    <span class="token string">'django.contrib.messages'</span><span class="token punctuation">,</span>    <span class="token string">'django.contrib.staticfiles'</span><span class="token punctuation">,</span>    <span class="token string">'users'</span><span class="token punctuation">,</span>   <span class="token comment"># æ·»åŠ usersè¿™ä¸ªapp</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦åˆ™å¯èƒ½ä¼šæŠ¥é”™</p><pre class="line-numbers language-none"><code class="language-none">RuntimeError: Model class apps.users.models.User doesn&#39;t declare an explicit app_label and isn&#39;t in an application in INSTALLED_APPS.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>åŒæ—¶ï¼Œç”±äºæˆ‘ä»¬å°†è¦å¤å†™djangoè‡ªå¸¦çš„Userç±»ï¼Œéœ€è¦æ·»åŠ é…ç½®ä¿¡æ¯åˆ°settingä¸­</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">AUTH_USER_MODEL <span class="token operator">=</span> <span class="token string">'userprofile.User'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre><code>è®©Djangoä¸­è‡ªå¸¦çš„userä¸èµ·ä½œç”¨å³å¯</code></pre><p>å¦åˆ™ä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š</p><pre><code>auth.User.groups: (fields.E304) Reverse accessor for &#39;User.groups&#39; clasheswith reverse accessor for &#39;UserProfile.groups&#39;.</code></pre><p>urlè·¯ç”±é…ç½®å¥½äº†ï¼Œæˆ‘ä»¬ä¸‹é¢å°±å¼€å§‹å†™è§†å›¾å‡½æ•°ä»£ç äº†<br>##æ³¨å†Œè¡¨å•</p><p>æˆ‘ä»¬å…ˆæ¥å†™æ³¨å†Œå‡½æ•°ï¼Œå†™æ³¨å†Œï¼Œå½“ç„¶å¾—æœ‰æ³¨å†Œè¡¨å•äº†ï¼Œå¹¸è¿çš„æ˜¯ï¼Œåœ¨djangoä¸­ï¼Œå¯ä»¥ç”¨ä»£ç æ¥ç”Ÿæˆè¡¨å•ã€‚</p><p>æˆ‘ä»¬åªéœ€åœ¨userprofileä¸‹æ–°å»ºforms.pyæ–‡ä»¶ï¼Œç„¶åå†™å…¥æ³¨å†Œè¡¨å•çš„ä»£ç ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> django <span class="token keyword">import</span> forms<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>forms <span class="token keyword">import</span> UserCreationForm<span class="token punctuation">,</span> AuthenticationForm<span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> User<span class="token keyword">class</span> <span class="token class-name">UserLoginForm</span><span class="token punctuation">(</span>AuthenticationForm<span class="token punctuation">)</span><span class="token punctuation">:</span>    username <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>min_length<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span>max_length<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span>                               error_messages<span class="token operator">=</span><span class="token punctuation">&#123;</span>                                   <span class="token string">'min_length'</span><span class="token punctuation">:</span> <span class="token string">'ç”¨æˆ·åä¸å°‘äº4ä¸ªå­—ç¬¦'</span><span class="token punctuation">,</span>                                   <span class="token string">'max_length'</span><span class="token punctuation">:</span> <span class="token string">'ç”¨æˆ·åä¸èƒ½å¤šäº30ä¸ªå­—ç¬¦'</span><span class="token punctuation">,</span>                                   <span class="token string">'required'</span><span class="token punctuation">:</span> <span class="token string">'ç”¨æˆ·åä¸èƒ½ä¸ºç©º'</span><span class="token punctuation">,</span>                               <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                               widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>TextInput<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'placeholder'</span><span class="token punctuation">:</span> <span class="token string">'è¯·è¾“å…¥ç”¨æˆ·å'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    password <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>min_length<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span>max_length<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span>                               error_messages<span class="token operator">=</span><span class="token punctuation">&#123;</span>                                   <span class="token string">'min_length'</span><span class="token punctuation">:</span> <span class="token string">'å¯†ç ä¸å°‘äº8ä¸ªå­—ç¬¦'</span><span class="token punctuation">,</span>                                   <span class="token string">'max_length'</span><span class="token punctuation">:</span> <span class="token string">'å¯†ç ä¸èƒ½å¤šäº30ä¸ªå­—ç¬¦'</span><span class="token punctuation">,</span>                                   <span class="token string">'required'</span><span class="token punctuation">:</span> <span class="token string">'å¯†ç ä¸èƒ½ä¸ºç©º'</span><span class="token punctuation">,</span>                               <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                               widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>PasswordInput<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'placeholder'</span><span class="token punctuation">:</span> <span class="token string">'è¯·è¾“å…¥å¯†ç '</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        model <span class="token operator">=</span> User        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'username'</span><span class="token punctuation">,</span> <span class="token string">'password'</span><span class="token punctuation">]</span>    error_messages <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">'invalid_login'</span><span class="token punctuation">:</span> <span class="token string">'ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯'</span><span class="token punctuation">,</span> <span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">SignUpForm</span><span class="token punctuation">(</span>UserCreationForm<span class="token punctuation">)</span><span class="token punctuation">:</span>    username <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>min_length<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span>                               error_messages<span class="token operator">=</span><span class="token punctuation">&#123;</span>                                   <span class="token string">'min_length'</span><span class="token punctuation">:</span> <span class="token string">'ç”¨æˆ·åä¸å°‘äº4ä¸ªå­—ç¬¦'</span><span class="token punctuation">,</span>                                   <span class="token string">'max_length'</span><span class="token punctuation">:</span> <span class="token string">'ç”¨æˆ·åä¸èƒ½å¤šäº30ä¸ªå­—ç¬¦'</span><span class="token punctuation">,</span>                                   <span class="token string">'required'</span><span class="token punctuation">:</span> <span class="token string">'ç”¨æˆ·åä¸èƒ½ä¸ºç©º'</span><span class="token punctuation">,</span>                               <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                               widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>TextInput<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'placeholder'</span><span class="token punctuation">:</span> <span class="token string">'è¯·è¾“å…¥ç”¨æˆ·å'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    password1 <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>min_length<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span>                                error_messages<span class="token operator">=</span><span class="token punctuation">&#123;</span>                                    <span class="token string">'min_length'</span><span class="token punctuation">:</span> <span class="token string">'å¯†ç ä¸å°‘äº8ä¸ªå­—ç¬¦'</span><span class="token punctuation">,</span>                                    <span class="token string">'max_length'</span><span class="token punctuation">:</span> <span class="token string">'å¯†ç ä¸èƒ½å¤šäº30ä¸ªå­—ç¬¦'</span><span class="token punctuation">,</span>                                    <span class="token string">'required'</span><span class="token punctuation">:</span> <span class="token string">'å¯†ç ä¸èƒ½ä¸ºç©º'</span><span class="token punctuation">,</span>                                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                                widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>PasswordInput<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'placeholder'</span><span class="token punctuation">:</span> <span class="token string">'è¯·è¾“å…¥å¯†ç '</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    password2 <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>min_length<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span>max_length<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span>                                error_messages<span class="token operator">=</span><span class="token punctuation">&#123;</span>                                    <span class="token string">'min_length'</span><span class="token punctuation">:</span> <span class="token string">'å¯†ç ä¸å°‘äº8ä¸ªå­—ç¬¦'</span><span class="token punctuation">,</span>                                    <span class="token string">'max_length'</span><span class="token punctuation">:</span> <span class="token string">'å¯†ç ä¸èƒ½å¤šäº30ä¸ªå­—ç¬¦'</span><span class="token punctuation">,</span>                                    <span class="token string">'required'</span><span class="token punctuation">:</span> <span class="token string">'å¯†ç ä¸èƒ½ä¸ºç©º'</span><span class="token punctuation">,</span>                                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                                widget<span class="token operator">=</span>forms<span class="token punctuation">.</span>PasswordInput<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'placeholder'</span><span class="token punctuation">:</span> <span class="token string">'è¯·ç¡®è®¤å¯†ç '</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        model <span class="token operator">=</span> User        fields <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'username'</span><span class="token punctuation">,</span> <span class="token string">'password1'</span><span class="token punctuation">,</span> <span class="token string">'password2'</span><span class="token punctuation">,</span><span class="token punctuation">)</span>    error_messages <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">'password_mismatch'</span><span class="token punctuation">:</span> <span class="token string">'ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´'</span><span class="token punctuation">,</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬çš„è¡¨å•ä¸€å…±æœ‰ä¸‰ä¸ªå­—æ®µï¼šusernameã€password1ã€password2ï¼Œå®ƒä»¬éƒ½æ˜¯CharFieldç±»å‹ï¼Œwidgetåˆ†åˆ«æ˜¯TextInputå’ŒPasswordInputã€‚</p><p>è€Œä¸”djangoæ˜¯è‡ªå¸¦éªŒè¯çš„ï¼Œåªéœ€è¦æˆ‘ä»¬é…ç½®å¥½error_messageså­—å…¸ï¼Œå½“forméªŒè¯çš„æ—¶å€™ï¼Œå°±ä¼šæ˜¾ç¤ºæˆ‘ä»¬è‡ªå®šä¹‰çš„é”™è¯¯ä¿¡æ¯ã€‚<br>æœ‰äº†æ³¨å†Œè¡¨å•åï¼Œå°±å¯ä»¥åœ¨å‰ç«¯æ¨¡æ¿å’Œè§†å›¾å‡½æ•°ä¸­ä½¿ç”¨å®ƒã€‚<br>###æ³¨å†Œè§†å›¾<br>ä¸‹é¢æ˜¯æ³¨å†Œè§†å›¾å‡½æ•°ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth <span class="token keyword">import</span> authenticate<span class="token punctuation">,</span> login <span class="token keyword">as</span> auth_login<span class="token punctuation">,</span> logout <span class="token keyword">as</span> auth_logout<span class="token keyword">from</span> <span class="token punctuation">.</span>forms <span class="token keyword">import</span> SignUpForm<span class="token punctuation">,</span> UserLoginForm<span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">def</span> <span class="token function">signup</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">:</span>        form <span class="token operator">=</span> SignUpForm<span class="token punctuation">(</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">)</span>        <span class="token keyword">if</span> form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            form<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>            username <span class="token operator">=</span> form<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'username'</span><span class="token punctuation">)</span>            raw_password1 <span class="token operator">=</span> form<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'password1'</span><span class="token punctuation">)</span>            user <span class="token operator">=</span> authenticate<span class="token punctuation">(</span>username<span class="token operator">=</span>username<span class="token punctuation">,</span> password<span class="token operator">=</span>raw_password1<span class="token punctuation">)</span>            auth_login<span class="token punctuation">(</span>request<span class="token punctuation">,</span> user<span class="token punctuation">)</span>            <span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">'home'</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">print</span><span class="token punctuation">(</span>form<span class="token punctuation">.</span>errors<span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        form <span class="token operator">=</span> SignUpForm<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'registration/signup.html'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">'form'</span><span class="token punctuation">:</span> form<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">logout</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    auth_logout<span class="token punctuation">(</span>request<span class="token punctuation">)</span>    <span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">'home'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨signupå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡form = SignUpFormåˆå§‹åŒ–ä¸€ä¸ªè¡¨å•ï¼Œå¹¶åœ¨renderå‡½æ•°ä¸­ä¼ é€’ç»™æ¨¡æ¿ã€‚</p><p>æ³¨å†Œæ¨¡æ¿æ–‡ä»¶å†™åœ¨äº†templates/registration/signup.html</p><p>å…³é”®ä»£ç æ˜¯</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui large form<span class="token punctuation">"</span></span> <span class="token attr-name">novalidate</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>userprofile:signup<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>            &#123;% csrf_token %&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui stacked segment<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>field<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                     &#123;&#123;form.username&#125;&#125;                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>field<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                     &#123;&#123;form.password1&#125;&#125;                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>field<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                     &#123;&#123;form.password2&#125;&#125;                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui submit button<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ³¨å†Œ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            &#123;% include "base/form_errors.html" %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>formçš„actionä¸º</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">&#123;% url 'users:signup' %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å³åœ¨url.pyä¸­å®šä¹‰çš„signupå‡½æ•°ã€‚<br>é€šè¿‡postè¯·æ±‚ä¼ é€’ç»™signupï¼Œåœ¨signupä¸­ï¼Œé€šè¿‡å¦‚ä¸‹å››è¡Œä»£ç æ¥å®ç°æ³¨å†Œï¼Œå¹¶è‡ªåŠ¨ç™»å½•çš„ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">username <span class="token operator">=</span> form<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'username'</span><span class="token punctuation">)</span>raw_password1 <span class="token operator">=</span> form<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'password1'</span><span class="token punctuation">)</span>user <span class="token operator">=</span> authenticate<span class="token punctuation">(</span>username<span class="token operator">=</span>username<span class="token punctuation">,</span> password<span class="token operator">=</span>raw_password1<span class="token punctuation">)</span>auth_login<span class="token punctuation">(</span>request<span class="token punctuation">,</span> user<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>###ç™»å½•å‡½æ•°</p><p>ç™»å½•å‡½æ•°ä¸æ³¨å†Œå‡½æ•°çš„æ¨¡å¼æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯å…ˆå†™formï¼Œå†™æ¨¡æ¿ï¼Œæœ€åå†™è§†å›¾å‡½æ•°ã€‚<br>ç”±äºformå’Œæ¨¡æ¿çš„ä»£ç å’Œæ³¨å†ŒåŠŸèƒ½ç±»ä¼¼ï¼Œè¿™é‡Œå°±ä¸è´´äº†ï¼Œå¤§å®¶å¯ä»¥ä¸ŠgithubæŸ¥çœ‹ã€‚</p><p>é‡ç‚¹è®²ä¸€ä¸‹loginè§†å›¾å‡½æ•°</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">login</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">:</span>        next_url <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'next'</span><span class="token punctuation">,</span> <span class="token string">'/'</span><span class="token punctuation">)</span>        form <span class="token operator">=</span> UserLoginForm<span class="token punctuation">(</span>request<span class="token operator">=</span>request<span class="token punctuation">,</span> data<span class="token operator">=</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">)</span>        <span class="token keyword">if</span> form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            username <span class="token operator">=</span> form<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'username'</span><span class="token punctuation">)</span>            password <span class="token operator">=</span> form<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'password'</span><span class="token punctuation">)</span>            user <span class="token operator">=</span> authenticate<span class="token punctuation">(</span>username<span class="token operator">=</span>username<span class="token punctuation">,</span> password<span class="token operator">=</span>password<span class="token punctuation">)</span>            <span class="token keyword">if</span> user <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>                auth_login<span class="token punctuation">(</span>request<span class="token punctuation">,</span> user<span class="token punctuation">)</span>                <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>next_url<span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">print</span><span class="token punctuation">(</span>form<span class="token punctuation">.</span>errors<span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        next_url <span class="token operator">=</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'next'</span><span class="token punctuation">,</span> <span class="token string">'/'</span><span class="token punctuation">)</span>        form <span class="token operator">=</span> UserLoginForm<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>next_url<span class="token punctuation">)</span>    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'registration/login.html'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">'form'</span><span class="token punctuation">:</span> form<span class="token punctuation">,</span> <span class="token string">'next'</span><span class="token punctuation">:</span> next_url<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>```    åœ¨loginå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¤šäº†ä¸€ä¸ªnext_urlå˜é‡ï¼Œ<span class="token builtin">next</span>å¯¹åº”çš„æ˜¯ç™»å½•åè¦è·³è½¬çš„urlï¼Œå…¶å®è¿™æ˜¯ä¸€ç§åœºæ™¯ï¼Œå‡å¦‚ä½ åœ¨è´­ç‰©ç½‘ç«™ä¹°ä¸œè¥¿ï¼Œæœ€åä»˜æ¬¾çš„æ—¶å€™ï¼Œä¼šè·³è½¬åˆ°ä»˜æ¬¾é¡µï¼Œå‡å¦‚ä½ æ²¡æœ‰ç™»å½•ï¼Œç½‘ç«™ä¼šæç¤ºä½ ç™»å½•ï¼Œç™»å½•åï¼Œä¼šå†æ¬¡è·³è½¬åˆ°ä»˜æ¬¾é¡µã€‚å½“ç„¶äº†ï¼Œè·³è½¬åˆ°ç™»å½•é¡µçš„æ—¶å€™ï¼Œéœ€è¦ä½ åœ¨urlåè¿½åŠ next_urlå‚æ•°ï¼Œå¦‚ aaa<span class="token punctuation">.</span> com<span class="token operator">/</span>login<span class="token operator">/</span>?next_url<span class="token operator">=</span>bbb<span class="token punctuation">.</span> comè¿™æ ·ç”¨æˆ·ç™»å½•åå°±ä¼šè·³åˆ°bbb<span class="token punctuation">.</span> com<span class="token comment">###é€€å‡ºå‡½æ•°</span>```python<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth <span class="token keyword">import</span> authenticate<span class="token punctuation">,</span> login <span class="token keyword">as</span> auth_login<span class="token punctuation">,</span> logout <span class="token keyword">as</span> auth_logout<span class="token keyword">def</span> <span class="token function">logout</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    auth_logout<span class="token punctuation">(</span>request<span class="token punctuation">)</span>    <span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">'home'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é€€å‡ºåŠŸèƒ½ï¼Œä»…éœ€è¦ä¸€è¡Œä»£ç  auth_logout(request) å°±okäº†ã€‚</p><p>##å…¶ä»–<br>###é™æ€æ–‡ä»¶çš„é…ç½®<br>éœ€è¦çš„é™æ€æ–‡ä»¶éƒ½å­˜æ”¾åˆ°staticè¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹ç»Ÿä¸€ç®¡ç†<br>åŒ…å«ä¸‰ä¸ªæ–¹é¢css img  js </p><p>åœ¨settingsä¸­æ·»åŠ å¦‚ä¸‹</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">STATIC_URL <span class="token operator">=</span> <span class="token string">'/static/'</span>STATICFILES_DIRS <span class="token operator">=</span> <span class="token punctuation">(</span>    os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>BASE_DIR<span class="token punctuation">,</span> <span class="token string">"static"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨çš„semantic-uiæ’ä»¶<br>Semantic UI</p><p>è¿™æ˜¯ä¸€ä¸ªè¯­ä¹‰åŒ–çš„UIæ¡†æ¶ï¼Œç•Œé¢åšçš„æ¯”è¾ƒå¥½ï¼Œé£æ ¼å’Œbootstrapæœ‰ç‚¹åƒï¼Œæ¯”è¾ƒé€‚ç”¨äºå“åº”å¼å¼€å‘ã€‚</p><p>è¿™ä¸ªæ’ä»¶é‡Œé¢æœ‰ä¸€äº›è®¿é—®è°·æ­Œçš„å†…å®¹ï¼Œç›´æ¥å¼•ç”¨çš„è¯ï¼Œå›½å†…ç½‘ç»œå¯èƒ½æœ‰çš„å†…å®¹è®¿é—®ä¸äº†ï¼Œæˆ–è€…åŠ è½½æ¯”è¾ƒæ…¢<br><a href="https://cdn.bootcdn.net/ajax/libs/semantic-ui/2.4.1/semantic.min.css">https://cdn.bootcdn.net/ajax/libs/semantic-ui/2.4.1/semantic.min.css</a></p><p>æ‰€ä»¥æœ€å¥½è¿˜æ˜¯ä»githubä¸ŠæŠŠè¿™ä¸ªæ’ä»¶ä¸‹è½½ä¸‹æ¥ï¼Œç‚¹å‡»è¿™é‡Œè¿›å…¥github <a href="https://github.com/Semantic-Org/Semantic-UI">https://github.com/Semantic-Org/Semantic-UI</a><br>ç›´æ¥æŠŠæ•´ä¸ªé¡¹ç›®ä½œä¸ºzipä¸‹è½½ä¸‹æ¥ã€‚</p><p>åœ¨distæ–‡ä»¶å¤¹ä¸­å°†semantic.min.jså’Œsemantic.min.csså¤åˆ¶åˆ°æ–‡ä»¶å¤¹ä¸­ï¼Œè¿™é‡Œæ–‡ä»¶å¤¹çš„ç»“æ„å’Œä¸Šé¢çš„Element-UIå·®ä¸å¤šï¼Œæ–°å»ºä¸€ä¸ªsemantic-uiæ–‡ä»¶å¤¹æ”¾ç½®ã€‚</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token comment">&lt;!-- å¼•å…¥semantic-uiæ–‡ä»¶        --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>semantic-ui/semantic.min.css<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>semantic-ui/semantic.min.js<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>css/semantic.custom.css<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>css/style.css<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>###templateæ–‡ä»¶çš„é…ç½®<br>æ‰€æœ‰è§†å›¾æ–‡ä»¶å³viewsæ–‡ä»¶ç»Ÿä¸€æ”¾å…¥templatesæ–‡ä»¶å¤¹ä¸‹<br>å°†å…¶æ·»åŠ åˆ°è®¾ç½®ä¸­</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">TEMPLATES <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>        <span class="token string">'BACKEND'</span><span class="token punctuation">:</span> <span class="token string">'django.template.backends.django.DjangoTemplates'</span><span class="token punctuation">,</span>        <span class="token string">'DIRS'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>BASE_DIR<span class="token punctuation">,</span> <span class="token string">'templates'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># é…ç½®è§†å›¾æ–‡ä»¶</span>        <span class="token string">'APP_DIRS'</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">,</span>        <span class="token string">'OPTIONS'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>            <span class="token string">'context_processors'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>                <span class="token string">'django.template.context_processors.debug'</span><span class="token punctuation">,</span>                <span class="token string">'django.template.context_processors.request'</span><span class="token punctuation">,</span>                <span class="token string">'django.contrib.auth.context_processors.auth'</span><span class="token punctuation">,</span>                <span class="token string">'django.contrib.messages.context_processors.messages'</span><span class="token punctuation">,</span>            <span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Djangoè§†é¢‘ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoç»¼åˆç¯‡ä¹‹è‡ªå®šä¹‰Commandç”Ÿæˆåˆå§‹æ•°æ®</title>
      <link href="/post/django-quan-wang-zhan-da-jian/django-zong-he-pian-zhi-zi-ding-yi-command-sheng-cheng-chu-shi-shu-ju/"/>
      <url>/post/django-quan-wang-zhan-da-jian/django-zong-he-pian-zhi-zi-ding-yi-command-sheng-cheng-chu-shi-shu-ju/</url>
      
        <content type="html"><![CDATA[<p>#Djangoâ€“è‡ªå®šä¹‰ Command å‘½ä»¤<br>Django å¯¹äºå‘½ä»¤çš„æ·»åŠ æœ‰ä¸€å¥—è§„èŒƒï¼Œä½ å¯ä»¥ä¸ºæ¯ä¸ªapp æŒ‡å®šå‘½ä»¤ã€‚</p><p>é€šä¿—ä¸€ç‚¹è®²ï¼Œæ¯”å¦‚åœ¨ä½¿ç”¨manage.pyæ–‡ä»¶æ‰§è¡Œå‘½ä»¤çš„æ—¶å€™ï¼Œå¯ä»¥è‡ªå®šåˆ¶è‡ªå·±çš„å‘½ä»¤ï¼Œæ¥å®ç°å‘½ä»¤çš„æ‰©å……ã€‚</p><p>##commandsçš„åˆ›å»º</p><pre><code>1.åœ¨appå†…åˆ›å»ºä¸€ä¸ªmanagementçš„pythonç›®å½•2.åœ¨managementç›®å½•é‡Œé¢åˆ›å»ºcommandsçš„pythonæ–‡ä»¶å¤¹3.åœ¨commandsæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä»»æ„pyæ–‡ä»¶</code></pre><p>æ­¤æ—¶pyæ–‡ä»¶åå°±æ˜¯ä½ çš„è‡ªå®šåˆ¶å‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢æ–¹å¼æ‰§è¡Œ</p><pre class="line-numbers language-shell" data-language="shell"><div class="caption"><span>script</span></div><code class="language-shell">python manage.py å‘½ä»¤å<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>Djangoçš„Commandå‘½ä»¤æ˜¯è¦æ”¾åœ¨ä¸€ä¸ªappçš„management/commandsç›®å½•ä¸‹çš„ã€‚</p><p>è¯·ç¡®ä¿managementå’Œmanagement/commandsç›®å½•å†…éƒ½åŒ…å«__init__.pyæ–‡ä»¶</p><p>  é¦–å…ˆå¯¹äºæ–‡ä»¶åæ²¡ä»€ä¹ˆè¦æ±‚ï¼Œå†…éƒ¨éœ€è¦å®šä¹‰ä¸€ä¸ªCommandç±»å¹¶ç»§æ‰¿BaseCommandç±»æˆ–å…¶å­ç±»ã€‚</p><p>å®ƒå¿…é¡»å®šä¹‰ä¸€ä¸ªCommandç±»å¹¶æ‰©å±•è‡ªBaseCommandæˆ–å…¶å­ç±»ã€‚</p><pre><code>å…¶ä¸­helpæ˜¯commandåŠŸèƒ½ä½œç”¨ç®€ä»‹ï¼Œhandleå‡½æ•°æ˜¯ä¸»å¤„ç†ç¨‹åºï¼Œadd_argumentså‡½æ•°æ˜¯ç”¨æ¥æ¥æ”¶å¯é€‰å‚æ•°çš„</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>core<span class="token punctuation">.</span>management<span class="token punctuation">.</span>base <span class="token keyword">import</span> BaseCommand<span class="token punctuation">,</span> CommandError<span class="token keyword">from</span> article<span class="token punctuation">.</span>models <span class="token keyword">import</span> ArticlePost  è‡ªå·±çš„<span class="token keyword">class</span> <span class="token class-name">Command</span><span class="token punctuation">(</span>BaseCommand<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token builtin">help</span> <span class="token operator">=</span> <span class="token string">'Closes the specified article_id'</span>    <span class="token keyword">def</span> <span class="token function">add_arguments</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> parser<span class="token punctuation">)</span><span class="token punctuation">:</span>        parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'article_id'</span><span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token string">'+'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">handle</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>options<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> article_id <span class="token keyword">in</span> options<span class="token punctuation">[</span><span class="token string">'article_id'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>            <span class="token keyword">try</span><span class="token punctuation">:</span>                article <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span>pk<span class="token operator">=</span>article_id<span class="token punctuation">)</span>            <span class="token keyword">except</span> Poll<span class="token punctuation">.</span>DoesNotExist<span class="token punctuation">:</span>                <span class="token keyword">raise</span> CommandError<span class="token punctuation">(</span><span class="token string">'article "%s" does not exist'</span> <span class="token operator">%</span> article_id<span class="token punctuation">)</span>            poll<span class="token punctuation">.</span>opened <span class="token operator">=</span> <span class="token boolean">False</span>            poll<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>            self<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'Successfully closed article "%s"'</span> <span class="token operator">%</span> article_id<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯é€‰å‚æ•°</p><p>å¯ä½¿ç”¨add_argumentï¼ˆï¼‰æ–¹æ³•ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token comment"># __author__ = 'dandy'</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>core<span class="token punctuation">.</span>management<span class="token punctuation">.</span>base <span class="token keyword">import</span> BaseCommand<span class="token keyword">class</span> <span class="token class-name">Command</span><span class="token punctuation">(</span>BaseCommand<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">add_arguments</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> parser<span class="token punctuation">)</span><span class="token punctuation">:</span>        parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token string">'+'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">)</span>        parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--delete'</span><span class="token punctuation">,</span>                            action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span>                            dest<span class="token operator">=</span><span class="token string">'delete'</span><span class="token punctuation">,</span>                            default<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>                            <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'Delete poll instead of closing it'</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">handle</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>options<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>optionsé‡Œé¢ç›´æ¥å–å‚æ•°å°±å¯ä»¥äº†ã€‚<br>æ–¹æ³•<br>è¿”å›djangoç‰ˆæœ¬å·ï¼šBaseCommand.get_version()<br>å‘½ä»¤çš„çœŸæ­£é€»è¾‘ã€‚å­ç±»å¿…é¡»å®ç°è¿™ä¸ªæ–¹æ³•ã€‚ï¼šBaseCommand.handle()</p><p>##å°†æœ¬åœ°å†…å®¹æœ€ä¸ºåˆå§‹æ•°æ®å†™å…¥æ–‡ç« </p><p>æœ€ä¸»è¦çš„å°±æ˜¯è·å–æœ¬åœ°æ–‡ç« åˆ—è¡¨</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">current_article_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>BASE_DIR<span class="token punctuation">,</span> <span class="token string">'md'</span><span class="token punctuation">)</span><span class="token comment"># é€šè¿‡BASE_DIR æ‰¾åˆ°å­˜è´®æ–‡ç« çš„ç›®å½•</span><span class="token keyword">print</span><span class="token punctuation">(</span>current_article_dir<span class="token punctuation">)</span>article_lists <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>getstatusoutput<span class="token punctuation">(</span><span class="token string">'ls %s'</span> <span class="token operator">%</span> current_article_dir<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span>  <span class="token comment">#é€šè¿‡subprocess å‘½ä»¤å¾—åˆ°å½“å‰ç›®å½•ä¸‹çš„å†…å®¹</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æœ€ç»ˆå®ç°ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> os<span class="token keyword">import</span> subprocess<span class="token keyword">from</span> myblog<span class="token punctuation">.</span>settings <span class="token keyword">import</span> BASE_DIR<span class="token keyword">from</span> article<span class="token punctuation">.</span>models <span class="token keyword">import</span> ArticlePost<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth <span class="token keyword">import</span> get_user_model<span class="token keyword">from</span> django<span class="token punctuation">.</span>core<span class="token punctuation">.</span>management<span class="token punctuation">.</span>base <span class="token keyword">import</span> BaseCommand<span class="token keyword">class</span> <span class="token class-name">Command</span><span class="token punctuation">(</span>BaseCommand<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token builtin">help</span> <span class="token operator">=</span> <span class="token string">'create blog data'</span>    <span class="token keyword">def</span> <span class="token function">handle</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>options<span class="token punctuation">)</span><span class="token punctuation">:</span>        user <span class="token operator">=</span> get_user_model<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get_or_create<span class="token punctuation">(</span>            email<span class="token operator">=</span><span class="token string">'test@test.com'</span><span class="token punctuation">,</span> username<span class="token operator">=</span><span class="token string">'æµ‹è¯•ç”¨æˆ·'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'test123456'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>        current_article_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>BASE_DIR<span class="token punctuation">,</span> <span class="token string">'md'</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>current_article_dir<span class="token punctuation">)</span>        article_lists <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>getstatusoutput<span class="token punctuation">(</span><span class="token string">'ls %s'</span> <span class="token operator">%</span> current_article_dir<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> article_lists<span class="token punctuation">:</span>            title <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>splitext<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>            f_flag <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>current_article_dir<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span>            body <span class="token operator">=</span> f_flag<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>            f_flag<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>            article <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get_or_create<span class="token punctuation">(</span>                title<span class="token operator">=</span>title<span class="token punctuation">,</span>                body<span class="token operator">=</span>body<span class="token punctuation">,</span>                author<span class="token operator">=</span>user<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>            article<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>write<span class="token punctuation">(</span>self<span class="token punctuation">.</span>style<span class="token punctuation">.</span>SUCCESS<span class="token punctuation">(</span><span class="token string">'create blog data \n'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Djangoå…¨ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--38.æ¨¡æ¿è¿‡æ»¤å™¨å’Œæ ‡ç­¾</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/38.mo-ban-guo-lu-qi-he-biao-qian/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/38.mo-ban-guo-lu-qi-he-biao-qian/</url>
      
        <content type="html"><![CDATA[<p>ç°åœ¨æˆ‘ä»¬å·²ç»å¾ˆç†Ÿæ‚‰Djangoçš„MTVæ¨¡å¼äº†ã€‚æ¨¡æ¿ï¼ˆtemplateï¼‰è´Ÿè´£å¦‚ä½•å»å±•ç¤ºæ•°æ®ï¼Œè€Œè§†å›¾ï¼ˆviewï¼‰è´Ÿè´£ç­›é€‰å‡ºæ­£ç¡®çš„æ•°æ®ã€‚å› æ­¤é€šå¸¸æ¥è¯´é€»è¾‘éƒ½æ˜¯æ”¾åˆ°è§†å›¾ä¸­çš„ï¼Œä½†æ¨¡æ¿ä¹Ÿéœ€è¦ä¸€äº›<strong>å’Œè¡¨ç¤ºç›¸å…³çš„é€»è¾‘</strong>ï¼šæ¯”å¦‚å¾ªç¯å±•ç¤ºï¼ˆå¦‚<code>&#123;% for ... %&#125;</code>ï¼‰ã€æˆ–è€…ä»¥æŸç§ç‰¹å®šæ ¼å¼è¾“å‡ºï¼ˆå¦‚<code>&#123;&#123; ...|date:'Y-m-d' &#125;&#125;</code>ï¼‰ç­‰ï¼Œè¿™äº›åŠŸèƒ½éƒ½æ˜¯é æ¨¡æ¿çš„<strong>è¿‡æ»¤å™¨ï¼ˆfiltersï¼‰</strong>å’Œ<strong>æ ‡ç­¾ï¼ˆtagsï¼‰</strong>å®ç°çš„ã€‚</p><p>Djangoçš„æ¨¡æ¿è¯­è¨€åŒ…å«äº†å¾ˆå¤šå†…ç½®çš„è¿‡æ»¤å™¨å’Œæ ‡ç­¾ï¼Œè®¾è®¡ç›®çš„æ˜¯æ»¡è¶³åº”ç”¨éœ€è¦å ä½é€»è¾‘éœ€æ±‚ã€‚ä½†æœ‰çš„æ—¶å€™è¿™äº›é€šç”¨çš„åŠŸèƒ½æ»¡è¶³ä¸äº†ä½ çš„æŸäº›éœ€æ±‚ï¼Œè¿™æ—¶å€™å°±éœ€è¦è‡ªå®šä¹‰è¿‡æ»¤å™¨å’Œæ ‡ç­¾æ¥å®ç°äº†ã€‚</p><h2 id="å‰ç½®æ¡ä»¶"><a href="#å‰ç½®æ¡ä»¶" class="headerlink" title="å‰ç½®æ¡ä»¶"></a>å‰ç½®æ¡ä»¶</h2><p>è¦åœ¨Djangoä¸­ä½¿ç”¨æ¨¡æ¿è¿‡æ»¤å™¨æˆ–æ ‡ç­¾ï¼Œå°±é¦–å…ˆå¾—<strong>æ³¨å†Œ</strong>å®ƒä»¬ã€‚</p><p>æ³¨å†Œæ–¹æ³•å¦‚ä¸‹ï¼š</p><ul><li>åœ¨APPä¸­æ–°å»ºåä¸º<code>templatetags</code>çš„ç›®å½•ï¼ˆæ–¹ä¾¿èµ·è§ï¼Œæ•™ç¨‹é€‰æ‹©äº†<code>article</code>è¿™ä¸ªAPPï¼‰</li><li>åœ¨æ­¤ç›®å½•ä¸­æ–°å»ºåä¸º<code>__init__.py</code>çš„ç©ºæ–‡ä»¶ï¼Œä½¿å¾—æ­¤ç›®å½•è¢«è§†ä½œä¸€ä¸ªPythonçš„åŒ…</li><li>åœ¨æ­¤ç›®å½•ä¸­æ–°å»ºpythonæ–‡ä»¶ï¼ˆæ¯”å¦‚<code>my_filters_and_tags.py</code>ï¼‰ï¼Œå°±å¯ä»¥åœ¨é‡Œé¢æ„‰å¿«çš„å†™ä»£ç å•¦</li></ul><p>å®Œæˆåçš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>    __init__<span class="token punctuation">.</span>py    views<span class="token punctuation">.</span>py    models<span class="token punctuation">.</span>py    <span class="token comment"># æ–°å¢ç›®å½•</span>    templatetags<span class="token operator">/</span>        __init__<span class="token punctuation">.</span>py  <span class="token comment"># ç©ºæ–‡ä»¶</span>        my_filters_and_tags<span class="token punctuation">.</span>py  <span class="token comment"># å³å°†å†™ä»£ç çš„åœ°æ–¹</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>è¯·æ³¨æ„</strong>ï¼š</p><ul><li>ç›®å½•å¿…é¡»ä½äºå·²æ³¨å†Œçš„APPä¸­ï¼Œè¿™æ˜¯å‡ºäºå®‰å…¨æ€§çš„è€ƒè™‘</li><li>æ–°å»ºç›®å½•åï¼Œå¿…é¡»æ‰‹åŠ¨é‡å¯æœåŠ¡å™¨ï¼Œé‡Œé¢çš„è¿‡æ»¤å™¨å’Œæ ‡ç­¾æ‰èƒ½ç”Ÿæ•ˆ</li></ul><p>å‰ç½®æ¡ä»¶å°±å®Œæˆäº†ï¼Œç„¶åéœ€è¦å°†å…¶æ·»åŠ åˆ°é…ç½®æ–‡ä»¶ä¸­å»</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">TEMPLATES <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token string">'OPTIONS'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>            <span class="token string">'context_processors'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>                   <span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token string">'libraries'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>                <span class="token string">'my_customs_tag'</span><span class="token punctuation">:</span> <span class="token string">'yourappname.templatetags.yourfiletername'</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•å†™ä¸€ä¸ªæ¨¡æ¿è¿‡æ»¤å™¨ã€‚</p><h2 id="æ¨¡æ¿è¿‡æ»¤å™¨"><a href="#æ¨¡æ¿è¿‡æ»¤å™¨" class="headerlink" title="æ¨¡æ¿è¿‡æ»¤å™¨"></a>æ¨¡æ¿è¿‡æ»¤å™¨</h2><p>è¿‡æ»¤å™¨<code>filter</code>çš„è¡¨ç°å½¢å¼ä¸ºç´§è·Ÿåœ¨ä¸Šä¸‹æ–‡åé¢çš„ç®¡é“ç¬¦<code>|</code>ï¼Œç®¡é“ç¬¦åé¢æ˜¯filterçš„åç§°ï¼š<code>&#123;&#123; ...|filter_name &#125;&#125;</code>ã€‚æœ‰çš„filterè¿˜å¯ä»¥å¸¦æœ‰å‚æ•°ï¼š<code>&#123;&#123; ...|filter_name:var &#125;&#125;</code>ã€‚</p><blockquote><p>æ³¨æ„è¿‡æ»¤å™¨åç§°çš„å†’å·åé¢ä¸èƒ½æœ‰ç©ºæ ¼ã€‚</p></blockquote><p><code>filter</code>è¿™ä¸ªåå­—å¯èƒ½ä¼šè®©ä½ è¯¯è®¤ä¸ºå®ƒåªæ˜¯ç”¨æ¥ç­›é€‰æŸäº›ç‰¹å®šæ•°æ®çš„ï¼Œä½†å®é™…ä¸Šå®ƒè¿œä¸æ­¢è¿™ç‚¹åŠŸèƒ½ã€‚å®ƒå¯ä»¥æ”¹å˜ä¸Šä¸‹æ–‡çš„æœ€ç»ˆå±•ç¤ºæ•ˆæœï¼Œä¹Ÿå¯ä»¥å°†ä¸Šä¸‹æ–‡é€šè¿‡è¿ç®—è¾“å‡ºä¸ºç‰¹å®šçš„å€¼ã€‚</p><h3 id="å°è¯•ç‰›åˆ€"><a href="#å°è¯•ç‰›åˆ€" class="headerlink" title="å°è¯•ç‰›åˆ€"></a>å°è¯•ç‰›åˆ€</h3><p>è¦æˆä¸ºä¸€ä¸ªå¯ç”¨çš„<code>filter</code>ï¼Œæ–‡ä»¶ä¸­å¿…é¡»åŒ…å«ä¸€ä¸ªåä¸º <code>register</code> çš„æ¨¡å—çº§å˜é‡ï¼Œå®ƒæ˜¯ä¸€ä¸ª <code>template.Library</code> å®ä¾‹ï¼Œæ‰€æœ‰çš„<code>filters</code>å‡åœ¨å…¶ä¸­æ³¨å†Œã€‚æ‰€ä»¥åœ¨<code>my_filter_and_tags.py</code>æ–‡ä»¶ä¸­è¾“å…¥ä»¥ä¸‹å†…å®¹:</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>templatetags<span class="token operator">/</span>my_filters_and_tags<span class="token punctuation">.</span>py<span class="token keyword">from</span> django <span class="token keyword">import</span> templateregister <span class="token operator">=</span> template<span class="token punctuation">.</span>Library<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥å°±å¯ä»¥åƒå†™æ™®é€šçš„Pythonå‡½æ•°ä¸€æ ·å†™è¿‡æ»¤å™¨äº†ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>templatetags<span class="token operator">/</span>my_filters_and_tags<span class="token punctuation">.</span>py<span class="token keyword">from</span> django <span class="token keyword">import</span> templateregister <span class="token operator">=</span> template<span class="token punctuation">.</span>Library<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token decorator annotation punctuation">@register<span class="token punctuation">.</span>filter</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'transfer'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">transfer</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> arg<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""å°†è¾“å‡ºå¼ºåˆ¶è½¬æ¢ä¸ºå­—ç¬¦ä¸² arg """</span>    <span class="token keyword">return</span> arg<span class="token decorator annotation punctuation">@register<span class="token punctuation">.</span>filter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">lower</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™å­—ç¬¦"""</span>    <span class="token keyword">return</span> value<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>filterå¯ä»¥é€šè¿‡è£…é¥°å™¨è¿›è¡Œæ³¨å†Œã€‚è‹¥æ³¨å†Œè£…é¥°å™¨ä¸­æºå¸¦äº†<code>name</code>å‚æ•°ï¼Œåˆ™å…¶å€¼ä¸ºæ­¤filterçš„åç§°ï¼›è‹¥æœªæºå¸¦ï¼Œåˆ™å‡½æ•°åå°±æ˜¯filterçš„åç§°ã€‚</li><li>filterå¿…é¡»æ˜¯æœ‰ä¸€åˆ°ä¸¤ä¸ªå‚æ•°çš„Pythonå‡½æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸Šä¸‹æ–‡æœ¬èº«ï¼Œç¬¬äºŒä¸ªå‚æ•°åˆ™ç”±filteræä¾›ã€‚ä¸¾ä¸ªæ —å­ï¼Œåœ¨è¿‡æ»¤å™¨ <code>&#123;&#123; var|foo:"bar" &#125;&#125;</code> ä¸­ï¼Œå˜é‡ <code>var</code> ä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå˜é‡ <code>bar</code> åˆ™ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚</li></ul><p>è°ƒç”¨è¿™äº›filterçš„æ–¹æ³•æ˜¯åœ¨æ¨¡æ¿æ–‡ä»¶ä¸­ç”¨<code>&#123;% load ... %&#125;</code>å°†filteræ–‡ä»¶çš„åç§°åŠ è½½è¿›å»ï¼Œåƒè¿™æ ·ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># ä»»æ„æ¨¡æ¿æ–‡ä»¶ä¸­</span><span class="token punctuation">&#123;</span><span class="token operator">%</span> load my_filters_and_tags <span class="token operator">%</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> <span class="token string">'ABC'</span><span class="token operator">|</span>transfer<span class="token punctuation">:</span><span class="token string">'cool'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>  <span class="token comment"># è¾“å‡ºï¼š'cool'</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> <span class="token string">'ABC'</span><span class="token operator">|</span>lower <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>  <span class="token comment"># è¾“å‡ºï¼š 'abc'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ›´äººæ€§åŒ–çš„æ—¶é—´"><a href="#æ›´äººæ€§åŒ–çš„æ—¶é—´" class="headerlink" title="æ›´äººæ€§åŒ–çš„æ—¶é—´"></a>æ›´äººæ€§åŒ–çš„æ—¶é—´</h3><p>äº†è§£å®Œfilterçš„ä½¿ç”¨æ–¹æ³•åï¼Œä¸‹é¢æ¥å†™ç‚¹æ›´å®ç”¨çš„åŠŸèƒ½ã€‚</p><p>å¯¹äººç±»è¿™ç§ç”Ÿç‰©æ¥è¯´ï¼Œ<strong>ç›¸å¯¹æ—¶é—´</strong>é€šå¸¸æ¯”<strong>ç»å¯¹æ—¶é—´</strong>è¦æ›´å®¹æ˜“é˜…è¯»ã€‚<code>å‘è¡¨äº 3å¤©å‰</code>å¯ä»¥è½»æ˜“å¾—çŸ¥æ­¤æ–‡ç« åˆšå‘è¡¨ä¸ä¹…ï¼›è€Œ<code>å‘è¡¨äº 2019å¹´8æœˆ10æ—¥</code>ä½ è¿˜å¾—æƒ³æƒ³ä»Šå¤©åˆ°åº•å‡ å·æ¥ç€ã€‚</p><p>å› æ­¤å†™ä¸€ä¸ªæ˜¾ç¤ºç›¸å¯¹æ—¥æœŸçš„<code>time_since_zh</code>è¿‡æ»¤å™¨ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>templatetags<span class="token operator">/</span>my_filters_and_tags<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>utils <span class="token keyword">import</span> timezone<span class="token keyword">import</span> math<span class="token comment"># è·å–ç›¸å¯¹æ—¶é—´</span><span class="token decorator annotation punctuation">@register<span class="token punctuation">.</span>filter</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'timesince_zh'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">time_since_zh</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">:</span>    now <span class="token operator">=</span> timezone<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span>    diff <span class="token operator">=</span> now <span class="token operator">-</span> value    <span class="token keyword">if</span> diff<span class="token punctuation">.</span>days <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">and</span> diff<span class="token punctuation">.</span>seconds <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> diff<span class="token punctuation">.</span>seconds <span class="token operator">&lt;</span> <span class="token number">60</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token string">'åˆšåˆš'</span>    <span class="token keyword">if</span> diff<span class="token punctuation">.</span>days <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">and</span> diff<span class="token punctuation">.</span>seconds <span class="token operator">>=</span> <span class="token number">60</span> <span class="token keyword">and</span> diff<span class="token punctuation">.</span>seconds <span class="token operator">&lt;</span> <span class="token number">3600</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token builtin">str</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span>floor<span class="token punctuation">(</span>diff<span class="token punctuation">.</span>seconds <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"åˆ†é’Ÿå‰"</span>    <span class="token keyword">if</span> diff<span class="token punctuation">.</span>days <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">and</span> diff<span class="token punctuation">.</span>seconds <span class="token operator">>=</span> <span class="token number">3600</span> <span class="token keyword">and</span> diff<span class="token punctuation">.</span>seconds <span class="token operator">&lt;</span> <span class="token number">86400</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token builtin">str</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span>floor<span class="token punctuation">(</span>diff<span class="token punctuation">.</span>seconds <span class="token operator">/</span> <span class="token number">3600</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"å°æ—¶å‰"</span>    <span class="token keyword">if</span> diff<span class="token punctuation">.</span>days <span class="token operator">>=</span> <span class="token number">1</span> <span class="token keyword">and</span> diff<span class="token punctuation">.</span>days <span class="token operator">&lt;</span> <span class="token number">30</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token builtin">str</span><span class="token punctuation">(</span>diff<span class="token punctuation">.</span>days<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"å¤©å‰"</span>    <span class="token keyword">if</span> diff<span class="token punctuation">.</span>days <span class="token operator">>=</span> <span class="token number">30</span> <span class="token keyword">and</span> diff<span class="token punctuation">.</span>days <span class="token operator">&lt;</span> <span class="token number">365</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token builtin">str</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span>floor<span class="token punctuation">(</span>diff<span class="token punctuation">.</span>days <span class="token operator">/</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"ä¸ªæœˆå‰"</span>    <span class="token keyword">if</span> diff<span class="token punctuation">.</span>days <span class="token operator">>=</span> <span class="token number">365</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token builtin">str</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span>floor<span class="token punctuation">(</span>diff<span class="token punctuation">.</span>days <span class="token operator">/</span> <span class="token number">365</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"å¹´å‰"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»£ç åŠŸèƒ½å¾ˆç®€å•ï¼Œå°±æ˜¯å°†æ–‡ç« å‘å¸ƒæ—¶é—´å’Œå½“å‰æ—¶é—´ä½œæ¯”è¾ƒï¼Œç„¶åè¿”å›é€‚å½“çš„å­—ç¬¦ä¸²ã€‚</p><p>ä¿®æ”¹æ–‡ç« åˆ—è¡¨æ¨¡æ¿æ–‡ä»¶ä¸­ä¸å‘å¸ƒæ—¶é—´ç›¸å…³çš„ä»£ç ï¼ŒæŠŠåˆšå†™çš„filterç”¨ä¸Šï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/list.html...&#123;% load my_filters_and_tags %&#125;...<span class="token comment">&lt;!-- æ—§ä»£ç &#123;&#123; article.created|date:'Y-m-d' &#125;&#125;--></span><span class="token comment">&lt;!-- æ–°ä»£ç  --></span>&#123;&#123; article.created|timesince_zh &#125;&#125;...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190813/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE231.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190813/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE231.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><blockquote><p>å®é™…ä¸ŠDjangoå†…ç½®äº†ä¸€ä¸ª<code>timesince</code>è¿‡æ»¤å™¨ï¼Œåªä¸è¿‡æ˜¾ç¤ºæ—¥æœŸæ˜¯è‹±æ–‡çš„ï¼Œä¸å¤Ÿå‹å¥½ã€‚</p></blockquote><h2 id="æ¨¡æ¿æ ‡ç­¾"><a href="#æ¨¡æ¿æ ‡ç­¾" class="headerlink" title="æ¨¡æ¿æ ‡ç­¾"></a>æ¨¡æ¿æ ‡ç­¾</h2><p>æ¨¡æ¿æ ‡ç­¾ï¼ˆtagï¼‰æ¯”è¿‡æ»¤å™¨æ›´å¤æ‚ï¼ŒåŠŸèƒ½ä¹Ÿæ›´å¼ºå¤§ã€‚</p><p>æ ‡ç­¾<code>tag</code>çš„è¡¨ç°å½¢å¼ä¸º<code>&#123;% tag_name ... %&#125;</code>ï¼Œæ¯”å¦‚æˆ‘ä»¬éå¸¸ç†Ÿæ‚‰çš„å†…ç½®æ ‡ç­¾<code>&#123;% url ... %&#125;</code>ã€<code>&#123;% static ... %&#125;</code>ç­‰ã€‚å¦‚æœå†…ç½®æ ‡ç­¾æ»¡è¶³ä¸äº†ä½ çš„éœ€æ±‚ï¼ŒDjango æä¾›äº†å¾ˆå¤šå¿«æ·æ–¹å¼ï¼Œç®€åŒ–äº†ç¼–å†™ç»å¤§å¤šæ•°ç±»å‹çš„æ ‡ç­¾è¿‡ç¨‹ã€‚</p><h3 id="ç®€å•æ ‡ç­¾"><a href="#ç®€å•æ ‡ç­¾" class="headerlink" title="ç®€å•æ ‡ç­¾"></a>ç®€å•æ ‡ç­¾</h3><p><code>simple_tag</code>å°±æ˜¯æœ€é‡è¦çš„æ ‡ç­¾ç±»å‹ã€‚æ ‡ç­¾çš„æ³¨å†Œæ–¹æ³•è·Ÿè¿‡æ»¤å™¨éå¸¸ç±»ä¼¼ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token decorator annotation punctuation">@register<span class="token punctuation">.</span>simple_tag</span><span class="token keyword">def</span> <span class="token function">change_http_to_https</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">:</span>    new_url <span class="token operator">=</span> url<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'http://'</span><span class="token punctuation">,</span> <span class="token string">'https://'</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> new_url<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>è°ƒç”¨æ—¶åŒæ ·è®°å¾—åœ¨æ¨¡æ¿æ–‡ä»¶ä¸­ç”¨<code>&#123;% load... %&#125;</code>å¼•å…¥ã€‚ç”¨æ³•ä½ åº”è¯¥çŒœå¾—åˆ°ï¼š<code>&#123;% change_http_to_https ... %&#125;</code>ï¼Œè¿™ä¸ªæ ‡ç­¾çš„ä½œç”¨æ˜¯å°†httpé“¾æ¥æ›¿æ¢ä¸ºhttpsé“¾æ¥ã€‚</p><blockquote><p>ç”¨ Django-allauth è¿›è¡Œå¾®åšç™»å½•ï¼Œé»˜è®¤è¿”å›çš„ç”¨æˆ·å¤´åƒæ˜¯ http é“¾æ¥ï¼ˆè™½ç„¶å¾®åšæœ‰ https ç‰ˆæœ¬çš„å¤´åƒï¼‰ã€‚å¦‚æœä½ çš„ç«™ç‚¹å·²ç»å‡çº§ä¸º https äº†ï¼Œåˆä¸æƒ³èŠ±æ—¶é—´å»ç ”ç©¶å¾®åšçš„æ¥å£ï¼Œé‚£ä¹ˆè¿™ä¸ªæ ‡ç­¾å°±å¯ä»¥æ´¾ä¸Šç”¨åœºäº†ã€‚</p><p>é¡ºå¸¦ä¸€è¯´ï¼Œ Django-allauth ç¬¬ä¸‰æ–¹ç™»å½•çš„å¤´åƒ url ä¿å­˜åœ¨ <code>User.socialaccount_set.all.0.get_avatar_url</code> ä¸­ã€‚</p></blockquote><p>ä¸‹é¢è¿™ä¸ªä¾‹å­å¯ä»¥è¿”å›æŒ‡å®šæ ¼å¼çš„æ—¶é—´å­—ç¬¦ä¸²ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> datetime<span class="token decorator annotation punctuation">@register<span class="token punctuation">.</span>simple_tag</span><span class="token keyword">def</span> <span class="token function">current_time</span><span class="token punctuation">(</span>format_string<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">return</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strftime<span class="token punctuation">(</span>format_string<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è°ƒç”¨æ—¶ä½ å¯ä»¥å°†å…¶ä¿å­˜ä¸ºæ¨¡æ¿å˜é‡ï¼Œä»¥ä¾¿ä½ åœ¨æœŸæœ›çš„ä½ç½®å¤šæ¬¡è°ƒç”¨ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token punctuation">&#123;</span><span class="token operator">%</span> current_time <span class="token string">"%Y-%m-%d %I:%M %p"</span> <span class="token keyword">as</span> the_time <span class="token operator">%</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span>p<span class="token operator">></span>The time <span class="token keyword">is</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> the_time <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><span class="token operator">&lt;</span>p<span class="token operator">></span>Again<span class="token punctuation">,</span> the time <span class="token keyword">is</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> the_time <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ¨¡æ¿æ ‡ç­¾ä¹Ÿå¯ä»¥è®¿é—®å½“å‰çš„ä¸Šä¸‹æ–‡ï¼Œåªéœ€è¦åœ¨æ³¨å†Œæ ‡ç­¾æ—¶ä¼ å…¥<code>takes_context</code>å‚æ•°:</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token decorator annotation punctuation">@register<span class="token punctuation">.</span>simple_tag</span><span class="token punctuation">(</span>takes_context<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">current_time</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> format_string<span class="token punctuation">)</span><span class="token punctuation">:</span>    timezone <span class="token operator">=</span> context<span class="token punctuation">[</span><span class="token string">'timezone'</span><span class="token punctuation">]</span>    <span class="token keyword">return</span> your_get_current_time_method<span class="token punctuation">(</span>timezone<span class="token punctuation">,</span> format_string<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯<code>context</code>ã€‚</p><p>ä¸è¿‡æ»¤å™¨ä¸åŒçš„æ˜¯ï¼Œæ ‡ç­¾å¯ä»¥æ¥å—ä»»æ„æ•°é‡çš„ä½ç½®æˆ–å…³é”®å­—å‚æ•°ã€‚ä¾‹å¦‚:</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token decorator annotation punctuation">@register<span class="token punctuation">.</span>simple_tag</span><span class="token keyword">def</span> <span class="token function">my_tag</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>    warning <span class="token operator">=</span> kwargs<span class="token punctuation">[</span><span class="token string">'warning'</span><span class="token punctuation">]</span>    profile <span class="token operator">=</span> kwargs<span class="token punctuation">[</span><span class="token string">'profile'</span><span class="token punctuation">]</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token keyword">return</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨æ¨¡æ¿ä¸­è°ƒç”¨æ—¶ï¼Œä»»æ„æ•°é‡çš„ã€ä»¥ç©ºæ ¼åˆ†éš”çš„å‚æ•°ä¼šè¢«ä¼ é€’ç»™æ¨¡æ¿æ ‡ç­¾ã€‚ä¸ Python ä¸­ç±»ä¼¼ï¼Œå…³é”®å­—å‚æ•°çš„èµ‹å€¼ä½¿ç”¨ç­‰å·ï¼ˆâ€<code>=</code>â€œï¼‰ï¼Œä¸”å¿…é¡»åœ¨ä½ç½®å‚æ•°åæä¾›ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token punctuation">&#123;</span><span class="token operator">%</span> my_tag <span class="token number">123</span> <span class="token string">"abcd"</span> book<span class="token punctuation">.</span>title warning<span class="token operator">=</span>message profile<span class="token operator">=</span>user<span class="token punctuation">.</span>profile <span class="token operator">%</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="åŒ…å«æ ‡ç­¾"><a href="#åŒ…å«æ ‡ç­¾" class="headerlink" title="åŒ…å«æ ‡ç­¾"></a>åŒ…å«æ ‡ç­¾</h3><p>åŒ…å«æ ‡ç­¾å¯ä»¥è®©å¦ä¸€ä¸ªæ¨¡æ¿ä¸ºå½“å‰æ¨¡æ¿æ¸²æŸ“æ•°æ®ã€‚å¬èµ·æ¥æ¯”è¾ƒæ‹—å£ï¼Œè¿˜æ˜¯é€šè¿‡ä¾‹å­æ¥ç†è§£ã€‚</p><p>å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œæ˜¯è¦åœ¨æ–‡ç« è¯¦æƒ…é¡µé¢ä¸­ï¼Œæ˜¾ç¤ºæ‰€æœ‰ç›¸å…³è¯„è®ºçš„å‘å¸ƒæ—¶é—´ã€‚å› æ­¤åœ¨<code>my_filters_and_tags.py</code>ä¸­å†™å…¥ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_filters_and_tags<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token decorator annotation punctuation">@register<span class="token punctuation">.</span>inclusion_tag</span><span class="token punctuation">(</span><span class="token string">'article/tag_list.html'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">show_comments_pub_time</span><span class="token punctuation">(</span>article<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""æ˜¾ç¤ºæ–‡ç« è¯„è®ºçš„å‘å¸ƒæ—¶é—´"""</span>    comments <span class="token operator">=</span> article<span class="token punctuation">.</span>comments<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span><span class="token string">'comments'</span><span class="token punctuation">:</span> comments<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å‡½æ•°ä¼ å…¥çš„å‚æ•°å¯ä»¥æ˜¯æ¨¡æ¿ä¸­çš„ä¸Šä¸‹æ–‡å˜é‡ã€‚å‡½æ•°ä½“å†…éƒ¨å–å¾—äº†æ‰€æœ‰ç›¸å…³è¯„è®ºçš„æŸ¥è¯¢é›†ï¼Œç„¶åæŠŠç»“æœ<code>comments</code>è¿”å›ã€‚æ³¨æ„è¿”å›ç»“æœæ˜¯è¿›å…¥åˆ°<code>tag_list.html</code>è¿™ä¸ªæ¨¡æ¿ä¸­å»äº†ï¼Œå› æ­¤æ–°å»ºå®ƒå¹¶å†™å…¥ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/tag_list.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>&#123;% for comment in comments %&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span> &#123;&#123; comment.created &#125;&#125; <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>&#123;% endfor %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶ååœ¨æ–‡ç« è¯¦æƒ…é¡µé¢çš„æ¨¡æ¿ä¸­ï¼Œéšä¾¿æ‰¾ä¸€ä¸ªä½ç½®å†™å…¥ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/detail.html...&#123;% load my_filters_and_tags %&#125;...&#123;% show_comments_pub_time article %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ·æ–°è¯¦æƒ…é¡µé¢ï¼Œé¡ºåˆ©çš„è¯å°±èƒ½çœ‹åˆ°æ‰€æœ‰è¯„è®ºçš„å‘è¡¨æ—¶é—´éƒ½å±•ç¤ºå‡ºæ¥äº†ã€‚</p><p>åŒ…å«æ ‡ç­¾çš„å¦ä¸€ä¸ªåº”ç”¨åœºæ™¯å°±æ˜¯å„ç§æŒ‰é’®äº†ã€‚æœ‰çš„æŒ‰é’®çœ‹ä¸Šå»é•¿å¾—éƒ½å·®ä¸å¤šï¼Œä½†æ˜¯æ ¹æ®é¡µé¢ä¸åŒä¼šæœ‰ä¸åŒçš„åŠŸèƒ½ï¼Œè¿™æ—¶å€™ä¹Ÿå¯ä»¥ç”¨åŒ…å«æ ‡ç­¾æ¥å®ç°ã€‚</p><p>æ€»ä¹‹ï¼ŒåŒ…å«æ ‡ç­¾å¯ä»¥å°†å¸¸ç”¨çš„æ¨¡æ¿ä»£ç æ‰“åŒ…æˆå°ç»„ä»¶ï¼Œæ–¹ä¾¿é‡å¤åˆ©ç”¨ã€‚</p><blockquote><p>ç›®å‰çš„åšå®¢é¡¹ç›®ä¸­æš‚æ—¶è¿˜ç”¨ä¸åˆ°åŒ…å«æ ‡ç­¾ï¼Œæ‰€ä»¥æ”¾å¿ƒçš„åˆ é™¤ä¸Šé¢çš„ä»£ç å§ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ¨¡æ¿è¿‡æ»¤å™¨å’Œæ ‡ç­¾ï¼Œå¯ä»¥å®Œæˆ<strong>å’Œè¡¨ç¤ºç›¸å…³çš„é€»è¾‘</strong>ï¼Œä»è€Œä½¿è§†å›¾ä¸“æ³¨äºä¸šåŠ¡æ ¸å¿ƒé€»è¾‘ï¼Œæœ‰åˆ©äºç»„ä»¶åŒ–å’Œé€»è¾‘åˆ†ç¦»ã€‚éšç€å­¦ä¹ çš„æ·±å…¥ï¼Œä¼šé€æ¸ä½“ä¼šåˆ°å®ƒçš„é‡è¦æ€§ã€‚</p><p>æœ¬ç« å¯¹å®ƒä»¬åšäº†å…¥é—¨ä»‹ç»ï¼Œä»¥ä¾¿è¯»è€…å¯¹å…¶æœ‰åˆæ­¥çš„æ¦‚å¿µã€‚æ›´è¯¦ç»†çš„è§£é‡Šè¯·è¿›ä¸€æ­¥é˜…è¯»<a href="https://docs.djangoproject.com/en/2.2/howto/custom-template-tags/">Djangoå®˜æ–¹æ–‡æ¡£</a>ã€‚</p><hr><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#100;&#117;&#x73;&#97;&#105;&#112;&#x68;&#111;&#116;&#x6f;&#x40;&#102;&#x6f;&#120;&#x6d;&#97;&#105;&#108;&#x2e;&#99;&#x6f;&#109;">&#100;&#117;&#x73;&#97;&#105;&#112;&#x68;&#111;&#116;&#x6f;&#x40;&#102;&#x6f;&#120;&#x6d;&#97;&#105;&#108;&#x2e;&#99;&#x6f;&#109;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a>æ·»åŠ </li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--32.å¤šçº§è¯„è®º</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/32.duo-ji-ping-lun/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/32.duo-ji-ping-lun/</url>
      
        <content type="html"><![CDATA[<p>ç°åœ¨æˆ‘ä»¬çš„åšå®¢å·²ç»å…·æœ‰è¯„è®ºåŠŸèƒ½äº†ã€‚éšç€æ–‡ç« çš„è¯„è®ºè€…è¶Šæ¥è¶Šå¤šï¼Œæœ‰çš„æ—¶å€™è¯„è®ºè€…ä¹‹é—´ä¹Ÿéœ€è¦äº¤æµï¼Œç”šè‡³éƒ¨åˆ†è¯„è®ºè¿˜èƒ½åˆå¹¶æˆä¸€ä¸ªå°çš„æ•´ä½“ã€‚å› æ­¤æœ€å¥½æ˜¯æœ‰æŸç§æ–¹æ³•å¯ä»¥å°†ç›¸å…³çš„è¯„è®ºèšé›†åˆ°ä¸€èµ·ï¼Œè¿™æ—¶å€™<strong>å¤šçº§è¯„è®º</strong>å°±éå¸¸çš„æœ‰ç”¨äº†ã€‚</p><p>å¤šçº§è¯„è®ºæ„å‘³ç€ä½ éœ€è¦å°†æ¨¡å‹é‡æ–°ç»„ç»‡ä¸º<strong>æ ‘å½¢ç»“æ„</strong>ã€‚â€œæ ‘æ ¹â€æ˜¯ä¸€çº§è¯„è®ºï¼Œè€Œä¼—å¤šâ€œæ ‘å¶â€åˆ™æ˜¯æ¬¡çº§è¯„è®ºã€‚æœ¬æ•™ç¨‹ä¼šä»¥ç¬¬ä¸‰æ–¹åº“<a href="https://github.com/django-mptt/django-mptt">django-mptt</a>ä¸ºåŸºç¡€ï¼Œå¼€å‘å¤šçº§è¯„è®ºåŠŸèƒ½ã€‚</p><blockquote><p>django-mpttæ¨¡å—åŒ…å«äº†æ ‘å½¢æ•°æ®ç»“æ„ä»¥åŠæŸ¥è¯¢ã€ä¿®æ”¹æ ‘å½¢æ•°æ®çš„ä¼—å¤šæ–¹æ³•ã€‚</p><p>ä»»ä½•éœ€è¦æ ‘å½¢ç»“æ„çš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥ç”¨ django-mptt æ¥æ­å»ºã€‚æ¯”å¦‚ç›®å½•ã€‚</p></blockquote><p><strong>æ³¨æ„ï¼š</strong>æœ¬ç« æ–°çŸ¥è¯†ç‚¹è¾ƒå¤šï¼Œè¯·è¯»è€…åšå¥½å¿ƒç†å‡†å¤‡ï¼Œä¸€å®šè¦è€å¿ƒé˜…è¯»ã€‚</p><h2 id="é‡æ„æ¨¡å‹"><a href="#é‡æ„æ¨¡å‹" class="headerlink" title="é‡æ„æ¨¡å‹"></a>é‡æ„æ¨¡å‹</h2><p>æ—¢ç„¶è¦å»ºç«‹æ ‘å½¢ç»“æ„ï¼Œè€çš„è¯„è®ºæ¨¡å‹è‚¯å®šæ˜¯è¦ä¿®æ”¹äº†ã€‚</p><p>é¦–å…ˆå®‰è£…<code>django-mptt</code>ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token operator">></span> pip <span class="token function">install</span> django-mptt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å®‰è£…æˆåŠŸåï¼Œåœ¨é…ç½®ä¸­<strong>æ³¨å†Œ</strong>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_blog<span class="token operator">/</span>settings<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token string">'mptt'</span><span class="token punctuation">,</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™äº›ä½ å·²ç»è½»è½¦ç†Ÿè·¯äº†ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œä¿®æ”¹<strong>è¯„è®ºæ¨¡å‹</strong>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">comment<span class="token operator">/</span>models<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># django-mptt</span><span class="token keyword">from</span> mptt<span class="token punctuation">.</span>models <span class="token keyword">import</span> MPTTModel<span class="token punctuation">,</span> TreeForeignKey<span class="token comment"># æ›¿æ¢ models.Model ä¸º MPTTModel</span><span class="token keyword">class</span> <span class="token class-name">Comment</span><span class="token punctuation">(</span>MPTTModel<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token comment"># æ–°å¢ï¼Œmpttæ ‘å½¢ç»“æ„</span>    parent <span class="token operator">=</span> TreeForeignKey<span class="token punctuation">(</span>        <span class="token string">'self'</span><span class="token punctuation">,</span>        on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">,</span>        null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>        blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>        related_name<span class="token operator">=</span><span class="token string">'children'</span>    <span class="token punctuation">)</span>    <span class="token comment"># æ–°å¢ï¼Œè®°å½•äºŒçº§è¯„è®ºå›å¤ç»™è°, str</span>    reply_to <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>        User<span class="token punctuation">,</span>        null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>        blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>        on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">,</span>        related_name<span class="token operator">=</span><span class="token string">'replyers'</span>    <span class="token punctuation">)</span>        <span class="token comment"># æ›¿æ¢ Meta ä¸º MPTTMeta</span>    <span class="token comment"># class Meta:</span>    <span class="token comment">#     ordering = ('created',)</span>    <span class="token keyword">class</span> <span class="token class-name">MPTTMeta</span><span class="token punctuation">:</span>        order_insertion_by <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'created'</span><span class="token punctuation">]</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…ˆå¼•å…¥<code>MPTT</code>ç›¸å…³æ¨¡å—ï¼Œç„¶åæ”¹åŠ¨ä¸‹åˆ—å‡ ä¸ªä½ç½®ï¼š</p><ul><li>æ¨¡å‹<strong>ä¸å†ç»§æ‰¿</strong>å†…ç½®çš„<code>models.Model</code>ç±»ï¼Œæ›¿æ¢ä¸º<code>MPTTModel</code>ï¼Œå› æ­¤ä½ çš„æ¨¡å‹è‡ªåŠ¨æ‹¥æœ‰äº†å‡ ä¸ªç”¨äºæ ‘å½¢ç®—æ³•çš„æ–°å­—æ®µã€‚ï¼ˆæœ‰å…´è¶£çš„è¯»è€…ï¼Œå¯ä»¥åœ¨è¿ç§»å¥½æ•°æ®ä¹‹ååœ¨SQLiteStudioä¸­æŸ¥çœ‹ï¼‰</li><li><code>parent</code>å­—æ®µæ˜¯å¿…é¡»å®šä¹‰çš„ï¼Œç”¨äºå­˜å‚¨æ•°æ®ä¹‹é—´çš„å…³ç³»ï¼Œä¸è¦å»ä¿®æ”¹å®ƒã€‚</li><li><code>reply_to</code>å¤–é”®ç”¨äºå­˜å‚¨<strong>è¢«è¯„è®ºäºº</strong>ã€‚</li><li>å°†<code>class Meta</code>æ›¿æ¢ä¸º<code>class MPTTMeta</code>ï¼Œå‚æ•°ä¹Ÿæœ‰å°çš„å˜åŒ–ï¼Œè¿™æ˜¯æ¨¡å—çš„é»˜è®¤å®šä¹‰ï¼Œå®é™…åŠŸèƒ½æ˜¯ç›¸åŒçš„ã€‚</li></ul><p>è¿™äº›æ”¹åŠ¨å¤§éƒ¨åˆ†éƒ½æ˜¯<a href="https://django-mptt.readthedocs.io/en/latest/tutorial.html">django-mpttæ–‡æ¡£</a>çš„é»˜è®¤è®¾ç½®ã€‚éœ€è¦è¯´æ˜çš„æ˜¯è¿™ä¸ª<code>reply_to</code>ã€‚</p><p>å…ˆæ€è€ƒä¸€ä¸‹ï¼Œå¤šçº§è¯„è®ºæ˜¯å¦å…è®¸æ— é™çº§æ•°ï¼Ÿæ— é™çº§æ•°å¬èµ·æ¥å¾ˆç¾å¥½ï¼Œä½†æ˜¯åµŒå¥—çš„å±‚çº§å¦‚æœè¿‡å¤šï¼Œåè€Œä¼šå¯¼è‡´ç»“æ„æ··ä¹±ï¼Œå¹¶ä¸”éš¾ä»¥æ’ç‰ˆã€‚æ‰€ä»¥è¿™é‡Œå°±<strong>é™åˆ¶è¯„è®ºæœ€å¤šåªèƒ½ä¸¤çº§</strong>ï¼Œè¶…è¿‡ä¸¤çº§çš„è¯„è®ºä¸€å¾‹é‡ç½®ä¸ºä¸¤çº§ï¼Œç„¶åå†å°†å®é™…çš„è¢«è¯„è®ºäººå­˜å‚¨åœ¨<code>reply_to</code>å­—æ®µä¸­ã€‚</p><blockquote><p>ä¸¾ä¾‹è¯´æ˜ï¼šä¸€çº§è¯„è®ºäººä¸º aï¼ŒäºŒçº§è¯„è®ºäººä¸º bï¼ˆparent ä¸º aï¼‰ï¼Œä¸‰çº§è¯„è®ºäººä¸º cï¼ˆparent ä¸º bï¼‰ã€‚å› ä¸ºæˆ‘ä»¬ä¸å…è®¸è¯„è®ºè¶…è¿‡ä¸¤çº§ï¼Œå› æ­¤å°† c çš„ parent é‡ç½®ä¸º aï¼Œreply_to è®°å½•ä¸º bï¼Œè¿™æ ·å°±èƒ½æ­£ç¡®è¿½æº¯çœŸæ­£çš„è¢«è¯„è®ºè€…äº†ã€‚</p></blockquote><p>æ¨¡å‹ä¿®æ”¹å®Œäº†ï¼Œæ·»åŠ äº†å¾ˆå¤šéç©ºçš„å­—æ®µè¿›å»ï¼Œå› æ­¤æœ€å¥½<strong>å…ˆæ¸…ç©ºæ‰€æœ‰çš„è¯„è®ºæ•°æ®</strong>ï¼Œå†è¿›è¡Œæ•°æ®è¿ç§»ã€‚</p><p>è¿ç§»æ—¶å‡ºç°ä¸‹é¢çš„æç¤ºä¹Ÿä¸è¦æ…Œï¼Œ</p><p>ä¸€å¾‹é€‰æ‹©ç¬¬ 1 é¡¹ã€</p><p><strong>ç„¶åæç¤ºå¡«å…¥æ•°æ®æ—¶ï¼Œç›´æ¥è¾“å…¥ 0 ï¼ˆä¸è¦æŒ‰ç…§æç¤ºè¾“å…¥ timezone.nowï¼Œè¿™æ˜¯æ— æ•ˆå€¼ï¼‰</strong></p><p> å°±å¯ä»¥äº†ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token operator">></span> python manage.py makemigrationsYou are trying to <span class="token function">add</span> a non-nullable field <span class="token string">'level'</span> to comment without a default<span class="token punctuation">;</span> we can<span class="token string">'t do that (the database needs something to populate existing rows).Please select a fix: 1) Provide a one-off default now (will be set on all existing rows with a null value for this column) 2) Quit, and let me add a default in models.pySelect an option: 1Please enter the default value now, as valid PythonThe datetime and django.utils.timezone modules are available, so you can do e.g. timezone.nowType '</span>exit' to <span class="token builtin class-name">exit</span> this prompt<span class="token operator">>></span><span class="token operator">></span> <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>è¦è¿˜ä¸è¡Œï¼Œå°±æŠŠæ•°æ®åº“æ–‡ä»¶åˆ äº†é‡æ–°è¿ç§»å§ã€‚å¼€å‘é˜¶æ®µç”¨ç‚¹ç¬¨åŠæ³•ä¹Ÿæ²¡å…³ç³»ã€‚</p></blockquote><p>æ•°æ®è¿ç§»è¿˜æ˜¯è€è§„çŸ©ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token operator">></span> python manage<span class="token punctuation">.</span>py makemigrations<span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token operator">></span> python manage<span class="token punctuation">.</span>py migrate<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿™å°±å®Œæˆäº†ã€‚</p><h2 id="è§†å›¾"><a href="#è§†å›¾" class="headerlink" title="è§†å›¾"></a>è§†å›¾</h2><p>å‰é¢ç« èŠ‚å·²ç»å†™è¿‡ä¸€ä¸ªè§†å›¾<code>post_comment</code>ç”¨äºå¤„ç†è¯„è®ºäº†ï¼Œæˆ‘ä»¬å°†<strong>å¤ç”¨</strong>å®ƒï¼Œä»¥æ±‚ç²¾ç®€ä»£ç ã€‚</p><p>æ”¹åŠ¨è¾ƒå¤§ï¼Œä»£ç å…¨è´´å‡ºæ¥ï¼Œè¯·å¯¹ç…§æ”¹åŠ¨ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">comment<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># è®°å¾—å¼•å…¥ Comment ï¼</span><span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> Comment<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token decorator annotation punctuation">@login_required</span><span class="token punctuation">(</span>login_url<span class="token operator">=</span><span class="token string">'/userprofile/login/'</span><span class="token punctuation">)</span><span class="token comment"># æ–°å¢å‚æ•° parent_comment_id</span><span class="token keyword">def</span> <span class="token function">post_comment</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> article_id<span class="token punctuation">,</span> parent_comment_id<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    article <span class="token operator">=</span> get_object_or_404<span class="token punctuation">(</span>ArticlePost<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token operator">=</span>article_id<span class="token punctuation">)</span>    <span class="token comment"># å¤„ç† POST è¯·æ±‚</span>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">:</span>        comment_form <span class="token operator">=</span> CommentForm<span class="token punctuation">(</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">)</span>        <span class="token keyword">if</span> comment_form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            new_comment <span class="token operator">=</span> comment_form<span class="token punctuation">.</span>save<span class="token punctuation">(</span>commit<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>            new_comment<span class="token punctuation">.</span>article <span class="token operator">=</span> article            new_comment<span class="token punctuation">.</span>user <span class="token operator">=</span> request<span class="token punctuation">.</span>user            <span class="token comment"># äºŒçº§å›å¤</span>            <span class="token keyword">if</span> parent_comment_id<span class="token punctuation">:</span>                parent_comment <span class="token operator">=</span> Comment<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>parent_comment_id<span class="token punctuation">)</span>                <span class="token comment"># è‹¥å›å¤å±‚çº§è¶…è¿‡äºŒçº§ï¼Œåˆ™è½¬æ¢ä¸ºäºŒçº§</span>                new_comment<span class="token punctuation">.</span>parent_id <span class="token operator">=</span> parent_comment<span class="token punctuation">.</span>get_root<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">id</span>                <span class="token comment"># è¢«å›å¤äºº</span>                new_comment<span class="token punctuation">.</span>reply_to <span class="token operator">=</span> parent_comment<span class="token punctuation">.</span>user                new_comment<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">'200 OK'</span><span class="token punctuation">)</span>            new_comment<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>article<span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"è¡¨å•å†…å®¹æœ‰è¯¯ï¼Œè¯·é‡æ–°å¡«å†™ã€‚"</span><span class="token punctuation">)</span>    <span class="token comment"># å¤„ç† GET è¯·æ±‚</span>    <span class="token keyword">elif</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'GET'</span><span class="token punctuation">:</span>        comment_form <span class="token operator">=</span> CommentForm<span class="token punctuation">(</span><span class="token punctuation">)</span>        context <span class="token operator">=</span> <span class="token punctuation">&#123;</span>            <span class="token string">'comment_form'</span><span class="token punctuation">:</span> comment_form<span class="token punctuation">,</span>            <span class="token string">'article_id'</span><span class="token punctuation">:</span> article_id<span class="token punctuation">,</span>            <span class="token string">'parent_comment_id'</span><span class="token punctuation">:</span> parent_comment_id        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'comment/reply.html'</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span>    <span class="token comment"># å¤„ç†å…¶ä»–è¯·æ±‚</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"ä»…æ¥å—GET/POSTè¯·æ±‚ã€‚"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸»è¦å˜åŒ–æœ‰3ä¸ªåœ°æ–¹ï¼š</p><ul><li>è§†å›¾çš„å‚æ•°<strong>æ–°å¢</strong>äº†<code>parent_comment_id=None</code>ã€‚æ­¤å‚æ•°ä»£è¡¨<strong>çˆ¶è¯„è®º</strong>çš„<code>id</code>å€¼ï¼Œè‹¥ä¸º<code>None</code>åˆ™è¡¨ç¤ºè¯„è®ºä¸ºä¸€çº§è¯„è®ºï¼Œè‹¥æœ‰å…·ä½“å€¼åˆ™ä¸ºå¤šçº§è¯„è®ºã€‚</li><li>å¦‚æœè§†å›¾å¤„ç†çš„æ˜¯å¤šçº§è¯„è®ºï¼Œåˆ™ç”¨<code>MPTT</code>çš„<code>get_root()</code>æ–¹æ³•å°†å…¶<strong>çˆ¶çº§é‡ç½®ä¸ºæ ‘å½¢ç»“æ„æœ€åº•éƒ¨çš„ä¸€çº§è¯„è®º</strong>ï¼Œç„¶ååœ¨<code>reply_to</code>ä¸­ä¿å­˜å®é™…çš„è¢«å›å¤äººå¹¶ä¿å­˜ã€‚è§†å›¾æœ€ç»ˆè¿”å›çš„æ˜¯<code>HttpResponse</code>å­—ç¬¦ä¸²ï¼Œåé¢ä¼šç”¨åˆ°ã€‚</li><li>æ–°å¢å¤„ç†<code>GET</code>è¯·æ±‚çš„é€»è¾‘ï¼Œç”¨äº<strong>ç»™äºŒçº§å›å¤æä¾›ç©ºç™½çš„è¡¨å•</strong>ã€‚åé¢ä¼šç”¨åˆ°ã€‚</li></ul><p>å¾ˆå¥½ï¼Œç°åœ¨è§†å›¾ä¸­æœ‰ä¸€ä¸ª<code>parent_comment_id</code>å‚æ•°ç”¨äºåŒºåˆ†å¤šçº§è¯„è®ºï¼Œå› æ­¤å°±è¦æ±‚æœ‰çš„<code>url</code>ä¼ å…¥æ­¤å‚æ•°ï¼Œæœ‰çš„ä¸ä¼ å…¥ï¼Œåƒä¸‹é¢è¿™æ ·ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">comment<span class="token operator">/</span>urls<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token comment"># å·²æœ‰ä»£ç ï¼Œå¤„ç†ä¸€çº§å›å¤</span>    path<span class="token punctuation">(</span><span class="token string">'post-comment/&lt;int:article_id>'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>post_comment<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'post_comment'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token comment"># æ–°å¢ä»£ç ï¼Œå¤„ç†äºŒçº§å›å¤</span>    path<span class="token punctuation">(</span><span class="token string">'post-comment/&lt;int:article_id>/&lt;int:parent_comment_id>'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>post_comment<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'comment_reply'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸¤ä¸ª<code>path</code>éƒ½ä½¿ç”¨äº†<strong>åŒä¸€ä¸ªè§†å›¾å‡½æ•°</strong>ï¼Œä½†æ˜¯ä¼ å…¥çš„<strong>å‚æ•°å´ä¸ä¸€æ ·å¤š</strong>ï¼Œä»”ç»†çœ‹ã€‚ç¬¬ä¸€ä¸ª<code>path</code>æ²¡æœ‰<code>parent_comment_id</code>å‚æ•°ï¼Œå› æ­¤è§†å›¾å°±ä½¿ç”¨äº†<strong>ç¼ºçœå€¼</strong><code>None</code>ï¼Œè¾¾åˆ°äº†åŒºåˆ†è¯„è®ºå±‚çº§çš„ç›®çš„ã€‚</p><h2 id="å‰ç«¯æ¸²æŸ“"><a href="#å‰ç«¯æ¸²æŸ“" class="headerlink" title="å‰ç«¯æ¸²æŸ“"></a>å‰ç«¯æ¸²æŸ“</h2><p>åœ¨å‰ç«¯çš„é€»è¾‘ä¸Šï¼Œæˆ‘ä»¬çš„ç†æƒ³å¾ˆä¸°æ»¡ï¼š</p><ul><li>äºŒçº§å›å¤åŒæ ·è¦ä½¿ç”¨å¯Œæ–‡æœ¬ç¼–è¾‘å™¨</li><li>å›å¤æ—¶ä¸èƒ½ç¦»å¼€å½“å‰é¡µé¢</li><li>å¤šä¸ªckeditoråŠ è½½æ—¶ï¼Œä¸èƒ½æœ‰æ€§èƒ½é—®é¢˜</li></ul><p>ç„¶è€Œç†æƒ³è¶Šä¸°æ»¡ï¼Œä»£ç å†™å¾—å°±è¶Šç—›è‹¦ã€‚</p><p>é¦–å…ˆå°±æ˜¯<code>detail.html</code>çš„ä»£ç è¦å¤§æ”¹ï¼Œä¸»è¦é›†ä¸­åœ¨<strong>æ˜¾ç¤ºè¯„è®ºéƒ¨åˆ†</strong>ä»¥åŠç›¸å…³çš„<code>JavaScript</code>ã€‚</p><p>éœ€è¦æ”¹åŠ¨çš„åœ°æ–¹å…ˆå…¨éƒ¨è´´å‡ºæ¥ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/detail.html...<span class="token comment">&lt;!-- æ”¹åŠ¨ æ˜¾ç¤ºè¯„è®º éƒ¨åˆ† --></span><span class="token comment">&lt;!-- ä¸è¦æ¼äº† load mptt_tagsï¼ --></span>&#123;% load mptt_tags %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">></span></span>å…±æœ‰&#123;&#123; comments.count &#125;&#125;æ¡è¯„è®º<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- éå†æ ‘å½¢ç»“æ„ --></span>    &#123;% recursetree comments %&#125;        <span class="token comment">&lt;!-- ç»™ node å–ä¸ªåˆ«å comment --></span>        &#123;% with comment=node %&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% if comment.reply_to %&#125;                        offset-1 col-11                        &#123;% else %&#125;                        col-12                        &#123;% endif %&#125;<span class="token punctuation">"</span></span>            <span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> pink</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                        &#123;&#123; comment.user &#125;&#125;                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">></span></span>                     &#123;% if comment.reply_to %&#125;                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>far fa-arrow-alt-circle-right<span class="token punctuation">"</span></span>                            <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> cornflowerblue<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span>                        <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> pink</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                            &#123;&#123; comment.reply_to &#125;&#125;                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">></span></span>                     &#123;% endif %&#125;                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>&#123;&#123; comment.body|safe &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> gray</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                        &#123;&#123; comment.created|date:"Y-m-d H:i" &#125;&#125;                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                    <span class="token comment">&lt;!-- åŠ è½½ modal çš„æŒ‰é’® --></span>                    &#123;% if user.is_authenticated %&#125;                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span>                             <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-light btn-sm text-muted<span class="token punctuation">"</span></span>                             <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">load_modal</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> article<span class="token punctuation">.</span>id <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> comment<span class="token punctuation">.</span>id <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span>                            <span class="token punctuation">></span></span>                        å›å¤                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>                    &#123;% else %&#125;                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-light btn-sm text-muted<span class="token punctuation">"</span></span>                        <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>userprofile:login<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span>                       <span class="token punctuation">></span></span>                        å›å¤                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                    &#123;% endif %&#125;                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- Modal --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal fade<span class="token punctuation">"</span></span>                      <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment_&#123;&#123; comment.id &#125;&#125;<span class="token punctuation">"</span></span>                      <span class="token attr-name">tabindex</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>-1<span class="token punctuation">"</span></span>                      <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dialog<span class="token punctuation">"</span></span>                      <span class="token attr-name">aria-labelledby</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CommentModalCenter<span class="token punctuation">"</span></span>                      <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>                <span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-dialog modal-dialog-centered modal-lg<span class="token punctuation">"</span></span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>document<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-content<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 480px</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h5</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-title<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>exampleModalCenterTitle<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å›å¤ &#123;&#123; comment.user &#125;&#125;ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-body<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal_body_&#123;&#123; comment.id &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                &#123;% if not comment.is_leaf_node %&#125;                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>children<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        &#123;&#123; children &#125;&#125;                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                &#123;% endif %&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    &#123;% endwith %&#125;    &#123;% endrecursetree %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>...&#123;% block script %&#125;...<span class="token comment">&lt;!-- æ–°å¢ä»£ç ï¼Œå”¤é†’äºŒçº§å›å¤çš„ modal --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token comment">// åŠ è½½ modal</span>    <span class="token keyword">function</span> <span class="token function">load_modal</span><span class="token punctuation">(</span><span class="token parameter">article_id<span class="token punctuation">,</span> comment_id</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">let</span> modal_body <span class="token operator">=</span> <span class="token string">'#modal_body_'</span> <span class="token operator">+</span> comment_id<span class="token punctuation">;</span>        <span class="token keyword">let</span> modal_id <span class="token operator">=</span> <span class="token string">'#comment_'</span> <span class="token operator">+</span> comment_id<span class="token punctuation">;</span>                <span class="token comment">// åŠ è½½ç¼–è¾‘å™¨</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span>modal_body<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">let</span> content <span class="token operator">=</span> <span class="token string">'&lt;iframe src="/comment/post-comment/'</span> <span class="token operator">+</span>                 article_id <span class="token operator">+</span>                 <span class="token string">'/'</span> <span class="token operator">+</span>                 comment_id <span class="token operator">+</span>                 <span class="token string">'"'</span> <span class="token operator">+</span>                 <span class="token string">' frameborder="0" style="width: 100%; height: 100%;" id="iframe_'</span> <span class="token operator">+</span>                 comment_id <span class="token operator">+</span>                 <span class="token string">'">&lt;/iframe>'</span><span class="token punctuation">;</span>            <span class="token function">$</span><span class="token punctuation">(</span>modal_body<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token function">$</span><span class="token punctuation">(</span>modal_id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">modal</span><span class="token punctuation">(</span><span class="token string">'show'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>&#123;% endblock script %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ä¹ˆå¤§æ®µè‚¯å®šæŠŠä½ çœ‹æ™•äº†ï¼Œä¸è¦æ€¥ï¼Œè®©æˆ‘ä»¬æ‹†å¼€æ¥è®²è§£ã€‚</p><h3 id="éå†æ ‘"><a href="#éå†æ ‘" class="headerlink" title="éå†æ ‘"></a>éå†æ ‘</h3><p>ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä½•éå†æ ‘å½¢ç»“æ„ï¼Ÿ</p><p>django-mpttæä¾›äº†ä¸€ä¸ªå¿«æ·æ–¹å¼ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">&#123;% load mptt_tags %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>    &#123;% recursetree objs %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>            &#123;&#123; node.your_field &#125;&#125;            &#123;% if not node.is_leaf_node %&#125;                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>children<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    &#123;&#123; children &#125;&#125;                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>            &#123;% endif %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>    &#123;% endrecursetree %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å†…éƒ¨çš„å®ç°ä½ ä¸ç”¨å»ç®¡ï¼Œå½“æˆä¸€ä¸ªé»‘ç›’å­å»ç”¨å°±å¥½äº†ã€‚<code>objs</code>æ˜¯éœ€è¦éå†çš„<strong>æ•°æ®é›†</strong>ï¼Œ<code>node</code>æ˜¯å…¶ä¸­çš„<strong>å•ä¸ªæ•°æ®</strong>ã€‚æœ‰ä¸¤ä¸ªåœ°æ–¹è¦æ³¨æ„ï¼š</p><ul><li><code>&#123;% load mptt_tags %&#125;</code>ä¸è¦å¿˜è®°å†™</li><li><code>node</code>è¿™ä¸ªå˜é‡åå¤ªå®½æ³›ï¼Œç”¨<code>&#123;% with comment=node %&#125;</code>ç»™å®ƒèµ·äº†ä¸ªåˆ«å</li></ul><h3 id="Modal"><a href="#Modal" class="headerlink" title="Modal"></a>Modal</h3><p><strong>Modal</strong>æ˜¯<strong>Bootstrap</strong>å†…ç½®çš„å¼¹çª—ã€‚æœ¬æ–‡ç›¸å…³ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token comment">&lt;!-- åŠ è½½ modal çš„æŒ‰é’® --></span>&#123;% if user.is_authenticated %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span>         <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-light btn-sm text-muted<span class="token punctuation">"</span></span>         <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">load_modal</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> article<span class="token punctuation">.</span>id <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> comment<span class="token punctuation">.</span>id <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span>        <span class="token punctuation">></span></span>    å›å¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>&#123;% else %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-light btn-sm text-muted<span class="token punctuation">"</span></span>    <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>userprofile:login<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span>   <span class="token punctuation">></span></span>    å›å¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>&#123;% endif %&#125;<span class="token comment">&lt;!-- Modal --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal fade<span class="token punctuation">"</span></span>      <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment_&#123;&#123; comment.id &#125;&#125;<span class="token punctuation">"</span></span>      <span class="token attr-name">tabindex</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>-1<span class="token punctuation">"</span></span>      <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dialog<span class="token punctuation">"</span></span>      <span class="token attr-name">aria-labelledby</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CommentModalCenter<span class="token punctuation">"</span></span>      <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>     <span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-dialog modal-dialog-centered modal-lg<span class="token punctuation">"</span></span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>document<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-content<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 480px</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h5</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-title<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>exampleModalCenterTitle<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å›å¤ &#123;&#123; comment.user &#125;&#125;ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal-body<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal_body_&#123;&#123; comment.id &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®ƒå‡ ä¹å°±æ˜¯ä»<a href="https://getbootstrap.com/docs/4.1/components/modal/">Bootstrapå®˜æ–¹æ–‡æ¡£</a>æŠ„ä¸‹æ¥çš„ï¼ˆæ‰€ä»¥è¯»è€…è¦å¤šæµè§ˆå®˜ç½‘å•Šï¼‰ã€‚æœ‰ç‚¹ä¸åŒçš„æ˜¯æœ¬æ–‡æ²¡æœ‰ç”¨åŸç”Ÿçš„æŒ‰é’®ï¼Œè€Œæ˜¯ç”¨<code>JavaScript</code>åŠ è½½çš„Modalï¼›è¿˜æœ‰å°±æ˜¯å¢åŠ äº†å‡ ä¸ªå®¹å™¨çš„<code>id</code>å±æ€§ï¼Œæ–¹ä¾¿åé¢çš„<code>JavaScript</code>æŸ¥è¯¢ã€‚</p><p>å’Œä¹‹å‰ç« èŠ‚ç”¨çš„<code>Layer.js</code>ç›¸æ¯”ï¼Œ<code>Bootstrap</code>çš„å¼¹çª—æ›´ç¬¨é‡äº›ï¼Œä¹Ÿæ›´ç²¾è‡´äº›ï¼Œå¾ˆé€‚åˆåœ¨è¿™é‡Œä½¿ç”¨ã€‚</p><p>æ³¨æ„ï¼ŒåŠ è½½Modalçš„æŒ‰é’®ç”¨æ¨¡æ¿è¯­æ³•<code>&#123;% if user.is_authenticated %&#125;</code>å¯¹ç”¨æˆ·æ˜¯å¦ç™»å½•åšäº†åŒºåˆ†ï¼Œç›®çš„æ˜¯å°†æœªç™»å½•çš„ç”¨æˆ·å¼•å¯¼è‡³ç™»å½•é¡µé¢ã€‚</p><blockquote><p>è¿™æ˜¯2019/05/31ä¿®è®¢è¿‡çš„å†…å®¹ã€‚æ„Ÿè°¢è¯»è€… @Zhende Liu å¯¹æ­¤éƒ¨åˆ†çš„é—®é¢˜åé¦ˆã€‚</p></blockquote><h3 id="åŠ è½½Modal"><a href="#åŠ è½½Modal" class="headerlink" title="åŠ è½½Modal"></a>åŠ è½½Modal</h3><p>æœ€éš¾ç†è§£çš„å¯èƒ½å°±æ˜¯è¿™æ®µåŠ è½½Modalçš„<code>JavaScript</code>ä»£ç äº†ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// åŠ è½½ modal</span><span class="token keyword">function</span> <span class="token function">load_modal</span><span class="token punctuation">(</span><span class="token parameter">article_id<span class="token punctuation">,</span> comment_id</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> modal_body <span class="token operator">=</span> <span class="token string">'#modal_body_'</span> <span class="token operator">+</span> comment_id<span class="token punctuation">;</span>    <span class="token keyword">let</span> modal_id <span class="token operator">=</span> <span class="token string">'#comment_'</span> <span class="token operator">+</span> comment_id<span class="token punctuation">;</span>    <span class="token comment">// åŠ è½½ç¼–è¾‘å™¨</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span>modal_body<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">let</span> content <span class="token operator">=</span> <span class="token string">'&lt;iframe src="/comment/post-comment/'</span> <span class="token operator">+</span>             article_id <span class="token operator">+</span>             <span class="token string">'/'</span> <span class="token operator">+</span>             comment_id <span class="token operator">+</span>             <span class="token string">'" frameborder="0" style="width: 100%; height: 100%;">&lt;/iframe>'</span><span class="token punctuation">;</span>        <span class="token function">$</span><span class="token punctuation">(</span>modal_body<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token function">$</span><span class="token punctuation">(</span>modal_id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">modal</span><span class="token punctuation">(</span><span class="token string">'show'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®é™…ä¸Šæ ¸å¿ƒé€»è¾‘åªæœ‰3æ­¥ï¼š</p><ul><li>ç‚¹å‡»å›å¤æŒ‰é’®æ—¶å”¤é†’äº†<code>load_modal()</code>å‡½æ•°ï¼Œå¹¶å°†æ–‡ç« idã€çˆ¶çº§è¯„è®ºidä¼ é€’è¿›å»</li><li><code>$(modal_body).append(content)</code>æ‰¾åˆ°å¯¹åº”Modalçš„å®¹å™¨ï¼Œå¹¶å°†ä¸€ä¸ª<code>iframe</code>å®¹å™¨åŠ¨æ€æ·»åŠ è¿›å»</li><li><code>$(modal_id).modal(&#39;show&#39;)</code>æ‰¾åˆ°å¯¹åº”çš„Modalï¼Œå¹¶å°†å…¶å”¤é†’</li></ul><p>ä¸ºä»€ä¹ˆ<code>iframe</code>éœ€è¦<strong>åŠ¨æ€åŠ è½½</strong>ï¼Ÿè¿™æ˜¯ä¸ºäº†<strong>é¿å…æ½œåœ¨çš„æ€§èƒ½é—®é¢˜</strong>ã€‚ä½ ç¡®å®å¯ä»¥åœ¨é¡µé¢åˆå§‹åŠ è½½æ—¶æŠŠæ‰€æœ‰<code>iframe</code>éƒ½æ¸²æŸ“å¥½ï¼Œä½†æ˜¯è¿™éœ€è¦èŠ±è´¹é¢å¤–çš„æ—¶é—´ï¼Œå¹¶ä¸”ç»å¤§éƒ¨åˆ†çš„Modalç”¨æˆ·æ ¹æœ¬ä¸ä¼šç”¨åˆ°ï¼Œå¾ˆä¸åˆ’ç®—ã€‚</p><p><code>if</code>è¯­å¥çš„ä½œç”¨æ˜¯åˆ¤æ–­Modalä¸­å¦‚æœå·²ç»åŠ è½½è¿‡ï¼Œå°±ä¸å†é‡å¤åŠ è½½äº†ã€‚</p><p>æœ€åï¼Œä»€ä¹ˆæ˜¯<code>iframe</code>ï¼Ÿè¿™æ˜¯HTML5ä¸­çš„æ–°ç‰¹æ€§ï¼Œå¯ä»¥ç†è§£æˆ<strong>å½“å‰ç½‘é¡µä¸­åµŒå¥—çš„å¦ä¸€ä¸ªç‹¬ç«‹çš„ç½‘é¡µ</strong>ã€‚æ—¢ç„¶æ˜¯ç‹¬ç«‹çš„ç½‘é¡µï¼Œé‚£è‡ªç„¶ä¹Ÿä¼š<strong>ç‹¬ç«‹çš„å‘åå°è¯·æ±‚æ•°æ®</strong>ã€‚ä»”ç»†çœ‹<code>src</code>ä¸­è¯·æ±‚çš„ä½ç½®ï¼Œæ­£æ˜¯å‰é¢æˆ‘ä»¬åœ¨<code>urls.py</code>ä¸­å†™å¥½çš„ç¬¬äºŒä¸ª<code>path</code>ã€‚å³å¯¹åº”äº†<code>post_comment</code>è§†å›¾ä¸­çš„<code>GET</code>é€»è¾‘ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">comment<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token keyword">def</span> <span class="token function">post_comment</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> article_id<span class="token punctuation">,</span> parent_comment_id<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># å¤„ç† GET è¯·æ±‚</span>    <span class="token keyword">elif</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'GET'</span><span class="token punctuation">:</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'comment/reply.html'</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è§†å›¾è¿”å›çš„<code>comment/reply.html</code>æ¨¡æ¿è¿˜æ²¡æœ‰å†™ï¼Œæ¥ä¸‹æ¥å°±æŠŠå®ƒå†™å¥½ã€‚</p><blockquote><p>è€å®è¯´ç”¨ iframe æ¥åŠ è½½ ckeditor å¼¹çª—å¹¶ä¸æ˜¯å¾ˆâ€œä¼˜é›…â€ã€‚å•é¡µé¢ä¸Šå¤šä¸ª ckeditor çš„åŠ¨æ€åŠ è½½ã€å–å€¼ã€ä¼ å‚ï¼Œåšä¸»æ²¡èƒ½å°è¯•æˆåŠŸã€‚æœ‰å…´è¶£çš„è¯»è€…å¯ä»¥å’Œæˆ‘äº¤æµã€‚</p></blockquote><h2 id="Ajaxæäº¤è¡¨å•"><a href="#Ajaxæäº¤è¡¨å•" class="headerlink" title="Ajaxæäº¤è¡¨å•"></a>Ajaxæäº¤è¡¨å•</h2><p>åœ¨<code>templates</code>ä¸­æ–°å»º<code>comment</code>ç›®å½•ï¼Œå¹¶æ–°å»º<code>reply.html</code>ï¼Œå†™å…¥ä»£ç ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/comment/reply.html<span class="token comment">&lt;!-- è½½å…¥é™æ€æ–‡ä»¶ --></span>&#123;% load staticfiles %&#125;<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zh-cn<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>bootstrap/css/bootstrap.min.css<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span>     <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.<span class="token punctuation">"</span></span>     <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>POST<span class="token punctuation">"</span></span>    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>reply_form<span class="token punctuation">"</span></span>     <span class="token punctuation">></span></span>        &#123;% csrf_token %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                &#123;&#123; comment_form.media &#125;&#125;                &#123;&#123; comment_form.body &#125;&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- æäº¤æŒ‰é’® --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">confirm_submit</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> article_id <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> parent_comment_id <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-primary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å‘é€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>jquery/jquery-3.3.1.js<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>popper/popper-1.14.4.js<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>bootstrap/js/bootstrap.min.js<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- csrf token --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>csrf.js<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".django-ckeditor-widget"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">function</span> <span class="token function">confirm_submit</span><span class="token punctuation">(</span><span class="token parameter">article_id<span class="token punctuation">,</span> comment_id</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">// ä» ckeditor ä¸­å–å€¼</span>        <span class="token keyword">let</span> content <span class="token operator">=</span> <span class="token constant">CKEDITOR</span><span class="token punctuation">.</span>instances<span class="token punctuation">[</span><span class="token string">'id_body'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è°ƒç”¨ ajax ä¸åç«¯äº¤æ¢æ•°æ®</span>        $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>            url<span class="token operator">:</span> <span class="token string">'/comment/post-comment/'</span> <span class="token operator">+</span> article_id <span class="token operator">+</span> <span class="token string">'/'</span> <span class="token operator">+</span> comment_id<span class="token punctuation">,</span>            type<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>            data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>body<span class="token operator">:</span> content<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token comment">// æˆåŠŸå›è°ƒ</span>            <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>e <span class="token operator">===</span> <span class="token string">'200 OK'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    parent<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ä¸ªæ¨¡æ¿çš„ä½œç”¨æ˜¯æä¾›ä¸€ä¸ªckeditorçš„ç¼–è¾‘å™¨ï¼Œæ‰€ä»¥æ²¡æœ‰ç»§æ‰¿<code>base.html</code>ã€‚è®©æˆ‘ä»¬æ‹†å¼€æ¥è®²ã€‚</p><h3 id="Ajaxæ˜¯ä»€ä¹ˆ"><a href="#Ajaxæ˜¯ä»€ä¹ˆ" class="headerlink" title="Ajaxæ˜¯ä»€ä¹ˆ"></a>Ajaxæ˜¯ä»€ä¹ˆ</h3><p>ç”¨<strong>AjaxæŠ€æœ¯</strong>æ¥æäº¤è¡¨å•ï¼Œä¸ä¼ ç»Ÿæ–¹æ³•éå¸¸ä¸åŒã€‚</p><p>ä¼ ç»Ÿæ–¹æ³•æäº¤è¡¨å•æ—¶å‘åç«¯æäº¤ä¸€ä¸ªè¯·æ±‚ã€‚åç«¯å¤„ç†è¯·æ±‚åä¼šè¿”å›ä¸€ä¸ª<strong>å…¨æ–°</strong>çš„ç½‘é¡µã€‚è¿™ç§åšæ³•æµªè´¹äº†å¾ˆå¤šå¸¦å®½ï¼Œå› ä¸ºå‰åä¸¤ä¸ªé¡µé¢ä¸­å¤§éƒ¨åˆ†å†…å®¹å¾€å¾€éƒ½æ˜¯ç›¸åŒçš„ã€‚ä¸æ­¤ä¸åŒï¼ŒAJAXæŠ€æœ¯å¯ä»¥ä»…å‘æœåŠ¡å™¨å‘é€å¹¶å–å›å¿…é¡»çš„æ•°æ®ï¼Œå¹¶åœ¨å®¢æˆ·ç«¯é‡‡ç”¨<strong>JavaScript</strong>å¤„ç†æ¥è‡ªæœåŠ¡å™¨çš„å›åº”ã€‚å› ä¸ºåœ¨æœåŠ¡å™¨å’Œæµè§ˆå™¨ä¹‹é—´äº¤æ¢çš„æ•°æ®å¤§é‡å‡å°‘ï¼ŒæœåŠ¡å™¨å›åº”æ›´å¿«äº†ã€‚</p><p>è™½ç„¶æœ¬æ•™ç¨‹åªç”¨åˆ°Ajaxçš„ä¸€ç‚¹çš®æ¯›ï¼Œä½†æ˜¯Ajaxçš„åº”ç”¨éå¸¸å¹¿æ³›ï¼Œå»ºè®®è¯»è€…å¤šäº†è§£ç›¸å…³çŸ¥è¯†ã€‚</p><p>è¿™é‡Œä¼šç”¨åˆ°Ajaxï¼Œå€’ä¸æ˜¯å› ä¸ºå…¶æ•ˆç‡é«˜ï¼Œè€Œæ˜¯å› ä¸ºAjaxå¯ä»¥åœ¨è¡¨å•æäº¤æˆåŠŸåå¾—åˆ°åé¦ˆï¼Œä»¥ä¾¿åˆ·æ–°é¡µé¢ã€‚</p><p>æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">confirm_submit</span><span class="token punctuation">(</span><span class="token parameter">article_id<span class="token punctuation">,</span> comment_id</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// ä» ckeditor ä¸­å–å€¼</span>    <span class="token keyword">let</span> content <span class="token operator">=</span> <span class="token constant">CKEDITOR</span><span class="token punctuation">.</span>instances<span class="token punctuation">[</span><span class="token string">'id_body'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// è°ƒç”¨ ajax ä¸åç«¯äº¤æ¢æ•°æ®</span>    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        url<span class="token operator">:</span> <span class="token string">'/comment/post-comment/'</span> <span class="token operator">+</span> article_id <span class="token operator">+</span> <span class="token string">'/'</span> <span class="token operator">+</span> comment_id<span class="token punctuation">,</span>        type<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>        data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>body<span class="token operator">:</span> content<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token comment">// æˆåŠŸå›è°ƒ</span>        <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>e <span class="token operator">===</span> <span class="token string">'200 OK'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                parent<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><strong>CKEDITOR</strong>æ˜¯ç¼–è¾‘å™¨æä¾›çš„å…¨å±€å˜é‡ï¼Œè¿™é‡Œç”¨<code>CKEDITOR.instances[&#39;id_body&#39;].getData()</code>å–å¾—å½“å‰ç¼–è¾‘å™¨ä¸­ç”¨æˆ·è¾“å…¥çš„å†…å®¹ã€‚</li><li>æ¥ä¸‹æ¥è°ƒç”¨äº†Jqueryçš„ajaxæ–¹æ³•ä¸è§†å›¾è¿›è¡Œæ•°æ®äº¤æ¢ã€‚ajaxä¸­å®šä¹‰äº†è§†å›¾çš„urlã€è¯·æ±‚çš„æ–¹æ³•ã€æäº¤çš„æ•°æ®ã€‚</li><li><code>success</code>æ˜¯ajaxçš„å›è°ƒå‡½æ•°ã€‚å½“å¾—åˆ°è§†å›¾çš„å“åº”åæ‰§è¡Œå†…éƒ¨çš„å‡½æ•°ã€‚</li></ul><p>å‰é¢å†™è§†å›¾çš„æ—¶å€™ï¼ŒäºŒçº§è¯„è®ºæäº¤æˆåŠŸåä¼šè¿”å›<code>200 OK</code>ï¼Œå›è°ƒå‡½æ•°æ¥æ”¶åˆ°è¿™ä¸ªä¿¡å·åï¼Œå°±ä¼šè°ƒç”¨<code>reload()</code>æ–¹æ³•ï¼Œåˆ·æ–°å½“å‰çš„çˆ¶é¡µé¢ï¼ˆå³æ–‡ç« æ‰€åœ¨çš„é¡µé¢ï¼‰ï¼Œå®ç°äº†æ•°æ®çš„æ›´æ–°ã€‚</p><h3 id="csrfé—®é¢˜"><a href="#csrfé—®é¢˜" class="headerlink" title="csrfé—®é¢˜"></a>csrfé—®é¢˜</h3><p>ä»£ç ä¸­æœ‰è¿™ä¹ˆä¸€è¡Œï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>csrf.js<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ²¡æœ‰è¿™ä¸€è¡Œï¼Œåç«¯ä¼šè¿”å›<code>403 Forbidden</code>é”™è¯¯ï¼Œå¹¶ä¸”è¡¨å•æäº¤å¤±è´¥ã€‚</p><p>è¿˜è®°å¾—ä¹‹å‰æäº¤ä¼ ç»Ÿè¡¨å•æ—¶çš„<code>&#123;% csrf_token %&#125;</code>å—ï¼ŸDjangoä¸ºäº†é˜²æ­¢è·¨åŸŸæ”»å‡»ï¼Œè¦æ±‚è¡¨å•å¿…é¡»æä¾›è¿™ä¸ªtokenï¼ŒéªŒè¯æäº¤è€…çš„èº«ä»½ã€‚</p><p>é—®é¢˜æ˜¯åœ¨Ajaxä¸­æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿä¸€ç§æ–¹æ³•å°±æ˜¯åœ¨é¡µé¢ä¸­æ’å…¥è¿™ä¸ª<code>csrf.js</code>æ¨¡å—ã€‚</p><p>åœ¨staticç›®å½•ä¸­å°†<a href="https://github.com/stacklens/django_blog_tutorial/blob/master/static/csrf.js">csrf.js</a>æ–‡ä»¶ç²˜è´´è¿›å»ï¼Œå¹¶åœ¨é¡µé¢ä¸­å¼•ç”¨ï¼Œå°±å¯ä»¥è§£å†³æ­¤é—®é¢˜äº†ã€‚</p><blockquote><p>csrf.jsæ–‡ä»¶å¯ä»¥åœ¨<a href="https://github.com/stacklens/django_blog_tutorial/blob/master/static/csrf.js">æˆ‘çš„GitHubä»“åº“ä¸‹è½½</a>ã€‚</p></blockquote><h2 id="æµ‹è¯•ï¼"><a href="#æµ‹è¯•ï¼" class="headerlink" title="æµ‹è¯•ï¼"></a>æµ‹è¯•ï¼</h2><p>è¿›å…¥æ–‡ç« é¡µé¢ï¼Œè¯„è®ºçš„è¾¹ä¸Šå¤šå‡ºä¸€ä¸ªæŒ‰é’®ï¼Œå¯ä»¥å¯¹è¯„è®ºè€…è¿›è¡Œè¯„è®ºäº†ï¼š</p><blockquote><p>æ³¨æ„ï¼šDjango 3 ä¿®æ”¹äº† xframe çš„é»˜è®¤è®¾ç½®ï¼Œå³ä¸æ”¯æŒ iframe è‡ªå·±ã€‚å¦‚æœä½ ä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯ Django 3ï¼Œéœ€è¦åœ¨ <code>settings.py</code> ä¸­æ·»åŠ ï¼š<code>X_FRAME_OPTIONS = &#39;SAMEORIGIN&#39;</code> ã€‚</p></blockquote><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190504/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE203.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190504/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE203.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ç‚¹å‡»å›å¤æŒ‰é’®ï¼Œå¼¹å‡ºå¸¦æœ‰å¯Œæ–‡æœ¬ç¼–è¾‘å™¨çš„å¼¹çª—ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190504/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE204.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190504/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE204.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ç‚¹å‡»å‘é€æŒ‰é’®ï¼Œé¡µé¢ä¼šè‡ªåŠ¨åˆ·æ–°ï¼Œå¹¶ä¸”äºŒçº§è¯„è®ºä¹Ÿå‡ºç°äº†ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190504/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE205.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190504/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE205.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>è¿˜å¯ä»¥ç»§ç»­å¯¹äºŒçº§è¯„è®ºè€…è¯„è®ºï¼Œä¸è¿‡æ›´é«˜çº§çš„è¯„è®ºä¼šè¢«å¼ºåˆ¶è½¬æ¢ä¸ºäºŒçº§è¯„è®ºï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190504/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE206.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190504/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE206.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>åŠŸèƒ½æ­£å¸¸è¿è¡Œäº†ã€‚</p><p>æœ‰å…´è¶£çš„è¯»è€…å¯ä»¥æ‰“å¼€SQLiteStudioï¼Œç ”ç©¶ä¸€ä¸‹commentæ•°æ®è¡¨çš„ç»“æ„ã€‚</p><h2 id="äºŒçº§å›å¤çª—å£ä¸å¼¹å‡º"><a href="#äºŒçº§å›å¤çª—å£ä¸å¼¹å‡º" class="headerlink" title="äºŒçº§å›å¤çª—å£ä¸å¼¹å‡º"></a>äºŒçº§å›å¤çª—å£ä¸å¼¹å‡º</h2><p>æ‰€æœ‰ä¸€åˆ‡å‡†å¤‡å®Œæ¯•ï¼Œç‚¹å‡»å›å¤æŒ‰é’®ï¼Œå´æ²¡æœ‰å›å¤çª—å£å¼¹å‡ºæˆ–è€…å¼¹å‡ºäº†ä¸€ä¸ªçª—å£ï¼Œæç¤ºæ‹’ç»è¿æ¥<br>æ‰“å¼€F12ï¼Œä¼šæœ‰è¿™æ ·çš„æç¤º</p><pre><code>Refused to display &#39;Ã—Ã—Ã—&#39; in a frame because it set &#39;X-Frame-Options&#39; to &#39;deny&#39;.</code></pre><p>æŸ¥çœ‹settingé…ç½®ï¼Œå¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">MIDDLEWARE <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token string">'django.middleware.clickjacking.XFrameOptionsMiddleware'</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢çš„å†…å®¹æ˜¾ç¤ºï¼ŒDjangoçš„é¡¹ç›®ä¸­é»˜è®¤è®¾ç½®äº†XFrameOptionsMiddlewareçš„ä¸­é—´ä»¶ï¼Œè¿™ä¸ªè®¾ç½®åœ¨Django 3.0ä¸­å°†å¯¹äºX-Frame-Optionsçš„é…ç½®è®¾ç½®æˆäº†DENYã€‚<br>å¯ä»¥åœ¨è®¾ç½®ä¸­ï¼Œæ·»åŠ å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">X_FRAME_OPTIONS <span class="token operator">=</span> <span class="token string">'SAMEORIGIN'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è®¤çœŸçœ‹å®Œæœ¬ç« å¹¶å®ç°äº†å¤šçº§è¯„è®ºçš„åŒå­¦ï¼Œå¯ä»¥ç»™è‡ªå·±ç‚¹æŒå£°äº†ã€‚æœ¬ç« åº”è¯¥æ˜¯æ•™ç¨‹åˆ°ç›®å‰ä¸ºæ­¢çŸ¥è¯†ç‚¹æœ€å¤šã€æœ€æ‚çš„ç« èŠ‚ï¼Œæ¶µç›–äº†MTVã€Jqueryã€Ajaxã€iframeã€modalç­‰å¤šç§å‰åç«¯æŠ€æœ¯ã€‚</p><p>æ²¡æˆåŠŸå®ç°ä¹Ÿä¸è¦æ€¥èºï¼Œwebå¼€å‘å˜›ï¼Œèµ°ç‚¹å¼¯è·¯å¾ˆæ­£å¸¸çš„ã€‚å¤šè§‚å¯ŸDjangoå’Œæ§åˆ¶å°çš„æŠ¥é”™ä¿¡æ¯ï¼Œæ‰¾åˆ°é—®é¢˜å¹¶è§£å†³å®ƒã€‚</p><hr><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#x64;&#117;&#115;&#x61;&#105;&#112;&#104;&#111;&#x74;&#111;&#x40;&#102;&#111;&#x78;&#x6d;&#97;&#105;&#x6c;&#46;&#x63;&#x6f;&#109;">&#x64;&#117;&#115;&#x61;&#105;&#112;&#104;&#111;&#x74;&#111;&#x40;&#102;&#111;&#x78;&#x6d;&#97;&#105;&#x6c;&#46;&#x63;&#x6f;&#109;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--17.æ‹“å±•ç”¨æˆ·ä¿¡æ¯</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/17.tuo-zhan-yong-hu-xin-xi/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/17.tuo-zhan-yong-hu-xin-xi/</url>
      
        <content type="html"><![CDATA[<p>å¯èƒ½ä½ å·²ç»å‘ç°äº†ï¼ŒDjangoè‡ªå¸¦çš„Useræ¨¡å‹éå¸¸å®ç”¨ï¼Œä»¥è‡³äºæˆ‘ä»¬æ²¡æœ‰å†™ç”¨æˆ·ç®¡ç†ç›¸å…³çš„ä»»ä½•æ¨¡å‹ã€‚</p><p>ä½†æ˜¯è‡ªå¸¦çš„Useræ¯•ç«Ÿå¯ç”¨çš„å­—æ®µè¾ƒå°‘ã€‚æ¯”æ–¹è¯´éå¸¸é‡è¦çš„ç”µè¯å·ç ã€å¤´åƒç­‰éƒ½æ²¡æœ‰ã€‚è§£å†³çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œä½ å¯ä»¥ä¸ä½¿ç”¨Userï¼Œè‡ªå·±ä»é›¶å†™ç”¨æˆ·æ¨¡å‹ï¼›ä¹Ÿå¯ä»¥å¯¹Useræ¨¡å‹è¿›è¡Œæ‰©å±•ã€‚</p><p>åšå®¢ç½‘ç«™çš„ç”¨æˆ·ä¿¡æ¯å¹¶ä¸å¤æ‚ï¼Œå› æ­¤æ‰©å±•Userå°±è¶³å¤Ÿäº†ã€‚</p><h2 id="æ‰©å±•Useræ¨¡å‹"><a href="#æ‰©å±•Useræ¨¡å‹" class="headerlink" title="æ‰©å±•Useræ¨¡å‹"></a>æ‰©å±•Useræ¨¡å‹</h2><p>æ‰©å±•Useræ¨¡å‹åˆæœ‰ä¸åŒçš„æ–¹æ³•ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½¿ç”¨<strong>æ¨¡å‹ä¸€å¯¹ä¸€é“¾æ¥</strong>çš„æ–¹æ³•æ˜¯æ¯”è¾ƒé€‚åˆçš„ã€‚</p><p>ç¼–å†™<code>userprofile/models.py</code>å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">userprofile<span class="token operator">/</span>models<span class="token punctuation">.</span>py<span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>models <span class="token keyword">import</span> User<span class="token comment"># å¼•å…¥å†…ç½®ä¿¡å·</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>db<span class="token punctuation">.</span>models<span class="token punctuation">.</span>signals <span class="token keyword">import</span> post_save<span class="token comment"># å¼•å…¥ä¿¡å·æ¥æ”¶å™¨çš„è£…é¥°å™¨</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>dispatch <span class="token keyword">import</span> receiver<span class="token comment"># ç”¨æˆ·æ‰©å±•ä¿¡æ¯</span><span class="token keyword">class</span> <span class="token class-name">Profile</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># ä¸ User æ¨¡å‹æ„æˆä¸€å¯¹ä¸€çš„å…³ç³»</span>    user <span class="token operator">=</span> models<span class="token punctuation">.</span>OneToOneField<span class="token punctuation">(</span>User<span class="token punctuation">,</span> on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">,</span> related_name<span class="token operator">=</span><span class="token string">'profile'</span><span class="token punctuation">)</span>    <span class="token comment"># ç”µè¯å·ç å­—æ®µ</span>    phone <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token comment"># å¤´åƒ</span>    avatar <span class="token operator">=</span> models<span class="token punctuation">.</span>ImageField<span class="token punctuation">(</span>upload_to<span class="token operator">=</span><span class="token string">'avatar/%Y%m%d/'</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token comment"># ä¸ªäººç®€ä»‹</span>    bio <span class="token operator">=</span> models<span class="token punctuation">.</span>TextField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">500</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token string">'user &#123;&#125;'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>user<span class="token punctuation">.</span>username<span class="token punctuation">)</span><span class="token comment"># ä¿¡å·æ¥æ”¶å‡½æ•°ï¼Œæ¯å½“æ–°å»º User å®ä¾‹æ—¶è‡ªåŠ¨è°ƒç”¨</span><span class="token decorator annotation punctuation">@receiver</span><span class="token punctuation">(</span>post_save<span class="token punctuation">,</span> sender<span class="token operator">=</span>User<span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">create_user_profile</span><span class="token punctuation">(</span>sender<span class="token punctuation">,</span> instance<span class="token punctuation">,</span> created<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> created<span class="token punctuation">:</span>        Profile<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>user<span class="token operator">=</span>instance<span class="token punctuation">)</span><span class="token comment"># ä¿¡å·æ¥æ”¶å‡½æ•°ï¼Œæ¯å½“æ›´æ–° User å®ä¾‹æ—¶è‡ªåŠ¨è°ƒç”¨</span><span class="token decorator annotation punctuation">@receiver</span><span class="token punctuation">(</span>post_save<span class="token punctuation">,</span> sender<span class="token operator">=</span>User<span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">save_user_profile</span><span class="token punctuation">(</span>sender<span class="token punctuation">,</span> instance<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>    instance<span class="token punctuation">.</span>profile<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¯ä¸ª<code>Profile</code>æ¨¡å‹å¯¹åº”å”¯ä¸€çš„ä¸€ä¸ª<code>User</code>æ¨¡å‹ï¼Œå½¢æˆäº†å¯¹Userçš„å¤–æ¥æ‰©å±•ï¼Œå› æ­¤ä½ å¯ä»¥åœ¨<code>Profile</code>æ·»åŠ ä»»ä½•æƒ³è¦çš„å­—æ®µã€‚è¿™ç§æ–¹æ³•çš„å¥½å¤„æ˜¯ä¸éœ€è¦å¯¹<code>User</code>è¿›è¡Œä»»ä½•æ”¹åŠ¨ï¼Œä»è€Œæ‹¥æœ‰å®Œå…¨è‡ªå®šä¹‰çš„æ•°æ®è¡¨ã€‚æ¨¡å‹æœ¬èº«æ²¡æœ‰ä»€ä¹ˆæ–°çš„çŸ¥è¯†ï¼Œæ¯”è¾ƒç¥å¥‡çš„æ˜¯ç”¨åˆ°çš„<strong>ä¿¡å·æœºåˆ¶</strong>ã€‚</p><p>DjangoåŒ…å«ä¸€ä¸ªâ€œä¿¡å·è°ƒåº¦ç¨‹åºâ€ï¼Œå®ƒå¯ä»¥åœ¨æ¡†æ¶ä¸­çš„æŸäº›ä½ç½®å‘ç”Ÿæ“ä½œæ—¶ï¼Œé€šçŸ¥å…¶ä»–åº”ç”¨ç¨‹åºã€‚ç®€è€Œè¨€ä¹‹ï¼Œä¿¡å·å…è®¸æŸäº›<strong>å‘é€è€…</strong>é€šçŸ¥ä¸€ç»„<strong>æ¥æ”¶å™¨</strong>å·²ç»å‘ç”Ÿäº†æŸä¸ªåŠ¨ä½œã€‚å½“è®¸å¤šä»£ç å¯èƒ½å¯¹åŒä¸€äº‹ä»¶æ„Ÿå…´è¶£æ—¶ï¼Œ<strong>ä¿¡å·</strong>å°±ç‰¹åˆ«æœ‰ç”¨ã€‚</p><p>è¿™é‡Œå¼•å…¥çš„<code>post_save</code>å°±æ˜¯ä¸€ä¸ªå†…ç½®ä¿¡å·ï¼Œå®ƒå¯ä»¥åœ¨æ¨¡å‹è°ƒç”¨<code>save()</code>æ–¹æ³•åå‘å‡ºä¿¡å·ã€‚</p><p>æœ‰äº†ä¿¡å·ä¹‹åè¿˜éœ€è¦å®šä¹‰æ¥æ”¶å™¨ï¼Œå‘Šè¯‰Djangoåº”è¯¥æŠŠä¿¡å·å‘ç»™è°ã€‚è£…é¥°å™¨<code>receiver</code>å°±èµ·åˆ°æ¥æ”¶å™¨çš„ä½œç”¨ã€‚æ¯å½“<code>User</code>æœ‰æ›´æ–°æ—¶ï¼Œå°±å‘é€ä¸€ä¸ªä¿¡å·å¯åŠ¨<code>post_save</code>ç›¸å…³çš„å‡½æ•°ã€‚</p><p>é€šè¿‡ä¿¡å·çš„ä¼ é€’ï¼Œå®ç°äº†æ¯å½“<code>User</code>åˆ›å»º/æ›´æ–°æ—¶ï¼Œ<code>Profile</code>ä¹Ÿä¼šè‡ªåŠ¨çš„åˆ›å»º/æ›´æ–°ã€‚</p><blockquote><p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ä¿¡å·æ¥è‡ªåŠ¨åˆ›å»ºProfileè¡¨ï¼Œè€Œæ˜¯é‡‡ç”¨æ‰‹åŠ¨æ–¹å¼å®ç°ã€‚</p><p>ä¸ºä»€ä¹ˆåˆ é™¤Userè¡¨ä¸éœ€è¦ä¿¡å·ï¼Ÿç­”æ¡ˆæ˜¯ä¸¤è€…çš„å…³ç³»é‡‡ç”¨äº†models.CASCADEçº§è”åˆ é™¤ï¼Œå·²ç»å¸¦æœ‰å…³è”åˆ é™¤çš„åŠŸèƒ½äº†ã€‚</p><p>avatarå­—æ®µç”¨æ¥å­˜æ”¾å¤´åƒï¼Œæš‚ä¸”ä¸ç®¡å®ƒï¼Œä¸‹ä¸€ç« è®²è§£ã€‚</p></blockquote><h2 id="é‡å»ºæ•°æ®åº“"><a href="#é‡å»ºæ•°æ®åº“" class="headerlink" title="é‡å»ºæ•°æ®åº“"></a>é‡å»ºæ•°æ®åº“</h2><p>å‰é¢è®²è¿‡ï¼Œæ¯æ¬¡æ”¹åŠ¨æ¨¡å‹åéƒ½éœ€è¦è¿›è¡Œæ•°æ®çš„è¿ç§»ã€‚ç”±äº<code>avatar</code>å­—æ®µä¸ºå›¾åƒå­—æ®µï¼Œéœ€è¦å®‰è£…ç¬¬ä¸‰æ–¹åº“<code>Pillow</code>æ¥æ”¯æŒï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> E:<span class="token punctuation">\</span>django_project<span class="token punctuation">\</span>my_blog<span class="token operator">></span> pip <span class="token function">install</span> Pillow<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å®‰è£…æˆåŠŸåï¼Œé€šè¿‡<code>makemigrations</code>ã€<code>migrate</code>è¿ç§»æ•°æ®ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> E:<span class="token punctuation">\</span>django_project<span class="token punctuation">\</span>my_blog<span class="token operator">></span>python manage.py makemigrationsMigrations <span class="token keyword">for</span> <span class="token string">'userprofile'</span><span class="token builtin class-name">:</span>  userprofile<span class="token punctuation">\</span>migrations<span class="token punctuation">\</span>0001_initial.py    - Create model Profile<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> E:<span class="token punctuation">\</span>django_project<span class="token punctuation">\</span>my_blog<span class="token operator">></span>python manage.py migrateOperations to perform:  Apply all migrations: admin, article, auth, contenttypes, sessions, userprofileRunning migrations:  Applying userprofile.0001_initial<span class="token punctuation">..</span>. OK<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>è¿ç§»å¥½æ•°æ®åï¼Œå¦‚æœä½ è¯•å›¾ç™»å½•ç”¨æˆ·ï¼Œä¼šå¾—åˆ°æŠ¥é”™ã€‚</strong>è¿™æ˜¯å› ä¸ºä¹‹å‰åˆ›å»ºçš„<code>User</code>æ•°æ®éƒ½æ²¡æœ‰å¯¹åº”çš„<code>Profile</code>æ¨¡å‹ï¼Œè¿èƒŒäº†ç°æœ‰çš„æ¨¡å‹ã€‚ä¸€ç§è§£å†³åŠæ³•å°±æ˜¯å¹²è„†åˆ é™¤æ—§çš„æ•°æ®ï¼Œå› æ­¤å°±éœ€è¦ç”¨åˆ°Djangoçš„<code>shell</code>å‘½ä»¤ã€‚</p><p><code>shell</code>æ˜¯Djangoæä¾›çš„äº’åŠ¨è§£é‡Šå™¨ï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ªæŒ‡ä»¤æ¨¡å¼ä¸­è¯•éªŒä»£ç æ˜¯å¦èƒ½å¤Ÿæ­£ç¡®æ‰§è¡Œï¼Œæ˜¯ç›¸å½“æ–¹ä¾¿çš„å·¥å…·ã€‚</p><p>åœ¨è™šæ‹Ÿç¯å¢ƒä¸­è¾“å…¥<code>python manage.py shell</code>å°±å¯ä»¥è¿›å…¥shellï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> E:<span class="token punctuation">\</span>django_project<span class="token punctuation">\</span>my_blog<span class="token operator">></span>python manage.py shellPython <span class="token number">3.7</span>.0 <span class="token punctuation">(</span>v3.7.0:1bf9cc5093, Jun <span class="token number">27</span> <span class="token number">2018</span>, 04:59:51<span class="token punctuation">)</span> <span class="token punctuation">[</span>MSC v.1914 <span class="token number">64</span> bit <span class="token punctuation">(</span>AMD64<span class="token punctuation">)</span><span class="token punctuation">]</span> on win32Type <span class="token string">"help"</span>, <span class="token string">"copyright"</span>, <span class="token string">"credits"</span> or <span class="token string">"license"</span> <span class="token keyword">for</span> <span class="token function">more</span> information.<span class="token punctuation">(</span>InteractiveConsole<span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>çœ‹åˆ°<code>&gt;&gt;&gt;</code>è¡¨ç¤ºæˆåŠŸè¿›å…¥shellã€‚</p><p>è¾“å…¥ä¸‹é¢ä¸¤è¡ŒæŒ‡ä»¤å°±å¯ä»¥è½»æ¾åˆ é™¤Useræ•°æ®åº“ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> from django.contrib.auth.models <span class="token function">import</span> User<span class="token operator">>></span><span class="token operator">></span> User.objects.all<span class="token punctuation">(</span><span class="token punctuation">)</span>.delete<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æ³¨æ„å› ä¸ºå‰é¢å†™çš„<code>article</code>æ¨¡å‹ä¸­ï¼Œä¸<code>User</code>çš„å¤–é”®ä¹Ÿé‡‡ç”¨äº†<code>models.CASCADE</code>çº§è”åˆ é™¤æ¨¡å¼ï¼Œå› æ­¤éšç€Userçš„åˆ é™¤ï¼Œ<strong>ç›¸å…³çš„æ–‡ç« ä¹Ÿä¸€å¹¶åˆ é™¤äº†</strong>ã€‚</p><p>è¾“å…¥<code>exit()</code>é€€å‡º<code>shell</code>ï¼Œè¾“å…¥æŒ‡ä»¤<code>python manage.py createsuperuser</code>ï¼Œ<strong>é‡æ–°åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·</strong>ã€‚</p><blockquote><p>å¯¹æ–°æ‰‹æ¥è¯´ï¼Œä¿®æ”¹æ•°æ®åº“ç»å¸¸ä¼šå¯¼è‡´å„ç§å¤´ç–¼çš„é—®é¢˜ï¼Œæ¯”å¦‚è¯´å­—æ®µå¤±æ•ˆã€æ–°å­—æ®µä¸ºnullã€èµ‹å€¼é”™è¯¯ã€å¤–é”®é“¾æ¥å‡ºé”™ç­‰ç­‰ï¼Œæœ€ç»ˆå¯¼è‡´æ•´ä¸ªä¸šåŠ¡é€»è¾‘æŠ¥é”™ã€‚å› æ­¤æˆ‘çš„å»ºè®®æ˜¯ï¼Œåœ¨è®¾è®¡æ•°æ®åº“æ—¶å°½é‡è€ƒè™‘å‘¨å…¨ï¼Œé¿å…é¢‘ç¹ä¿®æ”¹æ¨¡å‹ã€‚</p><p>å¦‚æœå®åœ¨è¦ä¿®æ”¹ï¼Œå¹¶ä¸”å·²ç»å¯¼è‡´æ•°æ®åº“æ··ä¹±äº†ï¼Œä¸å¦¨åˆ é™¤æ‰<code>/app/migrations/</code>ç›®å½•ä¸‹æœ€æ–°çš„å‡ ä¸ªæ–‡ä»¶ï¼Œæ¸…ç©ºç›¸å…³æ•°æ®åº“ï¼Œé‡æ–°è¿ç§»æ•°æ®ã€‚</p></blockquote><p>æ¥ä¸‹æ¥ç¼–å†™MTVæ¨¡å¼çš„å‰©ä½™éƒ¨åˆ†ã€‚</p><h2 id="è¡¨å•ã€è§†å›¾å’Œæ¨¡æ¿"><a href="#è¡¨å•ã€è§†å›¾å’Œæ¨¡æ¿" class="headerlink" title="è¡¨å•ã€è§†å›¾å’Œæ¨¡æ¿"></a>è¡¨å•ã€è§†å›¾å’Œæ¨¡æ¿</h2><p>æœ‰äº†æ‰©å±•çš„<code>Profile</code>æ¨¡å‹åï¼Œéœ€è¦æ–°å»ºä¸€ä¸ª<strong>è¡¨å•ç±»</strong>å»ç¼–è¾‘å®ƒçš„å†…å®¹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">userprofile<span class="token operator">/</span>forms<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># å¼•å…¥ Profile æ¨¡å‹</span><span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> Profile<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token class-name">ProfileForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        model <span class="token operator">=</span> Profile        fields <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'phone'</span><span class="token punctuation">,</span> <span class="token string">'avatar'</span><span class="token punctuation">,</span> <span class="token string">'bio'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶ååœ¨<code>userprofile/views.py</code>ä¸­å†™å¤„ç†ç”¨æˆ·ä¿¡æ¯çš„è§†å›¾å‡½æ•°ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">userprofile<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># åˆ«å¿˜äº†å¼•å…¥æ¨¡å—</span><span class="token keyword">from</span> <span class="token punctuation">.</span>forms <span class="token keyword">import</span> ProfileForm<span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> Profile<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯</span><span class="token decorator annotation punctuation">@login_required</span><span class="token punctuation">(</span>login_url<span class="token operator">=</span><span class="token string">'/userprofile/login/'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">profile_edit</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    user <span class="token operator">=</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token builtin">id</span><span class="token punctuation">)</span>    <span class="token comment"># user_id æ˜¯ OneToOneField è‡ªåŠ¨ç”Ÿæˆçš„å­—æ®µ</span>    profile <span class="token operator">=</span> Profile<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span>user_id<span class="token operator">=</span><span class="token builtin">id</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">:</span>        <span class="token comment"># éªŒè¯ä¿®æ”¹æ•°æ®è€…ï¼Œæ˜¯å¦ä¸ºç”¨æˆ·æœ¬äºº</span>        <span class="token keyword">if</span> request<span class="token punctuation">.</span>user <span class="token operator">!=</span> user<span class="token punctuation">:</span>            <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"ä½ æ²¡æœ‰æƒé™ä¿®æ”¹æ­¤ç”¨æˆ·ä¿¡æ¯ã€‚"</span><span class="token punctuation">)</span>        profile_form <span class="token operator">=</span> ProfileForm<span class="token punctuation">(</span>data<span class="token operator">=</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">)</span>        <span class="token keyword">if</span> profile_form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment"># å–å¾—æ¸…æ´—åçš„åˆæ³•æ•°æ®</span>            profile_cd <span class="token operator">=</span> profile_form<span class="token punctuation">.</span>cleaned_data            profile<span class="token punctuation">.</span>phone <span class="token operator">=</span> profile_cd<span class="token punctuation">[</span><span class="token string">'phone'</span><span class="token punctuation">]</span>            profile<span class="token punctuation">.</span>bio <span class="token operator">=</span> profile_cd<span class="token punctuation">[</span><span class="token string">'bio'</span><span class="token punctuation">]</span>            profile<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment"># å¸¦å‚æ•°çš„ redirect()</span>            <span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">"userprofile:edit"</span><span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token operator">=</span><span class="token builtin">id</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"æ³¨å†Œè¡¨å•è¾“å…¥æœ‰è¯¯ã€‚è¯·é‡æ–°è¾“å…¥~"</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'GET'</span><span class="token punctuation">:</span>        profile_form <span class="token operator">=</span> ProfileForm<span class="token punctuation">(</span><span class="token punctuation">)</span>        context <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token string">'profile_form'</span><span class="token punctuation">:</span> profile_form<span class="token punctuation">,</span> <span class="token string">'profile'</span><span class="token punctuation">:</span> profile<span class="token punctuation">,</span> <span class="token string">'user'</span><span class="token punctuation">:</span> user <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'userprofile/edit.html'</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"è¯·ä½¿ç”¨GETæˆ–POSTè¯·æ±‚æ•°æ®"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>2019/05/13æ›´æ–°ï¼šå®é™…ä¸ŠGETæ–¹æ³•ä¸­ä¸éœ€è¦å°†profile_formè¿™ä¸ªè¡¨å•å¯¹è±¡ä¼ é€’åˆ°æ¨¡æ¿ä¸­å»ï¼Œå› ä¸ºæ¨¡æ¿ä¸­å·²ç»ç”¨Bootstrapå†™å¥½äº†è¡¨å•ï¼Œæ‰€ä»¥profile_formå¹¶æ²¡æœ‰ç”¨åˆ°ã€‚æ„Ÿè°¢è¯»è€…<a href="https://www.dusaiphoto.com/article/detail/37/#F244">YipCyun</a>æŒ‡æ­£ã€‚</p></blockquote><p>ä¸šåŠ¡é€»è¾‘ä¸ä»¥å‰å†™çš„å¤„ç†è¡¨å•çš„è§†å›¾éå¸¸ç›¸ä¼¼ï¼ˆè¿˜è®°å¾—å—ï¼‰ï¼Œå°±ä¸èµ˜è¿°äº†ã€‚</p><p>éœ€è¦æ³¨æ„ä¸‹é¢å‡ ä¸ªå°åœ°æ–¹ï¼š</p><ul><li><code>user_id</code>æ˜¯å¤–é”®è‡ªåŠ¨ç”Ÿæˆçš„å­—æ®µï¼Œç”¨æ¥è¡¨å¾ä¸¤ä¸ªæ•°æ®è¡¨çš„å…³è”ã€‚ä½ å¯ä»¥åœ¨<strong>SQLiteStudio</strong>ä¸­æŸ¥çœ‹å®ƒã€‚</li><li>ç•™æ„<code>redirect()</code>æ˜¯å¦‚ä½•æºå¸¦å‚æ•°ä¼ é€’çš„ã€‚</li></ul><p>ç„¶åå°±æ˜¯<strong>æ–°å»ºæ¨¡æ¿æ–‡ä»¶</strong><code>/templates/userprofile/edit.html</code>ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">/templates/userprofile/edit.html&#123;% extends "base.html" %&#125; &#123;% load staticfiles %&#125;&#123;% block title %&#125; ç”¨æˆ·ä¿¡æ¯ &#123;% endblock title %&#125;&#123;% block content %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-12<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-md-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç”¨æˆ·å: &#123;&#123; user.username &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                &#123;% csrf_token %&#125;                <span class="token comment">&lt;!-- phone --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group col-md-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>phone<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç”µè¯<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>phone<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>phone<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123; profile.phone &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- bio --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group col-md-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bio<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç®€ä»‹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bio<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bio<span class="token punctuation">"</span></span> <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>12<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; profile.bio &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- æäº¤æŒ‰é’® --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-primary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æäº¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>&#123;% endblock content %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ç•™æ„æ¨¡æ¿ä¸­å¦‚ä½•åˆ†åˆ«è°ƒç”¨<code>User</code>ã€<code>Profile</code>å¯¹è±¡çš„</li><li>è¡Œå†…æ–‡æœ¬é€šè¿‡<code>value</code>å±æ€§è®¾ç½®äº†åˆå§‹å€¼ï¼Œè€Œå¤šè¡Œæ–‡æœ¬åˆ™ç›´æ¥è®¾ç½®<code>&#123;&#123; profile.bio &#125;&#125;</code></li></ul><p>æœ€åé…ç½®ç†Ÿæ‚‰çš„<code>userprofile/urls.py</code>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">userprofile<span class="token operator">/</span>urls<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># ç”¨æˆ·ä¿¡æ¯</span>    path<span class="token punctuation">(</span><span class="token string">'edit/&lt;int:id>/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>profile_edit<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'edit'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯åŠ¨æœåŠ¡å™¨ï¼Œè¾“å…¥åœ°å€æŸ¥çœ‹åŠŸèƒ½æ˜¯å¦æ­£å¸¸ã€‚æ³¨æ„<strong>æ—§çš„ç”¨æˆ·éƒ½åˆ é™¤äº†</strong>ï¼ˆid=1çš„ç”¨æˆ·å·²ç»æ²¡æœ‰äº†ï¼‰ï¼Œè¿™é‡Œçš„<code>/&lt;int:id&gt;</code>å¿…é¡»ä¸º<strong>æ–°åˆ›å»ºçš„ç”¨æˆ·çš„id</strong>ã€‚</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181204/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE87.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181204/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE87.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>é¡µé¢è™½ç„¶ç®€é™‹ï¼Œä½†æ˜¯æ–¹æ³•æ˜¯ç±»ä¼¼çš„ã€‚å¯ä»¥åœ¨è¿™ä¸ªåŸºç¡€ä¸Šï¼Œæ‰©å±•ä¸ºä¸€ä¸ªç¾è§‚ã€è¯¦ç»†çš„ç”¨æˆ·ä¿¡æ¯é¡µé¢ã€‚</p><p><strong>å½“ç„¶æœ€å¥½å†ç»™ä¸ªäººä¿¡æ¯æ·»åŠ ä¸€ä¸ªå…¥å£ã€‚</strong>ä¿®æ”¹<code>/templates/header.html</code>ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">/templates/header.html...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dropdown-menu<span class="token punctuation">"</span></span> <span class="token attr-name">aria-labelledby</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>navbarDropdown<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dropdown-item<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>&#123;% url <span class="token punctuation">"</span>userprofile:edit<span class="token punctuation">"</span> user.id %&#125;<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>ä¸ªäººä¿¡æ¯<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    ...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¿®æ”¹articleè§†å›¾"><a href="#ä¿®æ”¹articleè§†å›¾" class="headerlink" title="ä¿®æ”¹articleè§†å›¾"></a>ä¿®æ”¹articleè§†å›¾</h2><p>åœ¨å‰é¢æ–°å»ºarticleçš„ç« èŠ‚ä¸­ï¼Œç”±äºæ²¡æœ‰ç”¨æˆ·ç®¡ç†çš„çŸ¥è¯†ï¼Œå­˜åœ¨ä¸€äº›é—®é¢˜ï¼š</p><ul><li><code>new_article.author = User.objects.get(id=1)</code>å¼ºè¡ŒæŠŠä½œè€…æŒ‡å®šä¸ºid=1çš„ç”¨æˆ·ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸å¯¹çš„ã€‚</li><li>æ²¡æœ‰å¯¹ç”¨æˆ·çš„ç™»å½•çŠ¶æ€è¿›è¡Œæ£€æŸ¥ã€‚</li></ul><p>å› æ­¤ç¨åŠ ä¿®æ”¹<code>def article_create()</code>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">/</span>article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>decorators <span class="token keyword">import</span> login_required<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># æ£€æŸ¥ç™»å½•</span><span class="token decorator annotation punctuation">@login_required</span><span class="token punctuation">(</span>login_url<span class="token operator">=</span><span class="token string">'/userprofile/login/'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">article_create</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># æŒ‡å®šç›®å‰ç™»å½•çš„ç”¨æˆ·ä¸ºä½œè€…</span>    new_article<span class="token punctuation">.</span>author <span class="token operator">=</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>request<span class="token punctuation">.</span>user<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡å¯æœåŠ¡å™¨ï¼Œæ–‡ç« æ­£ç¡®åŒ¹é…åˆ°ç™»å½•çš„ç”¨æˆ·ï¼Œåˆå¯ä»¥æ„‰å¿«çš„å†™æ–‡ç« äº†ã€‚</p><blockquote><p>å®é™…ä¸Šï¼Œåˆ é™¤æ–‡ç« <code>article_delete()</code>ã€æ›´æ–°æ–‡ç« <code>article_update()</code>éƒ½åº”è¯¥å¯¹ç”¨æˆ·èº«ä»½è¿›è¡Œæ£€æŸ¥ã€‚å°±è¯·è¯»è€…å°è¯•ä¿®æ”¹å§ã€‚</p></blockquote><h2 id="é…ç½®admin"><a href="#é…ç½®admin" class="headerlink" title="é…ç½®admin"></a>é…ç½®admin</h2><p>å‰é¢æˆ‘ä»¬å·²ç»å°è¯•è¿‡å°†<code>article</code>é…ç½®åˆ°<strong>admin</strong>åå°ï¼Œæ–¹æ³•æ˜¯éå¸¸ç®€å•çš„ï¼Œç›´æ¥åœ¨<code>admin.py</code>ä¸­å†™å…¥<code>admin.site.register(Profile)</code>å°±å¯ä»¥äº†ã€‚ä½†æ˜¯è¿™æ ·å†™ä¼šå¯¼è‡´<code>User</code>ã€<code>Profile</code>æ˜¯ä¸¤ä¸ªåˆ†å¼€çš„è¡¨ï¼Œä¸æ–¹ä¾¿ä¸è¯´ï¼Œå¼ºè¿«ç—‡çš„ä½ æ€ä¹ˆèƒ½å—å¾—äº†ã€‚</p><p>æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿåœ¨<strong>admin</strong>ä¸­å°†<code>User</code>ã€<code>Profile</code>åˆå¹¶ä¸ºä¸€å¼ å®Œæ•´çš„è¡¨æ ¼ã€‚æ–¹æ³•å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">/</span>userprofile<span class="token operator">/</span>admin<span class="token punctuation">.</span>py<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> admin<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>admin <span class="token keyword">import</span> UserAdmin <span class="token keyword">as</span> BaseUserAdmin<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>models <span class="token keyword">import</span> User<span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> Profile<span class="token comment"># å®šä¹‰ä¸€ä¸ªè¡Œå†… admin</span><span class="token keyword">class</span> <span class="token class-name">ProfileInline</span><span class="token punctuation">(</span>admin<span class="token punctuation">.</span>StackedInline<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> Profile    can_delete <span class="token operator">=</span> <span class="token boolean">False</span>    verbose_name_plural <span class="token operator">=</span> <span class="token string">'UserProfile'</span><span class="token comment"># å°† Profile å…³è”åˆ° User ä¸­</span><span class="token keyword">class</span> <span class="token class-name">UserAdmin</span><span class="token punctuation">(</span>BaseUserAdmin<span class="token punctuation">)</span><span class="token punctuation">:</span>    inlines <span class="token operator">=</span> <span class="token punctuation">(</span>ProfileInline<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token comment"># é‡æ–°æ³¨å†Œ User</span>admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>unregister<span class="token punctuation">(</span>User<span class="token punctuation">)</span>admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>register<span class="token punctuation">(</span>User<span class="token punctuation">,</span> UserAdmin<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰“å¼€<strong>admin</strong>ä¸­çš„<code>User</code>è¡¨ï¼Œå‘ç°<code>Profile</code>çš„æ•°æ®å·²ç»å †å åœ¨åº•éƒ¨äº†ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181204/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE88.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181204/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE88.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><h2 id="æœ¬ç« å‹˜è¯¯"><a href="#æœ¬ç« å‹˜è¯¯" class="headerlink" title="æœ¬ç« å‹˜è¯¯"></a>æœ¬ç« å‹˜è¯¯</h2><blockquote><p>2019/06/19 æ–°å¢ï¼šæ„Ÿè°¢è¯»è€… @shenhanlin å¯¹æœ¬é—®é¢˜çš„åé¦ˆã€‚</p></blockquote><p>æœ¬ç« ä¸­ç”¨åˆ°äº†ä¿¡å·æ¥å®ç°<code>User</code>å’Œ<code>Profile</code>çš„åŒæ­¥åˆ›å»ºï¼Œä½†æ˜¯ä¹Ÿ<strong>äº§ç”Ÿäº†ä¸€ä¸ªBUG</strong>ï¼šåœ¨åå°ä¸­åˆ›å»º<code>User</code>æ—¶å¦‚æœå¡«å†™äº†<code>Profile</code>ä»»ä½•å†…å®¹ï¼Œåˆ™ç³»ç»ŸæŠ¥é”™ä¸”ä¿å­˜ä¸æˆåŠŸï¼›å…¶ä»–æƒ…å†µä¸‹å‡æ­£å¸¸ã€‚</p><p><strong>BUGäº§ç”ŸåŸå› ï¼š</strong>åœ¨åå°ä¸­åˆ›å»ºå¹¶ä¿å­˜<code>User</code>æ—¶è°ƒç”¨äº†ä¿¡å·æ¥æ”¶å‡½æ•°ï¼Œåˆ›å»ºäº†<code>Profile</code>è¡¨ï¼›ä½†å¦‚æœæ­¤æ—¶ç®¡ç†å‘˜å¡«å†™äº†å†…è”çš„<code>Profile</code>è¡¨ï¼Œä¼šå¯¼è‡´æ­¤è¡¨ä¹Ÿä¼šè¢«åˆ›å»ºå¹¶ä¿å­˜ã€‚æœ€ç»ˆç»“æœå°±æ˜¯åŒæ—¶åˆ›å»ºäº†ä¸¤ä¸ªå…·æœ‰ç›¸åŒ<code>User</code>çš„<code>Profile</code>è¡¨ï¼Œè¿èƒŒäº†â€ä¸€å¯¹ä¸€â€œå¤–é”®çš„åŸåˆ™ã€‚</p><p>è§£å†³çš„åŠæ³•ä¹Ÿä¸éš¾ã€‚å› ä¸ºåšå®¢é¡¹ç›®çš„éœ€æ±‚è¾ƒç®€å•ï¼Œå…¶å®æ²¡æœ‰å¿…è¦ç”¨åˆ°ä¿¡å·ã€‚</p><p>ä¿®æ”¹modelï¼ŒæŠŠä¸¤ä¸ªä¿¡å·æ¥æ”¶å‡½æ•°å»é™¤ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">userprofile<span class="token operator">/</span>models<span class="token punctuation">.</span>py<span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>models <span class="token keyword">import</span> User<span class="token keyword">class</span> <span class="token class-name">Profile</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    user <span class="token operator">=</span> models<span class="token punctuation">.</span>OneToOneField<span class="token punctuation">(</span>User<span class="token punctuation">,</span> on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">,</span> related_name<span class="token operator">=</span><span class="token string">'profile'</span><span class="token punctuation">)</span>    phone <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    avatar <span class="token operator">=</span> models<span class="token punctuation">.</span>ImageField<span class="token punctuation">(</span>upload_to<span class="token operator">=</span><span class="token string">'avatar/%Y%m%d/'</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    bio <span class="token operator">=</span> models<span class="token punctuation">.</span>TextField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">500</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token string">'user &#123;&#125;'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>user<span class="token punctuation">.</span>username<span class="token punctuation">)</span>    <span class="token comment"># ä¸‹é¢çš„ä¿¡å·æ¥æ”¶å‡½æ•°å…¨éƒ¨æ³¨é‡Šæ‰</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¿®æ”¹viewï¼Œä½¿å¾—<code>Profile</code>è¡¨æ ¹æ®æ˜¯å¦å·²ç»å­˜åœ¨è€ŒåŠ¨æ€çš„åˆ›å»ºã€è·å–ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">userprofile<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯</span><span class="token decorator annotation punctuation">@login_required</span><span class="token punctuation">(</span>login_url<span class="token operator">=</span><span class="token string">'/userprofile/login/'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">profile_edit</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    user <span class="token operator">=</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token builtin">id</span><span class="token punctuation">)</span>    <span class="token comment"># æ—§ä»£ç </span>    <span class="token comment"># profile = Profile.objects.get(user_id=id)</span>    <span class="token comment"># ä¿®æ”¹åçš„ä»£ç </span>    <span class="token keyword">if</span> Profile<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>user_id<span class="token operator">=</span><span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exists<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        profile <span class="token operator">=</span> Profile<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span>user_id<span class="token operator">=</span><span class="token builtin">id</span><span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        profile <span class="token operator">=</span> Profile<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>user<span class="token operator">=</span>user<span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å³å¦‚æœ<code>Profile</code>å·²ç»å­˜åœ¨äº†å°±è·å–å®ƒï¼Œå¦‚æœä¸å­˜åœ¨å°±åˆ›å»ºä¸€ä¸ªæ–°çš„ã€‚è¿™æ ·ä¿®æ”¹ååº”è¯¥å°±å¯ä»¥é¡ºåˆ©çš„åˆ›å»ºæ–°ç”¨æˆ·äº†ã€‚</p><p>é™¤äº†ä¸Šé¢çš„æ–¹æ³•ï¼Œè¿˜æœ‰åˆ«çš„æ‰‹æ®µè§£å†³æ­¤é—®é¢˜ï¼š</p><ul><li>å–æ¶ˆ<code>Profile</code>åœ¨åå°çš„å†…è”ï¼Œé¿å…åˆ›å»º<code>User</code>çš„åŒæ—¶åˆ›å»ºæ­¤è¡¨ã€‚</li><li>è¦†å†™<code>User</code>è¡¨çš„<code>save()</code>æ–¹æ³•ï¼Œè·³è¿‡åå°çš„è‡ªåŠ¨ä¿å­˜ã€‚ï¼ˆä¸æ¨èï¼‰</li></ul><p>è™½ç„¶åšä¸»åšäº†ä¸æ­£ç¡®çš„ç¤ºèŒƒï¼Œä½†æ˜¯ä¿¡å·ç¡®å®æ˜¯å¾ˆé‡è¦çš„æ¦‚å¿µï¼Œå°±å½“èœ»èœ“ç‚¹æ°´çš„ä»‹ç»ç»™å¤§å®¶ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« ä½¿ç”¨ä¸€å¯¹ä¸€é“¾æ¥çš„æ–¹å¼ï¼Œæ‰©å±•å¹¶æ›´æ–°äº†ç”¨æˆ·ä¿¡æ¯ã€‚è¯»è€…å¯ä»¥æ ¹æ®è‡ªèº«éœ€æ±‚ï¼Œæ·»åŠ ä»»ä½•éœ€è¦çš„å­—æ®µå†…å®¹ã€‚</p><p>ä¸‹ä¸€ç« å°†å­¦ä¹ å¯¹å›¾ç‰‡çš„ç®€å•å¤„ç†ã€‚</p><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#100;&#x75;&#115;&#97;&#x69;&#112;&#x68;&#111;&#x74;&#x6f;&#x40;&#102;&#x6f;&#x78;&#x6d;&#97;&#x69;&#108;&#46;&#99;&#111;&#109;">&#100;&#x75;&#115;&#97;&#x69;&#112;&#x68;&#111;&#x74;&#x6f;&#x40;&#102;&#x6f;&#x78;&#x6d;&#97;&#x69;&#108;&#46;&#99;&#111;&#109;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul><h2 id="å­˜åœ¨çš„é—®é¢˜"><a href="#å­˜åœ¨çš„é—®é¢˜" class="headerlink" title="å­˜åœ¨çš„é—®é¢˜"></a>å­˜åœ¨çš„é—®é¢˜</h2><pre><code>æœ‰ä¸€ä¸ªbug æ ‡è®°ä¸€ä¸‹ï¼šç”¨æˆ·æ›´æ–°æ–‡ç« çš„æ—¶å€™ï¼Œæ²¡æœ‰é‰´æƒï¼Œå¯¼è‡´ä»»æ„ç”¨æˆ·å¯ä»¥ä»»æ„ä¿®æ”¹ä»»ä½•äººçš„æ–‡ç« æ­£å¸¸é€»è¾‘åº”è¯¥æ˜¯ç®¡ç†å‘˜å¯ä»¥åˆ é™¤ä»»ä½•äººçš„æ–‡ç« ï¼Œåªæœ‰ç”¨æˆ·æœ¬èº«å¯ä»¥ä¿®æ”¹è‡ªå·±çš„æ–‡ç« </code></pre>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--05.Viewè§†å›¾åˆæ¢</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/05.view-shi-tu-chu-tan/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/05.view-shi-tu-chu-tan/</url>
      
        <content type="html"><![CDATA[<p>æ•°æ®åº“è™½ç„¶å·²ç»æœ‰äº†ï¼Œä½†æ˜¯ç”¨æˆ·é€šå¸¸åªéœ€è¦è¿™ä¸ªåºå¤§æ•°æ®åº“ä¸­çš„å¾ˆå°ä¸€éƒ¨åˆ†è¿›è¡ŒæŸ¥çœ‹ã€ä¿®æ”¹ç­‰æ“ä½œã€‚ä¸ºæ­¤è¿˜éœ€è¦ä»£ç æ¥æ°å½“çš„å–å‡ºå¹¶å±•ç¤ºæ•°æ®ï¼Œè¿™ä¸€éƒ¨åˆ†ä»£ç å°±è¢«ç§°ä¸º<strong>è§†å›¾</strong>ã€‚</p><p>Django ä¸­è§†å›¾çš„æ¦‚å¿µæ˜¯<strong>ã€Œä¸€ç±»å…·æœ‰ç›¸åŒåŠŸèƒ½å’Œæ¨¡æ¿çš„ç½‘é¡µçš„é›†åˆã€</strong>ã€‚æ¯”å¦‚ï¼Œåœ¨ä¸€ä¸ªåšå®¢åº”ç”¨ä¸­ï¼Œä½ å¯èƒ½ä¼šåˆ›å»ºå¦‚ä¸‹å‡ ä¸ªè§†å›¾ï¼š</p><ul><li>åšå®¢é¦–é¡µï¼šå±•ç¤ºæœ€è¿‘çš„å‡ é¡¹å†…å®¹ã€‚</li><li>å†…å®¹â€œè¯¦æƒ…â€é¡µï¼šè¯¦ç»†å±•ç¤ºæŸé¡¹å†…å®¹ã€‚</li><li>è¯„è®ºå¤„ç†å™¨ï¼šç”¨äºå“åº”ä¸ºä¸€é¡¹å†…å®¹æ·»åŠ è¯„è®ºçš„æ“ä½œã€‚</li></ul><p>è¿™äº›éœ€æ±‚éƒ½é <strong>è§†å›¾ï¼ˆViewï¼‰</strong>æ¥å®Œæˆã€‚</p><h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World!"></a>Hello World!</h2><p>é¦–å…ˆå†™ä¸€ä¸ªæœ€ç®€å•çš„<strong>è§†å›¾å‡½æ•°</strong>ï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å°å‡º<code>Hello World!</code>å­—ç¬¦ä¸²ã€‚</p><p>æ‰“å¼€<code>article/views.py</code>ï¼Œå†™å‡ºè§†å›¾å‡½æ•°ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token comment"># å¯¼å…¥ HttpResponse æ¨¡å—</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>http <span class="token keyword">import</span> HttpResponse<span class="token comment"># è§†å›¾å‡½æ•°</span><span class="token keyword">def</span> <span class="token function">article_list</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"Hello World!"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ç½‘é¡µéƒ½æ˜¯ä»è§†å›¾æ´¾ç”Ÿè€Œæ¥ã€‚</strong>æ¯ä¸€ä¸ªè§†å›¾è¡¨ç°ä¸ºä¸€ä¸ªç®€å•çš„Pythonå‡½æ•°ï¼Œå®ƒå¿…é¡»è¦åšçš„åªæœ‰ä¸¤ä»¶äº‹ï¼šè¿”å›ä¸€ä¸ªåŒ…å«è¢«è¯·æ±‚é¡µé¢å†…å®¹çš„ <code>HttpResponse</code>å¯¹è±¡ï¼Œæˆ–è€…æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œæ¯”å¦‚ <code>Http404</code> ã€‚è‡³äºä½ è¿˜æƒ³å¹²äº›ä»€ä¹ˆï¼Œéšä¾¿ä½ ã€‚</p><p>è§†å›¾å‡½æ•°ä¸­çš„<code>request</code>ä¸ç½‘é¡µå‘æ¥çš„è¯·æ±‚æœ‰å…³ï¼Œé‡Œé¢åŒ…å«<strong>get</strong>æˆ–<strong>post</strong>çš„å†…å®¹ã€ç”¨æˆ·æµè§ˆå™¨ã€ç³»ç»Ÿç­‰ä¿¡æ¯ã€‚Djangoè°ƒç”¨<code>article_list</code>å‡½æ•°æ—¶ä¼šè¿”å›ä¸€ä¸ªå«å­—ç¬¦ä¸²çš„ <code>HttpResponse</code>å¯¹è±¡ã€‚</p><p>æœ‰äº†è§†å›¾å‡½æ•°ï¼Œè¿˜éœ€è¦é…ç½®<strong>URLconfs</strong>ï¼Œå°†ç”¨æˆ·è¯·æ±‚çš„URLé“¾æ¥å…³è”èµ·æ¥ã€‚æ¢å¥è¯è¯´ï¼ŒURLconfsçš„ä½œç”¨æ˜¯å°†URLæ˜ å°„åˆ°è§†å›¾ä¸­ã€‚</p><p>åœ¨<a href="https://www.dusaiphoto.com/article/article-detail/6/">å‰é¢çš„æ–‡ç« </a>ä¸­å·²ç»å°†URLåˆ†å‘ç»™äº†<code>article</code>åº”ç”¨ï¼Œå› æ­¤è¿™é‡Œåªéœ€è¦ä¿®æ”¹ä¹‹å‰æ·»åŠ çš„<code>article/urls.py</code>å°±å¯ä»¥ã€‚æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>urls<span class="token punctuation">.</span>py<span class="token comment"># å¼•å…¥views.py</span><span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> views<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token comment"># pathå‡½æ•°å°†urlæ˜ å°„åˆ°è§†å›¾</span>    path<span class="token punctuation">(</span><span class="token string">'article-list/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>article_list<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'article_list'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>Django å°†ä¼šæ ¹æ®ç”¨æˆ·è¯·æ±‚çš„ URL æ¥é€‰æ‹©ä½¿ç”¨å“ªä¸ªè§†å›¾ã€‚</strong>æœ¬ä¾‹ä¸­å½“ç”¨æˆ·è¯·æ±‚<code>article/article-list</code>é“¾æ¥æ—¶ï¼Œä¼šè°ƒç”¨<code>views.py</code>ä¸­çš„<code>article_list</code>å‡½æ•°ï¼Œå¹¶è¿”å›æ¸²æŸ“åçš„å¯¹è±¡ã€‚å‚æ•°<code>name</code>ç”¨äºåæŸ¥urlåœ°å€ï¼Œç›¸å½“äºç»™urlèµ·äº†ä¸ªåå­—ï¼Œä»¥åä¼šç”¨åˆ°ã€‚</p><p>æµ‹è¯•ä¸€ä¸‹åˆšæ‰æ•²çš„ä»£ç æ˜¯å¦å·¥ä½œæ­£å¸¸ã€‚</p><p><strong>åœ¨è™šæ‹Ÿç¯å¢ƒä¸­</strong>ï¼Œè¿›å…¥é¡¹ç›®ç›®å½•ï¼Œä¹Ÿå°±æ˜¯<code>my_blog</code>æ–‡ä»¶å¤¹ï¼Œè¾“å…¥<code>python manage.py runserver</code>ï¼Œè¿è¡Œè°ƒè¯•æœåŠ¡å™¨ï¼š</p><pre class="line-numbers language-none"><code class="language-none">(env) E:\django_project\my_blog&gt;python manage.py runserverPerforming system checks...System check identified no issues (0 silenced).August 30, 2018 - 19:41:00Django version 2.1, using settings &#39;my_blog.settings&#39;Starting development server at http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;Quit the server with CTRL-BREAK.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆåŠŸè¿è¡Œåï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥urlåœ°å€<code>http://127.0.0.1:8000/article/article-list/</code>ï¼Œå…¶ä¸­<code>127.0.0.1:8000</code>æ˜¯è°ƒè¯•æœåŠ¡å™¨çš„æœ¬åœ°åœ°å€ï¼Œ<code>article</code>æ˜¯é¡¹ç›®è·¯ç”±<code>my_blog\urls.py</code>åˆ†å‘çš„åœ°å€ï¼Œ<code>article-list</code>æ˜¯åˆšæ‰é…ç½®çš„<code>article\urls.py</code>åº”ç”¨åˆ†å‘çš„åœ°å€ã€‚</p><p>è¿æ°”å¥½çš„è¯ï¼Œæµè§ˆå™¨ä¸­ä¼šæ‰“å°å‡º<code>Hello World!</code>å­—ç¬¦ä¸²ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20180830/hello.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20180830/hello.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ä¸åˆ°10è¡Œä»£ç å°±å®Œæˆäº†åŸºæœ¬åŠŸèƒ½ï¼Œæ˜¯ä¸æ˜¯å¾ˆç¥å¥‡ã€‚</p><p>å½“ç„¶ï¼Œåªæ˜¯å°è¯•ç‰›åˆ€ã€‚</p><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><p>åœ¨ç« èŠ‚<a href="https://www.dusaiphoto.com/article/article-detail/11/">ç¼–å†™Modelæ¨¡å‹</a>ä¸­è™½ç„¶å®šä¹‰äº†æ•°æ®åº“è¡¨ï¼Œä½†æ˜¯è¿™ä¸ªè¡¨æ˜¯ç©ºçš„ï¼Œä¸æ–¹ä¾¿å±•ç¤ºViewè°ƒå–æ•°æ®çš„æ•ˆæœã€‚æ‰€ä»¥åœ¨å†™Viewä¹‹å‰ï¼Œéœ€è¦å¾€æ•°æ®è¡¨é‡Œè®°å½•ä¸€äº›æ•°æ®ã€‚æ¥ä¸‹æ¥å°±åšè¿™ä¸ªå·¥ä½œã€‚</p><h3 id="ç½‘ç«™åå°æ¦‚å¿µ"><a href="#ç½‘ç«™åå°æ¦‚å¿µ" class="headerlink" title="ç½‘ç«™åå°æ¦‚å¿µ"></a>ç½‘ç«™åå°æ¦‚å¿µ</h3><p><strong>ç½‘ç«™åå°</strong>ï¼Œæœ‰æ—¶ä¹Ÿç§°ä¸º<strong>ç½‘ç«™ç®¡ç†åå°</strong>ï¼Œæ˜¯æŒ‡ç”¨äºç®¡ç†ç½‘ç«™çš„ä¸€ç³»åˆ—æ“ä½œï¼Œå¦‚ï¼šæ•°æ®çš„å¢åŠ ã€æ›´æ–°ã€åˆ é™¤ç­‰ã€‚åœ¨é¡¹ç›®å¼€å‘çš„åˆæœŸï¼Œå› ä¸ºæ²¡æœ‰çœŸå®çš„ç”¨æˆ·æ•°æ®å’Œå®Œæ•´çš„æµ‹è¯•ç¯å¢ƒï¼Œä¼šé¢‘ç¹åœ°ä½¿ç”¨åå°ä¿®æ”¹æµ‹è¯•æ•°æ®ã€‚</p><p>Djangoå†…ç½®äº†ä¸€ä¸ªå¾ˆå¥½çš„åå°ç®¡ç†å·¥å…·ï¼Œåªéœ€è¦äº›å°‘é‡ä»£ç ï¼Œå°±å¯ä»¥å®ç°å¼ºå¤§çš„åŠŸèƒ½ã€‚</p><h3 id="åˆ›å»ºç®¡ç†å‘˜è´¦å·ï¼ˆSuperuserï¼‰"><a href="#åˆ›å»ºç®¡ç†å‘˜è´¦å·ï¼ˆSuperuserï¼‰" class="headerlink" title="åˆ›å»ºç®¡ç†å‘˜è´¦å·ï¼ˆSuperuserï¼‰"></a>åˆ›å»ºç®¡ç†å‘˜è´¦å·ï¼ˆSuperuserï¼‰</h3><p>ç®¡ç†å‘˜è´¦å·ï¼ˆSuperuserï¼‰æ˜¯å¯ä»¥è¿›å…¥ç½‘ç«™åå°ï¼Œå¯¹æ•°æ®è¿›è¡Œç»´æŠ¤çš„è´¦å·ï¼Œå…·æœ‰å¾ˆé«˜çš„æƒé™ã€‚è¿™é‡Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªç®¡ç†å‘˜è´¦å·ï¼Œä»¥ä¾¿æ·»åŠ åç»­çš„æµ‹è¯•æ•°æ®ã€‚</p><p><strong>è™šæ‹Ÿç¯å¢ƒ</strong>ä¸­è¾“å…¥<code>python manage.py createsuperuser</code>æŒ‡ä»¤ï¼Œåˆ›å»ºç®¡ç†å‘˜è´¦å·ï¼š</p><pre class="line-numbers language-none"><code class="language-none">(env) E:\django_project\my_blog&gt;python manage.py createsuperuserUsername: FengqiEmail address: Fengqi@163.comPassword:Password (again):Superuser created successfully.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æŒ‡ä»¤ä¼šæç¤ºä½ è¾“å…¥è´¦å·åå­—ã€é‚®ç®±å’Œå¯†ç ï¼Œæ ¹æ®å–œå¥½å¡«å…¥å³å¯ã€‚<br>è¿™é‡Œæˆ‘çš„è´¦å·å¯†ç ä¸€æ ·ï¼šFengqi</p><h3 id="å°†ArticlePostæ³¨å†Œåˆ°åå°ä¸­"><a href="#å°†ArticlePostæ³¨å†Œåˆ°åå°ä¸­" class="headerlink" title="å°†ArticlePostæ³¨å†Œåˆ°åå°ä¸­"></a>å°†ArticlePostæ³¨å†Œåˆ°åå°ä¸­</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦â€œå‘Šè¯‰â€Djangoï¼Œåå°ä¸­éœ€è¦æ·»åŠ <code>ArticlePost</code>è¿™ä¸ªæ•°æ®è¡¨ä¾›ç®¡ç†ã€‚</p><p>æ‰“å¼€<code>article/admin.py</code>ï¼Œå†™å…¥ä»¥ä¸‹ä»£ç ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>admin<span class="token punctuation">.</span>py<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> admin<span class="token comment"># åˆ«å¿˜äº†å¯¼å…¥ArticlerPost</span><span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> ArticlePost<span class="token comment"># æ³¨å†ŒArticlePoståˆ°adminä¸­</span>admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>register<span class="token punctuation">(</span>ArticlePost<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·å°±ç®€å•çš„æ³¨å†Œå¥½äº†ã€‚</p><h3 id="åœ¨åå°ä¸­é¨æ¸¸"><a href="#åœ¨åå°ä¸­é¨æ¸¸" class="headerlink" title="åœ¨åå°ä¸­é¨æ¸¸"></a>åœ¨åå°ä¸­é¨æ¸¸</h3><p>ç»†å¿ƒçš„åŒå­¦å¯èƒ½å·²ç»å‘ç°ï¼ŒDjangoé¡¹ç›®ç”Ÿæˆçš„æ—¶å€™å°±è‡ªåŠ¨é…ç½®å¥½äº†åå°çš„settingså’Œurlï¼Œå› æ­¤ä¸éœ€è¦æˆ‘ä»¬å†æ“å¿ƒäº†ã€‚</p><p>å¯åŠ¨serverï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥<code>http://127.0.0.1:8000/admin/</code>ï¼Œä¸€åˆ‡æ­£å¸¸çš„è¯å°±çœ‹åˆ°ä¸‹é¢çš„ç™»å½•ç•Œé¢äº†ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20180906/1.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20180906/1.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>è¾“å…¥åˆšæ‰åˆ›å»ºçš„ç®¡ç†å‘˜è´¦å·ï¼Œç™»å½•è¿›å»ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20180906/2.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20180906/2.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>çº¢æ¡†å†…å°±æ˜¯åˆšæ‰æ·»åŠ çš„<code>ArticlePost</code>æ•°æ®è¡¨ï¼Œç‚¹å‡»è¿›å…¥åï¼Œå†ç‚¹å‡»å³ä¸Šè§’çš„<code>ADD ARTICLE POST</code>æŒ‰é’®ï¼Œåˆ°è¾¾å¦‚ä¸‹é¡µé¢ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20180906/4.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20180906/4.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ä»”ç»†çœ‹ä¸€ä¸‹è¡¨å•ä¸­çš„æ¯ä¸€é¡¹ï¼Œå‘ç°ä¸<code>ArticlePost</code>ä¸­çš„å­—æ®µå®Œå…¨ç¬¦åˆï¼›å› ä¸º<code>updated</code>å­—æ®µæŒ‡å®šäº†è‡ªåŠ¨æ·»åŠ ï¼Œè¿™é‡Œå°±æ²¡æ˜¾ç¤ºäº†ã€‚</p><p>å°†è¡¨å•å¡«å¥½åï¼Œç‚¹å‡»ä¿å­˜ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20180906/5.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20180906/5.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>å¯ä»¥çœ‹åˆ°ARTICLE POSTä¸­å¤šäº†åˆšæ‰å½•å…¥çš„ä¸€æ¡æ•°æ®ã€‚æŒ‰ç…§åŒæ ·çš„æ–¹æ³•ï¼Œå†å†™å…¥å‡ æ¡æ•°æ®ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20180906/6.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20180906/6.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>è‡³æ­¤å‡†å¤‡å·¥ä½œå°±å·²ç»å¤§åŠŸå‘Šæˆã€‚</p><h2 id="æ£€è§†æ•°æ®åº“"><a href="#æ£€è§†æ•°æ®åº“" class="headerlink" title="æ£€è§†æ•°æ®åº“"></a>æ£€è§†æ•°æ®åº“</h2><blockquote><p>2018-10-29 æ–°å¢å†…å®¹</p></blockquote><p>é€šè¿‡ä¸Šé¢çš„æ“ä½œï¼Œæˆ‘ä»¬çš„æ•°æ®åº“ä¸­å·²ç»æœ‰1æ¡ç”¨æˆ·æ•°æ®ã€3æ¡æ–‡ç« æ•°æ®äº†ã€‚æœ‰çš„æ—¶å€™æˆ‘éœ€è¦æ£€æŸ¥æ•°æ®åº“ä¸­çš„æ•°æ®æ˜¯å¦æ­£ç¡®ï¼Œä½†æ˜¯é¡¹ç›®ä¸­çš„æ•°æ®åº“æ–‡ä»¶<code>db.sqlite3</code>åˆæ— æ³•ç›´æ¥æ‰“å¼€ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>è¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ°ä¸“é—¨å¤„ç†SQLiteæ•°æ®æ–‡ä»¶çš„è½¯ä»¶äº†ï¼š<a href="https://sqlitestudio.pl/index.rvt">SQLiteStudio</a></p><p>ä¸‹è½½å¹¶å®‰è£…ï¼Œç”¨å®ƒæ‰“å¼€<code>db.sqlite3</code>ï¼Œè½¯ä»¶å¯¼èˆªæ ä¸­å°±å‡ºç°äº†æ•°æ®åº“ä¸­ä¿å­˜çš„å„ç±»æ•°æ®åˆ—è¡¨ã€‚æ¯”å¦‚è¯´auth_userå°±æ˜¯ç”¨æˆ·æ•°æ®è¡¨äº†ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181029/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE70.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181029/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE70.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ä½ å¯ä»¥ç”¨å®ƒæ£€æŸ¥é¡¹ç›®ä»£ç ä¸­æ•°æ®åº“çš„æ“ä½œæ˜¯å¦æ­£å¸¸ï¼Œè¿™åœ¨å¼€å‘é˜¶æ®µæ˜¯éå¸¸å®ç”¨çš„ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« åˆæ­¥æ„Ÿå—äº†Viewçš„å·¥ä½œæ¨¡å¼ï¼Œåˆ›å»ºäº†Superuseråœ¨åå°å½•å…¥äº†å‡ æ¡æµ‹è¯•æ•°æ®ã€‚</p><p>ä¸‹ä¸€ç« å°†ç¼–å†™æ›´æœ‰æ„ä¹‰çš„Viewï¼Œå‡†å¤‡å¥½åè€å¸æœºå°±å¼€è½¦äº†ã€‚</p><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#100;&#117;&#x73;&#97;&#105;&#112;&#104;&#x6f;&#116;&#111;&#64;&#102;&#x6f;&#120;&#109;&#97;&#105;&#x6c;&#x2e;&#99;&#x6f;&#x6d;">&#100;&#117;&#x73;&#97;&#105;&#112;&#104;&#x6f;&#116;&#111;&#64;&#102;&#x6f;&#120;&#109;&#97;&#105;&#x6c;&#x2e;&#99;&#x6f;&#x6d;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--02.æ•™ç¨‹çš„å¼€å‘ç¯å¢ƒ</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/02.jiao-cheng-de-kai-fa-huan-jing/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/02.jiao-cheng-de-kai-fa-huan-jing/</url>
      
        <content type="html"><![CDATA[<h2 id="æ•™ç¨‹çš„å¼€å‘ç¯å¢ƒ"><a href="#æ•™ç¨‹çš„å¼€å‘ç¯å¢ƒ" class="headerlink" title="æ•™ç¨‹çš„å¼€å‘ç¯å¢ƒ"></a>æ•™ç¨‹çš„å¼€å‘ç¯å¢ƒ</h2><p>æœ¬æ•™ç¨‹çš„å¼€å‘ç¯å¢ƒä¸ºï¼š</p><ul><li><strong>Win 10ï¼ˆ64ä½ï¼‰</strong></li><li><strong>Python 3.7.0</strong></li><li><strong>Django 3.0.8</strong></li></ul><p>ä¸ºäº†é¿å…å¼€å‘ç¯å¢ƒä¸åŒè€Œå¯¼è‡´çš„é”™è¯¯ï¼Œå»ºè®®è¯»è€…ä½¿ç”¨ç›¸åŒçš„ç‰ˆæœ¬ã€‚</p><h2 id="å®‰è£…Python"><a href="#å®‰è£…Python" class="headerlink" title="å®‰è£…Python"></a>å®‰è£…Python</h2><p>pythonçš„å®‰è£…ä¸ºæ¯”è¾ƒç®€å•ï¼Œé¦–å…ˆæ‰¾åˆ°<a href="https://www.python.org/">Pythonå®˜æ–¹ç½‘ç«™</a>ï¼Œé€‰æ‹©python3.7çš„windowsç‰ˆæœ¬ï¼Œä¸‹è½½å¹¶å®‰è£…ã€‚</p><p><strong>å®‰è£…æ—¶æ³¨æ„å‹¾é€‰æ·»åŠ pythonåˆ°ç¯å¢ƒå˜é‡ä¸­ã€‚</strong>å¦‚æœæ²¡æœ‰æˆ–è€…æ¼æ‰è¿™ä¸€æ­¥ï¼Œè¯·å®‰è£…å®Œæ¯•åè‡ªè¡Œæ·»åŠ ã€‚</p><p>è‹¥å®åœ¨ä¸çŸ¥é“æ€ä¹ˆå¼„çš„ï¼Œçœ‹è¿™ç¯‡æ–‡ç« ï¼š</p><p><a href="https://blog.csdn.net/random_w/article/details/78897365">windowsä¸Šå®‰è£…python3æ•™ç¨‹ä»¥åŠç¯å¢ƒå˜é‡é…ç½®</a></p><p>å®‰è£…å®Œæˆåæ‰“å¼€<a href="https://jingyan.baidu.com/article/046a7b3e83a505f9c27fa9a2.html">å‘½ä»¤è¡Œ</a>ï¼Œè¾“å…¥<code>python -V</code>ï¼Œç³»ç»Ÿæ‰“å°å‡ºpythonçš„ç‰ˆæœ¬å·ï¼Œè¯´æ˜å®‰è£…æˆåŠŸäº†ï¼š</p><pre class="line-numbers language-none"><code class="language-none">C:\Users\dusai&gt; python -VPython 3.7.0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="é…ç½®è™šæ‹Ÿç¯å¢ƒ"><a href="#é…ç½®è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="é…ç½®è™šæ‹Ÿç¯å¢ƒ"></a>é…ç½®è™šæ‹Ÿç¯å¢ƒ</h2><p><strong>è™šæ‹Ÿç¯å¢ƒï¼ˆvirtualenvï¼Œæˆ–venv ï¼‰</strong>æ˜¯ Python å¤šç‰ˆæœ¬ç®¡ç†çš„åˆ©å™¨ï¼Œå¯ä»¥ä½¿æ¯ä¸ªé¡¹ç›®ç¯å¢ƒä¸å…¶ä»–é¡¹ç›®ç‹¬ç«‹å¼€æ¥ï¼Œä¿æŒç¯å¢ƒçš„å¹²å‡€ï¼Œè§£å†³åŒ…å†²çªé—®é¢˜ã€‚ä½ å¯ä»¥å°†è™šæ‹Ÿç¯å¢ƒç†è§£ä¸ºä¸€ä¸ªéš”ç»çš„å°ç³»ç»Ÿã€‚</p><p><strong>ä»Python3.3ç‰ˆæœ¬å¼€å§‹å°±è‡ªå¸¦äº†è™šæ‹Ÿç¯å¢ƒï¼Œä¸éœ€è¦å®‰è£…ï¼Œé…ç½®ä¸€ä¸‹å°±å¯ä»¥ç”¨äº†ã€‚</strong></p><p>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ•™ç¨‹ä¸­ä¸º<code>django_project</code>ã€‚è¿›å…¥æ­¤æ–‡ä»¶å¤¹ï¼š</p><pre class="line-numbers language-none"><code class="language-none">E:\&gt;cd django_projectE:\django_project&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¾“å…¥é…ç½®venvçš„å‘½ä»¤ï¼Œå…¶ä¸­çš„<code>env</code>ä¸ºè™šæ‹Ÿç¯å¢ƒçš„æ”¾ç½®ç›®å½•ï¼š</p><pre class="line-numbers language-none"><code class="language-none">E:\django_project&gt; python -m venv env  <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åˆ›å»ºå®Œæˆåï¼Œè¾“å…¥<code>env\Scripts\activate.bat</code>ï¼Œå³å¯è¿›å…¥è™šæ‹Ÿç¯å¢ƒï¼š</p><pre class="line-numbers language-none"><code class="language-none">E:\django_project&gt; env\Scripts\activate.bat(env) E:\django_project&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>ç›˜ç¬¦å‰æœ‰<code>(env)</code>æ ‡è¯†è¯´æ˜è¿›å…¥venvæˆåŠŸã€‚</strong></p><h2 id="å®‰è£…Django"><a href="#å®‰è£…Django" class="headerlink" title="å®‰è£…Django"></a>å®‰è£…Django</h2><p><strong>åœ¨è™šæ‹Ÿç¯å¢ƒä¸‹</strong>ï¼Œè¾“å…¥å‘½ä»¤<code>pip install django==3.0.8</code>ï¼š</p><pre class="line-numbers language-none"><code class="language-none">(env) E:\django_project&gt; pip install django&#x3D;&#x3D;3.0.8Collecting django&#x3D;&#x3D;2.2  Using cached   ...  ...Successfully installed django-2.2(env) E:\django_project&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é€šè¿‡æŒ‡ä»¤<code>pip install django==3.0.8</code>æ¥å®‰è£…å’Œæ•™ç¨‹ç›¸åŒç‰ˆæœ¬çš„ Djangoã€‚</p><p>ç³»ç»Ÿæ‰“å°å‡ºä»¥ä¸Šæ–‡å­—è¡¨ç¤ºDjangoå®‰è£…æˆåŠŸäº†ã€‚</p><blockquote><p>è¿™é‡Œä¸€å®šè¦æŒ‡å®šç‰ˆæœ¬å·ï¼Œå¦åˆ™å°±é»˜è®¤å®‰è£… Django 3 äº†ã€‚æ–°æ‰‹ä¸è¦çº ç»“ç‰ˆæœ¬é—®é¢˜ï¼Œå…ˆè·Ÿç€æ•™ç¨‹æŠŠåŸºç¡€æŒæ¡å¥½ã€‚</p></blockquote><h2 id="åˆ›å»ºDjangoé¡¹ç›®"><a href="#åˆ›å»ºDjangoé¡¹ç›®" class="headerlink" title="åˆ›å»ºDjangoé¡¹ç›®"></a>åˆ›å»ºDjangoé¡¹ç›®</h2><p>è¿˜æ˜¯åœ¨<strong>è™šæ‹Ÿç¯å¢ƒ</strong>ä¸‹ï¼Œåœ¨<code>django_project</code>æ–‡ä»¶å¤¹ä¸­åˆ›å»ºDjangoé¡¹ç›®ï¼š</p><pre class="line-numbers language-none"><code class="language-none">(env) E:\django_project&gt;django-admin startproject my_blog<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æŸ¥çœ‹<code>django_project</code>æ–‡ä»¶å¤¹ï¼Œå‘ç°å¤šäº†<code>my_blog</code>æ–‡ä»¶å¤¹ï¼Œå…¶ç»“æ„åº”è¯¥æ˜¯è¿™æ ·ï¼š</p><pre class="line-numbers language-none"><code class="language-none">my_blogâ”‚  db.sqlite3â”‚  manage.pyâ”‚â””â”€my_blog    â”‚  settings.py    â”‚  urls.py    â”‚  wsgi.py    â””â”€ __init__.py<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™å°±æ˜¯æˆ‘ä»¬åˆšåˆ›å»ºå‡ºæ¥çš„é¡¹ç›®äº†ã€‚</p><h2 id="è¿è¡ŒDjangoæœåŠ¡å™¨"><a href="#è¿è¡ŒDjangoæœåŠ¡å™¨" class="headerlink" title="è¿è¡ŒDjangoæœåŠ¡å™¨"></a>è¿è¡ŒDjangoæœåŠ¡å™¨</h2><p>éå¸¸å¹¸è¿ï¼ŒDjangoè‡ªå¸¦ä¸€ä¸ªè½»é‡çš„Webå¼€å‘æœåŠ¡å™¨ï¼Œä¹Ÿè¢«å«åšâ€œrunserverâ€ã€‚</p><p>å¼€å‘æœåŠ¡å™¨æ˜¯ä¸ºäº†è®©ä½ å¿«é€Ÿå¼€å‘Webç¨‹åºï¼Œé€šè¿‡å®ƒå¯ä»¥é¿å¼€é…ç½®ç”Ÿäº§ç¯å¢ƒçš„æœåŠ¡å™¨çš„ç¹çç¯èŠ‚ã€‚</p><p>å¼€å‘æœåŠ¡å™¨ä¼šè‡ªåŠ¨çš„æ£€æµ‹ä»£ç çš„æ”¹å˜ï¼Œå¹¶ä¸”è‡ªåŠ¨åŠ è½½å®ƒï¼Œå› æ­¤åœ¨ä¿®æ”¹ä»£ç åä¸éœ€è¦æ‰‹åŠ¨å»é‡å¯æœåŠ¡å™¨ï¼Œéå¸¸çš„æ–¹ä¾¿ã€‚</p><p>è¦è¿è¡Œè¿™ä¸ªdjangoæœåŠ¡å™¨ï¼Œé¦–å…ˆè¦è¿›å…¥<code>my_blog</code>æ–‡ä»¶å¤¹ï¼Œå³å«æœ‰<code>manage.py</code>æ–‡ä»¶çš„é‚£ä¸ªï¼š</p><pre class="line-numbers language-none"><code class="language-none">(env) E:\django_project&gt;cd my_blog(env) E:\django_project\my_blog&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¾“å…¥å‘½ä»¤<code>python manage.py runserver</code>ï¼š</p><pre class="line-numbers language-none"><code class="language-none">(env) E:\django_project\my_blog&gt;python manage.py runserverPerforming system checks...System check identified no issues (0 silenced).You have 15 unapplied migration(s). Your project may not work properly until you apply the migrations for app(s): admin, auth, contenttypes, sessions.Run &#39;python manage.py migrate&#39; to apply them.August 20, 2018 - 17:32:34Django version 2.2, using settings &#39;my_blog.settings&#39;Starting development server at http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;Quit the server with CTRL-BREAK.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç³»ç»Ÿæ‰“å°å‡ºè¿™äº›ä¿¡æ¯ï¼Œè¯´æ˜æœåŠ¡å™¨å¯åŠ¨æˆåŠŸäº†ï¼Œæ‰“å¼€chromeæµè§ˆå™¨ï¼Œè¾“å…¥<a href="http://127.0.0.1:8000/">http://127.0.0.1:8000/</a> ï¼Œå³å€’æ•°ç¬¬2æ’ä¿¡æ¯æç¤ºæˆ‘ä»¬çš„æœåŠ¡å™¨åœ°å€ã€‚çœ‹åˆ°ä¸‹é¢çš„ç•Œé¢ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/avatar_thumbnail/hello_django_udoIHbf.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/avatar_thumbnail/hello_django_udoIHbf.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>æ­å–œä½ ï¼Œå°ç«ç®­èµ·é£ï¼Œdjangoè¿è¡Œèµ·æ¥äº†ï¼</p><h2 id="ä»£ç ç¼–è¾‘å™¨"><a href="#ä»£ç ç¼–è¾‘å™¨" class="headerlink" title="ä»£ç ç¼–è¾‘å™¨"></a>ä»£ç ç¼–è¾‘å™¨</h2><p>djangoè¿è¡Œèµ·æ¥åï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€æ¬¾<strong>ä»£ç ç¼–è¾‘å™¨</strong>æˆ–è€…<strong>é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰</strong>æ¥ç¼–è¾‘pythonæ–‡ä»¶ï¼Œä»¥è¾¾åˆ°å¼€å‘éœ€æ±‚ã€‚</p><p>å¸‚é¢ä¸Šæœ‰å¾ˆå¤šPythonçš„ä»£ç ç¼–è¾‘å™¨æˆ–è€…é›†æˆå¼€å‘ç¯å¢ƒå¯ä»¥é€‰æ‹©ã€‚</p><p>æ•™ç¨‹ä½¿ç”¨äº†ä»£ç ç¼–è¾‘å™¨<strong>Sublime Text 3</strong>ã€‚å®ƒä¸æ˜¯å…è´¹çš„ï¼Œä½†æ˜¯å¯ä»¥æ— é™æœŸè¯•ç”¨ï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦æè…°åŒ…ã€‚</p><p>è¿›å…¥<a href="https://www.sublimetext.com/3">Sublime Text 3å®˜ç½‘</a>ï¼Œä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„å®‰è£…æ–‡ä»¶å®‰è£…å³å¯ä½¿ç”¨äº†ã€‚</p><p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥æ ¹æ®å–œå¥½é€‰æ‹©å…¶ä»–çš„ç¼–è¾‘å™¨æˆ–è€…å¼€å‘ç¯å¢ƒï¼š</p><ul><li><a href="https://blog.csdn.net/cH3RUF0tErmB3yH/article/details/80156176">10å¤§Pythoné›†æˆå¼€å‘ç¯å¢ƒå’Œä»£ç ç¼–è¾‘å™¨ï¼ˆæŒ‡å—ï¼‰</a></li><li><a href="https://www.zhihu.com/question/20476960">å†™pythonç¨‹åºä»€ä¹ˆç¼–è¾‘å™¨æœ€å¥½ç”¨ï¼Ÿ</a></li></ul><h2 id="æµè§ˆå™¨"><a href="#æµè§ˆå™¨" class="headerlink" title="æµè§ˆå™¨"></a>æµè§ˆå™¨</h2><p>ä½œä¸ºä¸€ä¸ªæ­£ç»çš„webå¼€å‘è€…ï¼Œä½ çš„çœ¼ä¸­åº”è¯¥åªæœ‰<a href="https://www.google.com/chrome/">Chrome</a>ï¼</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ç»è¿‡ä»¥ä¸Šä¸€ç•ªæŠ˜è…¾ï¼Œæ€»ç®—æ˜¯æŠŠè¶æ‰‹çš„å·¥å…·éƒ½å‡†å¤‡é½äº†ã€‚</p><p>å‡†å¤‡å¥½è¿æ¥æ­£å¼çš„æŒ‘æˆ˜å§ã€‚</p><ul><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--01.å‰è¨€</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/01.qian-yan/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/01.qian-yan/</url>
      
        <content type="html"><![CDATA[<p><strong>Django</strong> æ˜¯ä¸€ä¸ªç”± <strong>Python</strong> å†™æˆçš„å¼€æºWebåº”ç”¨æ¡†æ¶ï¼Œå¯ä»¥ç”¨å®ƒä»¥æ›´é«˜çš„æ•ˆç‡ã€æ›´å°‘çš„ä»£ç ï¼Œæ­å»ºä¸€ä¸ªé«˜æ€§èƒ½çš„ä¸ªäººç½‘ç«™ã€‚</p><p>å¦‚æœä½ ä»¥å‰ä»æœªæ¥è§¦è¿‡ web å¼€å‘ï¼Œå¹¶ä¸”æƒ³å¿«é€Ÿä¸Šçº¿è‡ªå·±çš„ä¸ªæ€§åŒ–ç½‘ç«™ï¼ŒDjango ç»å¯¹æ˜¯ä½ çš„æœ€ä½³é€‰æ‹©ã€‚</p><p><strong>æœ¬æ•™ç¨‹ä¸ºé›¶åŸºç¡€çš„å°ç™½å‡†å¤‡ï¼Œæ•™ä½ å¿«é€Ÿæ­å»ºä¸€ä¸ªè‡ªå·±çš„åšå®¢ç½‘ç«™ã€‚</strong></p><h2 id="æ•™ç¨‹ç‰¹ç‚¹"><a href="#æ•™ç¨‹ç‰¹ç‚¹" class="headerlink" title="æ•™ç¨‹ç‰¹ç‚¹"></a>æ•™ç¨‹ç‰¹ç‚¹</h2><ul><li>é›¶åŸºç¡€ã€å…è´¹ã€ä¸­æ–‡ã€å®Œæ•´é¡¹ç›®ä»£ç </li><li>åŸºäºPython 3.6ã€Django 3.0.8 Bootstrap 4</li><li>æ¼‚äº®çš„å‰ç«¯ç•Œé¢</li></ul><h2 id="é€‚åˆäººç¾¤"><a href="#é€‚åˆäººç¾¤" class="headerlink" title="é€‚åˆäººç¾¤"></a>é€‚åˆäººç¾¤</h2><ul><li>æ‹¥æœ‰ä¸€å°èƒ½å¼€æœºçš„ç”µè„‘</li><li>æœ‰ä¸€ç‚¹åŸºç¡€çš„ python ç¼–ç¨‹çŸ¥è¯†</li><li>æ¯å¤©èƒ½æŠ½å‡ºä¸€ä¸ªå°æ—¶å­¦ä¹ </li></ul><p>ä¸è¦çŠ¹è±«è¯´çš„å°±æ˜¯ä½ ï¼Œç°åœ¨ç«‹åˆ»å¼€å§‹ Django çš„å­¦ä¹ å§ï¼</p><h2 id="èµ„æºåˆ—è¡¨"><a href="#èµ„æºåˆ—è¡¨" class="headerlink" title="èµ„æºåˆ—è¡¨"></a>èµ„æºåˆ—è¡¨</h2><p>Django çš„å®˜æ–¹ç½‘ç«™ï¼š<a href="https://www.djangoproject.com/">Django</a></p><p>æ’°å†™æœ¬æ–‡å‚è€ƒäº†ä»¥ä¸‹èµ„æ–™ï¼Œå—ç›ŠåŒªæµ…ï¼Œå¹¶å‘è¯»è€…å¼ºçƒˆæ¨èï¼š</p><ul><li><a href="https://www.itdiffer.com/">è·Ÿè€é½å­¦Pythonï¼šDjangoå®æˆ˜</a> ä¹¦ç±</li><li><a href="https://www.zmrenwu.com/">è¿½æ¢¦äººç‰©çš„åšå®¢</a> ç½‘ç«™</li><li><a href="https://www.liaoxuefeng.com/">å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™</a> ç½‘ç«™</li><li><a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul><p>é¡¹ç›®å¼€å‘å®Œæ¯•åä½¿ç”¨ Git/GitHub åˆ†å¸ƒå¼ç®¡ç†ï¼š<a href="http://www.dusaiphoto.com/article/article-detail/13/">Windowsç¯å¢ƒä¸‹ä½¿ç”¨Gitå’ŒGitHub</a></p><h2 id="é‡åˆ°å›°éš¾æ—¶æ€ä¹ˆåŠ"><a href="#é‡åˆ°å›°éš¾æ—¶æ€ä¹ˆåŠ" class="headerlink" title="é‡åˆ°å›°éš¾æ—¶æ€ä¹ˆåŠ"></a>é‡åˆ°å›°éš¾æ—¶æ€ä¹ˆåŠ</h2><ul><li><p>è®¤çœŸæ£€æŸ¥ä»£ç æ‹¼å†™ã€ç¼©è¿›æ˜¯å¦æ­£ç¡®ã€‚ä¸€ä¸ªæ ‡ç‚¹ç¬¦å·çš„é”™è¯¯å¯èƒ½ä¼šå¯¼è‡´éš¾ä»¥å‘ç°çš„é—®é¢˜</p></li><li><p>è¾ƒç®€å•çš„é—®é¢˜ç›´æ¥è¯¢é—®ç™¾åº¦ï¼›è‹¥æ— æ³•å¾—åˆ°æ»¡æ„çš„ç­”æ¡ˆè¯·å°è¯• Google ä»¥è‹±æ–‡å…³é”®å­—æœç´¢ã€‚<br>è¦åšä¿¡å…¨ä¸–ç•Œè¿™ä¹ˆå¤šå­¦ä¹  Django çš„äººï¼Œä½ é‡åˆ°çš„é—®é¢˜åˆ«äººæ—©å°±é‡åˆ°è¿‡äº†</p></li><li><p><a href="https://www.djangoproject.com/">Djangoå®˜æ–¹ç½‘ç«™</a> æ˜¯æœ€æƒå¨çš„å­¦ä¹ æ–‡æ¡£ï¼Œè‹±è¯­ä¸ä½³çš„åŒå­¦ï¼Œè¦æœ‰è€å¿ƒä»”ç»†é˜…è¯»</p></li><li><p>å®åœ¨æ— æ³•å¤„ç†çš„é—®é¢˜ï¼Œå¯ä»¥æš‚æ—¶è·³è¿‡ã€‚å¾…åˆ°æŠ€æœ¯æ°´å¹³ä¸Šå‡å°é˜¶ï¼Œå†å›å¤´æ¥è§£å†³é—®é¢˜</p></li><li><p>è‹¥ä»¥ä¸ŠåŠæ³•å‡ä¸èƒ½è§£å†³ä½ çš„é—®é¢˜ï¼Œè¯·åœ¨<a href="https://stackoverflow.com/">StackOverflow</a>ç­‰æŠ€æœ¯ç½‘ç«™ä¸Šæ±‚åŠ©ï¼Œé‚£é‡Œæœ‰æµ·é‡çš„çƒ­å¿ƒç¨‹åºå‘˜åœ¨ç­‰ç€ä½ çš„é—®é¢˜</p></li></ul><h2 id="å…³äºDjangoç‰ˆæœ¬"><a href="#å…³äºDjangoç‰ˆæœ¬" class="headerlink" title="å…³äºDjangoç‰ˆæœ¬"></a>å…³äºDjangoç‰ˆæœ¬</h2><p>Django 2 å’Œ Django 3 åœ¨æŸäº›é…ç½®ä¸Šåˆæœ‰ç»†å¾®çš„å·®åˆ«.</p><p>ä½†æ˜¯ç›®å‰Django 3 åŸºæœ¬å·²ç»ç¨³å®šäº†ï¼Œ æ‰€ä»¥å½±å“åŸºæœ¬æœ‰é™ã€‚</p><p>æ”¾å¿ƒå¤§èƒ†çš„å­¦ Django 3 å§ï¼Œç»å¤§éƒ¨åˆ†çŸ¥è¯†éƒ½æ˜¯ç›¸åŒçš„ã€‚</p><h2 id="æ˜¯æ—¶å€™å±•ç°çœŸæ­£çš„æŠ€æœ¯äº†"><a href="#æ˜¯æ—¶å€™å±•ç°çœŸæ­£çš„æŠ€æœ¯äº†" class="headerlink" title="æ˜¯æ—¶å€™å±•ç°çœŸæ­£çš„æŠ€æœ¯äº†"></a>æ˜¯æ—¶å€™å±•ç°çœŸæ­£çš„æŠ€æœ¯äº†</h2><p>è¯´äº†è¿™ä¹ˆå¤šï¼Œç›¸ä¿¡ä½ å·²ç»è¿«ä¸åŠå¾…äº†ã€‚è®©æˆ‘ä»¬èµ¶ç´§å¼€å§‹æ—…ç¨‹å§ï¼</p>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoè§†é¢‘ç½‘ç«™æ­å»º--step1åˆ›å»ºå·¥ç¨‹</title>
      <link href="/post/django-shi-pin-wang-zhan-da-jian/step1-chuang-jian-gong-cheng/"/>
      <url>/post/django-shi-pin-wang-zhan-da-jian/step1-chuang-jian-gong-cheng/</url>
      
        <content type="html"><![CDATA[<p>#åŸºäºdjangoçš„è§†é¢‘ç‚¹æ’­ç½‘ç«™å¼€å‘<br>##é¡¹ç›®ä»‹ç»<br>æœ¬æ–‡å°†ä¼šå¯¹è¯¥é¡¹ç›®è¿›è¡Œä¸€ä¸ªç®€å•çš„ä»‹ç»ï¼ŒåŒ…æ‹¬é¡¹ç›®åç§°ã€é¡¹ç›®èƒŒæ™¯ã€é¡¹ç›®åŠŸèƒ½ã€æŠ€æœ¯æ ˆç­‰ç­‰ã€‚</p><p>é¡¹ç›®åç§°: <strong>åŸºäºdjangoçš„è§†é¢‘ç‚¹æ’­ç½‘ç«™å¼€å‘</strong></p><p>###é¡¹ç›®èƒŒæ™¯</p><p>è§†é¢‘ç‚¹æ’­ç½‘ç«™ï¼Œæ­å»ºä¸€ä¸ªè§†é¢‘ç‚¹æ’­ç½‘ç«™ï¼Œç»ƒä¹ å­¦ä¹ ä¸€ä¸‹djangoæŠ€æœ¯ï¼Œå­¦ä»¥è‡´ç”¨ã€‚<br>é¡¹ç›®åŠŸèƒ½</p><p>###é¡¹ç›®åŠŸèƒ½<br>æœ¬é¡¹ç›®åˆ†ä¸ºå‰å°å’Œåå°</p><p>å‰å°åŠŸèƒ½</p><pre><code>è§†é¢‘åˆ—è¡¨å±•ç¤ºè§†é¢‘æ’­æ”¾è¯¦æƒ…è¯¦æƒ…è¯„è®ºä¸ªäººä¸­å¿ƒ</code></pre><p>åå°åŠŸèƒ½</p><pre><code>è§†é¢‘ç®¡ç†è¯„è®ºç®¡ç†ç”¨æˆ·ç®¡ç†åé¦ˆç®¡ç†</code></pre><p>æœ¬è®²ä¸­ï¼Œä¸»è¦æ­å»ºå¼€å‘ç¯å¢ƒã€‚æˆ‘ä»¬ä¼šä¾æ¬¡å®‰è£…pythonã€pipã€djangoã€mysqlå’Œå…¶ä»–çš„ä¸€äº›å¿…è¦ç±»åº“ã€‚<br>##å®‰è£…python</p><p>å®‰è£… Python éå¸¸ç®€å•ï¼Œå» Python å®˜æ–¹ç½‘ç«™ æ‰¾åˆ° Python3 çš„ä¸‹è½½åœ°å€ï¼Œæ ¹æ®ä½ çš„ç³»ç»Ÿé€‰æ‹©32ä½æˆ–è€…64ä½çš„å®‰è£…åŒ…ï¼Œä¸‹è½½å¥½ååŒå‡»å®‰è£…å³å¯ã€‚</p><p>å®‰è£…å®Œæ¯•åï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥ python -v ï¼Œå¦‚æœè¾“å‡ºäº† Python çš„ç‰ˆæœ¬å·ï¼Œè¯´æ˜ Python å·²å®‰è£…æˆåŠŸã€‚</p><pre><code>$ python3 -VPython 3.8.0</code></pre><p>å®‰è£…pip</p><p>å¦‚æœå·²ç»å®‰è£…äº†python3ï¼Œ é‚£ä¹ˆpip3ä¸€èˆ¬ä¼šè‡ªåŠ¨çš„è¢«å®‰è£…ã€‚<br>##å®‰è£…django<br>å®‰è£…djangoéå¸¸ç®€å•ï¼Œä¸€æ¡å‘½ä»¤æå®šã€‚</p><pre><code>pip3 install django</code></pre><p>##å®‰è£…mysql<br>ç”±äºè¯¥é¡¹ç›®ä½¿ç”¨çš„æ˜¯mysqlæ•°æ®åº“ï¼Œæ‰€ä»¥éœ€è¦å®‰è£…mysqlã€‚</p><p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯Windowsæˆ–macOSç³»ç»Ÿï¼Œé‚£ä¹ˆå¯ä»¥å» MySQLå®˜ç½‘ ç›´æ¥ä¸‹è½½å®‰è£…åŒ…ï¼Œä¸€æ­¥æ­¥å®‰è£…å³å¯ã€‚<br>å®‰è£…è¿‡ç¨‹ä¸­ä¼šæç¤ºåˆ›å»ºè¾“è´¦å·å’Œå¯†ç ï¼Œä¸€å®šè¦è®°å¾—åˆ›å»ºå“¦ï½ã€‚</p><p>ubuntuä¸‹ä½¿ç”¨å‘½ä»¤apt-get install mysql-serverå®‰è£…mysql</p><pre><code>sudo apt-get install mysql-server</code></pre><p>Mysql5.7è¿™ä¸ªç‰ˆæœ¬ï¼Œå®‰è£…è¿‡ç¨‹ä¸­ä¸ä¼šæç¤ºè¾“å…¥å¯†ç çš„ï¼Œå®ƒçš„çš„rootå¯†ç åœ¨/etc/mysql/debian.cnfè¿™ä¸ªæ–‡ä»¶é‡Œé¢<br>ä½¿ç”¨sudo cat /etc/mysql/debian.cnfå‘½ä»¤æ‰“å¼€ï¼Œä½ å¤§æ¦‚ä¼šçœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼Œå…¶ä¸­å°±åŒ…æ‹¬Mysqlçš„é»˜è®¤ç™»é™†åä¸å¯†ç </p><pre><code>[client]host     = localhostuser     = debian-sys-maintpassword = Ah5gE7mWH1OxO9Gwsocket   = /var/run/mysqld/mysqld.sock[mysql_upgrade]host     = localhostuser     = debian-sys-maintpassword = Ah5gE7mWH1OxO9Gwsocket   = /var/run/mysqld/mysqld.sock</code></pre><p>1.ä½¿ç”¨ mysql -uç”¨æˆ·å -på¯†ç è¿›è¡Œç™»é™†ï¼Œ</p><pre><code>mysql -udebian-sys-maint -p</code></pre><p>2ã€ä¿®æ”¹rootç”¨æˆ·å¯†ç </p><pre><code>show databasesï¼›use mysql;update user set authentication_string=PASSWORD(&quot;å¯†ç &quot;) where user=&#39;root&#39;;update user set plugin=&quot;mysql_native_password&quot;;flush privileges;quit;</code></pre><p>æ³¨:ç”±äºmysql5.7æ²¡æœ‰passwordå­—æ®µï¼Œå¯†ç å­˜å‚¨åœ¨authentication_stringå­—æ®µä¸­</p><p>3ã€é‡æ–°å¯åŠ¨Mysql</p><pre><code>/etc/init.d/mysql restart</code></pre><p>4ã€å†æ¬¡ä½¿ç”¨rootç”¨æˆ·ç™»é™†<br>å®‰è£…å®Œæ¯•åï¼Œå¯ä½¿ç”¨mysql -VæŸ¥çœ‹mysqlç‰ˆæœ¬å·ã€‚</p><pre><code>mysql -Vmysql  Ver 14.14 Distrib 5.7.31, for Linux (x86_64) using  EditLine wrapper</code></pre><p>ç„¶ç™»å½•åˆ›å»ºæ–°çš„æ•°æ®åº“ï¼Œå‘½åä¸ºvideo</p><pre><code>root -u root -pCREATE DATABASE video CHARACTER SET utf8;</code></pre><p>##å®‰è£…PyCharm</p><p>PyCharm æ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„ Python ç¼–è¾‘å™¨ï¼Œå…·æœ‰è·¨å¹³å°æ€§ã€‚ æˆ‘ä»¬é¡¹ç›®æ‰€æœ‰åŠŸèƒ½çš„å¼€å‘éƒ½æ˜¯åœ¨pycharmä¸Šé¢å®Œæˆçš„ã€‚</p><p>åˆ°PyCharmå®˜ç½‘ä¸‹è½½PyCharmå®‰è£…åŒ…ã€‚<br>é€‰æ‹©å¯¹åº”ç³»ç»Ÿï¼ˆWindows/Macï¼‰çš„ç‰ˆæœ¬ä¸‹è½½ã€‚ä¸€èˆ¬å­¦ä¹ ç”¨ç›´æ¥å®‰è£…ç¤¾åŒºç‰ˆæœ¬å³å¯è¶³å¤Ÿç”¨ã€‚</p><p>ä¸‹è½½ä¹‹åï¼ŒåŒå‡»ç‚¹ä¸‹ä¸€æ­¥å®‰è£…å³å¯ã€‚<br>##å…¶ä»–å®‰è£…</p><p>å¦å¤–ï¼Œä¸‹é¢è¿™äº›æ˜¯é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ä¼šç”¨åˆ°çš„ç±»åº“ï¼Œæ”¾åˆ°äº†requirements.txté‡Œé¢</p><pre><code>django==3.0.8pillow==5.3.0 ï¼ˆå›¾ç‰‡æ˜¾ç¤ºï¼‰</code></pre><p>å¯ä»¥ä½¿ç”¨pip3ç›´æ¥å®‰è£…</p><pre><code>pip3 install -r requiredments.txt</code></pre><p>##åˆ›å»ºDjangoå·¥ç¨‹</p><p>ä¸€åˆ‡å°±ç»ªï¼Œæˆ‘ä»¬åˆ›å»ºdjangoå·¥ç¨‹ï¼Œä»…éœ€è¦ä¸€è¡Œå‘½ä»¤</p><pre><code>django-admin startproject videoproject</code></pre><p>åˆ›å»ºä¹‹åï¼Œå¯ä½¿ç”¨pycharmæ‰“å¼€videoprojectæ–‡ä»¶å¤¹ï¼ŒæŸ¥çœ‹æ–‡ä»¶ç»“æ„</p><p>pycharmæ˜¯å¾ˆå¼ºå¤§çš„ï¼Œæœ‰è‡ªå¸¦çš„å‘½ä»¤è¡Œå·¥å…·ï¼ˆTerminalï¼‰ï¼Œç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼ˆVersion Controlï¼‰ã€‚</p><p>###å¯åŠ¨é¡¹ç›®<br>æ‰“å¼€Terminalï¼Œè¾“å…¥</p><pre><code>python3 manage.py runserver</code></pre><p>åœ¨ä¹‹åçš„å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šç»å¸¸ç”¨åˆ°è¯¥å‘½ä»¤è¡Œæ¥è°ƒè¯•ç¨‹åºã€‚</p><p>å‘½ä»¤è¡Œè¾“å‡º</p><pre><code>Starting development server at http://127.0.0.1:8000/Quit the server with CONTROL-C.</code></pre><p>ç„¶ååœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥<a href="http://127.0.0.1:8000/">http://127.0.0.1:8000/</a> å³å¯çœ‹åˆ°djangoé»˜è®¤é¦–é¡µäº†ã€‚</p><p>###é¡¹ç›®é…ç½®</p><p>é¡¹ç›®çš„é…ç½®æ–‡ä»¶ä½äºvideoproject/videoproject/settings.py<br>é…ç½®ç¼–ç </p><p>é¦–å…ˆéœ€è¦é…ç½®çš„æ˜¯æ–‡å­—ç¼–ç æ ¼å¼ï¼Œdjangoé»˜è®¤çš„ç¼–ç æ˜¯è‹±è¯­æ ¼å¼ï¼Œæˆ‘ä»¬æŠŠå®ƒæ”¹æˆä¸­æ–‡æ ¼å¼ï¼Œéœ€è¦ä¿®æ”¹ä¸‹é¢å‡ ä¸ªå˜é‡çš„å€¼ã€‚</p><pre><code>LANGUAGE_CODE = &#39;zh-hans&#39;  # ä¸­æ–‡ç¼–ç TIME_ZONE = &#39;Asia/Shanghai&#39;  # å›½é™…æ—¶åŒºæ”¹ä¸ºä¸­å›½æ—¶åŒºUSE_I18N = True  # æŒ‡å®šDjangoçš„ç¿»è¯‘ç³»ç»Ÿæ˜¯å¦å¼€å¯ã€‚å¦‚æœè®¾ç½®ä¸ºFalseï¼ŒDjangoä¼šåšä¸€äº›ä¼˜åŒ–ï¼Œä¸å»åŠ è½½ç¿»è¯‘æœºåˆ¶USE_L10N = True  # ç”¨äºå†³å®šæ˜¯å¦å¼€å¯æ•°æ®æœ¬åœ°åŒ–ã€‚å¦‚æœæ­¤è®¾ç½®ä¸ºTrueï¼Œä¾‹å¦‚Djangoå°†ä½¿ç”¨å½“å‰è¯­è¨€ç¯å¢ƒçš„æ ¼å¼æ˜¾ç¤ºæ•°å­—å’Œæ—¥æœŸã€‚USE_TZ = True    # ç”¨æ¥æŒ‡å®šæ˜¯å¦ä½¿ç”¨æŒ‡å®šçš„æ—¶åŒº(TIME_ZONE)çš„æ—¶é—´ã€‚è‹¥ä¸ºTrue, åˆ™Djangoä¼šä½¿ç”¨å†…å»ºçš„æ—¶åŒºçš„æ—¶é—´ï¼›å¦åˆ™, Djangoå°†ä¼šä½¿ç”¨æœ¬åœ°çš„æ—¶é—´</code></pre><p>é…ç½®static</p><p>ç„¶åè¿˜éœ€è¦é…ç½®èµ„æºæ–‡ä»¶ç›®å½•ï¼Œç”¨äºå­˜å‚¨CSSã€Javascriptã€Imagesç­‰æ–‡ä»¶ã€‚è¿™é‡Œæˆ‘ä»¬è®¾ç½®ç›®å½•ä¸º/static/</p><pre><code>STATIC_URL = &#39;/static/&#39;STATICFILES_DIRS = (os.path.join(BASE_DIR, &quot;static&quot;),)</code></pre><p>é…ç½®æ•°æ®åº“</p><p>ç„¶åè¿˜éœ€è¦é…ç½®æ•°æ®åº“ä¿¡æ¯ï¼Œdjangoé»˜è®¤ä½¿ç”¨çš„æ˜¯sqliteæ•°æ®åº“ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸ºmysqlæ•°æ®åº“ã€‚æ‰¾åˆ°DATABASESèŠ‚ç‚¹ï¼Œä¿®æ”¹ä¸ºå¦‚ä¸‹ä»£ç ã€‚å…¶ä¸­ï¼ŒNAMEä¸ºæ•°æ®åº“åï¼ŒUSERä¸ºmysqlçš„ç”¨æˆ·åï¼ŒPASSWORDä¸ºå¯†ç ï¼ŒHOSYä¸º127.0.0.1ï¼ŒPORTä¸º3306</p><pre><code>DATABASES = &#123;    &#39;default&#39;: &#123;        &#39;ENGINE&#39;: &#39;django.db.backends.mysql&#39;,        &#39;NAME&#39;: &#39;video&#39;,        &#39;USER&#39;: &#39;root&#39;,        &#39;PASSWORD&#39;: &#39;123456&#39;,        &#39;HOST&#39;:&#39;127.0.0.1&#39;,        &#39;PORT&#39;:&#39;3306&#39;,    &#125;&#125;</code></pre><p>é…ç½®å¥½æ•°æ®åº“ä¹‹åï¼Œè¿˜éœ€è¦åœ¨videoproject/videoproject/<strong>init</strong>.pyå®‰è£…mysqlé©±åŠ¨ï¼Œåªéœ€è¦å†™å…¥ä»£ç ï¼š</p><pre><code>import pymysqlpymysql.install_as_MySQLdb()</code></pre><p>ä¸Šé¢ä»£ç è¿è¡Œçš„å‰ææ˜¯ä½ ç”µè„‘ä¸Šå·²ç»å®‰è£…äº†PyMySQLç±»åº“ã€‚</p><p>æœ€åå¯å†æ¬¡è¿è¡Œå·¥ç¨‹ï¼Œæ£€æŸ¥é…ç½®æ˜¯å¦æ­£ç¡®ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Djangoè§†é¢‘ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--03.åˆ›å»ºapp</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/03.chuang-jian-app/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/03.chuang-jian-app/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ›å»ºAPP"><a href="#åˆ›å»ºAPP" class="headerlink" title="åˆ›å»ºAPP"></a>åˆ›å»ºAPP</h2><p><strong>åœ¨Djangoä¸­çš„ä¸€ä¸ªappä»£è¡¨ä¸€ä¸ªåŠŸèƒ½æ¨¡å—ã€‚</strong>å¼€å‘è€…å¯ä»¥å°†ä¸åŒåŠŸèƒ½çš„æ¨¡å—æ”¾åœ¨ä¸åŒçš„appä¸­, æ–¹ä¾¿ä»£ç çš„å¤ç”¨ã€‚appå°±æ˜¯é¡¹ç›®çš„åŸºçŸ³ï¼Œå› æ­¤å¼€å‘åšå®¢çš„ç¬¬ä¸€æ­¥å°±æ˜¯åˆ›å»ºæ–°çš„appï¼Œç”¨æ¥å®ç°è·Ÿæ–‡ç« ç›¸å…³çš„åŠŸèƒ½æ¨¡å—ã€‚</p><p>æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¿›å…¥é¡¹ç›®æ‰€åœ¨çš„ç›®å½•ï¼š<strong>ï¼ˆæ³¨æ„Djangoçš„æ“ä½œå¿…é¡»åœ¨è™šæ‹Ÿç¯å¢ƒä¸‹è¿›è¡Œï¼‰</strong></p><pre class="line-numbers language-none"><code class="language-none">E:\&gt;cd django_projectE:\django_project&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿›å…¥è™šæ‹Ÿç¯å¢ƒï¼ˆå¿˜è®°è¿›å…¥venvæ–¹æ³•çš„çœ‹è¿™é‡Œï¼š <a href="http://www.dusaiphoto.com/article/article-detail/4/">åœ¨Windowsä¸­æ­å»ºDjangoçš„å¼€å‘ç¯å¢ƒ</a>ï¼‰ï¼š</p><pre class="line-numbers language-none"><code class="language-none"> E:\django_project&gt; env\Scripts\activate.bat(env) E:\&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>çœ‹åˆ°ç›˜ç¬¦å‰æœ‰<code>(env)</code>æ ‡è¯†åˆ™è¡¨ç¤ºè¿›å…¥è™šæ‹Ÿç¯å¢ƒæˆåŠŸã€‚</p><p>è¾“å…¥<code>python manage.py startapp article</code>æŒ‡ä»¤ï¼Œåˆ›å»ºåä¸º<code>article</code>çš„appï¼š</p><pre class="line-numbers language-none"><code class="language-none">(env) E:\django_project\my_blog&gt;python manage.py startapp article<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æŸ¥çœ‹ä¸€ä¸‹<code>my_blog</code>æ–‡ä»¶å¤¹ï¼Œåº”è¯¥çœ‹åˆ°è¿™æ ·çš„ç»“æ„ï¼š</p><pre class="line-numbers language-none"><code class="language-none">my_blogâ”‚  db.sqlite3â”‚  manage.pyâ”‚â”œâ”€articleâ”‚  â”‚  admin.pyâ”‚  â”‚  apps.pyâ”‚  â”‚  models.pyâ”‚  â”‚  tests.pyâ”‚  â”‚  views.pyâ”‚  â”‚  __init__.pyâ”‚  â”‚â”‚  â””â”€migrationsâ”‚        â””â”€ __init__.pyâ”‚â””â”€my_blog    â”‚  settings.py    â”‚  urls.py    â”‚  wsgi.py    â””â”€ __init__.py<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>é¡¹ç›®ç»“æ„</strong>åˆ†è§£å¦‚ä¸‹ï¼š</p><ul><li><p>æ ¹ç›®å½•<code>my_blog</code>ä¸‹æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼šdb.sqlite3æ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ•°æ®åº“æ–‡ä»¶ï¼Œç”¨æ¥å­˜å‚¨é¡¹ç›®äº§ç”Ÿçš„æ•°æ®ï¼Œæ¯”å¦‚åšå®¢æ–‡ç« ï¼›manage.pyæ˜¯é¡¹ç›®æ‰§è¡Œå‘½ä»¤çš„å…¥å£ï¼Œæ¯”å¦‚runserverã€‚</p></li><li><p>ç›®å½•<code>article</code>æ˜¯åˆšåˆ›å»ºå‡ºæ¥çš„appï¼Œç”¨æ¥æ”¾ç½®åšå®¢æ–‡ç« ç›¸å…³çš„ä»£ç ï¼šåå°ç®¡ç†æ–‡ä»¶<code>admin.py</code>ï¼Œæ•°æ®æ¨¡å‹æ–‡ä»¶<code>models.py</code>ï¼Œè§†å›¾æ–‡ä»¶<code>views.py</code>ï¼Œå­˜æ”¾æ•°æ®è¿ç§»æ–‡ä»¶çš„ç›®å½•<code>migrations</code>ã€‚</p></li><li><p>æ ¹ç›®å½•ä¸‹è¿˜æœ‰ä¸€ä¸ª<code>my_blog</code>ç›®å½•ï¼Œå…¶ä¸­çš„settings.pyåŒ…å«é¡¹ç›®çš„é…ç½®å‚æ•°ï¼Œurls.pyåˆ™æ˜¯é¡¹ç›®çš„æ ¹è·¯ç”±æ–‡ä»¶ã€‚</p></li></ul><p>ç›®å‰ä½ éœ€è¦äº†è§£çš„å°±è¿™ä¹ˆå¤šï¼Œåé¢çš„ç« èŠ‚éƒ½ä¼šç”¨åˆ°ã€‚å‰©ä¸‹è¿˜æœ‰ä¸€äº›æ²¡è®²åˆ°çš„æ–‡ä»¶å¯ä»¥æš‚æ—¶ä¸ç®¡å®ƒï¼Œç¢°åˆ°æ—¶å†æŸ¥èµ„æ–™ã€‚</p><h2 id="æ³¨å†ŒAPPï¼ˆsettingsï¼‰"><a href="#æ³¨å†ŒAPPï¼ˆsettingsï¼‰" class="headerlink" title="æ³¨å†ŒAPPï¼ˆsettingsï¼‰"></a>æ³¨å†ŒAPPï¼ˆsettingsï¼‰</h2><p><strong>æ¥ç€æˆ‘ä»¬éœ€è¦ä¿®æ”¹é¡¹ç›®é…ç½®æ–‡ä»¶ï¼Œâ€œå‘Šè¯‰â€Djangoç°åœ¨æœ‰articleè¿™ä¹ˆä¸€ä¸ªappäº†ã€‚</strong></p><p>æ‰“å¼€<code>my_blog</code>ç›®å½•çš„<code>settings.py</code>ï¼Œæ‰¾åˆ°<code>INSTALLED_APPS</code>å†™å…¥å¦‚ä¸‹ä»£ç ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_blog<span class="token operator">/</span>settings<span class="token punctuation">.</span>pyINSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token comment"># å…¶ä»–ä»£ç </span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># æ–°å¢'article'ä»£ç ï¼Œæ¿€æ´»app</span>    <span class="token string">'article'</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é…ç½®è®¿é—®è·¯å¾„ï¼ˆurlsï¼‰"><a href="#é…ç½®è®¿é—®è·¯å¾„ï¼ˆurlsï¼‰" class="headerlink" title="é…ç½®è®¿é—®è·¯å¾„ï¼ˆurlsï¼‰"></a>é…ç½®è®¿é—®è·¯å¾„ï¼ˆurlsï¼‰</h2><p><strong>ç„¶åå†ç»™appé…ç½®è®¿é—®è·¯å¾„urlã€‚</strong></p><p>urlå¯ä»¥ç†è§£ä¸ºè®¿é—®ç½‘ç«™æ—¶è¾“å…¥çš„ç½‘å€é“¾æ¥ï¼Œé…ç½®å¥½urlåDjangoæ‰çŸ¥é“æ€æ ·å®šä½appã€‚</p><p>æ‰“å¼€<code>my_blog</code>ç›®å½•ä¸‹çš„<code>urls.py</code>ï¼Œå¢åŠ ä»¥ä¸‹ä»£ç ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_blog<span class="token operator">/</span>urls<span class="token punctuation">.</span>py<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> admin<span class="token comment"># è®°å¾—å¼•å…¥include</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token punctuation">,</span> include<span class="token comment"># å­˜æ”¾æ˜ å°„å…³ç³»çš„åˆ—è¡¨</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    path<span class="token punctuation">(</span><span class="token string">'admin/'</span><span class="token punctuation">,</span> admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>urls<span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token comment"># æ–°å¢ä»£ç ï¼Œé…ç½®appçš„url</span>    path<span class="token punctuation">(</span><span class="token string">'article/'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">'article.urls'</span><span class="token punctuation">,</span> namespace<span class="token operator">=</span><span class="token string">'article'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>pathä¸ºDjangoçš„è·¯ç”±è¯­æ³•ï¼š</p><ul><li>å‚æ•°<code>article/</code>åˆ†é…äº†appçš„è®¿é—®è·¯å¾„ï¼›</li><li><code>include</code>å°†è·¯å¾„åˆ†å‘ç»™ä¸‹ä¸€æ­¥å¤„ç†ï¼›</li><li><code>namespace</code>å¯ä»¥ä¿è¯åæŸ¥åˆ°å”¯ä¸€çš„urlï¼Œå³ä½¿ä¸åŒçš„appä½¿ç”¨äº†ç›¸åŒçš„urlï¼ˆåé¢ä¼šç”¨åˆ°ï¼‰ã€‚</li></ul><p>è®°å¾—åœ¨é¡¶éƒ¨å¼•å…¥<code>include</code>ã€‚</p><blockquote><p>åœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼Œarticleçš„urlä¸ºï¼š<a href="http://127.0.0.1:8000/article/">http://127.0.0.1:8000/article/</a></p></blockquote><p><strong>è¿˜æ²¡ç»“æŸ</strong>ã€‚ç°åœ¨æˆ‘ä»¬å·²ç»é€šè¿‡<code>path</code>å°†æ ¹è·¯å¾„ä¸º<code>article</code>çš„è®¿é—®éƒ½åˆ†å‘ç»™articleè¿™ä¸ªappå»å¤„ç†ã€‚ä½†æ˜¯appé€šå¸¸æœ‰å¤šä¸ªé¡µé¢åœ°å€ï¼Œå› æ­¤è¿˜éœ€è¦appè‡ªå·±ä¹Ÿæœ‰ä¸€ä¸ªè·¯ç”±åˆ†å‘ï¼Œä¹Ÿå°±æ˜¯<code>article.urls</code>äº†ã€‚</p><blockquote><p>articleå¯ä»¥æœ‰å¤šä¸ªé¡µé¢ï¼Œå¦‚åˆ—è¡¨é¡µé¢ã€è¯¦æƒ…é¡µé¢ç­‰ï¼Œé‚£ä¹ˆå°±éœ€è¦å¦‚ä¸‹ä¸¤ä¸ªurlï¼š</p><p><a href="http://127.0.0.1:8000/article/list/">http://127.0.0.1:8000/article/list/</a></p><p><a href="http://127.0.0.1:8000/article/detail/">http://127.0.0.1:8000/article/detail/</a></p><p>appä¸­çš„url.pyå°±æ˜¯ç”¨æ¥åŒºåˆ†å®ƒä»¬çš„ã€‚</p></blockquote><p>åœ¨appç”Ÿæˆæ—¶å¹¶æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œå› æ­¤éœ€è¦è‡ªå·±åœ¨<code>article</code>æ–‡ä»¶å¤¹ä¸­åˆ›å»º<code>urls.py</code>ï¼Œåœ¨é‡Œé¢è¾“å…¥ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>urls<span class="token punctuation">.</span>py<span class="token comment"># å¼•å…¥path</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token comment"># æ­£åœ¨éƒ¨ç½²çš„åº”ç”¨çš„åç§°</span>app_name <span class="token operator">=</span> <span class="token string">'article'</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token comment"># ç›®å‰è¿˜æ²¡æœ‰urls</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>urlpatterns</code>ä¸­æš‚æ—¶æ˜¯ç©ºçš„ï¼Œæ²¡å†™å…¥ä»»ä½•è·¯å¾„çš„æ˜ å°„ï¼Œä¸ç€æ€¥ä»¥åä¼šå†™ã€‚</p><p>æ­¤æ—¶æˆ‘ä»¬çš„appå°±é…ç½®å®Œæˆäº†ã€‚</p><blockquote><p>æ³¨æ„æ­¤æ—¶appè¿˜æ²¡æœ‰å†™å¥½ï¼Œå› æ­¤å¯åŠ¨æœåŠ¡å™¨å¯èƒ½ä¼šæŠ¥é”™ï¼Œæ˜¯æ­£å¸¸çš„ã€‚</p><p>Django2.0ä¹‹åï¼Œappçš„<code>urls.py</code>å¿…é¡»é…ç½®<code>app_name</code>ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« åˆ›å»ºäº†åšå®¢æ–‡ç« åŠŸèƒ½çš„appï¼Œå­¦ä¹ äº†æ³¨å†Œappå¹¶é…ç½®urlã€‚</p><p>ä¸‹ä¸€ç« å¼€å§‹ç¼–å†™æ¨¡å‹Modelï¼Œç†è§£Djangoçš„æ•°æ®åº“å¤„ç†ã€‚</p><ul><li><p>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</p></li><li><p>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#100;&#117;&#115;&#97;&#105;&#112;&#104;&#x6f;&#x74;&#x6f;&#64;&#x66;&#111;&#x78;&#x6d;&#x61;&#105;&#x6c;&#46;&#x63;&#111;&#x6d;">&#100;&#117;&#115;&#97;&#105;&#112;&#104;&#x6f;&#x74;&#x6f;&#64;&#x66;&#111;&#x78;&#x6d;&#x61;&#105;&#x6c;&#46;&#x63;&#111;&#x6d;</a></p></li><li><p>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--04.ç¼–å†™Model</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/04.bian-xie-model/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/04.bian-xie-model/</url>
      
        <content type="html"><![CDATA[<p><strong>Django æ¡†æ¶ä¸»è¦å…³æ³¨çš„æ˜¯æ¨¡å‹ï¼ˆModelï¼‰ã€æ¨¡æ¿ï¼ˆTemplateï¼‰å’Œè§†å›¾ï¼ˆViewsï¼‰ï¼Œç§°ä¸ºMTVæ¨¡å¼ã€‚</strong></p><p>å®ƒä»¬å„è‡ªçš„èŒè´£å¦‚ä¸‹ï¼š</p><table><thead><tr><th>å±‚æ¬¡</th><th>èŒè´£</th></tr></thead><tbody><tr><td>æ¨¡å‹ï¼ˆModelï¼‰ï¼Œå³æ•°æ®å­˜å–å±‚</td><td>å¤„ç†ä¸æ•°æ®ç›¸å…³çš„æ‰€æœ‰äº‹åŠ¡ï¼š å¦‚ä½•å­˜å–ã€å¦‚ä½•éªŒè¯æœ‰æ•ˆæ€§ã€åŒ…å«å“ªäº›è¡Œä¸ºä»¥åŠæ•°æ®ä¹‹é—´çš„å…³ç³»ç­‰ã€‚</td></tr><tr><td>æ¨¡æ¿ï¼ˆTemplateï¼‰ï¼Œå³ä¸šåŠ¡é€»è¾‘å±‚</td><td>å¤„ç†ä¸è¡¨ç°ç›¸å…³çš„å†³å®šï¼š å¦‚ä½•åœ¨é¡µé¢æˆ–å…¶ä»–ç±»å‹æ–‡æ¡£ä¸­è¿›è¡Œæ˜¾ç¤ºã€‚</td></tr><tr><td>è§†å›¾ï¼ˆViewï¼‰ï¼Œå³è¡¨ç°å±‚</td><td>å­˜å–æ¨¡å‹åŠè°ƒå–æ°å½“æ¨¡æ¿çš„ç›¸å…³é€»è¾‘ã€‚æ¨¡å‹ä¸æ¨¡æ¿çš„æ¡¥æ¢ã€‚</td></tr></tbody></table><p><strong>ç®€å•æ¥è¯´å°±æ˜¯Modelå­˜å–æ•°æ®ï¼ŒViewå†³å®šéœ€è¦è°ƒå–å“ªäº›æ•°æ®ï¼Œè€ŒTemplateåˆ™è´Ÿè´£å°†è°ƒå–å‡ºçš„æ•°æ®ä»¥åˆç†çš„æ–¹å¼å±•ç°å‡ºæ¥ã€‚</strong></p><h2 id="æ•°æ®åº“ä¸æ¨¡å‹"><a href="#æ•°æ®åº“ä¸æ¨¡å‹" class="headerlink" title="æ•°æ®åº“ä¸æ¨¡å‹"></a>æ•°æ®åº“ä¸æ¨¡å‹</h2><p><strong>æ•°æ®åº“</strong>æ˜¯å­˜å‚¨ç”µå­æ–‡ä»¶çš„åœºæ‰€ï¼Œå‚¨å­˜ç‹¬ç«‹çš„æ•°æ®é›†åˆã€‚ä¸€ä¸ª<strong>æ•°æ®åº“</strong>ç”±å¤šä¸ª<strong>æ•°æ®è¡¨</strong>æ„æˆã€‚</p><p>å•¥æ„æ€ï¼Ÿä¸¾ä¸ªæ —å­ï¼Œä¸‰å¹´çº§äºŒç­ä¸­åŒå­¦ä»¬çš„èŠ±åå†Œå°±æ˜¯<strong>æ•°æ®è¡¨</strong>ã€‚æœ‰çš„èŠ±åå†Œè®°å½•æ¯ä½åŒå­¦çš„è€ƒè¯•æˆç»©ã€æœ‰çš„è®°å½•èº«é«˜ä½“é‡ã€è¿˜æœ‰çš„è®°å½•å…´è¶£çˆ±å¥½â€¦æ‰€æœ‰çš„è¿™äº›èŠ±åå†Œéƒ½æ”¾åœ¨è€å¸ˆçš„æŸœå­é‡Œï¼Œè¿™ä¸ªæŸœå­å°±æ˜¯<strong>â€œæ•°æ®åº“â€</strong>äº†ã€‚</p><blockquote><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ•°æ®åº“å°±æ˜¯db.sqlite3è¿™ä¸ªæ–‡ä»¶äº†ã€‚åœ¨ç½‘ç«™ä¸Šçº¿åä½ å¯èƒ½æƒ³æ¢åˆ«çš„æ•°æ®åº“ï¼Œä¸è¿‡ç›®å‰æˆ‘ä»¬è¿˜ä¸éœ€è¦è®¨è®ºè¿™ä¸ªå†…å®¹ã€‚</p></blockquote><p>æ“ä½œæ•°æ®åº“ä½¿ç”¨çš„æ˜¯å¤æ‚çš„SQLè¯­å¥ï¼Œå®ƒæ˜¯å®Œå…¨ä¸åŒäºPythonçš„å¦ä¸€ç§è¯­è¨€ï¼Œè¿™å¯¹æ–°æ‰‹æ¥è¯´æ— ç–‘æ˜¯å›°éš¾çš„ã€‚</p><p>å¹¸è¿çš„æ˜¯ï¼Œåœ¨ Django é‡Œå†™Webåº”ç”¨å¹¶ä¸éœ€è¦ä½ ç›´æ¥å»æ“ä½œæ•°æ®åº“ï¼Œè€Œæ˜¯å®šä¹‰å¥½<strong>æ¨¡å‹</strong>ï¼ˆç”¨Pythonè¯­æ³•å°±å¯ä»¥äº†ï¼ï¼‰ï¼Œ<strong>æ¨¡å‹</strong>ä¸­åŒ…å«äº†æ“ä½œæ•°æ®åº“æ‰€å¿…è¦çš„å‘½ä»¤ã€‚ä¹Ÿå°±æ˜¯è¯´ä½ åªéœ€è¦å®šä¹‰æ•°æ®æ¨¡å‹ï¼Œå…¶å®ƒçš„åº•å±‚ä»£ç éƒ½ä¸ç”¨å…³å¿ƒï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨ä»æ¨¡å‹ç”Ÿæˆã€‚</p><blockquote><p>å…¶å®å®ƒæœ‰ä¸“é—¨çš„æœ¯è¯­ï¼Œå«<strong>å¯¹è±¡å…³ç³»æ˜ å°„</strong>ï¼ˆ<strong>Object Relational Mapping</strong>ï¼Œç®€ç§°<strong>ORM</strong>ï¼‰ï¼Œç”¨äºå®ç°é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€é‡Œä¸åŒç±»å‹ç³»ç»Ÿçš„æ•°æ®ä¹‹é—´çš„è½¬æ¢ã€‚</p></blockquote><h2 id="ç¼–å†™Model-py"><a href="#ç¼–å†™Model-py" class="headerlink" title="ç¼–å†™Model.py"></a>ç¼–å†™Model.py</h2><p><strong>å¦‚å‰é¢æ‰€è®²ï¼ŒDjangoä¸­é€šè¿‡æ¨¡å‹ï¼ˆModelï¼‰æ˜ å°„åˆ°æ•°æ®åº“ï¼Œå¤„ç†ä¸æ•°æ®ç›¸å…³çš„äº‹åŠ¡ã€‚</strong></p><p>å¯¹åšå®¢ç½‘ç«™æ¥è¯´ï¼Œæœ€é‡è¦çš„æ•°æ®å°±æ˜¯æ–‡ç« ã€‚æ‰€ä»¥é¦–å…ˆæ¥å»ºç«‹ä¸€ä¸ªå­˜æ”¾æ–‡ç« çš„æ•°æ®æ¨¡å‹ã€‚</p><p>æ‰“å¼€<code>article/models.py</code>æ–‡ä»¶ï¼Œè¾“å…¥å¦‚ä¸‹ä»£ç ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>models<span class="token punctuation">.</span>py<span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models<span class="token comment"># å¯¼å…¥å†…å»ºçš„Useræ¨¡å‹ã€‚</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>models <span class="token keyword">import</span> User<span class="token comment"># timezone ç”¨äºå¤„ç†æ—¶é—´ç›¸å…³äº‹åŠ¡ã€‚</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>utils <span class="token keyword">import</span> timezone<span class="token comment"># åšå®¢æ–‡ç« æ•°æ®æ¨¡å‹</span><span class="token keyword">class</span> <span class="token class-name">ArticlePost</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># æ–‡ç« ä½œè€…ã€‚å‚æ•° on_delete ç”¨äºæŒ‡å®šæ•°æ®åˆ é™¤çš„æ–¹å¼</span>    author <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>User<span class="token punctuation">,</span> on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">)</span>    <span class="token comment"># æ–‡ç« æ ‡é¢˜ã€‚models.CharField ä¸ºå­—ç¬¦ä¸²å­—æ®µï¼Œç”¨äºä¿å­˜è¾ƒçŸ­çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚æ ‡é¢˜</span>    title <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>    <span class="token comment"># æ–‡ç« æ­£æ–‡ã€‚ä¿å­˜å¤§é‡æ–‡æœ¬ä½¿ç”¨ TextField</span>    body <span class="token operator">=</span> models<span class="token punctuation">.</span>TextField<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># æ–‡ç« åˆ›å»ºæ—¶é—´ã€‚å‚æ•° default=timezone.now æŒ‡å®šå…¶åœ¨åˆ›å»ºæ•°æ®æ—¶å°†é»˜è®¤å†™å…¥å½“å‰çš„æ—¶é—´</span>    created <span class="token operator">=</span> models<span class="token punctuation">.</span>DateTimeField<span class="token punctuation">(</span>default<span class="token operator">=</span>timezone<span class="token punctuation">.</span>now<span class="token punctuation">)</span>    <span class="token comment"># æ–‡ç« æ›´æ–°æ—¶é—´ã€‚å‚æ•° auto_now=True æŒ‡å®šæ¯æ¬¡æ•°æ®æ›´æ–°æ—¶è‡ªåŠ¨å†™å…¥å½“å‰æ—¶é—´</span>    updated <span class="token operator">=</span> models<span class="token punctuation">.</span>DateTimeField<span class="token punctuation">(</span>auto_now<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»£ç éå¸¸ç›´ç™½ã€‚</p><ul><li><p>æ¯ä¸ªæ¨¡å‹éƒ½è¢«è¡¨ç¤ºä¸º <code>django.db.models.Model</code> ç±»çš„å­ç±»ï¼Œä»å®ƒç»§æ‰¿äº†æ“ä½œæ•°æ®åº“éœ€è¦çš„æ‰€æœ‰æ–¹æ³•ã€‚</p></li><li><p>æ¯ä¸ªå­—æ®µéƒ½æ˜¯ <code>Field</code> ç±»çš„å®ä¾‹ ã€‚æ¯”å¦‚å­—ç¬¦å­—æ®µè¢«è¡¨ç¤ºä¸º <code>CharField</code> ï¼Œæ—¥æœŸæ—¶é—´å­—æ®µè¢«è¡¨ç¤ºä¸º <code>DateTimeField</code>ã€‚è¿™å°†å‘Šè¯‰Djangoè¦å¤„ç†çš„æ•°æ®ç±»å‹ã€‚</p></li><li><p>å®šä¹‰æŸäº› <code>Field</code> ç±»å®ä¾‹éœ€è¦å‚æ•°ã€‚ä¾‹å¦‚ <code>CharField</code> éœ€è¦ä¸€ä¸ª <code>max_length</code>å‚æ•°ã€‚è¿™ä¸ªå‚æ•°çš„ç”¨å¤„ä¸æ­¢äºç”¨æ¥å®šä¹‰æ•°æ®åº“ç»“æ„ï¼Œä¹Ÿç”¨äºéªŒè¯æ•°æ®ã€‚</p></li><li><p>ä½¿ç”¨ <code>ForeignKey</code>å®šä¹‰ä¸€ä¸ªå…³ç³»ã€‚è¿™å°†å‘Šè¯‰ Djangoï¼Œæ¯ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰ <code>ArticlePost</code> å¯¹è±¡éƒ½å…³è”åˆ°ä¸€ä¸ª <code>User</code> å¯¹è±¡ã€‚</p><blockquote><p>Djangoå…·æœ‰ä¸€ä¸ªç®€å•çš„è´¦å·ç³»ç»Ÿï¼ˆUserï¼‰ï¼Œæ»¡è¶³ä¸€èˆ¬ç½‘ç«™çš„ç”¨æˆ·ç›¸å…³çš„åŸºæœ¬åŠŸèƒ½ã€‚</p></blockquote></li></ul><p><code>ArticlePost</code>ç±»å®šä¹‰äº†ä¸€ç¯‡æ–‡ç« æ‰€å¿…é¡»å…·å¤‡çš„è¦ç´ ï¼šä½œè€…ã€æ ‡é¢˜ã€æ­£æ–‡ã€åˆ›å»ºæ—¶é—´ä»¥åŠæ›´æ–°æ—¶é—´ã€‚</p><p>æˆ‘ä»¬è¿˜å¯ä»¥é¢å¤–å†å®šä¹‰ä¸€äº›å†…å®¹ï¼Œè§„èŒƒ<code>ArticlePost</code>ä¸­æ•°æ®çš„è¡Œä¸ºï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>models<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token class-name">ArticlePost</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token comment"># å†…éƒ¨ç±» class Meta ç”¨äºç»™ model å®šä¹‰å…ƒæ•°æ®</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>    <span class="token comment"># ordering æŒ‡å®šæ¨¡å‹è¿”å›çš„æ•°æ®çš„æ’åˆ—é¡ºåº</span>    <span class="token comment"># '-created' è¡¨æ˜æ•°æ®åº”è¯¥ä»¥å€’åºæ’åˆ—</span>        ordering <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'-created'</span><span class="token punctuation">,</span><span class="token punctuation">)</span>    <span class="token comment"># å‡½æ•° __str__ å®šä¹‰å½“è°ƒç”¨å¯¹è±¡çš„ str() æ–¹æ³•æ—¶çš„è¿”å›å€¼å†…å®¹</span>    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># return self.title å°†æ–‡ç« æ ‡é¢˜è¿”å›</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>title<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>å†…éƒ¨ç±»<code>Meta</code>ä¸­çš„<code>ordering</code>å®šä¹‰äº†æ•°æ®çš„æ’åˆ—æ–¹å¼ã€‚<code>-created</code>è¡¨ç¤ºå°†ä»¥åˆ›å»ºæ—¶é—´çš„å€’åºæ’åˆ—ï¼Œä¿è¯äº†æœ€æ–°çš„æ–‡ç« æ€»æ˜¯åœ¨ç½‘é¡µçš„æœ€ä¸Šæ–¹ã€‚æ³¨æ„<code>ordering</code>æ˜¯å…ƒç»„ï¼Œæ‹¬å·ä¸­åªå«ä¸€ä¸ªå…ƒç´ æ—¶ä¸è¦å¿˜è®°æœ«å°¾çš„é€—å·ã€‚</p></li><li><p><code>__str__</code>æ–¹æ³•å®šä¹‰äº†éœ€è¦è¡¨ç¤ºæ•°æ®æ—¶åº”è¯¥æ˜¾ç¤ºçš„åç§°ã€‚ç»™æ¨¡å‹å¢åŠ  <code>__str__</code>æ–¹æ³•æ˜¯å¾ˆé‡è¦çš„ï¼Œå®ƒæœ€å¸¸è§çš„å°±æ˜¯åœ¨Djangoç®¡ç†åå°ä¸­åšä¸ºå¯¹è±¡çš„æ˜¾ç¤ºå€¼ã€‚å› æ­¤åº”è¯¥æ€»æ˜¯è¿”å›ä¸€ä¸ªå‹å¥½æ˜“è¯»çš„å­—ç¬¦ä¸²ã€‚</p></li></ul><p>æ•´ç†å¹¶å»æ‰æ³¨é‡Šï¼Œå…¨éƒ¨ä»£ç æ”¾åœ¨ä¸€èµ·æ˜¯è¿™æ ·ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>models<span class="token punctuation">.</span>py<span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>models <span class="token keyword">import</span> User<span class="token keyword">from</span> django<span class="token punctuation">.</span>utils <span class="token keyword">import</span> timezone<span class="token keyword">class</span> <span class="token class-name">ArticlePost</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    author <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>User<span class="token punctuation">,</span> on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">)</span>    title <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>    body <span class="token operator">=</span> models<span class="token punctuation">.</span>TextField<span class="token punctuation">(</span><span class="token punctuation">)</span>    created <span class="token operator">=</span> models<span class="token punctuation">.</span>DateTimeField<span class="token punctuation">(</span>default<span class="token operator">=</span>timezone<span class="token punctuation">.</span>now<span class="token punctuation">)</span>    updated <span class="token operator">=</span> models<span class="token punctuation">.</span>DateTimeField<span class="token punctuation">(</span>auto_now<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>        <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        ordering <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'-created'</span><span class="token punctuation">,</span><span class="token punctuation">)</span>            <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>title<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ­å–œä½ ï¼Œä½ å·²ç»å®Œæˆäº†åšå®¢ç½‘ç«™æœ€æ ¸å¿ƒçš„æ•°æ®æ¨¡å‹çš„å¤§éƒ¨åˆ†å†…å®¹ã€‚</strong></p><p>ä»£ç ä¸åˆ°20è¡Œï¼Œæ˜¯ä¸æ˜¯å®Œå…¨æ²¡å•¥æ„Ÿè§‰ã€‚åé¢ä¼šæ…¢æ…¢ä½“ä¼šDjangoçš„å¼ºå¤§ã€‚</p><h3 id="æŠ„è¿˜æ˜¯æ•²ï¼Ÿ"><a href="#æŠ„è¿˜æ˜¯æ•²ï¼Ÿ" class="headerlink" title="æŠ„è¿˜æ˜¯æ•²ï¼Ÿ"></a>æŠ„è¿˜æ˜¯æ•²ï¼Ÿ</h3><p>å­¦ä¹ æœ¬æ•™ç¨‹æ—¶ï¼Œä»£ç éƒ¨åˆ†ç›´æ¥æ‹·è´è¿˜æ˜¯çº¯æ‰‹æ•²ï¼Ÿ</p><p>ç›´æ¥æ‹·è´çš„ä¼˜ç‚¹æ˜¯å­¦å¾—å¾ˆå¿«ï¼Œç†è§£åŸç†åï¼ŒæŠŠä»£ç å¾€è‡ªå·±é¡¹ç›®ä¸­åˆ·åˆ·åˆ·æ‹·è´è¿‡å»ï¼Œå‡ ä¸‹å°±èƒ½è¿è¡Œäº†ã€‚ä½†è¿™è¦æ±‚å­¦ä¹ è€…æœ‰è¾ƒå¼ºçš„è‡ªå¾‹èƒ½åŠ›ï¼šä»€ä¹ˆç¨‹åº¦æ‰èƒ½ç®—å·²ç»â€œç†è§£â€äº†ï¼Ÿ</p><p>çº¯æ‰‹æ•²å°±é¿å…äº†è¿™ä¸ªé—®é¢˜ï¼Œæƒ³å¿«ä¹Ÿå¿«ä¸èµ·æ¥ï¼Œè¿˜ç»å¸¸é‡åˆ°bugï¼Œåœ¨è§£å†³çš„è¿‡ç¨‹ä¸­çº æ­£è‡ªèº«çš„ä¹ æƒ¯æ€§é—®é¢˜ã€‚ä½†æ˜¯æ‰‹æ•²çš„å¥½å¤„å¿…é¡»ä¿è¯ä½ æ•²çš„æ—¶å€™å¤§è„‘æ²¡æœ‰æ”¾ç©ºã€‚</p><p><strong>åšä¸»çš„å»ºè®®æ˜¯ï¼š</strong></p><ul><li><strong>æ¨¡å‹</strong>ã€<strong>è§†å›¾</strong>ä»£ç é‡ä¸å¤šï¼Œåˆæ˜¯é‡ç‚¹å­¦ä¹ å†…å®¹ï¼Œå°½é‡çº¯æ‰‹æ•²ã€‚</li><li><strong>æ¨¡æ¿</strong>æ ¹æ®ä¸ªäººæƒ…å†µï¼Œé€‚å½“æ‹·è´ã€‚</li></ul><blockquote><p>è§†å›¾ã€æ¨¡æ¿é©¬ä¸Šå°±ä¼šè®²åˆ°ã€‚</p></blockquote><h2 id="ä»£ç åˆ†è§£"><a href="#ä»£ç åˆ†è§£" class="headerlink" title="ä»£ç åˆ†è§£"></a>ä»£ç åˆ†è§£</h2><blockquote><p>è¿™éƒ¨åˆ†å†…å®¹ä¸èƒ½ç†è§£ä¹Ÿæ²¡å…³ç³»ï¼Œå…ˆè·³è¿‡ï¼Œå¾…æ°´å¹³æé«˜å†å›è¿‡å¤´æ¥é˜…è¯»ã€‚</p></blockquote><h3 id="å¯¼å…¥"><a href="#å¯¼å…¥" class="headerlink" title="å¯¼å…¥"></a>å¯¼å…¥</h3><p>Djangoæ¡†æ¶åŸºäºpythonè¯­è¨€ï¼Œè€Œåœ¨pythonä¸­ç”¨<code>import</code>æˆ–è€…<code>from...import</code>æ¥å¯¼å…¥æ¨¡å—ã€‚</p><p><strong>æ¨¡å—</strong>å…¶å®å°±ä¸€äº›å‡½æ•°å’Œç±»çš„é›†åˆæ–‡ä»¶ï¼Œå®ƒèƒ½å®ç°ä¸€äº›ç›¸åº”çš„åŠŸèƒ½ã€‚å½“æˆ‘ä»¬éœ€è¦ä½¿ç”¨è¿™äº›åŠŸèƒ½çš„æ—¶å€™ï¼Œç›´æ¥æŠŠç›¸åº”çš„æ¨¡å—å¯¼å…¥åˆ°æˆ‘ä»¬çš„ç¨‹åºä¸­å°±å¯ä»¥ä½¿ç”¨äº†ã€‚</p><p><code>import</code>ç”¨äºå¯¼å…¥æ•´ä¸ªåŠŸèƒ½æ¨¡å—ã€‚ä½†å®é™…ä½¿ç”¨æ—¶å¾€å¾€åªéœ€è¦ç”¨æ¨¡å—ä¸­çš„æŸä¸€ä¸ªåŠŸèƒ½ï¼Œä¸ºæ­¤å¯¼å…¥æ•´ä¸ªæ¨¡å—æœ‰ç‚¹å¤§æå°ç”¨ï¼Œå› æ­¤å¯ä»¥ç”¨<code>from a import b</code>è¡¨ç¤ºä»æ¨¡å—<code>a</code>ä¸­å¯¼å…¥<code>b</code>ç»™æˆ‘ç”¨å°±å¯ä»¥äº†ã€‚</p><h3 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a>ç±»</h3><p>Pythonä½œä¸ºé¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼Œæœ€é‡è¦çš„æ¦‚å¿µå°±æ˜¯<strong>ç±»</strong>ï¼ˆClassï¼‰å’Œ<strong>å®ä¾‹</strong>ï¼ˆInstanceï¼‰ã€‚</p><p>ç±»æ˜¯æŠ½è±¡çš„æ¨¡æ¿ï¼Œè€Œå®ä¾‹æ˜¯æ ¹æ®è¿™ä¸ªç±»åˆ›å»ºå‡ºæ¥çš„ä¸€ä¸ªä¸ªå…·ä½“çš„â€œå¯¹è±¡â€ã€‚æ¯ä¸ªå¯¹è±¡éƒ½æ‹¥æœ‰ç›¸åŒçš„æ–¹æ³•ï¼Œä½†å„è‡ªçš„æ•°æ®å¯èƒ½ä¸åŒã€‚è€Œè¿™äº›æ–¹æ³•è¢«æ‰“åŒ…å°è£…åœ¨ä¸€èµ·ï¼Œå°±ç»„æˆäº†ç±»ã€‚</p><p>æ¯”å¦‚è¯´æˆ‘ä»¬åˆšå†™çš„è¿™ä¸ª<code>ArticlePost</code>ç±»ï¼Œä½œç”¨å°±æ˜¯å°±ä¸ºåšå®¢æ–‡ç« çš„å†…å®¹æä¾›äº†ä¸€ä¸ªæ¨¡æ¿ã€‚æ¯å½“æœ‰ä¸€ç¯‡æ–°æ–‡ç« ç”Ÿæˆçš„æ—¶å€™ï¼Œéƒ½è¦æ¯”å¯¹<code>ArticlePost</code>ç±»æ¥åˆ›å»º<code>author</code>ã€<code>title</code>ã€<code>body</code>â€¦ç­‰ç­‰æ•°æ®ï¼›è™½ç„¶æ¯ç¯‡æ–‡ç« çš„å…·ä½“å†…å®¹å¯èƒ½ä¸ä¸€æ ·ï¼Œä½†æ˜¯å¿…é¡»éƒ½éµå¾ªç›¸åŒçš„è§„åˆ™ã€‚</p><p>åœ¨Djangoä¸­ï¼Œæ•°æ®ç”±æ¨¡å‹æ¥å¤„ç†ï¼Œè€Œæ¨¡å‹çš„è½½ä½“å°±æ˜¯ç±»ï¼ˆClassï¼‰ã€‚</p><h3 id="å­—æ®µ"><a href="#å­—æ®µ" class="headerlink" title="å­—æ®µ"></a>å­—æ®µ</h3><p><strong>å­—æ®µ</strong>ï¼ˆfieldï¼‰è¡¨ç¤ºæ•°æ®åº“è¡¨çš„ä¸€ä¸ªæŠ½è±¡ç±»ï¼ŒDjangoä½¿ç”¨å­—æ®µç±»åˆ›å»ºæ•°æ®åº“è¡¨ï¼Œå¹¶å°†Pythonç±»å‹æ˜ å°„åˆ°æ•°æ®åº“ã€‚</p><p>åœ¨æ¨¡å‹ä¸­ï¼Œå­—æ®µè¢«å®ä¾‹åŒ–ä¸ºç±»å±æ€§å¹¶è¡¨ç¤ºç‰¹å®šçš„è¡¨ï¼ŒåŒæ—¶å…·æœ‰å°†å­—æ®µå€¼æ˜ å°„åˆ°æ•°æ®åº“çš„å±æ€§åŠæ–¹æ³•ã€‚</p><p>æ¯”æ–¹è¯´<code>ArticlePost</code>ç±»ä¸­æœ‰ä¸€ä¸ª<code>title</code>çš„å±æ€§ï¼Œè¿™ä¸ªå±æ€§ä¸­ä¿å­˜ç€<code>Charfield</code>ç±»å‹çš„æ•°æ®ï¼šå³ä¸€ä¸ªè¾ƒçŸ­çš„å­—ç¬¦ä¸²ã€‚</p><h3 id="å¤–é”®"><a href="#å¤–é”®" class="headerlink" title="å¤–é”®"></a>å¤–é”®</h3><p>æ•°æ®åº“ä¸­æœ‰å„ç§å„æ ·çš„æ•°æ®è¡¨ï¼Œæœ‰æ—¶å€™å‡ å¼ è¡¨çš„æ•°æ®æ˜¯äº’ç›¸å…³è”çš„ã€‚æ¯”å¦‚ä¸€å¼ è¡¨è®°å½•äº†æ‰€æœ‰çš„æ–‡ç« ï¼Œå¦ä¸€å¼ è¡¨è®°å½•äº†æ‰€æœ‰çš„ç”¨æˆ·ï¼Œè€Œæ–‡ç« æ˜¯ç”¨æˆ·å‘è¡¨çš„ï¼Œè¿™æ—¶å€™è¿™ä¸¤å¼ è¡¨å°±äº§ç”Ÿäº†å…³ç³»ã€‚<strong>å¤–é”®</strong>å°±æ˜¯ç”¨æ¥è¡¨ç¤ºè¿™ç§å…³ç³»çš„ã€‚</p><p>è€Œ<code>ForeignKey</code>æ˜¯ç”¨æ¥è§£å†³â€œ<strong>ä¸€å¯¹å¤š</strong>â€å…³ç³»çš„ã€‚é‚£ä»€ä¹ˆåˆå«â€œä¸€å¯¹å¤šâ€ï¼Ÿ</p><p>åœ¨æˆ‘ä»¬çš„<code>ArticlePost</code>æ¨¡å‹ä¸­ï¼Œä¸€ç¯‡æ–‡ç« åªèƒ½æœ‰ä¸€ä¸ªä½œè€…ï¼Œè€Œä¸€ä¸ªä½œè€…å¯ä»¥æœ‰å¾ˆå¤šç¯‡æ–‡ç« ï¼Œè¿™å°±æ˜¯â€œä¸€å¯¹å¤šâ€å…³ç³»ã€‚</p><p>åˆæ¯”å¦‚ä¸€ä¸ªç­çº§çš„åŒå­¦ä¸­ï¼Œæ¯ä¸ªåŒå­¦åªèƒ½æœ‰ä¸€ç§æ€§åˆ«ï¼Œè€Œæ¯ç§æ€§åˆ«å¯ä»¥å¯¹åº”å¾ˆå¤šçš„åŒå­¦ï¼Œè¿™ä¹Ÿæ˜¯â€œä¸€å¯¹å¤šâ€ã€‚</p><p>å› æ­¤ï¼Œé€šè¿‡<code>ForeignKey</code>å¤–é”®ï¼Œå°†<code>User</code>å’Œ<code>ArticlePost</code>å…³è”åˆ°äº†ä¸€èµ·ï¼Œæœ€ç»ˆå°±æ˜¯å°†åšå®¢æ–‡ç« çš„ä½œè€…å’Œç½‘ç«™çš„ç”¨æˆ·å…³è”åœ¨ä¸€èµ·äº†ã€‚</p><p>æ—¢ç„¶æœ‰â€œä¸€å¯¹å¤šâ€ï¼Œå½“ç„¶ä¹Ÿæœ‰<strong>â€œä¸€å¯¹ä¸€â€ï¼ˆ<code>OneToOneField </code>ï¼‰ã€â€œå¤šå¯¹å¤šâ€ï¼ˆ<code>ManyToManyField</code>ï¼‰</strong>ã€‚ç›®å‰ç”¨ä¸åˆ°è¿™äº›å¤–é”®ï¼Œåé¢å†å›å¤´æ¥å¯¹æ¯”å…¶å·®åˆ«ã€‚</p><blockquote><p>Django2.0 ä¹‹å‰çš„ç‰ˆæœ¬å¤–é”®çš„<code>on_delete</code>å‚æ•°å¯ä»¥ä¸å¡«ï¼›Django2.0ä»¥å<code>on_delete</code>æ˜¯å¿…å¡«é¡¹ã€‚</p></blockquote><h3 id="å†…éƒ¨ç±»"><a href="#å†…éƒ¨ç±»" class="headerlink" title="å†…éƒ¨ç±»"></a>å†…éƒ¨ç±»</h3><p>å†…éƒ¨ç±»<code>class Meta</code>æä¾›æ¨¡å‹çš„å…ƒæ•°æ®ã€‚å…ƒæ•°æ®æ˜¯<strong>â€œä»»ä½•ä¸æ˜¯å­—æ®µçš„ä¸œè¥¿â€</strong>ï¼Œä¾‹å¦‚æ’åºé€‰é¡¹<code>ordering</code>ã€æ•°æ®åº“è¡¨å<code>db_table</code>ã€å•æ•°å’Œå¤æ•°åç§°<code>verbose_name</code>å’Œ <code>verbose_name_plural</code>ã€‚è¿™äº›ä¿¡æ¯ä¸æ˜¯æŸç¯‡æ–‡ç« ç§æœ‰çš„æ•°æ®ï¼Œè€Œæ˜¯æ•´å¼ è¡¨çš„å…±åŒè¡Œä¸ºã€‚</p><p>è¦ä¸è¦å†™å†…éƒ¨ç±»æ˜¯å®Œå…¨å¯é€‰çš„ï¼Œå½“ç„¶æœ‰äº†å®ƒå¯ä»¥å¸®åŠ©ç†è§£å¹¶è§„èŒƒç±»çš„è¡Œä¸ºã€‚</p><p>åœ¨<code>ArticlePost</code>ä¸­æˆ‘ä»¬ä½¿ç”¨çš„å…ƒæ•°æ®<code>ordering = (&#39;-created&#39;,)</code>ï¼Œè¡¨æ˜äº†æ¯å½“æˆ‘éœ€è¦å–å‡ºæ–‡ç« åˆ—è¡¨ï¼Œä½œä¸ºåšå®¢é¦–é¡µæ—¶ï¼ŒæŒ‰ç…§<code>-created</code>ï¼ˆå³æ–‡ç« åˆ›å»ºæ—¶é—´ï¼Œè´Ÿå·æ ‡è¯†å€’åºï¼‰æ¥æ’åˆ—ï¼Œä¿è¯äº†æœ€æ–°æ–‡ç« æ°¸è¿œåœ¨æœ€é¡¶éƒ¨ä½ç½®ã€‚</p><h2 id="æ•°æ®è¿ç§»ï¼ˆMigrationsï¼‰"><a href="#æ•°æ®è¿ç§»ï¼ˆMigrationsï¼‰" class="headerlink" title="æ•°æ®è¿ç§»ï¼ˆMigrationsï¼‰"></a>æ•°æ®è¿ç§»ï¼ˆMigrationsï¼‰</h2><p>ç¼–å†™å¥½äº†Modelåï¼Œæ¥ä¸‹æ¥å°±éœ€è¦è¿›è¡Œæ•°æ®è¿ç§»ã€‚è¿ç§»æ˜¯Djangoå¯¹æ¨¡å‹æ‰€åšçš„æ›´æ”¹ä¼ é€’åˆ°æ•°æ®åº“ä¸­çš„æ–¹å¼ã€‚</p><p><strong>æ³¨æ„ï¼Œæ¯å½“å¯¹æ•°æ®åº“è¿›è¡Œäº†æ›´æ”¹ï¼ˆæ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤ç­‰ï¼‰æ“ä½œï¼Œéƒ½éœ€è¦è¿›è¡Œæ•°æ®è¿ç§»ã€‚</strong></p><p>Djangoçš„è¿ç§»ä»£ç æ˜¯ç”±æ¨¡å‹æ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œå®ƒæœ¬è´¨ä¸Šåªæ˜¯ä¸ªå†å²è®°å½•ï¼ŒDjangoå¯ä»¥ç”¨å®ƒæ¥è¿›è¡Œæ•°æ®åº“çš„æ»šåŠ¨æ›´æ–°ï¼Œé€šè¿‡è¿™ç§æ–¹å¼ä½¿å…¶èƒ½å¤Ÿå’Œå½“å‰çš„æ¨¡å‹åŒ¹é…ã€‚</p><p>åœ¨è™šæ‹Ÿç¯å¢ƒä¸­è¿›å…¥<code>my_blog</code>æ–‡ä»¶å¤¹ï¼ˆè¿˜æ²¡ç†Ÿæ‚‰venvçš„å†æ¸©ä¹ : <a href="http://www.dusaiphoto.com/article/article-detail/4/">åœ¨Windowsä¸­æ­å»ºDjangoçš„å¼€å‘ç¯å¢ƒ</a>ï¼‰ï¼Œè¾“å…¥<code>python manage.py makemigrations</code>ï¼Œå¯¹æ¨¡å‹çš„æ›´æ”¹åˆ›å»ºæ–°çš„è¿ç§»è¡¨ï¼š</p><pre class="line-numbers language-none"><code class="language-none">(env) e:\django_project\my_blog&gt;python manage.py makemigrationsMigrations for &#39;article&#39;:  article\migrations\0001_initial.py    - Create model ArticlePost(env) e:\django_project\my_blog&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é€šè¿‡è¿è¡Œ <code>makemigrations</code> å‘½ä»¤ï¼ŒDjango ä¼šæ£€æµ‹ä½ å¯¹æ¨¡å‹æ–‡ä»¶çš„ä¿®æ”¹ï¼Œå¹¶ä¸”æŠŠä¿®æ”¹çš„éƒ¨åˆ†å‚¨å­˜ä¸ºä¸€æ¬¡è¿ç§»ã€‚</p><p>ç„¶åè¾“å…¥<code>python manage.py migrate</code>ï¼Œ<strong>åº”ç”¨è¿ç§»åˆ°æ•°æ®åº“ä¸­</strong>ï¼š</p><pre class="line-numbers language-none"><code class="language-none">(env) e:\django_project\my_blog&gt;python manage.py migrateOperations to perform:  Apply all migrations: admin, article, auth, contenttypes, sessionsRunning migrations:  Applying contenttypes.0001_initial... OK  ...  Applying sessions.0001_initial... OK(env) e:\django_project\my_blog&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>migrate</code> å‘½ä»¤é€‰ä¸­æ‰€æœ‰è¿˜æ²¡æœ‰æ‰§è¡Œè¿‡çš„è¿ç§»å¹¶åº”ç”¨åœ¨æ•°æ®åº“ä¸Šï¼Œä¹Ÿå°±æ˜¯å°†æ¨¡å‹çš„æ›´æ”¹åŒæ­¥åˆ°æ•°æ®åº“ç»“æ„ä¸Šã€‚è¿ç§»æ˜¯éå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œå®ƒèƒ½è®©ä½ åœ¨å¼€å‘è¿‡ç¨‹ä¸­æŒç»­çš„æ”¹å˜æ•°æ®åº“ç»“æ„è€Œä¸éœ€è¦é‡æ–°åˆ é™¤å’Œåˆ›å»ºè¡¨ã€‚å®ƒä¸“æ³¨äºä½¿æ•°æ®åº“å¹³æ»‘å‡çº§è€Œä¸ä¼šä¸¢å¤±æ•°æ®ã€‚</p><blockquote><p>æœ‰ç‚¹æ‹—å£ï¼Œä¹Ÿæœ‰ç‚¹æ¯ç‡¥ï¼ŒåšæŒã€‚ä¹è¶£åœ¨åé¢ã€‚</p></blockquote><p><strong>å†é‡å¤ä¸€æ¬¡</strong>ï¼šæ¯å½“ä½ ä¿®æ”¹äº†<code>models.py</code>æ–‡ä»¶ï¼Œéƒ½éœ€è¦ç”¨<code>makemigrations</code>å’Œ<code>migrate</code>è¿™ä¸¤æ¡æŒ‡ä»¤è¿ç§»æ•°æ®ã€‚</p><p>åœ¨è¿ç§»ä¹‹åï¼ŒModelçš„ç¼–å†™å°±ç®—å®Œæˆäº†ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« åˆæ­¥äº†è§£äº†Djangoçš„MTVæ¨¡å¼ï¼Œç¼–å†™äº†åšå®¢æ–‡ç« çš„Modelæ¨¡å‹<code>ArticlePost</code>ï¼Œå¹¶å°†å…¶è¿ç§»åˆ°äº†æ•°æ®åº“ä¸­ã€‚</p><p>ä¸‹ä¸€æ­¥å°±å‘Viewè¿›å†›ï¼Œå­¦ä¹ å¦‚ä½•è°ƒå–æ¨¡å‹ä¸­çš„æ•°æ®ã€‚</p><ul><li><p>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</p></li><li><p>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#x64;&#x75;&#x73;&#x61;&#105;&#112;&#x68;&#111;&#116;&#111;&#64;&#x66;&#x6f;&#x78;&#x6d;&#97;&#105;&#108;&#x2e;&#x63;&#111;&#x6d;">&#x64;&#x75;&#x73;&#x61;&#105;&#112;&#x68;&#111;&#116;&#111;&#64;&#x66;&#x6f;&#x78;&#x6d;&#97;&#105;&#108;&#x2e;&#x63;&#111;&#x6d;</a></p></li><li><p>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--06.ViewåŠTemplate</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/06.view-ji-template/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/06.view-ji-template/</url>
      
        <content type="html"><![CDATA[<h2 id="æ”¹å†™è§†å›¾å‡½æ•°"><a href="#æ”¹å†™è§†å›¾å‡½æ•°" class="headerlink" title="æ”¹å†™è§†å›¾å‡½æ•°"></a>æ”¹å†™è§†å›¾å‡½æ•°</h2><p>ä¸Šä¸€ç« æˆ‘ä»¬æ„Ÿå—äº†è§†å›¾çš„å·¥ä½œæµç¨‹ã€‚</p><p><strong>ä¸ºäº†è®©è§†å›¾çœŸæ­£å‘æŒ¥ä½œç”¨ï¼Œ</strong>æ”¹å†™<code>article/views.py</code>ä¸­çš„<code>article_list</code>è§†å›¾å‡½æ•°ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render<span class="token comment"># å¯¼å…¥æ•°æ®æ¨¡å‹ArticlePost</span><span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> ArticlePost<span class="token keyword">def</span> <span class="token function">article_list</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># å–å‡ºæ‰€æœ‰åšå®¢æ–‡ç« </span>    articles <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># éœ€è¦ä¼ é€’ç»™æ¨¡æ¿ï¼ˆtemplatesï¼‰çš„å¯¹è±¡</span>    context <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token string">'articles'</span><span class="token punctuation">:</span> articles <span class="token punctuation">&#125;</span>    <span class="token comment"># renderå‡½æ•°ï¼šè½½å…¥æ¨¡æ¿ï¼Œå¹¶è¿”å›contextå¯¹è±¡</span>    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'article/list.html'</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»£ç åŒæ ·å¾ˆç›´ç™½ï¼Œåˆ†æå¦‚ä¸‹ï¼š</p><ul><li><p><code>from .models import ArticlePost</code>ä»<code>models.py</code>ä¸­å¯¼å…¥<code>ArticlePost</code>æ•°æ®ç±»</p></li><li><p><code>ArticlePost.objects.all()</code>æ˜¯æ•°æ®ç±»çš„æ–¹æ³•ï¼Œå¯ä»¥è·å¾—æ‰€æœ‰çš„å¯¹è±¡ï¼ˆå³åšå®¢æ–‡ç« ï¼‰ï¼Œå¹¶ä¼ é€’ç»™<code>articles</code>å˜é‡</p></li><li><p><code>context</code>å®šä¹‰äº†éœ€è¦ä¼ é€’ç»™<strong>æ¨¡æ¿</strong>çš„ä¸Šä¸‹æ–‡ï¼Œè¿™é‡Œå³<code>articles</code></p><blockquote><p>æ¨¡æ¿çš„æ¦‚å¿µé©¬ä¸Šå°±è¦è®²ã€‚</p></blockquote></li><li><p>æœ€åè¿”å›äº†<code>render</code>å‡½æ•°ã€‚å®ƒçš„ä½œç”¨æ˜¯ç»“åˆæ¨¡æ¿å’Œä¸Šä¸‹æ–‡ï¼Œå¹¶è¿”å›æ¸²æŸ“åçš„HttpResponseå¯¹è±¡ã€‚é€šä¿—çš„è®²å°±æ˜¯æŠŠcontextçš„å†…å®¹ï¼ŒåŠ è½½è¿›æ¨¡æ¿ï¼Œå¹¶é€šè¿‡æµè§ˆå™¨å‘ˆç°ã€‚</p></li></ul><p><code>render</code>çš„å˜é‡åˆ†è§£å¦‚ä¸‹ï¼š</p><ul><li>requestæ˜¯å›ºå®šçš„<code>request</code>å¯¹è±¡ï¼Œç…§ç€å†™å°±å¯ä»¥</li><li><code>article/list.html</code>å®šä¹‰äº†æ¨¡æ¿æ–‡ä»¶çš„ä½ç½®ã€åç§°</li><li><code>context</code>å®šä¹‰äº†éœ€è¦ä¼ å…¥æ¨¡æ¿æ–‡ä»¶çš„ä¸Šä¸‹æ–‡</li></ul><p>è§†å›¾å‡½æ•°è¿™æ ·å°±å†™å¥½äº†ã€‚</p><h2 id="ç¼–å†™æ¨¡æ¿ï¼ˆtemplateï¼‰"><a href="#ç¼–å†™æ¨¡æ¿ï¼ˆtemplateï¼‰" class="headerlink" title="ç¼–å†™æ¨¡æ¿ï¼ˆtemplateï¼‰"></a>ç¼–å†™æ¨¡æ¿ï¼ˆtemplateï¼‰</h2><p>åœ¨å‰é¢çš„è§†å›¾ä¸­æˆ‘ä»¬å®šä¹‰äº†æ¨¡æ¿çš„ä½ç½®åœ¨<code>article/list.html</code>ï¼Œå› æ­¤åœ¨æ ¹ç›®å½•ä¸‹æ–°å»º<code>templates</code>æ–‡ä»¶å¤¹ï¼Œå†æ–°å»º<code>article</code>æ–‡ä»¶å¤¹ï¼Œå†æ–°å»º<code>list.html</code>æ–‡ä»¶ï¼Œå³ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_blogâ”‚  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>â”œâ”€articleâ”‚  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>â””â”€my_blogâ”‚  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>â””â”€templates    â””â”€ article        â””â”€ <span class="token builtin">list</span><span class="token punctuation">.</span>html<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç»†å¿ƒçš„ä½ è‚¯å®šæ³¨æ„åˆ°äº†ï¼Œä¹‹å‰çš„Djangoæ–‡ä»¶åç¼€éƒ½æ˜¯<code>.py</code>ï¼Œä»£è¡¨Pythonæ–‡ä»¶ï¼›è¿™é‡Œçš„æ¨¡æ¿æ–‡ä»¶åç¼€æ˜¯<code>.html</code>ï¼Œè¿™åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p><strong>HTMLæ˜¯ä¸€ç§ç”¨äºåˆ›å»ºç½‘é¡µçš„æ ‡è®°è¯­è¨€ã€‚</strong>å®ƒè¢«ç”¨æ¥ç»“æ„åŒ–ä¿¡æ¯ï¼Œæ ‡æ³¨å“ªäº›æ–‡å­—æ˜¯æ ‡é¢˜ã€å“ªäº›æ–‡å­—æ˜¯æ­£æ–‡ç­‰ï¼ˆå½“ç„¶ä¸ä»…ä»…è¿™ç‚¹åŠŸèƒ½ï¼‰ã€‚ä¹Ÿå¯ä»¥ç®€å•ç†è§£ä¸ºâ€œç»™æ•°æ®æ’ç‰ˆâ€çš„æ–‡ä»¶ï¼Œè·Ÿä½ å†™æ–‡æ¡£ç”¨çš„Office Wordä¸€æ ·ä¸€æ ·çš„ ã€‚</p><p>åœ¨<code>list.html</code>æ–‡ä»¶ä¸­å†™å…¥ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/list.html&#123;% for article in articles %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>&#123;&#123; article.title &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>&#123;% endfor %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Djangoé€šè¿‡æ¨¡æ¿æ¥åŠ¨æ€ç”ŸæˆHTMLï¼Œå…¶ä¸­å°±åŒ…å«æè¿°åŠ¨æ€å†…å®¹çš„ä¸€äº›ç‰¹æ®Šè¯­æ³•ï¼š</p><ul><li><p> <code>&#123;% for article in articles %&#125;`ï¼š`articles`ä¸ºè§†å›¾å‡½æ•°çš„`context`ä¼ é€’è¿‡æ¥çš„ä¸Šä¸‹æ–‡ï¼Œå³æ‰€æœ‰æ–‡ç« çš„é›†åˆã€‚`&#123;% for %&#125;`å¾ªåè¡¨ç¤ºä¾æ¬¡å–å‡º`articles`ä¸­çš„å…ƒç´ ï¼Œå‘½åä¸º`article`ï¼Œå¹¶åˆ†åˆ«æ‰§è¡Œæ¥ä¸‹æ¥æ“ä½œã€‚æœ«å°¾ç”¨`&#123;% endfor %&#125;</code>å‘Šè¯‰Djangoå¾ªç¯ç»“æŸçš„ä½ç½®ã€‚</p></li><li><p>ä½¿ç”¨<code>.</code>ç¬¦å·æ¥è®¿é—®å˜é‡çš„å±æ€§ã€‚è¿™é‡Œçš„<code>article</code>ä¸ºæ¨¡å‹ä¸­çš„æŸä¸€æ¡æ–‡ç« ï¼›æˆ‘ä»¬åœ¨å‰é¢çš„<code>ArticlePost</code>ä¸­å®šä¹‰äº†æ–‡ç« çš„æ ‡é¢˜å«<code>title</code>ï¼Œå› æ­¤è¿™é‡Œå¯ä»¥ç”¨<code>article.title</code>æ¥è®¿é—®æ–‡ç« çš„æ ‡é¢˜ã€‚</p></li><li><p><code>&lt;p&gt;...&lt;/p&gt;</code>å³ä¸ºhtmlè¯­è¨€ï¼Œä¸­é—´åŒ…è£¹äº†ä¸€ä¸ªæ®µè½çš„æ–‡å­—ã€‚</p></li></ul><p>åœ¨ä¸Šä¸€ç« ä¸­å·²ç»å®šä¹‰å¥½äº†<code>urls.py</code>ï¼Œå› æ­¤ä¸å†éœ€è¦æ”¹åŠ¨äº†ã€‚</p><p>ä¸€åˆ‡éƒ½å¾ˆå¥½ï¼Œæ·±å¸ä¸€å£æ°”ã€‚ä¿å­˜æ‰€æœ‰æ–‡ä»¶ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥åœ°å€<code>http://127.0.0.1:8000/article/article-list/</code>ï¼Œå¾—åˆ°ä»¥ä¸‹é”™è¯¯ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20180911/terror.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20180911/terror.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ä¼¼ä¹æˆåŠŸä»æ¥éƒ½ä¸ä¼šå¾ˆé¡ºåˆ©ã€‚</p><h2 id="é”™è¯¯åˆ†æ"><a href="#é”™è¯¯åˆ†æ" class="headerlink" title="é”™è¯¯åˆ†æ"></a>é”™è¯¯åˆ†æ</h2><p>è™½ç„¶å‡ºé”™äº†ï¼Œå¥½åœ¨Djangoæä¾›äº†éå¸¸å®Œå–„çš„é”™è¯¯å¤„ç†ç³»ç»Ÿï¼Œæ–¹ä¾¿å¼€å‘è€…å¿«é€Ÿæ‰¾åˆ°Bugçš„è››ä¸é©¬è¿¹ã€‚</p><p>ç¬¬ä¸€è¡Œå°±é†’ç›®åœ°æç¤ºï¼š<strong>TemplateDoesNotExist</strong>ï¼Œè¯´æ˜Djangoæ²¡æœ‰æ‰¾åˆ°<code>list.html</code>è¿™ä¸ªæ–‡ä»¶ã€‚ä»”ç»†æ£€æŸ¥ç›®å½•ã€æ–‡ä»¶çš„åç§°æ— è¯¯ï¼Œæ²¡é—®é¢˜å°±å¾€ä¸‹ç»§ç»­çœ‹ã€‚</p><p>ç„¶åå‘ç°æœ‰è¿™ä¹ˆä¸¤è¡Œï¼š</p><pre class="line-numbers language-none"><code class="language-none">...django\contrib\admin\templates\article\list.html (Source does not exist)...django\contrib\auth\templates\article\list.html (Source does not exist)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä¼¼ä¹Djangoåœ¨è¿™ä¸¤ä¸ªä½ç½®æœç´¢ï¼ˆæ²¡æœ‰åœ¨åˆšåˆ›å»ºçš„templatesç›®å½•ï¼‰ï¼Œæ²¡æœ‰å‘ç°éœ€è¦çš„æ–‡ä»¶ï¼Œç„¶åè¿”å›äº†â€œæœªå‘ç°æ¨¡æ¿æ–‡ä»¶â€çš„é”™è¯¯ã€‚</p><p>å®šä½äº†é—®é¢˜çš„æ‰€åœ¨ï¼Œæ¥ä¸‹æ¥å°±æ˜¯åœ¨å¦‚ä½•â€œå‘Šè¯‰â€Djangoæˆ‘çš„æ¨¡æ¿ä½ç½®å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆå°±åœ¨<code>settings.py</code>ä¸­äº†ï¼Œå®ƒä¿å­˜äº†Djangoé¡¹ç›®çš„å„ç§<strong>åˆå§‹é…ç½®</strong>ã€‚</p><p>æ‰“å¼€å¹¶æ‰¾åˆ°è¿™ä¸€æ®µï¼ŒåŠ å…¥ä»£ç <code>os.path.join(BASE_DIR, &#39;templates&#39;)</code>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_blog<span class="token operator">/</span>settings<span class="token punctuation">.</span>pyTEMPLATES <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token comment"># å®šä¹‰æ¨¡æ¿ä½ç½®</span>        <span class="token string">'DIRS'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>BASE_DIR<span class="token punctuation">,</span> <span class="token string">'templates'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™å°±æ˜¯è¯´æ¨¡æ¿æ–‡ä»¶åœ¨é¡¹ç›®æ ¹ç›®å½•çš„<code>templates</code>æ–‡ä»¶å¤¹ä¸­ï¼Œå»æ‰¾æ‰¾å§ã€‚</p><p>ä¿å­˜æ–‡ä»¶ï¼Œé‡æ–°å¯åŠ¨æœåŠ¡å™¨ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20180911/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE29.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20180911/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE29.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>æˆåŠŸï¼</p><p>è™½ç„¶ç®€é™‹ï¼Œä½†æ˜¯å·²ç»èµ°é€šäº†MTVï¼ˆmodelã€templateã€viewï¼‰ç¯è·¯ã€‚</p><p>ä¸è¦æ¿€åŠ¨ï¼Œç²¾å½©çš„è¿˜åœ¨åé¢ã€‚</p><h3 id="ä¸‰ä¸ªå·¥å…·"><a href="#ä¸‰ä¸ªå·¥å…·" class="headerlink" title="ä¸‰ä¸ªå·¥å…·"></a>ä¸‰ä¸ªå·¥å…·</h3><blockquote><p>æ­¤èŠ‚ä¸º 2019/6/1 æ–°å¢</p></blockquote><p>è¯»è€…åœ¨å¼€å‘ä¸­æ¯å¤©éƒ½ä¼šé‡åˆ°å„ç§å„æ ·çš„é—®é¢˜ã€‚</p><p>è§£å†³é—®é¢˜çš„æ–¹æ³•å¾ˆå¤šï¼Œå…¶ä¸­æœ‰ä¸‰ä¸ªå·¥å…·éå¸¸çš„æœ‰æ•ˆï¼Œç€é‡æä¸€ä¸‹ï¼š</p><ul><li><p><strong>DjangoæŠ¥é”™é¡µé¢</strong>ï¼šå°±æ˜¯ä¸Šé¢å‡ºç°çš„é‚£ä¸ªé»„é»„çš„æŠ¥é”™é¡µé¢å•¦ã€‚DjangoæŠ¥é”™é¡µé¢åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½èƒ½å‡†ç¡®çš„åˆ¤æ–­é”™è¯¯ç±»å‹ã€é”™è¯¯æŠ›å‡ºçš„ä½ç½®ã€ç”šè‡³æ˜¯è§£å†³æ–¹æ¡ˆã€‚è¯»è€…åƒä¸‡ä¸è¦è§‰å¾—è¯»è¿™ä¹ˆå¤šè‹±æ–‡å¥½éº»çƒ¦å•Šï¼Œå…¶å®é‡ç‚¹å°±é‚£ä¹ˆå‡ å¥è¯ã€‚</p></li><li><p><strong>æµè§ˆå™¨æ§åˆ¶å°</strong>ï¼šå¦‚æœä½ ç”¨çš„æµè§ˆå™¨æ˜¯Chromeï¼Œé‚£ä¹ˆæ‰“å¼€æ§åˆ¶å°çš„å¿«æ·é”®æ˜¯<code>Ctrl + Shift + i</code>ã€‚æ§åˆ¶å°é‡Œåˆæœ‰ä¸¤ä¸ªå­é¡µé¢å¾ˆå¸¸ç”¨ï¼š<strong>Elements</strong>è¿™é‡Œåˆ—å‡ºæ•´ä¸ªç½‘é¡µæºç ï¼Œå¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹cssæ ·å¼çš„ç»§æ‰¿æƒ…å†µã€å®¹å™¨çš„ç›¸äº’å…³ç³»ï¼Œç”šè‡³å¯ä»¥åŠ¨æ€ä¿®æ”¹æºç æŸ¥çœ‹æ•ˆæœã€‚<strong>Console</strong>ç±»ä¼¼è¿è¡ŒDjangoçš„å‘½ä»¤è¡Œã€‚å¦‚æœæµè§ˆå™¨è¿è¡Œç½‘é¡µæ—¶é‡åˆ°æ•…éšœï¼ˆæ¯”å¦‚<code>404 æœªæ‰¾åˆ°èµ„æº</code>ã€<code>403 æœåŠ¡å™¨é€šè®¯å¤±è´¥</code>ã€<code>500 æœåŠ¡å™¨å†…éƒ¨é”™è¯¯</code>ï¼‰ï¼Œéƒ½ä¼šåœ¨è¿™é‡Œæç¤ºã€‚ä»¥åè¿˜å¯ä»¥åœ¨JavaScriptä»£ç ä¸­ç”¨<code>console.log()</code>æŒ‡ä»¤å°†æ„Ÿå…´è¶£çš„å†…å®¹æ‰“å°åˆ°Consoleä¸­æŸ¥çœ‹ã€‚<strong>éå¸¸éå¸¸æœ‰ç”¨</strong>ã€‚</p></li><li><p>**print()**ï¼šå¾ˆå¤šè¯»è€…åœ¨å†™çº¯Pythonä»£ç æ—¶çŸ¥é“ç”¨<code>print()</code>æ¥æŸ¥æ‰¾bugï¼Œåˆ°Djangoä¸­åè€Œä¸ä¼šäº†ã€‚å…¶å®Djangoä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œåœ¨è§†å›¾å‡½æ•°ä¸­å†™çš„<code>print()</code>ä¼šæ‰“å°åˆ°å‘½ä»¤è¡Œä¸­ã€‚</p></li></ul><p>ä¾é è¿™ä¸‰ä¸ªå·¥å…·ï¼ŒåŸºæœ¬ä¸Šå°±èƒ½ç»™å‡º90%ä»¥ä¸Šçš„é”™è¯¯ä¿¡æ¯äº†ã€‚æ¥ä¸‹æ¥å°±æ˜¯æŠŠé”™è¯¯çš„å…³é”®è¯æ”¾åˆ°Googleã€Bingè¿™äº›åœ°æ–¹å»æœç´¢ç­”æ¡ˆäº†ã€‚</p><p>å†å¼ºè°ƒä¸€ä¸‹æ•²ä»£ç è¦ç»†å¿ƒã€‚æˆ‘å‘ç°å¾ˆå¤šè¯»è€…çš„bugéƒ½æ˜¯æºè‡ªäºæ‹¼å†™ã€ç¼ºè¡Œæ¼è¡Œè¿™ç§è®©äººæ²®ä¸§çš„é”™è¯¯ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« æˆ‘ä»¬é‡å†™äº†è§†å›¾ï¼Œç¼–å†™äº†ç®€å•çš„æ¨¡æ¿ï¼Œå’Œå‰é¢çš„æ¨¡å‹æˆåŠŸå…³è”èµ·æ¥ã€‚</p><p>ä¸‹ä¸€ç« å°†å­¦ä¹ ç¼–å†™ä¸€ä¸ªæ¼‚äº®çš„ç½‘é¡µæ¨¡æ¿ã€‚</p><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#100;&#117;&#115;&#x61;&#105;&#112;&#x68;&#111;&#x74;&#x6f;&#64;&#102;&#111;&#120;&#109;&#x61;&#105;&#x6c;&#46;&#x63;&#x6f;&#109;">&#100;&#117;&#115;&#x61;&#105;&#112;&#x68;&#111;&#x74;&#x6f;&#64;&#102;&#111;&#120;&#109;&#x61;&#105;&#x6c;&#46;&#x63;&#x6f;&#109;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--07.ä½¿ç”¨Bootstrapæ”¹å†™æ¨¡æ¿</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/07.shi-yong-bootstrap-gai-xie-mo-ban/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/07.shi-yong-bootstrap-gai-xie-mo-ban/</url>
      
        <content type="html"><![CDATA[<p><strong>æ³¨æ„ï¼šå­¦æœ¬ç« ä¹‹å‰è¯·æ£€æŸ¥ Django ç‰ˆæœ¬ï¼Œç¡®ä¿å®‰è£…çš„æ˜¯ Django 2 è€Œä¸æ˜¯ Django 3ï¼Œå¦åˆ™åé¢æ‰€æœ‰çš„ç« èŠ‚éƒ½ä¼šé‡åˆ° <code>staticfiles</code> æ— æ³•è½½å…¥çš„é”™è¯¯ã€‚</strong></p><blockquote><p>åœ¨è™šæ‹Ÿç¯å¢ƒä¸­è¾“å…¥ <code>pip list</code> å³å¯æŸ¥çœ‹ã€‚</p></blockquote><p>ä¸Šä¸€ç« æˆ‘ä»¬çš„ç½‘ç«™é¡µé¢å®åœ¨å¤ªç²—ç³™ï¼Œä½ è‚¯å®šä¸ä¼šæ‹¿æ¥åšçœŸæ­£çš„åšå®¢é¦–é¡µã€‚å› æ­¤è¿™ç« æˆ‘ä»¬è¦å€ŸåŠ©Bootstrapçš„åŠ›é‡ï¼Œæ”¹å†™ä¸€ä¸ªå¤§æ°”çš„åšå®¢ã€‚</p><h2 id="é…ç½®Bootstrap-4"><a href="#é…ç½®Bootstrap-4" class="headerlink" title="é…ç½®Bootstrap 4"></a>é…ç½®Bootstrap 4</h2><p><strong>Bootstrap</strong>æ˜¯ç”¨äºç½‘ç«™å¼€å‘çš„å¼€æºå‰ç«¯æ¡†æ¶ï¼ˆâ€œå‰ç«¯â€æŒ‡çš„æ˜¯å±•ç°ç»™æœ€ç»ˆç”¨æˆ·çš„ç•Œé¢ï¼‰ï¼Œå®ƒæä¾›å­—ä½“æ’å°ã€çª—ä½“ã€æŒ‰é’®ã€å¯¼èˆªåŠå…¶ä»–å„ç§ç»„ä»¶ï¼Œæ—¨åœ¨ä½¿åŠ¨æ€ç½‘é¡µå’ŒWebåº”ç”¨çš„å¼€å‘æ›´åŠ å®¹æ˜“ã€‚</p><p>Bootstrapæœ‰å‡ ä¸ªç‰ˆæœ¬éƒ½æ¯”è¾ƒæµè¡Œï¼Œ<strong>æˆ‘ä»¬é€‰æ‹©æœ€æ–°ç‰ˆæœ¬çš„Bootstrap 4ï¼š</strong><a href="https://getbootstrap.com/docs/4.1/getting-started/download/">ä¸‹è½½åœ°å€</a>ï¼Œå¹¶è§£å‹ã€‚</p><p>ç„¶ååœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»ºç›®å½•<code>static/bootstrap/</code>ï¼Œç”¨äºå­˜æ”¾Bootstrapé™æ€æ–‡ä»¶ã€‚<strong>é™æ€æ–‡ä»¶</strong>é€šå¸¸æŒ‡é‚£äº›ä¸ä¼šæ”¹å˜çš„æ–‡ä»¶ã€‚Bootstrapä¸­çš„cssã€jsæ–‡ä»¶ï¼Œå°±æ˜¯é™æ€æ–‡ä»¶ã€‚</p><p>æŠŠåˆšæ‰è§£å‹å‡ºæ¥çš„<code>css</code>å’Œ<code>js</code>ä¸¤ä¸ªæ–‡ä»¶å¤¹å¤åˆ¶è¿›å»ã€‚</p><p><strong>å› ä¸ºbootstrap.jsä¾èµ– jquery.js å’Œ popper.js æ‰èƒ½æ­£å¸¸è¿è¡Œï¼Œå› æ­¤è¿™ä¸¤ä¸ªæ–‡ä»¶æˆ‘ä»¬ä¹Ÿéœ€è¦ä¸€å¹¶ä¸‹è½½ä¿å­˜ã€‚</strong>é™„ä¸Šå®˜ç½‘ä¸‹è½½é“¾æ¥ï¼ˆè¿›å…¥ä¸‹è½½é¡µé¢ï¼Œå¤åˆ¶ç²˜è´´ä»£ç åˆ°æ–°æ–‡ä»¶å³å¯ï¼‰ï¼š</p><ul><li><a href="https://jquery.com/download/">jquery.js</a></li><li><a href="https://popper.js.org/">popper.js</a></li></ul><blockquote><p>2018-10-29 æ–°å¢ï¼š</p><p>ä¸æ¸…æ¥š<code>popper.js</code>å¦‚ä½•ä¸‹è½½çš„æˆ³è¿™ä¸ªé“¾æ¥ï¼š</p><p><code>https://unpkg.com/popper.js@1.14.4/dist/umd/popper.js</code></p><p>è¿›å»åé¡µé¢æ˜¾ç¤ºå¾ˆé•¿ä¸€æ®µä»£ç ï¼ŒæŠŠè¿™æ®µä»£ç å…¨éƒ¨æ‹·è´ï¼›åœ¨é¡¹ç›®ä¸­æ–°å»ºåå«popper.jsçš„æ–‡ä»¶ï¼ŒæŠŠåˆšæ‹·è´çš„ä»£ç å¤åˆ¶è¿›å»å°±å¯ä»¥äº†ã€‚å¾ˆå¤šå¼€æºjsæ–‡ä»¶éƒ½æ˜¯é€šè¿‡è¿™æ ·çš„æ–¹å¼ä¸‹è½½ã€‚</p></blockquote><p>ç°åœ¨æˆ‘ä»¬çš„<code>static/</code>ç›®å½•ç»“æ„åƒè¿™æ ·ï¼š</p><pre class="line-numbers language-none"><code class="language-none">my_blogâ”‚â”œâ”€articleâ””â”€my_blogâ”‚ ...â””â”€static    â””â”€bootstrap    â”‚   â”œâ”€css # æ–‡ä»¶å¤¹    â”‚   â””â”€js # æ–‡ä»¶å¤¹    â””â”€jquery    â”‚   â””â”€jquery-3.3.1.js # æ–‡ä»¶    â””â”€popper        â””â”€popper-1.14.4.js # æ–‡ä»¶<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å› ä¸ºåœ¨Djangoä¸­éœ€è¦æŒ‡å®šé™æ€æ–‡ä»¶çš„å­˜æ”¾ä½ç½®ï¼Œæ‰èƒ½å¤Ÿåœ¨æ¨¡æ¿ä¸­æ­£ç¡®å¼•ç”¨å®ƒä»¬ã€‚å› æ­¤åœ¨<code>settings.py</code>çš„æœ«å°¾åŠ ä¸Šï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_blog<span class="token operator">/</span>settings<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>STATICFILES_DIRS <span class="token operator">=</span> <span class="token punctuation">(</span>    os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>BASE_DIR<span class="token punctuation">,</span> <span class="token string">"static"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å†ç¡®è®¤ä¸€ä¸‹<code>settings.py</code>ä¸­æœ‰æ²¡æœ‰<code>STATIC_URL = &#39;/static/&#39;</code>å­—æ®µï¼Œå¦‚æœæ²¡æœ‰æŠŠå®ƒä¹ŸåŠ åœ¨åé¢ã€‚</p><h2 id="ç¼–å†™æ¨¡æ¿"><a href="#ç¼–å†™æ¨¡æ¿" class="headerlink" title="ç¼–å†™æ¨¡æ¿"></a>ç¼–å†™æ¨¡æ¿</h2><p>åœ¨æ ¹ç›®å½•ä¸‹çš„<code>templates/</code>ä¸­ï¼Œæ–°å»ºä¸‰ä¸ªæ–‡ä»¶ï¼š</p><ul><li><p><code>base.html</code>æ˜¯æ•´ä¸ªé¡¹ç›®çš„æ¨¡æ¿åŸºç¡€ï¼Œæ‰€æœ‰çš„ç½‘é¡µéƒ½ä»å®ƒç»§æ‰¿ï¼›</p></li><li><p><code>header.html</code>æ˜¯ç½‘é¡µé¡¶éƒ¨çš„å¯¼èˆªæ ï¼›</p></li><li><p><code>footer.html</code>æ˜¯ç½‘é¡µåº•éƒ¨çš„æ³¨è„šã€‚</p></li></ul><p>è¿™ä¸‰ä¸ªæ–‡ä»¶åœ¨æ¯ä¸ªé¡µé¢ä¸­é€šå¸¸éƒ½æ˜¯ä¸å˜çš„ï¼Œç‹¬ç«‹å‡ºæ¥å¯ä»¥é¿å…é‡å¤å†™åŒæ ·çš„ä»£ç ï¼Œæé«˜ç»´æŠ¤æ€§ã€‚</p><p>ç°åœ¨<code>templates\</code>çš„ç»“æ„åƒä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p><pre class="line-numbers language-none"><code class="language-none">templatesâ”‚â”œâ”€base.htmlâ”œâ”€header.htmlâ”œâ”€footer.htmlâ””â”€article    â””â”€list.html # ä¸Šä¸€ç« åˆ›å»ºçš„<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åŠ ä¸Šä¹‹å‰çš„<code>list.html</code>ï¼Œæ¥ä¸‹æ¥å°±è¦é‡æ–°å†™è¿™4ä¸ªæ–‡ä»¶äº†ã€‚</p><p>å› ä¸ºå‰ç«¯çŸ¥è¯†éå¸¸åšå¤§ç²¾æ·±ï¼Œå¹¶ä¸”ä¹Ÿä¸æ˜¯Djangoå­¦ä¹ çš„é‡ç‚¹ï¼Œæœ¬æ•™ç¨‹ä¸ä¼šå±•å¼€ç¯‡å¹…å»è®²ã€‚<strong>å¦‚æœä¹‹å‰æ²¡æ¥è§¦è¿‡å‰ç«¯çŸ¥è¯†ä¹Ÿæ²¡å…³ç³»ï¼Œè¿™é‡Œå¯ä»¥å…ˆå¤åˆ¶ç²˜è´´ï¼Œä¸å½±å“åé¢Djangoçš„å­¦ä¹ ã€‚</strong></p><p>ä½ å¯ä»¥è¯•ç€æ”¹å†™å…¶ä¸­çš„æŸæ®µä»£ç ï¼Œçœ‹çœ‹ä¼šå¯¹é¡µé¢äº§ç”Ÿä»€ä¹ˆæ ·çš„å½±å“ï¼›é‡åˆ°ä¸æ‡‚çš„å°±åœ¨<a href="https://getbootstrap.com/docs/4.1/getting-started/introduction/">Bootstrapå®˜æ–¹æ–‡æ¡£</a>æ‰¾ç­”æ¡ˆã€‚æ…¢æ…¢å°±ä¼šæ˜ç™½å®ƒçš„è¿è¡Œæœºåˆ¶ï¼Œæ¯•ç«ŸBootstrapçœŸçš„æ˜¯éå¸¸ç®€å•æ˜“ç”¨çš„å·¥å…·ã€‚</p><blockquote><p>2018-10-29 æ–°å¢ï¼š</p><p>Bootstrapæ˜¯éå¸¸ä¼˜ç§€çš„å‰ç«¯æ¡†æ¶ï¼Œä¸Šæ‰‹ç®€å•ï¼Œæ‰€ä»¥å¾ˆæµè¡Œã€‚</p><p>å®˜ç½‘æ˜¯æœ€æƒå¨çš„æ–‡æ¡£ã€‚ä½ å¯ä»¥åœ¨å®˜æ–¹ç½‘ç«™ä¸Šè¿›è¡Œç³»ç»Ÿçš„å­¦ä¹ ï¼š<a href="https://getbootstrap.com/docs/4.1/getting-started/introduction/">https://getbootstrap.com/docs/4.1/getting-started/introduction/</a></p><p>é€šç¯‡å»çœ‹Bootstrapæ–‡æ¡£ä¼šéå¸¸æ¯ç‡¥çš„ï¼Œå› æ­¤å»ºè®®ä½ å¯ä»¥åƒæŸ¥å­—å…¸ä¸€æ ·çš„ï¼Œéœ€è¦ç”¨å“ªä¸ªæ¨¡å—ï¼Œå°±åˆ°å®˜ç½‘ä¸Šæ‰¾ç›¸å…³çš„ä»£ç ï¼Œä¿®æ”¹ä¸€ä¸‹æ‹·è´åˆ°ä½ çš„é¡¹ç›®ä¸­å°±å¯ä»¥äº†ã€‚ç”¨å¤šäº†è‡ªç„¶ä¼šæ˜ç™½æ¯ä¸ªå­—æ®µçš„ä½œç”¨ã€‚</p></blockquote><p><strong>è¿™é‡Œä¼šä¸€æ¬¡æ€§å†™å¤§é‡ä»£ç ï¼Œä¸è¦ç€æ€¥æ…¢æ…¢çœ‹ï¼Œç†è§£äº†å°±å¾ˆç®€å•äº†ã€‚</strong></p><p>é¦–å…ˆå†™<code>base.html</code>ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/base.html<span class="token comment">&lt;!-- è½½å…¥é™æ€æ–‡ä»¶ --></span>&#123;% load staticfiles %&#125;<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- ç½‘ç«™ä¸»è¯­è¨€ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zh-cn<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- ç½‘ç«™é‡‡ç”¨çš„å­—ç¬¦ç¼–ç  --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- é¢„ç•™ç½‘ç«™æ ‡é¢˜çš„ä½ç½® --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>&#123;% block title %&#125;&#123;% endblock %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- å¼•å…¥bootstrapçš„cssæ–‡ä»¶ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>bootstrap/css/bootstrap.min.css<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- å¼•å…¥å¯¼èˆªæ  --></span>    &#123;% include 'header.html' %&#125;    <span class="token comment">&lt;!-- é¢„ç•™å…·ä½“é¡µé¢çš„ä½ç½® --></span>    &#123;% block content %&#125;&#123;% endblock content %&#125;    <span class="token comment">&lt;!-- å¼•å…¥æ³¨è„š --></span>    &#123;% include 'footer.html' %&#125;    <span class="token comment">&lt;!-- bootstrap.js ä¾èµ– jquery.js å’Œpopper.jsï¼Œå› æ­¤åœ¨è¿™é‡Œå¼•å…¥ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>jquery/jquery-3.3.1.js<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>popper/popper-1.14.4.js<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- å¼•å…¥bootstrapçš„jsæ–‡ä»¶ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>bootstrap/js/bootstrap.min.js<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ¨¡æ¿ä¸­è¦åŠ ä¸Š <code>&#123;% load staticfiles %&#125;</code> ä¹‹åï¼Œæ‰å¯ä½¿ç”¨ <code>&#123;% static 'path' %&#125;</code> å¼•ç”¨é™æ€æ–‡ä»¶ã€‚</li><li>HTMLè¯­æ³•ä¸­ï¼Œæ‰€æœ‰çš„å†…å®¹éƒ½è¢«æ ‡ç­¾åŒ…è£¹ï¼›æ ‡ç­¾åŠæ ‡ç­¾ä¸­çš„å±æ€§å¯ä»¥å¯¹å†…å®¹è¿›è¡Œæ’å°ã€è§£é‡Šè¯´æ˜ç­‰ä½œç”¨ã€‚</li><li><code>&lt;head&gt;&lt;/head&gt;</code>æ ‡ç­¾å†…åŒ…å«ç½‘é¡µçš„å…ƒæ•°æ®ï¼Œæ˜¯ä¸ä¼šåœ¨é¡µé¢å†…æ˜¾ç¤ºå‡ºæ¥çš„ã€‚<code>&lt;body&gt;&lt;/body&gt;</code>æ ‡ç­¾å†…æ‰æ˜¯ç½‘é¡µä¼šæ˜¾ç¤ºçš„å†…å®¹ã€‚</li><li>ç•™æ„Bootstrapçš„cssã€jsæ–‡ä»¶åˆ†åˆ«æ˜¯å¦‚ä½•å¼•å…¥çš„</li><li> jquery.js å’Œ popper.js è¦åœ¨ bootstrap.js å‰å¼•å…¥ã€‚</li></ul><p>ç„¶åæ˜¯<code>header.html</code>ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/header.html<span class="token comment">&lt;!-- å®šä¹‰å¯¼èˆªæ  --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>navbar navbar-expand-lg navbar-dark bg-dark<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- å¯¼èˆªæ å•†æ ‡ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>navbar-brand<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æˆ‘çš„åšå®¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- å¯¼èˆªå…¥å£ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>navbar-nav<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- æ¡ç›® --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav-link<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ–‡ç« <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ ‡ç­¾å†…çš„<code>class</code>å±æ€§æ˜¯Bootstrapæ ·å¼çš„å®šä¹‰æ–¹æ³•ã€‚è¯•ç€æ”¹å†™æˆ–åˆ é™¤å…¶ä¸­ä¸€äº›å†…å®¹ï¼Œè§‚å¯Ÿé¡µé¢çš„å˜åŒ–ã€‚</p><p>ç„¶åæ”¹å†™ä¹‹å‰çš„<code>list.html</code>ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/list.html<span class="token comment">&lt;!-- extendsè¡¨æ˜æ­¤é¡µé¢ç»§æ‰¿è‡ª base.html æ–‡ä»¶ --></span>&#123;% extends "base.html" %&#125;&#123;% load staticfiles %&#125;<span class="token comment">&lt;!-- å†™å…¥ base.html ä¸­å®šä¹‰çš„ title --></span>&#123;% block title %&#125;    é¦–é¡µ&#123;% endblock title %&#125;<span class="token comment">&lt;!-- å†™å…¥ base.html ä¸­å®šä¹‰çš„ content --></span>&#123;% block content %&#125;<span class="token comment">&lt;!-- å®šä¹‰æ”¾ç½®æ–‡ç« æ ‡é¢˜çš„divå®¹å™¨ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row mt-2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        &#123;% for article in articles %&#125;        <span class="token comment">&lt;!-- æ–‡ç« å†…å®¹ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-4 mb-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- å¡ç‰‡å®¹å™¨ --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card h-100<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- æ ‡é¢˜ --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; article.title &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- æ‘˜è¦ --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-body<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-text<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; article.body|slice:'100' &#125;&#125;...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- æ³¨è„š --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-footer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-primary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>é˜…è¯»æœ¬æ–‡<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        &#123;% endfor %&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>&#123;% endblock content %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ç•™æ„<code>&#123;% block title %&#125;</code>å’Œ<code>&#123;% block content %&#125;</code>æ˜¯å¦‚ä½•ä¸<code>base.html</code>ä¸­ç›¸å¯¹åº”èµ·æ¥çš„ã€‚</li><li>æ‘˜è¦ä¸­çš„<code>&#123;&#123; article.body|slice:'100' &#125;&#125;</code>å–å‡ºäº†æ–‡ç« çš„æ­£æ–‡ï¼›å…¶ä¸­çš„<code>|slice:&#39;100&#39;</code>æ˜¯Djangoçš„è¿‡æ»¤å™¨è¯­æ³•ï¼Œè¡¨ç¤ºå–å‡ºæ­£æ–‡çš„å‰100ä¸ªå­—ç¬¦ï¼Œé¿å…æ‘˜è¦å¤ªé•¿ã€‚</li></ul><p>æœ€åå†™å…¥<code>footer.html</code>ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">&#123;% load staticfiles %&#125;<span class="token comment">&lt;!-- Footer --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>py-3 bg-dark fixed-bottom<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>m-0 text-center text-white<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Copyright <span class="token entity named-entity" title="&copy;">&amp;copy;</span> www.dusaiphoto.com 2018<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å‘¼ï¼ŒçœŸæ˜¯ä¸€å¤§å †çš„ä¸œè¥¿å•Šã€‚</p><p><strong>è®©æˆ‘ä»¬æ¥æ‹ä¸€æ‹å‘ç”Ÿäº†ä»€ä¹ˆï¼š</strong></p><p>å½“æˆ‘ä»¬é€šè¿‡<code>url</code>è®¿é—®<code>list.html</code>æ—¶ï¼Œé¡¶éƒ¨çš„<code>&#123;% extends "base.html" %&#125;</code>å‘Šè¯‰Djangoï¼šâ€œè¿™ä¸ªæ–‡ä»¶æ˜¯ç»§æ‰¿<code>base.html</code>çš„ï¼Œä½ å»è°ƒç”¨å®ƒå§ã€‚â€</p><p>äºæ˜¯Djangoå°±è€è€å®å®å»æ¸²æŸ“<code>base.html</code>æ–‡ä»¶ï¼š</p><ul><li>å…¶ä¸­çš„<code>&#123;% include 'header.html' %&#125;</code>è¡¨æ˜è¿™é‡Œéœ€è¦åŠ å…¥<code>header.html</code>çš„å†…å®¹</li><li><code>&#123;% include 'footer.html' %&#125;</code>åŠ å…¥<code>footer.html</code>çš„å†…å®¹</li><li><code>&#123;% block content %&#125;&#123;% endblock content %&#125;</code>è¡¨æ˜è¿™é‡Œåº”è¯¥åŠ å…¥<code>list.html</code>ä¸­çš„å¯¹åº”å—çš„å†…å®¹</li></ul><h2 id="è¿è¡ŒæœåŠ¡å™¨"><a href="#è¿è¡ŒæœåŠ¡å™¨" class="headerlink" title="è¿è¡ŒæœåŠ¡å™¨"></a>è¿è¡ŒæœåŠ¡å™¨</h2><p>è€è§„çŸ©ï¼Œä¿å­˜å…¨éƒ¨æ–‡ä»¶ï¼Œè¿›å…¥è™šæ‹Ÿç¯å¢ƒï¼Œè¿è¡Œå¼€å‘æœåŠ¡å™¨ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥<code>http://127.0.0.1:8000/article/article-list/</code>ï¼Œçœ‹åˆ°å¦‚ä¸‹é¡µé¢ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20180916/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE32.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20180916/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE32.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ä¸€ä¸ªæ¼‚äº®çš„åšå®¢ç•Œé¢å°±è¿™æ ·å‡ºç°åœ¨çœ¼å‰ï¼Œéå¸¸ç¥å¥‡ã€‚</p><p><strong>å¦‚æœæŠ¥é”™ä¹Ÿä¸è¦ç€æ€¥ï¼Œç¨‹åºå‘˜å°±æ˜¯ä¸æ–­ä¸bugæ–—äº‰çš„ä¸€ä¸ªèŒä¸šã€‚</strong>ä»”ç»†æ£€æŸ¥Djangoç»™å‡ºçš„é”™è¯¯æç¤ºï¼Œä¿®å¤å®ƒï¼Œä½ ä¸€å®šè¡Œã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« æˆ‘ä»¬å¼•å…¥äº†å‰ç«¯æ¡†æ¶Bootstrap 4ï¼Œå€ŸåŠ©å®ƒé‡æ–°ç»„ç»‡äº†æ¨¡æ¿çš„ç»“æ„ï¼Œç¼–å†™äº†ä¸€ä¸ªæ¼‚äº®çš„åšå®¢ç½‘ç«™çš„é¦–é¡µã€‚</p><p>ä¸‹ä¸€ç« æˆ‘ä»¬å°†å­¦ä¹ ç¼–å†™æ–‡ç« è¯¦æƒ…é¡µé¢ã€‚</p><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#x64;&#x75;&#115;&#x61;&#x69;&#112;&#104;&#x6f;&#116;&#x6f;&#x40;&#102;&#111;&#x78;&#x6d;&#x61;&#105;&#x6c;&#46;&#99;&#111;&#x6d;">&#x64;&#x75;&#115;&#x61;&#x69;&#112;&#104;&#x6f;&#116;&#x6f;&#x40;&#102;&#111;&#x78;&#x6d;&#x61;&#105;&#x6c;&#46;&#99;&#111;&#x6d;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--08.ç¼–å†™æ–‡ç« è¯¦æƒ…é¡µé¢</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/08.bian-xie-wen-zhang-xiang-qing-ye-mian/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/08.bian-xie-wen-zhang-xiang-qing-ye-mian/</url>
      
        <content type="html"><![CDATA[<p>æœ‰äº†æ–‡ç« åˆ—è¡¨é¡µé¢åï¼Œå½“ç„¶è¿˜éœ€è¦è¯¦æƒ…é¡µé¢ï¼Œæ–¹ä¾¿ç”¨æˆ·å¯¹æŸä¸€ç¯‡æ„Ÿå…´è¶£çš„æ–‡ç« æ·±å…¥é˜…è¯»ã€‚</p><h2 id="ç¼–å†™è§†å›¾å‡½æ•°"><a href="#ç¼–å†™è§†å›¾å‡½æ•°" class="headerlink" title="ç¼–å†™è§†å›¾å‡½æ•°"></a>ç¼–å†™è§†å›¾å‡½æ•°</h2><p>æ‰“å¼€<code>article/views.py</code>ï¼Œå¢åŠ æ–‡ç« è¯¦æƒ…é¡µé¢çš„è§†å›¾å‡½æ•°<code>article_detail()</code>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># æ–‡ç« è¯¦æƒ…</span><span class="token keyword">def</span> <span class="token function">article_detail</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># å–å‡ºç›¸åº”çš„æ–‡ç« </span>    article <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token builtin">id</span><span class="token punctuation">)</span>    <span class="token comment"># éœ€è¦ä¼ é€’ç»™æ¨¡æ¿çš„å¯¹è±¡</span>    context <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token string">'article'</span><span class="token punctuation">:</span> article <span class="token punctuation">&#125;</span>    <span class="token comment"># è½½å…¥æ¨¡æ¿ï¼Œå¹¶è¿”å›contextå¯¹è±¡</span>    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'article/detail.html'</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>article_detail(request, id)</code>å‡½æ•°ä¸­å¤šäº†<code>id</code>è¿™ä¸ªå‚æ•°ã€‚<strong>æ³¨æ„æˆ‘ä»¬åœ¨å†™modelçš„æ—¶å€™å¹¶æ²¡æœ‰å†™å«åšidçš„å­—æ®µï¼Œ</strong>è¿™æ˜¯Djangoè‡ªåŠ¨ç”Ÿæˆçš„ç”¨äºç´¢å¼•æ•°æ®è¡¨çš„ä¸»é”®ï¼ˆPrimary Keyï¼Œå³pkï¼‰ã€‚æœ‰äº†å®ƒæ‰æœ‰åŠæ³•çŸ¥é“åˆ°åº•åº”è¯¥å–å‡ºå“ªç¯‡æ–‡ç« ã€‚</li><li><code>ArticlePost.objects.get(id=id)</code>æ„æ€æ˜¯åœ¨æ‰€æœ‰æ–‡ç« ä¸­ï¼Œå–å‡ºidå€¼ç›¸ç¬¦åˆçš„å”¯ä¸€çš„ä¸€ç¯‡æ–‡ç« ã€‚</li></ul><p>ç„¶åç¼–å†™<code>article/urls.py</code>ï¼Œé…ç½®è·¯ç”±åœ°å€ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>urls<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># æ–‡ç« è¯¦æƒ…</span>    path<span class="token punctuation">(</span><span class="token string">'article-detail/&lt;int:id>/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>article_detail<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'article_detail'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>&lt;int:id&gt;</code>ï¼šDjango2.0çš„<code>path</code>æ–°è¯­æ³•ç”¨**å°–æ‹¬å·&lt;&gt;**å®šä¹‰éœ€è¦ä¼ é€’çš„å‚æ•°ã€‚è¿™é‡Œéœ€è¦ä¼ é€’åå«<code>id</code>çš„æ•´æ•°åˆ°è§†å›¾å‡½æ•°ä¸­å»ã€‚</p><p><strong>é‡ç”³ä¸€ä¸‹è€ç‰ˆæœ¬çš„Djangoæ˜¯æ²¡æœ‰<code>path</code>è¯­æ³•çš„ã€‚</strong></p><h2 id="ç¼–å†™æ¨¡æ¿"><a href="#ç¼–å†™æ¨¡æ¿" class="headerlink" title="ç¼–å†™æ¨¡æ¿"></a>ç¼–å†™æ¨¡æ¿</h2><p>åœ¨<code>templates/article/</code>ä¸­æ–°å»º<code>detail.html</code>æ–‡ä»¶ï¼Œç¼–å†™å¦‚ä¸‹ä»£ç ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/detail.html<span class="token comment">&lt;!-- extendsè¡¨æ˜æ­¤é¡µé¢ç»§æ‰¿è‡ª base.html æ–‡ä»¶ --></span>&#123;% extends "base.html" %&#125;&#123;% load staticfiles %&#125;<span class="token comment">&lt;!-- å†™å…¥ base.html ä¸­å®šä¹‰çš„ title --></span>&#123;% block title %&#125;    æ–‡ç« è¯¦æƒ…&#123;% endblock title %&#125;<span class="token comment">&lt;!-- å†™å…¥ base.html ä¸­å®šä¹‰çš„ content --></span>&#123;% block content %&#125;<span class="token comment">&lt;!-- æ–‡ç« è¯¦æƒ… --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- æ ‡é¢˜åŠä½œè€… --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-12 mt-4 mb-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; article.title &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-12 alert alert-success<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä½œè€…ï¼š&#123;&#123; article.author &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- æ–‡ç« æ­£æ–‡ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-12<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>&#123;&#123; article.body &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>&#123;% endblock content %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>è¿™é‡Œæˆ‘ä»¬ç”¨<code>&#123;&#123; article.xxx &#125;&#125;</code>å–å‡ºäº†æ–‡ç« æ ‡é¢˜ã€ä½œè€…ä»¥åŠæ­£æ–‡ã€‚</strong></p><p>å‰é¢æˆ‘ä»¬å·²ç»é€šè¿‡åå°åˆ›å»ºäº†å‡ ç¯‡æ–‡ç« ï¼Œè¿™é‡Œå°†å–å‡ºidä¸º1çš„ä¸€ç¯‡æ–‡ç« æµ‹è¯•æ•ˆæœã€‚</p><p>è¿è¡Œå¼€å‘æœåŠ¡å™¨åï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥<code>http://127.0.0.1:8000/article/article-detail/1/</code>ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20180916/34.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20180916/34.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><h2 id="ä¼˜åŒ–ç½‘é¡µå…¥å£"><a href="#ä¼˜åŒ–ç½‘é¡µå…¥å£" class="headerlink" title="ä¼˜åŒ–ç½‘é¡µå…¥å£"></a>ä¼˜åŒ–ç½‘é¡µå…¥å£</h2><p>è™½ç„¶å·²ç»å®ç°äº†æ–‡ç« è¯¦æƒ…åŠŸèƒ½ï¼Œä½†æ˜¯é€šè¿‡è¾“å…¥urlè®¿é—®çš„æ–¹å¼å®åœ¨å¤ªä¸å‹å¥½ã€‚</p><p>æ”¹å†™<code>header.html</code>ï¼Œè®©ç”¨æˆ·å¯é€šè¿‡å¯¼èˆªæ å³ä¾§çš„<strong>æ–‡ç« </strong>é“¾æ¥è¿”å›é¦–é¡µï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/header.html...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>navbar-nav<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token comment">&lt;!-- æ”¹å†™äº†è¿™é‡Œçš„ href --></span>             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav-link<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>article:article_list<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ–‡ç« <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ³¨æ„çœ‹è¿™é‡Œhrefæ˜¯å¦‚ä½•æ”¹å†™çš„ï¼š</strong></p><ul><li><p>hrefå®šä¹‰äº†é“¾æ¥è·³è½¬çš„åœ°å€ã€‚</p></li><li><p><code>&#123;% url '...' %&#125;</code>æ˜¯Djangoè§„å®šçš„æ¨¡æ¿è§£è€¦è¯­æ³•ï¼Œç”¨å®ƒå¯ä»¥æ ¹æ®æˆ‘ä»¬åœ¨<code>urls.py</code>ä¸­è®¾ç½®çš„åå­—ï¼Œåå‘è§£æåˆ°å¯¹åº”çš„urlä¸­å»ã€‚</p></li></ul><p>å…³äºå…¶ä¸­çš„<code>&#39;article:article_list&#39;</code>çš„è§£é‡Šï¼š</p><ul><li>å‰é¢çš„<code>article</code>æ˜¯åœ¨é¡¹ç›®æ ¹ç›®å½•çš„<code>urls.py</code>ä¸­å®šä¹‰çš„appçš„åç§°</li><li>åé¢çš„<code>article_list</code>æ˜¯åœ¨appä¸­çš„<code>urls.py</code>ä¸­å®šä¹‰çš„å…·ä½“çš„è·¯ç”±åœ°å€</li></ul><p>é€šè¿‡è¿™æ ·çš„æ–¹æ³•å°±å°†é“¾æ¥è·³è½¬çš„æŒ‡å‘ç»™é…ç½®å¥½äº†ï¼Œåªè¦å¯¹åº”urlçš„åç§°ä¸å˜ï¼Œurlæœ¬èº«æ— è®ºæ€ä¹ˆå˜åŒ–ï¼ŒDjangoéƒ½å¯ä»¥è§£æåˆ°æ­£ç¡®çš„åœ°å€ï¼Œå¾ˆçµæ´»ã€‚</p><p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç›´æ¥åœ¨<code>href</code>ä¸­å†™å…¥urlçš„åœ°å€ï¼Œä½†æ˜¯ä¸€æ—¦urlæœ‰å˜åŒ–ï¼Œæ‰€æœ‰ç›¸å…³çš„é“¾æ¥éƒ½ä¼šå¤±æ•ˆï¼Œç»´æŠ¤æ€§ä¸å¥½ã€‚</p><p>ç„¶åå†æ”¹å†™<code>list.html</code>ï¼Œè®©ç”¨æˆ·å¯ç‚¹å‡»<strong>é˜…è¯»æœ¬æ–‡</strong>æŒ‰é’®è¿›å…¥æ–‡ç« è¯¦æƒ…ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/list.html...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-footer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- åŒæ ·æ”¹å†™ href --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>article:article_detail<span class="token punctuation">'</span> article.id %&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-primary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>é˜…è¯»æœ¬æ–‡<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ç•™æ„æ–‡ç« çš„idæ˜¯å¦‚ä½•ä¼ é€’çš„ï¼š</strong></p><ul><li>åœ¨<code>list.html</code>ä¸­ï¼Œé€šè¿‡<code>href=&quot;&#123;% url 'article:article_detail' article.id %&#125;&quot;</code>ï¼Œå°†idä¼ é€’ç»™<code>article/urls.py</code></li><li>åœ¨<code>article/urls.py</code>ä¸­ï¼Œé€šè¿‡<code>&lt;int:id&gt;</code>ä¼ é€’ç»™è§†å›¾å‡½æ•°<code>article_detail()</code></li><li>åœ¨è§†å›¾å‡½æ•°<code>article_detail()</code>ä¸­ï¼Œé€šè¿‡å½¢å‚<code>id</code>å–å¾—äº†æ–‡ç« çš„idå€¼ï¼Œå¹¶è¿›è¡Œå¤„ç†ï¼Œæœ€ç»ˆå®šä½äº†éœ€è¦è·å–çš„æ–‡ç« å¯¹è±¡</li></ul><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥é€šè¿‡é“¾æ¥è®¿é—®ç½‘ç«™ä¸Šçš„ä¸åŒé¡µé¢äº†ï¼Œè€Œä¸éœ€è¦æ‰‹åŠ¨è¾“å…¥urlã€‚å½“ç„¶è¿™ä¹Ÿæ˜¯ç°ä»£ç½‘ç«™çš„åŸºç¡€ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ç°åœ¨æˆ‘ä»¬ä¹Ÿæ‹¥æœ‰æŸ¥çœ‹æ–‡ç« è¯¦æƒ…çš„åŠŸèƒ½äº†ï¼Œå¹¶ä¸”ä¼˜åŒ–äº†ç½‘é¡µåˆ‡æ¢çš„ä½“éªŒã€‚</p><p>ä¸‹ä¸€ç« å°†å­¦ä¹ ä½¿ç”¨Markdownè¯­æ³•å¯¹æ–‡ç« æ­£æ–‡è¿›è¡Œæ’ç‰ˆã€‚</p><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#100;&#x75;&#x73;&#97;&#x69;&#x70;&#104;&#x6f;&#116;&#111;&#x40;&#102;&#x6f;&#120;&#109;&#97;&#x69;&#x6c;&#x2e;&#99;&#111;&#109;">&#100;&#x75;&#x73;&#97;&#x69;&#x70;&#104;&#x6f;&#116;&#111;&#x40;&#102;&#x6f;&#120;&#109;&#97;&#x69;&#x6c;&#x2e;&#99;&#111;&#109;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--09.ä½¿ç”¨Markdownä¹¦å†™æ–‡ç« </title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/09.shi-yong-markdown-shu-xie-wen-zhang/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/09.shi-yong-markdown-shu-xie-wen-zhang/</url>
      
        <content type="html"><![CDATA[<p>ä¸Šä¸€ç« æˆ‘ä»¬å®ç°äº†æ–‡ç« è¯¦æƒ…é¡µé¢ã€‚ä¸ºäº†è®©æ–‡ç« æ­£æ–‡èƒ½å¤Ÿè¿›è¡Œæ ‡é¢˜ã€åŠ ç²—ã€å¼•ç”¨ã€ä»£ç å—ç­‰ä¸åŒçš„æ’ç‰ˆï¼ˆåƒåœ¨Officeä¸­é‚£æ ·ï¼ï¼‰ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Markdownè¯­æ³•ã€‚</p><h2 id="å®‰è£…Markdown"><a href="#å®‰è£…Markdown" class="headerlink" title="å®‰è£…Markdown"></a>å®‰è£…Markdown</h2><p><strong>Markdown</strong>æ˜¯ä¸€ç§è½»é‡çº§çš„æ ‡è®°è¯­è¨€ï¼Œå®ƒå…è®¸äººä»¬â€œä½¿ç”¨æ˜“è¯»æ˜“å†™çš„çº¯æ–‡æœ¬æ ¼å¼ç¼–å†™æ–‡æ¡£ï¼Œç„¶åè½¬æ¢æˆæœ‰æ•ˆçš„æˆ–è€…HTMLæ–‡æ¡£ã€‚å»ºè®®è¯»è€…ä¸€å®šè¦èŠ±äº”åˆ†é’Ÿæ—¶é—´ç†Ÿæ‚‰ä¸€ä¸‹Markdownçš„è¯­æ³•ï¼Œç†Ÿç»ƒåç å­—æ•ˆç‡ä¸€å®šä¼šå¤§å¹…æé«˜ã€‚</p><p>å…³äºMarkdownè¯­æ³•çœ‹è¿™é‡Œï¼š<a href="https://coding.net/help/doc/project/markdown.html">Markdown è¯­æ³•ä»‹ç»</a></p><p>å®‰è£…markdownä¹Ÿå¾ˆç®€å•ï¼šè¿›å…¥è™šæ‹Ÿç¯å¢ƒï¼Œè¾“å…¥æŒ‡ä»¤<code>pip install markdown</code>å³å¯ã€‚</p><h2 id="ä½¿ç”¨Markdown"><a href="#ä½¿ç”¨Markdown" class="headerlink" title="ä½¿ç”¨Markdown"></a>ä½¿ç”¨Markdown</h2><p>ä¸ºäº†å°†Markdownè¯­æ³•ä¹¦å†™çš„æ–‡ç« æ¸²æŸ“ä¸ºHTMLæ–‡æœ¬ï¼Œé¦–å…ˆæ”¹å†™<code>article/views.py</code>çš„<code>article_detail()</code>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># å¼•å…¥markdownæ¨¡å—</span><span class="token keyword">import</span> markdown<span class="token keyword">def</span> <span class="token function">article_detail</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    article <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token builtin">id</span><span class="token punctuation">)</span>    <span class="token comment"># å°†markdownè¯­æ³•æ¸²æŸ“æˆhtmlæ ·å¼</span>    article<span class="token punctuation">.</span>body <span class="token operator">=</span> markdown<span class="token punctuation">.</span>markdown<span class="token punctuation">(</span>article<span class="token punctuation">.</span>body<span class="token punctuation">,</span>        extensions<span class="token operator">=</span><span class="token punctuation">[</span>        <span class="token comment"># åŒ…å« ç¼©å†™ã€è¡¨æ ¼ç­‰å¸¸ç”¨æ‰©å±•</span>        <span class="token string">'markdown.extensions.extra'</span><span class="token punctuation">,</span>        <span class="token comment"># è¯­æ³•é«˜äº®æ‰©å±•</span>        <span class="token string">'markdown.extensions.codehilite'</span><span class="token punctuation">,</span>        <span class="token punctuation">]</span><span class="token punctuation">)</span>    context <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token string">'article'</span><span class="token punctuation">:</span> article <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'article/detail.html'</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»£ç ä¸­<code>markdown.markdown</code>è¯­æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯éœ€è¦æ¸²æŸ“çš„æ–‡ç« æ­£æ–‡<code>article.body</code>ï¼›ç¬¬äºŒä¸ªå‚æ•°è½½å…¥äº†å¸¸ç”¨çš„è¯­æ³•æ‰©å±•ï¼Œ<code>markdown.extensions.extra</code>ä¸­åŒ…æ‹¬äº†ç¼©å†™ã€è¡¨æ ¼ç­‰æ‰©å±•ï¼Œ<code>markdown.extensions.codehilite</code>åˆ™æ˜¯åé¢è¦ä½¿ç”¨çš„ä»£ç é«˜äº®æ‰©å±•ã€‚</p><p>ç„¶åï¼Œä¿®æ”¹<code>templates/article/detail.html</code>ä¸­æœ‰å…³æ–‡ç« æ­£æ–‡çš„éƒ¨åˆ†ï¼š</p><pre class="line-numbers language-none"><code class="language-none">templates&#x2F;article&#x2F;detail.html...# åœ¨ article.body ååŠ ä¸Š |safe è¿‡æ»¤å™¨&lt;p&gt;&#123;&#123; article.body|safe &#125;&#125;&lt;&#x2F;p&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Djangoå‡ºäºå®‰å…¨çš„è€ƒè™‘ï¼Œä¼šå°†è¾“å‡ºçš„HTMLä»£ç è¿›è¡Œè½¬ä¹‰ï¼Œ<strong>è¿™ä½¿å¾—<code>article.body</code>ä¸­æ¸²æŸ“çš„HTMLæ–‡æœ¬æ— æ³•æ­£å¸¸æ˜¾ç¤ºã€‚</strong>ç®¡é“ç¬¦<code>|</code>æ˜¯Djangoä¸­è¿‡æ»¤å™¨çš„å†™æ³•ï¼Œè€Œ<code>|safe</code>å°±ç±»ä¼¼ç»™<code>article.body</code>è´´äº†ä¸€ä¸ªæ ‡ç­¾ï¼Œè¡¨ç¤ºè¿™ä¸€æ®µå­—ç¬¦ä¸éœ€è¦è¿›è¡Œè½¬ä¹‰äº†ã€‚</p><p>è¿™æ ·å°±æŠŠMarkdownè¯­æ³•é…ç½®å¥½äº†ã€‚</p><p>å¯åŠ¨æœåŠ¡å™¨ï¼Œåœ¨åå°ä¸­æ–°å½•å…¥ä¸€æ¡ç”¨markdownè¯­æ³•ä¹¦å†™çš„æ–‡ç« ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># å›½é£Â·å‘¨å—Â·å…³é›</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">**</span>å…³å…³é›é¸ ï¼Œåœ¨æ²³ä¹‹æ´²ã€‚çªˆçª•æ·‘å¥³ï¼Œå›å­å¥½é€‘ã€‚<span class="token operator">**</span>å‚å·®è‡èœï¼Œå·¦å³æµä¹‹ã€‚çªˆçª•æ·‘å¥³ï¼Œå¯¤å¯æ±‚ä¹‹ã€‚<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">+</span> åˆ—è¡¨ä¸€<span class="token operator">+</span> åˆ—è¡¨äºŒ    <span class="token operator">+</span> åˆ—è¡¨äºŒ<span class="token operator">-</span><span class="token number">1</span>    <span class="token operator">+</span> åˆ—è¡¨äºŒ<span class="token operator">-</span><span class="token number">2</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>â€‹```python<span class="token keyword">def</span> <span class="token function">article_detail</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>article <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token builtin">id</span><span class="token punctuation">)</span><span class="token comment"># å°†markdownè¯­æ³•æ¸²æŸ“æˆhtmlæ ·å¼</span>article<span class="token punctuation">.</span>body <span class="token operator">=</span> markdown<span class="token punctuation">.</span>markdown<span class="token punctuation">(</span>article<span class="token punctuation">.</span>body<span class="token punctuation">,</span>extensions<span class="token operator">=</span><span class="token punctuation">[</span><span class="token comment"># åŒ…å« ç¼©å†™ã€è¡¨æ ¼ç­‰å¸¸ç”¨æ‰©å±•</span><span class="token string">'markdown.extensions.extra'</span><span class="token punctuation">,</span><span class="token comment"># è¯­æ³•é«˜äº®æ‰©å±•</span><span class="token string">'markdown.extensions.codehilite'</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">)</span>context <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token string">'article'</span><span class="token punctuation">:</span> article <span class="token punctuation">&#125;</span><span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'article/detail.html'</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span>â€‹```<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>æ³¨æ„</strong>ï¼šç›´æ¥å¤åˆ¶æœ¬æ®µMarkdownæ–‡å­—åˆ°ä½ çš„é¡¹ç›®ä¸­ï¼Œå¯èƒ½å¯¼è‡´è¯­æ³•é«˜äº®ä¸æ­£å¸¸ï¼ˆçŒœæµ‹æ˜¯æ¢è¡Œç¬¦å¯¼è‡´çš„ï¼Ÿï¼‰ã€‚å»ºè®®è¯»è€…æ‰‹åŠ¨è¾“å…¥ã€‚æ„Ÿè°¢è¯»è€…<a href="https://www.dusaiphoto.com/my-notifications/mark-as-read/20/451/article/#F215">micronuthsçš„åé¦ˆ</a>ã€‚</p></blockquote><p>è¿”å›æ–‡ç« è¯¦æƒ…ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20180917/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE42.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20180917/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE42.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>å¾ˆå¥½ï¼Œä½†æ˜¯ä»£ç å—è¿˜æ˜¯ä¸æ€ä¹ˆå¥½çœ‹ã€‚</p><p>å†™æŠ€æœ¯æ–‡ç« æ²¡æœ‰ä»£ç é«˜äº®æ€ä¹ˆè¡Œã€‚ç»§ç»­åŠªåŠ›ã€‚</p><h2 id="ä»£ç é«˜äº®"><a href="#ä»£ç é«˜äº®" class="headerlink" title="ä»£ç é«˜äº®"></a>ä»£ç é«˜äº®</h2><p>åœ¨<code>static</code>ç›®å½•ä¸­æ–°å»ºä¸€ä¸ªç›®å½•<code>md_css/</code>ï¼Œä¸€ä¼šå„¿æ”¾ç½®ä»£ç é«˜äº®çš„æ ·å¼æ–‡ä»¶ã€‚</p><p>é‡æ–°æ‰“å¼€ä¸€ä¸ªå‘½ä»¤è¡Œçª—å£ï¼Œ<strong>è¿›å…¥è™šæ‹Ÿç¯å¢ƒï¼Œå®‰è£…Pygmentsï¼š<code>pip install Pygments</code></strong></p><p>Pygmentsæ˜¯ä¸€ç§é€šç”¨è¯­æ³•é«˜äº®æ˜¾ç¤ºå™¨ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆç¾åŒ–ä»£ç å—çš„æ ·å¼æ–‡ä»¶ã€‚</p><p>åœ¨å‘½ä»¤è¡Œä¸­è¿›å…¥åˆšæ‰æ–°å»ºçš„<code>md_css</code>ç›®å½•ä¸­ï¼Œè¾“å…¥PygmentsæŒ‡ä»¤ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pygmentize -S monokai -f html -a .codehilite <span class="token operator">></span> monokai.css<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„, ç”Ÿæˆå‘½ä»¤ä¸­çš„ -a å‚æ•°éœ€è¦ä¸çœŸå®é¡µé¢ä¸­çš„ CSS Selector ç›¸å¯¹åº”ï¼Œå³<code>.codehilite</code>è¿™ä¸ªå­—æ®µåœ¨æœ‰äº›ç‰ˆæœ¬ä¸­åº”å†™ä¸º<code>.highlight</code>ã€‚å¦‚æœåé¢çš„ä»£ç é«˜äº®æ— æ•ˆï¼Œå¾ˆå¯èƒ½æ˜¯è¿™é‡Œå‡ºäº†é—®é¢˜ã€‚</strong></p><p>å›è½¦åæ£€æŸ¥ä¸€ä¸‹ï¼Œåœ¨<code>md_css</code>ç›®å½•ä¸­æ˜¯å¦è‡ªåŠ¨ç”Ÿæˆäº†ä¸€ä¸ªå«<code>monokai.css</code>çš„æ–‡ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªæ·±è‰²èƒŒæ™¯çš„é«˜äº®æ ·å¼æ–‡ä»¶ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨<code>base.html</code>ä¸­å¼•ç”¨è¿™ä¸ªæ–‡ä»¶ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/base.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    ...    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>bootstrap/css/bootstrap.min.css<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- å¼•å…¥monikai.css --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>md_css/monokai.css<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡æ–°å¯åŠ¨æœåŠ¡å™¨ï¼Œé¡ºåˆ©çš„è¯çœ‹åˆ°å¦‚ä¸‹ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20180917/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE41.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20180917/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE41.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>é™¤äº†Monokaiè¿™ä¸ªæ·±è‰²çš„æ ·å¼å¤–ï¼ŒPygmentsè¿˜å†…ç½®äº†å¾ˆå¤šå…¶ä»–çš„æ ·å¼ï¼Œè¿™ä¸ªå°±çœ‹å–œå¥½é€‰æ‹©äº†ã€‚</p><p>å„ç§ä¸åŒæ ·å¼å¯ä»¥åœ¨è¿™é‡Œå‚ç…§ï¼š<a href="https://github.com/richleland/pygments-css">pygments-css</a></p><hr><h3 id="æ•…éšœæ’æŸ¥"><a href="#æ•…éšœæ’æŸ¥" class="headerlink" title="æ•…éšœæ’æŸ¥"></a>æ•…éšœæ’æŸ¥</h3><blockquote><p>æ­¤èŠ‚ 2018/12/22 æ–°å¢</p></blockquote><p>ä»£ç é«˜äº®è¿™é‡Œé‡åˆ°é—®é¢˜çš„è¯»è€…æ¯”è¾ƒå¤šï¼Œå› æ­¤å±•å¼€è®²ä¸€ä¸‹å¦‚ä½•æ’æŸ¥é—®é¢˜ã€‚å…¶ä»–åœ°æ–¹é‡åˆ°ç±»ä¼¼é—®é¢˜ä¹Ÿå¯ä»¥è¿™æ ·å»åšã€‚</p><p>é¦–å…ˆè¯·æŸ¥çœ‹ç½‘é¡µçš„æºä»£ç ï¼šç”¨<a href="https://www.google.com/chrome/">Chrome</a>æµè§ˆå™¨çš„åŒå­¦æŒ‰<strong>Ctrl+U</strong>ï¼Œå…¶ä»–æµè§ˆå™¨è¯·è‡ªè¡ŒæŸ¥æ‰¾å¿«æ·é”®ã€‚</p><p><strong>æ‰¾åˆ°æ­£æ–‡ä¸­ä¹¦å†™ä»£ç å—çš„éƒ¨åˆ†ã€‚æ­£å¸¸æƒ…å†µä¸‹è¿™éƒ¨åˆ†çš„æºä»£ç åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</strong></p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181222/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE116.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181222/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE116.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><ul><li><p>ä»£ç å—è¢«<code>&lt;div class=&quot;codehilite&quot;&gt;</code>åŒ…è£¹ï¼ˆæˆ–è€…<code>&lt;div class=&quot;highlight&quot;&gt;</code>ï¼‰</p></li><li><p>ä»£ç å†…å®¹è¢«å„ç§ä¸åŒçš„<code>&lt;span&gt;</code>åŒ…è£¹</p></li></ul><p><strong>æ ¹æ®æºä»£ç ï¼Œå¯èƒ½å‡ºç°çš„é—®é¢˜åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š</strong></p><ul><li><p>å¦‚æœçœ‹åˆ°çš„æºä»£ç è·Ÿä¸Šé¢çš„å¾ˆåƒï¼Œå¾ˆå¯èƒ½æ˜¯æ¨¡æ¿å‡ºäº†é—®é¢˜</p></li><li><p>å¦‚æœçœ‹åˆ°çš„æºä»£ç è·Ÿä¸Šé¢çš„åŒºåˆ«å¾ˆå¤§ï¼Œå¾ˆå¯èƒ½æ˜¯è§†å›¾å‡ºäº†é—®é¢˜</p></li></ul><p>ä¸‹é¢åˆ†åˆ«è¯´è¯´æ€ä¹ˆè§£å†³ã€‚</p><p><strong>å¦‚æœæ¨¡æ¿å‡ºäº†é—®é¢˜ï¼š</strong></p><ul><li><p>æ£€æŸ¥<code>monokai.css</code>è¿™ä¸ªæ–‡ä»¶æ˜¯å¦æ­£å¸¸è½½å…¥ã€‚æ£€æŸ¥æ–¹æ³•å°±æ˜¯ç›´æ¥ç‚¹å‡»ç½‘é¡µæºä»£ç ä¸­çš„<code>&lt;link&gt;</code>å¼•ç”¨é“¾æ¥ï¼Œçœ‹æ˜¯å¦æ­£å¸¸ã€‚</p><ul><li><p>å¦‚æœé“¾æ¥æ­£å¸¸ï¼Œçœ‹ä¸€ä¸‹æ¯è¡Œå¼€å¤´å­—æ®µæ˜¯<code>.codehilite</code>è¿˜æ˜¯<code>highlight</code>ï¼Œç¡®ä¿å’ŒåŒ…è£¹ä»£ç å—çš„å­—æ®µç›¸å¯¹åº”</p></li><li><p>å¦‚æœé“¾æ¥ä¸æ­£å¸¸ï¼ŒæŸ¥çœ‹<code>settings.py</code>ä¸­æ˜¯å¦å¿˜è®°å†™<code>STATIC_URL</code>æˆ–è€…<code>STATICFILES_DIRS</code>å­—æ®µ</p></li></ul></li><li><p>è¿›å…¥æµè§ˆå™¨å¼€å‘è€…æ¨¡å¼ï¼ŒæŸ¥çœ‹<code>monokai.css</code>æ ·å¼æ˜¯å¦è¢«åˆ«çš„æ ·å¼æ‰€è¦†ç›–ã€‚Chromeè¯·æŒ‰<strong>F12</strong>æˆ–è€…<strong>Ctrl+Shift+I</strong></p></li><li><p>æœ€åæ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼Œé‡å¯æœåŠ¡å™¨</p></li></ul><p><strong>å¦‚æœè§†å›¾å‡ºäº†é—®é¢˜ï¼š</strong></p><ul><li><p>é‡æ–°å®‰è£… markdown å’Œ pygmentsï¼Œå¸è½½æŒ‡ä»¤æ˜¯<code>pip uninstall xxx</code></p></li><li><p>æ³¨é‡Šæ‰<code>markdown.extensions.extra</code>æˆ–è€…<code>markdown.extensions.codehilite</code>ï¼Œåˆ·æ–°ç½‘é¡µæºä»£ç çœ‹çœ‹æ˜¯å¦æœ‰å˜åŒ–ã€‚å¦‚æœæ²¡æœ‰å˜åŒ–è¯´æ˜æ‰©å±•æ²¡æœ‰æ­£ç¡®è½½å…¥</p></li><li><p>æœ€åæ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼Œé‡å¯æœåŠ¡å™¨</p></li></ul><p><strong>ç‰¹åˆ«æé†’markdownä¸­ä»£ç å—çš„ä¹¦å†™ï¼š</strong></p><ul><li><p>å¼€å¤´ï¼šå•ç‹¬ä¸€è¡Œã€‚ä¸‰ä¸ªç‚¹ç¬¦ï¼ˆè‹±æ–‡è¾“å…¥æ³•æ—¶ï¼ŒTabé”®ä¸Šé¢é‚£ä¸ªé”®ï¼‰ï¼Œåç´§è·Ÿpythonè¿™ä¸ªå•è¯</p></li><li><p>æ­£æ–‡ï¼šå³ä»£ç æœ¬èº«ã€‚ç¼©è¿›è¯·ç”¨4ä¸ªç©ºæ ¼</p></li><li><p>ç»“å°¾ï¼šå•ç‹¬ä¸€è¡Œã€‚è¿˜æ˜¯ä¸‰ä¸ªç‚¹ç¬¦</p></li></ul><p>é‡åˆ°å‡ ä¸ªè¯»è€…éƒ½æ˜¯å› ä¸ºä¹¦å†™çš„é—®é¢˜ï¼Œæ‰¾äº†ä¸€ä¸ªä¸Šåˆçš„Bugï¼Œç—›ä¸æ¬²ç”Ÿâ€¦</p><p>å¦‚æœä»¥ä¸Šæ­¥éª¤è¿˜æ²¡è§£å†³ä½ çš„é—®é¢˜ï¼Œä¸å¦¨æš‚æ—¶è·³è¿‡è¿™ä¸€éƒ¨åˆ†ï¼Œä¸å½±å“åé¢çš„å­¦ä¹ ã€‚</p><h2 id="è‡ªå®šä¹‰æ ·å¼"><a href="#è‡ªå®šä¹‰æ ·å¼" class="headerlink" title="è‡ªå®šä¹‰æ ·å¼"></a>è‡ªå®šä¹‰æ ·å¼</h2><blockquote><p>æ­¤èŠ‚ 2019/6/1 æ–°å¢</p></blockquote><p>å¾ˆå¤šè¯»è€…æ³¨æ„åˆ°åšä¸»çš„Markdownæ–‡ç« æ ·å¼ä¼¼ä¹æ¯”<code>pygments</code>ç”Ÿæˆçš„æ ·å¼è¦æ¼‚äº®ä¸€äº›ã€‚</p><p>ç¡®å®æ˜¯è¿™æ ·çš„ã€‚<code>pygments</code>æä¾›çš„æ ·å¼æ¯”è¾ƒåŸºç¡€ï¼Œæ»¡è¶³ä¸äº†å„ä½å¤§ä½¬åƒå¥‡ç™¾æ€ªçš„éœ€æ±‚ï¼Œå› æ­¤éœ€è¦å¯¹æ–‡ç« æ ·å¼è¿›è¡Œæ·±åº¦å®šåˆ¶ã€‚</p><p>å®šåˆ¶çš„æ–¹æ³•å¾ˆå¤šã€‚é¦–å…ˆä½ åº”è¯¥æ³¨æ„åˆ°äº†ï¼Œ<code>pygments</code>ç”Ÿæˆçš„å…¶å®å°±æ˜¯<strong>æ™®é€šçš„cssæ–‡ä»¶</strong>è€Œå·²ï¼Œæºç ä¹Ÿä¸å¤æ‚ï¼Œä¼šä¸€ç‚¹ç‚¹cssåŸºç¡€å°±èƒ½çœ‹æ‡‚ã€‚ä½ å®Œå…¨å¯ä»¥è‡ªç”±çš„æ”¹åŠ¨æºç ï¼Œå˜æ¢é¢œè‰²ã€å­—é—´è·ã€ç»™ä»£ç å—åŠ åœ†è§’ã€å¢åŠ å›¾ç‰‡é˜´å½±ï¼Œéƒ½éšä¾¿ä½ ã€‚</p><p>å¦ä¸€ä¸ªç»å¸¸è¢«è¯»è€…é—®åˆ°çš„æ˜¯ï¼Œ<code>pygments</code>çš„è¡¨æ ¼æ ·å¼å¤ªéš¾çœ‹äº†ï¼Œè‡ªå·±ä»é›¶å®šåˆ¶è¡¨æ ¼æ ·å¼åˆå¤ªéº»çƒ¦ï¼Œæ€ä¹ˆåŠï¼Ÿåšä¸»çš„å¤„ç†åŠæ³•å·äº†ä¸ªæ‡’ï¼Œåœ¨é¡µé¢ä¸­ç”¨<code>Jquery</code>åŠ¨æ€åŠ è½½äº†<code>Bootstrap</code>çš„è¡¨æ ¼æ ·å¼ï¼Œå°±åƒè¿™æ ·ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'div#article_body table'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'table table-bordered'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'div#article_body thead'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'thead-light'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¾ˆæ–¹ä¾¿å°±å¾—åˆ°æ¼‚äº®çš„è¡¨æ ¼ã€‚</p><blockquote><p>æ³¨æ„è¿™é‡Œåªæ˜¯ç¤ºä¾‹ï¼Œç…§æ¬ä»£ç å¯èƒ½ä¼šæœ‰é”™è¯¯ã€‚Jqueryåé¢æ‰ä¼šè®²åˆ°ï¼Œè¯»è€…ä¸æ‡‚çš„å¯å…ˆæŸ¥é˜…ä¸€ç‚¹åŸºç¡€çŸ¥è¯†ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« å¼•è¿›äº†Markdownè¯­æ³•ä»¥åŠä»£ç é«˜äº®æ‰©å±•ï¼Œä»æ­¤å¯ä»¥å†™æ’ç‰ˆæ¼‚äº®çš„æ–‡ç« æ­£æ–‡äº†ã€‚</p><p>ä¸‹ä¸€ç« å°†å­¦ä¹ å¦‚ä½•åˆ›å»ºä¸€ç¯‡æ–°çš„æ–‡ç« ã€‚</p><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#100;&#x75;&#115;&#97;&#105;&#x70;&#104;&#x6f;&#116;&#x6f;&#64;&#x66;&#111;&#120;&#x6d;&#x61;&#105;&#108;&#46;&#99;&#111;&#109;">&#100;&#x75;&#115;&#97;&#105;&#x70;&#104;&#x6f;&#116;&#x6f;&#64;&#x66;&#111;&#120;&#x6d;&#x61;&#105;&#108;&#46;&#99;&#111;&#109;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--10.å‘å¸ƒæ–°çš„æ–‡ç« </title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/10.fa-bu-xin-de-wen-zhang/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/10.fa-bu-xin-de-wen-zhang/</url>
      
        <content type="html"><![CDATA[<p>å‰é¢æˆ‘ä»¬å·²ç»å­¦ä¼šå¦‚ä½•ç”¨Markdownè¯­æ³•ä¹¦å†™æ–‡ç« äº†ã€‚</p><p>ä½†æ˜¯è¿˜æœ‰é—®é¢˜å‘€ã€‚ä¹‹å‰å†™æ–‡ç« éƒ½æ˜¯åœ¨åå°ä¸­è¿›è¡Œçš„ï¼Œ<strong>ä¸‡ä¸€æœ‰åˆ«çš„æ™®é€šç”¨æˆ·ä¹Ÿè¦å‘è¡¨æ–‡ç« æ€ä¹ˆåŠï¼Ÿä¸‡ä¸€æˆ‘æƒ³æ‹“å±•äº›åå°ä¸­æ²¡æœ‰çš„æäº¤éªŒè¯åŠŸèƒ½åˆæ€ä¹ˆåŠï¼Ÿ</strong></p><p>æœ¬ç« å³è®²è¿°å¦‚ä½•åœ¨å‰å°ä¸­æäº¤æ–°çš„æ–‡ç« ï¼Œä»¥ä¾¿æ»¡è¶³å¼€å‘è€…å„ç§å„æ ·çš„<em>ç‰¹æ®Šéœ€æ±‚</em>ã€‚</p><h2 id="Formsè¡¨å•ç±»"><a href="#Formsè¡¨å•ç±»" class="headerlink" title="Formsè¡¨å•ç±»"></a>Formsè¡¨å•ç±»</h2><p><strong>åœ¨HTMLä¸­ï¼Œè¡¨å•æ˜¯åœ¨ <code>&lt;form&gt;...&lt;/form&gt;</code> ä¸­çš„ä¸€äº›å…ƒç´ </strong>ï¼Œå®ƒå…è®¸è®¿å®¢åšç±»ä¼¼è¾“å…¥æ–‡æœ¬ã€é€‰æ‹©é€‰é¡¹ã€æ“ä½œå¯¹è±¡æˆ–ç©ºé—´ç­‰åŠ¨ä½œï¼Œç„¶åå‘é€è¿™äº›ä¿¡æ¯åˆ°æœåŠ¡ç«¯ã€‚ä¸€äº›è¡¨å•ç•Œé¢å…ƒç´ ï¼ˆæ–‡æœ¬æ¡†æˆ–å¤é€‰æ¡†ï¼‰éå¸¸ç®€å•å¹¶å†…ç½®åœ¨HTMLä¸­ï¼Œè€Œå…¶ä»–ä¼šå¤æ‚äº›ï¼šåƒå¼¹å‡ºæ—¥æœŸé€‰æ‹©ç­‰æ“ä½œæ§ä»¶ã€‚</p><p>å¤„ç†è¡¨å•æ˜¯ä¸€ä»¶æŒºå¤æ‚çš„äº‹æƒ…ã€‚æƒ³æƒ³çœ‹Djangoçš„adminï¼Œè®¸å¤šä¸åŒç±»å‹çš„æ•°æ®å¯èƒ½éœ€è¦åœ¨ä¸€å¼ è¡¨å•ä¸­å‡†å¤‡æ˜¾ç¤ºï¼Œæ¸²æŸ“æˆHTMLï¼Œä½¿ç”¨æ–¹ä¾¿çš„ç•Œé¢è¿›è¡Œç¼–è¾‘ï¼Œä¼ åˆ°æœåŠ¡å™¨ï¼ŒéªŒè¯å’Œæ¸…ç†æ•°æ®ï¼Œç„¶åä¿å­˜æˆ–è·³è¿‡è¿›è¡Œä¸‹ä¸€æ­¥å¤„ç†ã€‚</p><p>Djangoçš„è¡¨å•åŠŸèƒ½å¯ä»¥ç®€åŒ–ä¸Šè¿°å·¥ä½œçš„å¤§éƒ¨åˆ†å†…å®¹ï¼Œå¹¶ä¸”ä¹Ÿèƒ½æ¯”å¤§å¤šæ•°ç¨‹åºå‘˜è‡ªå·±ç¼–å†™ä»£ç å»å®ç°æ¥çš„æ›´å®‰å…¨ã€‚</p><p><strong>Djangoè¡¨å•ç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶æ˜¯ <code>Form</code>ç±»</strong>ï¼Œå®ƒèƒ½å¤Ÿæè¿°ä¸€å¼ è¡¨å•å¹¶å†³å®šå®ƒå¦‚ä½•å·¥ä½œåŠå‘ˆç°ã€‚</p><p>è¦ä½¿ç”¨<code>Form</code>ç±»ä¹Ÿå¾ˆç®€å•ï¼Œéœ€è¦åœ¨<code>article/</code>ä¸­åˆ›å»º<code>forms.py</code>æ–‡ä»¶ï¼Œå¹¶å†™å…¥å¦‚ä¸‹ä»£ç ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>forms<span class="token punctuation">.</span>py<span class="token comment"># å¼•å…¥è¡¨å•ç±»</span><span class="token keyword">from</span> django <span class="token keyword">import</span> forms<span class="token comment"># å¼•å…¥æ–‡ç« æ¨¡å‹</span><span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> ArticlePost<span class="token comment"># å†™æ–‡ç« çš„è¡¨å•ç±»</span><span class="token keyword">class</span> <span class="token class-name">ArticlePostForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        <span class="token comment"># æŒ‡æ˜æ•°æ®æ¨¡å‹æ¥æº</span>        model <span class="token operator">=</span> ArticlePost        <span class="token comment"># å®šä¹‰è¡¨å•åŒ…å«çš„å­—æ®µ</span>        fields <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'body'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»£ç ä¸­<code>ArticlePostForm</code>ç±»ç»§æ‰¿äº†Djangoçš„è¡¨å•ç±»<code>forms.ModelForm</code>ï¼Œå¹¶åœ¨ç±»ä¸­å®šä¹‰äº†å†…éƒ¨ç±»<code>class Meta</code>ï¼ˆä¹‹å‰æåˆ°è¿‡ï¼Œ<a href="https://www.dusaiphoto.com/article/article-detail/11/">è¿˜è®°å¾—å—</a>ï¼‰ï¼ŒæŒ‡æ˜äº†æ•°æ®æ¨¡å‹çš„æ¥æºï¼Œä»¥åŠè¡¨å•ä¸­åº”è¯¥åŒ…å«æ•°æ®æ¨¡å‹çš„å“ªäº›å­—æ®µã€‚</p><p>åœ¨<code>ArticlePost</code>æ¨¡å‹ä¸­ï¼Œ<code>created</code>å’Œ<code>updated</code>å­—æ®µä¸ºè‡ªåŠ¨ç”Ÿæˆï¼Œä¸éœ€è¦å¡«å…¥ï¼›<code>author</code>å­—æ®µæš‚æ—¶å›ºå®šä¸ºid=1çš„ç®¡ç†å‘˜ç”¨æˆ·ï¼Œä¹Ÿä¸ç”¨å¡«å…¥ï¼›å‰©ä¸‹çš„<code>title</code>å’Œ<code>body</code>å°±æ˜¯è¡¨å•éœ€è¦å¡«å…¥çš„å†…å®¹äº†ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæ”¹å†™<code>article/views.py</code>ï¼Œæ·»åŠ ä¸€ä¸ªè§†å›¾å‡½æ•°ä»¥å¤„ç†å†™æ–‡ç« çš„è¯·æ±‚ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># å¼•å…¥redirecté‡å®šå‘æ¨¡å—</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render<span class="token punctuation">,</span> redirect<span class="token comment"># å¼•å…¥HttpResponse</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>http <span class="token keyword">import</span> HttpResponse<span class="token comment"># å¼•å…¥åˆšæ‰å®šä¹‰çš„ArticlePostFormè¡¨å•ç±»</span><span class="token keyword">from</span> <span class="token punctuation">.</span>forms <span class="token keyword">import</span> ArticlePostForm<span class="token comment"># å¼•å…¥Useræ¨¡å‹</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>models <span class="token keyword">import</span> User<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># å†™æ–‡ç« çš„è§†å›¾</span><span class="token keyword">def</span> <span class="token function">article_create</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æäº¤æ•°æ®</span>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">"POST"</span><span class="token punctuation">:</span>        <span class="token comment"># å°†æäº¤çš„æ•°æ®èµ‹å€¼åˆ°è¡¨å•å®ä¾‹ä¸­</span>        article_post_form <span class="token operator">=</span> ArticlePostForm<span class="token punctuation">(</span>data<span class="token operator">=</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">)</span>        <span class="token comment"># åˆ¤æ–­æäº¤çš„æ•°æ®æ˜¯å¦æ»¡è¶³æ¨¡å‹çš„è¦æ±‚</span>        <span class="token keyword">if</span> article_post_form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment"># ä¿å­˜æ•°æ®ï¼Œä½†æš‚æ—¶ä¸æäº¤åˆ°æ•°æ®åº“ä¸­</span>            new_article <span class="token operator">=</span> article_post_form<span class="token punctuation">.</span>save<span class="token punctuation">(</span>commit<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>            <span class="token comment"># æŒ‡å®šæ•°æ®åº“ä¸­ id=1 çš„ç”¨æˆ·ä¸ºä½œè€…</span>            <span class="token comment"># å¦‚æœä½ è¿›è¡Œè¿‡åˆ é™¤æ•°æ®è¡¨çš„æ“ä½œï¼Œå¯èƒ½ä¼šæ‰¾ä¸åˆ°id=1çš„ç”¨æˆ·</span>            <span class="token comment"># æ­¤æ—¶è¯·é‡æ–°åˆ›å»ºç”¨æˆ·ï¼Œå¹¶ä¼ å…¥æ­¤ç”¨æˆ·çš„id</span>            new_article<span class="token punctuation">.</span>author <span class="token operator">=</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>            <span class="token comment"># å°†æ–°æ–‡ç« ä¿å­˜åˆ°æ•°æ®åº“ä¸­</span>            new_article<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment"># å®Œæˆåè¿”å›åˆ°æ–‡ç« åˆ—è¡¨</span>            <span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">"article:article_list"</span><span class="token punctuation">)</span>        <span class="token comment"># å¦‚æœæ•°æ®ä¸åˆæ³•ï¼Œè¿”å›é”™è¯¯ä¿¡æ¯</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"è¡¨å•å†…å®¹æœ‰è¯¯ï¼Œè¯·é‡æ–°å¡«å†™ã€‚"</span><span class="token punctuation">)</span>    <span class="token comment"># å¦‚æœç”¨æˆ·è¯·æ±‚è·å–æ•°æ®</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token comment"># åˆ›å»ºè¡¨å•ç±»å®ä¾‹</span>        article_post_form <span class="token operator">=</span> ArticlePostForm<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># èµ‹å€¼ä¸Šä¸‹æ–‡</span>        context <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token string">'article_post_form'</span><span class="token punctuation">:</span> article_post_form <span class="token punctuation">&#125;</span>        <span class="token comment"># è¿”å›æ¨¡æ¿</span>        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'article/create.html'</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ†æä¸€ä¸‹ä¸Šé¢çš„ä»£ç ã€‚å½“è§†å›¾å‡½æ•°æ¥æ”¶åˆ°ä¸€ä¸ªå®¢æˆ·ç«¯çš„<code>request</code>è¯·æ±‚æ—¶ï¼Œé¦–å…ˆæ ¹æ®<code>request.method</code>åˆ¤æ–­ç”¨æˆ·æ˜¯è¦<strong>æäº¤æ•°æ®ï¼ˆPOSTï¼‰ã€è¿˜æ˜¯è¦è·å–æ•°æ®ï¼ˆGETï¼‰</strong>ï¼š</p><ul><li><p>å¦‚æœç”¨æˆ·æ˜¯<strong>æäº¤æ•°æ®</strong>ï¼Œå°†POSTç»™æœåŠ¡å™¨çš„è¡¨å•æ•°æ®èµ‹äº<code>article_post_form</code>å®ä¾‹ã€‚ç„¶åä½¿ç”¨Djangoå†…ç½®çš„æ–¹æ³•<code>.is_valid()</code>åˆ¤æ–­æäº¤çš„æ•°æ®æ˜¯å¦æ»¡è¶³æ¨¡å‹çš„è¦æ±‚ã€‚</p><ul><li><p>å¦‚æœ<strong>æ»¡è¶³è¦æ±‚</strong>ï¼Œä¿å­˜è¡¨å•ä¸­çš„æ•°æ®ï¼ˆä½†æ˜¯<code>commit=False</code>æš‚æ—¶ä¸æäº¤åˆ°æ•°æ®åº“ï¼Œå› ä¸º<code>author</code>è¿˜æœªæŒ‡å®šï¼‰ï¼Œå¹¶æŒ‡å®š<code>author</code>ä¸ºid=1çš„ç®¡ç†å‘˜ç”¨æˆ·ã€‚ç„¶åæäº¤åˆ°æ•°æ®åº“ï¼Œå¹¶é€šè¿‡<code>redirect</code>è¿”å›æ–‡ç« åˆ—è¡¨ã€‚<code>redirect</code>å¯é€šè¿‡urlåœ°å€çš„åå­—ï¼Œåå‘è§£æåˆ°å¯¹åº”çš„urlã€‚</p></li><li><p>å¦‚æœ<strong>ä¸æ»¡è¶³è¦æ±‚</strong>ï¼Œåˆ™è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²**â€è¡¨å•å†…å®¹æœ‰è¯¯ï¼Œè¯·é‡æ–°å¡«å†™ã€‚â€**ï¼Œå‘Šè¯‰ç”¨æˆ·å‡ºç°äº†ä»€ä¹ˆé—®é¢˜ã€‚</p></li></ul></li><li><p>å¦‚æœç”¨æˆ·æ˜¯<strong>è·å–æ•°æ®</strong>ï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºçš„è¡¨å•ç±»å¯¹è±¡ï¼Œæä¾›ç»™ç”¨æˆ·å¡«å†™ã€‚</p></li></ul><p>å…¶å®é€»è¾‘å¹¶ä¸å¤æ‚ï¼Œä¸æ˜ç™½çš„è¯»è€…è¯·é€å¥ç†è§£ã€‚</p><p>Djangoå®˜æ–¹æ–‡æ¡£å¯¹Formç±»åšäº†è¯¦ç»†çš„è¯´æ˜ï¼š</p><p><code>Form</code>å®ä¾‹å¯ä»¥<strong>ç»‘å®š</strong>åˆ°æ•°æ®ï¼Œä¹Ÿå¯ä»¥<strong>ä¸ç»‘å®š</strong>æ•°æ®ã€‚</p><ul><li>å¦‚æœ<strong>ç»‘å®š</strong>åˆ°æ•°æ®ï¼Œå°±èƒ½å¤ŸéªŒè¯è¯¥æ•°æ®å¹¶å°†è¡¨å•å‘ˆç°ä¸ºHTMLå¹¶æ˜¾ç¤ºæ•°æ®ã€‚</li><li>å¦‚æœå®ƒ<strong>æœªç»‘å®š</strong>ï¼Œåˆ™æ— æ³•è¿›è¡ŒéªŒè¯ï¼ˆå› ä¸ºæ²¡æœ‰è¦éªŒè¯çš„æ•°æ®ï¼ï¼‰ï¼Œä½†ä»ç„¶å¯ä»¥å°†ç©ºç™½è¡¨å•å‘ˆç°ä¸ºHTMLã€‚</li></ul><p>è¦å°†æ•°æ®ç»‘å®šåˆ°è¡¨å•ï¼Œå°±å°†æ•°æ®ä½œä¸ºå­—å…¸ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™<code>Form</code>ç±»æ„é€ å‡½æ•°ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json">>>> data = <span class="token punctuation">&#123;</span>'subject'<span class="token operator">:</span> 'hello'<span class="token punctuation">,</span>...         'message'<span class="token operator">:</span> 'Hi there'<span class="token punctuation">,</span>...         'sender'<span class="token operator">:</span> 'foo@example.com'<span class="token punctuation">,</span>...         'cc_myself'<span class="token operator">:</span> True<span class="token punctuation">&#125;</span>>>> f = ContactForm(data)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>Form</code>å¯¹è±¡çš„ä¸»è¦ä»»åŠ¡æ˜¯éªŒè¯æ•°æ®ã€‚ä½¿ç”¨ç»‘å®šåçš„ <code>Form</code>å®ä¾‹ï¼Œè°ƒç”¨<code>is_valid()</code>æ–¹æ³•éªŒè¯å¹¶è¿”å›æŒ‡å®šæ•°æ®æ˜¯å¦æœ‰æ•ˆçš„å¸ƒå°”å€¼ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json">>>> data = <span class="token punctuation">&#123;</span>'subject'<span class="token operator">:</span> 'hello'<span class="token punctuation">,</span>...         'message'<span class="token operator">:</span> 'Hi there'<span class="token punctuation">,</span>...         'sender'<span class="token operator">:</span> 'foo@example.com'<span class="token punctuation">,</span>...         'cc_myself'<span class="token operator">:</span> True<span class="token punctuation">&#125;</span>>>> f = ContactForm(data)>>> f.is_valid()True<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è®©æˆ‘ä»¬å°è¯•ä¸€äº›æ— æ•ˆçš„æ•°æ®ã€‚<code>subject</code>ä¸ºç©ºï¼ˆé”™è¯¯ï¼Œå› ä¸ºé»˜è®¤æƒ…å†µä¸‹éœ€è¦æ‰€æœ‰å­—æ®µï¼‰ï¼Œå¹¶ä¸”<code>sender</code>ä¸æ˜¯æœ‰æ•ˆçš„ç”µå­é‚®ä»¶åœ°å€:</p><pre class="line-numbers language-json" data-language="json"><code class="language-json">>>> data = <span class="token punctuation">&#123;</span>'subject'<span class="token operator">:</span> ''<span class="token punctuation">,</span>...         'message'<span class="token operator">:</span> 'Hi there'<span class="token punctuation">,</span>...         'sender'<span class="token operator">:</span> 'invalid email address'<span class="token punctuation">,</span>...         'cc_myself'<span class="token operator">:</span> True<span class="token punctuation">&#125;</span>>>> f = ContactForm(data)>>> f.is_valid()False<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…³äºFormsç±»çš„è¯¦ç»†è§£é‡Šçœ‹è¿™é‡Œï¼š<a href="https://docs.djangoproject.com/zh-hans/2.1/ref/forms/api/">The Forms API</a></p><p><strong>è¿™é‡Œç‰¹åˆ«æé†’Djangoä¸­çš„ç¼©è¿›ä¸èƒ½å¤Ÿç©ºæ ¼å’Œtabé”®æ··ç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</strong>ç”±äºä¸åŒçš„ç¼–è¾‘å™¨å¯¹tabçš„æ˜¾ç¤ºä¸å°½ç›¸åŒï¼Œå› æ­¤ä½ åº”è¯¥åšæŒä½¿ç”¨ç©ºæ ¼é”®ç¼©è¿›ã€‚</p><blockquote><p>å¤§å¤šæ•°æ–‡æœ¬ç¼–è¾‘å™¨å¯ä»¥è‡ªåŠ¨å°†tabè½¬æ¢ä¸ºç©ºæ ¼ï¼Œè¯·åˆç†è®¾ç½®ã€‚</p></blockquote><p>å†™å¥½è§†å›¾ä¹‹åï¼Œå°±éœ€è¦å†™æ¨¡æ¿æ–‡ä»¶äº†ã€‚åœ¨<code>templates/article/</code>ä¸­åˆ›å»º<code>create.html</code>ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/create.html<span class="token comment">&lt;!-- extendsè¡¨æ˜æ­¤é¡µé¢ç»§æ‰¿è‡ª base.html æ–‡ä»¶ --></span>&#123;% extends "base.html" %&#125; &#123;% load staticfiles %&#125;<span class="token comment">&lt;!-- å†™å…¥ base.html ä¸­å®šä¹‰çš„ title --></span>&#123;% block title %&#125; å†™æ–‡ç«  &#123;% endblock title %&#125;<span class="token comment">&lt;!-- å†™å…¥ base.html ä¸­å®šä¹‰çš„ content --></span>&#123;% block content %&#125;<span class="token comment">&lt;!-- å†™æ–‡ç« è¡¨å• --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-12<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!-- æäº¤æ–‡ç« çš„è¡¨å• --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- Djangoä¸­éœ€è¦POSTæ•°æ®çš„åœ°æ–¹éƒ½å¿…é¡»æœ‰csrf_token --></span>                &#123;% csrf_token %&#125;                <span class="token comment">&lt;!-- æ–‡ç« æ ‡é¢˜ --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token comment">&lt;!-- æ ‡ç­¾ --></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ–‡ç« æ ‡é¢˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                    <span class="token comment">&lt;!-- æ–‡æœ¬æ¡† --></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- æ–‡ç« æ­£æ–‡ --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>body<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ–‡ç« æ­£æ–‡<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                    <span class="token comment">&lt;!-- æ–‡æœ¬åŒºåŸŸ --></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>body<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>body<span class="token punctuation">"</span></span> <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>12<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- æäº¤æŒ‰é’® --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-primary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å®Œæˆ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>&#123;% endblock content %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>htmlæ–‡ä»¶è¿˜æ˜¯ä¸€å¦‚æ—¢å¾€çš„é•¿ã€‚<strong>å†é‡å¤ä¸€æ¬¡ï¼Œçœ‹ä¸æ‡‚htmlæ–‡ä»¶è¯­æ³•ä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œå…ˆç…§ç€æŠ„ä¸€éï¼Œä»¥åå†æ…¢æ…¢ç†è§£ï¼Œä¸å½±å“ç›®å‰Djangoçš„å­¦ä¹ ã€‚</strong></p><p>å¯¹å…¶ä¸­çš„æ–°å†…å®¹è¿›è¡Œå®¡è§†ï¼š</p><ul><li><p><code>&lt;form&gt;..&lt;/form&gt;</code>æ ‡ç­¾ä¸­çš„å†…å®¹å°±æ˜¯éœ€è¦æäº¤çš„è¡¨å•ã€‚<code>method=&quot;post&quot;</code>æŒ‡å®šäº†è¡¨å•æäº¤çš„æ–¹å¼ä¸ºPOSTï¼ˆä¸è§†å›¾å‡½æ•°ä¸­çš„<code>request.method</code>ç›¸è”ç³»ï¼‰ï¼›<code>action=&quot;.&quot;</code>æŒ‡å®šäº†è¡¨å•æäº¤çš„åœ°å€ä¸ºé»˜è®¤çš„å½“å‰urlã€‚</p></li><li><p>å…³äº<code>&#123;% csrf_token %&#125;</code>ï¼Œå®ƒæ˜¯Djangoä¸­ä¸€ä¸ªä¸ç½‘ç»œå®‰å…¨ç›¸å…³çš„ä¸­é—´ä»¶éªŒè¯ã€‚ç›®å‰æˆ‘ä»¬æš‚æ—¶ä¸å»æ·±ç©¶å®ƒçš„å®ç°ï¼Œ<strong>åªéœ€è¦çŸ¥é“è¡¨å•ä¸­å¿…é¡»åŒ…å«å®ƒå°±å¯ä»¥äº†</strong>ï¼Œå¦åˆ™å°†ä¼šå¾—åˆ°ä¸€ä¸ª403é”™è¯¯ã€‚</p></li><li><p><code>&lt;input&gt;</code>å’Œ<code>&lt;textarea&gt;</code>æ ‡ç­¾ä¸­çš„<code>name=&#39;&#39;</code>å±æ€§æŒ‡å®šäº†å½“å‰æ–‡æœ¬æ¡†æäº¤çš„æ•°æ®çš„åç§°ï¼Œå®ƒå¿…é¡»ä¸è¡¨å•ç±»ä¸­çš„å­—æ®µåç§°å¯¹åº”ï¼Œå¦åˆ™æœåŠ¡å™¨æ— æ³•å°†å­—æ®µå’Œæ•°æ®æ­£ç¡®çš„å¯¹åº”èµ·æ¥ã€‚</p></li></ul><p>æœ€åè€è§„çŸ©ï¼Œåœ¨<code>article/urls.py</code>ä¸­å¢åŠ ä¸€ä¸ªå†™æ–‡ç« çš„urlåœ°å€ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>urls<span class="token punctuation">.</span>pyurlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token comment"># å†™æ–‡ç« </span>    path<span class="token punctuation">(</span><span class="token string">'article-create/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>article_create<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'article_create'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¤§åŠŸå‘Šæˆäº†ï¼Œä¸è¦ç€æ€¥ï¼Œå…ˆå–å£æ°´ï¼Œä¸‡ä¸€æœ‰bugåˆå¾—å¿™æ´»åŠå¤©äº†ã€‚<strong>å¦‚æœæŠ¥é”™ä¹Ÿä¸è¦æ…Œå¼ ï¼Œå¼€å‘è¿‡ç¨‹ä¸€å®šæ˜¯æ›²æŠ˜çš„ï¼Œè€å¿ƒçœ‹çœ‹Djangoç»™å‡ºçš„é”™è¯¯æç¤ºï¼Œçº¿ç´¢å°±åœ¨å…¶ä¸­ã€‚</strong></p><p>ä¿å­˜ä¿®æ”¹å¹¶è¿è¡ŒæœåŠ¡å™¨ï¼Œåœ°å€æ ä¸­è¾“å…¥ï¼š<code>http://127.0.0.1:8000/article/article-create/</code>ï¼Œçœ‹åˆ°å¦‚ä¸‹ç•Œé¢ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20180926/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE49.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20180926/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE49.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>å¾ˆå¥½ï¼Œä¼¼ä¹æ­£å¸¸å·¥ä½œèµ·æ¥äº†ã€‚æ¥ç€éšä¾¿è¾“å…¥äº›<a href="https://www.dusaiphoto.com/article/article-detail/20/">Markdownè¯­æ³•çš„æ–‡ç« </a>ï¼Œæµ‹è¯•åŠŸèƒ½æ˜¯å¦æ­£å¸¸ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20180926/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE52.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20180926/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE52.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ç‚¹å‡»<strong>å®Œæˆ</strong>æŒ‰é’®åï¼Œé¡µé¢ä¼šå›åˆ°æ–‡ç« åˆ—è¡¨ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20180926/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE53.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20180926/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE53.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>åˆšæ‰æäº¤çš„æ–‡ç« ç¥å¥‡çš„å‡ºç°åœ¨åˆ—è¡¨ä¸­äº†ã€‚</p><p>ç‚¹å‡»<strong>é˜…è¯»æœ¬æ–‡</strong>æŒ‰é’®ï¼Œè¿›å…¥æ–‡ç« è¯¦æƒ…é¡µé¢ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20180926/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE54.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20180926/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE54.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>å‡ºç°äº†å…·æœ‰<strong>Markdown</strong>è¯­æ³•çš„ä¼˜ç¾çš„æ–‡ç« ã€‚</p><p>æ˜¯ä¸æ˜¯éå¸¸æœ‰æˆå°±æ„Ÿå‘¢ï¼Ÿ</p><p>åˆ«æ¿€åŠ¨ï¼Œè¿˜æœ‰ä¸€äº›æ”¶å°¾å·¥ä½œéœ€è¦åšã€‚</p><h2 id="ä¼˜åŒ–å†™æ–‡ç« å…¥å£"><a href="#ä¼˜åŒ–å†™æ–‡ç« å…¥å£" class="headerlink" title="ä¼˜åŒ–å†™æ–‡ç« å…¥å£"></a>ä¼˜åŒ–å†™æ–‡ç« å…¥å£</h2><p>ä¸ä¹‹å‰ç±»ä¼¼ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å¯¼èˆªæ ä¸­è®¾ç½®ä¸€ä¸ª<strong>å†™æ–‡ç« </strong>çš„å…¥å£ï¼Œä¼˜åŒ–ä½¿ç”¨ä½“éªŒã€‚</p><p>å°†ä¸‹åˆ—ä»£ç åŠ å…¥åˆ°<code>templates/header.html</code>ä¸­ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav-link<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>article:article_create<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å†™æ–‡ç« <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è¯»è€…æ˜¯å¦æ¸…æ¥šï¼Œä¸Šé¢çš„ä»£ç åº”è¯¥æ”¾ç½®åœ¨ä»€ä¹ˆä½ç½®å‘¢ï¼Ÿ</p><p>ä¿å­˜ååˆ·æ–°æµè§ˆå™¨ç•Œé¢ï¼Œ<strong>å¯¼èˆªæ </strong>æœ‰äº†å¦‚ä¸‹å˜åŒ–ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20180926/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE55.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20180926/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE55.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ç‚¹å‡»<strong>å†™æ–‡ç« </strong>æŒ‰é’®ï¼Œå°±å¯ä»¥è¿›å…¥å†™æ–°æ–‡ç« çš„é¡µé¢äº†ï¼Œä»æ­¤å†ä¹Ÿä¸ç”¨æ‰‹åŠ¨è¾“å…¥ç¹ççš„urlåœ°å€äº†ã€‚</p><p>ä¸–ç•Œæ˜¯å¤šä¹ˆçš„ç¾å¥½ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« å­¦ä¹ äº†ä½¿ç”¨Djangoçš„è¡¨å•ç±»ï¼Œå®Œæˆäº†æäº¤æ–°æ–‡ç« çš„åŸºæœ¬åŠŸèƒ½ã€‚å½“ç„¶ç›®å‰æš‚æ—¶è¿˜æ²¡æœ‰çœŸæ­£å°†æ–‡ç« å’Œç™»å½•çš„ç”¨æˆ·å…³è”èµ·æ¥ï¼›ç­‰åˆ°å­¦ä¹ äº†ç”¨æˆ·ç®¡ç†çš„çŸ¥è¯†ï¼Œå†å›å¤´æ¥å¤„ç†è¿™éƒ¨åˆ†çš„å†…å®¹ã€‚</p><p>ä¸‹ä¸€ç« ç»§ç»­å­¦ä¹ å¦‚ä½•åˆ é™¤ä¸€ç¯‡æ–‡ç« ã€‚</p><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#x64;&#x75;&#x73;&#x61;&#105;&#x70;&#104;&#111;&#116;&#x6f;&#x40;&#102;&#x6f;&#x78;&#x6d;&#97;&#105;&#108;&#46;&#99;&#111;&#x6d;">&#x64;&#x75;&#x73;&#x61;&#105;&#x70;&#104;&#111;&#116;&#x6f;&#x40;&#102;&#x6f;&#x78;&#x6d;&#97;&#105;&#108;&#46;&#99;&#111;&#x6d;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--12.æ›´æ–°æ–‡ç« </title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/12.geng-xin-wen-zhang/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/12.geng-xin-wen-zhang/</url>
      
        <content type="html"><![CDATA[<p>ç›®å‰ä¸ºæ­¢æˆ‘ä»¬å·²ç»å®Œæˆäº†æ–‡ç« çš„æ–°å»ºã€åˆ é™¤ä»¥åŠæŸ¥çœ‹ï¼Œè¿˜å‰©æœ€åä¸€é¡¹ï¼Œå³å¯¹å·²ç»å®Œæˆçš„æ–‡ç« è¿›è¡Œä¿®æ”¹ã€‚</p><p><strong>å®é™…ä¸Šä¿®æ”¹æ–‡ç« ä¸æ–°å»ºæ–‡ç« æœ‰ç‚¹ç±»ä¼¼</strong>ï¼Œä¸åŒçš„åœ°æ–¹æœ‰ä¸¤ç‚¹ï¼š</p><ul><li>ä¿®æ”¹æ˜¯åœ¨åŸæœ‰æ–‡ç« çš„åŸºç¡€ä¸Šï¼Œå› æ­¤éœ€è¦ä¼ é€’ <strong>id</strong> æŒ‡æ˜å…·ä½“éœ€è¦ä¿®æ”¹çš„æ–‡ç« </li><li>åŠ è½½é¡µé¢æ—¶éœ€è¦å°†æ—§çš„å†…å®¹ä½œä¸ºé»˜è®¤å€¼å¡«å†™åˆ°è¡¨å•ä¸­ï¼Œå› æ­¤éœ€è¦å°†æ–‡ç« å¯¹è±¡ä¼ é€’åˆ°<code>html</code>ä¸­</li></ul><p>æŒ‰ç…§è¿™ä¸ªæ€è·¯ï¼Œæ¥ä¸‹æ¥å…ˆå†™è§†å›¾å‡½æ•°ã€‚</p><h2 id="è§†å›¾å‡½æ•°"><a href="#è§†å›¾å‡½æ•°" class="headerlink" title="è§†å›¾å‡½æ•°"></a>è§†å›¾å‡½æ•°</h2><p>åœ¨<code>ariticle/views.py</code>ä¸­å¢åŠ ä¿®æ”¹æ–‡ç« çš„è§†å›¾å‡½æ•°<code>article_update()</code>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># æ›´æ–°æ–‡ç« </span><span class="token keyword">def</span> <span class="token function">article_update</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    æ›´æ–°æ–‡ç« çš„è§†å›¾å‡½æ•°    é€šè¿‡POSTæ–¹æ³•æäº¤è¡¨å•ï¼Œæ›´æ–°titileã€bodyå­—æ®µ    GETæ–¹æ³•è¿›å…¥åˆå§‹è¡¨å•é¡µé¢    idï¼š æ–‡ç« çš„ id    """</span>    <span class="token comment"># è·å–éœ€è¦ä¿®æ”¹çš„å…·ä½“æ–‡ç« å¯¹è±¡</span>    article <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token builtin">id</span><span class="token punctuation">)</span>    <span class="token comment"># åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ä¸º POST æäº¤è¡¨å•æ•°æ®</span>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">"POST"</span><span class="token punctuation">:</span>        <span class="token comment"># å°†æäº¤çš„æ•°æ®èµ‹å€¼åˆ°è¡¨å•å®ä¾‹ä¸­</span>        article_post_form <span class="token operator">=</span> ArticlePostForm<span class="token punctuation">(</span>data<span class="token operator">=</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">)</span>        <span class="token comment"># åˆ¤æ–­æäº¤çš„æ•°æ®æ˜¯å¦æ»¡è¶³æ¨¡å‹çš„è¦æ±‚</span>        <span class="token keyword">if</span> article_post_form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment"># ä¿å­˜æ–°å†™å…¥çš„ titleã€body æ•°æ®å¹¶ä¿å­˜</span>            article<span class="token punctuation">.</span>title <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span>            article<span class="token punctuation">.</span>body <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">[</span><span class="token string">'body'</span><span class="token punctuation">]</span>            article<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment"># å®Œæˆåè¿”å›åˆ°ä¿®æ”¹åçš„æ–‡ç« ä¸­ã€‚éœ€ä¼ å…¥æ–‡ç« çš„ id å€¼</span>            <span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">"article:article_detail"</span><span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token operator">=</span><span class="token builtin">id</span><span class="token punctuation">)</span>        <span class="token comment"># å¦‚æœæ•°æ®ä¸åˆæ³•ï¼Œè¿”å›é”™è¯¯ä¿¡æ¯</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"è¡¨å•å†…å®¹æœ‰è¯¯ï¼Œè¯·é‡æ–°å¡«å†™ã€‚"</span><span class="token punctuation">)</span>    <span class="token comment"># å¦‚æœç”¨æˆ· GET è¯·æ±‚è·å–æ•°æ®</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token comment"># åˆ›å»ºè¡¨å•ç±»å®ä¾‹</span>        article_post_form <span class="token operator">=</span> ArticlePostForm<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># èµ‹å€¼ä¸Šä¸‹æ–‡ï¼Œå°† article æ–‡ç« å¯¹è±¡ä¹Ÿä¼ é€’è¿›å»ï¼Œä»¥ä¾¿æå–æ—§çš„å†…å®¹</span>        context <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token string">'article'</span><span class="token punctuation">:</span> article<span class="token punctuation">,</span> <span class="token string">'article_post_form'</span><span class="token punctuation">:</span> article_post_form <span class="token punctuation">&#125;</span>        <span class="token comment"># å°†å“åº”è¿”å›åˆ°æ¨¡æ¿ä¸­</span>        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'article/update.html'</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ›´æ–°çš„è§†å›¾ä¸åˆ›å»ºæ–‡ç« éå¸¸ç›¸ä¼¼ï¼Œä½†åˆæœ‰ç‚¹å°åŒºåˆ«ï¼š</p><ul><li>æ–‡ç« çš„ id ä½œä¸ºå‚æ•°ä¼ é€’è¿›æ¥äº†</li><li>ç”¨æˆ·POSTæäº¤è¡¨å•æ—¶æ²¡æœ‰åˆ›å»ºæ–°çš„æ–‡ç« ï¼Œè€Œæ˜¯åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ä¿®æ”¹</li><li><code>redirect</code>å‡½æ•°æ²¡æœ‰è¿”å›æ–‡ç« åˆ—è¡¨ï¼Œè€Œæ˜¯è¿”å›åˆ°ä¿®æ”¹åçš„æ–‡ç« é¡µé¢å»äº†ï¼Œå› æ­¤éœ€è¦åŒæ—¶æŠŠæ–‡ç« çš„idä¹Ÿæ‰“åŒ…ä¼ é€’è¿›å»ï¼Œè¿™æ˜¯urlæ‰€è§„å®šçš„</li><li>GETè·å–é¡µé¢æ—¶å°†articleå¯¹è±¡ä¹Ÿä¼ é€’åˆ°æ¨¡æ¿ä¸­å»ï¼Œä»¥ä¾¿åç»­çš„è°ƒç”¨</li></ul><h2 id="ç¼–å†™æ¨¡æ¿"><a href="#ç¼–å†™æ¨¡æ¿" class="headerlink" title="ç¼–å†™æ¨¡æ¿"></a>ç¼–å†™æ¨¡æ¿</h2><p>æ¨¡æ¿æ–‡ä»¶å°±ä¸åˆ›å»ºæ–‡ç« çš„æ›´åƒäº†ï¼Œä¸è¿‡æˆ‘ä»¬è¿™é‡Œè¿˜æ˜¯é‡æ–°å†™ä¸€éã€‚</p><p>æ–°å»º<code>templates/article/update.html</code>å¹¶å†™å…¥ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/update.html&#123;% extends "base.html" %&#125; &#123;% load staticfiles %&#125;&#123;% block title %&#125; æ›´æ–°æ–‡ç«  &#123;% endblock title %&#125;&#123;% block content %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-12<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                &#123;% csrf_token %&#125;                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ–‡ç« æ ‡é¢˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                    <span class="token comment">&lt;!-- åœ¨ value å±æ€§ä¸­æŒ‡å®šæ–‡æœ¬æ¡†çš„åˆå§‹å€¼ä¸ºæ—§çš„å†…å®¹ï¼Œå³ article å¯¹è±¡ä¸­çš„ title å­—æ®µ --></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123; article.title &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>body<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ–‡ç« æ­£æ–‡<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                    <span class="token comment">&lt;!-- æ–‡æœ¬åŸŸä¸éœ€è¦ value å±æ€§ï¼Œç›´æ¥åœ¨æ ‡ç­¾ä½“ä¸­åµŒå…¥æ•°æ®å³å¯ --></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>body<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>body<span class="token punctuation">"</span></span> <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>12<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; article.body &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-primary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å®Œæˆ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>&#123;% endblock content %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨æ¨¡æ¿ä¸­ï¼Œåˆ†åˆ«å°†æ–‡ç« æ—§çš„æ ‡é¢˜å’Œæ­£æ–‡ä½œä¸ºåˆå§‹å€¼ï¼Œä¼ é€’äº†è¿›å»ï¼Œå…¶ä»–å°±ä¸æ–°å»ºæ–‡ç« çš„æ¨¡æ¿å®Œå…¨æ²¡åŒºåˆ«äº†ã€‚</p><p>æœ‰è¯»è€…å¯èƒ½å°±ä¼šé—®äº†ï¼Œæ—¢ç„¶è¿™ä¸¤ä¸ªå‡½æ•°ã€æ¨¡æ¿éƒ½å¾ˆç›¸ä¼¼ï¼Œ<strong>èƒ½ä¸èƒ½åˆå¹¶æˆä¸€ä¸ªå‡½æ•°ã€æ¨¡æ¿å‘¢ï¼Ÿ</strong>å½“ç„¶æ˜¯å¯ä»¥çš„ï¼Œåˆå¹¶ç›¸åŒåŠŸèƒ½çš„å‡½æ•°å¯ä»¥è®©ä»£ç æ›´åŠ ç®€æ´æ¼‚äº®ï¼Œä¹Ÿä¾¿äºåæœŸçš„ç»´æŠ¤ã€‚æœ‰å…´è¶£çš„è¯»è€…å¯ä»¥è‡ªå·±å°è¯•ä¸€ä¸‹ã€‚</p><h2 id="URL-å’Œå…¥å£"><a href="#URL-å’Œå…¥å£" class="headerlink" title="URL å’Œå…¥å£"></a>URL å’Œå…¥å£</h2><p>æ¥ä¸‹æ¥çš„å¥—è·¯éƒ½æ‡‚çš„ï¼Œé…ç½®è·¯ç”±<code>article/urls.py</code>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>urls<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token comment"># æ›´æ–°æ–‡ç« </span>    path<span class="token punctuation">(</span><span class="token string">'article-update/&lt;int:id>/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>article_update<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'article_update'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨æ–‡ç« è¯¦æƒ…é¡µé¢<code>tempaltes/article/detail.html</code>ä¸­æ·»åŠ ä¿®æ”¹æ–‡ç« çš„å…¥å£ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">tempaltes/article/detail.html...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-12 alert alert-success<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä½œè€…ï¼š&#123;&#123; article.author &#125;&#125;    Â· <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">confirm_delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>åˆ é™¤æ–‡ç« <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    Â· <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">"</span></span><span class="token attr-name"><span class="token namespace">article:</span>article_update"</span> <span class="token attr-name">article.id</span> <span class="token attr-name">%&#125;"</span><span class="token punctuation">></span></span>ç¼–è¾‘æ–‡ç« <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯åŠ¨æœåŠ¡å™¨ï¼Œå¯ä»¥çœ‹åˆ°ä¿®æ”¹æ–‡ç« çš„åŠŸèƒ½å°±å®ç°äº†ã€‚åŒæ ·çš„ï¼Œå¦‚æœ‰æ•…éšœä¹Ÿä¸è¦ç€æ€¥ï¼Œåœ¨Debugé¡µé¢å¯»æ‰¾å‡ºé”™çš„çº¿ç´¢ï¼Œæ±‚åŠ©ç½‘ç»œå¸®å¿™è§£å†³å§ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><strong>è‡³æ­¤æˆ‘ä»¬å°±å®ç°äº†ä¸€ç¯‡æ–‡ç« çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥å››ä¸ªåŸºç¡€åŠŸèƒ½ï¼Œä¹Ÿç®—å°æœ‰æˆå°±ã€‚</strong></p><p>å½“ç„¶è¿˜æœ‰å¾ˆå¤šè¿›é˜¶çš„åŠŸèƒ½å¯ä»¥å»åšï¼Œä¸è¿‡æˆ‘ä»¬åœ¨è¿™é‡Œå…ˆä¼‘æ¯ä¼‘æ¯ï¼Œæ¥ç½å¿«ä¹æ°´åº†ç¥ä¸€ä¸‹ã€‚</p><p>ä¸‹ä¸€ç« å¼€å§‹è§£å†³æ›´åŠ ç‡ƒçœ‰ä¹‹æ€¥çš„å†…å®¹ï¼šç”¨æˆ·ç®¡ç†ã€‚</p><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#x64;&#117;&#115;&#97;&#x69;&#112;&#104;&#111;&#x74;&#x6f;&#x40;&#x66;&#111;&#120;&#x6d;&#97;&#105;&#x6c;&#46;&#99;&#x6f;&#x6d;">&#x64;&#117;&#115;&#97;&#x69;&#112;&#104;&#111;&#x74;&#x6f;&#x40;&#x66;&#111;&#120;&#x6d;&#97;&#105;&#x6c;&#46;&#99;&#x6f;&#x6d;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul><blockquote><p>è½¬è½½è¯·å‘ŠçŸ¥ä½œè€…å¹¶æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--14.ç”¨æˆ·çš„æ³¨å†Œ</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/14.yong-hu-de-zhu-ce/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/14.yong-hu-de-zhu-ce/</url>
      
        <content type="html"><![CDATA[<p>æ—¢ç„¶æœ‰ç™»å½•ç™»å‡ºï¼Œé‚£ä¹ˆç”¨æˆ·çš„æ³¨å†Œè‚¯å®šä¹Ÿæ˜¯å°‘ä¸äº†çš„ã€‚</p><h2 id="æ³¨å†Œè¡¨å•ç±»"><a href="#æ³¨å†Œè¡¨å•ç±»" class="headerlink" title="æ³¨å†Œè¡¨å•ç±»"></a>æ³¨å†Œè¡¨å•ç±»</h2><p>ç”¨æˆ·æ³¨å†Œæ—¶ä¼šç”¨åˆ°<strong>è¡¨å•</strong>æ¥æäº¤è´¦å·ã€å¯†ç ç­‰æ•°æ®ï¼Œæ‰€ä»¥éœ€è¦å†™æ³¨å†Œç”¨çš„è¡¨å•<code>/userprofile/forms.py</code>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">/</span>userprofile<span class="token operator">/</span>forms<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># æ³¨å†Œç”¨æˆ·è¡¨å•</span><span class="token keyword">class</span> <span class="token class-name">UserRegisterForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># å¤å†™ User çš„å¯†ç </span>    password <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span><span class="token punctuation">)</span>    password2 <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        model <span class="token operator">=</span> User        fields <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'username'</span><span class="token punctuation">,</span> <span class="token string">'email'</span><span class="token punctuation">)</span>    <span class="token comment"># å¯¹ä¸¤æ¬¡è¾“å…¥çš„å¯†ç æ˜¯å¦ä¸€è‡´è¿›è¡Œæ£€æŸ¥</span>    <span class="token keyword">def</span> <span class="token function">clean_password2</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        data <span class="token operator">=</span> self<span class="token punctuation">.</span>cleaned_data        <span class="token keyword">if</span> data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'password'</span><span class="token punctuation">)</span> <span class="token operator">==</span> data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'password2'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'password'</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">raise</span> forms<span class="token punctuation">.</span>ValidationError<span class="token punctuation">(</span><span class="token string">"å¯†ç è¾“å…¥ä¸ä¸€è‡´,è¯·é‡è¯•ã€‚"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šä¸€ç« ä¹Ÿè®²è¿‡ï¼Œå¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œçš„è¡¨å•åº”è¯¥ç»§æ‰¿<code>forms.ModelForm</code>ï¼Œå¯ä»¥è‡ªåŠ¨ç”Ÿæˆæ¨¡å‹ä¸­å·²æœ‰çš„å­—æ®µã€‚</p><p>è¿™é‡Œæˆ‘ä»¬è¦†å†™äº†<code>password</code>å­—æ®µï¼Œå› ä¸ºé€šå¸¸åœ¨æ³¨å†Œæ—¶éœ€è¦é‡å¤è¾“å…¥<code>password</code>æ¥ç¡®ä¿ç”¨æˆ·æ²¡æœ‰å°†å¯†ç è¾“å…¥é”™è¯¯ï¼Œæ‰€ä»¥è¦†å†™æ‰å®ƒä»¥ä¾¿æˆ‘ä»¬è‡ªå·±è¿›è¡Œæ•°æ®çš„éªŒè¯å·¥ä½œã€‚<code>def clean_password2()</code>ä¸­çš„å†…å®¹ä¾¿æ˜¯åœ¨éªŒè¯å¯†ç æ˜¯å¦ä¸€è‡´äº†ã€‚<code>def clean_[å­—æ®µ]</code>è¿™ç§å†™æ³•Djangoä¼šè‡ªåŠ¨è°ƒç”¨ï¼Œæ¥å¯¹å•ä¸ªå­—æ®µçš„æ•°æ®è¿›è¡ŒéªŒè¯æ¸…æ´—ã€‚</p><p>è¦†å†™æŸå­—æ®µä¹‹åï¼Œå†…éƒ¨ç±»<code>class Meta</code>ä¸­çš„å®šä¹‰å¯¹è¿™ä¸ªå­—æ®µå°±æ²¡æœ‰æ•ˆæœäº†ï¼Œæ‰€ä»¥<code>fields</code>ä¸ç”¨åŒ…å«<code>password</code>ã€‚</p><p><strong>éœ€è¦æ³¨æ„ï¼š</strong></p><ul><li>éªŒè¯å¯†ç ä¸€è‡´æ€§æ–¹æ³•ä¸èƒ½å†™<code>def clean_password()</code>ï¼Œå› ä¸ºå¦‚æœä½ ä¸å®šä¹‰<code>def clean_password2()</code>æ–¹æ³•ï¼Œä¼šå¯¼è‡´password2ä¸­çš„æ•°æ®è¢«Djangoåˆ¤å®šä¸ºæ— æ•ˆæ•°æ®ä»è€Œæ¸…æ´—æ‰ï¼Œä»è€Œ<code>password2</code>å±æ€§ä¸å­˜åœ¨ã€‚æœ€ç»ˆå¯¼è‡´ä¸¤æ¬¡å¯†ç è¾“å…¥å§‹ç»ˆä¼šä¸ä¸€è‡´ï¼Œå¹¶ä¸”å¾ˆéš¾åˆ¤æ–­å‡ºé”™è¯¯åŸå› ã€‚</li><li>ä»POSTä¸­å–å€¼ç”¨çš„<code>data.get(&#39;password&#39;)</code>æ˜¯ä¸€ç§ç¨³å¦¥çš„å†™æ³•ï¼Œå³ä½¿ç”¨æˆ·æ²¡æœ‰è¾“å…¥å¯†ç ä¹Ÿä¸ä¼šå¯¼è‡´ç¨‹åºé”™è¯¯è€Œè·³å‡ºã€‚å‰é¢ç« èŠ‚æå–POSTæ•°æ®æˆ‘ä»¬ç”¨äº†<code>data[&#39;password&#39;]</code>ï¼Œè¿™ç§å–å€¼æ–¹å¼å¦‚æœdataä¸­ä¸åŒ…å«<code>password</code>ï¼ŒDjangoä¼šæŠ¥é”™ã€‚å¦ä¸€ç§é˜²æ­¢ç”¨æˆ·ä¸è¾“å…¥å¯†ç å°±æäº¤çš„æ–¹å¼æ˜¯åœ¨è¡¨å•ä¸­æ’å…¥<code>required</code>å±æ€§ï¼Œåé¢ä¼šè®²åˆ°ã€‚</li></ul><h2 id="è§†å›¾å‡½æ•°"><a href="#è§†å›¾å‡½æ•°" class="headerlink" title="è§†å›¾å‡½æ•°"></a>è§†å›¾å‡½æ•°</h2><p>ç¼–å†™æ³¨å†Œçš„è§†å›¾<code>/userprofile/views.py</code>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">/</span>userprofile<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token comment"># å¼•å…¥ UserRegisterForm è¡¨å•ç±»</span><span class="token keyword">from</span> <span class="token punctuation">.</span>forms <span class="token keyword">import</span> UserLoginForm<span class="token punctuation">,</span> UserRegisterForm<span class="token comment"># ç”¨æˆ·æ³¨å†Œ</span><span class="token keyword">def</span> <span class="token function">user_register</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">:</span>        user_register_form <span class="token operator">=</span> UserRegisterForm<span class="token punctuation">(</span>data<span class="token operator">=</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">)</span>        <span class="token keyword">if</span> user_register_form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            new_user <span class="token operator">=</span> user_register_form<span class="token punctuation">.</span>save<span class="token punctuation">(</span>commit<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>            <span class="token comment"># è®¾ç½®å¯†ç </span>            new_user<span class="token punctuation">.</span>set_password<span class="token punctuation">(</span>user_register_form<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">[</span><span class="token string">'password'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            new_user<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment"># ä¿å­˜å¥½æ•°æ®åç«‹å³ç™»å½•å¹¶è¿”å›åšå®¢åˆ—è¡¨é¡µé¢</span>            login<span class="token punctuation">(</span>request<span class="token punctuation">,</span> new_user<span class="token punctuation">)</span>            <span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">"article:article_list"</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"æ³¨å†Œè¡¨å•è¾“å…¥æœ‰è¯¯ã€‚è¯·é‡æ–°è¾“å…¥~"</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'GET'</span><span class="token punctuation">:</span>        user_register_form <span class="token operator">=</span> UserRegisterForm<span class="token punctuation">(</span><span class="token punctuation">)</span>        context <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token string">'form'</span><span class="token punctuation">:</span> user_register_form <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'userprofile/register.html'</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"è¯·ä½¿ç”¨GETæˆ–POSTè¯·æ±‚æ•°æ®"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é€»è¾‘ä¸Šç»“åˆäº†<strong>å‘è¡¨æ–‡ç« è§†å›¾</strong>å’Œ<strong>ç”¨æˆ·ç™»å½•è§†å›¾</strong>ï¼Œæ²¡æœ‰æ–°çš„çŸ¥è¯†ã€‚</p><p>ç”¨æˆ·åœ¨æ³¨å†ŒæˆåŠŸåä¼šè‡ªåŠ¨ç™»å½•å¹¶è¿”å›åšå®¢åˆ—è¡¨é¡µé¢ã€‚</p><h2 id="æ¨¡æ¿å’Œurl"><a href="#æ¨¡æ¿å’Œurl" class="headerlink" title="æ¨¡æ¿å’Œurl"></a>æ¨¡æ¿å’Œurl</h2><p>è¡¨å•æœ‰å…³çš„æ¨¡æ¿æ–‡ä»¶æˆ‘ä»¬ä¹Ÿå¾ˆç†Ÿæ‚‰äº†ï¼Œæ–°å»º<code>/templates/userprofile/register.html</code>ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">/templates/userprofile/register.html&#123;% extends "base.html" %&#125; &#123;% load staticfiles %&#125;&#123;% block title %&#125; ç™»å½• &#123;% endblock title %&#125;&#123;% block content %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-12<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                &#123;% csrf_token %&#125;                <span class="token comment">&lt;!-- è´¦å· --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group col-md-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ˜µç§°<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- é‚®ç®± --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group col-md-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Email<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- å¯†ç  --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group col-md-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è®¾ç½®å¯†ç <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- ç¡®è®¤å¯†ç  --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group col-md-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç¡®è®¤å¯†ç <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password2<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password2<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- æäº¤æŒ‰é’® --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-primary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æäº¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>&#123;% endblock content %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢çš„æ¨¡æ¿æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬åœ¨æ˜µç§°ã€å¯†ç <code>input</code> æ ‡ç­¾ä¸­æ·»åŠ äº†<code>required</code>å±æ€§ï¼ˆå‰é¢æåˆ°è¿‡ï¼‰ã€‚å¦‚æœç”¨æˆ·ä¸å¡«å†™å¸¦æœ‰<code>required</code>å±æ€§çš„å­—æ®µï¼Œè¡¨å•å°±ä¸èƒ½æäº¤ï¼Œå¹¶æç¤ºç”¨æˆ·å¡«å†™ã€‚å®é™…ä¸Šå‰é¢å­¦ä¹ çš„å¾ˆå¤šè¡¨å•éƒ½å¯ä»¥æ·»åŠ <code>required</code>å±æ€§æ¥æå‰éªŒè¯æ•°æ®çš„æœ‰æ•ˆæ€§ã€‚</p><p>æ³¨å†Œçš„å…¥å£ä½ å¯ä»¥æ”¾åœ¨ä»»ä½•å–œæ¬¢çš„åœ°æ–¹ã€‚æœ¬æ–‡æ”¾åœ¨ç™»å½•é¡µé¢ä¸­<code>/templates/userprofile/login.html</code>ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">/templates/userprofile/login.html...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-12<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h5</span><span class="token punctuation">></span></span>è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h5</span><span class="token punctuation">></span></span>ç‚¹å‡»<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>&#123;% url <span class="token punctuation">"</span>userprofile:register<span class="token punctuation">"</span> %&#125;<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>æ³¨å†Œè´¦å·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>åŠ å…¥æˆ‘ä»¬å§ï¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        ...    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åå°±æ˜¯åœ¨appä¸­é…ç½®è·¯ç”±æ–‡ä»¶<code>/userprofile/urls.py</code>äº†ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">/</span>userprofile<span class="token operator">/</span>urls<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># ç”¨æˆ·æ³¨å†Œ</span>    path<span class="token punctuation">(</span><span class="token string">'register/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>user_register<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'register'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>è¿è¡ŒæœåŠ¡å™¨ï¼Œè¿›å…¥åˆ°ç™»å½•é¡µé¢ï¼Œå¤šäº†æ³¨å†Œçš„æç¤ºï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181030/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE71.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181030/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE71.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ç‚¹å‡»<strong>æ³¨å†Œè´¦å·</strong>è¿›å…¥æ³¨å†Œé¡µé¢ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181030/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE72.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181030/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE72.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>å¡«å†™å¥½è¡¨å•åæäº¤ï¼ˆEmailåœ°å€æ˜¯å¯ä»¥ä¸ºç©ºçš„ï¼‰ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181030/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE73.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181030/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE73.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>æˆåŠŸç™»å½•å¹¶è¿”å›äº†åšå®¢åˆ—è¡¨ï¼ŒåŠŸèƒ½å®Œæˆã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« ç”¨åˆ°äº†è¡¨å•ç±»ã€å¯¹æ•°æ®è¿›è¡ŒéªŒè¯æ¸…æ´—ç­‰çŸ¥è¯†ï¼Œå®Œæˆäº†ç”¨æˆ·çš„æ³¨å†ŒåŠŸèƒ½ã€‚</p><p>æ¥ä¸‹æ¥å­¦ä¹ å¦‚ä½•å®ç°åˆ é™¤å·²æœ‰çš„ç”¨æˆ·ã€‚</p><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#100;&#117;&#x73;&#x61;&#105;&#112;&#104;&#111;&#116;&#x6f;&#64;&#102;&#111;&#x78;&#x6d;&#97;&#105;&#x6c;&#x2e;&#99;&#111;&#x6d;">&#100;&#117;&#x73;&#x61;&#105;&#112;&#104;&#111;&#116;&#x6f;&#64;&#102;&#111;&#x78;&#x6d;&#97;&#105;&#x6c;&#x2e;&#99;&#111;&#x6d;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul><blockquote><p>è½¬è½½è¯·å‘ŠçŸ¥ä½œè€…å¹¶æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--15.ç”¨æˆ·çš„åˆ é™¤</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/15.yong-hu-de-shan-chu/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/15.yong-hu-de-shan-chu/</url>
      
        <content type="html"><![CDATA[<p>è¿™ä¸€ç« å°†å®ç°åˆ é™¤ç”¨æˆ·æ•°æ®çš„åŠŸèƒ½ã€‚å®é™…ä¸Šåˆ é™¤ç”¨æˆ·å’Œå‰é¢çš„åˆ é™¤æ–‡ç« æ˜¯å®Œå…¨ç±»ä¼¼çš„ï¼Œæœ‰äº†ä¹‹å‰çš„é“ºå«ï¼Œè¿™ä¸€ç« ä¼šéå¸¸çš„è½»æ¾ã€‚</p><h2 id="æƒé™ä¸è§†å›¾"><a href="#æƒé™ä¸è§†å›¾" class="headerlink" title="æƒé™ä¸è§†å›¾"></a>æƒé™ä¸è§†å›¾</h2><p>ç”¨æˆ·æ•°æ®æ˜¯å¾ˆå¤šç½‘ç«™æœ€é‡è¦çš„è´¢äº§ï¼Œ<strong>ç¡®ä¿ç”¨æˆ·æ•°æ®çš„å®‰å…¨æ˜¯éå¸¸é‡è¦çš„</strong>ã€‚</p><p>å‰é¢å­¦ä¹ çš„ç”¨æˆ·ç™»å½•ã€é€€å‡ºã€åˆ›å»ºéƒ½æ˜¯ç›¸å¯¹å®‰å…¨çš„æ“ä½œï¼›è€Œåˆ é™¤æ•°æ®å°±å¾ˆå±é™©ï¼Œå¼„ä¸å¥½ä¼šé€ æˆä¸å¯é€†çš„æŸå¤±ã€‚å› æ­¤æˆ‘ä»¬å¸Œæœ›å¯¹æ“ä½œè€…åšä¸€äº›é™åˆ¶ï¼Œæ¯”å¦‚åªèƒ½ç”¨æˆ·ç™»å½•ä¸”å¿…é¡»æ˜¯æœ¬ç”¨æˆ·æ‰èƒ½è¿›è¡Œåˆ é™¤çš„æ“ä½œã€‚è¿™å°±æ˜¯<strong>æƒé™</strong>ã€‚</p><p>å› æ­¤åœ¨è§†å›¾ä¸­è¿›è¡Œç®€å•çš„ç”¨æˆ·æƒé™çš„éªŒè¯å·¥ä½œã€‚ç¼–å†™<code>/userprofile/views.py</code>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">/</span>userprofile<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>models <span class="token keyword">import</span> User<span class="token comment"># å¼•å…¥éªŒè¯ç™»å½•çš„è£…é¥°å™¨</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>decorators <span class="token keyword">import</span> login_required<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token decorator annotation punctuation">@login_required</span><span class="token punctuation">(</span>login_url<span class="token operator">=</span><span class="token string">'/userprofile/login/'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">user_delete</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">:</span>        user <span class="token operator">=</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token builtin">id</span><span class="token punctuation">)</span>        <span class="token comment"># éªŒè¯ç™»å½•ç”¨æˆ·ã€å¾…åˆ é™¤ç”¨æˆ·æ˜¯å¦ç›¸åŒ</span>        <span class="token keyword">if</span> request<span class="token punctuation">.</span>user <span class="token operator">==</span> user<span class="token punctuation">:</span>            <span class="token comment">#é€€å‡ºç™»å½•ï¼Œåˆ é™¤æ•°æ®å¹¶è¿”å›åšå®¢åˆ—è¡¨</span>            logout<span class="token punctuation">(</span>request<span class="token punctuation">)</span>            user<span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">"article:article_list"</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"ä½ æ²¡æœ‰åˆ é™¤æ“ä½œçš„æƒé™ã€‚"</span><span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"ä»…æ¥å—postè¯·æ±‚ã€‚"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ†æä¸Šé¢çš„ä»£ç ï¼š</p><ul><li><p><code>@login_required</code>æ˜¯ä¸€ä¸ª<strong>Pythonè£…é¥°å™¨</strong>ã€‚è£…é¥°å™¨å¯ä»¥åœ¨ä¸æ”¹å˜æŸä¸ªå‡½æ•°å†…å®¹çš„å‰æä¸‹ï¼Œç»™è¿™ä¸ªå‡½æ•°æ·»åŠ ä¸€äº›åŠŸèƒ½ã€‚å…·ä½“æ¥è¯´å°±æ˜¯<code>@login_required</code>è¦æ±‚è°ƒç”¨<code>user_delete()</code>å‡½æ•°æ—¶ï¼Œç”¨æˆ·å¿…é¡»ç™»å½•ï¼›å¦‚æœæœªç™»å½•åˆ™ä¸æ‰§è¡Œå‡½æ•°ï¼Œå°†é¡µé¢é‡å®šå‘åˆ°<code>/userprofile/login/</code>åœ°å€å»ã€‚</p></li><li><p>è£…é¥°å™¨ç¡®è®¤ç”¨æˆ·å·²ç»ç™»å½•åï¼Œå…è®¸è°ƒç”¨<code>user_delete()</code>ï¼›ç„¶åéœ€è¦åˆ é™¤çš„ç”¨æˆ·<strong>id</strong>é€šè¿‡è¯·æ±‚ä¼ é€’åˆ°è§†å›¾ä¸­ï¼Œç”±<code>if</code>è¯­å¥ç¡®è®¤æ˜¯å¦ä¸ç™»å½•çš„ç”¨æˆ·ä¸€è‡´ï¼ŒæˆåŠŸååˆ™é€€å‡ºç™»å½•å¹¶åˆ é™¤ç”¨æˆ·æ•°æ®ï¼Œè¿”å›åšå®¢åˆ—è¡¨é¡µé¢ã€‚</p></li></ul><blockquote><p>è£…é¥°å™¨çš„è¯¦ç»†è§£é‡Šå¯ä»¥çœ‹è¿™é‡Œï¼š<a href="https://www.zhihu.com/question/26930016">å¦‚ä½•ç†è§£Pythonè£…é¥°å™¨ï¼Ÿ</a></p><p><code>@login_required</code>çš„è¯¦ç»†è§£é‡Šçœ‹è¿™é‡Œï¼š<a href="https://docs.djangoproject.com/en/2.1/topics/auth/default/#django.contrib.auth.decorators.login_required">login_required</a></p></blockquote><h2 id="æ¨¡æ¿ä¸url"><a href="#æ¨¡æ¿ä¸url" class="headerlink" title="æ¨¡æ¿ä¸url"></a>æ¨¡æ¿ä¸url</h2><p>ç„¶åæ”¹å†™<code>/templates/header.html</code>ï¼Œæ–°å¢äº†<strong>åˆ é™¤ç”¨æˆ·</strong>çš„å…¥å£ï¼Œå¹¶ä¸”åœ¨æœ«å°¾æ·»åŠ <strong>å¼¹çª—ç»„ä»¶</strong>çš„ä»£ç :</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">/templates/header.html...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dropdown-menu<span class="token punctuation">"</span></span> <span class="token attr-name">aria-labelledby</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>navbarDropdown<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- æ–°å¢ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dropdown-item<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">user_delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>åˆ é™¤ç”¨æˆ·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dropdown-item<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>&#123;% url <span class="token punctuation">"</span>userprofile:logout<span class="token punctuation">"</span> %&#125;<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>é€€å‡ºç™»å½•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>...<span class="token comment">&lt;!-- æ–°å¢ --></span>&#123;% if user.is_authenticated %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span>     <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span>     <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user_delete<span class="token punctuation">"</span></span>    <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>userprofile:delete<span class="token punctuation">'</span> user.id %&#125;<span class="token punctuation">"</span></span>     <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>POST<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;% csrf_token %&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å‘é€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">        <span class="token keyword">function</span> <span class="token function">user_delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// è°ƒç”¨layerå¼¹çª—ç»„ä»¶</span>            layer<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>                title<span class="token operator">:</span> <span class="token string">"ç¡®è®¤åˆ é™¤"</span><span class="token punctuation">,</span>                content<span class="token operator">:</span> <span class="token string">"ç¡®è®¤åˆ é™¤ç”¨æˆ·èµ„æ–™å—ï¼Ÿ"</span><span class="token punctuation">,</span>                <span class="token function-variable function">yes</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">index<span class="token punctuation">,</span> layero</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'form#user_delete button'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    layer<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>&#123;% endif %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>å› ä¸ºåˆ é™¤ç”¨æˆ·è¦æ±‚ç”¨æˆ·å¿…é¡»ç™»å½•ï¼Œå› æ­¤å°±æŠŠå®ƒçš„å…¥å£æ”¾åœ¨ç™»é™†åæ‰æ˜¾ç¤ºçš„ä¸‹æ‹‰æ¡†ä¸­ï¼Œè¿™æ ·é¡µé¢å¯ä»¥æ›´åŠ ç®€æ´ã€‚å½“ç„¶è¿™ç§æ–¹å¼å¹¶ä¸æ˜¯æœ€ä½³çš„é€‰æ‹©ï¼Œé€šå¸¸çš„åšæ³•æ˜¯æŠŠåˆ é™¤åŠŸèƒ½æ”¾åœ¨ç‹¬ç«‹çš„ç”¨æˆ·èµ„æ–™é¡µé¢ä¸­ã€‚</p></li><li><p>ä¸åˆ é™¤æ–‡ç« ç±»ä¼¼ï¼Œç‚¹å‡»<strong>åˆ é™¤ç”¨æˆ·</strong>é“¾æ¥åè°ƒç”¨äº†<code>user_delete()</code>å‡½æ•°ï¼Œå‡½æ•°åŒ…å«äº†<strong>å¼¹çª—ç»„ä»¶</strong>ç¡®è®¤ç”¨æˆ·æ²¡æœ‰è¯¯æ“ä½œï¼›ç‚¹å‡»å¼¹çª—ä¸­çš„ç¡®è®¤æŒ‰é’®åï¼Œæäº¤åˆ é™¤çš„éšè—è¡¨å•ï¼Œæ‰§è¡Œè§†å›¾ã€‚</p></li><li><p>æ³¨æ„åˆ°<code>user_delete()</code>å‡½æ•°å’Œè¡¨å•æ˜¯ç”¨<code>if</code>æ¨¡æ¿è¯­å¥åŒ…è£¹èµ·æ¥çš„ã€‚å› ä¸ºç”¨æˆ·æœªç™»å½•æ—¶é¡µé¢å¯¹è±¡ä¸­æ˜¯æ²¡æœ‰<code>user.id</code>å±æ€§çš„ï¼Œä½†æ˜¯å‡½æ•°ä¸­å´åˆåŒ…å«äº†<code>user.id</code>ï¼ŒDjangoåœ¨è§£ææ¨¡æ¿æ—¶å°±ä¼šæŠ¥é”™ã€‚<code>if</code>è¯­å¥ç¡®ä¿äº†<strong>åªæœ‰åœ¨ç”¨æˆ·ç™»å½•æ—¶æ‰å¯¹è¿™æ®µJavaScriptä»£ç è¿›è¡Œè§£æ</strong>ï¼Œå›é¿äº†è¿™ä¸ªé—®é¢˜ã€‚</p></li><li><p>æˆ‘ä»¬åœ¨<code>base.html</code>å·²ç»å¼•ç”¨äº†<strong>å¼¹çª—ç»„ä»¶æ¨¡å—</strong>ï¼Œè€Œ<code>header.html</code>æ˜¯æ‹¼æ¥åœ¨<code>base.html</code>ä¸­çš„ï¼Œå› æ­¤å°±ä¸ç”¨å†é‡å¤å¼•ç”¨å¼¹çª—ç»„ä»¶äº†ã€‚</p></li></ul><p>æœ€åå°±æ˜¯å†™å¥½<code>/userprofile/urls.py</code>çš„è·¯ç”±æ˜ å°„äº†ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">/</span>userprofile<span class="token operator">/</span>urls<span class="token punctuation">.</span>pyurlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># ç”¨æˆ·åˆ é™¤</span>    path<span class="token punctuation">(</span><span class="token string">'delete/&lt;int:id>/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>user_delete<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'delete'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡ŒæœåŠ¡å™¨çœ‹çœ‹æ•ˆæœã€‚ç™»å½•ç”¨æˆ·å¹¶åœ¨å³ä¸Šè§’ä¸‹æ‹‰æ¡†ä¸­ç‚¹å‡»<strong>åˆ é™¤ç”¨æˆ·</strong>ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181031/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE74.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181031/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE74.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ç‚¹å‡»ç¡®å®šåå°±å¯ä»¥æˆåŠŸåˆ é™¤ç”¨æˆ·æ•°æ®äº†ã€‚</p><h2 id="æ£€æŸ¥æ•°æ®åº“"><a href="#æ£€æŸ¥æ•°æ®åº“" class="headerlink" title="æ£€æŸ¥æ•°æ®åº“"></a>æ£€æŸ¥æ•°æ®åº“</h2><p>å‰é¢æˆ‘ä»¬å·²ç»è®²è¿‡å¦‚ä½•ç”¨<a href="https://sqlitestudio.pl/index.rvt">SQLiteStudio</a>æŸ¥çœ‹æ•°æ®åº“å­˜å‚¨çš„å†…å®¹ï¼Œç¡®ä¿æ•°æ®çœŸæ­£çš„ä»æ•°æ®åº“ä¸­æ“¦é™¤äº†ã€‚</p><p>ç”¨<strong>SQLiteStudio</strong>æ‰“å¼€é¡¹ç›®ä¸­<code>db.sqlite3</code>æ–‡ä»¶ï¼Œæ‰¾åˆ°<code>auth_user</code>å­—æ®µï¼Œæ˜¾ç¤ºå¦‚ä¸‹ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181031/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE75.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181031/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE75.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>å¯ä»¥çœ‹åˆ°<code>dusai123</code>è¿™ä¸ªç”¨æˆ·ç¡®å®å·²ç»æ²¡æœ‰äº†ã€‚</p><p>åœ¨éªŒè¯æ“ä½œæ•°æ®çš„é€»è¾‘æ—¶ï¼Œ<strong>SQLiteStudio</strong>å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç›´è§‚çš„å‘ç°é—®é¢˜ï¼Œä¸€å®šè¦å–„åŠ åˆ©ç”¨ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« å­¦ä¹ äº†åˆ é™¤ç”¨æˆ·åŠŸèƒ½ï¼Œå¹¶ç»™å®ƒèµ‹äºˆäº†ç®€å•çš„æƒé™ã€‚</p><p>ä¸‹ä¸€ç« å°†å­¦ä¹ é€šè¿‡é‚®ç®±é‡ç½®ç”¨æˆ·å¯†ç ã€‚</p><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#x64;&#117;&#x73;&#97;&#105;&#x70;&#x68;&#111;&#x74;&#x6f;&#64;&#102;&#x6f;&#120;&#x6d;&#97;&#105;&#x6c;&#46;&#99;&#111;&#109;">&#x64;&#117;&#x73;&#97;&#105;&#x70;&#x68;&#111;&#x74;&#x6f;&#64;&#102;&#x6f;&#120;&#x6d;&#97;&#105;&#x6c;&#46;&#99;&#111;&#109;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--16.é‡ç½®ç”¨æˆ·å¯†ç </title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/16.chong-zhi-yong-hu-mi-ma/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/16.chong-zhi-yong-hu-mi-ma/</url>
      
        <content type="html"><![CDATA[<p>éšç€æŠ€æœ¯çš„å‘å±•ï¼ŒéªŒè¯ç”¨æˆ·èº«ä»½çš„æ‰‹æ®µè¶Šæ¥è¶Šå¤šï¼ŒæŒ‡çº¹ã€é¢å®¹ã€å£°çº¹åº”æœ‰å°½æœ‰ï¼Œä½†å¯†ç ä¾ç„¶æ˜¯æœ€é‡è¦çš„æ‰‹æ®µã€‚</p><p>äº’è”ç½‘å¤„å¤„éƒ½æœ‰å¯†ç çš„èº«å½±ï¼Œç”šè‡³å˜æˆäº†ç°ä»£äººçš„ä¸€ç§è´Ÿæ‹…ã€‚åƒç¬”è€…è¿™æ ·çš„ï¼ŒåŠ¨è¾„å‡ åä¸ªè´¦å·å¯†ç ï¼Œå¿˜è®°å…¶ä¸­å‡ ä¸ªç®€ç›´å¤ªæ­£å¸¸äº†ã€‚</p><p>æœ¬ç« è®²å¦‚ä½•å¸®åŠ©å¥å¿˜ç—‡æ‚£è€…ï¼Œé‡ç½®ç”¨æˆ·å¯†ç ã€‚</p><h2 id="å®‰è£…ç¬¬ä¸‰æ–¹åº“"><a href="#å®‰è£…ç¬¬ä¸‰æ–¹åº“" class="headerlink" title="å®‰è£…ç¬¬ä¸‰æ–¹åº“"></a>å®‰è£…ç¬¬ä¸‰æ–¹åº“</h2><p>å‰é¢æˆ‘ä»¬å·²ç»çŸ¥é“å¦‚ä½•ä¿®æ”¹æ–‡ç« æ ‡é¢˜ã€æ­£æ–‡ç­‰å†…å®¹ï¼Œä½†æ˜¯å¯†ç ä½œä¸ºéªŒè¯èº«ä»½çš„é‡è¦å£ä»¤ï¼Œå¿…é¡»ä»¥æ›´åŠ ç¨³å¦¥çš„æ–¹å¼ä¿®æ”¹ã€‚ä¸€ç§æ¯”è¾ƒå¸¸ç”¨çš„æ–¹å¼æ˜¯<strong>å‘é€ä¸€å°ä¿®æ”¹å¯†ç çš„é‚®ä»¶åˆ°ç”¨æˆ·äº‹å…ˆç»‘å®šçš„é‚®ç®±é‡Œ</strong>ã€‚</p><p>ä¸šåŠ¡æµç¨‹åˆ†æå¦‚ä¸‹ï¼š</p><ul><li>å‘ç”¨æˆ·é‚®ç®±å‘é€åŒ…å«é‡ç½®å¯†ç åœ°å€çš„é‚®ä»¶ã€‚é‚®ä»¶çš„åœ°å€éœ€è¦åŠ¨æ€ç”Ÿæˆï¼Œé˜²æ­¢ä¸æ€€å¥½æ„çš„ç”¨æˆ·ä»ä¸­æ£ä¹±ï¼›</li><li>å‘ç½‘ç«™ç”¨æˆ·å±•ç¤ºä¸€æ¡å‘é€é‚®ä»¶æˆåŠŸçš„ä¿¡æ¯ï¼›</li><li>ç”¨æˆ·ç‚¹å‡»é‚®ç®±ä¸­çš„åœ°å€åï¼Œè½¬å…¥é‡ç½®å¯†ç çš„é¡µé¢ï¼›</li><li>å‘ç”¨æˆ·å±•ç¤ºä¸€æ¡é‡ç½®æˆåŠŸçš„ä¿¡æ¯ã€‚</li></ul><p>ä¸Šé¢4ä¸ªæ­¥éª¤åŒ…å«äº†4ä¸ªè§†å›¾å’Œæ¨¡æ¿ï¼Œè‡ªå·±å†™ä»£ç çœ‹æ¥æœ‰äº›ç¹çã€‚</p><p>å¯èƒ½ä½ ä¼šæƒ³ï¼ŒDjangoè¿™ç§ä»¥å¼€å‘æ•ˆç‡è‘—ç§°çš„æ¡†æ¶ï¼Œ<strong>é‡ç½®å¯†ç è¿™ç§å¸¸ç”¨åŠŸèƒ½æ˜¯ä¸æ˜¯å†…ç½®äº†å‘¢</strong>ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚äº‹å®ä¸Šå†…ç½®æ¨¡å—çš„æµç¨‹å’Œä¸Šé¢çš„æ˜¯å®Œå…¨ç›¸åŒçš„ï¼Œä½ åªéœ€è¦å°†ä¸Šé¢4ä¸ªæ­¥éª¤çš„<code>url</code>é…ç½®å¥½å°±å¯ä»¥ä½¿ç”¨äº†ã€‚å½“ç„¶å†…ç½®çš„æ¨¡æ¿å¾ˆç®€é™‹ï¼Œä½ å¯ä»¥è¦†å†™æ¨¡æ¿å˜æˆè‡ªå·±ç½‘ç«™çš„é£æ ¼ã€‚</p><blockquote><p>å®é™…ä¸ŠDjangoä¸ä»…å†…ç½®äº†å¯†ç é‡ç½®ï¼Œè¿˜åŒ…æ‹¬ç™»å½•ã€ç™»å‡ºã€å¯†ç ä¿®æ”¹ç­‰åŠŸèƒ½ã€‚å»ºè®®è¯»è€…åˆ°ä¸€å®šæ°´å¹³åå¤šé˜…è¯»Djangoçš„æºç ï¼Œå­¦ä¹ å…¶ä¸­çš„ç¼–ç¨‹æŠ€å·§ã€‚å¦å¤–è¿™éƒ¨åˆ†å†…å®¹Djangoæ˜¯ç”¨<strong>ç±»è§†å›¾</strong>å†™çš„ï¼Œç°åœ¨é˜…è¯»å¯èƒ½æœ‰ä¸€å®šå›°éš¾ã€‚</p><p>æºç ä½ç½®ï¼š/env/Lib/site-packages/django/contrib/auth/views.py</p><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.djangoproject.com/zh-hans/2.1/topics/auth/default/">Django çš„éªŒè¯ç³»ç»Ÿ</a></p></blockquote><p>ä½¿ç”¨å†…ç½®çš„æ¨¡å—ä¼¼ä¹è¦ç®€å•å¤šäº†ï¼Œé‚£è¿˜èƒ½ä¸èƒ½æ›´ç®€å•å‘¢ï¼Ÿç¡®å®æ˜¯å¯ä»¥çš„ã€‚</p><p>Djangoä½œä¸ºä¼˜ç§€çš„Webæ¡†æ¶ï¼Œæœ‰å¾ˆå¤šä¼˜ç§€çš„<strong>ç¬¬ä¸‰æ–¹åº“</strong>ï¼ˆå³APPï¼‰è¢«ä¸–ç•Œå„åœ°çš„ç¨‹åºå‘˜ä»¬æ‰“åŒ…å‘å¸ƒåœ¨ç½‘ä¸Šï¼Œå…è´¹ä¾›ä½ ä½¿ç”¨ã€‚æˆåŠŸä»æ¥éƒ½æ˜¯ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šçš„ï¼Œæ—¢ç„¶å·²ç»æœ‰äº†â€œè½®å­â€ï¼Œä½•å¿…è¦è‡ªå·±å†é€ ä¸€ä¸ªå‘¢ã€‚</p><p>æˆ‘ä»¬è¿™é‡Œå°±å¯ä»¥ç”¨åˆ°ä¸€ä¸ªå«<code>Django-password-reset</code>çš„ç¬¬ä¸‰æ–¹åº“ã€‚</p><p>æ‰“å¼€è™šæ‹Ÿç¯å¢ƒï¼Œè¾“å…¥æŒ‡ä»¤<code>pip install -U django-password-reset</code>ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> E:<span class="token punctuation">\</span>django_project<span class="token punctuation">\</span>my_blog<span class="token operator">></span>pip <span class="token function">install</span> -U django-password-resetCollecting django-password-reset<span class="token punctuation">..</span>.Installing collected packages: django-password-resetSuccessfully installed django-password-reset-2.0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>çœ‹åˆ°ä»¥ä¸Šä¿¡æ¯è¯´æ˜å®‰è£…æˆåŠŸäº†ã€‚</p><h2 id="å¿«é€Ÿä½¿ç”¨"><a href="#å¿«é€Ÿä½¿ç”¨" class="headerlink" title="å¿«é€Ÿä½¿ç”¨"></a>å¿«é€Ÿä½¿ç”¨</h2><p>æ—¢ç„¶ç¬¬ä¸‰æ–¹åº“ä¹Ÿæ˜¯appï¼Œé‚£è‚¯å®šéœ€è¦åœ¨<code>/my_blog/settings.py</code>ä¸­æ³¨å†Œäº†ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">/</span>my_blog<span class="token operator">/</span>settings<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token string">'password_reset'</span><span class="token punctuation">,</span>    <span class="token comment"># æ–°å¢</span>    <span class="token string">'article'</span><span class="token punctuation">,</span>    <span class="token string">'userprofile'</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨æ ¹è·¯ç”±<code>/my_blog/urls.py</code>ä¸­æ·»åŠ appçš„åœ°å€ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">/</span>my_blog<span class="token operator">/</span>urls<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    path<span class="token punctuation">(</span><span class="token string">'password-reset/'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">'password_reset.urls'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¿®æ”¹<code>/templates/userprofile/login.html</code>ï¼Œæä¾›ä¸€ä¸ªé‡ç½®å¯†ç çš„å…¥å£ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">/templates/userprofile/login.html...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-12<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    ...    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        ...    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- æ–°å¢ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h5</span><span class="token punctuation">></span></span>å¿˜è®°å¯†ç äº†ï¼Ÿ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h5</span><span class="token punctuation">></span></span>ç‚¹å‡»<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>&#123;% url <span class="token punctuation">"</span>password_reset_recover<span class="token punctuation">"</span> %&#125;<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>è¿™é‡Œ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>é‡ç½®å¯†ç <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>é‚®ä»¶ä¸èƒ½å‡­ç©ºäº§ç”Ÿ</strong>ï¼Œç›®å‰ä¸ºæ­¢æˆ‘ä»¬å¹¶æ²¡æœ‰é…ç½®å‘ä»¶é‚®ç®±çš„è´¦å·å¯†ç ï¼Œä¹Ÿæ²¡æœ‰é…ç½®å‘é€é‚®ä»¶çš„ç«¯å£ã€å‘ä»¶äººç­‰ä¿¡æ¯ã€‚</p><p>å› æ­¤è¿˜éœ€è¦åœ¨<code>/my_blog/settings.py</code>æœ«å°¾æ·»åŠ å‘é€é‚®ç®±çš„ç›¸å…³é…ç½®ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">/</span>my_blog<span class="token operator">/</span>settings<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># SMTPæœåŠ¡å™¨ï¼Œæ”¹ä¸ºä½ çš„é‚®ç®±çš„smtp!</span>EMAIL_HOST <span class="token operator">=</span> <span class="token string">'smtp.qq.com'</span><span class="token comment"># æ”¹ä¸ºä½ è‡ªå·±çš„é‚®ç®±åï¼</span>EMAIL_HOST_USER <span class="token operator">=</span> <span class="token string">'your_email_account@xxx.com'</span><span class="token comment"># ä½ çš„é‚®ç®±å¯†ç </span>EMAIL_HOST_PASSWORD <span class="token operator">=</span> <span class="token string">'your_password'</span><span class="token comment"># å‘é€é‚®ä»¶çš„ç«¯å£</span>EMAIL_PORT <span class="token operator">=</span> <span class="token number">25</span><span class="token comment"># æ˜¯å¦ä½¿ç”¨ TLS</span>EMAIL_USE_TLS <span class="token operator">=</span> <span class="token boolean">True</span><span class="token comment"># é»˜è®¤çš„å‘ä»¶äºº</span>DEFAULT_FROM_EMAIL <span class="token operator">=</span> <span class="token string">'xxxçš„åšå®¢ &lt;your_email_account@xxx.com>'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æœ‰è¯»è€…ååº”ï¼Œè¿™é‡Œå¦‚æœç”¨QQé‚®ç®±æœ‰å¦‚ä¸‹é—®é¢˜ï¼š1. é‚®ç®±å¯†ç ä¸æ˜¯ç™»å½•å¯†ç ï¼Œè€Œæ˜¯ smtp çš„ä¸“é—¨çš„è®¤è¯ç ï¼›2. å‘é€ç«¯å£ 25 å¯èƒ½ä¸é€šï¼Œè¯·å°è¯• 465 æˆ– 587 ç«¯å£ã€‚è‹¥è¿˜æ˜¯ä¸è¡Œï¼Œå»ºè®®æ›´æ¢å…¶ä»–å“ç‰Œçš„é‚®ç®±æµ‹è¯•ã€‚</p><p><strong>ç®€å•é‚®ä»¶ä¼ è¾“åè®® (Simple Mail Transfer Protocol, SMTP)</strong> æ˜¯åœ¨Internetä¼ è¾“Emailçš„åè®®æ ‡å‡†ã€‚</p><p>SMTPæ˜¯åŸºäºæ–‡æœ¬çš„åè®®ã€‚åœ¨å…¶ä¹‹ä¸ŠæŒ‡å®šäº†ä¸€æ¡æ¶ˆæ¯çš„ä¸€ä¸ªæˆ–å¤šä¸ªæ¥æ”¶è€…ï¼Œç„¶åæ¶ˆæ¯æ–‡æœ¬ä¼šè¢«ä¼ è¾“ã€‚SMTPä½¿ç”¨TCPç«¯å£25ã€‚</p><p>SMTPæ˜¯ä¸€ä¸ªâ€œæ¨â€çš„åè®®ï¼ˆå‘é€é‚®ä»¶ï¼‰ï¼Œå®ƒä¸å…è®¸ä»è¿œç¨‹æœåŠ¡å™¨ä¸Šâ€œæ‹‰â€æ¥æ¶ˆæ¯ï¼ˆæ¥æ”¶é‚®ä»¶ï¼‰ã€‚è¦æ¥æ”¶é‚®ä»¶ï¼Œå®¢æˆ·ç«¯å¿…é¡»ä½¿ç”¨<strong>POP3</strong>æˆ–<strong>IMAP</strong>ã€‚</p></blockquote><p>è®¾ç½®å¥½åå°±å¯ä»¥å¼€å¯æœåŠ¡å™¨æµ‹è¯•äº†ã€‚</p><p>ç‚¹å‡»ç™»å½•é¡µé¢ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181102/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE76.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181102/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE76.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ç‚¹å‡»æœ€åä¸€è¡Œçš„é“¾æ¥â€œè¿™é‡Œâ€ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181102/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE77.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181102/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE77.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>æŒ‰ç…§è¦æ±‚è¾“å…¥ç”¨æˆ·åæˆ–è€…Emailï¼Œç‚¹å‡»ç¡®è®¤æŒ‰é’®ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181102/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE78a.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181102/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE78a.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>æç¤ºå·²ç»æŠŠé‡ç½®å¯†ç çš„é“¾æ¥å‘åˆ°é‚®ç®±ä¸­äº†ã€‚</p><p>å‰å¾€Emailä¸­æŸ¥çœ‹æ–°é‚®ä»¶ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181102/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE79.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181102/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE79.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>å±…ç„¶ç¥å¥‡çš„æ”¶åˆ°äº†é‚®ä»¶ï¼ç»§ç»­ç‚¹å‡»é‚®ä»¶ä¸­çš„é“¾æ¥ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181102/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE81.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181102/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE81.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>æŒ‰ç…§æç¤ºè¾“å…¥æ–°å¯†ç åï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181102/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE80.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181102/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE80.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>å¯†ç é‡ç½®å°±æˆåŠŸäº†ã€‚</p><p>å°è¯•ä¸€ä¸‹æ–°å¯†ç ç™»å½•æ˜¯æ²¡é—®é¢˜çš„ï¼Œé¡ºåˆ©å®Œæˆäº†ä»»åŠ¡ã€‚</p><p>ç¯‡å¹…å…³ç³»å°±æ²¡æœ‰å»æŒ¨ä¸ªè¦†å†™åŸæœ‰çš„æ¨¡æ¿æ–‡ä»¶äº†ã€‚å¦‚æœæœ‰å…´è¶£å¯ä»¥ä»”ç»†é˜…è¯»å®˜æ–¹æ–‡æ¡£ï¼Œå°è¯•å»æ”¹å†™æ¨¡æ¿æ–‡ä»¶ï¼Œè®©é¡µé¢æ›´åŠ åŒ¹é…è‡ªå·±ç½‘ç«™çš„é£æ ¼ã€‚</p><p><strong>å®˜æ–¹æ–‡æ¡£åœ¨è¿™é‡Œï¼š</strong><a href="https://django-password-reset.readthedocs.io/en/latest/index.html">docs</a></p><p><strong>GitHubï¼š</strong><a href="https://github.com/brutasse/django-password-reset">django-password-reset</a></p><p>ç›¸ä¿¡è¯»è€…ä¹Ÿå°åˆ°ä½¿ç”¨ä¸‰æ–¹åº“çš„ç”œå¤´äº†ï¼š<strong>åªéœ€è¦å†™å¾ˆå°‘çš„ä»£ç ï¼Œå°±å¯ä»¥å®Œæˆå¤§é‡çš„åŠŸèƒ½ã€‚</strong>ç¬”è€…æ˜¯æ¨èåœ¨å¼€å‘ä¸­å¤šä½¿ç”¨ä¼˜ç§€çš„ä¸‰æ–¹åº“çš„ï¼Œå¯ä»¥æå¤§çš„æé«˜æ•ˆç‡ï¼Œå‡å°‘é‡å¤åŠ³åŠ¨ã€‚å½“ç„¶ä½¿ç”¨ä¸‰æ–¹åº“ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ï¼Œæ¯”å¦‚ä¼šå› ä¸ºä¸€çŸ¥åŠè§£è€Œç»´æŠ¤å›°éš¾ã€ä¸èƒ½é‡èº«å®šåˆ¶ç­‰ã€‚åœ¨å®è·µä¸­åˆ°åº•ç”¨è¿˜æ˜¯ä¸ç”¨ï¼Œå°±æ ¹æ®å®é™…æƒ…å†µå†åšæƒè¡¡äº†ã€‚</p><p>åé¢é™†ç»­è¿˜ä¼šä»‹ç»æ›´å¤šçš„ä¸‰æ–¹åº“ï¼Œè¿˜æ˜¯è´¯å½»é‚£å¥è¯ï¼šæˆåŠŸæ˜¯ç«™åœ¨å·¨äººè‚©è†€ä¸Šçš„ã€‚</p><h2 id="å¸¸è§é”™è¯¯"><a href="#å¸¸è§é”™è¯¯" class="headerlink" title="å¸¸è§é”™è¯¯"></a>å¸¸è§é”™è¯¯</h2><p>å‘é€é‚®ä»¶å› ä¸ºæ¶‰åŠåˆ°äº†å‘é€é‚®ç®±çš„ç›¸å…³è®¾ç½®å’Œæƒé™ï¼Œæ‰€ä»¥å®¹æ˜“å‡ºå„ç§å„æ ·å¥‡æ€ªçš„é—®é¢˜ã€‚</p><p>å¥½æ¯”è¯´ä½ çš„å‘é€é‚®ç®±è®¾ç½®æ˜¯<a href="mailto:&#x78;&#x78;&#x78;&#64;&#x73;&#105;&#x6e;&#x61;&#46;&#99;&#111;&#x6d;">&#x78;&#x78;&#x78;&#64;&#x73;&#105;&#x6e;&#x61;&#46;&#99;&#111;&#x6d;</a>ã€‚é¡¹ç›®ä»£ç éƒ½æ˜¯å¯¹çš„ï¼Œä½†æ˜¯æ–°æµªç¦æ­¢äº†smtpæœåŠ¡ï¼Œé‚£é‚®ä»¶ä¹Ÿä¼šå‘é€ä¸æˆåŠŸã€‚å¦‚æœæŠ¥é”™è¯·å°è¯•ä»¥ä¸‹æ–¹æ³•ï¼š</p><ul><li>è®¾ç½®å‘é€é‚®ç®±ä¸ºå…è®¸smtpæœåŠ¡</li><li>æ£€æŸ¥è´¦å·ã€å¯†ç æ˜¯å¦æ­£ç¡®</li><li>æœ‰çš„å‘é€ç«¯å£éœ€è¦é¢å¤–çš„è®¾ç½®ï¼Œå°è¯•æ›´æ¢ç«¯å£</li><li>æ›´æ¢å…¶ä»–æœåŠ¡å•†çš„é‚®ç®±</li></ul><p>å¦‚æœè¿˜ä¸è¡Œï¼Œå°±è¯·æ ¹æ®æŠ¥é”™é¡µé¢ï¼Œæœç´¢ä¸€ä¸‹ç±»ä¼¼é—®é¢˜çš„è§£å†³æ–¹æ¡ˆäº†ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« å­¦ä¹ äº†ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“<code>django-password-reset</code>ï¼Œé«˜æ•ˆå®Œæˆäº†é‡ç½®å¯†ç çš„åŠŸèƒ½ã€‚</p><p>ä¸‹ä¸€ç« å­¦ä¹ æ‰©å±•å¹¶æ›´æ–°ç”¨æˆ·èµ„æ–™ã€‚</p><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#100;&#117;&#115;&#x61;&#105;&#x70;&#104;&#x6f;&#116;&#111;&#64;&#x66;&#x6f;&#x78;&#109;&#x61;&#105;&#108;&#x2e;&#x63;&#x6f;&#x6d;">&#100;&#117;&#115;&#x61;&#105;&#x70;&#104;&#x6f;&#116;&#111;&#64;&#x66;&#x6f;&#x78;&#109;&#x61;&#105;&#108;&#x2e;&#x63;&#x6f;&#x6d;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--18.ä¸Šä¼ å¤´åƒ</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/18.shang-chuan-tou-xiang/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/18.shang-chuan-tou-xiang/</url>
      
        <content type="html"><![CDATA[<p>åˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬çš„åšå®¢å¤„ç†çš„éƒ½æ˜¯æ–‡å­—ã€‚ç°ä»£äº’è”ç½‘æ—©å°±è¿›å…¥äº†â€œè¯»å›¾â€æ—¶ä»£ï¼Œå›¾ç‰‡çš„ç»´æŠ¤ã€å±•ç¤ºä¹Ÿå°±ç›¸å½“é‡è¦ã€‚</p><p>ä¸Šä¸€ç« ä¸­é¢„ç•™äº†avatarå­—æ®µï¼Œç”¨æ¥ä¿å­˜ç”¨æˆ·ä¸Šä¼ çš„å¤´åƒï¼Œç°åœ¨æˆ‘ä»¬æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚</p><h2 id="å¿…è¦çš„è®¾ç½®"><a href="#å¿…è¦çš„è®¾ç½®" class="headerlink" title="å¿…è¦çš„è®¾ç½®"></a>å¿…è¦çš„è®¾ç½®</h2><p>å›¾ç‰‡å±äºä¸€ç§åª’ä½“æ–‡ä»¶ï¼Œå®ƒä¸é™æ€æ–‡ä»¶ç±»ä¼¼ï¼Œ<strong>éœ€è¦è®¾ç½®ä¸€ä¸ªç»Ÿä¸€çš„ç›®å½•</strong>ï¼Œä¾¿äºé›†ä¸­å­˜å‚¨å’Œè®¿é—®ã€‚</p><p>è¿™ç±»éœ€è¦æ¡†æ¶ç»Ÿä¸€è®¾ç½®çš„å‚æ•°ï¼Œå½“ç„¶åº”è¯¥åœ¨<code>/my_blog/settings.py</code>ä¸­ã€‚åœ¨åº•éƒ¨åŠ ä¸Šï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">/</span>my_blog<span class="token operator">/</span>settings<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># åª’ä½“æ–‡ä»¶åœ°å€</span>MEDIA_URL <span class="token operator">=</span> <span class="token string">'/media/'</span>MEDIA_ROOT <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>BASE_DIR<span class="token punctuation">,</span> <span class="token string">'media/'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>MEDIA_ROOT</strong>å’Œ<strong>MEDIA_URL</strong>æ˜¯ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶ä¿å­˜ã€è®¿é—®çš„ä½ç½®ï¼š</p><ul><li><p>åœ¨å‰é¢çš„<code>Profile</code>ä¸­æˆ‘ä»¬è®¾ç½®äº†<strong>upload_to</strong>å‚æ•°ã€‚æœ‰äº†è¿™ä¸ªå‚æ•°ï¼Œæ–‡ä»¶ä¸Šä¼ åå°†è‡ªåŠ¨ä¿å­˜åˆ°é¡¹ç›®æ ¹ç›®å½•çš„<code>media</code>æ–‡ä»¶å¤¹ä¸­ã€‚ <code>os.path.join(MEDIA_ROOT, &#39;media/&#39;)</code>æŒ‡å®šäº†mediaæ–‡ä»¶å¤¹çš„ä½ç½®ã€‚</p></li><li><p>MEDIA_URLä»£è¡¨ç”¨æˆ·é€šè¿‡URLæ¥è®¿é—®è¿™ä¸ªæœ¬åœ°åœ°å€çš„URLã€‚è®¾ç½®å¥½è¿™ä¸ªå‚æ•°åï¼Œç”¨æˆ·å°±å¯ä»¥é€šè¿‡è§£æurlï¼Œå¾ˆæ–¹ä¾¿çš„è·å–æ–‡ä»¶çš„åœ°å€ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯é¿å…çš„ç¡¬ç¼–ç ï¼Œè®©ä»£ç æ›´å®¹æ˜“ç»´æŠ¤ã€‚</p></li></ul><p>Djangoæ¡†æ¶æ“…é•¿çš„æ˜¯å¯¹é€»è¾‘çš„å¤„ç†ï¼Œè€Œå¯¹å›¾ç‰‡è¿™ç±»æ–‡ä»¶çš„å¤„ç†åˆ™éå¸¸çš„è€—æ—¶ã€‚å› æ­¤åœ¨å®é™…çš„<strong>ç”Ÿäº§ç¯å¢ƒ</strong>ä¸­ï¼ˆå³äº§å“ä¸Šçº¿ä¹‹åï¼‰ï¼Œé€šå¸¸æ˜¯æœ‰ä¸“é—¨çš„WebæœåŠ¡å™¨æ¥å¤„ç†æ–‡ä»¶çš„è®¿é—®ã€‚</p><p>è€Œåœ¨å¼€å‘é˜¶æ®µæˆ‘ä»¬ä¸ä¼šåœ¨æ„æ•ˆç‡é—®é¢˜ï¼Œæ‰€ä»¥Djangoä¹Ÿæä¾›äº†æ–¹æ³•ï¼Œè®©å¼€å‘æœåŠ¡å™¨èƒ½å¤Ÿå¤„ç†å›¾ç‰‡ã€‚</p><p>åœ¨<code>/my_blog/urls.py</code>æ·»åŠ ä¸‹é¢çš„è¯­å¥ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">/</span>my_blog<span class="token operator">/</span>urls<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># æ–°å¼•å…¥çš„æ¨¡å—</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>conf <span class="token keyword">import</span> settings<span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls<span class="token punctuation">.</span>static <span class="token keyword">import</span> staticurlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token comment">#æ·»åŠ è¿™è¡Œ</span>urlpatterns <span class="token operator">+=</span> static<span class="token punctuation">(</span>settings<span class="token punctuation">.</span>MEDIA_URL<span class="token punctuation">,</span> document_root<span class="token operator">=</span>settings<span class="token punctuation">.</span>MEDIA_ROOT<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·å°±ä¸ºä»¥åä¸Šä¼ çš„å›¾ç‰‡é…ç½®å¥½äº†URLè·¯å¾„ã€‚</p><h2 id="ç¼–å†™MTV"><a href="#ç¼–å†™MTV" class="headerlink" title="ç¼–å†™MTV"></a>ç¼–å†™MTV</h2><p>å›é¡¾ä¸€ä¸‹ï¼Œ<code>avatar</code>çš„å­—æ®µå·²ç»åœ¨ä¸Šä¸€ç« å†™å¥½äº†ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">/</span>userprofile<span class="token operator">/</span>models<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token class-name">Profile</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    avatar <span class="token operator">=</span> models<span class="token punctuation">.</span>ImageField<span class="token punctuation">(</span>upload_to<span class="token operator">=</span><span class="token string">'avatar/%Y%m%d/'</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>upload_to</code>æŒ‡å®šäº†å›¾ç‰‡ä¸Šä¼ çš„ä½ç½®ï¼Œå³<code>/media/avatar/%Y%m%d/</code>ã€‚<code>%Y%m%d</code>æ˜¯æ—¥æœŸæ ¼å¼åŒ–çš„å†™æ³•ï¼Œä¼šæœ€ç»ˆæ ¼å¼åŒ–ä¸ºç³»ç»Ÿæ—¶é—´ã€‚æ¯”å¦‚è¯´å›¾ç‰‡ä¸Šä¼ æ˜¯2018å¹´12æœˆ5æ—¥ï¼Œåˆ™å›¾ç‰‡ä¼šä¿å­˜åœ¨<code>/media/avatar/2018205/</code>ä¸­ã€‚</p><blockquote><p>æ³¨æ„<code>ImageField</code>å­—æ®µä¸ä¼šå­˜å‚¨å›¾ç‰‡æœ¬èº«ï¼Œè€Œä»…ä»…ä¿å­˜å›¾ç‰‡çš„åœ°å€ã€‚</p><p>è®°å¾—ç”¨pipæŒ‡ä»¤å®‰è£…Pillowã€‚</p></blockquote><p>è¡¨å•ç±»åœ¨å‰é¢ä¹Ÿå†™å¥½äº†ï¼Œä¸ç”¨ä¿®æ”¹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">/</span>userprofile<span class="token operator">/</span>forms<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token class-name">ProfileForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        model <span class="token operator">=</span> Profile        fields <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'phone'</span><span class="token punctuation">,</span> <span class="token string">'avatar'</span><span class="token punctuation">,</span> <span class="token string">'bio'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ç€éœ€è¦ä¿®æ”¹è§†å›¾ï¼Œä½¿ä¹‹èƒ½å¤Ÿå¯¹å›¾ç‰‡è¿›è¡Œå¤„ç†ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">/</span>userprofile<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token decorator annotation punctuation">@login_required</span><span class="token punctuation">(</span>login_url<span class="token operator">=</span><span class="token string">'/userprofile/login/'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">profile_edit</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># ä¿®æ”¹æœ¬è¡Œ</span>    <span class="token comment"># ä¸Šä¼ çš„æ–‡ä»¶ä¿å­˜åœ¨ request.FILES ä¸­ï¼Œé€šè¿‡å‚æ•°ä¼ é€’ç»™è¡¨å•ç±»</span>    profile_form <span class="token operator">=</span> ProfileForm<span class="token punctuation">(</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">,</span> request<span class="token punctuation">.</span>FILES<span class="token punctuation">)</span>    <span class="token keyword">if</span> profile_form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>                <span class="token comment"># æ·»åŠ åœ¨ profile.bio = profile_cd['bio'] åé¢</span>        <span class="token comment"># å¦‚æœ request.FILES å­˜åœ¨æ–‡ä»¶ï¼Œåˆ™ä¿å­˜</span>        <span class="token keyword">if</span> <span class="token string">'avatar'</span> <span class="token keyword">in</span> request<span class="token punctuation">.</span>FILES<span class="token punctuation">:</span>            profile<span class="token punctuation">.</span>avatar <span class="token operator">=</span> profile_cd<span class="token punctuation">[</span><span class="token string">"avatar"</span><span class="token punctuation">]</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>è¡¨å•ä¸Šä¼ çš„æ–‡ä»¶å¯¹è±¡å­˜å‚¨åœ¨ç±»å­—å…¸å¯¹è±¡<code>request.FILES</code>ä¸­ï¼Œå› æ­¤éœ€è¦ä¿®æ”¹è¡¨å•ç±»çš„å‚æ•°ï¼Œå°†å®ƒä¸€å¹¶ä¼ é€’è¿›å»ã€‚</li><li>å¦‚æœ<code>request.FILES</code>ä¸­å­˜åœ¨é”®ä¸º<code>avatar</code>çš„å…ƒç´ ï¼Œåˆ™å°†å…¶èµ‹å€¼ç»™<code>profile.avatar</code>ï¼ˆæ³¨æ„ä¿å­˜çš„æ˜¯å›¾ç‰‡åœ°å€ï¼‰ï¼›å¦åˆ™ä¸è¿›è¡Œå¤„ç†ã€‚</li></ul><p>ä¿®æ”¹æ¨¡æ¿æ–‡ä»¶ï¼Œæ·»åŠ ä»£ç æ˜¾ç¤ºã€å¤„ç†ç”¨æˆ·çš„å¤´åƒï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">/templates/userprofile/edit.html...&#123;% if profile.avatar %&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-md-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å¤´åƒ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123; profile.avatar.url &#125;&#125;<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">max-width</span><span class="token punctuation">:</span> 20%<span class="token punctuation">;</span> <span class="token property">border-radius</span><span class="token punctuation">:</span> 15%<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-md-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;% else %&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h5</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-md-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æš‚æ— å¤´åƒ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">></span></span>&#123;% endif %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">...</span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;% csrf_token %&#125;    <span class="token comment">&lt;!-- avatar --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¸Šä¼ å¤´åƒ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control-file<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        ...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ¨¡æ¿è¯­æ³•<code>&#123;% if ... %&#125;</code>åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ä¸Šä¼ å¤´åƒã€‚</li><li><code>&lt;img&gt;</code>æ ‡ç­¾ç”¨äºæ˜¾ç¤ºå›¾ç‰‡å†…å®¹ï¼›åœ¨<code>style</code>å±æ€§ä¸­è§„å®šäº†å›¾ç‰‡çš„æœ€å¤§å®½åº¦å¹¶å¸¦æœ‰ä¸€ç‚¹çš„åœ†è§’ã€‚</li><li><strong>æ³¨æ„</strong>ï¼Œè¡¨å•å¿…é¡»è®¾ç½®<code>enctype=&quot;multipart/form-data&quot;</code>å±æ€§ï¼Œæ‰èƒ½å¤Ÿæ­£ç¡®ä¸Šä¼ å›¾ç‰‡ç­‰æ–‡ä»¶ã€‚</li><li>æ·»åŠ <code>&lt;input type=&quot;file&quot; ...&gt;</code>æ ‡ç­¾ç”¨äºä¸Šä¼ å›¾ç‰‡ã€‚</li></ul><p>å¯åŠ¨æœåŠ¡å™¨ï¼Œåˆ·æ–°ç”¨æˆ·ä¿¡æ¯é¡µé¢ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181206/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE89.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181206/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE89.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ç‚¹å‡»<strong>é€‰æ‹©å›¾ç‰‡</strong>ï¼Œä¸Šä¼ ä¸€å¼ å›¾ç‰‡åç‚¹å‡»<strong>æäº¤</strong>ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181206/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE90.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181206/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE90.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>æŸ¥çœ‹ä¸€ä¸‹é¡¹ç›®ç›®å½•ï¼Œç”Ÿæˆäº†æ–°çš„æ–‡ä»¶å¤¹<code>media/avatar/20181205/</code>ï¼Œå…¶ä¸­å­˜å‚¨äº†è¯¥å¤´åƒæ–‡ä»¶ï¼›åœ¨<strong>SQLiteStudio</strong>ä¸­æŸ¥çœ‹<code>avatar</code>å­—æ®µï¼Œå…¶ä¿å­˜çš„æ˜¯æ–‡ä»¶çš„urlåœ°å€ã€‚</p><blockquote><p>é™¤äº†ä¸Šä¼ ï¼Œå›¾ç‰‡çš„å¤„ç†è¿˜åŒ…æ‹¬éªŒè¯æ ¼å¼ã€æ”¹å˜å°ºå¯¸ã€æ›´åã€è£å‰ªã€ç¾åŒ–ç­‰å¤šç§å¤šæ ·çš„éœ€æ±‚ã€‚</p><p>å¦‚æœä¸Šä¼ çš„å›¾ç‰‡é‡åï¼Œä¼šå¯¼è‡´æŠ¥é”™å—ï¼Ÿè¯·è¯•è¯•çœ‹ã€‚</p><p>æ›´æ”¹å›¾ç‰‡ä»…ä»…ä¼šæ”¹å˜å­—æ®µä¸­å­˜å‚¨çš„urlï¼Œå¹¶ä¸ä¼šçœŸæ­£åˆ é™¤å›¾ç‰‡æœ¬èº«ã€‚å› æ­¤åœ¨å¤„ç†å¤§å®¹é‡æ–‡ä»¶æ—¶è¦å°å¿ƒï¼Œéœ€è¦é¢å¤–çš„æ–¹æ³•è¿›è¡Œæ¸…ç†ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« å­¦ä¹ äº†é€šè¿‡è¡¨å•ä¸Šä¼ æ–‡ä»¶çš„åŸºç¡€çŸ¥è¯†ã€‚æ›´åŠ é«˜çº§çš„æ–‡ä»¶å¤„ç†æ‰‹æ®µè¿˜éœ€åœ¨æ¢ç´¢ä¸­ä¸æ–­å‘æ˜ã€‚ä½ è¿˜å¯ä»¥åˆ©ç”¨BootStrapçŸ¥è¯†ï¼Œç¾åŒ–ä¸ªäººä¿¡æ¯å¤–è§‚ï¼Œä½¿å®ƒåƒä¸€ä¸ªå®Œå–„çš„äº§å“çº§é¡µé¢ã€‚</p><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#x64;&#x75;&#115;&#x61;&#x69;&#112;&#104;&#111;&#116;&#111;&#64;&#102;&#111;&#x78;&#x6d;&#x61;&#x69;&#108;&#x2e;&#99;&#111;&#x6d;">&#x64;&#x75;&#115;&#x61;&#x69;&#112;&#104;&#111;&#116;&#111;&#64;&#102;&#111;&#x78;&#x6d;&#x61;&#x69;&#108;&#x2e;&#99;&#111;&#x6d;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul><blockquote><p>è½¬è½½è¯·å‘ŠçŸ¥ä½œè€…å¹¶æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--19.æ–‡ç« åˆ†é¡µ</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/19.wen-zhang-fen-ye/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/19.wen-zhang-fen-ye/</url>
      
        <content type="html"><![CDATA[<p>éšç€æ—¶é—´çš„æ¨ç§»ï¼ˆ<strong>åŠ ä¸Šå‹¤å¥‹çš„å†™ä½œï¼</strong>ï¼‰ï¼Œä½ çš„åšå®¢æ–‡ç« ä¸€å®šä¼šè¶Šæ¥è¶Šå¤šã€‚å¦‚æœä¸è¿›è¡Œå¤„ç†ï¼Œå¯èƒ½åŒä¸€ä¸ªé¡µé¢ä¼šæŒ¤ä¸Šæˆç™¾ä¸Šåƒçš„æ–‡ç« ï¼Œä¸ç¾è§‚ä¸è¯´ï¼Œè¿˜é™ä½äº†é¡µé¢çš„ååº”é€Ÿåº¦ã€‚</p><p>è¿™ä¸ªæ—¶å€™å°±éœ€è¦å¯¹æ–‡ç« è¿›è¡Œåˆ†é¡µçš„å¤„ç†ã€‚</p><h2 id="åˆ©ç”¨è½®å­"><a href="#åˆ©ç”¨è½®å­" class="headerlink" title="åˆ©ç”¨è½®å­"></a>åˆ©ç”¨è½®å­</h2><p>å†™ä¸€ä¸ªå®Œå–„çš„åˆ†é¡µåŠŸèƒ½æ˜¯æœ‰äº›éš¾åº¦çš„ï¼Œå¥½åœ¨Djangoå·²ç»å¸®ä½ å‡†å¤‡å¥½ä¸€ä¸ªç°æˆçš„åˆ†é¡µæ¨¡å—äº†ï¼ˆDjangoæŠŠå¤§éƒ¨åˆ†åŸºç¡€åŠŸèƒ½éƒ½æ›¿ä½ å‡†å¤‡å¥½äº†ï¼ï¼‰ã€‚å†…ç½®æ¨¡å—è™½ç„¶ç®€å•ï¼Œä½†æ˜¯å¯¹åšå®¢æ¥è¯´å®Œå…¨è¶³å¤Ÿäº†ã€‚</p><p>æˆ‘ä»¬è¦ç”¨åˆ°çš„æ˜¯<code>Paginator</code>ç±»ã€‚åœ¨<code>Shell</code>ä¸­å¯ä»¥å……åˆ†å°è¯•å®ƒçš„ç”¨æ³•ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">from</span> django<span class="token punctuation">.</span>core<span class="token punctuation">.</span>paginator <span class="token keyword">import</span> Paginator<span class="token operator">>></span><span class="token operator">></span> objects <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'john'</span><span class="token punctuation">,</span> <span class="token string">'paul'</span><span class="token punctuation">,</span> <span class="token string">'george'</span><span class="token punctuation">,</span> <span class="token string">'ringo'</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> p <span class="token operator">=</span> Paginator<span class="token punctuation">(</span>objects<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> p<span class="token punctuation">.</span>count<span class="token number">4</span><span class="token operator">>></span><span class="token operator">></span> p<span class="token punctuation">.</span>num_pages<span class="token number">2</span><span class="token operator">>></span><span class="token operator">></span> p<span class="token punctuation">.</span>page_range<span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> page1 <span class="token operator">=</span> p<span class="token punctuation">.</span>page<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> page1<span class="token operator">&lt;</span>Page <span class="token number">1</span> of <span class="token number">2</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span> page1<span class="token punctuation">.</span>object_list<span class="token punctuation">[</span><span class="token string">'john'</span><span class="token punctuation">,</span> <span class="token string">'paul'</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> page2 <span class="token operator">=</span> p<span class="token punctuation">.</span>page<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> page2<span class="token punctuation">.</span>object_list<span class="token punctuation">[</span><span class="token string">'george'</span><span class="token punctuation">,</span> <span class="token string">'ringo'</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> page2<span class="token punctuation">.</span>has_next<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token boolean">False</span><span class="token operator">>></span><span class="token operator">></span> page2<span class="token punctuation">.</span>has_previous<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> page2<span class="token punctuation">.</span>has_other_pages<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> page2<span class="token punctuation">.</span>previous_page_number<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>è¿™æ˜¯ä¸€ä¸ªå®˜ç½‘çš„ä¾‹å­ã€‚è¯¦è§ï¼š<a href="https://docs.djangoproject.com/zh-hans/2.1/topics/pagination/">Pagination</a></p></blockquote><p>æœ‰äº†è¿™ä¸ªç±»ï¼Œå‰©ä¸‹çš„å·¥ä½œå°±æ˜¯æŠŠå®ƒåº”ç”¨åˆ°é¡¹ç›®ä¸­å»ã€‚</p><h2 id="è½»è½¦ç†Ÿè·¯"><a href="#è½»è½¦ç†Ÿè·¯" class="headerlink" title="è½»è½¦ç†Ÿè·¯"></a>è½»è½¦ç†Ÿè·¯</h2><p>è¦å¯¹æ–‡ç« åˆ—è¡¨åˆ†é¡µï¼Œå› æ­¤å°±è¦ä¿®æ”¹<code>article/views.py</code>çš„<code>def article_list()</code>è§†å›¾ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># å¼•å…¥åˆ†é¡µæ¨¡å—</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>core<span class="token punctuation">.</span>paginator <span class="token keyword">import</span> Paginator<span class="token keyword">def</span> <span class="token function">article_list</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># ä¿®æ”¹å˜é‡åç§°ï¼ˆarticles -> article_listï¼‰</span>    article_list <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># æ¯é¡µæ˜¾ç¤º 1 ç¯‡æ–‡ç« </span>    paginator <span class="token operator">=</span> Paginator<span class="token punctuation">(</span>article_list<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token comment"># è·å– url ä¸­çš„é¡µç </span>    page <span class="token operator">=</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'page'</span><span class="token punctuation">)</span>    <span class="token comment"># å°†å¯¼èˆªå¯¹è±¡ç›¸åº”çš„é¡µç å†…å®¹è¿”å›ç»™ articles</span>    articles <span class="token operator">=</span> paginator<span class="token punctuation">.</span>get_page<span class="token punctuation">(</span>page<span class="token punctuation">)</span>    context <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token string">'articles'</span><span class="token punctuation">:</span> articles <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'article/list.html'</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨è§†å›¾ä¸­é€šè¿‡<code>Paginator</code>ç±»ï¼Œç»™ä¼ é€’ç»™æ¨¡æ¿çš„å†…å®¹åšäº†æ‰‹è„šï¼š<strong>è¿”å›çš„ä¸å†æ˜¯æ‰€æœ‰æ–‡ç« çš„é›†åˆï¼Œè€Œæ˜¯å¯¹åº”é¡µç çš„éƒ¨åˆ†æ–‡ç« çš„å¯¹è±¡ï¼Œå¹¶ä¸”è¿™ä¸ªå¯¹è±¡è¿˜åŒ…å«äº†åˆ†é¡µçš„æ–¹æ³•ã€‚</strong></p><p>æˆ‘ä»¬åœ¨å‰é¢çš„æ–‡ç« å·²ç»æ¥è§¦è¿‡ä¸€äº›å°†å‚æ•°ä¼ é€’åˆ°è§†å›¾çš„æ‰‹æ®µäº†ï¼š</p><ul><li>é€šè¿‡POSTè¯·æ±‚å°†è¡¨å•æ•°æ®ä¼ é€’åˆ°è§†å›¾</li><li>é€šè¿‡urlå°†åœ°å€ä¸­çš„å‚æ•°ä¼ é€’åˆ°è§†å›¾</li></ul><p>è¿™é‡Œç”¨åˆ°äº†å¦ä¸€ç§æ–¹æ³•ï¼šåœ¨GETè¯·æ±‚ä¸­ï¼Œåœ¨urlçš„æœ«å°¾é™„ä¸Š<code>?key=value</code>çš„é”®å€¼å¯¹ï¼Œè§†å›¾ä¸­å°±å¯ä»¥é€šè¿‡<code>request.GET.get(&#39;key&#39;)</code>æ¥æŸ¥è¯¢<code>value</code>çš„å€¼ã€‚</p><p>ç„¶åæ”¹å†™æ¨¡æ¿ï¼Œåœ¨æœ€æœ«å°¾çš„<code>&lt;/div&gt;</code>å‰é¢ï¼ŒåŠ å…¥åˆ†é¡µçš„å†…å®¹ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/list.html...<span class="token comment">&lt;!-- é¡µç å¯¼èˆª --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pagination row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>m-auto<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>step-links<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!-- å¦‚æœä¸æ˜¯ç¬¬ä¸€é¡µï¼Œåˆ™æ˜¾ç¤ºä¸Šç¿»æŒ‰é’® --></span>            &#123;% if articles.has_previous %&#125;                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?page=1<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-success<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token entity named-entity" title="&laquo;">&amp;laquo;</span> 1                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?page=&#123;&#123; articles.previous_page_number &#125;&#125;<span class="token punctuation">"</span></span>                    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-secondary<span class="token punctuation">"</span></span>                <span class="token punctuation">></span></span>                    &#123;&#123; articles.previous_page_number &#125;&#125;                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>            &#123;% endif %&#125;            <span class="token comment">&lt;!-- å½“å‰é¡µé¢ --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>current btn btn-danger btn-lg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                &#123;&#123; articles.number &#125;&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!-- å¦‚æœä¸æ˜¯æœ€æœ«é¡µï¼Œåˆ™æ˜¾ç¤ºä¸‹ç¿»æŒ‰é’® --></span>            &#123;% if articles.has_next %&#125;                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?page=&#123;&#123; articles.next_page_number &#125;&#125;<span class="token punctuation">"</span></span>                   <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-secondary<span class="token punctuation">"</span></span>                <span class="token punctuation">></span></span>                    &#123;&#123; articles.next_page_number &#125;&#125;                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?page=&#123;&#123; articles.paginator.num_pages &#125;&#125;<span class="token punctuation">"</span></span>                   <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-success<span class="token punctuation">"</span></span>                <span class="token punctuation">></span></span>                    &#123;&#123; articles.paginator.num_pages &#125;&#125; <span class="token entity named-entity" title="&raquo;">&amp;raquo;</span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>            &#123;% endif %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å†…å®¹ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œç”¨åˆ°äº†å‰é¢çš„<code>Shell</code>ä¸­æ¼”ç¤ºçš„éƒ¨åˆ†æ–¹æ³•ï¼Œåˆ¤æ–­å½“å‰é¡µæ‰€å¤„çš„ä½ç½®ã€‚</p><p>è¿™æ ·å°±è¡Œäº†ï¼è¡¥å……å‡ ç¯‡æ–‡ç« ï¼ˆç¬”è€…å…±6ç¯‡ï¼‰ï¼Œæ–¹ä¾¿æµ‹è¯•ã€‚åˆ·æ–°é¡µé¢åæ˜¯è¿™æ ·çš„ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181220/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE115.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181220/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE115.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>è§†å›¾ä¸­è®¾ç½®äº†æ¯é¡µåªæœ‰1ç¯‡æ–‡ç« ï¼Œæ‰€ä»¥å°±çœŸçš„åªæœ‰1ç¯‡äº†ã€‚</p><p>å½“ç„¶è¿™åªæ˜¯ä¸ºäº†æµ‹è¯•ï¼Œå®é™…ç¯å¢ƒä¸­è‚¯å®šè¦è¿œå¤§äº1ç¯‡çš„ã€‚</p><p>ç‚¹å‡»ç¬¬2é¡µçš„æŒ‰é’®åæ˜¯è¿™æ ·çš„ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181220/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE113.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181220/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE113.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p><strong>çœ‹åˆ°é¡¶éƒ¨åœ°å€æ ä¸­çš„å˜åŒ–äº†å—ï¼Ÿ</strong></p><p>æ€è€ƒä¸€ä¸‹<code>page</code>æ˜¯å¦‚ä½•ä»æ¨¡æ¿ä¼ é€’åˆ°è§†å›¾çš„ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é™¤æ¨¡æ¿å¤–ï¼Œæˆ‘ä»¬åªå†™äº†4è¡Œä»£ç ï¼Œå°±æœ‰äº†è¿˜ä¸é”™çš„åˆ†é¡µå¯¼èˆªï¼ŒDjangoå°±æ˜¯è¿™ä¹ˆè´´å¿ƒã€‚</p><p>é™¤äº†å¯¹æ–‡ç« åˆ—è¡¨ï¼Œä½ å¯ä»¥å¯¹ä»»ä½•ä½ æƒ³åˆ†é¡µçš„åœ°æ–¹è¿ç”¨æ­¤æ¨¡å—ï¼ˆæ¯”å¦‚ä»¥åè¦è®²åˆ°çš„è¯„è®ºï¼‰ï¼Œæ»¡è¶³ç”¨æˆ·å„ç±»çš„éœ€æ±‚ã€‚</p><p>è¯»è€…è¿˜å¯ä»¥ç¨åŠ é˜…è¯»<a href="https://getbootstrap.com/">Bootstrap 4å®˜æ–¹æ–‡æ¡£</a>ï¼Œæ”¹å†™ä¸€ä¸ªç¬¦åˆè‡ªå·±å“å‘³çš„å¤–è§‚ã€‚</p><hr><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#100;&#117;&#115;&#97;&#x69;&#112;&#104;&#111;&#116;&#x6f;&#64;&#102;&#x6f;&#x78;&#109;&#97;&#x69;&#x6c;&#x2e;&#99;&#111;&#x6d;">&#100;&#117;&#115;&#97;&#x69;&#112;&#104;&#111;&#116;&#x6f;&#64;&#102;&#x6f;&#x78;&#109;&#97;&#x69;&#x6c;&#x2e;&#99;&#111;&#x6d;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--20.æµè§ˆé‡</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/20.liu-lan-liang/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/20.liu-lan-liang/</url>
      
        <content type="html"><![CDATA[<p><strong>æ–‡ç« æµè§ˆé‡</strong>æ˜¯æ‰€æœ‰ç¤¾äº¤ç±»ç½‘ç«™æ‰€å¿…å¤‡çš„æ•°æ®ï¼Œè¶³ä»¥æ˜¾ç¤ºå…¶é‡è¦æ€§äº†ã€‚</p><p>åšä¸»å¯ä»¥é€šè¿‡æµè§ˆé‡æ¥è¯„ä¼°æŸç¯‡æ–‡ç« çš„å—æ¬¢è¿ç¨‹åº¦ï¼Œè¯»è€…ä¹Ÿèƒ½å¤Ÿé€šè¿‡æµè§ˆé‡æ¥ç­›é€‰è´¨é‡æ›´é«˜çš„æ–‡ç« ã€‚</p><p>ç„¶è€Œï¼Œå‡†ç¡®ç»Ÿè®¡æµè§ˆé‡å¹¶ä¸ç®€å•ï¼š</p><ul><li>æŸäº›ç±»å‹çš„è¯·æ±‚ä¸åº”è¯¥ç»Ÿè®¡ä¸ºæµè§ˆé‡ï¼Œæ¯”å¦‚ä½œè€…è‡ªå·±çš„æµè§ˆæˆ–ç¼–è¾‘æ–‡ç« ä¹‹åçš„é‡å®šå‘è¯·æ±‚ï¼›</li><li>ç”±äºç”¨æˆ·ä¼—å¤šï¼Œæµè§ˆé‡çš„æ•°æ®æ—¶åˆ»éƒ½åœ¨å¿«é€Ÿæ›´æ–°ï¼Œä¼šç»™æ•°æ®åº“å¸¦æ¥å¾ˆå¤§çš„å‹åŠ›ã€‚å› æ­¤å¾ˆå¤šå¤§å‹ç½‘ç«™éƒ½ä¼šä½¿ç”¨å¦‚<a href="https://redis.io/">Redis</a>è¿™æ ·çš„è¯»å†™é€Ÿåº¦éå¸¸å¿«çš„å†…å­˜æ•°æ®åº“è¾…åŠ©å­˜å‚¨ã€‚</li></ul><p>å› ä¸ºæˆ‘ä»¬çš„é¡¹ç›®æ˜¯åšå®¢ç½‘ç«™ï¼Œç²—ç•¥ç»Ÿè®¡å°±å¯ä»¥äº†ï¼Œä¹Ÿæ²¡æœ‰é‚£ä¹ˆå¤§çš„ç”¨æˆ·å‹åŠ›ï¼Œæ‰€ä»¥è®¾è®¡å°±ç®€å•å¾—å¤šäº†ã€‚</p><h2 id="æ¨¡å‹"><a href="#æ¨¡å‹" class="headerlink" title="æ¨¡å‹"></a>æ¨¡å‹</h2><p>æµè§ˆé‡ä½œä¸ºæ¯ç¯‡åšæ–‡éƒ½æœ‰çš„æ•°æ®ï¼Œéœ€è¦ä¸€ä¸ªå­—æ®µæ¥å­˜å‚¨ã€‚</p><p>å› æ­¤ä¿®æ”¹æ–‡ç« çš„æ¨¡å‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>models<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token class-name">ArticlePost</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        total_views <span class="token operator">=</span> models<span class="token punctuation">.</span>PositiveIntegerField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>PositiveIntegerField</code>æ˜¯ç”¨äºå­˜å‚¨æ­£æ•´æ•°çš„å­—æ®µ</li><li><code>default=0</code>è®¾å®šåˆå§‹å€¼ä»0å¼€å§‹</li></ul><p>ä¿®æ”¹å®Œæ•°æ®åº“åˆ«å¿˜äº†è¦<strong>æ•°æ®è¿ç§»</strong>ï¼Œå¦åˆ™æ›´æ”¹ä¸ä¼šç”Ÿæ•ˆã€‚</p><p>ç”±äºæ–°å­—æ®µè®¾ç½®äº†åˆå§‹å€¼ï¼Œè¿ç§»ä¼šå¾ˆé¡ºç•…ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> E:<span class="token punctuation">\</span>django_project<span class="token punctuation">\</span>my_blog<span class="token operator">></span>python manage.py makemigrationsMigrations <span class="token keyword">for</span> <span class="token string">'article'</span><span class="token builtin class-name">:</span>  article<span class="token punctuation">\</span>migrations<span class="token punctuation">\</span>0003_articlepost_total_views.py    - Add field total_views to articlepostMigrations <span class="token keyword">for</span> <span class="token string">'userprofile'</span><span class="token builtin class-name">:</span>  userprofile<span class="token punctuation">\</span>migrations<span class="token punctuation">\</span>0002_auto_20181227_2041.py    - Alter field avatar on profile    - Alter field user on profile<span class="token punctuation">(</span>env<span class="token punctuation">)</span> E:<span class="token punctuation">\</span>django_project<span class="token punctuation">\</span>my_blog<span class="token operator">></span>python manage.py migrateOperations to perform:  Apply all migrations: admin, article, auth, contenttypes, sessions, userprofileRunning migrations:  Applying article.0003_articlepost_total_views<span class="token punctuation">..</span>. OK  Applying userprofile.0002_auto_20181227_2041<span class="token punctuation">..</span>. OK<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åˆ—è¡¨æ¨¡æ¿"><a href="#åˆ—è¡¨æ¨¡æ¿" class="headerlink" title="åˆ—è¡¨æ¨¡æ¿"></a>åˆ—è¡¨æ¨¡æ¿</h2><p>ä¸ºäº†æ–¹ä¾¿è§‚å¯Ÿæ•ˆæœï¼Œè¿™æ¬¡å…ˆå†™æ¨¡æ¿æ–‡ä»¶ã€‚</p><p>ä»€ä¹ˆåœ°æ–¹éœ€è¦æ˜¾ç¤ºæµè§ˆé‡å‘¢ï¼Ÿå¾ˆå®¹æ˜“æƒ³åˆ°çš„å°±æ˜¯æ–‡ç« åˆ—è¡¨äº†ã€‚ä¿®æ”¹æ–‡ç« åˆ—è¡¨çš„æ¨¡æ¿ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/list.html...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-footer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- å·²æœ‰ä»£ç  --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>article:article_detail<span class="token punctuation">'</span> article.id %&#125;<span class="token punctuation">"</span></span>        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-primary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        é˜…è¯»æœ¬æ–‡    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- æ˜¾ç¤ºæµè§ˆé‡ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col align-self-end<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> gray<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>            æµè§ˆ: &#123;&#123; article.total_views &#125;&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¬”è€…å°†æµè§ˆé‡æ˜¾ç¤ºåœ¨äº†<strong>â€œé˜…è¯»æœ¬æ–‡â€</strong>çš„è¾¹ä¸Šã€‚</p><p>æœ‰çš„åŒå­¦è§‰å¾—æ˜¾ç¤ºåœ¨è¿™é‡Œä¸å¥½çœ‹ï¼Œè¯·ä¿®æ”¹ä»£ç ï¼Œå°†å…¶æ”¾åˆ°è‡ªå·±æœ€æ»¡æ„çš„åœ°æ–¹ã€‚ï¼ˆé¡ºä¾¿ç†Ÿæ‚‰ä¸€ä¸‹Bootstrapï¼ï¼‰</p><h2 id="è¯¦æƒ…æ¨¡æ¿"><a href="#è¯¦æƒ…æ¨¡æ¿" class="headerlink" title="è¯¦æƒ…æ¨¡æ¿"></a>è¯¦æƒ…æ¨¡æ¿</h2><p>é™¤äº†æ–‡ç« åˆ—è¡¨å¤–ï¼Œé€šå¸¸è¯¦æƒ…é¡µé¢ä¸­ä¹Ÿéœ€è¦æ˜¾ç¤ºæµè§ˆé‡ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨å‰é¢çš„å­¦ä¹ ä¸­ä¸ºäº†æ–¹ä¾¿ï¼Œæ²¡æœ‰åšä»»ä½•<strong>æƒé™ç®¡ç†</strong>ï¼Œä»¥è‡³äºä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥å¯¹æ‰€æœ‰æ–‡ç« è¿›è¡Œä¿®æ”¹ã€åˆ é™¤ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181228/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE118.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181228/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE118.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>è¿™æ ·æ˜¯è‚¯å®šä¸è¡Œçš„ï¼Œå¿…é¡»ä¿®å¤è¿™ä¸ªä¸¥é‡çš„é”™è¯¯ã€‚</p><p>ä¿®æ”¹<code>article/detail.html</code>æ¨¡æ¿æ–‡ä»¶ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/detail.html...<span class="token comment">&lt;!-- æ–‡ç« è¯¦æƒ… --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        ...        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-12 alert alert-success<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>                ä½œè€…ï¼š&#123;&#123; article.author &#125;&#125;                &#123;% if user == article.author %&#125;                    Â· <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">confirm_delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>åˆ é™¤æ–‡ç« <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                    Â· <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">"</span></span><span class="token attr-name"><span class="token namespace">article:</span>article_update"</span> <span class="token attr-name">article.id</span> <span class="token attr-name">%&#125;"</span><span class="token punctuation">></span></span>                        ç¼–è¾‘æ–‡ç«                     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                &#123;% endif %&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>                æµè§ˆï¼š&#123;&#123; article.total_views &#125;&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        ...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¿®æ”¹å†…å®¹æœ‰ï¼š</p><ul><li>ç¡®è®¤å½“å‰ç™»å½•ç”¨æˆ·æ˜¯æ–‡ç« çš„ä½œè€…ï¼Œæ‰æ˜¾ç¤ºâ€œåˆ é™¤æ–‡ç« ã€â€œç¼–è¾‘æ–‡ç« â€ä¸¤ä¸ªé“¾æ¥</li><li>æ˜¾ç¤ºæµè§ˆé‡</li></ul><p>ä¿®æ”¹åçš„é¡µé¢å¦‚ä¸‹ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181228/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE119.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181228/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE119.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ä¸Šå›¾ä¸­ç”±äºæ–‡ç« ä½œè€…å’Œç™»å½•ç”¨æˆ·ä¸ä¸€è‡´ï¼Œä¿®æ”¹æ–‡ç« çš„é“¾æ¥æ²¡æœ‰æ¸²æŸ“å‡ºæ¥äº†ï¼›å¦‚æœç™»å½•ç”¨æˆ·æ˜¯ä½œè€…æœ¬äººï¼Œå®ƒä»¬åˆä¼šæ­£å¸¸æ˜¾ç¤ºã€‚</p><blockquote><p>è¿™æ ·çš„æ–¹æ³•å¯ä»¥é˜»æ­¢å¤§éƒ¨åˆ†çš„â€œå¥½ç”¨æˆ·â€éæ³•ä¿®æ”¹æ•°æ®ã€‚ä½†æ˜¯å¦‚æœæœ‰â€œåç”¨æˆ·â€ç›´æ¥è¾“å…¥urlåœ°å€æ¥ä½¿åï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæ‰€ä»¥å…‰æ˜¯é å‰ç«¯é¡µé¢æ¥é‰´æƒæ˜¯ä¸å¤Ÿçš„ã€‚</p></blockquote><h2 id="è§†å›¾"><a href="#è§†å›¾" class="headerlink" title="è§†å›¾"></a>è§†å›¾</h2><p>ç°åœ¨æµè§ˆé‡èƒ½å¤Ÿæ­£ç¡®æ˜¾ç¤ºäº†ï¼Œä½†æ˜¯ç”±äºæ²¡æœ‰è¿›è¡Œä»»ä½•å¤„ç†ï¼Œå…¶æ•°å€¼ä¼šä¸€ç›´ä¸º0ã€‚æˆ‘ä»¬å¸Œæœ›æ¯å½“ç”¨æˆ·è®¿é—®è¯¦æƒ…é¡µé¢æ—¶ï¼Œæµè§ˆé‡å°±åŠ 1ã€‚</p><p>ä¿®æ”¹<code>article_detail()</code>å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">def</span> <span class="token function">article_detail</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    article <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token builtin">id</span><span class="token punctuation">)</span>        <span class="token comment"># æµè§ˆé‡ +1</span>    article<span class="token punctuation">.</span>total_views <span class="token operator">+=</span> <span class="token number">1</span>    article<span class="token punctuation">.</span>save<span class="token punctuation">(</span>update_fields<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'total_views'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>update_fields=[]</code>æŒ‡å®šäº†æ•°æ®åº“åªæ›´æ–°<code>total_views</code>å­—æ®µï¼Œä¼˜åŒ–æ‰§è¡Œæ•ˆç‡ã€‚</p><p>æµ‹è¯•ä¸€ä¸‹ï¼Œå¯ä»¥æ­£å¸¸å¯¹æµè§ˆé‡è®¡æ•°äº†ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181228/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE121.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181228/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE121.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><h2 id="è§†å›¾ä¸­é‰´æƒ"><a href="#è§†å›¾ä¸­é‰´æƒ" class="headerlink" title="è§†å›¾ä¸­é‰´æƒ"></a>è§†å›¾ä¸­é‰´æƒ</h2><p>å‰é¢è®²äº†ï¼Œå…‰æ˜¯åœ¨æ¨¡æ¿ä¸­é‰´æƒæ˜¯ä¸å¤Ÿçš„ï¼Œå¿…é¡»åœ¨åç«¯ä¸šåŠ¡é€»è¾‘ä¸­å†æ¬¡éªŒè¯ç”¨æˆ·èº«ä»½ã€‚</p><p>ä¿®æ”¹<code>article_update()</code>æ›´æ–°æ–‡ç« çš„è§†å›¾ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># æé†’ç”¨æˆ·ç™»å½•</span><span class="token decorator annotation punctuation">@login_required</span><span class="token punctuation">(</span>login_url<span class="token operator">=</span><span class="token string">'/userprofile/login/'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">article_update</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># å·²æœ‰ä»£ç </span>    article <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token builtin">id</span><span class="token punctuation">)</span>    <span class="token comment"># è¿‡æ»¤éä½œè€…çš„ç”¨æˆ·</span>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>user <span class="token operator">!=</span> article<span class="token punctuation">.</span>author<span class="token punctuation">:</span>        <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"æŠ±æ­‰ï¼Œä½ æ— æƒä¿®æ”¹è¿™ç¯‡æ–‡ç« ã€‚"</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è§†å›¾ä¸­è¿›è¡Œäº†ä¸¤æ¬¡é‰´æƒï¼š</p><ul><li><code>login_required</code>è£…é¥°å™¨è¿‡æ»¤æœªç™»å½•çš„ç”¨æˆ·</li><li><code>if</code>è¯­å¥è¿‡æ»¤å·²ç™»å½•ã€ä½†éä½œè€…æœ¬äººçš„ç”¨æˆ·</li></ul><p>é€šè¿‡åœ¨ä¸šåŠ¡é€»è¾‘ä¸­å†æ¬¡éªŒè¯èº«ä»½ï¼Œå®Œå…¨é˜»æ­¢æ¶æ„ç”¨æˆ·ä»ä¸­ä½¿åäº†ã€‚</p><p>é™¤äº†æ›´æ–°æ–‡ç« çš„è§†å›¾å¤–ï¼Œ<strong>åˆ é™¤æ–‡ç« ä¹Ÿåº”è¯¥åšç±»ä¼¼çš„å·¥ä½œ</strong>ï¼Œè¯·è¯»è€…è‡ªè¡Œä¿®æ”¹å¹¶æµ‹è¯•ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« å®Œæˆäº†ç®€å•çš„ç»Ÿè®¡æµè§ˆé‡çš„åŠŸèƒ½ï¼Œå¹¶ä¸”åœ¨å‰åç«¯ä¸­å¯¹ç”¨æˆ·çš„èº«ä»½è¿›è¡Œäº†éªŒè¯ã€‚</p><p>ä¸‹ä¸€ç« å­¦ä¹ ä¸æµè§ˆé‡ç´§å¯†ç›¸å…³çš„åŠŸèƒ½ï¼š<strong>æŸ¥è¯¢æœ€çƒ­æ–‡ç« </strong>ã€‚</p><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#100;&#117;&#115;&#x61;&#105;&#x70;&#x68;&#111;&#116;&#x6f;&#64;&#102;&#111;&#120;&#109;&#97;&#105;&#x6c;&#x2e;&#99;&#x6f;&#109;">&#100;&#117;&#115;&#x61;&#105;&#x70;&#x68;&#111;&#116;&#x6f;&#64;&#102;&#111;&#120;&#109;&#97;&#105;&#x6c;&#x2e;&#99;&#x6f;&#109;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul><blockquote><p>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--21.æœ€çƒ­æ–‡ç« </title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/21.zui-re-wen-zhang/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/21.zui-re-wen-zhang/</url>
      
        <content type="html"><![CDATA[<p>æœ‰äº†æµè§ˆé‡ä¹‹åï¼Œæ–‡ç« å—æ¬¢è¿çš„ç¨‹åº¦å°±æœ‰äº†è¯„ä»·æ ‡å‡†ã€‚éšä¹‹è€Œæ¥çš„å°±æœ‰æ ¹æ®æµè§ˆé‡å¯¹æ–‡ç« è¿›è¡Œæ’åºçš„éœ€æ±‚ï¼Œå³æ˜¾ç¤º<strong>â€œæœ€çƒ­æ–‡ç« â€</strong>ã€‚</p><p>ç°åœ¨ä½ å·²ç»å¾ˆç†Ÿæ‚‰MTVæ¨¡å¼ï¼Œä¸éœ€è¦æˆ‘å•°å—¦ä¹Ÿèƒ½å®Œæˆä»»åŠ¡ï¼š</p><ul><li>æ–‡ç« çš„æ¨¡å‹å·²ç»æœ‰äº†ï¼Œä¸éœ€è¦å†™Modeläº†</li><li>å†™ä¸€ä¸ªè§†å›¾å‡½æ•°<code>article_list_by_views()</code>ï¼Œå–å‡ºæŒ‰æµè§ˆæ’åºåçš„æ–‡ç« å¯¹è±¡</li><li>å°†æ–‡ç« å¯¹è±¡ä¼ é€’åˆ°æ¨¡æ¿ï¼Œå¹¶è¿›è¡Œæ¸²æŸ“</li></ul><p><strong>å¾ˆç®€å•ï¼Œä½†ä¹Ÿéšè—ç€é—®é¢˜</strong>ï¼šæœ€çƒ­æ–‡ç« åˆ—è¡¨å’Œä¹‹å‰çš„æ™®é€šæ–‡ç« åˆ—è¡¨ç›¸æ¯”ï¼Œå¤§éƒ¨åˆ†åŠŸèƒ½å…¶å®éƒ½æ˜¯ç›¸åŒçš„ï¼Œä»…ä»…æ˜¯æ’åºä¸åŒè€Œå·²ã€‚</p><p>ä¸‡ä¸€å“ªå¤©éœ€è¦æ ¹æ®æ–‡ç« æ ‡é¢˜æ’åºå‘¢ï¼Ÿä¸‡ä¸€è¿˜éœ€è¦ç”¨æˆ·idæ’åºã€æ ‡ç­¾æ’åºã€æ”¶è—æ’åºâ€¦ä¸ä»…å¦‚æ­¤ï¼Œå°±è¿è·¯ç”±<code>urls.py</code>éƒ½è¦è·Ÿç€è†¨èƒ€ã€‚ä»£ç ä¼šè¶Šæ¥è¶Šè‡ƒè‚¿ä¸”ä¸å¯ç»´æŠ¤ã€‚</p><p><strong>é‡å¤çš„ä»£ç æ˜¯ä¸‡æ¶ä¹‹æºã€‚</strong>å› æ­¤è¿™é‡ŒæŒ‘æˆ˜ä¸€ä¸‹ï¼Œä¸åˆ›å»ºæ–°çš„è§†å›¾/è·¯ç”±ï¼Œè€Œæ˜¯å°†æ’åºåŠŸèƒ½èåˆåˆ°å·²æœ‰çš„è§†å›¾/è·¯ç”±ä¸­ã€‚</p><h2 id="è§†å›¾"><a href="#è§†å›¾" class="headerlink" title="è§†å›¾"></a>è§†å›¾</h2><p>æ ¹æ®ä»¥ä¸Šéœ€æ±‚ï¼Œé‡å†™<code>article_list()</code>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># é‡å†™æ–‡ç« åˆ—è¡¨</span><span class="token keyword">def</span> <span class="token function">article_list</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># æ ¹æ®GETè¯·æ±‚ä¸­æŸ¥è¯¢æ¡ä»¶</span>    <span class="token comment"># è¿”å›ä¸åŒæ’åºçš„å¯¹è±¡æ•°ç»„</span>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'order'</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'total_views'</span><span class="token punctuation">:</span>        article_list <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">'-total_views'</span><span class="token punctuation">)</span>        order <span class="token operator">=</span> <span class="token string">'total_views'</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        article_list <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        order <span class="token operator">=</span> <span class="token string">'normal'</span>    paginator <span class="token operator">=</span> Paginator<span class="token punctuation">(</span>article_list<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>    page <span class="token operator">=</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'page'</span><span class="token punctuation">)</span>    articles <span class="token operator">=</span> paginator<span class="token punctuation">.</span>get_page<span class="token punctuation">(</span>page<span class="token punctuation">)</span>        <span class="token comment"># ä¿®æ”¹æ­¤è¡Œ</span>    context <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token string">'articles'</span><span class="token punctuation">:</span> articles<span class="token punctuation">,</span> <span class="token string">'order'</span><span class="token punctuation">:</span> order <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'article/list.html'</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>é‡ç‚¹çŸ¥è¯†å¦‚ä¸‹ï¼š</strong></p><ul><li>å‰é¢ç”¨è¿‡GETè¯·æ±‚ä¼ é€’å•ä¸ªå‚æ•°ã€‚å®ƒä¹Ÿæ˜¯å¯ä»¥ä¼ é€’å¤šä¸ªå‚æ•°çš„ï¼Œå¦‚<code>?a=1&amp;b=2</code>ï¼Œå‚æ•°é—´ç”¨<code>&amp;</code>éš”å¼€</li><li>è§†å›¾æ ¹æ®GETå‚æ•°<code>order</code>çš„å€¼ï¼Œåˆ¤æ–­å–å‡ºçš„æ–‡ç« å¦‚ä½•æ’åº</li><li><code>order_by()</code>æ–¹æ³•æŒ‡å®šå¯¹è±¡å¦‚ä½•è¿›è¡Œæ’åºã€‚æ¨¡å‹ä¸­æœ‰<code>total_views</code>è¿™ä¸ªæ•´æ•°å­—æ®µï¼Œå› æ­¤â€˜total_viewsâ€™ä¸ºæ­£åºï¼Œâ€˜-total_viewsâ€™ä¸ºé€†åº</li><li>ä¸ºä»€ä¹ˆæŠŠæ–°å˜é‡<code>order</code>ä¹Ÿä¼ é€’åˆ°æ¨¡æ¿ä¸­ï¼Ÿå› ä¸ºæ–‡ç« éœ€è¦ç¿»é¡µï¼<code>order</code>ç»™æ¨¡æ¿ä¸€ä¸ªæ ‡è¯†ï¼Œæé†’æ¨¡æ¿ä¸‹ä¸€é¡µåº”è¯¥å¦‚ä½•æ’åº</li></ul><p>è¿™æ ·ä¸€æ¥ï¼Œæ’åºæ‰€éœ€è¦çš„å‚æ•°éƒ½å¯ä»¥é€šè¿‡æŸ¥è¯¢è·å¾—ï¼Œè¿<code>urls.py</code>éƒ½ä¸ç”¨æ”¹å†™äº†ã€‚</p><h2 id="æ¨¡æ¿"><a href="#æ¨¡æ¿" class="headerlink" title="æ¨¡æ¿"></a>æ¨¡æ¿</h2><p>æ¥ä¸‹æ¥ä¿®æ”¹æ–‡ç« åˆ—è¡¨æ¨¡æ¿ï¼šä¼˜åŒ–å…¥å£ï¼Œå¹¶ä¸”æ­£ç¡®åˆ†é¡µï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/list.html...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span> <span class="token attr-name">aria-label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>breadcrumb<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>breadcrumb<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>breadcrumb-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>article:article_list<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    æœ€æ–°                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>breadcrumb-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>article:article_list<span class="token punctuation">'</span> %&#125;?order=total_views<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    æœ€çƒ­                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row mt-2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        &#123;% for article in articles %&#125;        ...        &#123;% endfor %&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- é¡µç å¯¼èˆª --></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?page=1&amp;order=&#123;&#123; order &#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-success<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token entity named-entity" title="&laquo;">&amp;laquo;</span> 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?page=&#123;&#123; articles.previous_page_number &#125;&#125;&amp;order=&#123;&#123; order &#125;&#125;<span class="token punctuation">"</span></span>    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-secondary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>...    &#123;% if articles.has_next %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?page=&#123;&#123; articles.next_page_number &#125;&#125;&amp;order=&#123;&#123; order &#125;&#125;<span class="token punctuation">"</span></span>   <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-secondary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; articles.next_page_number &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?page=&#123;&#123; articles.paginator.num_pages &#125;&#125;&amp;order=&#123;&#123; order &#125;&#125;<span class="token punctuation">"</span></span>   <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-success<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; articles.paginator.num_pages &#125;&#125; <span class="token entity named-entity" title="&raquo;">&amp;raquo;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ–°å¢äº†Bootstrapä¸­çš„é¢åŒ…å±‘å¯¼èˆªæ ·å¼<code>breadcrumb</code></li><li>é¡µç å¯¼èˆªä¸­ï¼Œæ‰€æœ‰çš„åˆ†é¡µé“¾æ¥éƒ½æ–°å¢äº†<code>order</code>å‚æ•°</li></ul><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>å¯åŠ¨æœåŠ¡å™¨ï¼Œç‚¹å‡»â€œæœ€çƒ­â€ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181228/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE132.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181228/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE132.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>å·¥ä½œå¾—å¾ˆå¥½ï¼åˆ‡æ¢é¡µç ï¼Œç•™æ„åœ°å€æ ä¸­æ˜¯å¦‚ä½•å˜åŒ–çš„ã€‚</p><p>è¿˜å‰©ä¸€ä¸ªå°ç‘•ç–µï¼šç”¨æˆ·ç‚¹å‡»â€œæœ€çƒ­â€æŒ‰é’®åï¼Œæ­¤æŒ‰é’®æœ€å¥½èƒ½å¤Ÿå˜ä¸ºç°è‰²ï¼Œå¹¶ä¸”ä¸å¯ç‚¹å‡»ã€‚è¿™ä¸ªç²¾ç›Šæ±‚ç²¾çš„æœºä¼šå°±ç•™ç»™è¯»è€…å»ä¼˜åŒ–å§ã€‚</p><blockquote><p>header.htmlä¸­æœ‰ä¸€ä¸ªå°æ”¹åŠ¨ï¼šâ€å†™æ–‡ç« â€çš„å…¥å£è¢«æŒªåˆ°ç”¨æˆ·ä¸‹æ‹‰èœå•ä¸­äº†ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« å·²ç»æ‘¸åˆ°ä¸€ä¸ªé«˜çº§çš„ç¼–ç¨‹é¢†åŸŸé—¨æ§›äº†ï¼šä»£ç å¤ç”¨ã€‚å°†ç±»ä¼¼åŠŸèƒ½çš„ä»£ç åˆå¹¶åˆ°äº†ä¸€èµ·ï¼Œå¹¶ä¸”è®©åç»­çš„åŠŸèƒ½æ‰©å±•å˜å¾—å¾ˆå®¹æ˜“ã€‚åªéœ€è¦åœ¨è§†å›¾ä¸­å†™å‡ ä¸ª<code>elif</code>è¯­å¥å°±æå®šäº†ã€‚</p><p>åœ¨è¯»è€…ä»¥åçš„ç¼–ç¨‹ä¸­ï¼Œä¹Ÿè¦å°½é‡ä¼˜åŒ–ä»£ç ç»“æ„ï¼Œè¾¾åˆ°äº‹åŠåŠŸå€çš„æ•ˆæœã€‚</p><p>è‡³æ­¤ï¼Œåšå®¢è™½å°ï¼ŒåŠŸèƒ½å´ç›¸å½“å®Œæ•´äº†ã€‚ç»§ç»­åŠªåŠ›ï¼</p><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#x64;&#x75;&#115;&#97;&#x69;&#x70;&#x68;&#x6f;&#116;&#111;&#x40;&#102;&#x6f;&#120;&#109;&#97;&#105;&#x6c;&#46;&#x63;&#111;&#109;">&#x64;&#x75;&#115;&#97;&#x69;&#x70;&#x68;&#x6f;&#116;&#111;&#x40;&#102;&#x6f;&#120;&#109;&#97;&#105;&#x6c;&#46;&#x63;&#111;&#109;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul><blockquote><p>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--22.æœç´¢æ–‡ç« </title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/22.sou-suo-wen-zhang/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/22.sou-suo-wen-zhang/</url>
      
        <content type="html"><![CDATA[<p>ä¸ç®¡æ˜¯æœ€æ–°æ–‡ç« åˆ—è¡¨ä¹Ÿå¥½ã€æœ€çƒ­æ–‡ç« åˆ—è¡¨ä¹Ÿç½¢ï¼Œéƒ½æ˜¯æŠŠ<strong>æ‰€æœ‰</strong>çš„æ–‡ç« æ•°æ®å…¨éƒ¨å±•ç¤ºç»™äº†ç”¨æˆ·ã€‚</p><p>ä½†æ˜¯å¦‚æœç”¨æˆ·åªå…³å¿ƒæŸäº›<strong>ç‰¹å®šç±»å‹</strong>çš„æ–‡ç« ï¼ŒæŠ½å–å…¨éƒ¨æ•°æ®å°±æ˜¾å¾—æ—¢ä¸æ–¹ä¾¿ã€åˆä¸æ•ˆç‡äº†ã€‚</p><p>å› æ­¤ï¼Œç»™ç”¨æˆ·æä¾›ä¸€ä¸ª<strong>æœç´¢åŠŸèƒ½</strong>ï¼Œæä¾›ç»™ç”¨æˆ·æ„Ÿå…´è¶£çš„å‡ ç¯‡æ–‡ç« ï¼Œå°±å¤§æœ‰ç”¨å¤„äº†ã€‚</p><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><h3 id="é€»è¾‘"><a href="#é€»è¾‘" class="headerlink" title="é€»è¾‘"></a>é€»è¾‘</h3><p>å°½ç®¡ç»†èŠ‚ä¸åŒï¼Œä½†æ˜¯<strong>æœç´¢å’Œåˆ—è¡¨</strong>æœ‰å¾ˆå¤šç±»ä¼¼çš„åœ°æ–¹ï¼šå®ƒä»¬éƒ½æ˜¯å…ˆæ£€ç´¢å‡ºä¸€äº›æ–‡ç« å¯¹è±¡ï¼Œå¹¶å°†å…¶å±•ç¤ºç»™ç”¨æˆ·ã€‚ä¸Šä¸€ç« å·²ç»è¯´è¿‡ï¼Œ<strong>ä»£ç é‡å¤æ˜¯ä¸‡æ¶ä¹‹æº</strong>ï¼Œå¥½çš„å®è·µå¿…é¡»æŠŠåŠŸèƒ½ç±»ä¼¼çš„æ¨¡å—å°½é‡å¤ç”¨èµ·æ¥ã€‚åŸºäºè¿™ä¸ªåŸåˆ™ï¼Œæˆ‘ä»¬æ‰“ç®—ç»§ç»­åœ¨åŸæœ‰çš„<code>article_list()</code>ä¸Šæ·»ç –åŠ ç“¦ï¼Œè®©å…¶åŠŸèƒ½æ›´åŠ çš„å¼ºå¤§ã€‚</p><blockquote><p>éšç€é¡¹ç›®è¶Šæ¥è¶Šåºå¤§ï¼Œåˆéœ€è¦å°†åŠŸèƒ½å¤æ‚çš„æ¨¡å—æ‹†åˆ†æˆæ›´ç®€å•çš„å¤šä¸ªæ¨¡å—ã€‚ç›®å‰æˆ‘ä»¬è¿˜ä¸ç”¨æ‹…å¿ƒè¿™ä¸ªé—®é¢˜ã€‚</p></blockquote><p>æ›´é…·çš„æ˜¯ï¼Œæˆ‘ä»¬å¸Œæœ›æœç´¢å‡ºæ¥çš„æ–‡ç« ä¹Ÿèƒ½å¤ŸæŒ‰ç…§æ—¶é—´ã€çƒ­åº¦ç­‰å„ç§æ–¹å¼è¿›è¡Œæ’åºã€‚å› æ­¤éœ€è¦æ„é€ ä¸€ä¸ªæ–°çš„å‚æ•°<code>search</code>ï¼Œèƒ½å¤Ÿå’Œä¹‹å‰çš„<code>order</code>å‚æ•°è¿›è¡Œè”åˆæŸ¥è¯¢ã€‚</p><h3 id="GETè¿˜æ˜¯POSTï¼Ÿ"><a href="#GETè¿˜æ˜¯POSTï¼Ÿ" class="headerlink" title="GETè¿˜æ˜¯POSTï¼Ÿ"></a>GETè¿˜æ˜¯POSTï¼Ÿ</h3><p>ç”¨æˆ·æœç´¢å†…å®¹æ—¶æäº¤çš„æ–‡æœ¬ï¼Œå¯ä»¥ç”¨GETè¯·æ±‚æäº¤ï¼Œä¹Ÿå¯ä»¥ç”¨POSTè¯·æ±‚æäº¤ã€‚æ ¹æ®å®é™…çš„éœ€è¦è¿›è¡Œé€‰æ‹©ã€‚</p><p>å› ä¸º<code>order</code>æ˜¯ç”¨GETæäº¤çš„ï¼Œå¹¶ä¸”ç¿»é¡µæ˜¯GETè¯·æ±‚ï¼Œå› æ­¤é€‰æ‹©GETæ–¹å¼æäº¤æœç´¢æ–‡æœ¬ï¼Œå¯ä»¥æ–¹ä¾¿åœ°å’Œä¹‹å‰çš„æ¨¡å—ç»“åˆèµ·æ¥ã€‚</p><p>ä¹‹å‰æˆ‘ä»¬å·²ç»ç”¨è¿‡è¡¨å•ç»„ä»¶<code>&lt;form method=&quot;POST&quot;&gt;</code>ï¼Œé€šè¿‡POSTè¯·æ±‚æäº¤æ•°æ®ã€‚è¡¨å•ç»„ä»¶åŒæ ·ä¹Ÿå¯ä»¥æäº¤GETè¯·æ±‚ï¼Œåªè¦å»æ‰<code>method=&quot;POST&quot;</code>å±æ€§å°±å¯ä»¥äº†ã€‚</p><h3 id="Qå¯¹è±¡"><a href="#Qå¯¹è±¡" class="headerlink" title="Qå¯¹è±¡"></a>Qå¯¹è±¡</h3><p><code>Model.objects.all()</code>èƒ½å¤Ÿè¿”å›è¡¨ä¸­çš„æ‰€æœ‰å¯¹è±¡ã€‚</p><p>å¯¹åº”çš„ï¼Œ<code>Model.objects.filter(**kwargs)</code>å¯ä»¥è¿”å›ä¸ç»™å®šå‚æ•°åŒ¹é…çš„éƒ¨åˆ†å¯¹è±¡ã€‚</p><blockquote><p>è¿˜æœ‰<code>Model.objects.exclude(**kwargs)</code>è¿”å›ä¸ç»™å®šå‚æ•°ä¸åŒ¹é…çš„å¯¹è±¡</p></blockquote><p>å¦‚æœæƒ³å¯¹å¤šä¸ªå‚æ•°è¿›è¡ŒæŸ¥è¯¢æ€ä¹ˆåŠï¼Ÿæ¯”å¦‚åŒæ—¶æŸ¥è¯¢æ–‡ç« æ ‡é¢˜å’Œæ­£æ–‡å†…å®¹ã€‚è¿™æ—¶å€™å°±éœ€è¦<strong>Qå¯¹è±¡</strong>ã€‚</p><h2 id="è§†å›¾"><a href="#è§†å›¾" class="headerlink" title="è§†å›¾"></a>è§†å›¾</h2><p>é‚£ä¹ˆæŒ‰ç…§å‰é¢è¯´å¥½çš„ï¼Œä¿®æ”¹<code>article_list()</code>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># å¼•å…¥ Q å¯¹è±¡</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>db<span class="token punctuation">.</span>models <span class="token keyword">import</span> Q<span class="token keyword">def</span> <span class="token function">article_list</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    search <span class="token operator">=</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'search'</span><span class="token punctuation">)</span>    order <span class="token operator">=</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'order'</span><span class="token punctuation">)</span>    <span class="token comment"># ç”¨æˆ·æœç´¢é€»è¾‘</span>    <span class="token keyword">if</span> search<span class="token punctuation">:</span>        <span class="token keyword">if</span> order <span class="token operator">==</span> <span class="token string">'total_views'</span><span class="token punctuation">:</span>            <span class="token comment"># ç”¨ Qå¯¹è±¡ è¿›è¡Œè”åˆæœç´¢</span>            article_list <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>                Q<span class="token punctuation">(</span>title__icontains<span class="token operator">=</span>search<span class="token punctuation">)</span> <span class="token operator">|</span>                Q<span class="token punctuation">(</span>body__icontains<span class="token operator">=</span>search<span class="token punctuation">)</span>            <span class="token punctuation">)</span><span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">'-total_views'</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            article_list <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>                Q<span class="token punctuation">(</span>title__icontains<span class="token operator">=</span>search<span class="token punctuation">)</span> <span class="token operator">|</span>                Q<span class="token punctuation">(</span>body__icontains<span class="token operator">=</span>search<span class="token punctuation">)</span>            <span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token comment"># å°† search å‚æ•°é‡ç½®ä¸ºç©º</span>        search <span class="token operator">=</span> <span class="token string">''</span>        <span class="token keyword">if</span> order <span class="token operator">==</span> <span class="token string">'total_views'</span><span class="token punctuation">:</span>            article_list <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">'-total_views'</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            article_list <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    paginator <span class="token operator">=</span> Paginator<span class="token punctuation">(</span>article_list<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>    page <span class="token operator">=</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'page'</span><span class="token punctuation">)</span>    articles <span class="token operator">=</span> paginator<span class="token punctuation">.</span>get_page<span class="token punctuation">(</span>page<span class="token punctuation">)</span>        <span class="token comment"># å¢åŠ  search åˆ° context</span>    context <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token string">'articles'</span><span class="token punctuation">:</span> articles<span class="token punctuation">,</span> <span class="token string">'order'</span><span class="token punctuation">:</span> order<span class="token punctuation">,</span> <span class="token string">'search'</span><span class="token punctuation">:</span> search <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'article/list.html'</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡ç‚¹çŸ¥è¯†å¦‚ä¸‹ï¼š</p><ul><li><p>æ–°å¢å‚æ•°<strong>search</strong>ï¼Œå­˜æ”¾éœ€è¦æœç´¢çš„æ–‡æœ¬ã€‚è‹¥searchä¸ä¸ºç©ºï¼Œåˆ™æ£€ç´¢ç‰¹å®šæ–‡ç« å¯¹è±¡ã€‚</p></li><li><p>ç•™æ„<strong>filter</strong>ä¸­<strong>Qå¯¹è±¡</strong>çš„ç”¨æ³•ã€‚<code>Q(title__icontains=search)</code>æ„æ€æ˜¯åœ¨æ¨¡å‹çš„<code>title</code>å­—æ®µæŸ¥è¯¢ï¼Œ<code>icontains</code>æ˜¯<strong>ä¸åŒºåˆ†å¤§å°å†™çš„åŒ…å«</strong>ï¼Œä¸­é—´ç”¨ä¸¤ä¸ªä¸‹åˆ’çº¿éš”å¼€ã€‚<code>search</code>æ˜¯éœ€è¦æŸ¥è¯¢çš„æ–‡æœ¬ã€‚å¤šä¸ªQå¯¹è±¡ç”¨ç®¡é“ç¬¦<code>|</code>éš”å¼€ï¼Œå°±è¾¾åˆ°äº†è”åˆæŸ¥è¯¢çš„ç›®çš„ã€‚</p><blockquote><p>icontainsä¸åŒºåˆ†å¤§å°å†™ï¼Œå¯¹åº”çš„containsåŒºåˆ†å¤§å°å†™</p></blockquote></li><li><p>ä¸ºä»€ä¹ˆéœ€è¦<code>search = &#39;&#39;</code>è¯­å¥ï¼Ÿå¦‚æœç”¨æˆ·æ²¡æœ‰æœç´¢æ“ä½œï¼Œåˆ™<code>search = request.GET.get(&#39;search&#39;)</code>ä¼šä½¿å¾—<code>search = None</code>ï¼Œè€Œè¿™ä¸ªå€¼ä¼ é€’åˆ°æ¨¡æ¿ä¸­ä¼šé”™è¯¯åœ°è½¬æ¢æˆ<code>&quot;None&quot;</code><strong>å­—ç¬¦ä¸²</strong>ï¼ç­‰åŒäºç”¨æˆ·åœ¨æœç´¢â€œNoneâ€å…³é”®å­—ï¼Œè¿™æ˜æ˜¾æ˜¯é”™è¯¯çš„ã€‚</p><blockquote><p>å®Œæˆæœ¬ç« å†…å®¹åï¼Œå¯ä»¥åˆ é™¤æ­¤è¯­å¥çœ‹çœ‹æ•ˆæœ</p></blockquote></li></ul><p>é™¤æ­¤ä¹‹å¤–è¿˜æœ‰ä¸€ç‚¹å°çš„ä»£ç ä¼˜åŒ–å·¥ä½œï¼šå°†éœ€è¦é‡å¤ç”¨åˆ°<code>order = request.GET.get(&#39;order&#39;)</code>æå–åˆ°é¡¶éƒ¨ï¼Œè®©æ¨¡å—ç¨ç¨æ¸…çˆ½ä¸€ç‚¹ã€‚</p><h2 id="æ¨¡æ¿"><a href="#æ¨¡æ¿" class="headerlink" title="æ¨¡æ¿"></a>æ¨¡æ¿</h2><p>è¿˜æ˜¯ä¿®æ”¹æ–‡ç« åˆ—è¡¨çš„æ¨¡æ¿æ–‡ä»¶ã€‚</p><p>éœ€è¦ä¿®æ”¹çš„å†…å®¹ç¨å¤šï¼Œä»”ç»†ä¸€äº›ä¸è¦çœ‹é”™ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/list.html...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- ä¿®æ”¹ï¼Œé¢åŒ…å±‘çš„hrefå¢åŠ searchå‚æ•° --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span> <span class="token attr-name">aria-label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>breadcrumb<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>breadcrumb<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>breadcrumb-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>article:article_list<span class="token punctuation">'</span> %&#125;?search=&#123;&#123; search &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    æœ€æ–°                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>breadcrumb-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>article:article_list<span class="token punctuation">'</span> %&#125;?order=total_views&amp;search=&#123;&#123; search &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    æœ€çƒ­                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- æ–°å¢ï¼Œæœç´¢æ  --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-auto mr-auto<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-inline<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sr-only<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>content<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span>                     <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control mb-2 mr-sm-2<span class="token punctuation">"</span></span>                     <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>search<span class="token punctuation">"</span></span>                     <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æœç´¢æ–‡ç« ...<span class="token punctuation">"</span></span>                     <span class="token attr-name">required</span>                <span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- æ–°å¢ï¼Œæœç´¢æç¤ºè¯­ --></span>    &#123;% if search %&#125;        &#123;% if articles %&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> red</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>"&#123;&#123; search &#125;&#125;"<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>çš„æœç´¢ç»“æœå¦‚ä¸‹ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">></span></span>                &#123;% else %&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">></span></span>æš‚æ— <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> red</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>"&#123;&#123; search &#125;&#125;"<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>æœ‰å…³çš„æ–‡ç« ã€‚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">></span></span>        &#123;% endif %&#125;    &#123;% endif %&#125;                    ...    <span class="token comment">&lt;!-- ä¿®æ”¹ï¼Œé¡µç hrefå¢åŠ searchå‚æ•° --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?page=1&amp;order=&#123;&#123; order &#125;&#125;&amp;search=&#123;&#123; search &#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-success<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?page=&#123;&#123; articles.previous_page_number &#125;&#125;&amp;order=&#123;&#123; order &#125;&#125;&amp;search=&#123;&#123; search &#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-secondary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?page=&#123;&#123; articles.next_page_number &#125;&#125;&amp;order=&#123;&#123; order &#125;&#125;&amp;search=&#123;&#123; search &#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-secondary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?page=&#123;&#123; articles.paginator.num_pages &#125;&#125;&amp;order=&#123;&#123; order &#125;&#125;&amp;search=&#123;&#123; search &#125;&#125;<span class="token punctuation">"</span></span><span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-success<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>é¢åŒ…å±‘ç»„ä»¶ã€é¡µç ç»„ä»¶éƒ½æ”¹åŠ¨äº†hrefï¼šå¢åŠ äº†<code>search</code>å‚æ•°</li><li>æ–°å¢æœç´¢æ ï¼Œä»¥GETè¯·æ±‚æäº¤<code>search</code>å‚æ•°ï¼›<code>required</code>å±æ€§é˜»æ­¢ç”¨æˆ·æäº¤ç©ºç™½æ–‡æœ¬</li><li>æ–°å¢æœç´¢æç¤ºè¯­ã€‚å¥½çš„UIå¿…é¡»è®©ç”¨æˆ·äº†è§£å½“å‰çš„çŠ¶æ€</li></ul><p>Emmmâ€¦æƒ³æƒ³ä¹Ÿä¸ç”¨æ”¹åŠ¨å…¶ä»–ä¸œè¥¿äº†ã€‚</p><p>å¼€å§‹æµ‹è¯•å§ï¼</p><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>è¿˜æ˜¯æ‰“å¼€æ–‡ç« åˆ—è¡¨é¡µé¢ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181230/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE133.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181230/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE133.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>å‡ºç°äº†æœç´¢æ ï¼å¹¶ä¸”ç¿»é¡µã€æœ€çƒ­ç­‰åŠŸèƒ½ä¸€åˆ‡æ­£å¸¸ã€‚</p><p>åœ¨æœç´¢æ ä¸­è¾“å…¥â€œPYTHONâ€ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181230/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE134.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181230/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE134.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>æˆåŠŸå°†æ ‡é¢˜æˆ–æ­£æ–‡ä¸­å«æœ‰â€pythonâ€å…³é”®å­—çš„æ–‡ç« æ£€ç´¢å‡ºæ¥äº†ï¼Œå¹¶ä¸”æ˜¯å¿½ç•¥å¤§å°å†™çš„ã€‚ç‚¹å‡»<strong>æœ€çƒ­</strong>å¯ä»¥è®©æ£€ç´¢ç»“æœæŒ‰æµè§ˆé‡æ’åºï¼Œç¿»é¡µåŠŸèƒ½ä¹Ÿæ­£å¸¸å·¥ä½œã€‚å¾ˆå¥½ï¼Œè¾¾æˆäº†ç›®æ ‡ï¼</p><p>å­¦åˆ°è¿™é‡Œçš„è¯»è€…åº”è¯¥æ„Ÿåˆ°è‡ªè±ªï¼šä½ ç”¨äº†åŒä¸€ä¸ªurlï¼Œé›†æˆäº†å¾ˆå¤šç§åŠŸèƒ½ï¼Œå±•ç¤ºäº†ä¸åŒçš„å†…å®¹ï¼è¿™å¯¹æ–°æ‰‹æ¥è¯´å…¶å®å¹¶ä¸å®¹æ˜“åšåˆ°ã€‚</p><blockquote><p>è¿™ç§æ–¹æ³•æœ‰ä¸€ä¸ªå°ç¼ºç‚¹ï¼šæœ‰çš„æ—¶å€™urlä¸­ä¼šåŒ…å«åƒ<code>search=&#39;&#39;</code>ï¼ˆç©ºå€¼ï¼‰è¿™æ ·æ— æ„ä¹‰çš„å­—ç¬¦ä¸²ï¼Œå¼ºè¿«ç—‡ç®€ç›´ä¸èƒ½å¿ã€‚æ‰€å¹¸è¿™æ— ä¼¤å¤§é›…ï¼Œé€šå¸¸ç”¨æˆ·å¹¶ä¸ä¼šå…³å¿ƒä½ çš„urlæ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œåªè¦ç½‘é¡µç¾è§‚å¥½ç”¨å°±è¡Œã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« å®Œæˆäº†ä¸€ä¸ªç®€å•çš„æœç´¢åŠŸèƒ½ï¼Œè¿™å¯¹äºä¸ªäººåšå®¢æ¥è¯´åº”è¯¥å¤Ÿç”¨äº†ã€‚</p><p>æ›´åŠ å¤æ‚ã€æ·±åº¦å®šåˆ¶çš„æœç´¢å¯ä»¥å€ŸåŠ©ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œå¦‚<a href="https://github.com/django-haystack/django-haystack">Haystack</a>ã€‚</p><p>å¦å¤–ç¬”è€…è¿™æ ·å®ç°æœç´¢ä¸ä¸€å®šæ˜¯æœ€ä¼˜çš„ã€‚ç›¸ä¿¡ä½ å·²ç»æŒæ¡å¤šç§é€”å¾„æ¥å®ç°æœç´¢åŠŸèƒ½äº†ï¼ˆPOSTè¯·æ±‚ï¼Ÿæœç´¢ä¸“ç”¨è§†å›¾ï¼Ÿå¦å†™urlï¼Ÿï¼‰ï¼Œå°½æƒ…å°è¯•ä¸€ç•ªå§ã€‚</p><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#x64;&#117;&#115;&#97;&#105;&#112;&#x68;&#111;&#116;&#111;&#x40;&#x66;&#111;&#x78;&#109;&#x61;&#105;&#108;&#x2e;&#99;&#111;&#x6d;">&#x64;&#117;&#115;&#97;&#105;&#112;&#x68;&#111;&#116;&#111;&#x40;&#x66;&#111;&#x78;&#109;&#x61;&#105;&#108;&#x2e;&#99;&#111;&#x6d;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul><blockquote><p>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--23.æ–‡ç« ç›®å½•</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/23.wen-zhang-mu-lu/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/23.wen-zhang-mu-lu/</url>
      
        <content type="html"><![CDATA[<p>å¯¹ä¼šè¯»ä¹¦çš„äººæ¥è¯´ï¼Œè¯»ä¸€æœ¬ä¹¦è¦åšçš„ç¬¬ä¸€ä»¶äº‹ï¼Œå°±æ˜¯ä»”ç»†é˜…è¯»è¿™æœ¬ä¹¦çš„ç›®å½•ã€‚é˜…è¯»ç›®å½•å¯ä»¥å¯¹æ•´ä½“å†…å®¹æœ‰æ‰€äº†è§£ï¼Œå¹¶æ¸…æ¥šåœ°çŸ¥é“æ„Ÿå…´è¶£çš„éƒ¨åˆ†åœ¨å“ªé‡Œï¼Œæé«˜é˜…è¯»è´¨é‡ã€‚</p><p>åšæ–‡ä¹Ÿæ˜¯åŒæ ·çš„ï¼Œå¥½çš„ç›®å½•å¯¹åšä¸»å’Œè¯»è€…éƒ½å¾ˆæœ‰å¸®åŠ©ã€‚æ›´è¿›ä¸€æ­¥çš„æ˜¯ï¼Œè¿˜å¯ä»¥åœ¨ç›®å½•ä¸­è®¾ç½®é”šç‚¹ï¼Œç‚¹å‡»æ ‡é¢˜å°±ç«‹å³å‰å¾€è¯¥å¤„ï¼Œéå¸¸çš„æ–¹ä¾¿ã€‚</p><h2 id="æ–‡ä¸­çš„ç›®å½•"><a href="#æ–‡ä¸­çš„ç›®å½•" class="headerlink" title="æ–‡ä¸­çš„ç›®å½•"></a>æ–‡ä¸­çš„ç›®å½•</h2><p>ä¹‹å‰æˆ‘ä»¬å·²ç»ä¸ºåšæ–‡æ”¯æŒäº†Markdownè¯­æ³•ï¼Œç°åœ¨ç»§ç»­å¢å¼ºå…¶åŠŸèƒ½ã€‚</p><p>æœ‰æŠ˜è…¾ä»£ç é«˜äº®çš„ç—›è‹¦ç»å†ä¹‹åï¼Œè®¾ç½®Markdownçš„ç›®å½•æ‰©å±•å°±æ˜¾å¾—ç‰¹åˆ«è½»æ¾äº†ã€‚</p><p>ä¿®æ”¹æ–‡ç« è¯¦æƒ…è§†å›¾ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># æ–‡ç« è¯¦æƒ…</span><span class="token keyword">def</span> <span class="token function">article_detail</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    article<span class="token punctuation">.</span>body <span class="token operator">=</span> markdown<span class="token punctuation">.</span>markdown<span class="token punctuation">(</span>article<span class="token punctuation">.</span>body<span class="token punctuation">,</span>        extensions<span class="token operator">=</span><span class="token punctuation">[</span>        <span class="token string">'markdown.extensions.extra'</span><span class="token punctuation">,</span>        <span class="token string">'markdown.extensions.codehilite'</span><span class="token punctuation">,</span>                    <span class="token comment"># ç›®å½•æ‰©å±•</span>        <span class="token string">'markdown.extensions.TOC'</span><span class="token punctuation">,</span>        <span class="token punctuation">]</span>    <span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»…ä»…æ˜¯å°†<code>markdown.extensions.TOC</code>æ‰©å±•æ·»åŠ äº†è¿›å»ã€‚</p><blockquote><p><strong>æ³¨æ„</strong>ï¼šæœ‰è¯»è€…åæ˜ æŸäº›ç‰ˆæœ¬ä¸‹ <code>markdown.extensions.TOC</code> ä¼šæŠ¥é”™ã€‚å¦‚æœé‡åˆ°è¿™ç§æƒ…å†µï¼Œè¯·å°è¯•ä¿®æ”¹ä¸º <code>markdown.extensions.toc</code> ã€‚</p></blockquote><p>ä»£ç å¢åŠ è¿™ä¸€è¡Œå°±è¶³å¤Ÿäº†ã€‚ä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œå¾€ä¹‹å‰çš„æ–‡ç« ä¸­æ·»åŠ å‡ ä¸ªä¸€çº§æ ‡é¢˜ã€äºŒçº§æ ‡é¢˜ç­‰ã€‚</p><blockquote><p>è¿˜è®°å¾—Markdownè¯­æ³•å¦‚ä½•å†™æ ‡é¢˜å—ï¼Ÿä¸€çº§æ ‡é¢˜ï¼š<code># title1</code>ï¼ŒäºŒçº§æ ‡é¢˜ï¼š<code>## title2</code></p></blockquote><p>ç„¶åä½ å¯ä»¥åœ¨æ–‡ä¸­çš„ä»»ä½•åœ°æ–¹æ’å…¥<code>[TOC]</code>å­—ç¬¦ä¸²ï¼Œç›®å½•å°±è‡ªåŠ¨ç”Ÿæˆå¥½äº†ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181231/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE135.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181231/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE135.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ç‚¹å‡»æ ‡é¢˜ï¼Œé¡µé¢å°±ç«‹å³å‰å¾€ç›¸åº”çš„æ ‡é¢˜å¤„ï¼ˆå³â€œé”šç‚¹â€çš„æ¦‚å¿µï¼‰ã€‚</p><h2 id="ä»»æ„ä½ç½®çš„ç›®å½•"><a href="#ä»»æ„ä½ç½®çš„ç›®å½•" class="headerlink" title="ä»»æ„ä½ç½®çš„ç›®å½•"></a>ä»»æ„ä½ç½®çš„ç›®å½•</h2><p>ä¸Šé¢çš„æ–¹æ³•åªèƒ½å°†ç›®å½•æ’å…¥åˆ°æ–‡ç« å½“ä¸­ã€‚å¦‚æœæˆ‘æƒ³æŠŠç›®å½•æ’å…¥åˆ°é¡µé¢çš„ä»»ä½•ä¸€ä¸ªä½ç½®å‘¢ï¼Ÿ</p><p>ä¹Ÿç®€å•ï¼Œè¿™æ¬¡éœ€è¦ä¿®æ”¹Markdownçš„æ¸²æŸ“æ–¹æ³•ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">def</span> <span class="token function">article_detail</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># ä¿®æ”¹ Markdown è¯­æ³•æ¸²æŸ“</span>    md <span class="token operator">=</span> markdown<span class="token punctuation">.</span>Markdown<span class="token punctuation">(</span>        extensions<span class="token operator">=</span><span class="token punctuation">[</span>        <span class="token string">'markdown.extensions.extra'</span><span class="token punctuation">,</span>        <span class="token string">'markdown.extensions.codehilite'</span><span class="token punctuation">,</span>        <span class="token string">'markdown.extensions.toc'</span><span class="token punctuation">,</span>        <span class="token punctuation">]</span>    <span class="token punctuation">)</span>    article<span class="token punctuation">.</span>body <span class="token operator">=</span> md<span class="token punctuation">.</span>convert<span class="token punctuation">(</span>article<span class="token punctuation">.</span>body<span class="token punctuation">)</span>    <span class="token comment"># æ–°å¢äº†md.tocå¯¹è±¡</span>    context <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token string">'article'</span><span class="token punctuation">:</span> article<span class="token punctuation">,</span> <span class="token string">'toc'</span><span class="token punctuation">:</span> md<span class="token punctuation">.</span>toc <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'article/detail.html'</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸ºäº†èƒ½å°†<code>toc</code>å•ç‹¬æå–å‡ºæ¥ï¼Œæˆ‘ä»¬å…ˆå°†Markdownç±»èµ‹å€¼ç»™ä¸€ä¸ªä¸´æ—¶å˜é‡<code>md</code>ï¼Œç„¶åç”¨<code>convert()</code>æ–¹æ³•å°†æ­£æ–‡æ¸²æŸ“ä¸ºhtmlé¡µé¢ã€‚é€šè¿‡<code>md.toc</code>å°†ç›®å½•ä¼ é€’ç»™æ¨¡æ¿ã€‚</p><blockquote><p>æ³¨æ„<code>markdown.markdown()</code>å’Œ<code>markdown.Markdown()</code>çš„åŒºåˆ«</p><p>æ›´è¯¦ç»†çš„è§£é‡Šè§ï¼š<a href="https://python-markdown.github.io/extensions/toc/">å®˜æ–¹æ–‡æ¡£</a></p></blockquote><p>ä¸ºäº†å°†æ–°çš„ç›®å½•æ¸²æŸ“åˆ°é¡µé¢ä¸­ï¼Œéœ€è¦ä¿®æ”¹æ–‡ç« è¯¦æƒ…æ¨¡æ¿ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/detail.html...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- å°†åŸæœ‰å†…å®¹åµŒå¥—è¿›æ–°çš„divä¸­ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-9<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mt-4 mb-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; article.title &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>alert alert-success<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                ...            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- æ–°å¢çš„ç›®å½• --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-3 mt-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">></span></span>ç›®å½•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>                &#123;&#123; toc|safe &#125;&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>é‡æ–°å¸ƒå±€ï¼Œå°†åŸæœ‰å†…å®¹è£…è¿›<code>col-9</code>çš„å®¹å™¨ä¸­ï¼Œå°†å³ä¾§<code>col-3</code>çš„ç©ºé—´ç•™ç»™ç›®å½•</li><li><code>toc</code>éœ€è¦<code>|safe</code>æ ‡ç­¾æ‰èƒ½æ­£ç¡®æ¸²æŸ“</li></ul><p>é‡æ–°æ‰“å¼€é¡µé¢ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181231/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE136.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181231/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE136.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å®Œæˆäº†æ–‡ç« çš„ç›®å½•åŠŸèƒ½ï¼Œè‡³æ­¤æ–‡ç« è¯¦æƒ…é¡µé¢ä¹Ÿæ¯”è¾ƒå®Œå–„äº†ã€‚</p><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#x64;&#x75;&#115;&#97;&#x69;&#x70;&#x68;&#x6f;&#x74;&#111;&#x40;&#102;&#111;&#x78;&#x6d;&#x61;&#105;&#108;&#x2e;&#x63;&#111;&#109;">&#x64;&#x75;&#115;&#97;&#x69;&#x70;&#x68;&#x6f;&#x74;&#111;&#x40;&#102;&#111;&#x78;&#x6d;&#x61;&#105;&#108;&#x2e;&#x63;&#111;&#109;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul><blockquote><p>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--24.è¯„è®º</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/24.ping-lun/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/24.ping-lun/</url>
      
        <content type="html"><![CDATA[<p>åœ¨æ²¡æœ‰äº’è”ç½‘çš„å¹´ä»£ï¼Œæˆ‘ä»¬ç”¨æ—¥è®°æ¥è®°å½•æ¯å¤©çš„å¿ƒå¾—ä½“ä¼šã€‚å°çš„æ—¶å€™æˆ‘æœ‰ä¸€ä¸ªå¸¦é”çš„æ—¥è®°æœ¬ï¼Œç”Ÿæ€•è¢«åˆ«äººçœ‹è§é‡Œé¢å†™äº†å•¥ï¼Œé’¥åŒ™è—å¾—é‚£å«ä¸€ä¸ªç»ã€‚</p><p>ç°åœ¨æ—¶ä»£å˜äº†ï¼Œç½‘ç»œç‰ˆçš„æ—¥è®°æœ¬ï¼šåšå®¢ï¼Œå´å·´ä¸å¾—è¶Šå¤šäººçœ‹è¶Šå¥½ã€‚</p><p>åˆ«äººçœ‹å®Œä½ å†™çš„æ·±åº¦å¥½æ–‡ï¼Œéš¾å…ä¹Ÿæƒ³é«˜è°ˆé˜”è®ºä¸€ç•ªï¼Œè¿™å°±æ˜¯â€œè¯„è®ºâ€åŠŸèƒ½ã€‚</p><p>æœ¬ç« å°†è¦ç¼–å†™çš„è¯„è®ºæ¨¡å—ï¼Œå‡ ä¹æ²¡æœ‰æ–°çš„çŸ¥è¯†ç‚¹ï¼Œè€Œæ˜¯å°†å‰é¢ç« èŠ‚å†…å®¹çš„ç»¼åˆåº”ç”¨ã€‚</p><p><strong>å¼ºçƒˆå»ºè®®è¯»è€…è‡ªè¡Œå°è¯•ç¼–å†™è¿™éƒ¨åˆ†å†…å®¹ï¼Œæµ‹è¯•è‡ªå·±çš„çŸ¥è¯†æŒæ¡ç¨‹åº¦ã€‚</strong></p><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><p>è¯„è®ºæ˜¯ä¸€ä¸ªç›¸å¯¹ç‹¬ç«‹çš„åŠŸèƒ½ï¼Œå› æ­¤æ–°å»ºä¸€ä¸ªè¯„è®ºçš„appï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> E:<span class="token punctuation">\</span>django_project<span class="token punctuation">\</span>my_blog <span class="token operator">></span> ppython manage.py startapp comment<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>æœ‰çš„äººè§‰å¾—å¥‡æ€ªï¼Œæ²¡æœ‰åšæ–‡å°±æ²¡æœ‰è¯„è®ºï¼Œä¸ºä»€ä¹ˆè¯´è¯„è®ºæ˜¯â€œç‹¬ç«‹â€çš„åŠŸèƒ½ï¼Ÿ</p><p>é‚£æ˜¯å› ä¸ºä¸ä»…åšæ–‡å¯ä»¥è¯„è®ºï¼Œç…§ç‰‡ã€è§†é¢‘ç”šè‡³ç½‘ç«™æœ¬èº«éƒ½å¯ä»¥â€œè¢«è¯„è®ºâ€ã€‚å°†å…¶å°è£…æˆå•ç‹¬çš„æ¨¡å—æ–¹ä¾¿ä»¥åçš„æ‰©å±•ã€‚</p></blockquote><p>ç¡®è®¤appåˆ›å»ºæˆåŠŸåï¼Œè®°å¾—åœ¨<code>settings.py</code>ä¸­æ³¨å†Œï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_blog<span class="token operator">/</span>settings<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token string">'comment'</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>TIME_ZONE <span class="token operator">=</span> <span class="token string">'Asia/Shanghai'</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å› ä¸ºæˆ‘ä»¬æƒ³æ˜¾ç¤ºå‘è¡¨è¯„è®ºçš„æ—¶é—´ï¼Œä¿®æ”¹æ—¶åŒºè®¾ç½®<code>TIME_ZONE</code>ä¸ºä¸Šæµ·çš„æ—¶åŒºã€‚</p><p>ç„¶ååœ¨<code>my_blog/urls.py</code>ä¸­æ³¨å†Œæ ¹è·¯ç”±ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_blog<span class="token operator">/</span>urls<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># è¯„è®º</span>    path<span class="token punctuation">(</span><span class="token string">'comment/'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">'comment.urls'</span><span class="token punctuation">,</span> namespace<span class="token operator">=</span><span class="token string">'comment'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç¼–å†™æ ¸å¿ƒåŠŸèƒ½"><a href="#ç¼–å†™æ ¸å¿ƒåŠŸèƒ½" class="headerlink" title="ç¼–å†™æ ¸å¿ƒåŠŸèƒ½"></a>ç¼–å†™æ ¸å¿ƒåŠŸèƒ½</h2><h3 id="è¯„è®ºçš„æ¨¡å‹"><a href="#è¯„è®ºçš„æ¨¡å‹" class="headerlink" title="è¯„è®ºçš„æ¨¡å‹"></a>è¯„è®ºçš„æ¨¡å‹</h3><p>é¦–å…ˆç¼–å†™è¯„è®ºçš„æ¨¡å‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">comment<span class="token operator">/</span>models<span class="token punctuation">.</span>py<span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>models <span class="token keyword">import</span> User<span class="token keyword">from</span> article<span class="token punctuation">.</span>models <span class="token keyword">import</span> ArticlePost<span class="token comment"># åšæ–‡çš„è¯„è®º</span><span class="token keyword">class</span> <span class="token class-name">Comment</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    article <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>        ArticlePost<span class="token punctuation">,</span>        on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">,</span>        related_name<span class="token operator">=</span><span class="token string">'comments'</span>    <span class="token punctuation">)</span>    user <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>        User<span class="token punctuation">,</span>         on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">,</span>         related_name<span class="token operator">=</span><span class="token string">'comments'</span>    <span class="token punctuation">)</span>    body <span class="token operator">=</span> models<span class="token punctuation">.</span>TextField<span class="token punctuation">(</span><span class="token punctuation">)</span>    created <span class="token operator">=</span> models<span class="token punctuation">.</span>DateTimeField<span class="token punctuation">(</span>auto_now_add<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        ordering <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'created'</span><span class="token punctuation">,</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>body<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¨¡å‹ä¸­å…±æœ‰2ä¸ªå¤–é”®ï¼š</p><ul><li><code>article</code>æ˜¯è¢«è¯„è®ºçš„æ–‡ç« </li><li><code>user</code>æ˜¯è¯„è®ºçš„å‘å¸ƒè€…</li></ul><p>åˆ«å¿˜äº†æ¯æ¬¡æ–°å¢ã€ä¿®æ”¹Modelåï¼Œå¿…é¡»<strong>æ•°æ®è¿ç§»</strong>ã€‚</p><blockquote><p>æç¤ºï¼šä½ å¿…é¡»å…ˆåœ¨setting.pyä¸­æ³¨å†Œappï¼Œè¿™ä¸ªappä¸­çš„æ•°æ®è¿ç§»æ‰èƒ½ç”Ÿæ•ˆ</p></blockquote><h3 id="è¯„è®ºçš„è¡¨å•"><a href="#è¯„è®ºçš„è¡¨å•" class="headerlink" title="è¯„è®ºçš„è¡¨å•"></a>è¯„è®ºçš„è¡¨å•</h3><p>ç”¨æˆ·æäº¤è¯„è®ºæ—¶ä¼šç”¨åˆ°è¡¨å•ï¼Œå› æ­¤<strong>æ–°å»º</strong>è¡¨å•ç±»ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">comment<span class="token operator">/</span>forms<span class="token punctuation">.</span>py<span class="token keyword">from</span> django <span class="token keyword">import</span> forms<span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> Comment<span class="token keyword">class</span> <span class="token class-name">CommentForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        model <span class="token operator">=</span> Comment        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'body'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å› ä¸ºæ¨¡å‹ä¸­çš„2ä¸ªå¤–é”®å°†é€šè¿‡è§†å›¾é€»è¾‘è‡ªåŠ¨å¡«å†™ï¼Œæ‰€ä»¥è¿™é‡Œåªéœ€è¦æäº¤<code>body</code>å°±è¶³å¤Ÿäº†ã€‚</p><h3 id="è¯„è®ºçš„url"><a href="#è¯„è®ºçš„url" class="headerlink" title="è¯„è®ºçš„url"></a>è¯„è®ºçš„url</h3><p>åœ¨comment appä¸­<strong>æ–°å»º</strong>è·¯ç”±æ–‡ä»¶ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">comment<span class="token operator">/</span>urls<span class="token punctuation">.</span>py<span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> viewsapp_name <span class="token operator">=</span> <span class="token string">'comment'</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token comment"># å‘è¡¨è¯„è®º</span>    path<span class="token punctuation">(</span><span class="token string">'post-comment/&lt;int:article_id>/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>post_comment<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'post_comment'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¯„è®ºå¿…é¡»å…³è”åœ¨æŸç¯‡å…·ä½“çš„åšæ–‡é‡Œï¼Œå› æ­¤ä¼ å…¥åšæ–‡çš„<code>id</code>ï¼Œæ–¹ä¾¿åç»­è°ƒç”¨ã€‚</p><p><code>post_comment()</code>è§†å›¾è¿˜æ²¡å†™ï¼Œå…ˆå–ä¸ªåå­—å ä½ç½®ã€‚</p><h3 id="è¯„è®ºçš„è§†å›¾"><a href="#è¯„è®ºçš„è§†å›¾" class="headerlink" title="è¯„è®ºçš„è§†å›¾"></a>è¯„è®ºçš„è§†å›¾</h3><p>è¯„è®ºçš„è§†å›¾å‡½æ•°å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">comment<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render<span class="token punctuation">,</span> get_object_or_404<span class="token punctuation">,</span> redirect<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>decorators <span class="token keyword">import</span> login_required<span class="token keyword">from</span> django<span class="token punctuation">.</span>http <span class="token keyword">import</span> HttpResponse<span class="token keyword">from</span> article<span class="token punctuation">.</span>models <span class="token keyword">import</span> ArticlePost<span class="token keyword">from</span> <span class="token punctuation">.</span>forms <span class="token keyword">import</span> CommentForm<span class="token comment"># æ–‡ç« è¯„è®º</span><span class="token decorator annotation punctuation">@login_required</span><span class="token punctuation">(</span>login_url<span class="token operator">=</span><span class="token string">'/userprofile/login/'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">post_comment</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> article_id<span class="token punctuation">)</span><span class="token punctuation">:</span>    article <span class="token operator">=</span> get_object_or_404<span class="token punctuation">(</span>ArticlePost<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token operator">=</span>article_id<span class="token punctuation">)</span>    <span class="token comment"># å¤„ç† POST è¯·æ±‚</span>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">:</span>        comment_form <span class="token operator">=</span> CommentForm<span class="token punctuation">(</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">)</span>        <span class="token keyword">if</span> comment_form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            new_comment <span class="token operator">=</span> comment_form<span class="token punctuation">.</span>save<span class="token punctuation">(</span>commit<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>            new_comment<span class="token punctuation">.</span>article <span class="token operator">=</span> article            new_comment<span class="token punctuation">.</span>user <span class="token operator">=</span> request<span class="token punctuation">.</span>user            new_comment<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>article<span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"è¡¨å•å†…å®¹æœ‰è¯¯ï¼Œè¯·é‡æ–°å¡«å†™ã€‚"</span><span class="token punctuation">)</span>    <span class="token comment"># å¤„ç†é”™è¯¯è¯·æ±‚</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"å‘è¡¨è¯„è®ºä»…æ¥å—POSTè¯·æ±‚ã€‚"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ä»£ç ä¸­æœ‰2ä¸ªæ–°é¢å­”ã€‚</strong></p><p><code>get_object_or_404()</code>ï¼šå®ƒå’Œ<code>Model.objects.get()</code>çš„åŠŸèƒ½åŸºæœ¬æ˜¯ç›¸åŒçš„ã€‚åŒºåˆ«æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œå¦‚æœç”¨æˆ·è¯·æ±‚ä¸€ä¸ªä¸å­˜åœ¨çš„å¯¹è±¡æ—¶ï¼Œ<code>Model.objects.get()</code>ä¼šè¿”å›<code>Error 500</code>ï¼ˆæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼‰ï¼Œè€Œ<code>get_object_or_404()</code>ä¼šè¿”å›<code>Error 404</code>ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œè¿”å›404é”™è¯¯æ›´åŠ çš„å‡†ç¡®ã€‚</p><p><code>redirect()</code>ï¼šè¿”å›åˆ°ä¸€ä¸ªé€‚å½“çš„urlä¸­ï¼šå³ç”¨æˆ·å‘é€è¯„è®ºåï¼Œé‡æ–°å®šå‘åˆ°æ–‡ç« è¯¦æƒ…é¡µé¢ã€‚å½“å…¶å‚æ•°æ˜¯ä¸€ä¸ªModelå¯¹è±¡æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªModelå¯¹è±¡çš„<code>get_absolute_url()</code>æ–¹æ³•ã€‚å› æ­¤æ¥ä¸‹æ¥é©¬ä¸Šä¿®æ”¹<code>article</code>çš„æ¨¡å‹ã€‚</p><blockquote><p>å®é™…ä¸Šä¹‹å‰çš„ç« èŠ‚å·²ç»ç”¨è¿‡<code>redirect()</code>äº†ã€‚åŠŸèƒ½æ˜¯ç›¸åŒçš„ï¼Œå®ç°ä¸Šç•¥æœ‰åŒºåˆ«ã€‚</p></blockquote><h3 id="æ–‡ç« çš„æ¨¡å‹"><a href="#æ–‡ç« çš„æ¨¡å‹" class="headerlink" title="æ–‡ç« çš„æ¨¡å‹"></a>æ–‡ç« çš„æ¨¡å‹</h3><p>æŒ‰ç…§ä¸Šé¢è¯´çš„ï¼Œåœ¨æ–‡ç« æ¨¡å‹ä¸­æ·»åŠ <code>get_absolute_url()</code>æ–¹æ³•ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>models<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># è®°å¾—å¯¼å…¥</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> reverse<span class="token keyword">class</span> <span class="token class-name">ArticlePost</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># è·å–æ–‡ç« åœ°å€</span>    <span class="token keyword">def</span> <span class="token function">get_absolute_url</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> reverse<span class="token punctuation">(</span><span class="token string">'article:article_detail'</span><span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">[</span>self<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é€šè¿‡<code>reverse()</code>æ–¹æ³•è¿”å›æ–‡ç« è¯¦æƒ…é¡µé¢çš„urlï¼Œå®ç°äº†è·¯ç”±é‡å®šå‘ã€‚</p><h3 id="æ–‡ç« è¯¦æƒ…è§†å›¾"><a href="#æ–‡ç« è¯¦æƒ…è§†å›¾" class="headerlink" title="æ–‡ç« è¯¦æƒ…è§†å›¾"></a>æ–‡ç« è¯¦æƒ…è§†å›¾</h3><p>è¯„è®ºæ¨¡å—éœ€è¦åœ¨<strong>æ–‡ç« è¯¦æƒ…</strong>é¡µé¢å±•ç¤ºï¼Œæ‰€ä»¥å¿…é¡»æŠŠè¯„è®ºæ¨¡å—çš„ä¸Šä¸‹æ–‡ä¹Ÿä¼ é€’åˆ°æ¨¡æ¿ä¸­ã€‚</p><p>å› æ­¤ä¿®æ”¹<code>article/views.py</code>ä¸­çš„<code>article_detail()</code>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">from</span> comment<span class="token punctuation">.</span>models <span class="token keyword">import</span> Comment<span class="token keyword">def</span> <span class="token function">article_detail</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># å·²æœ‰ä»£ç </span>    article <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token builtin">id</span><span class="token punctuation">)</span>    <span class="token comment"># å–å‡ºæ–‡ç« è¯„è®º</span>    comments <span class="token operator">=</span> Comment<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>article<span class="token operator">=</span><span class="token builtin">id</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token comment"># æ·»åŠ commentsä¸Šä¸‹æ–‡</span>    context <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token string">'article'</span><span class="token punctuation">:</span> article<span class="token punctuation">,</span> <span class="token string">'toc'</span><span class="token punctuation">:</span> md<span class="token punctuation">.</span>toc<span class="token punctuation">,</span> <span class="token string">'comments'</span><span class="token punctuation">:</span> comments <span class="token punctuation">&#125;</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><code>filter()</code>å¯ä»¥å–å‡ºå¤šä¸ªæ»¡è¶³æ¡ä»¶çš„å¯¹è±¡ï¼Œè€Œ<code>get()</code>åªèƒ½å–å‡º1ä¸ªï¼Œæ³¨æ„åŒºåˆ†ä½¿ç”¨</p></blockquote><h3 id="æ–‡ç« è¯¦æƒ…æ¨¡æ¿"><a href="#æ–‡ç« è¯¦æƒ…æ¨¡æ¿" class="headerlink" title="æ–‡ç« è¯¦æƒ…æ¨¡æ¿"></a>æ–‡ç« è¯¦æƒ…æ¨¡æ¿</h3><p>åˆ°æœ€åä¸€æ­¥äº†ï¼ŒåšæŒã€‚æ‰€æœ‰åå°çš„åŠŸèƒ½å·²ç»å†™å®Œäº†ï¼Œå°±å·®æŠŠæ‰€æœ‰è¿™äº›å±•ç°åˆ°é¡µé¢ä¸­äº†ã€‚</p><p>ä¿®æ”¹æ–‡ç« è¯¦æƒ…é¡µé¢ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/detail.html...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-9<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    ...    <span class="token comment">&lt;!-- å·²æœ‰ä»£ç ï¼Œæ–‡ç« æ­£æ–‡ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-12<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        ...    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- å‘è¡¨è¯„è®º --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">></span></span>    &#123;% if user.is_authenticated %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span>                 <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>comment:post_comment<span class="token punctuation">'</span> article.id %&#125;<span class="token punctuation">"</span></span>                 <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>POST<span class="token punctuation">"</span></span>            <span class="token punctuation">></span></span>            &#123;% csrf_token %&#125;                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>body<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">></span></span>                            æˆ‘ä¹Ÿè¦å‘è¨€ï¼š                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span>                         <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span>                         <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span>                         <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>body<span class="token punctuation">"</span></span>                         <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>body<span class="token punctuation">"</span></span>                         <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- æäº¤æŒ‰é’® --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-primary <span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å‘é€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>    &#123;% else %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h5</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row justify-content-center<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            è¯·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>userprofile:login<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç™»å½•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>åå›å¤        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>    &#123;% endif %&#125;        <span class="token comment">&lt;!-- æ˜¾ç¤ºè¯„è®º --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">></span></span>å…±æœ‰&#123;&#123; comments.count &#125;&#125;æ¡è¯„è®º<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>        &#123;% for comment in comments %&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> pink</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                    &#123;&#123; comment.user &#125;&#125;                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">></span></span> äº                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> green</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                    &#123;&#123; comment.created|date:"Y-m-d H:i:s" &#125;&#125;                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span> æ—¶è¯´ï¼š            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">font-family</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span> <span class="token property">font-size</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>&#123;&#123; comment.body &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">></span></span>        &#123;% endfor %&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- ç›®å½• --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-3 mt-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    ...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>è¡¨å•ç»„ä»¶ä¸­çš„<code>action</code>æŒ‡å®šæ•°æ®æäº¤åˆ°å“ªä¸ªurlä¸­</p></li><li><p>æ˜¾ç¤ºè¯„è®ºä¸­çš„<code>comments.count</code>æ˜¯æ¨¡æ¿å¯¹è±¡ä¸­å†…ç½®çš„æ–¹æ³•ï¼Œå¯¹åŒ…å«çš„å…ƒç´ è¿›è¡Œè®¡æ•°</p></li><li><p><code>|date:&quot;Y-m-d H:i :s&quot;</code>ï¼šç®¡é“ç¬¦ä½ å·²ç»å¾ˆç†Ÿæ‚‰äº†ï¼Œç”¨äºç»™å¯¹è±¡â€œç²˜è´´â€æŸäº›å±æ€§æˆ–åŠŸèƒ½ã€‚è¿™é‡Œç”¨äºæ ¼å¼åŒ–æ—¥æœŸçš„æ˜¾ç¤ºæ–¹å¼ã€‚è¯·å°è¯•ä¿®æ”¹å…¶ä¸­çš„æŸäº›å­—ç¬¦è¯•è¯•æ•ˆæœã€‚</p></li><li><p><code>&lt;pre&gt;</code>å®šä¹‰é¢„æ ¼å¼åŒ–çš„æ–‡æœ¬ï¼Œåœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­æœ€å…³é”®çš„ä½œç”¨æ˜¯ä¿ç•™ç©ºæ ¼å’Œæ¢è¡Œç¬¦ã€‚è¯¥æ ‡ç­¾ä¼šæ”¹å˜æ–‡å­—çš„å­—ä½“ã€å¤§å°ç­‰ï¼Œå› æ­¤ç”¨<code>style</code>å±æ€§é‡æ–°å®šä¹‰ç›¸å…³å†…å®¹ã€‚å°è¯•å°†<code>&lt;pre&gt;</code>æ›¿æ¢ä¸º<code>div</code>ï¼Œè¾“å…¥å¤šè¡Œæ–‡æœ¬è¯•è¯•æ•ˆæœã€‚</p><blockquote><p>ä¹‹å‰è¯´ä»£ç æœ€å¥½ä¸è¦å¤åˆ¶ç²˜è´´ï¼Œå¦åˆ™æœ‰äº›â€œå°å‘â€ä½ æ˜¯ç•™æ„ä¸åˆ°çš„ã€‚æ¯”å¦‚åœ¨<code>&lt;pre&gt;</code>æ ‡ç­¾ä¸­çš„æ–‡æœ¬åƒä¸‡ä¸èƒ½ç¼©è¿›ã€‚</p></blockquote></li></ul><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>åˆåˆ°äº†æ¿€åŠ¨äººå¿ƒçš„æµ‹è¯•ç¯èŠ‚äº†ã€‚</p><p>ç™»å½•è‡ªå·±çš„è´¦æˆ·ï¼Œè¿›å…¥æŸä¸ªæ–‡ç« è¯¦æƒ…é¡µé¢ï¼Œå‘ç°å·²ç»å¯ä»¥è¿›è¡Œç•™è¨€äº†ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190101/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE137.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190101/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE137.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>å¦‚æœé€€å‡ºç™»å½•ï¼Œæ˜¾ç¤ºæç¤ºè¯­ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190101/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE138.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190101/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE138.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ç‚¹å‡»ç™»å½•å°±å›åˆ°ç™»å½•é¡µé¢ã€‚</p><p>è¯„è®ºæ¨¡å—çš„å‘å¸ƒã€å±•ç¤ºåŠŸèƒ½å°±æå®šäº†ã€‚</p><h3 id="æ‰«å°¾å·¥ä½œ"><a href="#æ‰«å°¾å·¥ä½œ" class="headerlink" title="æ‰«å°¾å·¥ä½œ"></a>æ‰«å°¾å·¥ä½œ</h3><p>æ•°æ®çš„åˆ ã€æ”¹åŠŸèƒ½æˆ‘ä»¬å·²ç»åšè¿‡å¾ˆå¤šéï¼Œè¿™é‡Œä¸æ‰“ç®—å†èµ˜è¿°äº†ã€‚</p><p>è¯„è®ºåŒæ ·ä¹Ÿå¯ä»¥æ”¯æŒMarkdownè¯­æ³•ï¼Œæˆ–è€…æ’å…¥Emojiè¡¨æƒ…ç¬¦å·ã€‚</p><p>è¯»è€…å¯ä»¥è‡ªå·±å»å®ç°æ„Ÿå…´è¶£çš„åŠŸèƒ½ã€‚</p><blockquote><p>æœ‰äº›ç½‘ç«™å¹²è„†å°±æ²¡æœ‰åˆ é™¤ã€æ›´æ–°è¯„è®ºçš„åŠŸèƒ½ã€‚å› ä¸ºå¯¹å°ç«™æ¥è¯´ï¼Œè¿™äº›åŠŸèƒ½ç”¨åˆ°çš„æ¬¡æ•°å¤ªå°‘å¤ªå°‘äº†ï¼Œä¸å¦‚æŠŠç²¾åŠ›ç”¨åœ¨æ›´æœ‰ä»·å€¼çš„åœ°æ–¹å»ã€‚æ¯”å¦‚<a href="https://www.dusaiphoto.com/">æˆ‘çš„åšå®¢</a>å°±æ²¡æœ‰ã€‚</p><p>è¿˜æœ‰çš„ç½‘ç«™æä¾›è½¯åˆ é™¤ï¼Œåˆ é™¤åä»…ä»…æ˜¯ä¸æ˜¾ç¤ºè€Œå·²ï¼Œå®é™…ä¸Šæ•°æ®è¿˜å­˜åœ¨ã€‚</p><p>å…·ä½“åº”è¯¥å¦‚ä½•åšï¼Œéƒ½ä»¥ä½ çš„å–œå¥½è€Œå®šã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« å®ç°äº†å‘è¡¨è¯„è®ºã€å±•ç¤ºè¯„è®ºçš„åŠŸèƒ½ã€‚åƒå¼€å¤´è¯´çš„ä¸€æ ·ï¼Œæœ¬ç« çš„å†…å®¹æ˜¯å‰é¢æ‰€å­¦ç« èŠ‚çš„ç»¼åˆã€‚</p><p>å¦‚æœä½ æ²¡æœ‰çœ‹æœ¬ç« ä»£ç ï¼Œè€Œæ˜¯å®Œå…¨é è‡ªå·±å®Œæˆäº†è¯„è®ºåŠŸèƒ½ï¼Œé‚£ä¹ˆæ­å–œä½ è·å¾—äº†<strong>â€œDjangoå…¥é—¨ç¨‹åºå‘˜â€</strong>çš„ç§°å·ï¼ä¸è¦å°çœ‹â€œå…¥é—¨â€ä¸¤å­—ï¼Œä¸‡äº‹å¼€å¤´éš¾å˜›ã€‚</p><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#100;&#117;&#x73;&#97;&#x69;&#112;&#x68;&#x6f;&#x74;&#x6f;&#64;&#x66;&#x6f;&#120;&#109;&#x61;&#x69;&#x6c;&#x2e;&#x63;&#111;&#109;">&#100;&#117;&#x73;&#97;&#x69;&#112;&#x68;&#x6f;&#x74;&#x6f;&#64;&#x66;&#x6f;&#120;&#109;&#x61;&#x69;&#x6c;&#x2e;&#x63;&#111;&#109;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul><blockquote><p>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--25.è¯¾é—´ä¼‘æ¯</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/25.ke-jian-xiu-xi/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/25.ke-jian-xiu-xi/</url>
      
        <content type="html"><![CDATA[<p><strong>æ•™ç¨‹çœ‹åˆ°è¿™é‡Œï¼Œä½ å·²ç»å­¦ä¼šå¦‚ä¸‹å†…å®¹ï¼š</strong></p><ul><li>æ­å»ºå¼€å‘ç¯å¢ƒ</li><li>åšæ–‡ç®¡ç†</li><li>ç”¨æˆ·ç®¡ç†</li><li>å‘è¡¨è¯„è®º</li><li>è‹¥å¹²å…¶ä»–åŠŸèƒ½</li></ul><p>æ­å»ºç®€å•çš„å°åšå®¢ï¼Œä»¥ä¸Šçš„åŠŸèƒ½å¤Ÿç”¨äº†ã€‚<strong>ä½†ç›¸ä¿¡ä½ çš„å¿—å‘ä¸æ­¢äºæ­¤ï¼Œ</strong>æ¯•ç«Ÿç¨‹åºå‘˜é¢è¯•ä¸ªä¸ªé€ ç«ç®­å•Šã€‚</p><h2 id="æ¥ä¸‹æ¥å­¦ä»€ä¹ˆ"><a href="#æ¥ä¸‹æ¥å­¦ä»€ä¹ˆ" class="headerlink" title="æ¥ä¸‹æ¥å­¦ä»€ä¹ˆ"></a>æ¥ä¸‹æ¥å­¦ä»€ä¹ˆ</h2><p><strong>æ•™ç¨‹æ¥ä¸‹æ¥æ˜¯è¿›é˜¶éƒ¨åˆ†ï¼ŒåŒ…æ‹¬ï¼š</strong></p><ul><li>ç±»è§†å›¾</li><li>å¤šçº§è¯„è®º</li><li>æ–‡ç« æ ç›®å’Œæ ‡ç­¾</li><li>å›¾ç‰‡å¤„ç†</li><li>ç¬¬ä¸‰æ–¹ç™»å½•</li><li>æµ‹è¯•ä¸ç»´æŠ¤</li><li>éƒ¨ç½²</li><li>å…¶ä»–å†…å®¹</li></ul><h3 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h3><p>å¼€å‘å¥½é¡¹ç›®çš„demoåï¼Œä½ åº”è¯¥å°½å¿«éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ä¸Šï¼Œè®©ä¸–ç•Œå„åœ°çš„ç”¨æˆ·éšæ—¶æµè§ˆä½ çš„ç½‘é¡µã€‚ä¸è¦è¯¯ä¼šï¼Œ<strong>éƒ¨ç½²åªæ˜¯ä¸€ä¸ªèµ·ç‚¹</strong>ï¼Œä½œç”¨æ˜¯è®©ä½ è·å¾—å·¨å¤§çš„æˆå°±æ„Ÿï¼›éƒ¨ç½²åä½ è¿˜æ˜¯éœ€è¦æŒç»­çš„ä¼˜åŒ–ã€æ·»åŠ ç½‘ç«™çš„åŠŸèƒ½ï¼Œä»¥åŠä¿®è¡¥ä½ æ»¡å¤©é£çš„Bugã€‚</p><p><a href="https://www.dusaiphoto.com/article/detail/71/">å°†é¡¹ç›®éƒ¨ç½²åˆ°çº¿ä¸Šçš„ç« èŠ‚</a>åœ¨æœ¬æ•™ç¨‹çš„æœ«å°¾ï¼Œå¿ƒæ€¥çš„åŒå­¦å¯ä»¥å…ˆå»å°è¯•éƒ¨ç½²ã€‚å½“ç„¶æŒ‰éƒ¨å°±ç­çš„å­¦å®Œæ•™ç¨‹å†éƒ¨ç½²ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p><h2 id="ç»§ç»­æˆ˜æ–—"><a href="#ç»§ç»­æˆ˜æ–—" class="headerlink" title="ç»§ç»­æˆ˜æ–—"></a>ç»§ç»­æˆ˜æ–—</h2><p>çœ‹å®Œè¿™äº›ï¼Œä½ å°±å¯ä»¥è¸ä¸Šæ–°çš„å¾ç¨‹äº†ã€‚</p><p>å†™è¿™ç¯‡åšæ–‡æ­£å¥½åœ¨2019å¹´å…ƒæ—¦ï¼Œè€Œä½ åº”è¯¥åœ¨æœªæ¥çš„æŸä¸ªæ™®é€šçš„æ—¥å­çœ‹åˆ°ã€‚</p><p><strong>é™Œç”Ÿäººï¼Œç¥ä½ å­¦ä¸šè¿›æ­¥ã€äº‹ä¸šæœ‰æˆï¼Œç»§ç»­æˆ˜æ–—å§ï¼</strong></p><blockquote><p>å†™æ•™ç¨‹ä»˜å‡ºåšä¸»å¾ˆå¤šçš„ç²¾åŠ›ï¼Œå¦‚æœä½ æœ‰æ”¶è·ï¼Œæ¬¢è¿ç‚¹å‡»æ•™ç¨‹å°¾éƒ¨çš„**[æ‰“èµ]**æŒ‰é’®ï¼Œè¯·åšä¸»å–æ¯å’–å•¡~</p><p>æˆ–è€…åœ¨æˆ‘çš„<a href="https://github.com/stacklens/django_blog_tutorial">GitHubåšå®¢æ•™ç¨‹ä»£ç </a>ç»™ä¸€ä¸ªå°æ˜Ÿæ˜Ÿï¼Œæ„Ÿè°¢å„ä½çš„æ”¯æŒã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--26.åŸºäºç±»çš„è§†å›¾</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/26.ji-yu-lei-de-shi-tu/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/26.ji-yu-lei-de-shi-tu/</url>
      
        <content type="html"><![CDATA[<p>è¯´æ˜¯å®Œç»“ï¼Œé©¬ä¸Šåˆå¼€å§‹å†™è¿›é˜¶ç¯‡äº†ã€‚</p><p>æœ¬ç« ä¸ä¼šä¸ºåšå®¢é¡¹ç›®å¢åŠ æ–°åŠŸèƒ½ï¼Œ<strong>ä½†æ˜¯ä¹ŸåŒæ ·é‡è¦</strong>ï¼Œå› ä¸ºæˆ‘ä»¬è¦å­¦ä¹ <del>é«˜é€¼æ ¼çš„</del>åŸºäº<strong>ç±»</strong>çš„è§†å›¾ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯ç±»è§†å›¾"><a href="#ä»€ä¹ˆæ˜¯ç±»è§†å›¾" class="headerlink" title="ä»€ä¹ˆæ˜¯ç±»è§†å›¾"></a>ä»€ä¹ˆæ˜¯ç±»è§†å›¾</h2><p>å‰é¢ç« èŠ‚ä¸­å†™çš„æ‰€æœ‰è§†å›¾éƒ½æ˜¯åŸºäºå‡½æ•°çš„ï¼Œå³<code>def</code>ï¼›è€Œç±»è§†å›¾æ˜¯åŸºäºç±»çš„ï¼Œå³<code>class</code>ã€‚</p><p>æœ‰ç¼–ç¨‹åŸºç¡€çš„åŒå­¦éƒ½çŸ¥é“ï¼Œ<strong>ç±»</strong>æ˜¯é¢å‘å¯¹è±¡æŠ€æœ¯ä¸­éå¸¸é‡è¦çš„æ¦‚å¿µã€‚å…·æœ‰å¤æ‚<strong>æ•°æ®</strong>ã€<strong>åŠŸèƒ½</strong>çš„ç±»ï¼Œå¯ä»¥é€šè¿‡ç»§æ‰¿è½»è€Œæ˜“ä¸¾çš„å°†è‡ªèº«ç‰¹æ€§ä¼ é€’ç»™å¦ä¸€ä¸ªç±»ï¼Œä»è€Œå®ç°ä»£ç çš„é«˜æ•ˆå¤ç”¨ã€‚</p><p>ç›¸æ¯”ä»¥å‰çš„å‡½æ•°è§†å›¾ï¼Œç±»è§†å›¾æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p><ul><li>HTTPæ–¹æ³•ï¼ˆ<code>GET</code>ï¼Œ<code>POST</code>ç­‰ï¼‰ç›¸å…³çš„ä»£ç ï¼Œå¯ä»¥é€šè¿‡<strong>æ–¹æ³•</strong>è€Œä¸æ˜¯<strong>æ¡ä»¶åˆ†æ”¯</strong>æ¥ç»„ç»‡</li><li>å¯ä»¥é€šè¿‡è¯¸å¦‚mixinsï¼ˆå¤šé‡ç»§æ‰¿ï¼‰ä¹‹ç±»çš„é¢å‘å¯¹è±¡æŠ€æœ¯å°†ä»£ç åˆ†è§£ä¸º<strong>å¯é‡ç”¨ç»„ä»¶</strong></li></ul><p>è¯´çš„éƒ½æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿé€šè¿‡ä¾‹å­æ¥æ„Ÿå—ä¸€ä¸‹ã€‚</p><h2 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a>åˆ—è¡¨</h2><h3 id="å‡½æ•°å’Œç±»"><a href="#å‡½æ•°å’Œç±»" class="headerlink" title="å‡½æ•°å’Œç±»"></a>å‡½æ•°å’Œç±»</h3><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª<a href="https://www.dusaiphoto.com/article/detail/16/">åšå®¢åˆ—è¡¨</a>ï¼Œåˆ—è¡¨æ—¢æœ‰GETæ–¹æ³•ã€åˆæœ‰POSTæ–¹æ³•ï¼Œé‚£ä¹ˆç”¨è§†å›¾å‡½æ•°çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">views<span class="token punctuation">.</span>py<span class="token keyword">def</span> <span class="token function">article_list_example</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""å¤„ç†GETè¯·æ±‚"""</span>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'GET'</span><span class="token punctuation">:</span>        articles <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        context <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">'articles'</span><span class="token punctuation">:</span> articles<span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'article/list.html'</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è€Œåœ¨<strong>ç±»è§†å›¾</strong>ä¸­ï¼Œåˆ™å˜ä¸ºè¿™æ ·ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">views<span class="token punctuation">.</span>py<span class="token keyword">from</span> django<span class="token punctuation">.</span>views <span class="token keyword">import</span> View<span class="token keyword">class</span> <span class="token class-name">ArticleListView</span><span class="token punctuation">(</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""å¤„ç†GETè¯·æ±‚"""</span>    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">:</span>        articles <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        context <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">'articles'</span><span class="token punctuation">:</span> articles<span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'article/list.html'</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»æœ¬è´¨ä¸Šè®²ï¼ŒåŸºäºç±»çš„è§†å›¾å…è®¸ä½ ä½¿ç”¨ä¸åŒçš„<strong>ç±»å®ä¾‹æ–¹æ³•</strong>ï¼ˆå³ä¸Šé¢çš„<code>def get()</code>ï¼‰å“åº”ä¸åŒçš„HTTPè¯·æ±‚æ–¹æ³•ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨<strong>æ¡ä»¶åˆ†æ”¯</strong>ä»£ç ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯æŠŠä¸åŒçš„HTTPè¯·æ±‚éƒ½åˆ†ç¦»åˆ°ç‹¬ç«‹çš„å‡½æ•°ä¸­ï¼Œé€»è¾‘æ›´åŠ æ¸…æ™°ï¼Œå¹¶ä¸”æ–¹ä¾¿å¤ç”¨ã€‚</p><p><strong>éœ€è¦æ³¨æ„çš„æ˜¯</strong>ï¼Œå› ä¸ºDjangoçš„URLè§£æå™¨å¸Œæœ›å°†è¯·æ±‚å‘é€åˆ°<strong>å‡½æ•°</strong>è€Œä¸æ˜¯ç±»ï¼Œæ‰€ä»¥ç±»è§†å›¾æœ‰ä¸€ä¸ª <code>as_view()</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå½“è¯·æ±‚åŒ¹é…å…³è”æ¨¡å¼çš„URLæ—¶ï¼Œåˆ™è°ƒç”¨è¯¥å‡½æ•°ã€‚</p><p>å³ï¼Œè§†å›¾å‡½æ•°çš„urlåŸæœ¬å†™ä¸ºï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">urls<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    path<span class="token punctuation">(</span><span class="token string">'...'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>article_list_example<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'...'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ç±»è§†å›¾çš„urléœ€æ”¹å†™ä¸ºï¼š</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">urls<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    path<span class="token punctuation">(</span><span class="token string">'...'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>ArticleListView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'...'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="é€šç”¨è§†å›¾"><a href="#é€šç”¨è§†å›¾" class="headerlink" title="é€šç”¨è§†å›¾"></a>é€šç”¨è§†å›¾</h3><p>åƒ<strong>åˆ—è¡¨</strong>è¿™æ ·çš„åŠŸèƒ½åœ¨webå¼€å‘ä¸­æ˜¯å¾ˆå¸¸è§çš„ï¼Œå¼€å‘è€…ä¼šä¸€éåˆä¸€éå†™å‡ ä¹ç›¸åŒçš„åˆ—è¡¨é€»è¾‘ã€‚Djangoçš„<strong>é€šç”¨è§†å›¾</strong>æ­£æ˜¯ä¸ºç¼“è§£è¿™ç§ç—›è‹¦è€Œå¼€å‘çš„ã€‚å®ƒä»¬å¯¹å¸¸ç”¨æ¨¡å¼è¿›è¡ŒæŠ½è±¡ï¼Œä»¥ä¾¿ä½ å¿«é€Ÿç¼–å†™å…¬å…±è§†å›¾ï¼Œè€Œæ— éœ€ç¼–å†™å¤ªå¤šä»£ç ã€‚</p><p>å› æ­¤ç”¨åˆ—è¡¨é€šç”¨è§†å›¾æ”¹å†™å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">views<span class="token punctuation">.</span>py<span class="token keyword">from</span> django<span class="token punctuation">.</span>views<span class="token punctuation">.</span>generic <span class="token keyword">import</span> ListView<span class="token keyword">class</span> <span class="token class-name">ArticleListView</span><span class="token punctuation">(</span>ListView<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># ä¸Šä¸‹æ–‡çš„åç§°</span>    context_object_name <span class="token operator">=</span> <span class="token string">'articles'</span>    <span class="token comment"># æŸ¥è¯¢é›†</span>    queryset <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># æ¨¡æ¿ä½ç½®</span>    template_name <span class="token operator">=</span> <span class="token string">'article/list.html'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ—è¡¨ç»§æ‰¿äº†çˆ¶ç±»<code>ListView</code>ï¼Œä¹Ÿå°±è·å¾—äº†çˆ¶ç±»ä¸­çš„å¤„ç†åˆ—è¡¨çš„æ–¹æ³•ï¼Œå› æ­¤ä½ å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åœ¨è‡ªå·±çš„ç±»ä¸­æ²¡æœ‰å†™ä»»ä½•å¤„ç†çš„é€»è¾‘ï¼Œä»…ä»…æ˜¯èµ‹å€¼äº†å‡ ä¸ªå˜é‡è€Œå·²ã€‚</p><h3 id="åŠ¨æ€è¿‡æ»¤"><a href="#åŠ¨æ€è¿‡æ»¤" class="headerlink" title="åŠ¨æ€è¿‡æ»¤"></a>åŠ¨æ€è¿‡æ»¤</h3><p>ä»æ•°æ®åº“ä¸­ç­›é€‰ç‰¹å®šçš„å†…å®¹ä¹Ÿæ˜¯å¸¸è§çš„éœ€æ±‚ï¼Œç±»è§†å›¾å¦‚ä½•å®ç°å‘¢ï¼Ÿ</p><p>ä½ å¯èƒ½æƒ³åˆ°äº†ï¼Œå°†ä¸Šé¢ä»£ç ä¸­æ”¹ä¸º<code>queryset = ArticlePost.objects.filter()</code>å°±å¯ä»¥äº†ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œ<strong>æ›´å¥½çš„åŠæ³•</strong>æ˜¯è¦†å†™<code>get_queryset()</code>æ–¹æ³•ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token class-name">ArticleListView</span><span class="token punctuation">(</span>ListView<span class="token punctuation">)</span><span class="token punctuation">:</span>    context_object_name <span class="token operator">=</span> <span class="token string">'articles'</span>    template_name <span class="token operator">=</span> <span class="token string">'article/list.html'</span>    <span class="token keyword">def</span> <span class="token function">get_queryset</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        æŸ¥è¯¢é›†        """</span>        queryset <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">'Python'</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> queryset<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¾‹å­ä¸­åªæ˜¯è¿‡æ»¤å‡ºæ ‡é¢˜ä¸ºâ€œPythonâ€çš„æ–‡ç« è€Œå·²ï¼Œæœ‰äº›å¤§æå°ç”¨äº†ï¼›ä½†æ˜¯ä½ å¯ä»¥åœ¨<code>get_queryset()</code>ä¸­å†™å¤æ‚çš„è”åˆæŸ¥è¯¢é€»è¾‘ï¼Œæ»¡è¶³ä¸ªæ€§åŒ–çš„åŠŸèƒ½ã€‚</p><h3 id="æ·»åŠ ä¸Šä¸‹æ–‡"><a href="#æ·»åŠ ä¸Šä¸‹æ–‡" class="headerlink" title="æ·»åŠ ä¸Šä¸‹æ–‡"></a>æ·»åŠ ä¸Šä¸‹æ–‡</h3><p>åœ¨åšå®¢åˆ—è¡¨çš„è®¾è®¡æ—¶ï¼Œæˆ‘ä»¬è¿”å›ç»™æ¨¡æ¿çš„<strong>ä¸Šä¸‹æ–‡</strong>é™¤äº†<code>articles</code>ä»¥å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šé¢å¤–çš„ä¿¡æ¯ï¼Œå¦‚<code>order</code>ã€<code>search</code>ï¼›åœ¨ç±»è§†å›¾ä¸­åŒæ ·å¯ä»¥å®ç°ï¼Œæ”¹å†™<code>get_context_data()</code>æ–¹æ³•å³å¯ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token class-name">ArticleListView</span><span class="token punctuation">(</span>ListView<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token keyword">def</span> <span class="token function">get_context_data</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># è·å–åŸæœ‰çš„ä¸Šä¸‹æ–‡</span>        context <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get_context_data<span class="token punctuation">(</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>        <span class="token comment"># å¢åŠ æ–°ä¸Šä¸‹æ–‡</span>        context<span class="token punctuation">[</span><span class="token string">'order'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'total_views'</span>        <span class="token keyword">return</span> context<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é™¤æ­¤ä¹‹å¤–ï¼Œ<code>ListView</code>è¿˜æœ‰äº›åˆ«çš„æ–¹æ³•å¯ä»¥è¦†å†™ï¼Œæ·±å…¥äº†è§£å¯ä»¥çœ‹è¿™é‡Œï¼š<a href="https://docs.djangoproject.com/zh-hans/2.1/ref/class-based-views/generic-display/#listview">å®˜æ–¹æ–‡æ¡£</a></p><h3 id="æ··å…¥ç±»"><a href="#æ··å…¥ç±»" class="headerlink" title="æ··å…¥ç±»"></a>æ··å…¥ç±»</h3><p><strong>æ··å…¥ç±»ï¼ˆMixinï¼‰</strong>æ˜¯æŒ‡<strong>å…·æœ‰æŸäº›åŠŸèƒ½ã€é€šå¸¸ä¸ç‹¬ç«‹ä½¿ç”¨ã€æä¾›ç»™å…¶ä»–ç±»ç»§æ‰¿åŠŸèƒ½</strong>çš„ç±»ã€‚å—¯ï¼Œå°±æ˜¯â€œæ··å…¥â€çš„å­—é¢æ„æ€ã€‚</p><p>å‰é¢çš„åˆ—è¡¨è§†å›¾ä¸­å·²ç»æœ‰<code>get_context_data()</code>æ–¹æ³•äº†ã€‚å‡è®¾éœ€è¦å†™ä¸€ä¸ªåŠŸèƒ½ç±»ä¼¼çš„è§†é¢‘åˆ—è¡¨ï¼Œå°±å¯ä»¥ç”¨<strong>Mixin</strong>æ¥é¿å…é‡å¤ä»£ç ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token class-name">ContextMixin</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">get_context_data</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        context <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get_context_data<span class="token punctuation">(</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>        context<span class="token punctuation">[</span><span class="token string">'order'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'total_views'</span>        <span class="token keyword">return</span> context<span class="token keyword">class</span> <span class="token class-name">ArticleListView</span><span class="token punctuation">(</span>ContextMixin<span class="token punctuation">,</span> ListView<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token class-name">VideoListView</span><span class="token punctuation">(</span>ContextMixin<span class="token punctuation">,</span> ListView<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é€šè¿‡æ··å…¥ï¼Œä¸¤ä¸ªå­ç±»éƒ½è·å¾—äº†<code>get_context_data()</code>æ–¹æ³•ã€‚</p><blockquote><p>ä»è¯­æ³•ä¸Šçœ‹ï¼Œæ··å…¥æ˜¯é€šè¿‡å¤šé‡ç»§æ‰¿å®ç°çš„ã€‚æœ‰åŒºåˆ«çš„æ˜¯ï¼ŒMixinæ˜¯<strong>ä½œä¸ºåŠŸèƒ½</strong>æ·»åŠ åˆ°å­ç±»ä¸­çš„ï¼Œè€Œä¸æ˜¯ä½œä¸ºçˆ¶ç±»ã€‚</p></blockquote><p>å®é™…ä¸ŠDjangoå†…ç½®äº†å¾ˆå¤šé€šç”¨çš„Mixinç±»ï¼Œå®ç°äº†å¤§éƒ¨åˆ†å¸¸ç”¨çš„åŠŸèƒ½ï¼Œç‚¹è¿™é‡Œæ·±å…¥äº†è§£ï¼š<a href="https://docs.djangoproject.com/zh-hans/2.1/ref/class-based-views/mixins/">å®˜æ–¹æ–‡æ¡£</a></p><h2 id="è¯¦æƒ…é¡µ"><a href="#è¯¦æƒ…é¡µ" class="headerlink" title="è¯¦æƒ…é¡µ"></a>è¯¦æƒ…é¡µ</h2><p>æ—¢ç„¶åˆ—è¡¨éƒ½æœ‰é€šç”¨è§†å›¾ï¼Œè¯¦æƒ…é¡µå½“ç„¶ä¹Ÿæœ‰å¯¹åº”çš„<code>DetailView</code>ã€‚</p><p>ç”¨ç±»è§†å›¾å†™ä¸€ä¸ª<a href="https://www.dusaiphoto.com/article/detail/19/">ç®€å•çš„è¯¦æƒ…é¡µ</a>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">views<span class="token punctuation">.</span>py<span class="token keyword">from</span> django<span class="token punctuation">.</span>views<span class="token punctuation">.</span>generic <span class="token keyword">import</span> DetailView<span class="token keyword">class</span> <span class="token class-name">ArticleDetailView</span><span class="token punctuation">(</span>DetailView<span class="token punctuation">)</span><span class="token punctuation">:</span>    queryset <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    context_object_name <span class="token operator">=</span> <span class="token string">'article'</span>    template_name <span class="token operator">=</span> <span class="token string">'article/detail.html'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åé…ç½®urlï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">urls<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token comment"># è¯¦æƒ…ç±»è§†å›¾</span>    path<span class="token punctuation">(</span><span class="token string">'detail-view/&lt;int:pk>/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>ArticleDetailView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'...'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„è¿™é‡Œä¼ å…¥çš„å‚æ•°ä¸æ˜¯<code>id</code>è€Œæ˜¯<code>pk</code>ï¼Œè¿™æ˜¯è§†å›¾çš„è¦æ±‚ï¼ˆä¹Ÿå¯ä»¥ä¼ å…¥<code>slug</code>ï¼‰ã€‚<code>pk</code>æ˜¯æ•°æ®è¡¨çš„ä¸»é”®ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹å…¶å®å°±æ˜¯<code>id</code>ã€‚</p><p>è¿™å°±å†™å¥½äº†ï¼</p><p>ä¹Ÿå¯ä»¥æ·»åŠ ä»»ä½•åˆ«çš„åŠŸèƒ½ï¼Œæ¯”å¦‚<a href="https://www.dusaiphoto.com/article/detail/45/">ç»Ÿè®¡æµè§ˆé‡</a>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token class-name">ArticleDetailView</span><span class="token punctuation">(</span>DetailView<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token keyword">def</span> <span class="token function">get_object</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        è·å–éœ€è¦å±•ç¤ºçš„å¯¹è±¡        """</span>        <span class="token comment"># é¦–å…ˆè°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•</span>        obj <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span>ArticleDetailView<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>get_object<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># æµè§ˆé‡ +1</span>        obj<span class="token punctuation">.</span>total_views <span class="token operator">+=</span> <span class="token number">1</span>        obj<span class="token punctuation">.</span>save<span class="token punctuation">(</span>update_fields<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'total_views'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> obj<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ–¹æ³•<code>get_object()</code>çš„ä½œç”¨æ˜¯è·å–éœ€è¦å±•ç¤ºçš„å¯¹è±¡ã€‚é¦–å…ˆè°ƒç”¨çˆ¶ç±»æ–¹æ³•ï¼Œå°†è¿™ä¸ªå¯¹è±¡èµ‹å€¼ç»™<code>obj</code>å˜é‡ï¼Œç„¶åå†å¯¹å…¶è¿›è¡Œç»Ÿè®¡æµè§ˆé‡çš„æ“ä½œï¼Œæœ€åå°†å¯¹è±¡è¿”å›ã€‚ç›¸å½“äºåœ¨åŸæœ‰çš„æ–¹æ³•ä¸­æŠŠè‡ªå·±çš„é€»è¾‘â€œå¡â€äº†è¿›å»ã€‚</p><p>å…³äº<code>DetailView</code>æ›´å¤šç‰¹æ€§çœ‹è¿™é‡Œï¼š<a href="https://docs.djangoproject.com/zh-hans/2.1/ref/class-based-views/generic-display/#detailview">å®˜æ–¹æ–‡æ¡£</a></p><h1 id="ç¼–è¾‘"><a href="#ç¼–è¾‘" class="headerlink" title="ç¼–è¾‘"></a>ç¼–è¾‘</h1><p>é™¤äº†èƒ½å¤Ÿå±•ç¤ºä¿¡æ¯ï¼Œé€šç”¨è§†å›¾è¿˜åŒ…å«<code>CreateView</code>ã€<code>UpdateView</code>ã€<code>DeleteView</code>ç­‰<strong>ç¼–è¾‘</strong>æ•°æ®çš„ç±»ã€‚</p><p>å¦‚æœè¦<a href="https://www.dusaiphoto.com/article/detail/22/">æ–°å»ºæ–‡ç« </a>ï¼Œåˆ™è§†å›¾å¯ä»¥è¿™ä¹ˆå†™ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">views<span class="token punctuation">.</span>py<span class="token keyword">from</span> django<span class="token punctuation">.</span>views<span class="token punctuation">.</span>generic<span class="token punctuation">.</span>edit <span class="token keyword">import</span> CreateView<span class="token keyword">class</span> <span class="token class-name">ArticleCreateView</span><span class="token punctuation">(</span>CreateView<span class="token punctuation">)</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> ArticlePost        fields <span class="token operator">=</span> <span class="token string">'__all__'</span>    <span class="token comment"># æˆ–è€…åªå¡«å†™éƒ¨åˆ†å­—æ®µï¼Œæ¯”å¦‚ï¼š</span>    <span class="token comment"># fields = ['title', 'content']</span>        template_name <span class="token operator">=</span> <span class="token string">'article/create_by_class_view.html'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ›å»º<code>create_by_class_view.html</code>æ–‡ä»¶ï¼ˆç›®å½•åœ¨å“ªï¼Œä½ åº”è¯¥å·²ç»å¾ˆæ¸…æ¥šäº†ï¼‰ï¼Œå†™å…¥ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">create_by_class_view.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;% csrf_token %&#125;    &#123;&#123; form.as_p &#125;&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Save<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åæ·»åŠ urlï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">urls<span class="token punctuation">.</span>pyurlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    path<span class="token punctuation">(</span><span class="token string">'create-view/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>ArticleCreateView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'...'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è™½ç„¶å¤–è§‚ç®€é™‹ï¼ˆè¿™ä¸æ˜¯é‡ç‚¹ï¼‰ï¼Œä½†ç°åœ¨è¿™ä¸ªè§†å›¾ç¡®å®å·²ç»èƒ½å¤Ÿåˆ›å»ºæ–°æ–‡ç« äº†ï¼</p><p><code>UpdateView</code>å’Œ<code>DeleteView</code>è¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ï¼Œä»¥åç”¨åˆ°çš„åœ°æ–¹å†è¿›è¡Œè®²è§£ã€‚</p><p>æƒ³æå‰äº†è§£çš„åŒå­¦æˆ³è¿™é‡Œï¼š<a href="https://docs.djangoproject.com/zh-hans/2.1/ref/class-based-views/generic-editing/">å®˜æ–¹æ–‡æ¡£</a></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ‰æ²¡æœ‰æ„Ÿå—åˆ°<strong>ä»£ç éš”ç¦»</strong>å’Œ<strong>ç»§æ‰¿</strong>çš„å¼ºå¤§ï¼Ÿæ²¡æœ‰ï¼Ÿä»¥åçš„ç« èŠ‚ä¼šé€æ¸ä½¿ç”¨<strong>ç±»</strong>ç¼–å†™è§†å›¾ï¼Œä½ ä¼šæ…¢æ…¢ä½“ä¼šçš„ã€‚</p><p>ç±»è§†å›¾çš„å†…å®¹éå¸¸ä¸°å¯Œï¼ŒçŸ­çŸ­ä¸€ç¯‡æ–‡ç« åªèƒ½èœ»èœ“ç‚¹æ°´è€Œå·²ã€‚è¯»è€…åœ¨ç¼–ç¨‹ä¸­é‡åˆ°å›°éš¾äº†ï¼Œå®˜æ–¹æ–‡æ¡£æ˜¯ä½ æœ€å¥½çš„æ•™ç¨‹ã€‚</p><p>å¦‚æœä½ æœ‰è€å¿ƒä»å¤´åˆ°å°¾é˜…è¯»ç±»è§†å›¾çš„å®˜æ–¹æ–‡æ¡£ï¼Œé‚£å½“ç„¶æ˜¯æœ€å¥½çš„äº†ã€‚</p><hr><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#x64;&#117;&#x73;&#x61;&#x69;&#112;&#x68;&#111;&#x74;&#x6f;&#64;&#x66;&#111;&#x78;&#x6d;&#97;&#x69;&#x6c;&#46;&#99;&#111;&#109;">&#x64;&#117;&#x73;&#x61;&#x69;&#112;&#x68;&#111;&#x74;&#x6f;&#64;&#x66;&#111;&#x78;&#x6d;&#97;&#x69;&#x6c;&#46;&#99;&#111;&#109;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul><blockquote><p>è½¬è½½è¯·å‘ŠçŸ¥ä½œè€…å¹¶æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--28.æ–‡ç« æ ‡ç­¾</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/28.wen-zhang-biao-qian/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/28.wen-zhang-biao-qian/</url>
      
        <content type="html"><![CDATA[<p><strong>â€œæ ‡ç­¾â€</strong>æ˜¯ä½œè€…ä»æ–‡ç« ä¸­æå–çš„<strong>æ ¸å¿ƒè¯æ±‡</strong>ï¼Œå…¶ä»–ç”¨æˆ·å¯ä»¥é€šè¿‡æ ‡ç­¾å¿«é€Ÿäº†è§£æ–‡ç« çš„å…³æ³¨ç‚¹ã€‚æ¯ä¸€ç¯‡æ–‡ç« çš„æ ‡ç­¾å¯èƒ½éƒ½ä¸ä¸€æ ·ï¼Œå¹¶ä¸”è¿˜å¯èƒ½æ‹¥æœ‰å¤šä¸ªæ ‡ç­¾ï¼Œè¿™æ˜¯ä¸æ ç›®åŠŸèƒ½ä¸åŒçš„ã€‚</p><p>å¥½åœ¨æ ‡ç­¾åŠŸèƒ½ä¹Ÿæœ‰ä¼˜ç§€çš„ä¸‰æ–¹åº“ï¼š<a href="https://github.com/jazzband/django-taggit">Django-taggit</a>ï¼Œçœå¾—è‡ªå·±åŠ¨æ‰‹è®¾è®¡äº†ã€‚å¿«é€Ÿå¼€å‘å°±æ˜¯è¿™æ ·ï¼Œèƒ½â€œå€Ÿç”¨â€å°±ä¸è¦è‡ªå·±é‡å¤åŠ³åŠ¨ã€‚</p><h2 id="å®‰è£…åŠè®¾ç½®"><a href="#å®‰è£…åŠè®¾ç½®" class="headerlink" title="å®‰è£…åŠè®¾ç½®"></a>å®‰è£…åŠè®¾ç½®</h2><p>é¦–å…ˆåœ¨<strong>è™šæ‹Ÿç¯å¢ƒ</strong>ä¸­å®‰è£…Django-taggitï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pip <span class="token function">install</span> django-taggit<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å®‰è£…æˆåŠŸåï¼Œä¿®æ”¹é¡¹ç›®è®¾ç½®ä»¥æ·»åŠ åº“ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_blog<span class="token operator">/</span>settings<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token string">'taggit'</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¿®æ”¹æ–‡ç« æ¨¡å‹"><a href="#ä¿®æ”¹æ–‡ç« æ¨¡å‹" class="headerlink" title="ä¿®æ”¹æ–‡ç« æ¨¡å‹"></a>ä¿®æ”¹æ–‡ç« æ¨¡å‹</h2><p>æ ‡ç­¾æ˜¯æ–‡ç« Modelçš„å±æ€§ï¼Œå› æ­¤éœ€è¦ä¿®æ”¹æ–‡ç« æ¨¡å‹ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯æ ‡ç­¾å¼•ç”¨çš„ä¸æ˜¯å†…ç½®å­—æ®µï¼Œè€Œæ˜¯åº“ä¸­çš„<code>TaggableManager</code>ï¼Œå®ƒæ˜¯å¤„ç†å¤šå¯¹å¤šå…³ç³»çš„ç®¡ç†å™¨ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>models<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># Django-taggit</span><span class="token keyword">from</span> taggit<span class="token punctuation">.</span>managers <span class="token keyword">import</span> TaggableManager<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token class-name">ArticlePost</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># æ–‡ç« æ ‡ç­¾</span>    tags <span class="token operator">=</span> TaggableManager<span class="token punctuation">(</span>blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åè®°å¾—<strong>æ•°æ®è¿ç§»</strong>ã€‚</p><h2 id="å¸¦æ ‡ç­¾æ–‡ç« çš„å‘è¡¨"><a href="#å¸¦æ ‡ç­¾æ–‡ç« çš„å‘è¡¨" class="headerlink" title="å¸¦æ ‡ç­¾æ–‡ç« çš„å‘è¡¨"></a>å¸¦æ ‡ç­¾æ–‡ç« çš„å‘è¡¨</h2><p>ä¿®æ”¹æ–‡ç« çš„è¡¨å•ç±»ï¼Œè®©å…¶èƒ½å¤Ÿæäº¤æ ‡ç­¾å­—æ®µï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>forms<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token class-name">ArticlePostForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        fields <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'body'</span><span class="token punctuation">,</span> <span class="token string">'tags'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åä¿®æ”¹å‘è¡¨æ–‡ç« çš„è§†å›¾ï¼Œä¿å­˜POSTä¸­çš„æ ‡ç­¾ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">def</span> <span class="token function">article_create</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># å·²æœ‰ä»£ç </span>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">"POST"</span><span class="token punctuation">:</span>        article_post_form <span class="token operator">=</span> ArticlePostForm<span class="token punctuation">(</span>data<span class="token operator">=</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">)</span>        <span class="token keyword">if</span> article_post_form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            new_article <span class="token operator">=</span> article_post_form<span class="token punctuation">.</span>save<span class="token punctuation">(</span>commit<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>            new_article<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>                        <span class="token comment"># æ–°å¢ä»£ç ï¼Œä¿å­˜ tags çš„å¤šå¯¹å¤šå…³ç³»</span>            article_post_form<span class="token punctuation">.</span>save_m2m<span class="token punctuation">(</span><span class="token punctuation">)</span>                        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæäº¤çš„è¡¨å•ä½¿ç”¨äº†<code>commit=False</code>é€‰é¡¹ï¼Œåˆ™å¿…é¡»è°ƒç”¨<code>save_m2m()</code>æ‰èƒ½æ­£ç¡®çš„ä¿å­˜æ ‡ç­¾ï¼Œå°±åƒæ™®é€šçš„å¤šå¯¹å¤šå…³ç³»ä¸€æ ·ã€‚</p><p>æœ€åå°±æ˜¯åœ¨å‘è¡¨æ–‡ç« çš„æ¨¡æ¿ä¸­æ·»åŠ æ ‡ç­¾çš„è¡¨å•é¡¹äº†ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/create.html...<span class="token comment">&lt;!-- æäº¤æ–‡ç« çš„è¡¨å• --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    ...        <span class="token comment">&lt;!-- æ–‡ç« æ ‡ç­¾ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tags<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ ‡ç­¾<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span>                <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control col-3<span class="token punctuation">"</span></span>                <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tags<span class="token punctuation">"</span></span>                <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tags<span class="token punctuation">"</span></span>        <span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        ...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡ŒæœåŠ¡å™¨ï¼Œå°±å¯ä»¥åœ¨å‘è¡¨é¡µé¢çœ‹åˆ°æ•ˆæœäº†ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190211/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE162.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190211/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE162.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>å¤šä¸ªæ ‡ç­¾æœ€å¥½ç”¨<strong>è‹±æ–‡é€—å·</strong>è¿›è¡Œåˆ†éš”ã€‚<strong>ä¸­æ–‡é€—å·</strong>æœ‰çš„ç‰ˆæœ¬ä¼šæŠ¥é”™ï¼Œå¹²è„†å°±ä¸è¦å»ä½¿ç”¨äº†ã€‚</p><h2 id="åˆ—è¡¨ä¸­æ˜¾ç¤ºæ ‡ç­¾"><a href="#åˆ—è¡¨ä¸­æ˜¾ç¤ºæ ‡ç­¾" class="headerlink" title="åˆ—è¡¨ä¸­æ˜¾ç¤ºæ ‡ç­¾"></a>åˆ—è¡¨ä¸­æ˜¾ç¤ºæ ‡ç­¾</h2><p>è™½ç„¶ä¿å­˜æ ‡ç­¾çš„åŠŸèƒ½å·²ç»å®ç°äº†ï¼Œè¿˜å¾—æŠŠå®ƒæ˜¾ç¤ºå‡ºæ¥æ‰è¡Œã€‚</p><p>æ˜¾ç¤ºæ ‡ç­¾æœ€å¸¸ç”¨çš„ä½ç½®æ˜¯åœ¨<strong>æ–‡ç« åˆ—è¡¨</strong>ä¸­ï¼Œæ–¹ä¾¿ç”¨æˆ·ç­›é€‰æ„Ÿå…´è¶£çš„æ–‡ç« ã€‚</p><p>ä¿®æ”¹æ–‡ç« åˆ—è¡¨çš„æ¨¡æ¿ï¼Œå°†æ ‡ç­¾æ˜¾ç¤ºå‡ºæ¥ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/list.html...<span class="token comment">&lt;!-- æ ç›® --></span>...<span class="token comment">&lt;!-- æ ‡ç­¾ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>    &#123;% for tag in article.tags.all %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span>           <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>badge badge-secondary<span class="token punctuation">"</span></span>         <span class="token punctuation">></span></span>            &#123;&#123; tag &#125;&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    &#123;% endfor %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é“¾æ¥ä¸­çš„<code>class</code>ä¸­æ˜¯Bootstrapå®šä¹‰çš„<a href="https://getbootstrap.com/docs/4.1/components/badge/">å¾½ç« æ ·å¼</a>ã€‚</p><p>æ’å…¥ä½ç½®ç´§é åœ¨æ ç›®æŒ‰é’®çš„åé¢ã€‚å½“ç„¶ä½ æƒ³æ”¾åˆ°å…¶ä»–ä½ç½®ä¹Ÿæ˜¯å®Œå…¨å¯ä»¥çš„ã€‚</p><p>åˆ·æ–°åˆ—è¡¨é¡µé¢çœ‹çœ‹æ•ˆæœï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190211/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE164.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190211/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE164.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><h2 id="æ ‡ç­¾è¿‡æ»¤"><a href="#æ ‡ç­¾è¿‡æ»¤" class="headerlink" title="æ ‡ç­¾è¿‡æ»¤"></a>æ ‡ç­¾è¿‡æ»¤</h2><p>æœ‰æ—¶å€™ç”¨æˆ·æƒ³æœç´¢å¸¦æœ‰æŸä¸€ä¸ªæ ‡ç­¾çš„æ‰€æœ‰æ–‡ç« ï¼Œç°åœ¨å°±æ¥åšè¿™ä¸ªåŠŸèƒ½ã€‚</p><p>ä¸æœç´¢åŠŸèƒ½ä¸€æ ·ï¼Œåªéœ€è¦è°ƒå–æ•°æ®æ—¶ç”¨<code>filter()</code>æ–¹æ³•è¿‡æ»¤ç»“æœå°±å¯ä»¥äº†ã€‚</p><p>ä¿®æ”¹<code>&lt;a&gt;</code>æ ‡ç­¾ä¸­çš„<code>href</code>ï¼Œä½¿å…¶å¸¦æœ‰<code>tag</code>å‚æ•°è¿”å›åˆ°Viewä¸­ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/list.html...<span class="token comment">&lt;!-- æ ‡ç­¾ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>    &#123;% for tag in article.tags.all %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>article:article_list<span class="token punctuation">'</span> %&#125;?tag=&#123;&#123; tag &#125;&#125;<span class="token punctuation">"</span></span>           <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>badge badge-secondary<span class="token punctuation">"</span></span>         <span class="token punctuation">></span></span>            &#123;&#123; tag &#125;&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    &#123;% endfor %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶ååœ¨Viewä¸­å–å¾—<code>tag</code>çš„å€¼ï¼Œå¹¶è¿›è¡Œæœç´¢ã€‚</p><p>ä¸‹é¢çš„ä»£ç å°†<code>article_list()</code>å‡½æ•°å®Œæ•´å†™å‡ºæ¥äº†ï¼ˆåŒ…æ‹¬ä¸Šä¸€ç« æœ«å°¾æ²¡è®²çš„æ ç›®æŸ¥è¯¢ï¼‰ï¼Œæ–¹ä¾¿è¯»è€…æ¯”å¯¹ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">def</span> <span class="token function">article_list</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># ä» url ä¸­æå–æŸ¥è¯¢å‚æ•°</span>    search <span class="token operator">=</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'search'</span><span class="token punctuation">)</span>    order <span class="token operator">=</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'order'</span><span class="token punctuation">)</span>    column <span class="token operator">=</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'column'</span><span class="token punctuation">)</span>    tag <span class="token operator">=</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'tag'</span><span class="token punctuation">)</span>    <span class="token comment"># åˆå§‹åŒ–æŸ¥è¯¢é›†</span>    article_list <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># æœç´¢æŸ¥è¯¢é›†</span>    <span class="token keyword">if</span> search<span class="token punctuation">:</span>        article_list <span class="token operator">=</span> article_list<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>            Q<span class="token punctuation">(</span>title__icontains<span class="token operator">=</span>search<span class="token punctuation">)</span> <span class="token operator">|</span>            Q<span class="token punctuation">(</span>body__icontains<span class="token operator">=</span>search<span class="token punctuation">)</span>        <span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        search <span class="token operator">=</span> <span class="token string">''</span>    <span class="token comment"># æ ç›®æŸ¥è¯¢é›†</span>    <span class="token keyword">if</span> column <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span> <span class="token keyword">and</span> column<span class="token punctuation">.</span>isdigit<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        article_list <span class="token operator">=</span> article_list<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>column<span class="token operator">=</span>column<span class="token punctuation">)</span>    <span class="token comment"># æ ‡ç­¾æŸ¥è¯¢é›†</span>    <span class="token keyword">if</span> tag <span class="token keyword">and</span> tag <span class="token operator">!=</span> <span class="token string">'None'</span><span class="token punctuation">:</span>        article_list <span class="token operator">=</span> article_list<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>tags__name__in<span class="token operator">=</span><span class="token punctuation">[</span>tag<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment"># æŸ¥è¯¢é›†æ’åº</span>    <span class="token keyword">if</span> order <span class="token operator">==</span> <span class="token string">'total_views'</span><span class="token punctuation">:</span>        article_list <span class="token operator">=</span> article_list<span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">'-total_views'</span><span class="token punctuation">)</span>    paginator <span class="token operator">=</span> Paginator<span class="token punctuation">(</span>article_list<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>    page <span class="token operator">=</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'page'</span><span class="token punctuation">)</span>    articles <span class="token operator">=</span> paginator<span class="token punctuation">.</span>get_page<span class="token punctuation">(</span>page<span class="token punctuation">)</span>        <span class="token comment"># éœ€è¦ä¼ é€’ç»™æ¨¡æ¿ï¼ˆtemplatesï¼‰çš„å¯¹è±¡</span>    context <span class="token operator">=</span> <span class="token punctuation">&#123;</span>        <span class="token string">'articles'</span><span class="token punctuation">:</span> articles<span class="token punctuation">,</span>        <span class="token string">'order'</span><span class="token punctuation">:</span> order<span class="token punctuation">,</span>        <span class="token string">'search'</span><span class="token punctuation">:</span> search<span class="token punctuation">,</span>        <span class="token string">'column'</span><span class="token punctuation">:</span> column<span class="token punctuation">,</span>        <span class="token string">'tag'</span><span class="token punctuation">:</span> tag<span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'article/list.html'</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„Django-taggitä¸­<strong>æ ‡ç­¾è¿‡æ»¤</strong>çš„å†™æ³•ï¼š<code>filter(tags__name__in=[tag])</code>ï¼Œæ„æ€æ˜¯åœ¨<code>tags</code>å­—æ®µä¸­è¿‡æ»¤<code>name</code>ä¸º<code>tag</code>çš„æ•°æ®æ¡ç›®ã€‚èµ‹å€¼çš„å­—ç¬¦ä¸²<code>tag</code>ç”¨æ–¹æ‹¬å·åŒ…èµ·æ¥ã€‚</p><blockquote><p>ä¹‹æ‰€ä»¥è¿™æ ·å†™æ˜¯å› ä¸ºDjango-taggitè¿˜æ”¯æŒå¤šæ ‡ç­¾çš„è”åˆæŸ¥è¯¢ï¼Œæ¯”å¦‚ï¼š</p><p><code>Model.objects.filter(tags__name__in=[&quot;tag1&quot;, &quot;tag2&quot;])</code></p></blockquote><p>ä¸ºäº†å®ç°å¸¦å‚æ•°çš„äº¤å‰æŸ¥è¯¢ï¼Œè¿˜è¦å°†<strong>ç¿»é¡µ</strong>ç­‰ä½ç½®çš„<code>href</code>ä¿®æ”¹ä¸€ä¸‹ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/list.html...<span class="token comment">&lt;!-- æ‰€æœ‰ç±»ä¼¼åœ°æ–¹åŠ ä¸Š tag å‚æ•°ï¼Œå¦‚æ’åºã€ç¿»é¡µç­‰ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>article:article_list<span class="token punctuation">'</span> %&#125;?search=&#123;&#123; search &#125;&#125;&amp;column=&#123;&#123; column &#125;&#125;&amp;tag=&#123;&#123; tag &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    æœ€æ–°<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>article:article_list<span class="token punctuation">'</span> %&#125;?order=total_views&amp;search=&#123;&#123; search &#125;&#125;&amp;column=&#123;&#123; column &#125;&#125;&amp;tag=&#123;&#123; tag &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    æœ€çƒ­<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?page=1&amp;order=&#123;&#123; order &#125;&#125;&amp;search=&#123;&#123; search &#125;&#125;&amp;column=&#123;&#123; column &#125;&#125;&amp;tag=&#123;&#123; tag &#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-success<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token entity named-entity" title="&laquo;">&amp;laquo;</span> 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- ä¸Šé¢3æ¡æ˜¯ä¸¾ä¾‹ï¼Œå…¶ä»–ç±»ä¼¼åœ°æ–¹ä¹Ÿè¯·è¡¥å……è¿›å» --></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ ‡ç­¾è¿‡æ»¤åŠŸèƒ½å°±å®Œæˆäº†ã€‚</p><p>Django-taggitæ›´å¤šçš„ç”¨æ³•è¯·é˜…è¯»å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://django-taggit.readthedocs.io/en/latest/index.html">Django-taggit</a></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« å­¦ä¹ äº†ä½¿ç”¨Django-taggitæ¥å®Œæˆæ ‡ç­¾åŠŸèƒ½ã€‚</p><p>åœ¨å­¦ä¹ é˜¶æ®µï¼Œä½ å¯ä»¥<strong>ä¸å€ŸåŠ©ä»–äººçš„è½®å­ï¼Œè‡ªå·±å®ç°åŠŸèƒ½</strong>ï¼šçæŠ˜è…¾å¯¹æŒæ¡åŸºç¡€æœ‰å¾ˆå¤§å¸®åŠ©ã€‚</p><p>å®é™…å¼€å‘æ—¶ï¼Œåˆåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š</p><ul><li><strong>æµ…å±‚éœ€æ±‚æŸé¡¹é€šç”¨åŠŸèƒ½ï¼Œå¼€å‘å®Œæˆåæ”¹åŠ¨ä¸å¤§</strong>ï¼šæ­¤ç±»åŠŸèƒ½å»ºè®®å°½é‡ä½¿ç”¨è½®å­ï¼ŒåŠ å¿«å¼€å‘æ•ˆç‡ã€‚äººç”Ÿè‹¦çŸ­ï¼Œèƒ½èŠ‚çº¦çš„æ—¶é—´ï¼Œä¸€ç§’é’Ÿéƒ½ä¸è¦æµªè´¹ã€‚</li><li><strong>éœ€è¦å¤§é‡å®šåˆ¶åŒ–çš„åŠŸèƒ½ï¼Œå¼€å‘å®Œæˆåéœ€è¦é¢‘ç¹æ”¹åŠ¨</strong>ï¼šæ­¤ç±»åŠŸèƒ½å› ä¸ºç»å¸¸å¯¹åº•å±‚ä»£ç è¿›è¡Œæ”¹åŠ¨ï¼Œä¸å…¶åœ¨åˆ«äººçš„ä»£ç ä¸Šä¿®ä¿®è¡¥è¡¥ï¼Œè¿˜ä¸å¦‚è‡ªå·±ä»å¤´å†™äº†ã€‚è‡ªå·±çš„ä»£ç ä¸ä»…ç†Ÿæ‚‰ï¼Œè€Œä¸”éƒ½æ˜¯ä¸ºå®šåˆ¶åŒ–è€Œç”Ÿçš„ã€‚</li></ul><p>åˆ°åº•å¦‚ä½•é€‰æ‹©ï¼Œå°±æ ¹æ®ä½ çš„å–œæ¬¢è¿›è¡Œæ–Ÿé…Œäº†ã€‚</p><hr><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#x64;&#117;&#115;&#97;&#105;&#112;&#x68;&#x6f;&#x74;&#x6f;&#64;&#x66;&#111;&#x78;&#109;&#97;&#x69;&#x6c;&#x2e;&#99;&#111;&#x6d;">&#x64;&#117;&#115;&#97;&#105;&#112;&#x68;&#x6f;&#x74;&#x6f;&#64;&#x66;&#111;&#x78;&#109;&#97;&#x69;&#x6c;&#x2e;&#99;&#111;&#x6d;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--27.æ–‡ç« æ ç›®</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/27.wen-zhang-lan-mu/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/27.wen-zhang-lan-mu/</url>
      
        <content type="html"><![CDATA[<p>åšå®¢çš„æ–‡ç« ç±»å‹é€šå¸¸ä¸æ­¢ä¸€ç§ï¼šæœ‰æ—¶å€™ä½ ä¼šå†™é«˜æ·±è«æµ‹çš„æŠ€æœ¯æ–‡ç« ï¼Œæœ‰æ—¶å€™åˆçº¯ç²¹åªè®°å½•ä¸€ä¸‹å½“å¤©çš„å¿ƒæƒ…ã€‚</p><p>å› æ­¤<strong>å¯¹æ–‡ç« çš„åˆ†ç±»</strong>å°±æ˜¾å¾—ç›¸å½“çš„é‡è¦äº†ï¼Œæ—¢æ–¹ä¾¿åšä¸»å¯¹æ–‡ç« è¿›è¡Œåˆ†ç±»å½’æ¡£ï¼Œä¹Ÿæ–¹ä¾¿ç”¨æˆ·æœ‰é’ˆå¯¹æ€§çš„é˜…è¯»ã€‚</p><p>è€Œæ–‡ç« åˆ†ç±»ä¸€ä¸ªé‡è¦çš„é€”å¾„å°±æ˜¯è®¾ç½®<strong>æ ç›®</strong>ã€‚</p><h2 id="æ ç›®çš„æ¨¡å‹"><a href="#æ ç›®çš„æ¨¡å‹" class="headerlink" title="æ ç›®çš„æ¨¡å‹"></a>æ ç›®çš„æ¨¡å‹</h2><p>å®ç°æ–‡ç« æ ç›®åŠŸèƒ½çš„æ–¹æ³•æœ‰å¤šç§ã€‚ä½ å¯ä»¥åªæ˜¯ç®€å•çš„åœ¨æ–‡ç« çš„Modelä¸­å¢åŠ <code>CharField()</code>å­—æ®µï¼Œä»¥å­—ç¬¦ä¸²çš„å½¢å¼å°†æ ç›®åç§°ä¿å­˜èµ·æ¥ï¼ˆå®é™…ä¸Šè¿™ç§å®ç°æ›´åƒæ˜¯<strong>â€œæ ‡ç­¾â€</strong>ï¼Œä»¥åä¼šè®²åˆ°ï¼‰ã€‚è¿™æ ·åšçš„ä¼˜ç‚¹æ˜¯æ¯”è¾ƒç®€å•ï¼›ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå°±æ˜¯æ—¶é—´é•¿äº†ä½ å¯èƒ½ä¼šè®°æ··æ ç›®çš„åå­—ï¼Œå¹¶ä¸”ä¹Ÿä¸æ–¹ä¾¿å¯¹æ ç›®çš„å…¶ä»–å±æ€§è¿›è¡Œæ‰©å±•ã€‚</p><p>å› æ­¤å¯¹æ–‡ç« æ ç›®å¯ä»¥ç‹¬ç«‹ä¸ºä¸€ä¸ªModelï¼Œç”¨å¤–é”®ä¸æ–‡ç« çš„Modelå…³è”èµ·æ¥ã€‚</p><p>ä¿®æ”¹<code>article/modles.py</code>æ–‡ä»¶ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>models<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token class-name">ArticleColumn</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    æ ç›®çš„ Model    """</span>    <span class="token comment"># æ ç›®æ ‡é¢˜</span>    title <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token comment"># åˆ›å»ºæ—¶é—´</span>    created <span class="token operator">=</span> models<span class="token punctuation">.</span>DateTimeField<span class="token punctuation">(</span>default<span class="token operator">=</span>timezone<span class="token punctuation">.</span>now<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>title<span class="token keyword">class</span> <span class="token class-name">ArticlePost</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># æ–‡ç« æ ç›®çš„ â€œä¸€å¯¹å¤šâ€ å¤–é”®</span>    column <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>        ArticleColumn<span class="token punctuation">,</span>        null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>        blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>        on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">,</span>        related_name<span class="token operator">=</span><span class="token string">'article'</span>    <span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ ç›®çš„Modelæœ‰ä¸¤ä¸ªå­—æ®µï¼Œâ€œåç§°â€å’Œâ€œåˆ›å»ºæ—¥æœŸâ€ã€‚</p><p>ä¸€ç¯‡æ–‡ç« åªæœ‰ä¸€ä¸ªæ ç›®ï¼Œè€Œä¸€ä¸ªæ ç›®å¯ä»¥å¯¹åº”å¤šç¯‡æ–‡ç« ï¼Œå› æ­¤å»ºç«‹â€œä¸€å¯¹å¤šâ€çš„å…³ç³»ã€‚</p><p>å†™å¥½æ¨¡å‹åè®°å¾—ç”¨<code>makemigrations</code>å’Œ<code>migrate</code>æŒ‡ä»¤<strong>è¿ç§»æ•°æ®</strong>ã€‚</p><h2 id="åˆ—è¡¨ä¸­æ˜¾ç¤ºæ ç›®"><a href="#åˆ—è¡¨ä¸­æ˜¾ç¤ºæ ç›®" class="headerlink" title="åˆ—è¡¨ä¸­æ˜¾ç¤ºæ ç›®"></a>åˆ—è¡¨ä¸­æ˜¾ç¤ºæ ç›®</h2><h3 id="æ·»åŠ æµ‹è¯•æ•°æ®"><a href="#æ·»åŠ æµ‹è¯•æ•°æ®" class="headerlink" title="æ·»åŠ æµ‹è¯•æ•°æ®"></a>æ·»åŠ æµ‹è¯•æ•°æ®</h3><p>æ¨¡å‹å†™å¥½ä¹‹åå°±éœ€è¦å‡ æ¡æ ç›®çš„æ•°æ®æ¥è¿›è¡Œæµ‹è¯•ã€‚ç”±äºè¿˜æ²¡æœ‰å†™è§†å›¾ï¼Œå› æ­¤éœ€è¦å–„åŠ åˆ©ç”¨Djangoè‡ªå¸¦çš„åå°ã€‚</p><p>é¦–å…ˆæŠŠæ ç›®æ¨¡å‹æ³¨å†Œåˆ°åå°ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>admin<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> ArticleColumn<span class="token comment"># æ³¨å†Œæ–‡ç« æ ç›®</span>admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>register<span class="token punctuation">(</span>ArticleColumn<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åå°±å¯ä»¥åœ¨åå°ä¸­æ·»åŠ æ ç›®çš„æ•°æ®æ¡ç›®äº†ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190129/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE153.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190129/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE153.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>å…ˆéšä¾¿æ·»åŠ äº†â€œHTMLâ€ã€â€œJavaâ€ã€â€œDjangoâ€è¿™3æ¡ã€‚</p><p>åœ¨åå°ä¸­éšä¾¿æ‰“å¼€ä¸€ç¯‡æ–‡ç« ï¼Œâ€œæ ç›®â€å­—æ®µå·²ç»é™é™çš„åœ¨ç­‰ä½ äº†ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190129/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE155.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190129/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE155.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>éšæœºæ‰¾å‡ ç¯‡æ–‡ç« è®¾ç½®ä¸åŒçš„<strong>æ ç›®</strong>ç”¨äºæµ‹è¯•ã€‚</p><h3 id="é‡å†™æ–‡ç« åˆ—è¡¨"><a href="#é‡å†™æ–‡ç« åˆ—è¡¨" class="headerlink" title="é‡å†™æ–‡ç« åˆ—è¡¨"></a>é‡å†™æ–‡ç« åˆ—è¡¨</h3><p>ä¹‹å‰æˆ‘ä»¬ç”¨<strong>å¡ç‰‡ç±»å‹</strong>çš„UIç•Œé¢å±•ç¤ºæ–‡ç« åˆ—è¡¨ã€‚</p><p>å¡ç‰‡çš„å¥½å¤„æ˜¯ç®€æ´å¤§æ–¹ï¼Œä½†æ˜¯<strong>éšç€æ•°æ®çš„å¢å¤š</strong>ï¼Œå¡ç‰‡å°å°çš„ç‰ˆé¢å·²ç»ä¸å ªé‡è´Ÿäº†ã€‚</p><p>å› æ­¤è¿™é‡Œé‡å†™<code>list.html</code>æ¨¡æ¿çš„åˆ—è¡¨å¾ªç¯ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">article/list.html...<span class="token comment">&lt;!-- åˆ—è¡¨å¾ªç¯ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row mt-2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    &#123;% for article in articles %&#125;        <span class="token comment">&lt;!-- æ–‡ç« å†…å®¹ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-12<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!-- æ ç›® --></span>            &#123;% if article.column %&#125;                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span>                     <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-sm mb-2                        &#123;% if article.column.title == <span class="token punctuation">'</span>Django<span class="token punctuation">'</span> %&#125;                            btn-success                        &#123;% elif article.column.title == <span class="token punctuation">'</span>Java<span class="token punctuation">'</span> %&#125;                            btn-danger                        &#123;% elif article.column.title == <span class="token punctuation">'</span>HTML<span class="token punctuation">'</span> %&#125;                            btn-warning                        &#123;% endif %&#125;                    <span class="token punctuation">"</span></span>                <span class="token punctuation">></span></span>                    &#123;&#123; article.column &#125;&#125;                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>            &#123;% endif %&#125;            <span class="token comment">&lt;!-- æ ‡é¢˜ --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>article:article_detail<span class="token punctuation">'</span> article.id %&#125;<span class="token punctuation">"</span></span>                       <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span>                     <span class="token punctuation">></span></span>                        &#123;&#123; article.title &#125;&#125;                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!-- æ‘˜è¦ --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> gray<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                    &#123;&#123; article.body|slice:'100' &#125;&#125;...                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!-- æ³¨è„š --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- é™„åŠ ä¿¡æ¯ --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                    &#123;&#123; article.total_views &#125;&#125; æµè§ˆ<span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span><span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span><span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                    &#123;&#123; article.created|date:'Y-m-d' &#125;&#125; å‘å¸ƒ<span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span><span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span><span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> darkred<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                    &#123;&#123; article.updated|date:'Y-m-d' &#125;&#125; æ›´æ–°                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    &#123;% endfor %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€ä¸»è¦çš„æ”¹åŠ¨å°±æ˜¯æ–°å¢äº†å±•ç°â€œæ ç›®â€çš„æŒ‰é’®ã€‚æˆ‘ä»¬ç”šè‡³è¿˜ä¸ºä¸åŒçš„æ ç›®è®¾ç½®äº†ä¸åŒçš„æŒ‰é’®é¢œè‰²ã€‚</p><p>åœ¨é™„åŠ ä¿¡æ¯ä¸­é¡ºä¾¿è¿˜æŠŠä¹‹å‰æ²¡æœ‰ç”¨åˆ°çš„æ—¥æœŸä¿¡æ¯ä¹Ÿæ·»åŠ ä¸Šå»äº†ã€‚</p><p>æ¥çœ‹çœ‹æ•ˆæœï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190129/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE159_Dl0zERq.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190129/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE159_Dl0zERq.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>æ„Ÿè§‰è¿˜ä¸é”™ï¼</p><h2 id="ä¿®æ”¹å†™æ–‡ç« åŠŸèƒ½"><a href="#ä¿®æ”¹å†™æ–‡ç« åŠŸèƒ½" class="headerlink" title="ä¿®æ”¹å†™æ–‡ç« åŠŸèƒ½"></a>ä¿®æ”¹å†™æ–‡ç« åŠŸèƒ½</h2><p>å±•ç¤ºå·²ç»æ²¡é—®é¢˜äº†ï¼Œä½†æ˜¯å‘è¡¨æ–°æ–‡ç« æ—¶è¿˜ä¸èƒ½é€‰æ‹©æ ç›®ã€‚</p><p>ä¿®æ”¹å†™æ–‡ç« çš„æ¨¡æ¿ï¼Œåœ¨è¡¨å•ä¸­æ–°å¢ä¸‹é¢çš„å†…å®¹ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/create.html...<span class="token comment">&lt;!-- æäº¤æ–‡ç« çš„è¡¨å• --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    &#123;% csrf_token %&#125;    <span class="token comment">&lt;!-- æ–‡ç« æ ‡é¢˜ --></span>    ...        <span class="token comment">&lt;!-- æ–‡ç« æ ç›® --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ ç›®<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span>                 <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span>                 <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span>        <span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>none<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¯·é€‰æ‹©æ ç›®..<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>            &#123;% for column in columns %&#125;                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123; column.id &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; column &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>            &#123;% endfor %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- æ–‡ç« æ­£æ–‡ --></span>    ...    <span class="token comment">&lt;!-- æäº¤æŒ‰é’® --></span>    ...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>&lt;select&gt;</code>æ˜¯è¡¨å•çš„ä¸‹æ‹‰æ¡†é€‰æ‹©ç»„ä»¶ã€‚åœ¨è¿™ä¸ªç»„ä»¶ä¸­å¾ªç¯åˆ—å‡ºæ‰€æœ‰çš„æ ç›®æ•°æ®ï¼Œå¹¶ä¸”è®¾ç½®<code>value</code>å±æ€§ï¼ŒæŒ‡å®šè¡¨å•æäº¤æ ç›®çš„<code>id</code>å€¼ã€‚</p><p>åˆ·æ–°é¡µé¢ï¼Œæ•ˆæœåƒä¸‹é¢è¿™æ ·ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190129/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE158.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190129/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE158.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>è·Ÿä¹‹å‰ä¸€æ ·ï¼Œèƒ½å¤Ÿå±•ç¤ºäº†ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å¤„ç†è¡¨å•çš„è§†å›¾é€»è¾‘ã€‚</p><p>ä¿®æ”¹å·²æœ‰çš„å†™æ–‡ç« è§†å›¾<code>article_create()</code>ï¼Œè®©å…¶èƒ½å¤Ÿå¤„ç†è¡¨å•ä¸Šä¼ çš„æ ç›®æ•°æ®ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token comment"># å¼•å…¥æ ç›®Model</span><span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> ArticleColumn<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># å†™æ–‡ç« çš„è§†å›¾</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">def</span> <span class="token function">article_create</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">"POST"</span><span class="token punctuation">:</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token keyword">if</span> article_post_form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>                        <span class="token comment"># æ–°å¢çš„ä»£ç </span>            <span class="token keyword">if</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">[</span><span class="token string">'column'</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">'none'</span><span class="token punctuation">:</span>                new_article<span class="token punctuation">.</span>column <span class="token operator">=</span> ArticleColumn<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">[</span><span class="token string">'column'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                        <span class="token comment"># å·²æœ‰ä»£ç </span>            new_article<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>                <span class="token comment"># æ–°å¢åŠä¿®æ”¹çš„ä»£ç </span>        columns <span class="token operator">=</span> ArticleColumn<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        context <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token string">'article_post_form'</span><span class="token punctuation">:</span> article_post_form<span class="token punctuation">,</span> <span class="token string">'columns'</span><span class="token punctuation">:</span> columns <span class="token punctuation">&#125;</span>                <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ–°å¢ä»£ç æ¶‰åŠ<code>get</code>å’Œ<code>post</code>ä¸¤éƒ¨åˆ†ï¼š</p><ul><li>POSTï¼šä¸»è¦è€ƒè™‘æŸäº›æ–‡ç« æ˜¯å¯ä»¥æ²¡æœ‰æ ç›®çš„ã€‚å› æ­¤ç”¨<code>if</code>è¯­å¥åˆ¤æ–­è¯¥æ–‡ç« æ˜¯å¦æœ‰æ ç›®ï¼Œå¦‚æœæœ‰ï¼Œåˆ™æ ¹æ®è¡¨å•æäº¤çš„<code>value</code>å€¼ï¼Œå…³è”å¯¹åº”çš„æ ç›®ã€‚</li><li>GETï¼šå¢åŠ æ ç›®çš„ä¸Šä¸‹æ–‡ï¼Œä»¥ä¾¿æ¨¡æ¿ä½¿ç”¨ã€‚</li></ul><p>æµ‹è¯•ä¸€ä¸‹ï¼Œå†™æ–‡ç« çš„æ ç›®åŠŸèƒ½åº”è¯¥å¯ä»¥æ­£å¸¸å·¥ä½œäº†ã€‚</p><h2 id="ä¿®æ”¹æ›´æ–°è§†å›¾"><a href="#ä¿®æ”¹æ›´æ–°è§†å›¾" class="headerlink" title="ä¿®æ”¹æ›´æ–°è§†å›¾"></a>ä¿®æ”¹æ›´æ–°è§†å›¾</h2><p>æ›´æ–°æ–‡ç« çš„è§†å›¾åŒæ ·ä¹Ÿéœ€è¦å‡çº§ä¸€ä¸‹ã€‚</p><p>è¿˜æ˜¯å…ˆæ›´æ”¹æ¨¡æ¿ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/update.html...<span class="token comment">&lt;!-- æäº¤æ–‡ç« çš„è¡¨å• --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    &#123;% csrf_token %&#125;    <span class="token comment">&lt;!-- æ–‡ç« æ ‡é¢˜ --></span>    ...    <span class="token comment">&lt;!-- æ–‡ç« æ ç›® --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ ç›®<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span>                 <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span>                 <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>column<span class="token punctuation">"</span></span>        <span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>none<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¯·é€‰æ‹©æ ç›®..<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>            &#123;% for column in columns %&#125;                &lt;option value="&#123;&#123; column.id &#125;&#125;"                    &#123;% if column.id == article.column.id %&#125;                        selected                    &#123;% endif %&#125;                >                    &#123;&#123; column &#125;&#125;                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>            &#123;% endfor %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- æ–‡ç« æ­£æ–‡ --></span>    ...    <span class="token comment">&lt;!-- æäº¤æŒ‰é’® --></span>    ...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸å‰é¢ç¨æœ‰ä¸åŒçš„æ˜¯ï¼Œè¡¨å•ä¸­åˆ¤æ–­äº†<code>column.id</code>ä¸<code>article.column.id</code>æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰åˆ™å°†å…¶è®¾ç½®ä¸ºé»˜è®¤å€¼ã€‚</p><p>ç„¶åä¿®æ”¹è§†å›¾å‡½æ•°ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token comment"># æ›´æ–°æ–‡ç« </span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">def</span> <span class="token function">article_update</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ä¸º POST æäº¤è¡¨å•æ•°æ®</span>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">"POST"</span><span class="token punctuation">:</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token keyword">if</span> article_post_form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>            <span class="token comment"># æ–°å¢çš„ä»£ç </span>            <span class="token keyword">if</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">[</span><span class="token string">'column'</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">'none'</span><span class="token punctuation">:</span>                article<span class="token punctuation">.</span>column <span class="token operator">=</span> ArticleColumn<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">[</span><span class="token string">'column'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                article<span class="token punctuation">.</span>column <span class="token operator">=</span> <span class="token boolean">None</span>            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token comment"># æ–°å¢åŠä¿®æ”¹çš„ä»£ç </span>        columns <span class="token operator">=</span> ArticleColumn<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        context <span class="token operator">=</span> <span class="token punctuation">&#123;</span>             <span class="token string">'article'</span><span class="token punctuation">:</span> article<span class="token punctuation">,</span>             <span class="token string">'article_post_form'</span><span class="token punctuation">:</span> article_post_form<span class="token punctuation">,</span>            <span class="token string">'columns'</span><span class="token punctuation">:</span> columns<span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»£ç é€»è¾‘ä¸å‰é¢å¾ˆç±»ä¼¼ã€‚ä¿®æ”¹æ–‡ç« çš„æ ç›®åŠŸèƒ½ï¼Œä¹Ÿå°±å®Œæˆäº†ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« å®ç°äº†ç®€å•çš„<strong>æ ç›®åŠŸèƒ½</strong>ï¼Œå¯ä»¥èˆ’èˆ’æœæœå¯¹æ–‡ç« è¿›è¡Œåˆ†ç±»äº†ï¼Œå¼ºè¿«ç—‡ç¦éŸ³å•Šã€‚</p><p>è¿˜æœ‰äº›å¯ä»¥å®Œå–„çš„å·¥ä½œï¼Œæ¯”å¦‚ï¼š</p><ul><li><p>å•å‡»<strong>æ ç›®æŒ‰é’®</strong>æ˜¾ç¤ºæ‰€æœ‰ç›¸åŒæ ç›®çš„æ–‡ç« ã€‚è¿™ä¸ªåŠŸèƒ½ä¸ä¹‹å‰å­¦è¿‡çš„<a href="https://www.dusaiphoto.com/article/detail/46/">æœ€çƒ­æ–‡ç« æ’åº</a>ä»¥åŠ<a href="https://www.dusaiphoto.com/article/detail/47/">æœç´¢æ–‡ç« </a>éå¸¸çš„ç±»ä¼¼ã€‚è¿˜è®°å¾—<code>filter()</code>æ–¹æ³•å—ï¼Ÿç¨å¾®éº»çƒ¦ç‚¹çš„åœ°æ–¹æ˜¯ä½ éœ€è¦è€ƒè™‘æ ç›®ã€æœç´¢ã€æ’åºä¸‰è€…çš„è”åˆæŸ¥è¯¢ï¼Œå› æ­¤å¯èƒ½ä¼šå¯¹åŸæœ‰ä»£ç ç»“æ„åšé€‚å½“çš„è°ƒæ•´ã€‚</p><blockquote><p><strong>å®åœ¨ä¸çŸ¥é“å¦‚ä½•å»å®ç°çš„åŒå­¦ï¼Œè¯·æŸ¥çœ‹<a href="https://github.com/stacklens/django_blog_tutorial">æ•™ç¨‹ä»£ç </a>æ–‡ç« åˆ—è¡¨çš„è§†å›¾å’Œæ¨¡æ¿ï¼Œç­”æ¡ˆå°±åœ¨é‡Œé¢ã€‚</strong></p></blockquote></li><li><p>æ ç›®Modelçš„å¢åˆ æ”¹æŸ¥ã€‚</p><blockquote><p>å¦‚æœä½ ä¸æƒ³å†™å¢åˆ æ”¹æŸ¥ï¼Œç”¨åå°ç®¡ç†æ ç›®æ˜¯å®Œå…¨å¯ä»¥çš„ã€‚</p></blockquote></li></ul><p>ä»¥ä¸Šå†…å®¹å°±ä¸åœ¨è¿™é‡Œèµ˜è¿°äº†ã€‚ç•™ç»™è¯»è€…å»å°è¯•å®ç°ã€‚</p><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#100;&#117;&#115;&#x61;&#105;&#112;&#x68;&#x6f;&#116;&#111;&#x40;&#102;&#111;&#120;&#x6d;&#97;&#x69;&#108;&#x2e;&#99;&#x6f;&#109;">&#100;&#117;&#115;&#x61;&#105;&#112;&#x68;&#x6f;&#116;&#111;&#x40;&#102;&#111;&#120;&#x6d;&#97;&#x69;&#108;&#x2e;&#99;&#x6f;&#109;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--29.æ–‡ç« æ ‡é¢˜å›¾</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/29.wen-zhang-biao-ti-tu/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/29.wen-zhang-biao-ti-tu/</url>
      
        <content type="html"><![CDATA[<p>ç°åœ¨è™½ç„¶åšå®¢çš„åŠŸèƒ½å¤§éƒ½å®ç°äº†ï¼Œä½†æ˜¯ç•Œé¢è¿˜æ˜¯æ¯”è¾ƒæœ´ç´ ï¼Œç‰¹åˆ«æ˜¯é¦–é¡µçš„æ–‡ç« åˆ—è¡¨å‡ ä¹å…¨æ˜¯æ–‡å­—ï¼Œçœ‹å¤šäº†éš¾å…ç–²åŠ³ã€‚å› æ­¤ï¼Œç»™æ¯ä¸ªæ–‡ç« æ ‡é¢˜é…ä¸€å¼ <strong>æ ‡é¢˜å›¾</strong>ï¼Œä¸ä»…ç¾è§‚ï¼Œç”¨æˆ·ä¹Ÿèƒ½é€šè¿‡å›¾ç‰‡å¿«é€Ÿäº†è§£æ–‡ç« å†…å®¹ã€‚å®é™…ä¸Šå¤§éƒ¨åˆ†ç¤¾äº¤ç½‘ç«™ä¹Ÿéƒ½æ˜¯è¿™ä¹ˆå¹²çš„ï¼Œæ¯•ç«Ÿäººçš„å¤©æ€§å°±æ˜¯æ‡’ï¼Œèƒ½çœ‹å›¾å°±åšå†³ä¸çœ‹å­—ã€‚</p><p>åœ¨<a href="https://www.dusaiphoto.com/article/detail/38/">ä¸Šä¼ ç”¨æˆ·å¤´åƒ</a>ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å·²ç»æ¥è§¦è¿‡ä¸Šä¼ ã€å±•ç¤ºå›¾ç‰‡äº†ã€‚æ ‡é¢˜å›¾çš„å®ç°ä¹Ÿå·®ä¸å¤šï¼Œä¸åŒçš„æ˜¯æœ¬ç« ä¼šæ›´è¿‘ä¸€æ­¥ï¼Œ<strong>å¯¹å›¾ç‰‡è¿›è¡Œç¼©æ”¾</strong>ç­‰å¤„ç†ï¼Œä½¿é¡µé¢æ•´æ´ç¾è§‚ã€å¹¶ä¸”é«˜æ•ˆã€‚</p><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><p>ä¸ç”¨æˆ·å¤´åƒç±»ä¼¼ï¼Œæ ‡é¢˜å›¾æ˜¯å±äºæ¯ç¯‡åšæ–‡è‡ªå·±çš„â€œèµ„äº§â€ï¼Œå› æ­¤éœ€è¦<strong>ä¿®æ”¹model</strong>ï¼Œæ–°å»ºä¸€ä¸ªå­—æ®µï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>models<span class="token punctuation">.</span>py<span class="token keyword">class</span> <span class="token class-name">ArticlePost</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token comment"># æ–‡ç« æ ‡é¢˜å›¾</span>    avatar <span class="token operator">=</span> models<span class="token punctuation">.</span>ImageField<span class="token punctuation">(</span>upload_to<span class="token operator">=</span><span class="token string">'article/%Y%m%d/'</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„ä¸Šä¼ åœ°å€ä¸­çš„<code>%Y%m%d</code>æ˜¯æ—¥æœŸæ ¼å¼åŒ–çš„å†™æ³•ã€‚æ¯”å¦‚ä¸Šä¼ æ—¶é—´æ˜¯2019å¹´2æœˆ26æ—¥ï¼Œåˆ™æ ‡é¢˜å›¾ä¼šä¸Šä¼ åˆ°<code>media/article/20190226</code>è¿™ä¸ªç›®å½•ä¸­ã€‚</p><p>è®°å¾—<strong>æ•°æ®è¿ç§»</strong>ã€‚</p><p>æ ‡é¢˜å›¾é€šå¸¸åœ¨åˆ›å»ºæ–°æ–‡ç« çš„æ—¶å€™å°±è®¾ç½®å¥½äº†ï¼Œè€Œæ–°æ–‡ç« æ˜¯é€šè¿‡è¡¨å•ä¸Šä¼ åˆ°æ•°æ®åº“ä¸­çš„ã€‚å› æ­¤æ¥ä¸‹æ¥å°±æ˜¯<strong>ä¿®æ”¹å‘è¡¨æ–‡ç« çš„è¡¨å•ç±»</strong>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>forms<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token class-name">ArticlePostForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        fields <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'body'</span><span class="token punctuation">,</span> <span class="token string">'tags'</span><span class="token punctuation">,</span> <span class="token string">'avatar'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¢åŠ äº†<code>avatar</code>å­—æ®µè€Œå·²ï¼Œæ²¡æœ‰æ–°å†…å®¹ã€‚</p><p>ä¸‹ä¸€æ­¥å°±æ˜¯<strong>ä¿®æ”¹è§†å›¾</strong>ã€‚å› ä¸ºPOSTçš„è¡¨å•ä¸­åŒ…å«äº†å›¾ç‰‡æ–‡ä»¶ï¼Œæ‰€ä»¥è¦å°†<code>request.FILES</code>ä¹Ÿä¸€å¹¶ç»‘å®šåˆ°è¡¨å•ç±»ä¸­ï¼Œå¦åˆ™å›¾ç‰‡æ— æ³•æ­£ç¡®ä¿å­˜ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">def</span> <span class="token function">article_create</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">"POST"</span><span class="token punctuation">:</span>        <span class="token comment"># å¢åŠ  request.FILES</span>        article_post_form <span class="token operator">=</span> ArticlePostForm<span class="token punctuation">(</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">,</span> request<span class="token punctuation">.</span>FILES<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¾ˆå¥½ï¼ŒåŠŸèƒ½å·®ä¸å¤šå·²ç»é€šäº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¯¹å›¾ç‰‡è¿›è¡Œå¤„ç†ã€‚</p><h2 id="å¤„ç†å›¾ç‰‡"><a href="#å¤„ç†å›¾ç‰‡" class="headerlink" title="å¤„ç†å›¾ç‰‡"></a>å¤„ç†å›¾ç‰‡</h2><p>å†™ä»£ç ä¹‹å‰å…ˆæ„æ€ä¸€ä¸‹éœ€è¦è¿›è¡Œæ€æ ·çš„å¤„ç†ï¼š</p><ul><li>æ ‡é¢˜å›¾å¯¹ç”»è´¨æ²¡æœ‰å¤ªé«˜çš„è¦æ±‚ï¼Œå› æ­¤éœ€è¦<strong>ç¼©å°å›¾ç‰‡çš„ä½“ç§¯</strong>ï¼Œä»¥ä¾¿æé«˜ç½‘é¡µçš„åŠ è½½é€Ÿåº¦ã€‚</li><li>å…¶æ¬¡è¿˜éœ€è¦å¯¹å›¾ç‰‡çš„é•¿å®½è¿›è¡Œè§„èŒƒåŒ–ã€‚æˆ‘æ¯”è¾ƒå–œæ¬¢å°†å›¾ç‰‡çš„<strong>å®½åº¦è®¾ç½®å¾—ç›¸åŒ</strong>ï¼Œè¿™æ ·æ ‡é¢˜å¯ä»¥æ¯”è¾ƒæ•´é½ã€‚</li></ul><p>ä¸‹ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œä»£ç åº”è¯¥å†™åˆ°ä»€ä¹ˆåœ°æ–¹å‘¢ï¼Ÿä¼¼ä¹åœ¨<strong>model</strong>ã€<strong>form</strong>æˆ–è€…<strong>view</strong>é‡Œå¤„ç†å›¾ç‰‡éƒ½å¯ä»¥ã€‚åœ¨è¿™é‡Œæˆ‘æ‰“ç®—æŠŠä»£ç å†™åˆ°<strong>model</strong>ä¸­å»ï¼Œè¿™æ ·ä¸ç®¡ä½ åœ¨ä»»ä½•åœ°æ–¹ä¸Šä¼ å›¾ç‰‡ï¼ˆåŒ…æ‹¬åå°ä¸­ï¼ï¼‰ï¼Œå›¾ç‰‡éƒ½ä¼šå¾—åˆ°å¤„ç†ã€‚</p><p>æƒ³å¥½ä¹‹åï¼Œå°±è¦è¡ŒåŠ¨äº†ã€‚è¿˜è®°å¾—Pillowè¿™ä¸ªåº“å—ï¼Œæˆ‘ä»¬å¾ˆæ—©å°±æŠŠå®ƒå®‰è£…å¥½äº†ï¼Œç°åœ¨æ˜¯ä½¿ç”¨å®ƒçš„æ—¶å€™äº†ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>models<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># è®°å¾—å¯¼å…¥ï¼</span><span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image<span class="token keyword">class</span> <span class="token class-name">ArticlePost</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># å‰é¢å†™å¥½çš„ä»£ç </span>    avatar <span class="token operator">=</span> models<span class="token punctuation">.</span>ImageField<span class="token punctuation">(</span>upload_to<span class="token operator">=</span><span class="token string">'article/%Y%m%d/'</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>        <span class="token comment"># ä¿å­˜æ—¶å¤„ç†å›¾ç‰‡</span>    <span class="token keyword">def</span> <span class="token function">save</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># è°ƒç”¨åŸæœ‰çš„ save() çš„åŠŸèƒ½</span>        article <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span>ArticlePost<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>        <span class="token comment"># å›ºå®šå®½åº¦ç¼©æ”¾å›¾ç‰‡å¤§å°</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>avatar <span class="token keyword">and</span> <span class="token keyword">not</span> kwargs<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'update_fields'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            image <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>avatar<span class="token punctuation">)</span>            <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=</span> image<span class="token punctuation">.</span>size            new_x <span class="token operator">=</span> <span class="token number">400</span>            new_y <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>new_x <span class="token operator">*</span> <span class="token punctuation">(</span>y <span class="token operator">/</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span>            resized_image <span class="token operator">=</span> image<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token punctuation">(</span>new_x<span class="token punctuation">,</span> new_y<span class="token punctuation">)</span><span class="token punctuation">,</span> Image<span class="token punctuation">.</span>ANTIALIAS<span class="token punctuation">)</span>            resized_image<span class="token punctuation">.</span>save<span class="token punctuation">(</span>self<span class="token punctuation">.</span>avatar<span class="token punctuation">.</span>path<span class="token punctuation">)</span>        <span class="token keyword">return</span> article    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ä»£ç ä¸å¤šï¼Œä½†æ˜¯æœ‰å¾ˆå¤šç»†èŠ‚ï¼Œå€¼å¾—ä»”ç»†æ¨æ•²ã€‚</strong>ä¸æ€¥ï¼Œä¸€è¡Œä¸€è¡Œæ¥ï¼š</p><ul><li><p><code>save()</code>æ˜¯modelå†…ç½®çš„æ–¹æ³•ï¼Œå®ƒä¼šåœ¨modelå®ä¾‹æ¯æ¬¡ä¿å­˜æ—¶è°ƒç”¨ã€‚è¿™é‡Œæ”¹å†™å®ƒï¼Œå°†å¤„ç†å›¾ç‰‡çš„é€»è¾‘â€œå¡è¿›å»â€ã€‚</p></li><li><p><code>super(ArticlePost, self).save(*args, **kwargs)</code>çš„ä½œç”¨æ˜¯è°ƒç”¨çˆ¶ç±»ä¸­åŸæœ‰çš„<code>save()</code>æ–¹æ³•ï¼Œå³å°†modelä¸­çš„å­—æ®µæ•°æ®ä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚å› ä¸ºå›¾ç‰‡å¤„ç†æ˜¯åŸºäºå·²ç»ä¿å­˜çš„å›¾ç‰‡çš„ï¼Œæ‰€ä»¥<strong>è¿™å¥ä¸€å®šè¦åœ¨å¤„ç†å›¾ç‰‡ä¹‹å‰æ‰§è¡Œ</strong>ï¼Œå¦åˆ™ä¼šå¾—åˆ°æ‰¾ä¸åˆ°åŸå§‹å›¾ç‰‡çš„é”™è¯¯ã€‚</p></li><li><p>åšæ–‡çš„æ ‡é¢˜å›¾ä¸æ˜¯å¿…é¡»çš„ï¼Œ<code>if</code>ä¸­çš„<code>self.avatar</code>å‰”é™¤æ‰æ²¡æœ‰æ ‡é¢˜å›¾çš„æ–‡ç« ï¼Œè¿™äº›æ–‡ç« ä¸éœ€è¦å¤„ç†å›¾ç‰‡ã€‚</p></li><li><p>ä¸å¤ªå¥½ç†è§£çš„æ˜¯<code>if</code>ä¸­çš„è¿™ä¸ª<code>not kwargs.get(&#39;update_fields&#39;)</code>ã€‚è¿˜è®°å¾—<code>article_detail()</code>è§†å›¾ä¸­ä¸ºäº†ç»Ÿè®¡æµè§ˆé‡è€Œè°ƒç”¨äº†<code>save(update_fields=[&#39;total_views&#39;])</code>å—ï¼Ÿæ²¡é”™ï¼Œå°±æ˜¯ä¸ºäº†æ’é™¤æ‰ç»Ÿè®¡æµè§ˆé‡è°ƒç”¨çš„<code>save()</code>ï¼Œå…å¾—æ¯æ¬¡ç”¨æˆ·è¿›å…¥æ–‡ç« è¯¦æƒ…é¡µé¢éƒ½è¦å¤„ç†æ ‡é¢˜å›¾ï¼Œå¤ªå½±å“æ€§èƒ½äº†ã€‚</p><blockquote><p>è¿™ç§åˆ¤æ–­æ–¹æ³•è™½ç„¶ç®€å•ï¼Œä½†ä¼šé€ æˆæ¨¡å‹å’Œè§†å›¾çš„ç´§è€¦åˆã€‚è¯»è€…åœ¨å®è·µä¸­å¯æ¢ç´¢æ›´ä¼˜é›…çš„æ–¹æ³•ï¼Œæ¯”å¦‚ä¸“é—¨è®¾ç½®ä¸€ä¸ªå‚æ•°ï¼Œç”¨æ¥åˆ¤æ–­æ˜¯å“ªç±»è§†å›¾è°ƒç”¨äº†save()ã€‚</p></blockquote></li><li><p>æ¥ä¸‹æ¥éƒ½æ˜¯Pillowå¤„ç†å›¾ç‰‡çš„æµç¨‹äº†ï¼šæ‰“å¼€åŸå§‹å›¾ç‰‡ï¼Œå–å¾—åˆ†è¾¨ç‡ï¼Œå°†æ–°å›¾ç‰‡çš„å®½åº¦è®¾ç½®ä¸º400å¹¶æ ¹æ®æ¯”ä¾‹ç¼©å°é«˜åº¦ï¼Œæœ€åç”¨æ–°å›¾ç‰‡å°†åŸå§‹å›¾ç‰‡è¦†ç›–æ‰ã€‚<code>Image.ANTIALIAS</code>è¡¨ç¤ºç¼©æ”¾é‡‡ç”¨å¹³æ»‘æ»¤æ³¢ã€‚</p></li><li><p>æœ€åä¸€æ­¥ï¼Œå°†çˆ¶ç±»<code>save()</code>è¿”å›çš„ç»“æœåŸå°ä¸åŠ¨çš„è¿”å›å»ã€‚</p></li></ul><p>å®Œç¾ï¼</p><h2 id="æ¨¡æ¿ä¸æµ‹è¯•"><a href="#æ¨¡æ¿ä¸æµ‹è¯•" class="headerlink" title="æ¨¡æ¿ä¸æµ‹è¯•"></a>æ¨¡æ¿ä¸æµ‹è¯•</h2><p>å‰©ä¸‹çš„å·¥ä½œå°±æ¯”è¾ƒç®€å•äº†ã€‚</p><p>ä¿®æ”¹<strong>å‘è¡¨æ–‡ç« çš„æ¨¡æ¿</strong>ï¼Œè®©è¡¨å•èƒ½å¤Ÿä¸Šä¼ å›¾ç‰‡ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/create.html...<span class="token comment">&lt;!-- è®°å¾—å¢åŠ  enctype ï¼ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">...</span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    ...    <span class="token comment">&lt;!-- æ–‡ç« æ ‡é¢˜å›¾ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ ‡é¢˜å›¾<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control-file<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        ...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶å<strong>ä¿®æ”¹æ–‡ç« åˆ—è¡¨æ¨¡æ¿</strong>ï¼Œè®©å…¶èƒ½å¤Ÿå±•ç°æ ‡é¢˜å›¾ã€‚</p><p>ä¸ºäº†ç¾è§‚ï¼Œè¿™é‡Œç¨å¾®æ”¹åŠ¨äº†åˆ—è¡¨å¾ªç¯çš„æ•´ä½“ç»“æ„ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/list.html...<span class="token comment">&lt;!-- åˆ—è¡¨å¾ªç¯ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row mt-2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    &#123;% for article in articles %&#125;        <span class="token comment">&lt;!-- æ ‡é¢˜å›¾ --></span>        &#123;% if article.avatar %&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123; article.avatar.url &#125;&#125;<span class="token punctuation">"</span></span>                      <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span>                      <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">max-width</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span> <span class="token property">border-radius</span><span class="token punctuation">:</span> 20px</span><span class="token punctuation">"</span></span></span>                <span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        &#123;% endif %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!-- æ ç›® --></span>            ...            <span class="token comment">&lt;!-- æ ‡ç­¾ --></span>            ...            ...                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">/></span></span>    &#123;% endfor %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥åˆæ˜¯å–œé—»ä¹è§çš„æµ‹è¯•ç¯èŠ‚ã€‚</p><p>å¯åŠ¨æœåŠ¡å™¨ï¼Œæ‰“å¼€å‘è¡¨æ–‡ç« é¡µé¢ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190226/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE173.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190226/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE173.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>é€‰æ‹©å‡ å¼ åˆ†è¾¨ç‡å„ä¸ç›¸åŒçš„å›¾ç‰‡ä½œä¸ºæ ‡é¢˜å›¾ï¼Œ</p><p>å‘è¡¨å‡ ç¯‡æ–‡ç« å¹¶å›åˆ°æ–‡ç« åˆ—è¡¨é¡µé¢ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190226/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE175.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190226/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE175.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>çœ‹èµ·æ¥ä¼¼ä¹ä¸é”™ã€‚</p><p>æŸ¥çœ‹ä¸€ä¸‹mediaç›®å½•ä¸‹å®é™…ä¿å­˜çš„å›¾ç‰‡ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190226/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE176.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190226/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE176.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ç¡®å®ä¿å­˜åˆ°æƒ³è¦çš„ç›®å½•ä¸‹ï¼Œå¹¶ä¸”å·¦ä¸‹è§’æ˜¾ç¤ºå›¾ç‰‡çš„å®½åº¦å…¨éƒ½ä¸º400äº†ã€‚</p><h2 id="æ‰«å°¾å·¥ä½œ"><a href="#æ‰«å°¾å·¥ä½œ" class="headerlink" title="æ‰«å°¾å·¥ä½œ"></a>æ‰«å°¾å·¥ä½œ</h2><p>åŠŸèƒ½å·²ç»å®ç°äº†ï¼Œä½†è¿˜æœ‰æ‰«å°¾å·¥ä½œéœ€è¦å»åšï¼š</p><ul><li><p>éœ€è¦å¯¹ä¸Šä¼ çš„å›¾ç‰‡åšæ›´å¤šçš„éªŒè¯å·¥ä½œï¼Œæ¯”å¦‚ä¸Šä¼ çš„æ–‡ä»¶æ˜¯å¦ä¸ºå›¾ç‰‡ã€åˆ†è¾¨ç‡æ˜¯å¦æ»¡è¶³è¦æ±‚ã€‚è™½ç„¶åœ¨ä¸ªäººåšå®¢é¡¹ç›®ä¸­è¿™äº›éªŒè¯å¹¶ä¸æ˜¯ç‰¹åˆ«é‡è¦ï¼Œä½†åœ¨å…¶ä»–é¡¹ç›®ä¸­å°±è¯´ä¸å¥½äº†ï¼šè°çŸ¥é“ç”¨æˆ·ä¼šä¸Šä¼ äº›ä»€ä¹ˆå¥‡å¥‡æ€ªæ€ªçš„ä¸œè¥¿ï¼Ÿ</p></li><li><p>ç¼–è¾‘æ–‡ç« ã€åˆ é™¤æ–‡ç« ä¹ŸåŒæ ·éœ€è¦å¤„ç†ä¸Šä¼ çš„å›¾ç‰‡ã€‚ä½ è¿˜å¯ä»¥å°†ç¼©æ”¾åˆ†è¾¨ç‡çš„æŠ€æœ¯åº”ç”¨åˆ°ç”¨æˆ·å¤´åƒä¸Šï¼Œæ¯”å¦‚è£å‰ªæˆæ–¹å½¢ã€‚</p><blockquote><p>æ³¨æ„ï¼šåˆ é™¤æ•°æ®åº“ä¸­çš„avataræ¡ç›®åªæ˜¯æ–­å¼€äº†æ•°æ®è¡¨å’Œå›¾ç‰‡çš„é“¾æ¥è€Œå·²ï¼Œå®é™…ä¸Šå›¾ç‰‡è¿˜ä¿å­˜åœ¨åŸæ¥çš„ä½ç½®ã€‚è¦å½»åº•åˆ é™¤å›¾ç‰‡ï¼Œä½ è¿˜å¾—å†™æ“ä½œç³»ç»Ÿæ–‡ä»¶çš„ä»£ç æ‰è¡Œã€‚</p></blockquote></li></ul><p>æ€ä¹ˆå®ç°è¿™äº›åŠŸèƒ½å°±ä¸èµ˜è¿°äº†ï¼Œç•™ç»™è¯»è€…è‡ªå·±å»æŠ˜è…¾å§ã€‚</p><h2 id="ç¼–è¾‘æ–‡ç« "><a href="#ç¼–è¾‘æ–‡ç« " class="headerlink" title="ç¼–è¾‘æ–‡ç« "></a>ç¼–è¾‘æ–‡ç« </h2><blockquote><p>2019/06/24 æ–°å¢æœ¬èŠ‚</p></blockquote><p>æœ‰ä¸å°‘è¯»è€…åœ¨å°†<strong>æ ‡é¢˜å›¾</strong>å’Œ<strong>æ ‡ç­¾</strong>åŠŸèƒ½æ·»åŠ åˆ°<strong>ç¼–è¾‘æ–‡ç« </strong>é¡µé¢æ—¶é‡åˆ°äº†å›°éš¾ï¼Œæ‰€ä»¥æç¤ºä¸€ä¸‹å¦‚ä½•å®ç°ã€‚</p><p>å…¶å®å¤§å®¶çš„æ€è·¯æ˜¯æ²¡é”™çš„ï¼Œç¼–è¾‘å’Œåˆ›å»ºå·®ä¸å¤ªå¤šï¼Œå”¯ä¸€åŒºåˆ«æ˜¯ç¼–è¾‘åŠŸèƒ½è¿˜éœ€è¦æŠŠæ—§çš„æ•°æ®ç»™å±•ç°å‡ºæ¥ã€‚å…³é”®æ˜¯è¦æ³¨æ„å‡ ä¸ªé—®é¢˜ï¼š</p><ul><li><strong>æ ‡é¢˜å›¾</strong>æ˜¯æ–‡ä»¶ï¼Œä½ åº”è¯¥åœ¨<code>request.FILES</code>é‡Œè·å–å®ƒï¼Œè€Œä¸æ˜¯<code>request.POST</code></li><li><strong>tags</strong>ä¸æ˜¯æ™®é€šçš„å­—æ®µï¼Œ<code>article.tags</code>æ˜¯å–ä¸åˆ°å€¼çš„ï¼Œä½ åº”è¯¥ç”¨<a href="https://django-taggit.readthedocs.io/en/latest/api.html">å®˜æ–¹æ–‡æ¡£</a>ç»™çš„<strong>æ¥å£</strong>å»è·å–ã€è®¾ç½®æ•°æ®</li></ul><p>æ‰€ä»¥<strong>è§†å›¾ç›¸å…³ä»£ç </strong>åº”è¯¥è¿™æ ·å†™ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token comment"># æ›´æ–°æ–‡ç« </span><span class="token decorator annotation punctuation">@login_required</span><span class="token punctuation">(</span>login_url<span class="token operator">=</span><span class="token string">'/userprofile/login/'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">article_update</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">"POST"</span><span class="token punctuation">:</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token keyword">if</span> article_post_form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>            <span class="token keyword">if</span> request<span class="token punctuation">.</span>FILES<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'avatar'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                article<span class="token punctuation">.</span>avatar <span class="token operator">=</span> request<span class="token punctuation">.</span>FILES<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'avatar'</span><span class="token punctuation">)</span>            article<span class="token punctuation">.</span>tags<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token operator">*</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'tags'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">,</span> clear<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>            article<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        context <span class="token operator">=</span> <span class="token punctuation">&#123;</span>             <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>            <span class="token string">'tags'</span><span class="token punctuation">:</span> <span class="token string">','</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span>x <span class="token keyword">for</span> x <span class="token keyword">in</span> article<span class="token punctuation">.</span>tags<span class="token punctuation">.</span>names<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>tags.set()</code>å’Œ<code>tags.names()</code>å°±æ˜¯åº“æä¾›çš„æ¥å£äº†ï¼Œåˆ†åˆ«ç”¨äºæ›´æ–°æ•°æ®å’Œè·å–æ ‡ç­¾åã€‚æ³¨æ„<code>tags.set()</code>æ˜¯å¦‚ä½•å°†åºåˆ—åˆ†éš”å¹¶è§£åŒ…çš„ã€‚</li><li>æ¸²æŸ“ç©ºè¡¨å•æ—¶ç”¨åˆ°äº†åˆ—è¡¨ç”Ÿæˆå™¨å°†æ•°æ®è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</li></ul><p><strong>æ¨¡æ¿ç›¸å…³ä»£ç ï¼š</strong></p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/update.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.<span class="token punctuation">"</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    &#123;% csrf_token %&#125;    ...    <span class="token comment">&lt;!-- æ–‡ç« æ ‡é¢˜å›¾ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ ‡é¢˜å›¾<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control-file<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- æ–‡ç« æ ‡ç­¾--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tags<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ ‡ç­¾<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control col-3<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tags<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tags<span class="token punctuation">"</span></span>            <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123; tags &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    ...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>enctype=&quot;multipart/form-data&quot;</code>è¿™ä¸ªå±æ€§çš„æ„æ€æ˜¯è¡¨å•æäº¤æ—¶ä¸å¯¹å­—ç¬¦ç¼–ç ã€‚è¡¨å•é‡Œå¸¦æœ‰æ–‡ä»¶æ—¶ï¼Œä¸€å®šè¦åŠ ä¸Šå®ƒã€‚</p><p>æ ¸å¿ƒä»£ç å¤§æ¦‚å°±è¿™æ ·ï¼Œæˆ‘çš„<a href="https://github.com/stacklens/django_blog_tutorial">GitHubä»“åº“masteråˆ†æ”¯</a>æ›´æ–°äº†æ­¤éƒ¨åˆ†çš„å®Œæ•´ä»£ç ï¼Œæä¾›ç»™å¤§å®¶å‚è€ƒã€‚</p><p>æ­¤å¤–è¿˜æœ‰äº›ç»†èŠ‚é—®é¢˜å¯ä»¥ä¼˜åŒ–ï¼Œè¯»è€…å°±è‡ªå·±å»è¯•è¯•çœ‹å§ï¼</p><h2 id="è½®å­"><a href="#è½®å­" class="headerlink" title="è½®å­"></a>è½®å­</h2><p>è™½ç„¶æœ¬æ–‡æ˜¯è‡ªå·±åŠ¨æ‰‹å†™çš„ä»£ç ï¼ˆä¸¥æ ¼è¯´æ¥Pillowä¹Ÿæ˜¯è½®å­ï¼‰ï¼Œä½†æƒ³å¿…ä½ ä¹ŸçŒœåˆ°äº†ï¼Œè¿˜æœ‰æ›´åŠ æ™ºèƒ½çš„è½®å­ï¼š<a href="https://github.com/matthewwithanm/django-imagekit">django-imagekit</a>ï¼Œè¿™ä¸ªåº“å¯ä»¥ç›´æ¥é›†æˆåˆ°modelé‡Œé¢ï¼Œæ¯”å¦‚è¿™æ ·ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>models<span class="token punctuation">.</span>py<span class="token comment"># å¼•å…¥imagekit</span><span class="token keyword">from</span> imagekit<span class="token punctuation">.</span>models <span class="token keyword">import</span> ProcessedImageField<span class="token keyword">from</span> imagekit<span class="token punctuation">.</span>processors <span class="token keyword">import</span> ResizeToFit<span class="token keyword">class</span> <span class="token class-name">ArticlePost</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        avatar <span class="token operator">=</span> ProcessedImageField<span class="token punctuation">(</span>        upload_to<span class="token operator">=</span><span class="token string">'article/%Y%m%d'</span><span class="token punctuation">,</span>        processors<span class="token operator">=</span><span class="token punctuation">[</span>ResizeToFit<span class="token punctuation">(</span>width<span class="token operator">=</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token builtin">format</span><span class="token operator">=</span><span class="token string">'JPEG'</span><span class="token punctuation">,</span>        options<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'quality'</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å­—æ®µä¸­å®šä¹‰å¥½äº†ä¸Šä¼ ä½ç½®ã€å¤„ç†è§„åˆ™ã€å­˜å‚¨æ ¼å¼ä»¥åŠå›¾ç‰‡è´¨é‡ï¼Œä½ ä¸éœ€è¦å†™ä»»ä½•å¤„ç†å›¾ç‰‡çš„ä»£ç äº†ã€‚</p><p>æ›´å¤šçš„ç”¨æ³•è§<a href="https://github.com/matthewwithanm/django-imagekit">å®˜æ–¹ä»‹ç»</a>ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« å­¦ä¹ äº†å¦‚ä½•ä¸Šä¼ å¹¶å¤„ç†æ–‡ç« çš„æ ‡é¢˜å›¾ï¼Œä»æ­¤åšå®¢é¦–é¡µå°±æœ‰äº†æ¼‚äº®çš„å¤–è§‚ã€‚</p><p>éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼Œä¸ªäººåšå®¢æ‰€é‡‡ç”¨çš„æœåŠ¡å™¨é€šå¸¸æ€§èƒ½ä¸ä½³ï¼Œç”¨æ¥ä¿å­˜æ–‡ç« ç¼©ç•¥å›¾ç­‰å°å°ºå¯¸çš„å›¾ç‰‡å€’è¿˜å¥½ï¼Œä½†æ˜¯<strong>åƒä¸‡ä¸è¦å­˜å‚¨å¤§å°ºå¯¸çš„å›¾ç‰‡æ–‡ä»¶</strong>ï¼Œå¦åˆ™ç”¨æˆ·ç­‰å¾…å‡ åˆ†é’Ÿéƒ½åˆ·ä¸å¼€ä½ çš„å›¾ç‰‡ï¼Œé‚£æ˜¯å¾ˆæ‚²å‰§çš„ã€‚</p><p>å› æ­¤å»ºè®®ä½ å°†å¤§å°ºå¯¸çš„å›¾ç‰‡ã€è§†é¢‘ç­‰æ”¾åˆ°ä¸“ä¸šçš„äº‘å¯¹è±¡å­˜å‚¨æœåŠ¡å•†ä¸­ï¼Œæ¯”å¦‚<a href="https://www.qiniu.com/">ä¸ƒç‰›äº‘</a>ã€<a href="https://www.upyun.com/">åˆæ‹äº‘</a>ç­‰ï¼Œåœ¨ä½ å­˜å‚¨é‡å¾ˆå°æ—¶ï¼ˆ10Gä»¥å†…ï¼‰æ˜¯èŠ±ä¸äº†å¤šå°‘é’±çš„ã€‚</p><hr><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#100;&#x75;&#115;&#x61;&#105;&#x70;&#x68;&#111;&#116;&#111;&#x40;&#x66;&#111;&#120;&#x6d;&#x61;&#105;&#108;&#46;&#99;&#x6f;&#109;">&#100;&#x75;&#115;&#x61;&#105;&#x70;&#x68;&#111;&#116;&#111;&#x40;&#x66;&#111;&#120;&#x6d;&#x61;&#105;&#108;&#46;&#99;&#x6f;&#109;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--31.å››ä¸ªé‡è¦çš„å°åŠŸèƒ½</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/31.si-ge-chong-yao-de-xiao-gong-neng/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/31.si-ge-chong-yao-de-xiao-gong-neng/</url>
      
        <content type="html"><![CDATA[<p>æœ¬ç« é›†ä¸­ä»‹ç»å››ä¸ªé‡è¦çš„å°åŠŸèƒ½ï¼š<strong>å›åˆ°é¡¶éƒ¨æµ®åŠ¨æŒ‰é’®</strong>ã€<strong>çŸ¢é‡å›¾æ ‡</strong>ã€<strong>é¡µè„šæ²‰åº•</strong>å’Œ<strong>ç²˜æ€§ä¾§è¾¹æ </strong>ã€‚</p><p>è¿™å‡ ä¸ªåŠŸèƒ½ä¸DjangoåŸºæœ¬æ²¡å•¥å…³ç³»ï¼Œæ›´å¤šçš„æ˜¯å‰ç«¯çŸ¥è¯†ï¼Œä½†æ˜¯å¯¹åšå®¢ç½‘ç«™éƒ½å¾ˆé‡è¦ï¼Œé—®çš„è¯»è€…ä¹Ÿæ¯”è¾ƒå¤šï¼Œå› æ­¤ä¹Ÿé›†ä¸­è®²ä¸€ä¸‹å¥½äº†ã€‚</p><h2 id="å›åˆ°é¡¶éƒ¨æµ®åŠ¨æŒ‰é’®"><a href="#å›åˆ°é¡¶éƒ¨æµ®åŠ¨æŒ‰é’®" class="headerlink" title="å›åˆ°é¡¶éƒ¨æµ®åŠ¨æŒ‰é’®"></a>å›åˆ°é¡¶éƒ¨æµ®åŠ¨æŒ‰é’®</h2><p>å½“ç”¨æˆ·æ‹œè¯»å®Œä½ çš„åšæ–‡åï¼Œå¯èƒ½æƒ³å›åˆ°æ–‡ç« å¼€å¤´é‡æ–°é˜…è¯»ï¼Œæˆ–è€…å®¡è§†å…¶ä¸­çš„æŸäº›å†…å®¹ã€‚å¦‚æœæ–‡ç« å†…å®¹è¾ƒå¤šï¼Œä¸åœæ»‘åŠ¨æ»šè½®å›é¡µé¢é¡¶éƒ¨æœªå…æœ‰ç‚¹å¤ªè®©äººçƒ¦èºäº†ã€‚</p><p>ä¸€ç§è§£å†³åŠæ³•æ˜¯å¢åŠ ä¸€ä¸ª<strong>å›åˆ°é¡¶éƒ¨çš„æµ®åŠ¨æŒ‰é’®</strong>ã€‚å½“é¡µé¢å‘ä¸‹æ»šåŠ¨åˆ°æŸä¸ªä½ç½®åï¼ŒæŒ‰é’®å°±å‘ˆç°åœ¨é¡µé¢å³ä¸‹è§’ï¼›ç‚¹å‡»æŒ‰é’®ï¼Œé¡µé¢å°±å›åˆ°é¡¶éƒ¨ã€‚è¿™ä¸ªåŠŸèƒ½ Bootstrap 4 ä¼¼ä¹æ²¡æœ‰æä¾›ï¼Œä½†ä¹Ÿä¸å¤æ‚ï¼Œå°±è‡ªå·±ç”¨ JavaScript å’Œ CSS å†™å§ã€‚</p><p>åœ¨<code>templates</code>ç›®å½•æ–°å»º<code>back_to_top_func.html</code>æ–‡ä»¶ï¼Œå†™å…¥ä»¥ä¸‹ä»£ç ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/back_to_top_func.html<span class="token comment">&lt;!-- å‚è€ƒäº† é¹¦é¹‰ çš„ä»£ç ï¼Œåœ¨æ­¤è‡´è°¢ --></span><span class="token comment">&lt;!-- https://ezbox.idv.tw/131/back-to-top-button-without-images --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>BackTop<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>toTop-arrow<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">z-index</span><span class="token punctuation">:</span> 100<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token comment">// å‘ä¸Šæ»šåŠ¨çš„å‡½æ•°</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#BackTop'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'html,body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>scrollTop<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scroll</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scrollTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#BackTop'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#BackTop'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeOut</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">    <span class="token comment">/* æŒ‰é’®è¾¹æ¡†çš„å¤§å°ã€ä½ç½®ã€æ ·å¼ */</span>    <span class="token selector">.toTop-arrow</span> <span class="token punctuation">&#123;</span>        <span class="token property">width</span><span class="token punctuation">:</span> 3.5rem<span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> 3.5rem<span class="token punctuation">;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>        <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>        <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>        <span class="token property">border-radius</span><span class="token punctuation">:</span> 33%<span class="token punctuation">;</span>        <span class="token property">opacity</span><span class="token punctuation">:</span> 0.7<span class="token punctuation">;</span>        <span class="token property">background</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>        <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>        <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>        <span class="token property">right</span><span class="token punctuation">:</span> 1.5rem<span class="token punctuation">;</span>        <span class="token property">bottom</span><span class="token punctuation">:</span> 1.5rem<span class="token punctuation">;</span>        <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/* ç»˜åˆ¶æŒ‰é’®ä¸­çš„å‘ä¸Šç®­å¤´ */</span>    <span class="token selector">.toTop-arrow::before, .toTop-arrow::after</span> <span class="token punctuation">&#123;</span>        <span class="token property">width</span><span class="token punctuation">:</span> 31px<span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> 7px<span class="token punctuation">;</span>        <span class="token property">border-radius</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>        <span class="token property">background</span><span class="token punctuation">:</span> orange<span class="token punctuation">;</span>        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>        <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.toTop-arrow::before</span> <span class="token punctuation">&#123;</span>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-45deg<span class="token punctuation">)</span> <span class="token function">translate</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token property">left</span><span class="token punctuation">:</span> 0.4rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.toTop-arrow::after</span> <span class="token punctuation">&#123;</span>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>45deg<span class="token punctuation">)</span> <span class="token function">translate</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token property">right</span><span class="token punctuation">:</span> 0.4rem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/* å–æ¶ˆç‚¹å‡»æŒ‰é’®æ—¶çš„èšç„¦ */</span>    <span class="token selector">.toTop-arrow:focus</span> <span class="token punctuation">&#123;</span>        <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»£ç åˆ†æˆ<code>html</code>ã€<code>javascript</code>ã€<code>css</code>ä¸‰éƒ¨åˆ†ã€‚</p><p><strong>HTML</strong>éƒ¨åˆ†åªæœ‰ä¸€è¡Œï¼Œç”¨<strong>button</strong>æ ‡ç­¾è¡¨ç¤ºäº†æµ®åŠ¨æŒ‰é’®çš„å®¹å™¨ã€‚</p><p><strong>JavaScript</strong>éƒ¨åˆ†ä¸»è¦ç”¨åˆ°äº†<strong>Jquery</strong>çš„è¯­æ³•ã€‚é¡µé¢åŠ è½½å®Œæˆåå¼€å§‹ç›‘å¬ä¸¤ä¸ªäº‹ä»¶ï¼š</p><ul><li>å½“ç”¨æˆ·ç‚¹å‡»æµ®åŠ¨æŒ‰é’®æ—¶ï¼Œå°†é¡µé¢æ»šåŠ¨åˆ°é¡¶éƒ¨</li><li>å½“é¡µé¢æ»šåŠ¨æ—¶ï¼Œæ ¹æ®é¡µé¢è·ç¦»é¡¶éƒ¨çš„è·ç¦»ï¼Œå†³å®šæŒ‰é’®æ˜¾ç¤ºæˆ–éšè—</li></ul><p><strong>CSS</strong>éƒ¨åˆ†æœ€é•¿ä½†ä¹Ÿå¾ˆç®€å•ï¼Œä¸»è¦å®šä¹‰äº†æŒ‰é’®çš„ä½ç½®ã€å¤§å°ã€å›¾æ¡ˆç­‰æ ·å¼ã€‚è¯»è€…å¯ä»¥è¯•ç€ã€æ”¹åŠ¨ã€åˆ é™¤éƒ¨åˆ†ä»£ç ï¼Œçœ‹çœ‹æŒ‰é’®å½¢æ€ä¼šæ€æ ·å˜åŒ–ã€‚</p><p>æ ¸å¿ƒä»£ç å°±å†™å¥½äº†ã€‚æœ‰ç‚¹å°ç‘•ç–µçš„æ˜¯å‰é¢åœ¨<code>footer.html</code>ä¸­å®šä¹‰äº†<code>class=&quot;fixed-bottom&quot;</code>ï¼Œè¿™ä¸ªå±æ€§çš„æ˜¾ç¤ºå±‚çº§å¾ˆé«˜ï¼Œä¼šå°†æµ®åŠ¨æŒ‰é’®ç»™è¦†ç›–æ‰ã€‚å› æ­¤åˆ é™¤<code>templates/footer.html</code>ä¸­çš„<code>fixed-bottom</code>å±æ€§ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/footer.html...<span class="token comment">&lt;!-- åˆ é™¤äº† fixed-bottom å±æ€§ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>py-3 bg-dark<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    ...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>z-indexè¿™ä¸ªcssæ ·å¼å†³å®šäº†é¡µé¢ä¸­å®¹å™¨çš„æ˜¾ç¤ºé¡ºåºï¼Œæ•°å€¼è¶Šå¤§åˆ™æ˜¾ç¤ºä¼˜å…ˆçº§è¶Šé«˜ã€‚</p><p>ä¹‹æ‰€ä»¥fixed-bottomä¼šè¦†ç›–æ‰æµ®åŠ¨æŒ‰é’®ï¼Œå°±æ˜¯å› ä¸ºå®ƒå°†z-indexè®¾ç½®æˆäº†ä¸€ä¸ªå¾ˆå¤§çš„æ•°å€¼ã€‚</p></blockquote><p>å› ä¸ºæˆ‘ä»¬æƒ³åœ¨å…¨ç«™éƒ½æ‹¥æœ‰è¿™ä¸ªæŒ‰é’®ï¼Œæ‰€ä»¥å°†åˆšå†™å¥½çš„æ¨¡å—å¼•ç”¨åˆ°<code>base.html</code>ä¸­ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/base.html...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    ...    <span class="token comment">&lt;!-- jquery.js --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>jquery/jquery-3.3.1.js<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    ...    <span class="token comment">&lt;!-- åœ¨jqueryåé¢å¼•å…¥ --></span>    &#123;% include 'back_to_top_func.html' %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„æ¨¡å—ç”¨åˆ°äº†<strong>Jquery</strong>ï¼Œå› æ­¤è¦åœ¨Jqueryåé¢å¼•å…¥ã€‚</p><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190411/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE192.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190411/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE192.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ç‚¹å‡»æŒ‰é’®åï¼Œé¡µé¢æ»šå›åˆ°é¡¶éƒ¨ã€‚</p><h2 id="çŸ¢é‡å›¾æ ‡"><a href="#çŸ¢é‡å›¾æ ‡" class="headerlink" title="çŸ¢é‡å›¾æ ‡"></a>çŸ¢é‡å›¾æ ‡</h2><p>ä¸è€ç‰ˆæœ¬ä¸åŒï¼ŒBootstrap 4 ä¸­ä¹Ÿæ²¡æœ‰è‡ªå¸¦å›¾æ ‡ã€‚ä½œä¸ºè¡¥å¿ï¼Œå®˜æ–¹ä¹Ÿæ¨èäº†å‡ æ¬¾å¼ºå¤§ä¸”å…è´¹çš„ç¬¬ä¸‰æ–¹<strong>çŸ¢é‡å›¾æ ‡</strong>æä¾›å•†ã€‚æˆ‘æ¯”è¾ƒå–œæ¬¢çš„æ˜¯<a href="https://fontawesome.com/">Font Awesome</a>ï¼Œæä¾›1500+å…è´¹å›¾æ ‡ï¼ˆä»¥åŠ5000+ä»˜è´¹å›¾æ ‡ï¼‰ï¼Œå®Œå…¨å¤Ÿç”¨äº†ã€‚å„ç§ä½ æƒ³å¾—åˆ°æƒ³ä¸åˆ°çš„å›¾æ ‡éƒ½æœ‰ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190411/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE193.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190411/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE193.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ç”¨æ³•ä¹Ÿå¾ˆç®€å•ï¼Œä½ ç”šè‡³ä¸ç”¨å°†å…¶ä¸‹è½½åˆ°æœ¬åœ°ï¼ˆå½“ç„¶æƒ³ä¸‹è½½ä¹Ÿå¯ä»¥ï¼‰ã€‚æ ¹æ®å®˜ç½‘çš„æç¤ºï¼Œç›´æ¥åœ¨<code>base.html</code>ä¸­å¼•å…¥ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/base.html...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span>       <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://use.fontawesome.com/releases/v5.8.1/css/all.css<span class="token punctuation">"</span></span>       <span class="token attr-name">integrity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf<span class="token punctuation">"</span></span>       <span class="token attr-name">crossorigin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>anonymous<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶ååœ¨é¡µé¢ä¸­æ’å…¥æŸä¸ªå›¾æ ‡çš„æ ‡ç­¾å°±å¯ä»¥ç”¨äº†ã€‚</p><p>é¦–å…ˆåœ¨<a href="https://fontawesome.com/icons?d=gallery">å®˜ç½‘å›¾æ ‡åº“</a>æœç´¢æƒ³è¦çš„å›¾æ ‡ï¼Œæ¯”å¦‚<code>eye</code>ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190411/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE194.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190411/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE194.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ç‚¹å‡»å›¾æ ‡è¿›å»åå°±èƒ½çœ‹åˆ°å®ƒçš„<strong>æ ‡ç­¾åç§°</strong>ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190411/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE195.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190411/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE195.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>å°†æ­¤æ ‡ç­¾åç§°å¤åˆ¶åˆ°ä½ çš„ç½‘é¡µä¸­ï¼Œå›¾æ ‡å°±æ¸²æŸ“å‡ºæ¥äº†ã€‚</p><p>å¾ˆç¥å¥‡çš„æ˜¯ï¼ŒçŸ¢é‡å›¾æ ‡è·Ÿæ™®é€šçš„å­—ä½“æ˜¯å®Œå…¨ç±»ä¼¼çš„ï¼Œä½ å¯ä»¥é€šè¿‡CSSå®šä¹‰å›¾æ ‡çš„é¢œè‰²ï¼ˆ<code>color</code>ï¼‰ã€å¤§å°ï¼ˆ<code>font-size</code>ï¼‰ç­‰æ ·å¼ã€‚</p><p>å°è¯•ä¸€ä¸‹ã€‚å°†å›¾æ ‡ä»£ç æ·»åŠ åˆ°<code>templates/article/list.html</code>ä¸­çš„åˆ—è¡¨å¾ªç¯ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/list.html...<span class="token comment">&lt;!-- æ³¨è„š --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- é™„åŠ ä¿¡æ¯ï¼Œå¢åŠ äº†å›¾æ ‡ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fas fa-eye<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> lightskyblue<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>        &#123;&#123; article.total_views &#125;&#125;<span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span><span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span><span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fas fa-comments<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> yellowgreen<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- ä¿®æ”¹ä¸ºè¯„è®ºçš„è®¡æ•° --></span>        &#123;&#123; article.comments.count &#125;&#125;<span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span><span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span><span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fas fa-clock<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> pink<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>        &#123;&#123; article.created|date:'Y-m-d' &#125;&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>çœ‹çœ‹æ•ˆæœï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190411/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE196.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190411/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE196.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>å¥½ç©å§ã€‚è¯»è€…æœ‹å‹æ…¢æ…¢æŒ‘é€‰å¿ƒä»ªçš„å›¾æ ‡ï¼Œåˆ°è‡ªå·±çš„åšå®¢ä¸­å§ã€‚</p><p>ç›¸æ¯”å†™ä»£ç æ¥è¯´ï¼Œè¿™æ˜¯ä¸ªç›¸å½“æ„‰æ‚¦çš„è¿‡ç¨‹ã€‚</p><h2 id="é¡µè„šæ²‰åº•"><a href="#é¡µè„šæ²‰åº•" class="headerlink" title="é¡µè„šæ²‰åº•"></a>é¡µè„šæ²‰åº•</h2><p>åˆšæ‰åšæµ®åŠ¨æŒ‰é’®æ—¶ï¼Œå–æ¶ˆäº†é¡µè„šå›ºå®šåœ¨åº•éƒ¨çš„<code>fixed-bottom</code>ã€‚</p><p>æŒ‰é’®å€’æ˜¯æ²¡è¢«é®ç›–äº†ï¼Œä½†åˆå†’å‡ºæ¥å¦ä¸€ä¸ªçƒ¦äººçš„é—®é¢˜ï¼Œè¯·çœ‹ä¸‹å›¾ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190411/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE197.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190411/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE197.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>å½“é¡µé¢å†…å®¹è¾ƒå°‘æ—¶ï¼Œé¡µè„šä¸‹æ–¹å±…ç„¶ç©ºå‡ºæ¥ä¸€å¤§å—åœ°æ–¹ï¼Œå¤ªä¸‘äº†ã€‚</p><blockquote><p><a href="https://css-tricks.com/couple-takes-sticky-footer/">ã€ŠSticky Footer, Five Waysã€‹</a>ç½—åˆ—äº†5ç§æ–¹æ³•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯æ·±å…¥äº†è§£ã€‚</p></blockquote><p>éœ€è¦ä¿®æ”¹<code>base.html</code>å’Œ<code>footer.html</code>ä¸¤ä¸ªæ–‡ä»¶ã€‚å…ˆè´´æ”¹åŠ¨ä»£ç ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/base.html...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    &#123;% include 'header.html' %&#125;        <span class="token comment">&lt;!-- æ–°å¢ä¸¤ä¸ª div å®¹å™¨ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        &#123;% block content %&#125;&#123;% endblock content %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>push<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    &#123;% include 'footer.html' %&#125;    ...        <span class="token comment">&lt;!-- å¢åŠ æ ·å¼ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">        <span class="token selector">html, body</span> <span class="token punctuation">&#123;</span>            <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>            <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token selector">#wrapper</span> <span class="token punctuation">&#123;</span>            <span class="token property">min-height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>            <span class="token property">margin-bottom</span><span class="token punctuation">:</span> -60px<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token selector">#footer,        #push</span> <span class="token punctuation">&#123;</span>            <span class="token property">height</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/footer.html...<span class="token comment">&lt;!-- å¢åŠ  id="footer" å±æ€§ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span> <span class="token attr-name">...</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>footer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    ...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»£ç é€šè¿‡CSSæ ·å¼æ§åˆ¶é¡µé¢å°ºå¯¸ä¸å°äºå±å¹•çš„é«˜åº¦ï¼Œä»¥åŠé¡µè„šçš„é«˜åº¦ä¸º60pxã€‚ä¸å¤ªå¥½ç†è§£çš„ä¸»è¦æœ‰ä¸¤ä¸ªåœ°æ–¹ï¼š</p><ul><li><code>#push</code>å®¹å™¨ç•™å‡ºä¸€æ®µä¸é¡µè„šç­‰é«˜çš„ç©ºéš™ï¼Œé¿å…æ­£æ–‡å†…å®¹ä¸é¡µè„šé‡å ã€‚</li><li><code>#wrapper</code>å®¹å™¨çš„åº•éƒ¨æœ‰ä¸€ä¸ªè´Ÿè¾¹è·ï¼Œä½œç”¨æ˜¯ç»™é¡µè„šå®¹å™¨è®©å‡ºä½ç½®ã€‚è¿™ä¸ªè´Ÿè¾¹è·ä½ ä¸è®¾ç½®ä¹Ÿå¯ä»¥ï¼Œæ— éå°±æ˜¯åº•éƒ¨å¤šå‡ºé«˜åº¦ä¸º<code>60px</code>çš„ç©ºç™½ç½¢äº†ã€‚</li></ul><p>åˆ·æ–°é¡µé¢ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190411/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE198.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190411/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE198.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>èˆ’æœäº†ã€‚</p><blockquote><p>éšç€é¡¹ç›®é€æ¸å¢å¤§ï¼ŒHTMLã€JavaScriptã€CSSäº¤ç»‡åœ¨ä¸€èµ·ï¼Œä¹Ÿæ›´åŠ æ··ä¹±ã€‚</p><p>è™½ç„¶æ•™ç¨‹æ²¡æœ‰æŠŠè¿™ä¸‰ç§ç±»å‹çš„ä»£ç åˆ†ç¦»å¼€ï¼Œä½†æ˜¯ä½ åº”è¯¥è€ƒè™‘è¿™æ ·åšã€‚</p></blockquote><h2 id="ç²˜æ€§ä¾§è¾¹æ "><a href="#ç²˜æ€§ä¾§è¾¹æ " class="headerlink" title="ç²˜æ€§ä¾§è¾¹æ "></a>ç²˜æ€§ä¾§è¾¹æ </h2><p>ç›®å‰æ•™ç¨‹å°†<strong>æ–‡ç« ç›®å½•</strong>æ”¾ç½®åœ¨æ–‡ç« çš„å³ä¾§ï¼Œè¿™å°±æ˜¯ç›¸å½“äºæ˜¯ä¸ªä¾§è¾¹æ ã€‚é—®é¢˜æ˜¯å½“ç”¨æˆ·å‘ä¸‹é˜…è¯»æ–‡ç« æ—¶ï¼Œç›®å½•å´ä¸ä¼šå›ºå®šåœ¨é¡µé¢ä¸­ï¼Œè€Œæ˜¯å‡ ä¸‹å°±ç¿»å¾—æ²¡å½±äº†ï¼Œå½±å“ä½“éªŒã€‚</p><p><strong>ç²˜æ€§ä¾§è¾¹æ </strong>å°±æ˜¯æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚å½“é¡µé¢å‘ä¸‹æ»šåŠ¨æ—¶ï¼Œç²˜æ€§ä¾§è¾¹æ ä¼šçµæ´»çš„å›ºå®šåœ¨å±å¹•ä¸­ï¼Œä¿è¯ç”¨æˆ·åœ¨ä»»ä½•ä½ç½®éƒ½å¯ä»¥çœ‹åˆ°ä¾§è¾¹æ ä¸­çš„å†…å®¹ã€‚</p><p>å…·ä½“å·¥ä½œæ¨¡å¼å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190411/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE199.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190411/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE199.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>è€ƒè™‘åˆ°ä¾§è¾¹æ æœ‰å¯èƒ½ä¼šå¾ˆé•¿ï¼Œå› æ­¤è®¾è®¡å‡ºè¶³å¤Ÿâ€œèªæ˜â€çš„ç²˜æ€§ä¾§è¾¹æ ä¹Ÿä¸é‚£ä¹ˆå®¹æ˜“ã€‚æ•™ç¨‹å°†ç”¨åˆ°<a href="https://github.com/abouolia">Abouolia</a>çš„<a href="https://github.com/abouolia/sticky-sidebar">ç²˜æ€§ä¾§è¾¹æ æ’ä»¶</a>ï¼Œå¼ºå¤§ä¸”å°å·§ï¼Œè¯»è€…å¯ä»¥å»<a href="https://abouolia.github.io/sticky-sidebar/">å®˜æ–¹ç¤ºä¾‹</a>æ„Ÿå—ä¸€ä¸‹ã€‚</p><p>å°†<a href="https://github.com/abouolia/sticky-sidebar">æ’ä»¶çš„GitHubåº“</a>ä¸‹è½½åˆ°æœ¬åœ°åï¼Œå› ä¸ºåšå®¢é¡¹ç›®å·²ç»åŠ è½½å¥½äº†<code>Jquery</code>ï¼Œæ‰€ä»¥åªéœ€è¦ç”¨åˆ°<code>dist</code>ç›®å½•ä¸‹çš„<code>jquery.sticky-sidebar.min.js</code>è¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥äº†ã€‚åœ¨é¡¹ç›®çš„<code>static</code>ç›®å½•ä¸‹æ–°å»ºç›®å½•<code>sticky_sidebar</code>ï¼Œå°†å…¶ç²˜è´´è¿›å»ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">/static/sticky_sidebar/jquery.sticky-sidebar.min.js<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å› ä¸ºåªéœ€è¦åœ¨<strong>æ–‡ç« è¯¦æƒ…</strong>é¡µé¢ç”¨åˆ°ï¼Œæ‰€ä»¥åœ¨è¯¦æƒ…é¡µä¸­å¼•å…¥æ¨¡å—å°±å¤Ÿç”¨äº†ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/detail.html...<span class="token comment">&lt;!-- ç›®å½• --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">...</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sidebar<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sidebar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sidebar__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">></span></span>ç›®å½•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>            &#123;&#123; toc|safe &#125;&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>...<span class="token comment">&lt;!-- ç²˜æ€§ä¾§è¾¹æ æ ·å¼ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">    <span class="token selector">.sidebar</span><span class="token punctuation">&#123;</span>        <span class="token property">will-change</span><span class="token punctuation">:</span> min-height<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.sidebar__inner</span><span class="token punctuation">&#123;</span>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token property">will-change</span><span class="token punctuation">:</span> position<span class="token punctuation">,</span> transform<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>...&#123;% block script %&#125;<span class="token comment">&lt;!-- å¼•å…¥ç²˜æ€§ä¾§è¾¹æ  --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>sticky_sidebar/jquery.sticky-sidebar.min.js<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#sidebar'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stickySidebar</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        topSpacing<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>        bottomSpacing<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>...&#123;% endblock script %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æŒ‰ç…§æ’ä»¶çš„è¦æ±‚ï¼Œä¾§è¾¹æ å¥—ä¸Šäº†<strong>ä¸¤å±‚å®¹å™¨</strong>ï¼Œç¬¬ä¸€å±‚å«æœ‰å±æ€§<code>id=&quot;sidebar&quot; class=&quot;sidebar&quot;</code>ï¼Œç¬¬äºŒå±‚å«æœ‰å±æ€§<code>class=&quot;sidebar__inner&quot;</code>ã€‚ç„¶åè®¾ç½®æ ·å¼ï¼Œå¼•å…¥é™æ€æ–‡ä»¶å¹¶è°ƒç”¨æ’ä»¶ï¼Œæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œç…§åšå°±å¯ä»¥äº†ã€‚ä¸å‰é¢çš„ç« èŠ‚ç›¸åŒï¼Œç”±äºæ’ä»¶éœ€æ±‚<strong>Jquery</strong>ï¼Œä¸€å®šè¦æŠŠ JavaScript è¯­å¥æ”¾åˆ°<code>&#123;% block script %&#125;</code>ä¸­ï¼Œå¦åˆ™ä¼šæŠ¥é”™å“¦ã€‚</p><blockquote><p>æ’ä»¶è¿˜æœ‰å…¶ä»–å¯è®¾ç½®çš„è§„åˆ™ï¼Œè¯¦æƒ…è§<a href="https://abouolia.github.io/sticky-sidebar/">å®˜æ–¹æ–‡æ¡£</a></p></blockquote><p>åˆ·æ–°é¡µé¢ï¼Œä¸ç®¡ä½ æ€ä¹ˆæ»šåŠ¨é¡µé¢ï¼Œç›®å½•éƒ½æ˜¾ç¤ºåœ¨å±å¹•ä¸­ï¼Œå¹¶ä¸”éšç€æ»šè½®å¾ˆè‡ªç„¶çš„ä¸Šä¸‹ç§»åŠ¨äº†ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190411/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE200.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190411/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE200.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« å­¦ä¹ äº†å›åˆ°é¡¶éƒ¨æµ®åŠ¨æŒ‰é’®ã€çŸ¢é‡å›¾æ ‡ã€é¡µè„šæ²‰åº•å’Œç²˜æ€§ä¾§è¾¹æ å››ä¸ªåŠŸèƒ½ã€‚</p><p>å°±åƒå‰é¢è¯´çš„ï¼Œè¿™å‡ ä¸ªåŠŸèƒ½è·ŸDjangoæ²¡ä»€ä¹ˆå…³ç³»ï¼Œä½†æ˜¯æ—¢ç„¶è¦æƒ³åšä¸€ä¸ªå®Œæ•´çš„åšå®¢ç½‘ç«™ï¼Œå°±ä¸è¦æŠ±æœ‰å¹»æƒ³ã€‚<strong>å…‰é é‚£ä¹ˆä¸€ç‚¹ç‚¹Djangoä»£ç æ˜¯ä¸å¯èƒ½çš„</strong>ï¼Œä»€ä¹ˆçŸ¥è¯†ä½ éƒ½å¾—ä¼šä¸€ç‚¹æ‰è¡Œã€‚</p><p>è¯»è€…ä»¥åä¼šé‡åˆ°æ›´åŠ å¤šæ ·çš„ç¼–ç¨‹å·¥å…·ï¼Œä¸€å®šä¸è¦è¢«â€œDjangoç¨‹åºå‘˜â€è¿™ä¸ªå¤´è¡”æ‰€æŸç¼šï¼Œå‹‡æ•¢å»å­¦å§ã€‚è°è®©ä½ å·²ç»ä¸Šäº†è´¼èˆ¹å‘¢ã€‚</p><hr><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#x64;&#x75;&#x73;&#97;&#105;&#x70;&#104;&#111;&#116;&#x6f;&#64;&#x66;&#x6f;&#120;&#x6d;&#97;&#105;&#x6c;&#x2e;&#99;&#111;&#109;">&#x64;&#x75;&#x73;&#97;&#105;&#x70;&#104;&#111;&#116;&#x6f;&#64;&#x66;&#x6f;&#120;&#x6d;&#97;&#105;&#x6c;&#x2e;&#99;&#111;&#109;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--30.å¯Œæ–‡æœ¬ç¼–è¾‘å™¨</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/30.fu-wen-ben-bian-ji-qi/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/30.fu-wen-ben-bian-ji-qi/</url>
      
        <content type="html"><![CDATA[<p>å‰é¢æˆ‘ä»¬å·²ç»å®ç°äº†ç”¨Markdownè¯­æ³•å†™æ–‡ç« äº†ã€‚ä½†æ˜¯æ–‡ç« çš„è¯„è®ºç”¨Markdownå°±ä¸å¤ªåˆé€‚äº†ï¼Œä½ ä¸èƒ½å¼ºæ±‚ç”¨æˆ·ä¹ŸèŠ±æ—¶é—´å»ç†Ÿæ‚‰è¯­æ³•å•Šã€‚å¦å¤–è¯„è®ºä¸­é€šå¸¸è¿˜æœ‰è¡¨æƒ…ã€å¸¦é¢œè‰²çš„å­—ä½“ç­‰åŠŸèƒ½ï¼Œè¿™äº›ä¹Ÿæ˜¯Markdownä¸å…·å¤‡çš„ã€‚</p><p>å› æ­¤å¯Œæ–‡æœ¬ç¼–è¾‘å™¨<a href="https://github.com/django-ckeditor/django-ckeditor">Django-ckeditor</a>å°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p><h2 id="åœ¨åå°ä½¿ç”¨Ckeditor"><a href="#åœ¨åå°ä½¿ç”¨Ckeditor" class="headerlink" title="åœ¨åå°ä½¿ç”¨Ckeditor"></a>åœ¨åå°ä½¿ç”¨Ckeditor</h2><p>åœ¨<strong>è™šæ‹Ÿç¯å¢ƒ</strong>ä¸­å®‰è£…django-ckeditorï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token operator">></span> pip <span class="token function">install</span> django-ckeditor<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å®‰è£…æˆåŠŸåè¿˜æ˜¯è€è§„çŸ©ï¼Œåœ¨<code>settings.py</code>ä¸­æ³¨å†Œappï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_blog<span class="token operator">/</span>settings<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token string">'ckeditor'</span><span class="token punctuation">,</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥éœ€è¦ä¿®æ”¹æ¨¡å‹äº†ã€‚ç”¨django-ckeditoråº“è‡ªå·±çš„å¯Œæ–‡æœ¬å­—æ®µ<code>RichTextField</code>æ›¿æ¢æ™®é€šçš„æ–‡æœ¬å­—æ®µ<code>TextField</code>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">comment<span class="token operator">/</span>models<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># django-ckeditor</span><span class="token keyword">from</span> ckeditor<span class="token punctuation">.</span>fields <span class="token keyword">import</span> RichTextField<span class="token keyword">class</span> <span class="token class-name">Comment</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># ä¹‹å‰ä¸º body = models.TextField()</span>    body <span class="token operator">=</span> RichTextField<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è®°å¾—æ¯æ¬¡ä¿®æ”¹æ¨¡å‹åè¦<strong>è¿ç§»æ•°æ®</strong>ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token operator">></span> python manage.py makemigrations<span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token operator">></span> python manage.py migrate<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä¸ºæ–¹ä¾¿æµ‹è¯•ï¼Œä¿®æ”¹<code>comment/admin.py</code>æ–‡ä»¶ï¼Œå°†è¯„è®ºæ¨¡å—æ³¨å†Œåˆ°åå°ä¸­ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">comment<span class="token operator">/</span>admin<span class="token punctuation">.</span>py<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> admin<span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> Commentadmin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>register<span class="token punctuation">(</span>Comment<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯åŠ¨æœåŠ¡å™¨ï¼Œè¿›å…¥åå°çš„è¯„è®ºé¡µé¢ï¼Œå‘ç°å·²ç»å¯ä»¥ä½¿ç”¨django-ckeditoräº†ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190321/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE178.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190321/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE178.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>åŠŸèƒ½ç›¸å½“é½å…¨ï¼Œå­—ä½“ã€å­—å·ã€é¢œè‰²ã€é“¾æ¥ã€è¡¨æƒ…åº”æœ‰å°½æœ‰ã€‚</p><p>å¦‚æœæˆ‘åªéœ€è¦éƒ¨åˆ†åŠŸèƒ½æ€ä¹ˆåŠå‘¢ï¼Ÿæ¯”å¦‚<strong>æ’å…¥flashåŠ¨ç”»</strong>åŸºæœ¬å°±ç”¨ä¸åˆ°ã€‚å¦å¤–ä¼¼ä¹ä¹Ÿæ²¡çœ‹åˆ°<strong>æ’å…¥ä»£ç å—</strong>çš„åŠŸèƒ½ã€‚</p><p><code>ckeditor</code>å…è®¸ä½ åœ¨<code>settings.py</code>ä¸­è¿›è¡Œè‡ªå®šä¹‰é…ç½®ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_blog<span class="token operator">/</span>settings<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>CKEDITOR_CONFIGS <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    <span class="token comment"># django-ckeditoré»˜è®¤ä½¿ç”¨defaulté…ç½®</span>    <span class="token string">'default'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>        <span class="token comment"># ç¼–è¾‘å™¨å®½åº¦è‡ªé€‚åº”</span>        <span class="token string">'width'</span><span class="token punctuation">:</span><span class="token string">'auto'</span><span class="token punctuation">,</span>        <span class="token string">'height'</span><span class="token punctuation">:</span><span class="token string">'250px'</span><span class="token punctuation">,</span>        <span class="token comment"># tabé”®è½¬æ¢ç©ºæ ¼æ•°</span>        <span class="token string">'tabSpaces'</span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span>        <span class="token comment"># å·¥å…·æ é£æ ¼</span>        <span class="token string">'toolbar'</span><span class="token punctuation">:</span> <span class="token string">'Custom'</span><span class="token punctuation">,</span>        <span class="token comment"># å·¥å…·æ æŒ‰é’®</span>        <span class="token string">'toolbar_Custom'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>            <span class="token comment"># è¡¨æƒ… ä»£ç å—</span>            <span class="token punctuation">[</span><span class="token string">'Smiley'</span><span class="token punctuation">,</span> <span class="token string">'CodeSnippet'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>             <span class="token comment"># å­—ä½“é£æ ¼</span>            <span class="token punctuation">[</span><span class="token string">'Bold'</span><span class="token punctuation">,</span> <span class="token string">'Italic'</span><span class="token punctuation">,</span> <span class="token string">'Underline'</span><span class="token punctuation">,</span> <span class="token string">'RemoveFormat'</span><span class="token punctuation">,</span> <span class="token string">'Blockquote'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token comment"># å­—ä½“é¢œè‰²</span>            <span class="token punctuation">[</span><span class="token string">'TextColor'</span><span class="token punctuation">,</span> <span class="token string">'BGColor'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token comment"># é“¾æ¥</span>            <span class="token punctuation">[</span><span class="token string">'Link'</span><span class="token punctuation">,</span> <span class="token string">'Unlink'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token comment"># åˆ—è¡¨</span>            <span class="token punctuation">[</span><span class="token string">'NumberedList'</span><span class="token punctuation">,</span> <span class="token string">'BulletedList'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token comment"># æœ€å¤§åŒ–</span>            <span class="token punctuation">[</span><span class="token string">'Maximize'</span><span class="token punctuation">]</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token comment"># åŠ å…¥ä»£ç å—æ’ä»¶</span>        <span class="token string">'extraPlugins'</span><span class="token punctuation">:</span> <span class="token string">','</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'codesnippet'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨<code>toolbar_Custom</code>ä¸­å®šä¹‰éœ€è¦ä½¿ç”¨çš„åŠŸèƒ½æ¨¡å—ï¼›æ²¡åˆ—å‡ºçš„åŠŸèƒ½å°±ä¸å†æ˜¾ç¤ºäº†ã€‚ä»£ç å—åŠŸèƒ½æ˜¯ç¼–è¾‘å™¨è‡ªå¸¦çš„æ’ä»¶ï¼Œéœ€è¦åœ¨<code>extraPlugins</code>ä¸­æŒ‡å®šä½¿ç”¨ã€‚æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190321/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE180.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190321/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE180.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ç¼–è¾‘å¯Œæ–‡æœ¬æå®šåï¼Œè¿˜éœ€è¦åœ¨å‰å°ç•Œé¢ä¸­å±•ç¤ºå‡ºæ¥ã€‚å¯Œæ–‡æœ¬æ˜¯ä»¥ç±»ä¼¼<code>html</code>çš„æ ¼å¼è¿›è¡Œä¿å­˜çš„ï¼Œå› æ­¤è¿˜è¦åœ¨å±•ç¤ºè¯„è®ºçš„ä»£ç åŠ å…¥<code>|safe</code>è¿‡æ»¤å™¨ï¼Œé˜²æ­¢æµè§ˆå™¨è¿›è¡Œè½¬ä¹‰ã€‚</p><p>ä¿®æ”¹<code>detail.html</code>ä¸­å±•ç¤ºè¯„è®ºçš„éƒ¨åˆ†ä»£ç ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/detail.html...<span class="token comment">&lt;!-- æ˜¾ç¤ºè¯„è®º --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">></span></span>å…±æœ‰&#123;&#123; comments.count &#125;&#125;æ¡è¯„è®º<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>    &#123;% for comment in comments %&#125;        ...        <span class="token comment">&lt;!-- ä¿®æ”¹è¿™é‡Œ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>&#123;&#123; comment.body|safe &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    &#123;% endfor %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿›å…¥æ–‡ç« è¯¦æƒ…é¡µé¢çœ‹çœ‹æ•ˆæœï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190321/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE181.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190321/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE181.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><h2 id="ä»£ç é«˜äº®"><a href="#ä»£ç é«˜äº®" class="headerlink" title="ä»£ç é«˜äº®"></a>ä»£ç é«˜äº®</h2><p>ä»£ç é«˜äº®éœ€è¦æ·»åŠ é¢å¤–çš„æ’ä»¶<strong>Prism</strong>ã€‚åœ¨<a href="https://ckeditor.com/cke4/addon/prism">Prism</a>æ’ä»¶å®˜æ–¹é¡µé¢ä¸‹è½½ï¼ˆä¹Ÿå¯ä»¥ç‚¹å‡»<a href="https://download.ckeditor.com/prism/releases/prism_1.0.1.zip">è¿™é‡Œ</a>ç›´æ¥ä¸‹è½½ï¼‰åï¼Œå°†è§£å‹å‡ºæ¥çš„<code>prism</code>æ”¾åˆ°é™æ€æ–‡ä»¶ç›®å½• <code>static\ckeditor\ckeditor\plugins\prism</code> ä¸­ã€‚</p><blockquote><p>ä¹Ÿå¯ä»¥å°†å…¶æ”¾åˆ° <code>env\Lib\site-packages\ckeditor\static\ckeditor\ckeditor\plugins</code> ç›®å½•ï¼Œ<strong>env</strong>æ˜¯ä½ åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒçš„ç›®å½•ã€‚ä¹‹å‰ä½ å®‰è£…çš„æ‰€æœ‰åº“éƒ½åœ¨è¿™ä¸ªenvç›®å½•ä¸­çš„ã€‚ä¸æ¨èã€‚</p></blockquote><p>ç„¶ååœ¨<a href="https://prismjs.com/download.html#themes=prism-okaidia&languages=markup+css+clike+javascript+python&plugins=line-numbers">Prismå®˜ç½‘</a>é€‰æ‹©ä¸»é¢˜ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190321/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE185_%E6%8B%B7%E8%B4%9D.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190321/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE185_%E6%8B%B7%E8%B4%9D.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><ul><li>æ ¹æ®å–œå¥½é€‰æ‹©ä¸€ä¸ªå–œæ¬¢çš„ä¸»é¢˜</li><li>ç„¶åé€‰æ‹©éœ€è¦é«˜äº®çš„è¯­è¨€ã€‚ä¸æ¸…æ¥šå°±å¯ä»¥å…¨é€‰</li><li>å‹¾é€‰è¡Œå·æ’ä»¶</li><li>æœ€åç‚¹å‡»<code>DOWNLOAD CSS</code>ä¸‹è½½æ ·å¼</li></ul><p>åœ¨<code>static</code>ç›®å½•ä¸­æ–°å»º<code>prism</code>ç›®å½•ï¼Œå°†ä¸‹è½½å¥½çš„CSSæ–‡ä»¶æ”¾è¿›å»ã€‚</p><blockquote><p>æ³¨æ„è¿™é‡Œçš„staticæ˜¯é¡¹ç›®ä¸­çš„é™æ€æ–‡ä»¶ç›®å½•ï¼ˆä¸å‰é¢çš„ç« èŠ‚ç›¸åŒï¼‰ï¼Œè€Œä¸æ˜¯envæ–‡ä»¶å¤¹ä¸­çš„staticç›®å½•ã€‚</p></blockquote><p>ç„¶ååœ¨éœ€è¦ä»£ç é«˜äº®çš„<strong>æ¨¡æ¿æ–‡ä»¶</strong>ä¸­å¼•ç”¨prismçš„é™æ€æ–‡ä»¶ï¼Œå¯¹ä»£ç è¿›è¡Œæ¸²æŸ“ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/detail.html...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>ckeditor/ckeditor/plugins/prism/lib/prism/prism_patched.min.js<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>prism/prism.css<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å°†<strong>Prism</strong>ã€<strong>widget</strong>ã€<strong>lineutils</strong>æ’ä»¶æ·»åŠ åˆ°é…ç½®æ–‡ä»¶ä¸­ã€‚åé¢ä¸¤ä¸ªç¼–è¾‘å™¨è‡ªå¸¦ï¼Œä¸ç”¨å•ç‹¬ä¸‹è½½ï¼Œæ·»ä¸Šå°±å¯ä»¥äº†ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_blog<span class="token operator">/</span>settings<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>CKEDITOR_CONFIGS <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    <span class="token string">'default'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token comment"># æ·»åŠ  Prism ç›¸å…³æ’ä»¶</span>        <span class="token string">'extraPlugins'</span><span class="token punctuation">:</span> <span class="token string">','</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'codesnippet'</span><span class="token punctuation">,</span> <span class="token string">'prism'</span><span class="token punctuation">,</span> <span class="token string">'widget'</span><span class="token punctuation">,</span> <span class="token string">'lineutils'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·å°±å®Œæˆäº†ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190321/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE184.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190321/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE184.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ä»£ç é«˜äº®æ•ˆæœä¸é”™ï¼</p><h2 id="åœ¨å‰å°ä½¿ç”¨Ckeditor"><a href="#åœ¨å‰å°ä½¿ç”¨Ckeditor" class="headerlink" title="åœ¨å‰å°ä½¿ç”¨Ckeditor"></a>åœ¨å‰å°ä½¿ç”¨Ckeditor</h2><p>ä¸ºäº†è®©ç”¨æˆ·åœ¨å‰å°ä¹Ÿèƒ½ä½¿ç”¨å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œè¿˜å¾—å¯¹ä»£ç ç¨åŠ æ”¹åŠ¨ã€‚</p><p>é¦–å…ˆéœ€è¦æŠŠè¯„è®ºçš„è¡¨å•ä¼ é€’åˆ°æ–‡ç« è¯¦æƒ…é¡µé¢ä¸­ã€‚å› æ­¤ä¿®æ”¹<code>article_detail</code>è§†å›¾ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># å¼•å…¥è¯„è®ºè¡¨å•</span><span class="token keyword">from</span> comment<span class="token punctuation">.</span>forms <span class="token keyword">import</span> CommentForm<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># æ–‡ç« è¯¦æƒ…</span><span class="token keyword">def</span> <span class="token function">article_detail</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token comment"># å¼•å…¥è¯„è®ºè¡¨å•</span>    comment_form <span class="token operator">=</span> CommentForm<span class="token punctuation">(</span><span class="token punctuation">)</span>    context <span class="token operator">=</span> <span class="token punctuation">&#123;</span>         <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token string">'comment_form'</span><span class="token punctuation">:</span> comment_form<span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åå°†<code>detail.html</code>åŸæ¥è¯„è®ºè¡¨å•ä¸­çš„æ­£æ–‡éƒ¨åˆ†ï¼ˆå³å‰é¢ç« èŠ‚å†™çš„<code>&lt;textarea&gt;</code>ï¼‰æ›¿æ¢å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/detail.html...<span class="token comment">&lt;!-- å‘è¡¨è¯„è®º --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">...</span><span class="token punctuation">></span></span>&#123;% csrf_token %&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>body<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- å°†ä¹‹å‰çš„&lt;textarea>æ›¿æ¢æ‰ --></span>        <span class="token comment">&lt;!-- &lt;textarea type="text"                        class="form-control"                        id="body"                        name="body"                        rows="2">&lt;/textarea>  --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>            &#123;&#123; comment_form.media &#125;&#125;            &#123;&#123; comment_form.body &#125;&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- æäº¤æŒ‰é’® --></span>    ...                   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­çš„<code>comment_form.media</code>æ˜¯ç¼–è¾‘å™¨è‡ªèº«çš„æ¸²æŸ“ä»£ç ï¼Œ<code>comment_form.body</code>åˆ™æ˜¯è¯„è®ºæ­£æ–‡å­—æ®µã€‚</p><p>çœ‹çœ‹æ•ˆæœï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190321/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE188.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190321/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE188.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ä¸é”™ï¼Œç¼–è¾‘å™¨å·²ç»å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ï¼Œä½†è¿˜æœ‰ä¸€ä¸ªå°é—®é¢˜ï¼šä¼¼ä¹ç¼–è¾‘å™¨å®½åº¦æ²¡æœ‰è‡ªé€‚åº”ï¼Œå³è¾¹å¤§ç‰‡ç™½ç™½çš„ç©ºé—´ä¹Ÿå¤ªæµªè´¹äº†ã€‚ç»§ç»­åŠªåŠ›ã€‚</p><h2 id="å®½åº¦è‡ªé€‚åº”"><a href="#å®½åº¦è‡ªé€‚åº”" class="headerlink" title="å®½åº¦è‡ªé€‚åº”"></a>å®½åº¦è‡ªé€‚åº”</h2><p>é¦–å…ˆåœ¨é…ç½®æ–‡ä»¶ä¸­å°†å®½åº¦è®¾ç½®ä¸º<code>auto</code>ï¼Œè¿™ä¸€æ­¥æˆ‘ä»¬å·²ç»åšå¥½äº†ã€‚</p><p>Ckeditorç¼–è¾‘å™¨æœ¬èº«æœ‰ä¸€ä¸ª<code>inline-block</code>çš„æ ·å¼ï¼Œé˜»ç¢äº†è‡ªé€‚åº”æ•ˆæœï¼Œéœ€è¦ç”¨<code>Jquery</code>è¯­æ³•å°†å…¶æ¸…é™¤æ‰ã€‚åœ¨è¯¦æƒ…é¡µé¢åº•éƒ¨åŠ å…¥ä»£ç ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/detail.html<span class="token comment">&lt;!-- æ³¨æ„è¿™æ˜¯é”™è¯¯çš„ç¤ºèŒƒï¼ --></span>...<span class="token comment">&lt;!-- æ–°å¢ä»£ç  --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".django-ckeditor-widget"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- è¿™ä¸ªå·²ç»æœ‰äº† --></span>&#123;% endblock content %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>$</code>ç¬¦å·ä»£è¡¨Jqueryè¯­å¥ã€‚è¿™å¥çš„æ„æ€æ˜¯ï¼šæ‰¾åˆ°é¡µé¢ä¸­<code>class=&#39;django-ckeditor-widget&#39;</code>çš„å®¹å™¨ï¼Œç„¶ååˆ é™¤è¿™ä¸ªå®¹å™¨çš„<code>style</code>å±æ€§ã€‚</p><p><strong>çœ‹ä¼¼æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œç„¶è€ŒBugè—åœ¨ç»†èŠ‚ä¸­</strong>ã€‚æ³¨æ„è¿™æ˜¯ä¸ªJqueryè¯­å¥ï¼Œé‚£ä¹ˆå°±è¦æ±‚è¿è¡Œä¹‹å‰å…ˆè½½å…¥<code>Jquery.js</code>ã€‚ç„¶è€Œåœ¨æ¸²æŸ“é¡µé¢æ—¶ï¼ŒåŒ…å«<code>$</code>è¯­å¥çš„<code>&#123;% block content %&#125;</code>ä¼šæ’å…¥åˆ°<code>base.html</code>æ¨¡æ¿çš„<code>Jquery.js</code>æ ‡ç­¾çš„å‰é¢ï¼Œå¯¼è‡´è¯­å¥ä¸ä¼šç”Ÿæ•ˆï¼Œå¹¶ä¸”æ§åˆ¶å°ä¼šæŠ¥å‡º<code>$ is not defined</code>çš„é”™è¯¯ã€‚</p><blockquote><p>æ¯”è¾ƒå®¹æ˜“æƒ³åˆ°çš„åŠæ³•æ˜¯å°†å¼•å…¥Jquery.jsçš„æ ‡ç­¾æåˆ°æ›´é¡¶éƒ¨çš„ä½ç½®ï¼Œåœ¨blockæ¨¡æ¿æ’å…¥å‰å°±åŠ è½½ã€‚è¿™æ ·åšçš„é—®é¢˜æ˜¯JSæ–‡ä»¶åŠ è½½é€šå¸¸è¾ƒæ…¢ï¼Œå®ƒä¼šé˜»å¡åé¢çš„ä»£ç ï¼Œä»è€Œå‡ç¼“é¡µé¢æ•´ä½“åŠ è½½é€Ÿåº¦ã€‚æœ¬æ–‡ä¸é‡‡ç”¨è¿™ç§åŠæ³•ã€‚</p></blockquote><p>è§£å†³æ–¹æ¡ˆæ˜¯åœ¨<code>base.html</code>ä¸­æ–°å¢ä¸“é—¨ç”¨äºæ‹¼æ¥<code>JavaScript</code>è„šæœ¬çš„ä½ç½®ï¼Œå‘½åä¸º<code>&#123;% block script %&#125;</code>ã€‚æ³¨æ„å®ƒå¿…é¡»æ”¾ç½®åœ¨<code>Jquery</code>æ ‡ç­¾çš„åé¢ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/base.html...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    ...    <span class="token comment">&lt;!-- å·²æœ‰ä»£ç  --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>jquery/jquery-3.3.1.js<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    ...    <span class="token comment">&lt;!-- æ–°å¢ä»£ç  --></span>    &#123;% block script %&#125;&#123;% endblock script %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åå°†<code>detail.html</code>ä¸­çš„JSä»£ç æ”¾åˆ°è¿™ä¸ªå—ä¸­ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/detail.html...&#123;% block script %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".django-ckeditor-widget"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>&#123;% endblock script %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ç§æ–¹æ³•å¯ä»¥çµæ´»çš„å®šä¹‰JSè„šæœ¬çš„è¿è¡Œé¡ºåºï¼Œå¹¶ä¸”ä»£ç çœ‹èµ·æ¥æ›´åŠ æ•´æ´ã€‚æ¨èæ‰€æœ‰çš„JSä»£ç éƒ½é‡‡å–è¿™ç§æ–¹æ³•æ’å…¥ã€‚</p><p>åˆ·æ–°é¡µé¢ï¼Œç¼–è¾‘å™¨å°±èƒ½å¤Ÿå®½åº¦è‡ªé€‚åº”äº†ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190321/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE182.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190321/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE182.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>å‘è¡¨å«æœ‰ä»£ç å—çš„è¯„è®ºï¼Œè¯¦æƒ…é¡µé¢çš„æ˜¾ç¤ºå¦‚ä¸‹ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190321/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE183.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190321/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE183.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ç°åœ¨ï¼Œåšæ–‡å’Œå…¶è¯„è®ºéƒ½å¯ä»¥æ¼‚äº®çš„æ’ç‰ˆäº†ã€‚å¯¹äºæœ‰äº›ä¸å–œæ¬¢Markdownçš„äººæ¥è¯´ï¼Œç”šè‡³å¯ä»¥è¿åšæ–‡éƒ½ä½¿ç”¨<code>django-cdeditor</code>æä¾›çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ã€‚æˆ‘è‡ªå·±è¿˜æ˜¯å€¾å‘ç”¨Markdownå†™æ–‡ç« ï¼šå†™ä½œæ•ˆç‡æ¯”å¥½çœ‹æ›´é‡è¦ï¼Œå¹¶ä¸”ä¸»æµç½‘ç«™å‡ ä¹éƒ½æ”¯æŒMarkdownï¼Œå¤šå¹³å°å‘ç¨¿å¾ˆæ–¹ä¾¿ã€‚</p><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#x64;&#x75;&#115;&#x61;&#x69;&#112;&#x68;&#111;&#x74;&#111;&#64;&#x66;&#111;&#120;&#x6d;&#x61;&#105;&#x6c;&#x2e;&#x63;&#x6f;&#x6d;">&#x64;&#x75;&#115;&#x61;&#x69;&#112;&#x68;&#111;&#x74;&#111;&#64;&#x66;&#111;&#120;&#x6d;&#x61;&#105;&#x6c;&#x2e;&#x63;&#x6f;&#x6d;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul><blockquote><p>æ„Ÿè°¢<a href="http://www.aaron-zhao.com/post/1/">Aaron Zhao çš„ä¸ªäººåšå®¢</a>æä¾›äº†æœ¬æ–‡çš„å‚è€ƒã€‚åšä¸»è¿˜è®²è§£äº†django-ckeditorä¸Šä¼ å›¾ç‰‡çš„è®¾ç½®ï¼Œæœ‰å…´è¶£å¯ä»¥å‰å¾€äº†è§£ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--34.é”šç‚¹å®šä½</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/34.mao-dian-ding-wei/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/34.mao-dian-ding-wei/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>è€è¯»è€…æ³¨æ„ï¼š</strong>ä¸Šä¸€ç« <a href="https://www.dusaiphoto.com/article/detail/64/">æ¶ˆæ¯é€šçŸ¥</a>æœ‰ä¸ªbugï¼Œå³å‘ç»™ç®¡ç†å‘˜çš„<code>notify</code>å¿…é¡»ç§»åŠ¨åˆ°<code>new_comment.save()</code>çš„åé¢ï¼Œå¦åˆ™ä¼šå¯¼è‡´<code>action_object</code>å­˜å‚¨ä¸º<code>NULL</code>ï¼Œå¹¶ä¸”å¯¼è‡´æœ¬ç« çš„<code>html</code>æ‹¼æ¥é”šç‚¹å¤±æ•ˆã€‚</p><p>åŸæ–‡å·²æ›´æ­£ï¼Œä¸ºåšä¸»çš„ç–å¿½è¡¨ç¤ºæ­‰æ„ã€‚</p></blockquote><p>ä¸Šä¸€ç« å·²ç»å®ç°äº†<strong>æ¶ˆæ¯é€šçŸ¥åŠŸèƒ½</strong>ï¼Œå¯ä»¥å¾ˆäººæ€§åŒ–çš„æŠŠç”¨æˆ·å¼•å¯¼åˆ°è¢«ä»–äººå›å¤çš„é¡µé¢ä¸­å»ã€‚</p><p>ä½†æ˜¯ä»”ç»†æƒ³æƒ³ï¼Œä¼¼ä¹è¿˜æœ‰ä¸æ–¹ä¾¿çš„åœ°æ–¹ï¼šå¦‚æœé¡µé¢ä¸­è¯„è®ºè¾ƒå¤šï¼Œæƒ³æ‰¾åˆ°æ„Ÿå…´è¶£çš„é‚£ä¸€æ¡è¯„è®ºè¿˜æ˜¯è¦è´¹ç‚¹åŠŸå¤«çš„ã€‚æ‰€ä»¥è¿™ä¸ªæ¶ˆæ¯é€šçŸ¥ï¼Œæœ€å¥½æ˜¯èƒ½å¤Ÿä¸ä»…å‰å¾€æ­£ç¡®çš„é¡µé¢ï¼Œè¿˜è¦å‰å¾€æ­£ç¡®çš„ä½ç½®ï¼ˆéœ€æ±‚æ˜¯æ— ç©·æ— å°½çš„..ï¼‰ã€‚</p><p>ä¸ºäº†å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæœ¬ç« å°±è¦ä»‹ç»ä¸€ä¸ªéå¸¸å¤è€çš„åŠŸèƒ½ï¼š<strong>é”šç‚¹å®šä½</strong>ã€‚ä»¥åŠå¦‚ä½•åœ¨Djangoä¸­å®ç°å®ƒã€‚</p><h2 id="é”šç‚¹æ˜¯ä»€ä¹ˆ"><a href="#é”šç‚¹æ˜¯ä»€ä¹ˆ" class="headerlink" title="é”šç‚¹æ˜¯ä»€ä¹ˆ"></a>é”šç‚¹æ˜¯ä»€ä¹ˆ</h2><p>æˆ‘ä»¬åœ¨å†™<code>html</code>æ–‡ä»¶çš„å®¹å™¨æ—¶ï¼Œç»å¸¸ä¼šç”¨åˆ°<code>id</code>å±æ€§ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fruit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>apple<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™ä¸ª<code>id</code>å±æ€§ä¸ä»…å¯ä»¥ä½œä¸º<code>Javascript</code>æˆ–è€…<code>css</code>ä»£ç æŸ¥è¯¢æŸä¸ªå®¹å™¨çš„æ ‡è®°ï¼Œè¿˜å¯ä»¥ä½œä¸ºé”šç‚¹ï¼Œå®šä½é¡µé¢åº”è¯¥å‰å¾€çš„ä½ç½®ã€‚è¾“å…¥ä¸‹é¢çš„åœ°å€ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">http://www.myblog.com/home#fruit<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æµè§ˆå™¨å°±ä¼šæ‰“å¼€<code>home</code>é¡µé¢ï¼Œå¹¶ä¸”è§†çª—å‰å¾€<code>id=&quot;fruit&quot;</code>çš„å®¹å™¨ã€‚</p><p>æ˜ç™½äº†é”šç‚¹æ˜¯ä»€ä¹ˆï¼Œä¸‹é¢å°±é€šè¿‡<strong>ä¸‰ç§ä¸åŒçš„å®ç°æ–¹æ³•</strong>ï¼Œçœ‹çœ‹é”šç‚¹åœ¨Djangoåšå®¢é¡¹ç›®ä¸­æ˜¯å¦‚ä½•åº”ç”¨çš„ã€‚</p><h2 id="ä¸‰ç§å®ç°"><a href="#ä¸‰ç§å®ç°" class="headerlink" title="ä¸‰ç§å®ç°"></a>ä¸‰ç§å®ç°</h2><h3 id="htmlæ‹¼æ¥"><a href="#htmlæ‹¼æ¥" class="headerlink" title="htmlæ‹¼æ¥"></a>htmlæ‹¼æ¥</h3><p>é”šç‚¹é¦–å…ˆè¦å®ç°çš„åŠŸèƒ½ï¼Œå°±æ˜¯<strong>å½“ç®¡ç†å‘˜ç‚¹å‡»æ¶ˆæ¯é€šçŸ¥æ—¶ï¼Œæµè§ˆå™¨è§†çª—å‰å¾€æ­¤é€šçŸ¥çš„è¯„è®ºä½ç½®</strong>ã€‚</p><p>å› æ­¤é¦–å…ˆä¿®æ”¹æ–‡ç« è¯¦æƒ…é¡µé¢ï¼Œç»™æ¸²æŸ“è¯„è®ºçš„<code>div</code>å®¹å™¨æ·»åŠ <code>id</code>å±æ€§ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/detail.html...<span class="token comment">&lt;!-- å·²æœ‰ä»£ç ï¼Œéå†æ ‘å½¢ç»“æ„ --></span>&#123;% recursetree comments %&#125;&#123;% with comment=node %&#125;<span class="token comment">&lt;!-- å”¯ä¸€æ–°å¢ä»£ç ï¼šidå±æ€§ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>...<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment_elem_&#123;&#123; comment.id &#125;&#125;<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>    ...    <span class="token comment">&lt;!-- ä¸‹é¢éƒ½æ˜¯å·²æœ‰ä»£ç  --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>children<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        &#123;&#123; children &#125;&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    &#123;% endif %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>&#123;% endwith %&#125;&#123;% endrecursetree %&#125;...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬è¿˜æ˜¯ç”¨<code>comment.id</code>æ¥ç»™æ¯æ¡è¯„è®ºèµ‹äºˆå”¯ä¸€çš„<code>id</code>å€¼ã€‚æ³¨æ„<code>id</code>å±æ€§ä¿æŒ<strong>å”¯ä¸€æ€§</strong>ã€‚å‰é¢åœ¨äºŒçº§å›å¤çš„<strong>Modal</strong>ä¸­ç”¨äº†<code>comment_&#123;&#123; comment.id &#125;&#125;</code>ï¼Œè¿™é‡Œåƒä¸‡ä¸è¦é‡å¤äº†ã€‚</p><p>ç„¶åä¿®æ”¹é€šçŸ¥åˆ—è¡¨æ¨¡æ¿ï¼Œæ·»åŠ é”šç‚¹ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/notice/list.html...&#123;% for notice in notices %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">...</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- æ–°å¢ comment_elem_&#123;&#123; notice.action_object.id &#125;&#125; é”šç‚¹ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">"</span></span><span class="token attr-name"><span class="token namespace">notice:</span>update"</span> <span class="token attr-name">%&#125;?article_id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>&#123;&#123;</span> <span class="token attr-name">notice.target.id</span> <span class="token attr-name">&#125;&#125;&amp;notice_id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>&#123;&#123;</span> <span class="token attr-name">notice.id</span> <span class="token attr-name">&#125;&#125;#comment_elem_&#123;&#123;</span> <span class="token attr-name">notice.action_object.id</span> <span class="token attr-name">&#125;&#125;"</span>       <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span>       <span class="token punctuation">></span></span>        ...    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    ...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>&#123;% endfor %&#125;...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„è¿™é‡Œ<code>url</code>ä¸­æ‹¼æ¥äº†ä¸¤ç§ç©æ„å„¿ï¼š</p><ul><li>è·Ÿåœ¨<code>?</code>åé¢çš„æ˜¯æŸ¥è¯¢å‚æ•°ï¼Œç”¨äºç»™è§†å›¾ä¼ é€’å‚æ•°ï¼Œæ˜¯ä¹‹å‰å†™çš„æ—§ä»£ç </li><li>è·Ÿåœ¨<code>#</code>åé¢çš„æ˜¯é”šç‚¹ï¼Œä¹Ÿå°±æ˜¯æœ¬ç« æ­£åœ¨å­¦çš„ä¸œä¸œ</li></ul><p><code>?</code>å’Œ<code>#</code>ä¸€ä¸ªé‡è¦çš„å·®åˆ«ï¼Œå°±æ˜¯<code>?</code>ä¸èƒ½å¤Ÿä¼ é€’åˆ°ä¸‹ä¸ªé¡µé¢çš„<code>url</code>ä¸­å»ï¼Œè€Œ<code>#</code>å¯ä»¥ã€‚</p><p>æµ‹è¯•ä¸€ä¸‹ï¼Œç”¨æ™®é€šç”¨æˆ·è´¦å·å‘å‡ æ¡ä¸€çº§è¯„è®ºï¼Œç™»å½•ç®¡ç†å‘˜è´¦å·å¹¶ç‚¹å‡»æ¶ˆæ¯é€šçŸ¥ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190605/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE217.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190605/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE217.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>æµè§ˆå™¨è§†çª—æ²¡æœ‰åœ¨é¡µé¢é¡¶éƒ¨ï¼Œè€Œæ˜¯ç›´æ¥å‰å¾€åˆ°è¯¥æ¡è¯„è®ºå¤„ã€‚</p><p>é€šè¿‡<code>html</code>æ‹¼æ¥æ˜¯å®ç°é”šç‚¹æœ€<strong>ç®€å•ç›´æ¥</strong>çš„æ–¹æ³•ã€‚</p><h3 id="è§†å›¾æ‹¼æ¥"><a href="#è§†å›¾æ‹¼æ¥" class="headerlink" title="è§†å›¾æ‹¼æ¥"></a>è§†å›¾æ‹¼æ¥</h3><p><code>html</code>æ‹¼æ¥è™½å¥½ï¼Œä½†å®ƒä¸æ˜¯ä¸‡èƒ½çš„ã€‚å¦‚æœè¦<strong>å‰å¾€ä¸€ä¸ªå½“å‰é¡µé¢è¿˜æ²¡æœ‰åˆ›å»ºçš„å®¹å™¨</strong>ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ</p><p>ä¸¾ä¸ªæ —å­ã€‚æŒ‰ç…§ç›®å‰æˆ‘ä»¬çš„åšå®¢è®¾è®¡ï¼Œå½“ç”¨æˆ·å‘è¡¨è¯„è®ºæ—¶ï¼Œé¡µé¢ä¼šåˆ·æ–°ã€è§†çª—å°†åœç•™åœ¨æ–‡ç« è¯¦æƒ…çš„é¡¶éƒ¨ã€‚ä½†å®é™…ä¸Šè¿™æ—¶å€™è§†çª—åº”è¯¥åœç•™åœ¨æ–°å‘è¡¨çš„è¯„è®ºå¤„æ‰æ¯”è¾ƒåˆç†ï¼Œå› ä¸ºç”¨æˆ·å¯èƒ½æƒ³æ£€æŸ¥ä¸€ä¸‹è‡ªå·±å‘è¡¨çš„è¯„è®ºæ˜¯å¦æ­£ç¡®ã€‚è€Œåœ¨åŸé¡µé¢æ—¶ç”±äºæ–°è¯„è®ºéƒ½è¿˜æ²¡å‘è¡¨ï¼Œæ‰€ä»¥<code>comment.id</code>æ˜¯ä¸å­˜åœ¨çš„ï¼Œæ²¡åŠæ³•ç”¨<code>html</code>æ‹¼æ¥é”šç‚¹ã€‚è¯»è€…å¥½å¥½æ€è€ƒä¸€ä¸‹æ˜¯ä¸æ˜¯è¿™æ ·ã€‚</p><p>è¿™ç§æƒ…å†µä¸‹å°±éœ€è¦åœ¨è§†å›¾ä¸­æ‹¼æ¥é”šç‚¹äº†ã€‚ä¿®æ”¹æ–‡ç« è¯„è®ºè§†å›¾ï¼Œå°†é”šç‚¹æ‹¼æ¥åˆ°<code>redirect</code>å‡½æ•°ä¸­ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">comment<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># æ–‡ç« è¯„è®ºè§†å›¾</span><span class="token keyword">def</span> <span class="token function">post_comment</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> article_id<span class="token punctuation">,</span> parent_comment_id<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># å·²æœ‰ä»£ç </span>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">:</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token keyword">if</span> comment_form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>            <span class="token keyword">if</span> parent_comment_id<span class="token punctuation">:</span>                <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>            new_comment<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token keyword">not</span> request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>is_superuser<span class="token punctuation">:</span>                notify<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>            <span class="token comment"># æ–°å¢ä»£ç ï¼Œæ·»åŠ é”šç‚¹</span>            redirect_url <span class="token operator">=</span> article<span class="token punctuation">.</span>get_absolute_url<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'#comment_elem_'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>new_comment<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">)</span>            <span class="token comment"># ä¿®æ”¹redirectå‚æ•°</span>            <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>redirect_url<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><code>get_absolute_url()</code>æ˜¯ä¹‹å‰ç« èŠ‚å†™çš„æ–¹æ³•ï¼Œç”¨äºæŸ¥è¯¢æŸç¯‡æ–‡ç« çš„åœ°å€ã€‚</p></blockquote><p>è¯´ç™½äº†å°±æ˜¯æŠŠæ‹¼æ¥çš„ä½ç½®ä»<strong>æ¨¡æ¿</strong>æŒªåˆ°äº†<strong>è§†å›¾</strong>ä¸­ï¼Œå› ä¸ºæ–°è¯„è®ºå¿…é¡»åœ¨è§†å›¾ä¸­ä¿å­˜ä¹‹åæ‰ä¼šè¢«åˆ†é…ä¸€ä¸ª<code>id</code>å€¼ã€‚</p><h3 id="æµåŠ¨çš„æ•°æ®"><a href="#æµåŠ¨çš„æ•°æ®" class="headerlink" title="æµåŠ¨çš„æ•°æ®"></a>æµåŠ¨çš„æ•°æ®</h3><p>æœ€åæˆ‘ä»¬æ¥çœ‹ç¨å¾®å¤æ‚ç‚¹çš„æƒ…å†µã€‚</p><p>å½“ç”¨æˆ·å‘è¡¨ä¸€çº§è¯„è®ºæ—¶ï¼Œæˆ‘ä»¬åœ¨è§†å›¾ä¸­æ‹¼æ¥é”šç‚¹è§£å†³äº†åˆ·æ–°å½“å‰é¡µé¢å¹¶å®šä½çš„é—®é¢˜ã€‚ä½†æ˜¯<strong>äºŒçº§è¯„è®º</strong>æ˜¯é€šè¿‡<code>iframe + ajax</code>å®ç°çš„ï¼Œè¿™åˆè¯¥æ€ä¹ˆåŠï¼Ÿ</p><p>ç†ä¸€ç†æ€è·¯ã€‚</p><p>é¦–å…ˆï¼Œæ–°è¯„è®ºçš„<code>id</code>å€¼æ˜¯åœ¨è§†å›¾ä¸­åˆ›å»ºçš„ï¼Œä½†æ˜¯ç”±äºè§†å›¾æ˜¯ä»<code>iframe</code>ä¸­è¯·æ±‚çš„ï¼Œåœ¨è§†å›¾ä¸­æ²¡åŠæ³•åˆ·æ–°<code>iframe</code>çš„çˆ¶é¡µé¢ã€‚æ‰€ä»¥æˆ‘ä»¬å”¯ä¸€èƒ½åšçš„å°±æ˜¯<strong>æŠŠæ•°æ®ä¼ é€’å‡ºå»</strong>ï¼Œåˆ°å‰ç«¯å»å¤„ç†ã€‚</p><p>ä¿®æ”¹æ–‡ç« è¯„è®ºè§†å›¾ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">comment<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token comment"># å¼•å…¥JsonResponse</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>http <span class="token keyword">import</span> JsonResponse<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># æ–‡ç« è¯„è®ºè§†å›¾</span><span class="token keyword">def</span> <span class="token function">post_comment</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> article_id<span class="token punctuation">,</span> parent_comment_id<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    article <span class="token operator">=</span> get_object_or_404<span class="token punctuation">(</span>ArticlePost<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token operator">=</span>article_id<span class="token punctuation">)</span>    <span class="token comment"># å·²æœ‰ä»£ç </span>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">:</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token keyword">if</span> comment_form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>            <span class="token keyword">if</span> parent_comment_id<span class="token punctuation">:</span>                <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>                <span class="token comment"># ä¿®æ”¹æ­¤å¤„ä»£ç </span>                <span class="token comment"># return HttpResponse("200 OK")</span>                <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token string">"200 OK"</span><span class="token punctuation">,</span> <span class="token string">"new_comment_id"</span><span class="token punctuation">:</span> new_comment<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ–°å¼•å…¥çš„<code>JsonResponse</code>è¿”å›çš„æ˜¯<code>json</code>æ ¼å¼çš„æ•°æ®ï¼Œç”±å®ƒå°†æ–°è¯„è®ºçš„<code>id</code>ä¼ é€’å‡ºå»ã€‚</p><blockquote><p>jsonæ˜¯webå¼€å‘ä¸­å¾ˆå¸¸ç”¨çš„è½»é‡çº§æ•°æ®æ ¼å¼ï¼Œéå¸¸åƒpythonçš„å­—å…¸ï¼Œè¯»è€…è¯·è‡ªè¡Œäº†è§£ã€‚</p><p>ç‰¹åˆ«æé†’jsonæ ¼å¼å¿…é¡»ç”¨åŒå¼•å·ã€‚</p></blockquote><p>ç°åœ¨æ•°æ®åœ¨<code>iframe</code>ä¸­äº†ã€‚ä½†æ˜¯æˆ‘ä»¬éœ€è¦åˆ·æ–°çš„æ˜¯<code>iframe</code>çš„çˆ¶é¡µé¢å•Šï¼Œæ‰€ä»¥è¿˜è¦**ç»§ç»­æŠŠæ•°æ®å¾€çˆ¶é¡µé¢â€œæ‰”â€**ã€‚</p><p>ä¿®æ”¹äºŒçº§è¯„è®ºçš„æ¨¡æ¿ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/comment/reply.html...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><span class="token operator">...</span><span class="token keyword">function</span> <span class="token function">confirm_submit</span><span class="token punctuation">(</span><span class="token parameter">article_id<span class="token punctuation">,</span> comment_id</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token operator">...</span>    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token operator">...</span>        <span class="token comment">// æˆåŠŸå›è°ƒå‡½æ•°</span>        <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                        <span class="token comment">// æ—§ä»£ç </span>            <span class="token comment">// if(e === '200 OK')&#123;</span>            <span class="token comment">//     parent.location.reload();</span>            <span class="token comment">// &#125;;</span>                        <span class="token comment">// æ–°ä»£ç </span>            <span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token string">'200 OK'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token comment">// è°ƒç”¨çˆ¶é¡µé¢çš„å‡½æ•°</span>                parent<span class="token punctuation">.</span><span class="token function">post_reply_and_show_it</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>new_comment_id<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç”±äºç°åœ¨ajaxè·å–çš„æ˜¯jsonæ•°æ®ï¼Œå› æ­¤ç”¨<code>e.code</code>è·å–è§†å›¾è¿”å›çš„çŠ¶æ€ã€‚</p><p>æ—§ä»£ç ç”¨<code>parent.location.reload()</code>åˆ·æ–°äº†çˆ¶é¡µé¢ã€‚åŒæ ·çš„ï¼Œç”¨<code>parent.abc()</code>å¯ä»¥è°ƒç”¨çˆ¶é¡µé¢çš„<code>abc()</code>å‡½æ•°ã€‚è¿™æ ·å°±æŠŠæ•°æ®ä¼ é€’åˆ°çˆ¶é¡µé¢é‡Œå»äº†ã€‚</p><p>è¿™ä¸‹å°±å¥½è¯´äº†ã€‚åœ¨çˆ¶é¡µé¢ä¸­ï¼ˆæ–‡ç« è¯¦æƒ…æ¨¡æ¿ï¼‰æ·»åŠ éœ€è¦æ‰§è¡Œé”šç‚¹æ‹¼æ¥çš„å‡½æ•°ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/detail.html...&#123;% block script %&#125;...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token operator">...</span>    <span class="token comment">// æ–°å¢å‡½æ•°ï¼Œå¤„ç†äºŒçº§å›å¤</span>    <span class="token keyword">function</span> <span class="token function">post_reply_and_show_it</span><span class="token punctuation">(</span><span class="token parameter">new_comment_id</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">let</span> next_url <span class="token operator">=</span> <span class="token string">"&#123;% url 'article:article_detail' article.id %&#125;"</span><span class="token punctuation">;</span>        <span class="token comment">// å»é™¤ url å°¾éƒ¨ '/' ç¬¦å·</span>        next_url <span class="token operator">=</span> next_url<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>next_url<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'/'</span> <span class="token operator">?</span> next_url<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">:</span> next_url<span class="token punctuation">;</span>        <span class="token comment">// åˆ·æ–°å¹¶å®šä½åˆ°é”šç‚¹</span>        window<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>next_url <span class="token operator">+</span> <span class="token string">"#comment_elem_"</span> <span class="token operator">+</span> new_comment_id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>&#123;% endblock script %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å‡½æ•°ä¸­è¿ç”¨äº†<strong>JavaScript</strong>çš„<strong>ä¸‰å…ƒè¿ç®—ç¬¦</strong><code>a ? b : c</code>ï¼Œç¿»è¯‘æˆäººè¯å°±æ˜¯ï¼šå¦‚æœ<code>a</code>æˆç«‹åˆ™è¿”å›<code>b</code>ï¼Œå¦‚æœ<code>a</code>ä¸æˆç«‹å°±è¿”å›<code>c</code>ã€‚ä½œç”¨æ˜¯å»æ‰<code>url</code>å°¾éƒ¨çš„<code>/</code>ï¼Œå¦åˆ™é”šç‚¹ä¸ä¼šç”Ÿæ•ˆã€‚ä½ å¯èƒ½ä¼šé—®ï¼Œä¸‰å…ƒè¿ç®—ç¬¦å¤šéº»çƒ¦ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥æŠŠ<code>url</code>æœ«å°¾ä¸€ä¸ªå­—ç¬¦å‰”é™¤æ‰å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è¿™æ ·å†™ä»£ç æ›´åŠ å¥å£®ã€‚ä¸‡ä¸€å“ªå¤©Djangoè§£æçš„<code>url</code>å°¾éƒ¨æ²¡æœ‰æ–œæ äº†å‘¢ã€‚</p><p><code>window.location.replace()</code>ä½œç”¨æ˜¯é‡å®šå‘é¡µé¢ï¼Œåœ¨è¿™é‡Œé¢ç»ˆäºå¯ä»¥æ„‰å¿«çš„æ‹¼æ¥é”šç‚¹äº†ã€‚</p><p>ä¸€åˆ‡éƒ½OKå•¦ã€‚æµ‹è¯•å‘è¡¨äºŒçº§è¯„è®ºï¼Œè¿æ°”å¥½çš„åŒå­¦åº”è¯¥å¯ä»¥é¡ºåˆ©å°†è§†çª—å®šä½åˆ°åˆšè¯„è®ºçš„ä½ç½®äº†ã€‚</p><p>æ„Ÿå—åˆ°æ•°æ®çš„æµåŠ¨æ²¡æœ‰ï¼Ÿ</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« å­¦ä¹ äº†é”šç‚¹çš„htmlæ‹¼æ¥ã€è§†å›¾æ‹¼æ¥ã€ajax+iframeç»¼åˆè¿ç”¨ï¼Œç†è§£åå°±èƒ½åº”ä»˜ç»å¤§éƒ¨åˆ†çš„çŠ¶å†µäº†ã€‚</p><p>é”šç‚¹è™½ç„¶å¤è€ï¼Œä½†å¹¶ä¸é™ˆæ—§ã€‚</p><p>åˆç†çš„è¿ç”¨é”šç‚¹ï¼Œå¯ä»¥è®©ä½ çš„åšå®¢ç›¸å½“çš„äººæ€§åŒ–ï¼Œè¿™ä¹Ÿæ˜¯å¥½ç½‘ç«™çš„ä¸€ä¸ªæ ‡å¿—ã€‚</p><hr><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#x64;&#x75;&#x73;&#x61;&#x69;&#x70;&#x68;&#111;&#116;&#x6f;&#64;&#x66;&#111;&#120;&#109;&#x61;&#x69;&#108;&#46;&#99;&#x6f;&#109;">&#x64;&#x75;&#x73;&#x61;&#x69;&#x70;&#x68;&#111;&#116;&#x6f;&#64;&#x66;&#111;&#120;&#109;&#x61;&#x69;&#108;&#46;&#99;&#x6f;&#109;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--36.è‡ªåŠ¨åŒ–æµ‹è¯•</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/36.zi-dong-hua-ce-shi/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/36.zi-dong-hua-ce-shi/</url>
      
        <content type="html"><![CDATA[<p>æµ‹è¯•æ˜¯ä¼´éšç€å¼€å‘è¿›è¡Œçš„ï¼Œ<strong>å¼€å‘æœ‰å¤šä¹…ï¼Œæµ‹è¯•å°±è¦å¤šä¹…</strong>ã€‚æœ¬æ•™ç¨‹å·²ç»è¿›è¡Œäº†30å¤šç« äº†ï¼Œéƒ½æ˜¯å¦‚ä½•æµ‹è¯•çš„ï¼Ÿå½“ç„¶æ˜¯<code>runserver</code>å•¦ï¼æ¯å½“å¼€å‘æ–°åŠŸèƒ½åï¼Œéƒ½éœ€è¦è¿è¡ŒæœåŠ¡å™¨ï¼Œå‡è£…è‡ªå·±å°±æ˜¯ç”¨æˆ·ï¼Œæµ‹è¯•æ˜¯å¦è¿è¡Œæ­£å¸¸ã€‚</p><p>è¿™æ ·çš„äººå·¥æµ‹è¯•ä¼˜ç‚¹æ˜¯éå¸¸ç›´è§‚ï¼Œä½ çœ‹åˆ°çš„å’Œç”¨æˆ·çœ‹åˆ°çš„æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚ä½†æ˜¯ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼š</p><ul><li><strong>æ•ˆç‡ä½ã€‚</strong>åœ¨å¼€å‘æ—¶å¯èƒ½ä½ éœ€è¦åå¤çš„ä¿®æ”¹ä»£ç ã€æµ‹è¯•åŠŸèƒ½ï¼Œè¿™æ ·é‡å¤æŸ¥çœ‹å‡ åæ¬¡ç”šè‡³å‡ ç™¾æ¬¡ç½‘é¡µæ—¶ä¼šç›¸å½“çš„è®©äººçƒ¦èºã€‚</li><li><strong>å®¹æ˜“é—æ¼bugã€‚</strong>éšç€ä½ çš„é¡¹ç›®è¶Šæ¥è¶Šå¤æ‚ï¼Œç»„ä»¶ä¹‹é—´çš„äº¤äº’ä¹Ÿæ›´åŠ å¤æ‚ã€‚ä¿®æ”¹æŸä¸€ä¸ªç»„ä»¶å¯èƒ½ä¼šå¯¼è‡´å¦ä¸€ä¸ªç»„ä»¶å‡ºç°æ„æƒ³ä¸åˆ°çš„bugï¼Œä½†æ˜¯åœ¨äººå·¥æµ‹è¯•æ—¶å´å¾ˆéš¾æ£€æŸ¥å‡ºæ¥ï¼Œæ€»ä¸èƒ½æ¯å†™å‡ è¡Œä»£ç å°±æŠŠæ•´ä¸ªç½‘ç«™ç»Ÿç»Ÿæ£€æŸ¥ä¸€éå§ã€‚è¿‡äº†å¾ˆä¹…ä¹‹åä½ ç»ˆäºå‘ç°äº†è¿™ä¸ªbugï¼Œä½†æ­¤æ—¶ä½ å·²ç»æä¸æ¸…å®ƒæ¥æºäºä»€ä¹ˆåœ°æ–¹äº†ã€‚</li><li><strong>æœ‰çš„æµ‹è¯•ä¸æ–¹ä¾¿è¿›è¡Œã€‚</strong>æ¯”å¦‚è¯´æœ‰ä¸ªåŠŸèƒ½ï¼Œé™åˆ¶æ¯ä¸ªç”¨æˆ·æ¯å¤©å‘è¡¨è¯„è®ºä¸èƒ½è¶…è¿‡10æ¡ï¼Œäººå·¥æµ‹è¯•å°±æ˜¾å¾—æ¯”è¾ƒéº»çƒ¦ï¼Œç‰¹åˆ«æ˜¯éœ€è¦åå¤è°ƒè¯•çš„æ—¶å€™ã€‚</li></ul><p>ä¸ºäº†è§£å†³äººå·¥æµ‹è¯•çš„ç§ç§é—®é¢˜ï¼Œ<code>Django</code>å¼•å…¥äº†<code>Python</code>æ ‡å‡†åº“çš„å•å…ƒæµ‹è¯•æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯<strong>è‡ªåŠ¨åŒ–æµ‹è¯•</strong>äº†ï¼šä½ å¯ä»¥å†™ä¸€æ®µä»£ç ï¼Œè®©ä»£ç å¸®ä½ æµ‹è¯•ï¼ï¼ˆç¨‹åºå‘˜æ˜¯æœ€ä¼šå·æ‡’çš„èŒä¸š..ï¼‰ä»£ç ä¼šå¿ å®çš„å®Œæˆæµ‹è¯•ä»»åŠ¡ï¼Œå¸®åŠ©ä½ ä»ç¹é‡çš„æµ‹è¯•å·¥ä½œä¸­è§£è„±å‡ºæ¥ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•è¿˜æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p><ul><li><strong>é¢„é˜²é”™è¯¯ã€‚</strong>å½“åº”ç”¨è¿‡äºå¤æ‚æ—¶ï¼Œä»£ç çš„æ„å›¾ä¼šå˜å¾—éå¸¸ä¸æ¸…æ™°ï¼Œç”šè‡³ä½ éƒ½çœ‹ä¸æ‡‚è‡ªå·±å†™çš„ä»£ç ï¼Œè¿™æ˜¯å¾ˆå¸¸è§çš„ã€‚è€Œæµ‹è¯•å°±å¥½åƒæ˜¯ä»å†…éƒ¨å®¡æŸ¥ä»£ç ä¸€æ ·ï¼Œå¯ä»¥å¸®åŠ©ä½ å‘ç°å¾®å°çš„é”™è¯¯ã€‚</li><li><strong>æœ‰åˆ©äºå›¢é˜Ÿåä½œã€‚</strong>è‰¯å¥½çš„æµ‹è¯•ä¿è¯å…¶ä»–äººä¸ä¼šä¸å°å¿ƒç ´åäº†ä½ çš„ä»£ç ï¼ˆä¹Ÿä¿è¯ä½ ä¸ä¼šä¸å°å¿ƒå¼„ååˆ«äººçš„..ï¼‰ã€‚ç°åœ¨å·²ç»ä¸æ˜¯å•æ‰“ç‹¬æ–—å‡ºè‹±é›„çš„å¹´ä»£äº†ï¼Œæƒ³è¦æˆä¸ºä¼˜ç§€çš„Djangoç¨‹åºå‘˜ï¼Œä½ å¿…é¡»æ“…é•¿ç¼–å†™æµ‹è¯•ï¼</li></ul><p>è™½ç„¶å­¦ä¹ è‡ªåŠ¨åŒ–æµ‹è¯•ä¸ä¼šè®©ä½ çš„åšå®¢å¢åŠ ä¸€ä¸ä¸çš„åŠŸèƒ½ï¼Œä½†æ˜¯å¯ä»¥<strong>è®©ä»£ç æ›´åŠ å¼ºå£®</strong>ï¼Œæ‰€ä»¥æˆ‘è§‰å¾—å¾ˆæœ‰å¿…è¦æ‹¿å‡ºä¸€ç« æ¥ä¸“é—¨è®²è®²ã€‚</p><blockquote><p><a href="https://docs.djangoproject.com/zh-hans/2.2/intro/tutorial05/">Djangoå®˜æ–¹æ–‡æ¡£çš„ç¬¬5éƒ¨åˆ†</a>è®²æµ‹è¯•è®²å¾—éå¸¸çš„å¥½ï¼Œå¹¶ä¸”æœ‰ä¸­æ–‡ç‰ˆæœ¬ã€‚æœ¬ç« èŠ‚å°±å¤§é‡å€Ÿé‰´äº†å®˜æ–¹æ–‡æ¡£ï¼Œä¹Ÿéå¸¸éå¸¸æ¨èè¯»è€…å»æ‹œè¯»ã€‚</p></blockquote><h2 id="ç¬¬ä¸€ä¸ªæµ‹è¯•"><a href="#ç¬¬ä¸€ä¸ªæµ‹è¯•" class="headerlink" title="ç¬¬ä¸€ä¸ªæµ‹è¯•"></a>ç¬¬ä¸€ä¸ªæµ‹è¯•</h2><h3 id="ç»™æˆ‘bugï¼"><a href="#ç»™æˆ‘bugï¼" class="headerlink" title="ç»™æˆ‘bugï¼"></a>ç»™æˆ‘bugï¼</h3><p>ä¸ºäº†æ¼”ç¤ºæµ‹è¯•æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œè®©æˆ‘ä»¬é¦–å…ˆåœ¨<strong>æ–‡ç« æ¨¡å‹</strong>ä¸­å†™ä¸ªæœ‰bugçš„æ–¹æ³•ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>models<span class="token punctuation">.</span>py<span class="token keyword">from</span> django<span class="token punctuation">.</span>utils <span class="token keyword">import</span> timezone<span class="token keyword">class</span> <span class="token class-name">ArticlePost</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token keyword">def</span> <span class="token function">was_created_recently</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># è‹¥æ–‡ç« æ˜¯"æœ€è¿‘"å‘è¡¨çš„ï¼Œåˆ™è¿”å› True</span>        diff <span class="token operator">=</span> timezone<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> self<span class="token punctuation">.</span>created        <span class="token keyword">if</span> diff<span class="token punctuation">.</span>days <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token keyword">and</span> diff<span class="token punctuation">.</span>seconds <span class="token operator">&lt;</span> <span class="token number">60</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token boolean">True</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token boolean">False</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ä¸ªæ–¹æ³•ç”¨äºæ£€æµ‹å½“å‰æ–‡ç« æ˜¯å¦æ˜¯æœ€è¿‘å‘è¡¨çš„ã€‚</p><blockquote><p>è¿™ä¸ªæ–¹æ³•ç¨å¾®æ‰©å±•ä¸€ä¸‹å°±ä¼šå˜å¾—éå¸¸å®ç”¨ã€‚æ¯”å¦‚å¯ä»¥å°†åšæ–‡çš„å‘è¡¨æ—¥æœŸæ˜¾ç¤ºä¸ºâ€œåˆšåˆšâ€ã€â€œ3åˆ†é’Ÿå‰â€ã€â€œ5å°æ—¶å‰â€ç­‰ç›¸å¯¹æ—¶é—´ï¼Œç”¨æˆ·ä½“éªŒå°†å¤§æœ‰æå‡ã€‚</p></blockquote><p>ä»”ç»†çœ‹çœ‹ï¼Œå®ƒæ˜¯æ²¡åŠæ³•æ­£ç¡®åˆ¤æ–­â€œæœªæ¥â€çš„æ–‡ç« çš„ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">import</span> datetime<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">from</span> django<span class="token punctuation">.</span>utils <span class="token keyword">import</span> timezone<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">from</span> article<span class="token punctuation">.</span>models <span class="token keyword">import</span> ArticlePost<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>models <span class="token keyword">import</span> User<span class="token comment"># åˆ›å»ºä¸€ç¯‡"æœªæ¥"çš„æ–‡ç« </span><span class="token operator">>></span><span class="token operator">></span> future_article <span class="token operator">=</span> ArticlePost<span class="token punctuation">(</span>author<span class="token operator">=</span>User<span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> title<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">,</span>body<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">,</span> created<span class="token operator">=</span>timezone<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># æ˜¯å¦æ˜¯â€œæœ€è¿‘â€å‘è¡¨çš„ï¼Ÿ</span><span class="token operator">>></span><span class="token operator">></span> future_article<span class="token punctuation">.</span>was_created_recently<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token boolean">True</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœªæ¥å‘ç”Ÿçš„è‚¯å®šä¸æ˜¯æœ€è¿‘å‘ç”Ÿçš„ï¼Œå› æ­¤ä»£ç æ˜¯é”™è¯¯çš„ã€‚</p><h3 id="å†™ä¸ªæµ‹è¯•æš´éœ²bug"><a href="#å†™ä¸ªæµ‹è¯•æš´éœ²bug" class="headerlink" title="å†™ä¸ªæµ‹è¯•æš´éœ²bug"></a>å†™ä¸ªæµ‹è¯•æš´éœ²bug</h3><p>æ¥ä¸‹æ¥å°±è¦å†™æµ‹è¯•ç”¨ä¾‹ï¼Œå°†æµ‹è¯•è½¬ä¸ºè‡ªåŠ¨åŒ–ã€‚</p><p>è¿˜è®°å¾—æœ€åˆç”Ÿæˆ<strong>æ–‡ç« app</strong>æ—¶å€™çš„ç›®å½•ç»“æ„å—ï¼Ÿ</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">article â”‚  admin.py â”‚  apps.py â”‚  models.py â”‚  tests.py â”‚  views.py â”‚  __init__.py â”‚ â””â”€migrations       â””â”€ __init__.py<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ä¸ª<code>tests.py</code>å°±æ˜¯ç•™ç»™ä½ å†™æµ‹è¯•ç”¨ä¾‹çš„åœ°æ–¹äº†ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>tests<span class="token punctuation">.</span>py<span class="token keyword">from</span> django<span class="token punctuation">.</span>test <span class="token keyword">import</span> TestCase<span class="token keyword">import</span> datetime<span class="token keyword">from</span> django<span class="token punctuation">.</span>utils <span class="token keyword">import</span> timezone<span class="token keyword">from</span> article<span class="token punctuation">.</span>models <span class="token keyword">import</span> ArticlePost<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>models <span class="token keyword">import</span> User<span class="token keyword">class</span> <span class="token class-name">ArticlePostModelTests</span><span class="token punctuation">(</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">test_was_created_recently_with_future_article</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># è‹¥æ–‡ç« åˆ›å»ºæ—¶é—´ä¸ºæœªæ¥ï¼Œè¿”å› False</span>        author <span class="token operator">=</span> User<span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token string">'user'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'test_password'</span><span class="token punctuation">)</span>        author<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>        future_article <span class="token operator">=</span> ArticlePost<span class="token punctuation">(</span>            author<span class="token operator">=</span>author<span class="token punctuation">,</span>            title<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">,</span>            body<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">,</span>            created<span class="token operator">=</span>timezone<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span>            <span class="token punctuation">)</span>        self<span class="token punctuation">.</span>assertIs<span class="token punctuation">(</span>future_article<span class="token punctuation">.</span>was_created_recently<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åŸºæœ¬å°±æ˜¯æŠŠåˆšæ‰åœ¨<code>Shell</code>ä¸­çš„æµ‹è¯•ä»£ç æŠ„äº†è¿‡æ¥ã€‚æœ‰ç‚¹ä¸åŒçš„æ˜¯æœ«å°¾è¿™ä¸ª<code>assertIs</code>æ–¹æ³•ï¼Œäº†è§£<strong>â€œæ–­è¨€â€</strong>çš„åŒå­¦ä¼šå¯¹å®ƒå¾ˆç†Ÿæ‚‰ï¼šå®ƒçš„ä½œç”¨æ˜¯æ£€æµ‹æ–¹æ³•å†…çš„ä¸¤ä¸ªå‚æ•°æ˜¯å¦å®Œå…¨ä¸€è‡´ï¼Œå¦‚æœä¸æ˜¯åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œæé†’ä½ è¿™ä¸ªåœ°æ–¹æ˜¯æœ‰é—®é¢˜æ»´ã€‚</p><p>æ¥ä¸‹æ¥è¿è¡Œæµ‹è¯•ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token operator">></span> python manage.py <span class="token builtin class-name">test</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">Creating test database <span class="token keyword">for</span> alias <span class="token string">'default'</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>System check identified no issues <span class="token punctuation">(</span><span class="token number">0</span> silenced<span class="token punctuation">)</span><span class="token punctuation">.</span>F<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>FAIL<span class="token punctuation">:</span> test_was_created_recently_with_future_article <span class="token punctuation">(</span>article<span class="token punctuation">.</span>tests<span class="token punctuation">.</span>ArticlePostModelTests<span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>  File <span class="token string">"E:\django_project\my_blog\article\tests.py"</span><span class="token punctuation">,</span> line <span class="token number">19</span><span class="token punctuation">,</span> <span class="token keyword">in</span> test_was_created_recently_with_future_article    self<span class="token punctuation">.</span>assertIs<span class="token punctuation">(</span>future_article<span class="token punctuation">.</span>was_created_recently<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">)</span>AssertionError<span class="token punctuation">:</span> <span class="token boolean">True</span> <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">False</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>Ran <span class="token number">1</span> test <span class="token keyword">in</span> <span class="token number">0.</span>000sFAILED <span class="token punctuation">(</span>failures<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>Destroying test database <span class="token keyword">for</span> alias <span class="token string">'default'</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œé¢åå ‚å°±å¾ˆå¤šäº†ï¼š</p><ul><li>é¦–å…ˆæµ‹è¯•ç³»ç»Ÿä¼šåœ¨æ‰€æœ‰ä»¥<code>tests</code>å¼€å¤´çš„æ–‡ä»¶ä¸­å¯»æ‰¾æµ‹è¯•ä»£ç </li><li>æ‰€æœ‰<code>TestCase</code>çš„å­ç±»éƒ½è¢«è®¤ä¸ºæ˜¯æµ‹è¯•ä»£ç </li><li>ç³»ç»Ÿåˆ›å»ºäº†ä¸€ä¸ªç‰¹æ®Šçš„æ•°æ®åº“ä¾›æµ‹è¯•ä½¿ç”¨ï¼Œå³æ‰€æœ‰æµ‹è¯•äº§ç”Ÿçš„æ•°æ®ä¸ä¼šå¯¹ä½ è‡ªå·±çš„æ•°æ®åº“é€ æˆå½±å“</li><li>ç±»ä¸­æ‰€æœ‰ä»¥<code>test</code>å¼€å¤´çš„æ–¹æ³•ä¼šè¢«è®¤ä¸ºæ˜¯æµ‹è¯•ç”¨ä¾‹</li><li>åœ¨è¿è¡Œæµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œ<code>assertIs</code>æŠ›å‡ºå¼‚å¸¸ï¼Œå› ä¸º<code>True is not False</code></li><li>å®Œæˆæµ‹è¯•åï¼Œè‡ªåŠ¨é”€æ¯æµ‹è¯•æ•°æ®åº“</li></ul><p>æµ‹è¯•ç³»ç»Ÿæ˜ç¡®æŒ‡æ˜äº†é”™è¯¯çš„æ•°é‡ã€ä½ç½®å’Œç§ç±»ç­‰ä¿¡æ¯ï¼Œè¯·è¯»è€…ç»†ç»†å“å°ã€‚</p><h3 id="ä¿®æ­£bug"><a href="#ä¿®æ­£bug" class="headerlink" title="ä¿®æ­£bug"></a>ä¿®æ­£bug</h3><p>æ—¢ç„¶é€šè¿‡æµ‹è¯•æ‰¾åˆ°äº†bugï¼Œé‚£æ¥ä¸‹æ¥å°±è¦æŠŠä»£ç è¿›è¡Œä¿®æ­£ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>models<span class="token punctuation">.</span>py<span class="token keyword">from</span> django<span class="token punctuation">.</span>utils <span class="token keyword">import</span> timezone<span class="token keyword">class</span> <span class="token class-name">ArticlePost</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token keyword">def</span> <span class="token function">was_created_recently</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        diff <span class="token operator">=</span> timezone<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> self<span class="token punctuation">.</span>created                <span class="token comment"># if diff.days &lt;= 0 and diff.seconds &lt; 60:</span>        <span class="token keyword">if</span> diff<span class="token punctuation">.</span>days <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">and</span> diff<span class="token punctuation">.</span>seconds <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> diff<span class="token punctuation">.</span>seconds <span class="token operator">&lt;</span> <span class="token number">60</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token boolean">True</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token boolean">False</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡æ–°è¿è¡Œæµ‹è¯•ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token operator">></span> python manage<span class="token punctuation">.</span>py testCreating test database <span class="token keyword">for</span> alias <span class="token string">'default'</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>System check identified no issues <span class="token punctuation">(</span><span class="token number">0</span> silenced<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>Ran <span class="token number">1</span> test <span class="token keyword">in</span> <span class="token number">0.</span>000sOKDestroying test database <span class="token keyword">for</span> alias <span class="token string">'default'</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ¬¡ä»£ç é¡ºåˆ©é€šè¿‡äº†æµ‹è¯•ã€‚</p><p>å¯ä»¥è‚¯å®šçš„æ˜¯ï¼Œåœ¨å¾€åçš„å¼€å‘ä¸­ï¼Œè¿™ä¸ªbugä¸ä¼šå†å‡ºç°äº†ï¼Œå› ä¸ºä½ åªéœ€è¦è¿è¡Œä¸€éæµ‹è¯•ï¼Œå°±ä¼šç«‹å³å¾—åˆ°è­¦å‘Šã€‚<strong>å¯ä»¥è®¤ä¸ºé¡¹ç›®çš„è¿™ä¸€å°éƒ¨åˆ†ä»£ç æ°¸è¿œæ˜¯å®‰å…¨çš„</strong>ã€‚</p><h3 id="æ›´å…¨é¢çš„æµ‹è¯•"><a href="#æ›´å…¨é¢çš„æµ‹è¯•" class="headerlink" title="æ›´å…¨é¢çš„æµ‹è¯•"></a>æ›´å…¨é¢çš„æµ‹è¯•</h3><p>æ—¢ç„¶ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹å°±å¯ä»¥ä¿è¯ä¸€å°æ®µä»£ç æ°¸è¿œå®‰å…¨ï¼Œé‚£æˆ‘å†™ä¸€å †æµ‹è¯•å²‚ä¸æ˜¯å¯ä»¥ä¿è¯æ•´ä¸ªé¡¹ç›®æ°¸è¿œå®‰å…¨å—ï¼Ÿç¡®å®å¦‚æ­¤ï¼Œè¿™ä¸ªä¹°å–ç»å¯¹æ˜¯ä¸äºçš„ã€‚</p><p>å› æ­¤æˆ‘ä»¬ç»§ç»­å†å¢åŠ å‡ ä¸ªæµ‹è¯•ï¼Œå…¨é¢å¼ºåŒ–ä»£ç ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>tests<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>test <span class="token keyword">import</span> TestCase<span class="token keyword">import</span> datetime<span class="token keyword">from</span> django<span class="token punctuation">.</span>utils <span class="token keyword">import</span> timezone<span class="token keyword">from</span> article<span class="token punctuation">.</span>models <span class="token keyword">import</span> ArticlePost<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>models <span class="token keyword">import</span> User<span class="token keyword">class</span> <span class="token class-name">ArticlePostModelTests</span><span class="token punctuation">(</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">test_was_created_recently_with_future_article</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># è‹¥æ–‡ç« åˆ›å»ºæ—¶é—´ä¸ºæœªæ¥ï¼Œè¿”å› False</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token keyword">def</span> <span class="token function">test_was_created_recently_with_seconds_before_article</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># è‹¥æ–‡ç« åˆ›å»ºæ—¶é—´ä¸º 1 åˆ†é’Ÿå†…ï¼Œè¿”å› True</span>        author <span class="token operator">=</span> User<span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token string">'user1'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'test_password'</span><span class="token punctuation">)</span>        author<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>        seconds_before_article <span class="token operator">=</span> ArticlePost<span class="token punctuation">(</span>            author<span class="token operator">=</span>author<span class="token punctuation">,</span>            title<span class="token operator">=</span><span class="token string">'test1'</span><span class="token punctuation">,</span>            body<span class="token operator">=</span><span class="token string">'test1'</span><span class="token punctuation">,</span>            created<span class="token operator">=</span>timezone<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>seconds<span class="token operator">=</span><span class="token number">45</span><span class="token punctuation">)</span>            <span class="token punctuation">)</span>        self<span class="token punctuation">.</span>assertIs<span class="token punctuation">(</span>seconds_before_article<span class="token punctuation">.</span>was_created_recently<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">test_was_created_recently_with_hours_before_article</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># è‹¥æ–‡ç« åˆ›å»ºæ—¶é—´ä¸ºå‡ å°æ—¶å‰ï¼Œè¿”å› False</span>        author <span class="token operator">=</span> User<span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token string">'user2'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'test_password'</span><span class="token punctuation">)</span>        author<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>        hours_before_article <span class="token operator">=</span> ArticlePost<span class="token punctuation">(</span>            author<span class="token operator">=</span>author<span class="token punctuation">,</span>            title<span class="token operator">=</span><span class="token string">'test2'</span><span class="token punctuation">,</span>            body<span class="token operator">=</span><span class="token string">'test2'</span><span class="token punctuation">,</span>            created<span class="token operator">=</span>timezone<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>hours<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span>            <span class="token punctuation">)</span>        self<span class="token punctuation">.</span>assertIs<span class="token punctuation">(</span>hours_before_article<span class="token punctuation">.</span>was_created_recently<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">test_was_created_recently_with_days_before_article</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># è‹¥æ–‡ç« åˆ›å»ºæ—¶é—´ä¸ºå‡ å¤©å‰ï¼Œè¿”å› False</span>        author <span class="token operator">=</span> User<span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token string">'user3'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'test_password'</span><span class="token punctuation">)</span>        author<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>        months_before_article <span class="token operator">=</span> ArticlePost<span class="token punctuation">(</span>            author<span class="token operator">=</span>author<span class="token punctuation">,</span>            title<span class="token operator">=</span><span class="token string">'test3'</span><span class="token punctuation">,</span>            body<span class="token operator">=</span><span class="token string">'test3'</span><span class="token punctuation">,</span>            created<span class="token operator">=</span>timezone<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span>            <span class="token punctuation">)</span>        self<span class="token punctuation">.</span>assertIs<span class="token punctuation">(</span>months_before_article<span class="token punctuation">.</span>was_created_recently<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç°åœ¨æˆ‘ä»¬æ‹¥æœ‰äº†4ä¸ªæµ‹è¯•ï¼Œæ¥ä¿è¯<code>was_created_recently()</code>æ–¹æ³•å¯¹äº<strong>è¿‡å»</strong>ã€<strong>æœ€è¿‘</strong>ã€<strong>æœªæ¥</strong>ä¸­çš„4ç§æƒ…å†µéƒ½è¿”å›æ­£ç¡®çš„å€¼ã€‚ä½ è¿˜å¯ä»¥ç»§ç»­æ‰©å±•ï¼Œç›´åˆ°ä½ è§‰å¾—å®Œå…¨æ²¡æœ‰ä»»ä½•bugè—åŒ¿çš„å¯èƒ½æ€§ä¸ºæ­¢ã€‚</p><p>åœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œæœ‰äº›éš¾ç¼ çš„bugä¼šæŠŠè‡ªå·±ä¼ªè£…å¾—éå¸¸çš„å¥½ï¼Œè€Œä¸æ˜¯åƒæ•™ç¨‹è¿™æ ·æ˜ç¡®çš„çŸ¥é“å®ƒå°±åœ¨é‚£é‡Œã€‚æœ‰äº†è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œæ— è®ºä»¥åä½ çš„é¡¹ç›®æ€ä¹ˆå˜åŒ–ã€appäº¤äº’å¤šä¹ˆçš„å¤æ‚ï¼Œåªè¦åœ¨æµ‹è¯•ä¸­å†™å¥½çš„é€»è¾‘å°±ä¸€å®šæ˜¯ç¬¦åˆé¢„æœŸçš„ï¼Œè€Œä½ æ‰€éœ€è¦åšçš„åªæ˜¯è¿è¡Œä¸€æ¡æµ‹è¯•æŒ‡ä»¤è€Œå·²ã€‚</p><blockquote><p>è™½ç„¶æ•™ç¨‹ä¸­ä»…ä½¿ç”¨äº†<code>assertIs</code>ï¼Œä½†å®é™…ä¸ŠDjangoä¸­çš„æ–­è¨€æœ‰å¤§æ¦‚å‡ åç§ä¹‹å¤šï¼Œæ¯”å¦‚<code>assertEqual</code>ã€<code>assertContains</code>ç­‰ï¼Œå¹¶ä¸”è¿˜åœ¨ä¸æ–­æ›´æ–°ã€‚è¯¦è§<a href="https://docs.python.org/3/library/unittest.html#unittest.TestCase">Pythonæ ‡å‡†æ–­è¨€</a>å’Œ<a href="https://docs.djangoproject.com/zh-hans/2.2/topics/testing/tools/#assertions">Djangoæ‰©å±•æ–­è¨€</a></p></blockquote><h2 id="æµ‹è¯•è§†å›¾"><a href="#æµ‹è¯•è§†å›¾" class="headerlink" title="æµ‹è¯•è§†å›¾"></a>æµ‹è¯•è§†å›¾</h2><p>ä¸Šé¢çš„æµ‹è¯•éƒ½æ˜¯é’ˆå¯¹æ¨¡å‹çš„ã€‚<strong>è§†å›¾</strong>è¯¥æ€ä¹ˆæµ‹è¯•ï¼Ÿå¦‚ä½•é€šè¿‡æµ‹è¯•ç³»ç»Ÿæ¨¡æ‹Ÿå‡ºç”¨æˆ·çš„è¯·æ±‚å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯<code>TestCase</code>ç±»æä¾›äº†ä¸€ä¸ªä¾›æµ‹è¯•ä½¿ç”¨çš„<code>Client</code>æ¥æ¨¡æ‹Ÿç”¨æˆ·é€šè¿‡è¯·æ±‚å’Œè§†å›¾å±‚ä»£ç çš„äº¤äº’ã€‚</p><p>ä»¥<strong>æ–‡ç« è¯¦æƒ…è§†å›¾</strong>çš„<strong>æµè§ˆé‡ç»Ÿè®¡</strong>ä¸ºä¾‹ï¼Œæ¯”è¾ƒå®¹æ˜“å‡ºç°çš„æ½œåœ¨bugæœ‰ï¼š</p><ul><li>å¢åŠ çš„æµè§ˆé‡æœªèƒ½æ­£å¸¸ä¿å­˜è¿›æ•°æ®åº“ï¼ˆå³æ¯æ¬¡è¯·æ±‚åˆ™æµè§ˆé‡+1ï¼‰</li><li>å¢åŠ æµè§ˆé‡çš„åŒæ—¶ï¼Œ<code>updated</code>å­—æ®µä¹Ÿé”™è¯¯çš„ä¸€å¹¶æ›´æ–°</li></ul><p>æ‰€ä»¥æœ‰é’ˆå¯¹çš„å†™2æ¡æµ‹è¯•ã€‚æ–°å†™ä¸€ä¸ªä¸“é—¨<strong>æµ‹è¯•è§†å›¾çš„ç±»</strong>ï¼Œä¸å‰é¢çš„<strong>æµ‹è¯•æ¨¡å‹çš„ç±»</strong>åŒºåˆ†å¼€ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>tests<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">from</span> time <span class="token keyword">import</span> sleep<span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> reverse<span class="token keyword">class</span> <span class="token class-name">ArticlePostModelTests</span><span class="token punctuation">(</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token class-name">ArtitclePostViewTests</span><span class="token punctuation">(</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">test_increase_views</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># è¯·æ±‚è¯¦æƒ…è§†å›¾æ—¶ï¼Œé˜…è¯»é‡ +1</span>        author <span class="token operator">=</span> User<span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token string">'user4'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'test_password'</span><span class="token punctuation">)</span>        author<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>        article <span class="token operator">=</span> ArticlePost<span class="token punctuation">(</span>            author<span class="token operator">=</span>author<span class="token punctuation">,</span>            title<span class="token operator">=</span><span class="token string">'test4'</span><span class="token punctuation">,</span>            body<span class="token operator">=</span><span class="token string">'test4'</span><span class="token punctuation">,</span>            <span class="token punctuation">)</span>        article<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>assertIs<span class="token punctuation">(</span>article<span class="token punctuation">.</span>total_views<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>        url <span class="token operator">=</span> reverse<span class="token punctuation">(</span><span class="token string">'article:article_detail'</span><span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>article<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        response <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>        viewed_article <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>article<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>assertIs<span class="token punctuation">(</span>viewed_article<span class="token punctuation">.</span>total_views<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">test_increase_views_but_not_change_updated_field</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># è¯·æ±‚è¯¦æƒ…è§†å›¾æ—¶ï¼Œä¸æ”¹å˜ updated å­—æ®µ</span>        author <span class="token operator">=</span> User<span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token string">'user5'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'test_password'</span><span class="token punctuation">)</span>        author<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>        article <span class="token operator">=</span> ArticlePost<span class="token punctuation">(</span>            author<span class="token operator">=</span>author<span class="token punctuation">,</span>            title<span class="token operator">=</span><span class="token string">'test5'</span><span class="token punctuation">,</span>            body<span class="token operator">=</span><span class="token string">'test5'</span><span class="token punctuation">,</span>            <span class="token punctuation">)</span>        article<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>        sleep<span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span>        url <span class="token operator">=</span> reverse<span class="token punctuation">(</span><span class="token string">'article:article_detail'</span><span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>article<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        response <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>        viewed_article <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>article<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>assertIs<span class="token punctuation">(</span>viewed_article<span class="token punctuation">.</span>updated <span class="token operator">-</span> viewed_article<span class="token punctuation">.</span>created <span class="token operator">&lt;</span> timezone<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>seconds<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„çœ‹ä»£ç æ˜¯å¦‚ä½•ä¸<strong>è§†å›¾å±‚</strong>äº¤äº’çš„ï¼š<code>response = self.client.get(url)</code>å‘è§†å›¾å‘èµ·è¯·æ±‚å¹¶è·å¾—äº†å“åº”ï¼Œå‰©ä¸‹çš„å°±æ˜¯ä»æ•°æ®åº“ä¸­å–å‡ºæ›´æ–°åçš„æ•°æ®ï¼Œå¹¶ç”¨<strong>æ–­è¨€</strong>è¯­å¥æ¥åˆ¤æ–­ä»£ç æ˜¯å¦ç¬¦åˆé¢„æœŸäº†ã€‚</p><p>è¿è¡Œæµ‹è¯•ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token operator">></span> python manage<span class="token punctuation">.</span>py testCreating test database <span class="token keyword">for</span> alias <span class="token string">'default'</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>System check identified no issues <span class="token punctuation">(</span><span class="token number">0</span> silenced<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>Ran <span class="token number">6</span> tests <span class="token keyword">in</span> <span class="token number">0.</span>617sOKDestroying test database <span class="token keyword">for</span> alias <span class="token string">'default'</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>6æ¡æµ‹è¯•ç”¨ä¾‹å…¨éƒ¨é€šè¿‡ã€‚</p><h2 id="è¶Šå¤šè¶Šå¥½çš„æµ‹è¯•"><a href="#è¶Šå¤šè¶Šå¥½çš„æµ‹è¯•" class="headerlink" title="è¶Šå¤šè¶Šå¥½çš„æµ‹è¯•"></a>è¶Šå¤šè¶Šå¥½çš„æµ‹è¯•</h2><p>ä»…ä»…æ˜¯appä¸­çš„ä¸¤ä¸ªéå¸¸å°çš„åŠŸèƒ½ï¼Œå°±å·²ç»å†™äº†6æ¡æµ‹è¯•ç”¨ä¾‹äº†ï¼Œå¹¶ä¸”è¿˜å¯ä»¥ç»§ç»­æ‰©å±•ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå…¶ä»–çš„æ¯ä¸ªæ¨¡å‹ã€è§†å›¾éƒ½å¯ä»¥æ‰©å±•å‡ºå‡ åç”šè‡³ä¸Šç™¾æ¡æµ‹è¯•ï¼Œè¿™æ ·ä¸‹å»ä»£ç æ€»é‡å¾ˆå¿«å°±è¦å¤±å»æ§åˆ¶äº†ï¼Œå¹¶ä¸”ç›¸å¯¹äºä¸šåŠ¡ä»£ç æ¥è¯´ï¼Œæµ‹è¯•ä»£ç æ˜¾å¾—ç¹çä¸”ä¸å¤Ÿä¼˜é›…ã€‚</p><p><strong>ä½†æ˜¯æ²¡å…³ç³»ï¼</strong>å°±è®©æµ‹è¯•ä»£ç ç»§ç»­è‚†æ„å¢é•¿å§ã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä½ å†™å®Œä¸€ä¸ªæµ‹è¯•ä¹‹åå°±å¯ä»¥å¿˜æ‰å®ƒäº†ã€‚åœ¨ä½ ç»§ç»­å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œå®ƒä¼šä¸€ç›´é»˜é»˜æ— é—»åœ°ä¸ºä½ åšè´¡çŒ®çš„ã€‚æœ€åçš„æƒ…å†µæ˜¯å½“ä½ ç»§ç»­å¼€å‘çš„æ—¶å€™ï¼Œå‘ç°ä¹‹å‰çš„ä¸€äº›æµ‹è¯•ç°åœ¨çœ‹æ¥æ˜¯å¤šä½™çš„ã€‚ä½†æ˜¯è¿™ä¹Ÿä¸æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Œå¤šåšäº›æµ‹è¯•ä¹Ÿä¸é”™ã€‚</p><h2 id="æ·±å…¥ä»£ç æµ‹è¯•"><a href="#æ·±å…¥ä»£ç æµ‹è¯•" class="headerlink" title="æ·±å…¥ä»£ç æµ‹è¯•"></a>æ·±å…¥ä»£ç æµ‹è¯•</h2><p>åœ¨å‰é¢çš„æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬å·²ç»ä»æ¨¡å‹å±‚å’Œè§†å›¾å±‚çš„è§’åº¦æ£€æŸ¥äº†åº”ç”¨çš„è¾“å…¥è¾“å‡ºï¼Œä½†æ˜¯æ¨¡æ¿å‘¢ï¼Ÿè™½ç„¶å¯ä»¥ç”¨<code>assertInHTML</code>ã€<code>assertJSONEqual</code>ç­‰æ–­è¨€å¤§è‡´æ£€æŸ¥æ¨¡æ¿ä¸­çš„æŸäº›å†…å®¹ï¼Œä½†æ›´åŠ è¿‘ä¼¼äºæµè§ˆå™¨çš„æ£€æŸ¥å°±è¦ä½¿ç”¨<code>Selenium</code>ç­‰æµ‹è¯•å·¥å…·ï¼ˆæ¯•ç«ŸDjangoçš„é‡ç‚¹æ˜¯åç«¯è€Œä¸æ˜¯å‰ç«¯ï¼‰ã€‚</p><p><code>Selenium</code>ä¸ä»…å¯ä»¥æµ‹è¯• Django æ¡†æ¶é‡Œçš„ä»£ç ï¼Œç”šè‡³è¿˜å¯ä»¥æ£€æŸ¥ JavaScriptä»£ç ã€‚å®ƒå‡è£…æˆæ˜¯ä¸€ä¸ªæ­£åœ¨å’Œä½ ç«™ç‚¹è¿›è¡Œäº¤äº’çš„æµè§ˆå™¨ï¼Œå°±å¥½åƒæœ‰ä¸ªçœŸäººåœ¨è®¿é—®ç½‘ç«™ä¸€æ ·ã€‚Django æä¾›äº†<code>LiveServerTestCase</code>æ¥å’Œ<code>Selenium</code>è¿™æ ·çš„å·¥å…·è¿›è¡Œäº¤äº’ã€‚</p><p>å…³äºæµ‹è¯•çš„è¯é¢˜è¿™é‡Œåªæ˜¯å¼€äº†ä¸ªå¤´ï¼Œè¯»è€…å¯ä»¥ç»§ç»­é˜…è¯»ä¸‹é¢çš„å†…å®¹è¿›ä¸€æ­¥äº†è§£ï¼š</p><ul><li><a href="https://docs.djangoproject.com/en/2.2/topics/testing/overview/">Django: Writing and running tests</a></li><li><a href="https://docs.djangoproject.com/en/2.2/topics/testing/tools/">Django: Testing tools</a></li><li><a href="https://docs.djangoproject.com/en/2.2/topics/testing/advanced/">Django: Advanced testing topics</a></li><li><a href="https://selenium-python.readthedocs.io/getting-started.html">Seleniumå®˜æ–¹æ–‡æ¡£</a></li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ‰ä¸€å¸®å´‡å°šâ€œæµ‹è¯•é©±åŠ¨â€çš„å¼€å‘è€…ï¼Œä»–ä»¬å¼€å‘æ—¶å…ˆå†™æµ‹è¯•ä»£ç ï¼Œç„¶åæ‰å†™ä¸šåŠ¡ä»£ç ã€‚è€Œæ™®é€šå¼€å‘è€…é€šå¸¸æ˜¯å…ˆå†™ä¸šåŠ¡ä»£ç ï¼Œå†å†™æµ‹è¯•ä»£ç ï¼Œè¿™ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚ä½†å¦‚æœä½ å·²ç»å†™äº†å¾ˆå¤šä¸šåŠ¡ä»£ç äº†ï¼Œå†å›å¤´å†™æµ‹è¯•ç¡®å®æœ‰äº›æ— ä»ä¸‹æ‰‹ï¼Œé‚£ä¹ˆè‡³å°‘åœ¨ä»¥åå†™æ–°åŠŸèƒ½æ—¶ï¼Œè®°å¾—åŠ ä¸Šæµ‹è¯•ã€‚æµ‹è¯•å†™å¾—å¥½ä¸å¥½ï¼Œç”šè‡³æ¯”åŠŸèƒ½æœ¬èº«æ›´èƒ½çœ‹å‡ºç¼–ç¨‹æ°´å¹³ã€‚</p><p>æµ‹è¯•å¯ä»¥è®©ä»£ç æ›´åŠ å¼ºå£®ã€‚é¡¹ç›®æ²¡å‡ºbugæ—¶ï¼Œçš†å¤§æ¬¢å–œï¼Œæœ‰æ²¡æœ‰æµ‹è¯•éƒ½ä¸€æ ·ï¼›ä¸€æ—¦å‡ºç°éš¾ç¼ çš„bugï¼Œä½ å°±ä¼šæ— æ¯”æƒ³å¿µä¸€å¥—å®Œå–„çš„æµ‹è¯•ä»£ç äº†ã€‚</p><p>åšä¸»å†™è‡ªå·±çš„ç½‘ç«™æ—¶å°±æ²¡æœ‰å¯¹æµ‹è¯•ç»™ä¸è¶³å¤Ÿçš„é‡è§†ï¼Œå›æƒ³èµ·æ¥èµ°äº†å¾ˆå¤šå¼¯è·¯ã€‚å¸Œæœ›è¯»è€…ä»¥å‰è½¦ä¹‹é‰´ï¼ŒåŸ¹å…»è‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ã€‚</p><hr><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#x64;&#x75;&#115;&#x61;&#x69;&#112;&#x68;&#x6f;&#116;&#x6f;&#64;&#102;&#111;&#x78;&#x6d;&#x61;&#105;&#x6c;&#x2e;&#x63;&#111;&#x6d;">&#x64;&#x75;&#115;&#x61;&#x69;&#112;&#x68;&#x6f;&#116;&#x6f;&#64;&#102;&#111;&#x78;&#x6d;&#x61;&#105;&#x6c;&#x2e;&#x63;&#111;&#x6d;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--33.æ¶ˆæ¯é€šçŸ¥</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/33.xiao-xi-tong-zhi/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/33.xiao-xi-tong-zhi/</url>
      
        <content type="html"><![CDATA[<p>å‡­å€Ÿä½ å‹¤å¥‹çš„å†™ä½œï¼Œæ‹œè¯»ä½ æ–‡ç« çš„ç”¨æˆ·è¶Šæ¥è¶Šå¤šï¼Œä»–ä»¬çš„è¯„è®ºä¹Ÿåˆ†æ•£åœ¨ä¼—å¤šçš„æ–‡ç« ä¹‹ä¸­ã€‚ä½œä¸ºåšä¸»ï¼Œè¯»è€…çš„ç•™è¨€è‚¯å®šæ˜¯è¦éƒ½çœ‹çš„ï¼›è€Œè¯»è€…ç»™ä½ ç•™è¨€ï¼Œè‡ªç„¶ä¹Ÿå¸Œæœ›å¾—åˆ°å›å¤ã€‚</p><p>æ€ä¹ˆå°†æœªè¯»çš„ç•™è¨€å‘ˆç°ç»™æ­£ç¡®çš„ç”¨æˆ·å‘¢ï¼Ÿæ€»ä¸èƒ½ç”¨æˆ·è‡ªå·±å»èŒ«èŒ«æ–‡ç« ä¸­å¯»æ‰¾å§ï¼Œé‚£ä¹Ÿå¤ªè ¢äº†ã€‚ç»™è¯„è®ºå¢åŠ <strong>é€šçŸ¥åŠŸèƒ½</strong>å°±æ˜¯å¾ˆæµè¡Œçš„è§£å†³æ–¹æ¡ˆï¼šæ¯”å¦‚å¾®ä¿¡æœ‹å‹åœˆç•™è¨€çš„é€šçŸ¥ã€æ–°æµªå¾®åšç•™è¨€çš„é€šçŸ¥ã€ä»¥åŠå„ç§ç¤¾äº¤å¹³å°çš„â€œå°çº¢ç‚¹â€ã€‚</p><p>æœ¬ç¯‡å°†ä»¥<code>django-notifications</code>ä¸ºåŸºç¡€ï¼Œéå¸¸é«˜æ•ˆçš„æ­å»ºä¸€ä¸ªç®€æ˜“çš„é€šçŸ¥ç³»ç»Ÿã€‚</p><h2 id="å‘é€é€šçŸ¥"><a href="#å‘é€é€šçŸ¥" class="headerlink" title="å‘é€é€šçŸ¥"></a>å‘é€é€šçŸ¥</h2><p>å‰é¢çš„æ­¥éª¤æˆ‘ä»¬å·²ç»å¾ˆç†Ÿæ‚‰äº†ã€‚</p><p>é¦–å…ˆå®‰è£…<code>django-notifications</code>ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token operator">></span> pip <span class="token function">install</span> django-notifications-hq<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ³¨å†Œappï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_blog<span class="token operator">/</span>settings<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token string">'notifications'</span><span class="token punctuation">,</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨æ ¹è·¯ç”±ä¸­å®‰è£…è·¯å¾„ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_blog<span class="token operator">/</span>urls<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">import</span> notifications<span class="token punctuation">.</span>urlsurlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    path<span class="token punctuation">(</span><span class="token string">'inbox/notifications/'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span>notifications<span class="token punctuation">.</span>urls<span class="token punctuation">,</span> namespace<span class="token operator">=</span><span class="token string">'notifications'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„è¿™é‡Œçš„<code>notifications.urls</code>æ²¡æœ‰åƒä¹‹å‰ä¸€æ ·ç”¨å­—ç¬¦ä¸²ï¼Œæ˜¯ä¸ºäº†ç¡®ä¿æ¨¡å—å®‰è£…åˆ°æ­£ç¡®çš„å‘½åç©ºé—´ä¸­ã€‚</p><p>æ•°æ®è¿ç§»ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token operator">></span> python manage.py migrate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>appå°±å®‰è£…å¥½äº†ã€‚</p><p>æ¥ä¸‹æ¥ä½ å°±å¯ä»¥åœ¨é¡¹ç›®çš„<strong>ä»»ä½•åœ°æ–¹</strong>å‘é€é€šçŸ¥äº†ï¼åƒè¿™æ ·ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> notifications<span class="token punctuation">.</span>signals <span class="token keyword">import</span> notifynotify<span class="token punctuation">.</span>send<span class="token punctuation">(</span>actor<span class="token punctuation">,</span> recipient<span class="token punctuation">,</span> verb<span class="token punctuation">,</span> target<span class="token punctuation">,</span> action_object<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­çš„å‚æ•°é‡Šä¹‰ï¼š</p><ul><li><code>actor</code>ï¼šå‘é€é€šçŸ¥çš„å¯¹è±¡</li><li><code>recipient</code>ï¼šæ¥æ”¶é€šçŸ¥çš„å¯¹è±¡</li><li><code>verb</code>ï¼šåŠ¨è¯çŸ­è¯­</li><li><code>target</code>ï¼šé“¾æ¥åˆ°åŠ¨ä½œçš„å¯¹è±¡<em>ï¼ˆå¯é€‰ï¼‰</em></li><li><code>action_object</code>ï¼šæ‰§è¡Œé€šçŸ¥çš„å¯¹è±¡ï¼ˆå¯é€‰ï¼‰</li></ul><p>æœ‰ç‚¹ç»•ï¼Œä¸¾ä¸ªæ —å­ï¼š<a href="https://www.dusaiphoto.com/">æœèµ›</a>  <code>(actor)</code>  åœ¨  <a href="https://www.dusaiphoto.com/article/detail/2">Djangoæ­å»ºä¸ªäººåšå®¢</a>  <code>(target)</code>  ä¸­å¯¹  <a href="">ä½ </a>  <code>(recipient)</code>  <a href="">å‘è¡¨äº†</a>  <code>(verb)</code>    <a href="">è¯„è®º</a>  <code>(action_object)</code>ã€‚</p><p>å› ä¸ºæˆ‘ä»¬æƒ³è¦åœ¨ç”¨æˆ·<strong>å‘è¡¨è¯„è®ºçš„æ—¶å€™å‘é€é€šçŸ¥</strong>ï¼Œå› æ­¤ä¿®æ”¹ä¸€ä¸‹å‘è¡¨è¯„è®ºçš„è§†å›¾ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">comments<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">from</span> notifications<span class="token punctuation">.</span>signals <span class="token keyword">import</span> notify<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>models <span class="token keyword">import</span> User<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">def</span> <span class="token function">post_comment</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># å·²æœ‰ä»£ç ï¼Œåˆ›å»ºæ–°å›å¤</span>    <span class="token keyword">if</span> comment_form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token comment"># å·²æœ‰ä»£ç ï¼ŒäºŒçº§å›å¤</span>        <span class="token keyword">if</span> parent_comment_id<span class="token punctuation">:</span>            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>            <span class="token comment"># æ–°å¢ä»£ç ï¼Œç»™å…¶ä»–ç”¨æˆ·å‘é€é€šçŸ¥</span>            <span class="token keyword">if</span> <span class="token keyword">not</span> parent_comment<span class="token punctuation">.</span>user<span class="token punctuation">.</span>is_superuser<span class="token punctuation">:</span>                notify<span class="token punctuation">.</span>send<span class="token punctuation">(</span>                    request<span class="token punctuation">.</span>user<span class="token punctuation">,</span>                    recipient<span class="token operator">=</span>parent_comment<span class="token punctuation">.</span>user<span class="token punctuation">,</span>                    verb<span class="token operator">=</span><span class="token string">'å›å¤äº†ä½ '</span><span class="token punctuation">,</span>                    target<span class="token operator">=</span>article<span class="token punctuation">,</span>                    action_object<span class="token operator">=</span>new_comment<span class="token punctuation">,</span>                <span class="token punctuation">)</span>            <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">'200 OK'</span><span class="token punctuation">)</span>                new_comment<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># æ–°å¢ä»£ç ï¼Œç»™ç®¡ç†å‘˜å‘é€é€šçŸ¥</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>is_superuser<span class="token punctuation">:</span>            notify<span class="token punctuation">.</span>send<span class="token punctuation">(</span>                    request<span class="token punctuation">.</span>user<span class="token punctuation">,</span>                    recipient<span class="token operator">=</span>User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>is_superuser<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    verb<span class="token operator">=</span><span class="token string">'å›å¤äº†ä½ '</span><span class="token punctuation">,</span>                    target<span class="token operator">=</span>article<span class="token punctuation">,</span>                    action_object<span class="token operator">=</span>new_comment<span class="token punctuation">,</span>                <span class="token punctuation">)</span>                    <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>article<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¢åŠ äº†ä¸¤æ¡<code>notify</code>çš„è¯­å¥ï¼Œåˆ†åˆ«ä½äºä¸¤ä¸ª<code>if</code>è¯­å¥ä¸­ï¼š</p><ul><li>ç¬¬ä¸€ä¸ª<code>notify</code>ï¼šç”¨æˆ·ä¹‹é—´å¯ä»¥äº’ç›¸è¯„è®ºï¼Œå› æ­¤éœ€è¦å‘é€é€šçŸ¥ã€‚<code>if</code>è¯­å¥æ˜¯ä¸ºäº†é˜²æ­¢ç®¡ç†å‘˜æ”¶åˆ°é‡å¤çš„é€šçŸ¥ã€‚</li><li>ç¬¬äºŒä¸ª<code>notify</code>ï¼šæ™®é€šç”¨æˆ·å›å¤æ—¶ç»™ç®¡ç†å‘˜å‘é€é€šçŸ¥ã€‚</li></ul><blockquote><p>æ™®é€šç”¨æˆ·å›å¤æ™®é€šç”¨æˆ·æ—¶ï¼Œè¿™æ®µä»£ç æ˜¯ä¸ä¼šå‘é€é€šçŸ¥ç»™ç®¡ç†å‘˜çš„ã€‚å¦‚æœéœ€è¦å‘é€ç»™ç®¡ç†å‘˜ï¼Œåœ¨ç¬¬ä¸€ä¸ª notify çš„ recipient é‡Œä»¥åˆ—è¡¨å½¢å¼ï¼Œå°†è¢«å›å¤ç”¨æˆ·å’Œç®¡ç†å‘˜æ·»åŠ è¿›å»å³å¯ã€‚æ„Ÿè°¢ @å›¸ç¾©ä½¿éº åé¦ˆã€‚</p></blockquote><p>å…¶ä»–çš„ä»£ç æ²¡æœ‰å˜åŒ–ï¼Œæ³¨æ„ä½ç½®ä¸è¦é”™å°±è¡Œäº†ã€‚ä½ å¯ä»¥è¯•ç€å‘é€å‡ æ¡è¯„è®ºï¼Œç„¶åæ‰“å¼€<code>SQLiteStudio</code>ï¼ŒæŸ¥çœ‹<code>notifications_notification</code>è¡¨ä¸­çš„æ•°æ®å˜åŒ–ã€‚</p><blockquote><p>æœ‰æ•ˆä»£ç å®é™…ä¸Šåªæœ‰4è¡Œï¼Œæˆ‘ä»¬å°±å®Œæˆäº†åˆ›å»ºã€å‘é€é€šçŸ¥çš„åŠŸèƒ½ï¼ç›¸ä¿¡ä½ å·²ç»é€æ¸ä½“ä¼šåˆ°è¿ç”¨ç¬¬ä¸‰æ–¹åº“å¸¦æ¥çš„ä¾¿åˆ©äº†ã€‚è¿™å°±æ˜¯ç«™åœ¨äº†â€œå·¨äººä»¬â€çš„è‚©è†€ä¸Šã€‚</p></blockquote><h2 id="å°çº¢ç‚¹"><a href="#å°çº¢ç‚¹" class="headerlink" title="å°çº¢ç‚¹"></a>å°çº¢ç‚¹</h2><p>åå°åˆ›å»ºé€šçŸ¥çš„é€»è¾‘å·²ç»å†™å¥½äº†ï¼Œä½†æ˜¯å¦‚æœä¸èƒ½åœ¨å‰ç«¯æ˜¾ç¤ºå‡ºæ¥ï¼Œé‚£ä¹Ÿæ²¡èµ·åˆ°ä½œç”¨ã€‚</p><p>è€Œå‰ç«¯æ˜¾ç¤ºæ¶ˆæ¯é€šçŸ¥æ¯”è¾ƒæµè¡Œçš„æ˜¯<strong>â€œå°çº¢ç‚¹â€</strong>ï¼Œæµè¡Œå¾—éƒ½å·²ç»æ³›æ»¥äº†ï¼Œå°½ç®¡å¾ˆå¤šè½¯ä»¶å…¶å®æ ¹æœ¬å°±ä¸éœ€è¦ã€‚å¦ä¸€ç§å½¢å¼æ˜¯æ¶ˆæ¯<strong>å¾½ç« </strong>ï¼Œå³ä¸€ä¸ªçº¢è‰²æ–¹æ¡†ä¸­å¸¦æœ‰æ¶ˆæ¯æ¡ç›®çš„è®¡æ•°ã€‚è¿™ä¸¤ç§æ–¹å¼éƒ½ä¼šç”¨åˆ°åšå®¢é¡µé¢ä¸­ã€‚</p><p>åœ¨ä½ç½®çš„é€‰æ‹©ä¸Šï¼Œ<code>header</code>æ˜¯å¾ˆåˆé€‚çš„ï¼Œå› ä¸ºå®ƒåœ¨åšå®¢çš„æ‰€æœ‰ä½ç½®éƒ½ä¼šæ˜¾ç¤ºï¼Œå¾ˆç¬¦åˆé€šçŸ¥æœ¬èº«çš„å®šä½ã€‚</p><p>å› æ­¤ä¿®æ”¹<code>header.html</code>ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/header.html<span class="token comment">&lt;!-- å¼•å…¥notificationsçš„æ¨¡æ¿æ ‡ç­¾ --></span>&#123;% load notifications_tags %&#125;&#123;% notifications_unread as unread_count %&#125;...<span class="token comment">&lt;!-- å·²æœ‰ä»£ç ï¼Œç”¨æˆ·ä¸‹æ‹‰æ¡† --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav-item dropdown<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav-link dropdown-toggle<span class="token punctuation">"</span></span> <span class="token attr-name">...</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- æ–°å¢ä»£ç ï¼Œå°çº¢ç‚¹ --></span>        &#123;% if unread_count %&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0 0 8 8<span class="token punctuation">"</span></span>                 <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>8px<span class="token punctuation">"</span></span>                 <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>8px<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>circle</span> <span class="token attr-name">cx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4<span class="token punctuation">"</span></span>                        <span class="token attr-name">cy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4<span class="token punctuation">"</span></span>                        <span class="token attr-name">r</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4<span class="token punctuation">"</span></span>                        <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#ff6b6b<span class="token punctuation">"</span></span>                        <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>circle</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">></span></span>        &#123;% endif %&#125;                &#123;&#123; user.username &#125;&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- å·²æœ‰ä»£ç ï¼Œä¸‹æ‹‰æ¡†ä¸­çš„é“¾æ¥ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dropdown-menu<span class="token punctuation">"</span></span> <span class="token attr-name">...</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- æ–°å¢ä»£ç ï¼Œé€šçŸ¥è®¡æ•° --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dropdown-item<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>é€šçŸ¥            &#123;% if unread_count %&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>badge badge-danger<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; unread_count &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>            &#123;% endif %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                ...        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">...</span><span class="token punctuation">></span></span>é€€å‡ºç™»å½•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>django-notifications</code>è‡ªå¸¦ç®€æ˜“çš„æ¨¡æ¿æ ‡ç­¾ï¼Œå¯ä»¥åœ¨å‰å°æ¨¡æ¿ä¸­è°ƒç”¨é‡è¦çš„é€šçŸ¥ç›¸å…³çš„å¯¹è±¡ï¼Œåœ¨<strong>é¡¶éƒ¨å¼•å…¥</strong>å°±å¯ä»¥ä½¿ç”¨äº†ã€‚æ¯”å¦‚<code>unread_count</code>æ˜¯å½“å‰ç”¨æˆ·çš„æœªè¯»é€šçŸ¥çš„è®¡æ•°ã€‚</p><p><code>Bootstrap</code>è‡ªå¸¦æœ‰å¾½ç« çš„æ ·å¼ï¼Œä½†æ˜¯å´æ²¡æœ‰å°çº¢ç‚¹çš„æ ·å¼ï¼ˆè‡³å°‘æˆ‘æ²¡æœ‰æ‰¾åˆ°ï¼‰ï¼Œæ‰€ä»¥å°±åªèƒ½ç”¨<code>svg</code>è‡ªå·±ç”»äº†ï¼Œå¥½åœ¨ä¹Ÿä¸éš¾ã€‚</p><blockquote><p><code>svg</code>æ˜¯ç»˜åˆ¶çŸ¢é‡å›¾å½¢çš„æ ‡ç­¾ï¼Œè¿™é‡Œå°±ä¸å±•å¼€è®²äº†ï¼Œæ„Ÿå…´è¶£è¯·è‡ªè¡Œæœç´¢ç›¸å…³æ–‡ç« ã€‚</p></blockquote><p>éšä¾¿è¯„è®ºå‡ æ¡ï¼Œåˆ·æ–°é¡µé¢çœ‹ä¸€çœ‹ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190518/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE210.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190518/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE210.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>æ•ˆæœä¸é”™ã€‚ä½†æ˜¯é“¾æ¥çš„<code>href</code>æ˜¯ç©ºçš„ï¼Œæ¥ä¸‹æ¥å°±å¤„ç†ã€‚</p><h2 id="æœªè¯»ä¸å·²è¯»"><a href="#æœªè¯»ä¸å·²è¯»" class="headerlink" title="æœªè¯»ä¸å·²è¯»"></a>æœªè¯»ä¸å·²è¯»</h2><p>æ—¢ç„¶æ˜¯é€šçŸ¥ï¼Œé‚£ä¹ˆè‚¯å®šèƒ½å¤Ÿåˆ†æˆ<strong>â€æœªè¯»çš„â€œ</strong>å’Œ<strong>â€å·²è¯»çš„â€œ</strong>ä¸¤ç§ã€‚åœ¨é€‚å½“çš„æ—¶å€™ï¼Œæœªè¯»é€šçŸ¥åˆéœ€è¦è½¬æ¢ä¸ºå·²è¯»çš„ã€‚ç°åœ¨æˆ‘ä»¬æ¥å¼€å‘åŠŸèƒ½é›†ä¸­å¤„ç†å®ƒã€‚</p><p>é€šçŸ¥æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åŠŸèƒ½ï¼Œä»¥åæœ‰å¯èƒ½åœ¨ä»»ä½•åœ°æ–¹ç”¨åˆ°ï¼Œæ”¾åˆ°è¯„è®ºappä¸­ä¼¼ä¹å¹¶ä¸åˆé€‚ã€‚</p><p>æ‰€ä»¥æ–°å»ºä¸€ä¸ªappï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token operator">></span> python manage.py startapp notice<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ³¨å†Œï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_blog<span class="token operator">/</span>settings<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token string">'notice'</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ ¹è·¯ç”±ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_blog<span class="token operator">/</span>urls<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># notice</span>    path<span class="token punctuation">(</span><span class="token string">'notice/'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">'notice.urls'</span><span class="token punctuation">,</span> namespace<span class="token operator">=</span><span class="token string">'notice'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥å°±æ˜¯è§†å›¾äº†ã€‚ä¹‹å‰æ‰€æœ‰çš„è§†å›¾éƒ½æ˜¯ç”¨çš„<strong>è§†å›¾å‡½æ•°</strong>ï¼Œè¿™æ¬¡æˆ‘ä»¬æ›´è¿›ä¸€æ­¥ï¼Œç”¨<strong>ç±»è§†å›¾</strong>æ¥å®Œæˆã€‚å¿˜è®°ä»€ä¹ˆæ˜¯ç±»è§†å›¾çš„ï¼Œå›å¿†ä¸€ä¸‹å‰é¢<a href="https://www.dusaiphoto.com/article/detail/52/">ç±»çš„è§†å›¾</a>ç« èŠ‚ã€‚</p><p>ç¼–å†™è§†å›¾ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">notice<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render<span class="token punctuation">,</span> redirect<span class="token keyword">from</span> django<span class="token punctuation">.</span>views <span class="token keyword">import</span> View<span class="token keyword">from</span> django<span class="token punctuation">.</span>views<span class="token punctuation">.</span>generic <span class="token keyword">import</span> ListView<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>mixins <span class="token keyword">import</span> LoginRequiredMixin<span class="token keyword">from</span> article<span class="token punctuation">.</span>models <span class="token keyword">import</span> ArticlePost<span class="token keyword">class</span> <span class="token class-name">CommentNoticeListView</span><span class="token punctuation">(</span>LoginRequiredMixin<span class="token punctuation">,</span> ListView<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""é€šçŸ¥åˆ—è¡¨"""</span>    <span class="token comment"># ä¸Šä¸‹æ–‡çš„åç§°</span>    context_object_name <span class="token operator">=</span> <span class="token string">'notices'</span>    <span class="token comment"># æ¨¡æ¿ä½ç½®</span>    template_name <span class="token operator">=</span> <span class="token string">'notice/list.html'</span>    <span class="token comment"># ç™»å½•é‡å®šå‘</span>    login_url <span class="token operator">=</span> <span class="token string">'/userprofile/login/'</span>    <span class="token comment"># æœªè¯»é€šçŸ¥çš„æŸ¥è¯¢é›†</span>    <span class="token keyword">def</span> <span class="token function">get_queryset</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>notifications<span class="token punctuation">.</span>unread<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">CommentNoticeUpdateView</span><span class="token punctuation">(</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""æ›´æ–°é€šçŸ¥çŠ¶æ€"""</span>    <span class="token comment"># å¤„ç† get è¯·æ±‚</span>    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># è·å–æœªè¯»æ¶ˆæ¯</span>        notice_id <span class="token operator">=</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'notice_id'</span><span class="token punctuation">)</span>        <span class="token comment"># æ›´æ–°å•æ¡é€šçŸ¥</span>        <span class="token keyword">if</span> notice_id<span class="token punctuation">:</span>            article <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'article_id'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>notifications<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>notice_id<span class="token punctuation">)</span><span class="token punctuation">.</span>mark_as_read<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>article<span class="token punctuation">)</span>        <span class="token comment"># æ›´æ–°å…¨éƒ¨é€šçŸ¥</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>notifications<span class="token punctuation">.</span>mark_all_as_read<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">'notice:list'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è§†å›¾å…±ä¸¤ä¸ªã€‚</p><p><code>CommentNoticeListView</code>ï¼šç»§æ‰¿è‡ª<code>ListView</code>ï¼Œç”¨äºå±•ç¤ºæ‰€æœ‰çš„æœªè¯»é€šçŸ¥ã€‚<code>get_queryset</code>æ–¹æ³•è¿”å›äº†ä¼ é€’ç»™æ¨¡æ¿çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œ<code>unread()</code>æ–¹æ³•æ˜¯<code>django-notifications</code>æä¾›çš„ï¼Œç”¨äºè·å–æ‰€æœ‰æœªè¯»é€šçŸ¥çš„é›†åˆã€‚å¦å¤–è§†å›¾è¿˜ç»§æ‰¿äº†<strong>â€œæ··å…¥ç±»â€</strong><code>LoginRequiredMixin</code>ï¼Œè¦æ±‚è°ƒç”¨æ­¤è§†å›¾å¿…é¡»å…ˆç™»å½•ã€‚</p><p><code>CommentNoticeUpdateView</code>ï¼šç»§æ‰¿è‡ª<code>View</code>ï¼Œè·å¾—äº†å¦‚getã€postç­‰åŸºç¡€çš„æ–¹æ³•ã€‚<code>mark_as_read()</code>ã€<code>mark_all_as_read</code>éƒ½æ˜¯æ¨¡å—æä¾›çš„æ–¹æ³•ï¼Œç”¨äºå°†æœªè¯»é€šçŸ¥è½¬æ¢ä¸ºå·²è¯»ã€‚<code>if</code>è¯­å¥ç”¨æ¥åˆ¤æ–­è½¬æ¢å•æ¡è¿˜æ˜¯æ‰€æœ‰æœªè¯»é€šçŸ¥ã€‚</p><blockquote><p>é‡å¤ï¼šé˜…è¯»æœ‰å›°éš¾çš„åŒå­¦ï¼Œè¯·é‡æ–°é˜…è¯»<a href="https://www.dusaiphoto.com/article/detail/52/">ç±»çš„è§†å›¾</a>ç« èŠ‚ï¼Œæˆ–è€…å»<a href="https://docs.djangoproject.com/en/2.2/topics/class-based-views/">å®˜æ–¹æ–‡æ¡£</a>æŸ¥é˜…ã€‚</p></blockquote><p>æ¥ä¸‹æ¥å°±æ˜¯æ–°å»º<code>urls.py</code>äº†ï¼Œå†™å…¥ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">notice<span class="token operator">/</span>urls<span class="token punctuation">.</span>py<span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> viewsapp_name <span class="token operator">=</span> <span class="token string">'notice'</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token comment"># é€šçŸ¥åˆ—è¡¨</span>    path<span class="token punctuation">(</span><span class="token string">'list/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>CommentNoticeListView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'list'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token comment"># æ›´æ–°é€šçŸ¥çŠ¶æ€</span>    path<span class="token punctuation">(</span><span class="token string">'update/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>CommentNoticeUpdateView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'update'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>path()</code>çš„ç¬¬äºŒä¸ªå‚æ•°åªèƒ½æ¥æ”¶<strong>å‡½æ•°</strong>ï¼Œå› æ­¤åˆ«å¿˜äº†è¦è°ƒç”¨ç±»è§†å›¾çš„<code>as_view()</code>æ–¹æ³•ã€‚</p><p><strong>é›†ä¸­å¤„ç†é€šçŸ¥éœ€è¦ä¸€ä¸ªå•ç‹¬çš„é¡µé¢ã€‚</strong>æ–°å»º<code>templates/notice/list.html</code>æ¨¡æ¿æ–‡ä»¶ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/notice/list.html&#123;% extends "base.html" %&#125;&#123;% load staticfiles %&#125;&#123;% block title %&#125;    é€šçŸ¥&#123;% endblock title %&#125;&#123;% block content %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row mt-4 ml-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">"</span></span><span class="token attr-name"><span class="token namespace">notice:</span>update"</span> <span class="token attr-name">%&#125;"</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-warning<span class="token punctuation">"</span></span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ¸…ç©ºæ‰€æœ‰é€šçŸ¥<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- æœªè¯»é€šçŸ¥åˆ—è¡¨ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row mt-2 ml-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            &#123;% for notice in notices %&#125;                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-group-item<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>notice_link<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">"</span></span><span class="token attr-name"><span class="token namespace">notice:</span>update"</span> <span class="token attr-name">%&#125;?article_id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>&#123;&#123;</span> <span class="token attr-name">notice.target.id</span> <span class="token attr-name">&#125;&#125;&amp;notice_id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>&#123;&#123;</span> <span class="token attr-name">notice.id</span> <span class="token attr-name">&#125;&#125;"</span>                       <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span>                    <span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> #5897fb<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                        &#123;&#123; notice.actor &#125;&#125;                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                        åœ¨ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> #01a252<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>&#123;&#123; notice.target &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span> &#123;&#123; notice.verb &#125;&#125;ã€‚                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                    <span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span><span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span><span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span><span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span><span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span>&#123;&#123; notice.timestamp|date:"Y/m/d H:i" &#125;&#125;                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>            &#123;% endfor %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">    <span class="token selector">#notice_link a:link</span> <span class="token punctuation">&#123;</span>        <span class="token property">color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">#notice_link a:visited</span> <span class="token punctuation">&#123;</span>        <span class="token property">color</span><span class="token punctuation">:</span> lightgrey<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>&#123;% endblock content %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¨¡æ¿ä¸­ä¸»è¦æä¾›äº†ä¸¤ä¸ªåŠŸèƒ½ï¼š</p><ul><li>ç‚¹å‡»<code>button</code>æŒ‰é’®æ¸…ç©ºæ‰€æœ‰æœªè¯»é€šçŸ¥</li><li>ç‚¹å‡»å•ä¸ªé€šçŸ¥ï¼Œå°†å…¶è½¬æ¢ä¸ºå·²è¯»é€šçŸ¥ï¼Œå¹¶å‰å¾€æ­¤è¯„è®ºæ‰€åœ¨çš„æ–‡ç« </li></ul><p>æœ«å°¾<code>&lt;style&gt;</code>æ ‡ç­¾ä¸­çš„<strong>ä¼ªç±»é€‰æ‹©å™¨</strong>ï¼Œä½œç”¨æ˜¯å°†å·²ç»ç‚¹å‡»è¿‡çš„é€šçŸ¥å­—ä½“é¢œè‰²è½¬æ¢ä¸ºæµ…ç°è‰²ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚</p><p>æœ€åå°±æ˜¯è¡¥ä¸Š<strong>å…¥å£</strong>ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/header.html...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">...</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">"</span></span><span class="token attr-name"><span class="token namespace">notice:</span>list"</span> <span class="token attr-name">%&#125;"</span><span class="token punctuation">></span></span>é€šçŸ¥...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·å°±å®Œæˆäº†ã€‚</p><p>æ‰“å¼€æœåŠ¡å™¨ï¼Œç”¨ä¸€ä¸ªæ™®é€šè´¦å·è¯„è®ºå‡ æ¡ï¼Œå†ç™»å½•ç®¡ç†å‘˜è´¦å·å¹¶è¿›å…¥é€šçŸ¥é¡µé¢ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190518/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE212.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190518/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE212.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>å°±èƒ½çœ‹åˆ°ä¸é”™çš„æ•ˆæœäº†ã€‚å®ç°çš„æ•ˆæœæ˜¯ä»…å±•ç¤ºæœªè¯»é€šçŸ¥ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åœ¨ä¸‹è¾¹å±•ç¤ºå·²è¯»é€šçŸ¥ï¼Œæ–¹ä¾¿ç”¨æˆ·è¿½æº¯ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é€šçŸ¥åŠŸèƒ½éå¸¸çš„é‡è¦ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½ çš„åšå®¢æˆé•¿å£®å¤§äº†ä¹‹åã€‚ä½ è¿˜å¯ä»¥æŠŠå®ƒç”¨åœ¨åˆ«çš„åœ°æ–¹ï¼Œæ¯”å¦‚æ¯æ–°å‘è¡¨ä¸€ç¯‡æ–‡ç« ï¼Œå°±ç»™ä½ æ‰€æœ‰çš„â€œç²‰ä¸â€æ¨é€ä¸€æ¡é€šçŸ¥ï¼Œæé†’ä»–ä»¬å¯ä»¥æ¥æ‹œè¯»äº†ã€‚å…·ä½“å¦‚ä½•æ‰©å±•è¿ç”¨ï¼Œå°±é ä½ è„‘æ´å¤§å¼€äº†ã€‚</p><p><strong>è¯¾åä½œä¸šï¼š</strong>å‰é¢çš„ä»£ç ä¸­ï¼Œå¦‚æœç”¨æˆ·è‡ªå·±è¯„è®ºè‡ªå·±ï¼ŒåŒæ ·ä¹Ÿä¼šæ”¶åˆ°é€šçŸ¥ã€‚è¿™ç§é€šçŸ¥å¹¶æ²¡æœ‰å¿…è¦ï¼Œè¯·ä¿®æ­£å®ƒã€‚</p><blockquote><p>é‡åˆ°å›°éš¾ï¼Œåœ¨<a href="https://github.com/stacklens/django_blog_tutorial">æ•™ç¨‹ç¤ºä¾‹ä»£ç </a>æ‰¾ç­”æ¡ˆå§ã€‚</p></blockquote><hr><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#100;&#117;&#115;&#97;&#105;&#x70;&#x68;&#111;&#x74;&#111;&#x40;&#102;&#111;&#x78;&#x6d;&#97;&#105;&#x6c;&#46;&#99;&#x6f;&#109;">&#100;&#117;&#115;&#97;&#105;&#x70;&#x68;&#111;&#x74;&#111;&#x40;&#102;&#111;&#x78;&#x6d;&#97;&#105;&#x6c;&#46;&#99;&#x6f;&#109;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--35.ç¬¬ä¸‰æ–¹ç™»å½•</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/35.di-san-fang-deng-lu/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/35.di-san-fang-deng-lu/</url>
      
        <content type="html"><![CDATA[<p>ç°åœ¨æˆ‘ä»¬å·²ç»æ‹¥æœ‰ä¸€ä¸ªå¯ä»¥è¿›è¡Œç”¨æˆ·<strong>æœ¬åœ°ç™»å½•</strong>çš„åšå®¢ç³»ç»Ÿäº†ã€‚å¦‚æœæœ‰äººæ¬£èµä½ çš„æ–‡ç« ï¼Œè¯´ä¸å®šå°±ä¼šæ³¨å†Œæˆä¸ºæœ¬åœ°ç”¨æˆ·ï¼Œå¹¶å’Œä½ å¥½å¥½äº¤æµä¸€ç•ªã€‚</p><p>ä½†å¤´ç–¼çš„æ˜¯ï¼Œç”¨æˆ·å¯èƒ½æ¯å¤©éƒ½åœ¨äº’è”ç½‘ä¸Šæµè§ˆå¾ˆå¤šéå¸¸æ£’çš„åšå®¢ï¼Œå¦‚æœæ¯ä¸ªåšå®¢éƒ½è¦å»æ³¨å†Œæ‰èƒ½è¯„è®ºï¼Œå¯¹ç”¨æˆ·æ˜¯ä¸ªä¸å°çš„è´Ÿæ‹…ã€‚å¯¹ä¸ªäººåšå®¢è¿™ç±»è‰æ ¹ç½‘ç«™ï¼Œè¯´ä¸å®šç”¨æˆ·å°±æ‡’å¾—å»æ³¨å†Œäº†ï¼Œä½ ä¹Ÿå°±æŸå¤±äº†ä¸€ä¸ªæ½œåœ¨çš„â€ç²‰ä¸â€œã€‚</p><p>æ¯”è¾ƒæµè¡Œçš„è§£å†³æ–¹æ¡ˆæ˜¯å…è®¸ç”¨æˆ·é€šè¿‡<strong>ç¬¬ä¸‰æ–¹ç™»å½•</strong>ï¼Œå³å¯ä»¥é€šè¿‡GitHubã€å¾®åšè¿™ç±»çŸ¥åç¤¾åŒºçš„æˆæƒï¼Œä»è€Œç™»å½•ä½ çš„å°ç«™ï¼Œå…å»äº†æ³¨å†Œçš„éº»çƒ¦ã€‚</p><p>æœ¬ç« ä¼šä»‹ç»ä¸€ä¸ªå¼ºå¤§çš„åº“ï¼š<code>Django-allauth</code>ï¼Œå®ƒä¸ä»…åŒ…å«ä¸€æ•´å¥—çš„æœ¬åœ°æ³¨å†Œã€ç™»å½•ã€ç®¡ç†çš„è§£å†³æ–¹æ¡ˆï¼Œè¿˜æ”¯æŒGitHubã€Twitterã€å¾®åšã€å¾®ä¿¡ç”šè‡³ç™¾åº¦ç­‰å‡ åç§ç¬¬ä¸‰æ–¹ç™»å½•æ–¹å¼ï¼ŒçœŸçš„æ˜¯å½“çˆ¹åˆå½“å¦ˆå•Šâ€¦</p><h2 id="æœ¬åœ°ç™»å½•"><a href="#æœ¬åœ°ç™»å½•" class="headerlink" title="æœ¬åœ°ç™»å½•"></a>æœ¬åœ°ç™»å½•</h2><p>å…ˆçœ‹çœ‹<code>django-allauth</code>çš„æœ¬åœ°ç™»å½•å¦‚ä½•é…ç½®ã€‚</p><p>å®‰è£…<code>django-allauth</code>ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token operator">></span> pip <span class="token function">install</span> django-allauth<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_blog<span class="token operator">/</span>settings<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>TEMPLATES <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token string">'OPTIONS'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>            <span class="token string">'context_processors'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>                <span class="token comment"># allauth å¯åŠ¨å¿…é¡»é¡¹</span>                <span class="token string">'django.template.context_processors.request'</span><span class="token punctuation">,</span>            <span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">]</span>AUTHENTICATION_BACKENDS <span class="token operator">=</span> <span class="token punctuation">(</span>    <span class="token comment"># Django åå°å¯ç‹¬ç«‹äº allauth ç™»å½•</span>    <span class="token string">'django.contrib.auth.backends.ModelBackend'</span><span class="token punctuation">,</span>    <span class="token comment"># é…ç½® allauth ç‹¬æœ‰çš„è®¤è¯æ–¹æ³•ï¼Œå¦‚ email ç™»å½•</span>    <span class="token string">'allauth.account.auth_backends.AuthenticationBackend'</span><span class="token punctuation">,</span><span class="token punctuation">)</span>INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># allauth å¯åŠ¨å¿…é¡»é¡¹</span>    <span class="token string">'django.contrib.auth'</span><span class="token punctuation">,</span>    <span class="token string">'django.contrib.messages'</span><span class="token punctuation">,</span>    <span class="token string">'django.contrib.sites'</span><span class="token punctuation">,</span>    <span class="token string">'allauth'</span><span class="token punctuation">,</span>    <span class="token string">'allauth.account'</span><span class="token punctuation">,</span>    <span class="token string">'allauth.socialaccount'</span><span class="token punctuation">,</span>        <span class="token comment"># å¯æ·»åŠ éœ€è¦çš„ç¬¬ä¸‰æ–¹ç™»å½•</span>    <span class="token string">'allauth.socialaccount.providers.github'</span><span class="token punctuation">,</span>    <span class="token string">'allauth.socialaccount.providers.weibo'</span><span class="token punctuation">,</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token comment"># è®¾ç½®ç«™ç‚¹</span>SITE_ID <span class="token operator">=</span> <span class="token number">1</span><span class="token comment"># ç™»å½•æˆåŠŸåé‡å®šå‘åœ°å€</span>LOGIN_REDIRECT_URL <span class="token operator">=</span> <span class="token string">'/article/article-list'</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„ä¸Šé¢çš„é…ç½®ä¸­ï¼Œæœ‰çš„å†…å®¹æ˜¯åˆ›å»ºé¡¹ç›®æ—¶æœ¬æ¥å°±æœ‰çš„ï¼Œæ£€æŸ¥ä¸€ä¸‹ä½ çš„é¡¹ç›®ä¸­æ˜¯å¦åŒ…å«ï¼›æœ‰çš„å†…å®¹æ˜¯å®Œå…¨æ–°å¢çš„ï¼Œä¸è¦æ¼æ‰äº†ã€‚</p><p><code>django-allauth</code>ä¹Ÿæ˜¯ä¸€ä¸ªappï¼Œå› æ­¤éœ€è¦åˆ†é…ç»™å®ƒ<code>url</code>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_blog<span class="token operator">/</span>urls<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    path<span class="token punctuation">(</span><span class="token string">'accounts/'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">'allauth.urls'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åä¸€æ­¥æ˜¯è¿ç§»æ•°æ®ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token operator">></span> python manage.py migrate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™å°±å®Œæˆäº†ï¼</p><p>è¾“å…¥<code>django-allauth</code>çš„é»˜è®¤ç™»å½•é¡µé¢åœ°å€ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">http://127.0.0.1:8000/accounts/login/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ˜¾ç¤ºé¡µé¢å¦‚ä¸‹ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190620/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE220.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190620/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE220.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><h3 id="è®¾ç½®ç½‘ç«™é¦–é¡µ"><a href="#è®¾ç½®ç½‘ç«™é¦–é¡µ" class="headerlink" title="è®¾ç½®ç½‘ç«™é¦–é¡µ"></a>è®¾ç½®ç½‘ç«™é¦–é¡µ</h3><p>æ•™ç¨‹åˆ°ç°åœ¨ï¼Œæˆ‘ä»¬çš„åšå®¢éƒ½è¿˜æ²¡æœ‰åˆ†é…é¦–é¡µåœ°å€ã€‚</p><p>åšå®¢ç½‘ç«™çš„é¦–é¡µé€šå¸¸å°±æ˜¯æ–‡ç« åˆ—è¡¨æœ¬èº«ï¼Œå› æ­¤æŠŠè¿™ä¸ªè·¯ç”±æ·»åŠ åˆ°<code>my_blog/urls.py</code>ä¸­ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_blog<span class="token operator">/</span>urls<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">from</span> article<span class="token punctuation">.</span>views <span class="token keyword">import</span> article_listurlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token comment"># home</span>    path<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> article_list<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'home'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å†æŠŠç™»å½•æˆåŠŸåçš„é‡å®šå‘åœ°å€æ”¹è¿‡æ¥ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_blog<span class="token operator">/</span>settings<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># é‡å®šå‘ url</span><span class="token comment">#LOGIN_REDIRECT_URL = '/article/article-list'</span>LOGIN_REDIRECT_URL <span class="token operator">=</span> <span class="token string">'/'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·å°±æ‹¥æœ‰åœ°å€ä¸º<code>http://127.0.0.1:8000</code>é¦–é¡µå•¦ã€‚</p><h3 id="ç¾åŒ–æ¨¡æ¿"><a href="#ç¾åŒ–æ¨¡æ¿" class="headerlink" title="ç¾åŒ–æ¨¡æ¿"></a>ç¾åŒ–æ¨¡æ¿</h3><p><code>django-allauth</code>è‡ªå¸¦çš„æ¨¡æ¿æ˜¯ç®€é™‹çš„ï¼Œéœ€è¦è¦†å†™ä¸ºè‡ªå·±ç½‘ç«™çš„é£æ ¼æ‰èƒ½ä½¿ç”¨ã€‚</p><p>è¿˜è®°å¾—æˆ‘ä»¬ä¸€ç›´åœ¨ä½¿ç”¨çš„<strong>è™šæ‹Ÿç¯å¢ƒ</strong>å—ï¼Ÿæ²¡é”™ï¼Œæ‰€æœ‰é¡¹ç›®è¿è¡Œæ‰€éœ€çš„ç¬¬ä¸‰æ–¹åº“éƒ½æ˜¯ä¿å­˜åœ¨è™šæ‹Ÿç¯å¢ƒçš„æ–‡ä»¶å¤¹ä¸­çš„ï¼Œåœ¨æœ¬æ•™ç¨‹ä¸­ä¹Ÿå°±æ˜¯<code>env</code>æ–‡ä»¶å¤¹äº†ã€‚æ‰¾åˆ°ä¸‹é¢çš„è·¯å¾„ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">env<span class="token punctuation">\</span>Lib<span class="token punctuation">\</span>site-packages<span class="token punctuation">\</span>allauth<span class="token punctuation">\</span>templates<span class="token punctuation">\</span>account<span class="token punctuation">\</span>login.html<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™ä¸ª<code>login.html</code>å°±æ˜¯åŸå§‹çš„ç™»å½•æ¨¡æ¿æ–‡ä»¶äº†ã€‚è™½ç„¶å¯ä»¥ç›´æ¥ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶æ¥ä¼˜åŒ–é¡µé¢ï¼Œä½†æ˜¯è¿™æ ·åšæ˜¯å¾ˆè ¢çš„ï¼Œå› ä¸ºæ¯å½“ä½ å‡çº§åº“ã€æˆ–è€…æ¢å°ç”µè„‘éƒ¨ç½²æ—¶ï¼Œæ¨¡æ¿åˆæ¢å¤å›å»äº†ã€‚</p><p>æ­£ç¡®çš„åšæ³•æ˜¯<strong>å¤åˆ¶</strong>è¿™ä¸ª<code>login.html</code>åˆ°ä½ è‡ªå·±é¡¹ç›®çš„<code>templates</code>æ–‡ä»¶å¤¹ä¸­å»ã€‚å³ä½ éœ€è¦åœ¨é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ª<strong>å®Œå…¨ç›¸åŒçš„è·¯å¾„</strong>ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates\account\login.html<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p> Djangoä¼šä¼˜å…ˆåœ¨é¡¹ç›®ä¸­å¯»æ‰¾æ¨¡æ¿æ–‡ä»¶ï¼Œå› æ­¤åªè¦ç›¸å¯¹è·¯å¾„ç›¸åŒï¼Œåˆ™å¯ä»¥è¾¾åˆ°è¦†å†™çš„ç›®çš„ã€‚</p></blockquote><p>æ¥ä¸‹æ¥å°±å¯ä»¥æ„‰å¿«çš„å®šåˆ¶é£æ ¼äº†ã€‚</p><p>å‚è€ƒä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates\account\login.html&#123;% extends "base.html" %&#125;&#123;% load i18n %&#125;&#123;% load account socialaccount %&#125;&#123;% block title %&#125;ç™»å½•&#123;% endblock %&#125;&#123;% block content %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-12<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>            &#123;% get_providers as socialaccount_providers %&#125;            &#123;% if socialaccount_providers %&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>                &#123;% blocktrans with site.name as site_name %&#125;è¯·ç™»å½•å·²æœ‰æœ¬åœ°è´¦å·æˆ–<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123; signup_url &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ³¨å†Œ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>æ–°è´¦å·ã€‚                ä¹Ÿå¯ä»¥é€šè¿‡ç¬¬ä¸‰æ–¹ç™»å½•:&#123;% endblocktrans %&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>socialaccount_ballot<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h5</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mb-2 mt-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç¬¬ä¸‰æ–¹ç™»å½•ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>socialaccount_providers<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                  &#123;% include "socialaccount/snippets/provider_list.html" with process="login" %&#125;                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h5</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mb-2 mt-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æœ¬åœ°ç™»å½•ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            &#123;% include "socialaccount/snippets/login_extra.html" %&#125;            &#123;% else %&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>&#123;% blocktrans %&#125;If you have not created an account yet, then please            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123; signup_url &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>sign up<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span> first.&#123;% endblocktrans %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>            &#123;% endif %&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-6<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>login<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>login_form<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>POST<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>account_login<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    &#123;% csrf_token %&#125;                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id_login<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è´¦å·: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>login<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>è¯·è¾“å…¥ç”¨æˆ·åæˆ–Email<span class="token punctuation">"</span></span> <span class="token attr-name">autofocus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>autofocus<span class="token punctuation">"</span></span> <span class="token attr-name">required</span>                            <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id_login<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-text text-muted ml-1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>account_signup<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> cornflowerblue<span class="token punctuation">;</span> </span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                                æ³¨å†Œæ–°è´¦å·                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group mb-1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id_password<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            å¯†ç :                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>è¯·è¾“å…¥å¯†ç <span class="token punctuation">"</span></span> <span class="token attr-name">required</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id_password<span class="token punctuation">"</span></span>                            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-text text-muted ml-1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>secondaryAction layui-text<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>account_reset_password<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                                å¿˜è®°å¯†ç ?                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>custom-control custom-checkbox mb-2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>remember<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id_remember<span class="token punctuation">"</span></span> <span class="token attr-name">checked</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>custom-control-input<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id_remember<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>custom-control-label<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            ä¿æŒç™»å½•                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primaryAction btn btn-primary<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit_login<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç¡®è®¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>&#123;% endblock %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®é™…æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190620/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE230.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190620/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE230.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>é™¤äº†ç™»å½•é¡µé¢ä»¥å¤–ï¼Œå…¶ä»–çš„æ‰€æœ‰é¡µé¢ï¼Œå¦‚æ³¨å†Œã€é‚®ç®±è®¤è¯é¡µé¢åŠé‚®ä»¶ã€ç¬¬ä¸‰æ–¹ç™»å½•é¡µé¢ç­‰éƒ½å¯ä»¥ç”¨è¿™ç§æ–¹æ³•è¿›è¡Œè¦†å†™ã€‚æ•™ç¨‹ä¸­å°±ä¸å†èµ˜è¿°ï¼Œè¯»è€…è¯·è‡ªè¡Œå°è¯•ã€‚</p><h3 id="æ³¨å†Œ"><a href="#æ³¨å†Œ" class="headerlink" title="æ³¨å†Œ"></a>æ³¨å†Œ</h3><p>æ¥ä¸‹æ¥çœ‹çœ‹æ³¨å†Œé¡µé¢ã€‚</p><p>ç‚¹å‡»æ³¨å†ŒæŒ‰é’®ï¼Œåˆ™çœ‹åˆ°å¦‚ä¸‹é¡µé¢ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190620/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE221.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190620/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE221.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>éœ€è¦æ³¨æ„çš„æ˜¯<strong>é‚®ç®±</strong>è¿™ä¸€é¡¹å¦‚æœä½ å¡«äº†ï¼Œé‚£ä¹ˆç«™ç‚¹ä¼šè‡ªåŠ¨å‘å¡«å†™çš„é‚®ç®±å‘é€è®¤è¯é‚®ä»¶ã€‚å› æ­¤å‰é¢ç« èŠ‚ä¸­è®²è¿‡çš„å…³äºé‚®ç®±çš„é…ç½®ä¸€å®šè¦æ­£ç¡®ï¼Œå¦åˆ™å°±ä¼šå¾—åˆ°ä¸€ä¸ª<code>ConnectionRefusedError</code>çš„é”™è¯¯ã€‚ç›¸å…³çš„é…ç½®é¡¹å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_blog<span class="token operator">/</span>settings<span class="token punctuation">.</span>py<span class="token comment"># SMTPæœåŠ¡å™¨</span>EMAIL_HOST <span class="token operator">=</span> <span class="token string">'your smtp'</span><span class="token comment"># é‚®ç®±å</span>EMAIL_HOST_USER <span class="token operator">=</span> <span class="token string">'your email'</span><span class="token comment"># é‚®ç®±å¯†ç </span>EMAIL_HOST_PASSWORD <span class="token operator">=</span> <span class="token string">'your password'</span><span class="token comment"># å‘é€é‚®ä»¶çš„ç«¯å£</span>EMAIL_PORT <span class="token operator">=</span> <span class="token number">25</span><span class="token comment"># æ˜¯å¦ä½¿ç”¨ TLS</span>EMAIL_USE_TLS <span class="token operator">=</span> <span class="token boolean">True</span><span class="token comment"># é»˜è®¤çš„å‘ä»¶äºº</span>DEFAULT_FROM_EMAIL <span class="token operator">=</span> <span class="token string">'your email'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è®°å¾—ä¿®æ”¹ä¸ºä½ è‡ªå·±çš„é‚®ç®±é…ç½®ã€‚</p><p>å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯<code>django-allauth</code>æ‰€æ³¨å†Œçš„è´¦å·ä¸<code>django</code>å†…ç½®çš„æœ¬åœ°è´¦å·æ˜¯é€šç”¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´é€šè¿‡å†…ç½®<code>User</code>åˆ›å»ºçš„è´¦å·ï¼Œæ˜¯å¯ä»¥é€šè¿‡<code>django-allauth</code>ç™»å½•çš„ã€‚</p><blockquote><p>æœ‰äº†django-allauthï¼Œä¹‹å‰æ•™ç¨‹ä¸­å†™çš„ç”¨æˆ·ç™»å½•ã€æ³¨å†Œä»¥åŠå¯†ç é‡ç½®æ¨¡å—ç»Ÿç»Ÿéƒ½å¯ä»¥ä¸è¦äº†ã€‚é‚£æ—¢ç„¶å¦‚æ­¤ï¼Œåšä¸»ç»•äº†è¿™ä¹ˆå¤§ä¸ªå¼¯ä¸æ˜¯å‘äººå—ï¼Ÿè¿™ä¸ªå˜›ï¼Œå­¦ä¹ å°±æ˜¯è¦å˜ç€æ³•æŠ˜è…¾..</p></blockquote><h2 id="GitHubç™»å½•"><a href="#GitHubç™»å½•" class="headerlink" title="GitHubç™»å½•"></a>GitHubç™»å½•</h2><p>æå®šäº†æœ¬åœ°ç™»å½•ï¼Œæ¥ä¸‹æ¥çš„ç¬¬ä¸‰æ–¹ç™»å½•æ‰æ˜¯é‡ç‚¹ã€‚</p><p>ç”±äº<strong>GitHub</strong>çš„ç¬¬ä¸‰æ–¹ç™»å½•æ˜¯æœ€å®¹æ˜“çš„ï¼Œå› æ­¤ä½œä¸ºä¾‹å­æ¥è®²è§£ã€‚</p><blockquote><p>ä½œä¸ºåˆæ ¼çš„ç¨‹åºå‘˜ï¼Œæ€ä¹ˆèƒ½æ²¡æœ‰GitHubè´¦å·ï¼</p></blockquote><h3 id="GitHubæ³¨å†ŒOAuth"><a href="#GitHubæ³¨å†ŒOAuth" class="headerlink" title="GitHubæ³¨å†ŒOAuth"></a>GitHubæ³¨å†ŒOAuth</h3><p>åˆ›å»ºç¬¬ä¸‰æ–¹ç™»å½•çš„ç¬¬ä¸€æ­¥ï¼Œæ˜¯éœ€è¦åœ¨GitHubç½‘ç«™ä¸Šåˆ›å»ºOAuthåº”ç”¨ã€‚ç™»å½•GitHubè´¦å·ï¼Œç„¶åè¿›å…¥åœ°å€ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">https://github.com/settings/applications/new<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¸æ’é™¤ä»¥åè¿™ä¸ªåœ°å€ä¼šå˜ï¼Œå¦‚æœä¸å¯¹å°±éº»çƒ¦è¯»è€…åœ¨ä¸ªäººä¸»é¡µçš„<code>settings</code>é‡Œæ‰¾ä¸€æ‰¾<code>OAuth</code>çš„è®¾ç½®äº†ã€‚</p><p>è¿›å…¥é¡µé¢åï¼Œå¡«å†™ä¸€ä¸‹å†…å®¹ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190621/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE222.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190621/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE222.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>å¡«å†™çš„æ˜¯æœ¬åœ°IPï¼Œä»¥åéƒ¨ç½²åœ¨çº¿ä¸Šå†ä¿®æ”¹æˆå®é™…çš„åŸŸåã€‚</p><p>æ³¨æ„<code>callback URL</code>å¡«å†™çš„å†…å®¹ã€‚ç‚¹å‡»ç¡®å®šåï¼Œå°±å¾—åˆ°äº†åº”ç”¨çš„ä¿¡æ¯ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190621/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE224.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190621/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE224.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>å…¶ä¸­çš„<code>Client ID</code>å’Œ<code>Client Secret</code>å°±æ˜¯è¦ç”¨åˆ°çš„å‡­è¯ã€‚</p><h3 id="Djangoåå°é…ç½®"><a href="#Djangoåå°é…ç½®" class="headerlink" title="Djangoåå°é…ç½®"></a>Djangoåå°é…ç½®</h3><p>ç„¶åå¯¹Djangoåå°è¿›è¡Œè®¾ç½®ã€‚</p><p>è¿›å…¥åå°ï¼Œä½ ä¼šå‘ç°å¤šäº†å‡ ä¸ªæ ç›®ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190621/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE225.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190621/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE225.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>æ‰“å¼€<code>Sites</code>ï¼Œå°†<code>example.com</code>ä¿®æ”¹ä¸ºåšå®¢åŸŸåã€‚å¼€å‘æ—¶åˆ™ä¿®æ”¹ä¸ºæœ¬åœ°IPï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190621/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE226.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190621/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE226.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ç„¶åè¿›å…¥<code>Social applications</code>ï¼Œæ·»åŠ ä¸€æ¡<code>applications</code>å¦‚ä¸‹ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190621/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE228.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190621/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE228.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>æ³¨æ„æœ€ä¸‹é¢çš„<code>Sites</code>æ <strong>ä¸€å®šè¦æŠŠåˆšæ‰æ·»åŠ çš„ç«™ç‚¹é€‰æ‹©åˆ°å³è¾¹å»</strong>ã€‚</p><p>å›åˆ°<code>django-allauth</code>çš„ç™»å½•é¡µé¢ï¼Œç‚¹å‡»<code>github</code>ç™»å½•ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190621/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE229.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190621/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE229.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>å®ç°äº†GitHubç™»å½•ã€‚</p><h2 id="allauthé…ç½®é¡¹"><a href="#allauthé…ç½®é¡¹" class="headerlink" title="allauthé…ç½®é¡¹"></a>allauthé…ç½®é¡¹</h2><p><strong>æŒ‘å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„è®²ä¸€ä¸‹ã€‚</strong></p><p><code>ACCOUNT_EMAIL_VERIFICATION = &#39;optional&#39; / &#39;mandatory&#39; / &#39;none&#39;</code>ï¼šå½“å…¶ä¸º<code>mandatory</code>æ—¶ï¼Œæœ¬åœ°æ³¨å†Œçš„ç”¨æˆ·å¿…é¡»å…ˆéªŒè¯é‚®ç®±æ‰å¯ä»¥ç™»å½•ã€‚<code>optional</code>å’Œ<code>none</code>éƒ½ä¸è¦æ±‚éªŒè¯é‚®ç®±ï¼ŒåŒºåˆ«æ˜¯<code>optional</code>ä»ç„¶ä¼šå‘é€éªŒè¯é‚®ä»¶ï¼Œè€Œ<code>none</code>è¿è®¤è¯é‚®ä»¶éƒ½ä¸ä¼šå‘é€ã€‚</p><p><code>SOCIALACCOUNT_EMAIL_VERIFICATION = &#39;optional&#39; / &#39;mandatory&#39; / &#39;none&#39;</code>ï¼šåŒç†ï¼Œä½†æ˜¯ä½œç”¨äºç¬¬ä¸‰æ–¹è´¦å·çš„æ³¨å†Œã€‚</p><p><code>ACCOUNT_AUTHENTICATION_METHOD = &#39;username_email&#39; / &#39;user&#39; / &#39;email&#39;</code>ï¼šæŒ‡å®šç™»å½•æ–¹æ³•ï¼Œå³é€šè¿‡ç”¨æˆ·åã€é‚®ç®±è¿›è¡Œç™»å½•ï¼Œæˆ–è€…ä¸¤è€…å‡å¯ã€‚</p><p><code>ACCOUNT_EMAIL_REQUIRED =  True / False</code>ï¼šæ³¨å†Œæœ¬åœ°ç”¨æˆ·æ—¶ï¼Œæ˜¯å¦å¿…é¡»å¡«å†™é‚®ç®±ã€‚</p><p>é™¤æ­¤ä¹‹å¤–è¿˜æœ‰å¾ˆå¤šé…ç½®é¡¹ï¼Œè¯¦ç»†äº†è§£è¯·æŸ¥é˜…<a href="https://django-allauth.readthedocs.io/en/latest/configuration.html">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« å­¦ä¹ äº†é€šè¿‡<code>django-allauth</code>å®ç°æœ¬åœ°åŠGitHubç™»å½•çš„åŠŸèƒ½ã€‚å¾®åšã€å¾®ä¿¡çš„ç™»å½•æ–¹å¼å¤§è‡´éƒ½éµå¾ªè¿™ä¸ªæµç¨‹ï¼›æœ¬ç« è™½ç„¶åŠ è½½äº†å¾®åšçš„æ¥å£ï¼Œä½†æ˜¯é™äºç¯‡å¹…å¹¶æ²¡æœ‰é…ç½®ï¼Œè¯·è¯»è€…æŸ¥é˜…å®˜æ–¹æ–‡æ¡£å»å®ç°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯å›½å†…çš„ç¬¬ä¸‰æ–¹ç™»å½•å¤šåŠéœ€è¦ä¸€ä¸¤å¤©æ—¶é—´å»ç”³è¯·ã€å®¡æ ¸ï¼Œè¦æ›´åŠ éº»çƒ¦ä¸€äº›ã€‚</p><p>å¦å¤–è¿˜å‰©ä¸‹å†™å…¥å£ã€åˆ é™¤æ—§åŠŸèƒ½ç­‰æ”¶å°¾å·¥ä½œï¼Œå°±äº¤ç»™è¯»è€…è‡ªå·±å»å®Œæˆäº†ã€‚</p><blockquote><p>æç¤ºä¸€ä¸‹ï¼Œç™»å½•çš„é€†å‘è§£æåœ°å€ä¸º<code>&#123;% url 'account_login' %&#125;</code>ï¼Œæ³¨å†Œä¸º<code>&#123;% url 'account_signup' %&#125;</code>ã€‚è¿™äº›åœ¨åŸå§‹æ¨¡æ¿æ–‡ä»¶æˆ–å®˜æ–¹ç½‘ç«™éƒ½èƒ½æŸ¥åˆ°ã€‚</p></blockquote><hr><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#100;&#117;&#x73;&#97;&#105;&#112;&#x68;&#111;&#116;&#x6f;&#x40;&#102;&#111;&#x78;&#x6d;&#x61;&#105;&#x6c;&#x2e;&#x63;&#x6f;&#109;">&#100;&#117;&#x73;&#97;&#105;&#112;&#x68;&#111;&#116;&#x6f;&#x40;&#102;&#111;&#x78;&#x6d;&#x61;&#105;&#x6c;&#x2e;&#x63;&#x6f;&#109;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--37.æ—¥å¿—è®°å½•</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/37.ri-zhi-ji-lu/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/37.ri-zhi-ji-lu/</url>
      
        <content type="html"><![CDATA[<p>ä¸Šä¸€ç« å­¦ä¹ äº†è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå¾ˆå¥½ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ç»å°½è„‘æ±å†™å‡ºä¸€ä»½å…¨é¢çš„æµ‹è¯•ï¼Œæ¥ä¿è¯ä»£ç æ°¸è¿œå¥åº·äº†ã€‚</p><p>è¯è™½å¦‚æ­¤ï¼Œä½†æ˜¯ä½œä¸ºä¸€ä¸ªç‹¬ç«‹å¼€å‘è€…<strong>å¾ˆéš¾å†™å‡ºçœŸæ­£å…¨é¢çš„æµ‹è¯•ä»£ç </strong>ã€‚è¿™æ˜¯å› ä¸ºç”¨æˆ·åœ¨ä½¿ç”¨ä½ çš„ç½‘ç«™æ—¶å¯ä¸ä¼šå¾ªè§„è¹ˆçŸ©ï¼Œè€Œæ˜¯ä¼šä»¥å„ç§æ€ªå¼‚çš„å§¿åŠ¿æµè§ˆç½‘é¡µã€ä¸Šä¼ æ•°æ®ã€‚ä½†è¿™ä¹Ÿä¸æ˜¯åäº‹ï¼Œç”¨æˆ·å°±æ˜¯å¤©ç„¶çš„æµ‹è¯•äººå‘˜ï¼Œä»–ä»¬ä¼šå¾ˆå¯çˆ±çš„å¸®ä½ æ‰¾å‡ºä¸€å¤§å †çš„bugï¼Œé™ªä½ åº¦è¿‡éš¾çœ çš„å¤œæ™šï¼ˆä¼´éšç€ç¼–ç¨‹èƒ½åŠ›çš„æå‡ï¼‰ã€‚</p><p>ç°åœ¨çš„é—®é¢˜æ˜¯ï¼Œå¼€å‘è€…å¦‚ä½•å¾—çŸ¥ç”¨æˆ·åˆ°åº•é‡åˆ°äº†å“ªäº›é—®é¢˜ï¼Ÿç”¨æˆ·ä»¬å¤§éƒ¨åˆ†éƒ½ä¸ä½ ç´ æ˜§å¹³ç”Ÿï¼Œåˆ†éƒ¨åœ¨ä¸–ç•Œå„åœ°ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œéƒ¨ç½²åœ¨çº¿ä¸Šæ—¶ç”±äºé…ç½®äº†<code>DEBUG = False</code>ï¼Œå‡ºé”™æ—¶å¹¶ä¸ä¼šå‡ºç°æŠ¥é”™é¡µé¢ï¼Œè¿ç”¨æˆ·è‡ªå·±éƒ½ä¸æ¸…æ¥šåˆ°åº•æ˜¯å“ªé‡Œæœ‰bugã€‚</p><p>Djangoç»™ä½ çš„ç­”æ¡ˆï¼š<strong>æ—¥å¿—</strong>ã€‚</p><h2 id="æ—¥å¿—çš„ç»„æˆ"><a href="#æ—¥å¿—çš„ç»„æˆ" class="headerlink" title="æ—¥å¿—çš„ç»„æˆ"></a>æ—¥å¿—çš„ç»„æˆ</h2><p><strong>æ—¥å¿—</strong>æ˜¯æŒ‡ç¨‹åºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯¹çŠ¶æ€ã€æ—¶é—´ã€é”™è¯¯ç­‰çš„è®°å½•ã€‚å³æŠŠè¿è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„ä¿¡æ¯è¾“å‡ºæˆ–ä¿å­˜èµ·æ¥ï¼Œä¾›å¼€å‘è€…æŸ¥é˜…ã€‚</p><p>Djangoä½¿ç”¨Pythonå†…ç½®çš„<code>logging</code>æ¨¡å—å¤„ç†æ—¥å¿—ã€‚å…³äºè¯¥æ¨¡å—çš„ä½¿ç”¨ï¼Œ<a href="https://docs.python.org/3/howto/logging.html">Pythonæ–‡æ¡£</a>é‡Œæœ‰éå¸¸è¯¦ç»†çš„è®¨è®ºã€‚å¦‚æœä½ ä»æœªç”¨è¿‡ï¼Œæœ¬æ–‡æä¾›ä¸€ä¸ªå¿«é€Ÿå…¥é—¨ã€‚</p><p>æ—¥å¿—äº‹ä»¶çš„ä¿¡æ¯æµç¨‹å¦‚ä¸‹ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190716/logging_flow.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190716/logging_flow.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><blockquote><p>è¿™ä¸ªå›¾çœ‹ä¸æ‡‚ä¹Ÿæ²¡å…³ç³»ã€‚ä»¥åä½ éœ€è¦æ·±åº¦ä½¿ç”¨æ—¥å¿—æ—¶ï¼Œä¼šå›æ¥ä»”ç»†ç ”ç©¶å®ƒçš„ã€‚</p></blockquote><p>ä¸€ä»½æ—¥å¿—é…ç½®ç”±<code>Loggers</code>ã€<code>Handlers</code>ã€<code>Filters</code>ã€<code>Formatters</code>å››éƒ¨åˆ†ç»„æˆã€‚</p><h3 id="Loggers"><a href="#Loggers" class="headerlink" title="Loggers"></a>Loggers</h3><p><code>Logger</code>å³<strong>è®°å½•å™¨</strong>ï¼Œæ˜¯æ—¥å¿—ç³»ç»Ÿçš„å…¥å£ã€‚<strong>å®ƒæœ‰ä¸‰ä¸ªé‡è¦çš„å·¥ä½œ</strong>ï¼š</p><ul><li>å‘åº”ç”¨ç¨‹åºï¼ˆä¹Ÿå°±æ˜¯ä½ çš„é¡¹ç›®ï¼‰å…¬å¼€å‡ ç§æ–¹æ³•ï¼Œä»¥ä¾¿è¿è¡Œæ—¶è®°å½•æ¶ˆæ¯</li><li>æ ¹æ®ä¼ é€’ç»™Loggerçš„æ¶ˆæ¯çš„ä¸¥é‡æ€§ï¼Œç¡®å®šå‡ºéœ€è¦å¤„ç†çš„æ¶ˆæ¯</li><li>å°†éœ€è¦å¤„ç†çš„æ¶ˆæ¯ä¼ é€’ç»™æ‰€æœ‰æ„Ÿå…´è¶£çš„å¤„ç†å™¨ï¼ˆ<code>Handler</code>ï¼‰</li></ul><p>æ¯ä¸€æ¡å†™å…¥loggerçš„æ¶ˆæ¯éƒ½æ˜¯ä¸€æ¡æ—¥å¿—è®°å½•ã€‚æ¯ä¸€æ¡æ—¥å¿—è®°å½•ä¹ŸåŒ…å«<strong>çº§åˆ«</strong>ï¼Œä»£è¡¨å¯¹åº”æ¶ˆæ¯çš„ä¸¥é‡ç¨‹åº¦ã€‚å¸¸ç”¨çš„çº§åˆ«å¦‚ä¸‹ï¼š</p><ul><li><code>DEBUG</code>ï¼šæ’æŸ¥æ•…éšœæ—¶ä½¿ç”¨çš„ä½çº§åˆ«ç³»ç»Ÿä¿¡æ¯ï¼Œé€šå¸¸å¼€å‘æ—¶ä½¿ç”¨</li><li><code>INFO</code>ï¼šä¸€èˆ¬çš„ç³»ç»Ÿä¿¡æ¯ï¼Œå¹¶ä¸ç®—é—®é¢˜</li><li><code>WARNING</code>ï¼šæè¿°ç³»ç»Ÿå‘ç”Ÿçš„å°é—®é¢˜çš„ä¿¡æ¯ï¼Œä½†é€šå¸¸ä¸å½±å“åŠŸèƒ½</li><li><code>ERROR</code>ï¼šæè¿°ç³»ç»Ÿå‘ç”Ÿçš„å¤§é—®é¢˜çš„ä¿¡æ¯ï¼Œå¯èƒ½ä¼šå¯¼è‡´åŠŸèƒ½ä¸æ­£å¸¸</li><li><code>CRITICAL</code>ï¼šæè¿°ç³»ç»Ÿå‘ç”Ÿä¸¥é‡é—®é¢˜çš„ä¿¡æ¯ï¼Œåº”ç”¨ç¨‹åºæœ‰å´©æºƒé£é™©</li></ul><p>å½“loggerå¤„ç†ä¸€æ¡æ¶ˆæ¯æ—¶ï¼Œä¼šå°†è‡ªå·±çš„æ—¥å¿—çº§åˆ«å’Œè¿™æ¡æ¶ˆæ¯çš„æ—¥å¿—çº§åˆ«åšå¯¹æ¯”ã€‚å¦‚æœæ¶ˆæ¯çš„çº§åˆ«åŒ¹é…æˆ–è€…é«˜äºloggerçš„æ—¥å¿—çº§åˆ«ï¼Œå®ƒå°±ä¼šè¢«è¿›ä¸€æ­¥å¤„ç†ï¼›å¦åˆ™è¿™æ¡æ¶ˆæ¯å°±ä¼šè¢«å¿½ç•¥æ‰ã€‚</p><p>å½“loggerç¡®å®šäº†ä¸€æ¡æ¶ˆæ¯éœ€è¦å¤„ç†ä¹‹åï¼Œä¼šæŠŠå®ƒä¼ ç»™<code>Handler</code>ã€‚</p><h3 id="Handlers"><a href="#Handlers" class="headerlink" title="Handlers"></a>Handlers</h3><p><code>Handler</code>å³<strong>å¤„ç†å™¨</strong>ï¼Œå®ƒçš„ä¸»è¦åŠŸèƒ½æ˜¯<strong>å†³å®šå¦‚ä½•å¤„ç†loggerä¸­æ¯ä¸€æ¡æ¶ˆæ¯</strong>ï¼Œæ¯”å¦‚æŠŠæ¶ˆæ¯è¾“å‡ºåˆ°å±å¹•ã€æ–‡ä»¶æˆ–è€…Emailä¸­ã€‚</p><p>å’Œloggerä¸€æ ·ï¼Œhandlerä¹Ÿæœ‰<strong>çº§åˆ«</strong>çš„æ¦‚å¿µã€‚å¦‚æœä¸€æ¡æ—¥å¿—è®°å½•çš„çº§åˆ«ä¸åŒ¹é…æˆ–è€…ä½äºhandlerçš„æ—¥å¿—çº§åˆ«ï¼Œåˆ™ä¼šè¢«handlerå¿½ç•¥ã€‚</p><p>ä¸€ä¸ªloggerå¯ä»¥æœ‰å¤šä¸ªhandlerï¼Œæ¯ä¸€ä¸ªhandlerå¯ä»¥æœ‰ä¸åŒçš„æ—¥å¿—çº§åˆ«ã€‚è¿™æ ·å°±å¯ä»¥æ ¹æ®æ¶ˆæ¯çš„é‡è¦æ€§ä¸åŒï¼Œæ¥æä¾›ä¸åŒç±»å‹çš„è¾“å‡ºã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªhandleræŠŠ<code>ERROR</code>å’Œ<code>CRITICAL</code>æ¶ˆæ¯å‘åˆ°ä½ çš„Emailï¼Œå†æ·»åŠ å¦ä¸€ä¸ª handleræŠŠæ‰€æœ‰çš„æ¶ˆæ¯ï¼ˆåŒ…æ‹¬<code>ERROR</code>å’Œ<code>CRITICAL</code>æ¶ˆæ¯ï¼‰ä¿å­˜åˆ°æ–‡ä»¶é‡Œã€‚</p><h3 id="Filters"><a href="#Filters" class="headerlink" title="Filters"></a>Filters</h3><p><code>Filter</code>å³<strong>è¿‡æ»¤å™¨</strong>ã€‚åœ¨æ—¥å¿—è®°å½•ä»loggerä¼ åˆ°handlerçš„è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨<code>Filter</code>æ¥<strong>åšé¢å¤–çš„æ§åˆ¶</strong>ã€‚ä¾‹å¦‚åªå…è®¸æŸä¸ªç‰¹å®šæ¥æºçš„<code>ERROR</code>æ¶ˆæ¯è¾“å‡ºã€‚</p><p>Filterè¿˜è¢«ç”¨æ¥åœ¨æ—¥å¿—è¾“å‡ºä¹‹å‰å¯¹æ—¥å¿—è®°å½•åšä¿®æ”¹ã€‚ä¾‹å¦‚å½“æ»¡è¶³ä¸€å®šæ¡ä»¶æ—¶ï¼ŒæŠŠæ—¥å¿—è®°å½•ä» <code>ERROR</code> é™åˆ° <code>WARNING</code> çº§åˆ«ã€‚</p><p>Filteråœ¨loggerå’Œhandlerä¸­éƒ½å¯ä»¥æ·»åŠ ï¼›å¤šä¸ªfilterå¯ä»¥é“¾æ¥èµ·æ¥ä½¿ç”¨ï¼Œæ¥åšå¤šé‡è¿‡æ»¤æ“ä½œã€‚</p><h3 id="Formatters"><a href="#Formatters" class="headerlink" title="Formatters"></a>Formatters</h3><p><code>Formatter</code>å³æ ¼å¼åŒ–å™¨ï¼Œä¸»è¦åŠŸèƒ½æ˜¯<strong>ç¡®å®šæœ€ç»ˆè¾“å‡ºçš„å½¢å¼å’Œå†…å®¹</strong>ã€‚</p><h2 id="æ—¥å¿—é…ç½®ç¤ºä¾‹"><a href="#æ—¥å¿—é…ç½®ç¤ºä¾‹" class="headerlink" title="æ—¥å¿—é…ç½®ç¤ºä¾‹"></a>æ—¥å¿—é…ç½®ç¤ºä¾‹</h2><p>è¯´äº†è¿™ä¹ˆå¤šè„‘å£³éƒ½è¯´æ™•äº†ï¼Œæ¥ä¸‹æ¥çœ‹ä¸¤ä¸ªç¤ºä¾‹ã€‚</p><h3 id="ç®€å•ç¤ºä¾‹"><a href="#ç®€å•ç¤ºä¾‹" class="headerlink" title="ç®€å•ç¤ºä¾‹"></a>ç®€å•ç¤ºä¾‹</h3><p>åœ¨Djangoä¸­å¯ä»¥é€šè¿‡å­—å…¸çš„å½¢å¼å¯¹æ•´ä¸ªé¡¹ç›®çš„æ—¥å¿—è¿›è¡Œé…ç½®ï¼Œé…ç½®çš„ä½ç½®å½“ç„¶æ˜¯åœ¨<code>settings.py</code>ä¸­äº†ã€‚ä¸€ä¸ªç®€å•çš„é…ç½®å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_blog<span class="token operator">/</span>settings<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">import</span> osLOGGING <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    <span class="token string">'version'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>    <span class="token string">'disable_existing_loggers'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span>    <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>        <span class="token string">'file'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>            <span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'logging.FileHandler'</span><span class="token punctuation">,</span>            <span class="token string">'filename'</span><span class="token punctuation">:</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>BASE_DIR<span class="token punctuation">,</span> <span class="token string">'logs/debug.log'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token string">'loggers'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>        <span class="token string">'django'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>            <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'file'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>            <span class="token string">'propagate'</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å­—å…¸ä¸­çš„<code>version</code>æŒ‡æ˜äº†é…ç½®çš„ç‰ˆæœ¬ï¼›<code>disable_existing_loggers</code>æŒ‡æ˜æ˜¯å¦ç¦æ­¢é»˜è®¤é…ç½®çš„è®°å½•å™¨ã€‚è¿™ä¸¤é¡¹é€šå¸¸ä¸éœ€è¦å»æ”¹åŠ¨ï¼Œé‡ç‚¹çœ‹ä¸‹<code>loggers</code>å’Œ<code>handlers</code>çš„é…ç½®ï¼š</p><ul><li>å¦‚å‰é¢è¯´ï¼Œä¸€æ¡æ¶ˆæ¯é¦–å…ˆä¼ é€’ç»™loggerã€‚Djangoä¸­å†…ç½®äº†å‡ ç§è®°å½•å™¨ï¼Œæ¯”å¦‚è¿™é‡Œç”¨åˆ°çš„<code>Django</code>è®°å½•å™¨ï¼Œå®ƒä¼šæ¥æ”¶Djangoå±‚æ¬¡ç»“æ„ä¸­çš„æ‰€æœ‰æ¶ˆæ¯ã€‚ç„¶åæˆ‘ä»¬å®šä¹‰äº†éœ€è¦å¤„ç†<code>DEBUG</code>ä»¥ä¸Šçº§åˆ«çš„æ¶ˆæ¯ï¼Œå¹¶æŠŠè¿™äº›æ¶ˆæ¯ä¼ é€’ç»™åå«<code>file</code>çš„å¤„ç†å™¨ã€‚<code>&#39;propagate&#39;: True</code>æ„æ€æ˜¯æœ¬è®°å½•å™¨å¤„ç†è¿‡çš„æ¶ˆæ¯å…¶ä»–å¤„ç†å™¨ä¹Ÿå¯ä»¥ç»§ç»­å¤„ç†ã€‚</li><li>ç°åœ¨æ¶ˆæ¯æ¥åˆ°åå«<code>file</code>çš„<code>handlers</code>ä¸­äº†ã€‚è¿™ä¸ªå¤„ç†å™¨å®šä¹‰äº†æ¶ˆæ¯å¤„ç†çº§åˆ«ä»ç„¶ä¸ºDEBUGï¼Œåœ¨classä¸­å®šä¹‰å°†æ¶ˆæ¯è¾“å‡ºåˆ°æ–‡ä»¶ä¸­å»ï¼Œæ–‡ä»¶åœ°å€ä¸ºé¡¹ç›®ç›®å½•çš„<code>logs/debug.log</code>ã€‚</li><li>å› ä¸ºè¿™é‡Œæ²¡æœ‰é…ç½®<code>filters</code>å’Œ<code>formatters</code>ï¼Œå› æ­¤ä¼šé‡‡ç”¨é»˜è®¤çš„è®¾ç½®ã€‚</li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯æ—¥å¿—çš„è¾“å‡ºæ–‡ä»¶çš„ç›®å½•<code>logs/</code>ä¸€å®šè¦æå‰åˆ›å»ºå¥½ï¼Œå¹¶ä¸”ç¡®ä¿é¡¹ç›®æ‹¥æœ‰æ­¤ç›®å½•çš„å†™å…¥æƒé™ã€‚</p><p>è¿™ä¸ªæ—¥å¿—ç³»ç»Ÿå°±é…ç½®å¥½äº†ï¼æ¥ä¸‹æ¥è¿è¡Œé¡¹ç›®ï¼Œéšä¾¿åˆ·æ–°å‡ ä¸ªé¡µé¢çœ‹çœ‹<code>debug.log</code>ä¸­æœ‰æ²¡æœ‰å†™å…¥æ¶ˆæ¯ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">logs<span class="token operator">/</span>debug<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token number">0.001</span><span class="token punctuation">)</span>             SELECT name<span class="token punctuation">,</span> <span class="token builtin">type</span> FROM sqlite_master            WHERE <span class="token builtin">type</span> <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token string">'table'</span><span class="token punctuation">,</span> <span class="token string">'view'</span><span class="token punctuation">)</span> AND NOT name<span class="token operator">=</span><span class="token string">'sqlite_sequence'</span>            ORDER BY name<span class="token punctuation">;</span> args<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">(</span><span class="token number">0.000</span><span class="token punctuation">)</span> SELECT <span class="token string">"django_migrations"</span><span class="token punctuation">.</span><span class="token string">"app"</span><span class="token punctuation">,</span> <span class="token string">"django_migrations"</span><span class="token punctuation">.</span><span class="token string">"name"</span> FROM <span class="token string">"django_migrations"</span><span class="token punctuation">;</span> args<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>debug.log</code>æ–‡ä»¶ä¸­å‡ºç°äº†ä¸€å¤§å †å†—é•¿çš„ä¿¡æ¯ï¼Œå› ä¸º<code>DEBUG</code>çº§åˆ«ä¼šåŒ…å«æ‰€æœ‰çš„æ•°æ®åº“æŸ¥è¯¢è®°å½•ã€‚</p><blockquote><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä»…åœ¨è°ƒè¯•æ¨¡å¼ä¸‹æ‰ä¼šæ˜¾ç¤º<code>DEBUG</code>çº§åˆ«çš„æ¶ˆæ¯æ—¥å¿—ï¼Œéƒ¨ç½²åœ¨çº¿ä¸Šæ—¶åªä¼šå°†<code>INFO</code>æˆ–ä»¥ä¸Šçš„ä¿¡æ¯è¿›è¡Œè®°å½•ã€‚</p></blockquote><p>å†è¯•è¯•åˆ«çš„ã€‚æŠŠä¸Šé¢ä»£ç ä¸­è®°å½•å™¨å’Œå¤„ç†å™¨çš„æ—¥å¿—çº§åˆ«éƒ½æ”¹ä¸º<code>INFO</code>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">LOGGING <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>        <span class="token string">'file'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'INFO'</span><span class="token punctuation">,</span>            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token string">'loggers'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>        <span class="token string">'django'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'INFO'</span><span class="token punctuation">,</span>            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å†åˆ·æ–°å‡ æ¬¡ç•Œé¢ï¼Œçœ‹çœ‹è¾“å‡ºçš„å†…å®¹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token string">"GET /article/article-list/ HTTP/1.1"</span> <span class="token number">200</span> <span class="token number">14438</span><span class="token string">"GET /article/article-detail/32/ HTTP/1.1"</span> <span class="token number">200</span> <span class="token number">33364</span><span class="token string">"GET /accounts/login/ HTTP/1.1"</span> <span class="token number">200</span> <span class="token number">7180</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ¬¡æ¸…çˆ½å¤šäº†ï¼Œè¾“å‡ºçš„ä¸»è¦æ˜¯é¡µé¢çš„æ‹‰å–ä¿¡æ¯ã€‚</p><p>è®©æˆ‘ä»¬å†çœ‹çœ‹<code>ERROR</code>ä¿¡æ¯é•¿ä»€ä¹ˆæ ·çš„ã€‚åœ¨åœ°å€æ è¾“å…¥ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ç« è¯¦æƒ…é¡µé¢åœ°å€ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">http://127.0.0.1:8000/article/article-detail/9999/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¾ˆæ˜æ˜¾è¿™ä¼šå¾—åˆ°ä¸€ä¸ªæ•°æ®ä¸å­˜åœ¨çš„æŠ¥é”™ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">Internal Server Error<span class="token punctuation">:</span> <span class="token operator">/</span>article<span class="token operator">/</span>article<span class="token operator">-</span>detail<span class="token operator">/</span><span class="token number">9999</span><span class="token operator">/</span>Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>  File <span class="token string">"E:\django_project\env\lib\site-packages\django\core\handlers\exception.py"</span><span class="token punctuation">,</span> line <span class="token number">34</span><span class="token punctuation">,</span> <span class="token keyword">in</span> inner    response <span class="token operator">=</span> get_response<span class="token punctuation">(</span>request<span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>article<span class="token punctuation">.</span>models<span class="token punctuation">.</span>ArticlePost<span class="token punctuation">.</span>DoesNotExist<span class="token punctuation">:</span> ArticlePost matching query does <span class="token keyword">not</span> exist<span class="token punctuation">.</span><span class="token string">"GET /article/article-detail/9999/ HTTP/1.1"</span> <span class="token number">500</span> <span class="token number">80792</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>ERROR</code>æ—¥å¿—è¾“å‡ºäº†æ•´ä¸ªbugçš„å›æº¯ï¼Œå’Œä½ åœ¨æµè§ˆå™¨ä¸­çš„æŠ¥é”™æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œè¿™äº›ä¿¡æ¯å°±éå¸¸çš„æœ‰ç”¨äº†ã€‚åŸºæœ¬ä¸Š<code>ERROR</code>ä¿¡æ¯èƒ½å¤Ÿæš´éœ²å‡ºç”¨æˆ·åœ¨ä½¿ç”¨ä½ çš„ç½‘ç«™è¿‡ç¨‹ä¸­çš„å¤§éƒ¨åˆ†é—®é¢˜ï¼›ä¹Ÿå°±æ˜¯è¯´æ¯ä¸€ä¸ª<code>ERROR</code>éƒ½æ˜¯éœ€è¦ä½ å»è§£å†³æ‰çš„ã€‚<code>ERROR</code>ä¿¡æ¯çš„<strong>é”™è¯¯ç </strong>é€šå¸¸éƒ½æ˜¯â€œ500â€ï¼Œä¹Ÿå°±æ˜¯<strong>æœåŠ¡å™¨å†…éƒ¨é”™è¯¯</strong>çš„ä»£ç ã€‚</p><p>ä¸è¿‡ä»”ç»†æƒ³æƒ³ï¼Œä¼¼ä¹æ‰¾ä¸åˆ°å¯¹åº”çš„èµ„æºåœ¨å¾ˆå¤šæ—¶å€™å¹¶ä¸æ˜¯bugï¼Œè€Œæ˜¯ç”¨æˆ·åœ¨è¾“å…¥urlæ—¶è‡ªå·±çŠ¯äº†é”™è¯¯ã€‚æ‰€ä»¥æˆ‘ä»¬æŠŠæ–‡ç« è¯¦æƒ…è§†å›¾çš„<code>ArticlePost.objects.get(id=id)</code>æ”¹æˆ<code>get_object_or_404(ArticlePost, id=id)</code>è¯•è¯•ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> get_object_or_404<span class="token keyword">def</span> <span class="token function">article_detail</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># å–å‡ºç›¸åº”çš„æ–‡ç« </span>    <span class="token comment"># article = ArticlePost.objects.get(id=id)</span>    article <span class="token operator">=</span> get_object_or_404<span class="token punctuation">(</span>ArticlePost<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token operator">=</span><span class="token builtin">id</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœåŠ¡å™¨é‡å¯åå†æ¬¡åˆ·æ–°ä¸€ä¸ªä¸å­˜åœ¨çš„é¡µé¢ï¼Œçœ‹çœ‹æ—¥å¿—ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">Not Found<span class="token punctuation">:</span> <span class="token operator">/</span>article<span class="token operator">/</span>article<span class="token operator">-</span>detail<span class="token operator">/</span><span class="token number">9999</span><span class="token operator">/</span><span class="token string">"GET /article/article-detail/9999/ HTTP/1.1"</span> <span class="token number">404</span> <span class="token number">1780</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç°åœ¨å®ƒä¸æ˜¯ä¸€æ¡<code>ERROR</code>ä¿¡æ¯äº†ï¼Œè€Œæ˜¯å˜ä¸ºäº†<code>WARNING</code>ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰äº†é”™è¯¯å›æº¯ï¼ˆé”™è¯¯ç ä¹Ÿç”± 500 å˜æˆäº† 404ï¼‰ã€‚è¿™é‡Œå°±èƒ½çœ‹å‡ºè¿™ä¸¤ä¸ªæ–¹æ³•çš„é‡è¦åŒºåˆ«äº†ï¼›åœ¨é¡¹ç›®ä¸­åˆ°åº•é€‰æ‹©å“ªä¸ªæ²¡æœ‰å®šè®ºï¼Œè¿˜æ˜¯ä»¥ä½ çš„å…·ä½“éœ€æ±‚å†³å®šã€‚</p><h3 id="å¤æ‚ç¤ºä¾‹"><a href="#å¤æ‚ç¤ºä¾‹" class="headerlink" title="å¤æ‚ç¤ºä¾‹"></a>å¤æ‚ç¤ºä¾‹</h3><p>æ¥ä¸‹æ¥å†çœ‹ä¸€ä¸ªå¤æ‚çš„æ—¥å¿—é…ç½®ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">LOGGING <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    <span class="token string">'version'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>    <span class="token string">'disable_existing_loggers'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span>    <span class="token string">'formatters'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>        <span class="token string">'verbose'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>            <span class="token string">'format'</span><span class="token punctuation">:</span> <span class="token string">'&#123;levelname&#125; &#123;asctime&#125; &#123;module&#125; &#123;process:d&#125; &#123;thread:d&#125; &#123;message&#125;'</span><span class="token punctuation">,</span>            <span class="token string">'style'</span><span class="token punctuation">:</span> <span class="token string">'&#123;'</span><span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token string">'simple'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>            <span class="token string">'format'</span><span class="token punctuation">:</span> <span class="token string">'&#123;levelname&#125; &#123;message&#125;'</span><span class="token punctuation">,</span>            <span class="token string">'style'</span><span class="token punctuation">:</span> <span class="token string">'&#123;'</span><span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token string">'filters'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>        <span class="token string">'require_debug_true'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>            <span class="token string">'()'</span><span class="token punctuation">:</span> <span class="token string">'django.utils.log.RequireDebugTrue'</span><span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>        <span class="token string">'console'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'INFO'</span><span class="token punctuation">,</span>            <span class="token string">'filters'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'require_debug_true'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'logging.StreamHandler'</span><span class="token punctuation">,</span>            <span class="token string">'formatter'</span><span class="token punctuation">:</span> <span class="token string">'simple'</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token string">'mail_admins'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'ERROR'</span><span class="token punctuation">,</span>            <span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'django.utils.log.AdminEmailHandler'</span><span class="token punctuation">,</span>            <span class="token string">'formatter'</span><span class="token punctuation">:</span> <span class="token string">'verbose'</span><span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token string">'file'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'WARNING'</span><span class="token punctuation">,</span>            <span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'logging.FileHandler'</span><span class="token punctuation">,</span>            <span class="token string">'filename'</span><span class="token punctuation">:</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>BASE_DIR<span class="token punctuation">,</span> <span class="token string">'logs/debug.log'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">'formatter'</span><span class="token punctuation">:</span> <span class="token string">'verbose'</span><span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token string">'loggers'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>        <span class="token string">'django'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>            <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'console'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token string">'propagate'</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token string">'django.request'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>            <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'file'</span><span class="token punctuation">,</span> <span class="token string">'mail_admins'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'WARNING'</span><span class="token punctuation">,</span>            <span class="token string">'propagate'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è®©æˆ‘ä»¬æ¥åˆ†è§£ä¸€ä¸‹æ­¤é…ç½®ã€‚</p><p>é…ç½®ä¸­å®šä¹‰äº†<strong>ä¸¤ä¸ªæ ¼å¼åŒ–å™¨</strong>ï¼š</p><ul><li><code>verbose</code>ï¼šè¯¦ç»†çš„æ ¼å¼åŒ–å™¨ï¼Œä¾æ¬¡è¾“å‡ºï¼šæ¶ˆæ¯çº§åˆ«ã€å‘ç”Ÿæ—¶é—´ã€æŠ›å‡ºæ¨¡å—ã€è¿›ç¨‹IDã€çº¿ç¨‹IDã€æç¤ºä¿¡æ¯</li><li><code>simple</code>ï¼šç®€è¦çš„æ ¼å¼åŒ–å™¨ï¼Œä»…è¾“å‡ºæ¶ˆæ¯çº§åˆ«å’Œæç¤ºä¿¡æ¯</li></ul><p><strong>ä¸€ä¸ªè¿‡æ»¤å™¨</strong>ï¼š</p><ul><li><code>require_debug_true</code>ï¼šä½¿ç”¨æ­¤è¿‡æ»¤å™¨çš„æ¶ˆæ¯ä»…åœ¨è°ƒè¯•æ—¶æ‰ä¼šç”Ÿæ•ˆ</li></ul><p><strong>ä¸‰ä¸ªå¤„ç†å™¨</strong>ï¼š</p><ul><li><code>console</code>ï¼šå¤„ç†<code>INFO</code>ä»¥ä¸Šçº§åˆ«æ¶ˆæ¯ï¼Œè¾“å‡ºç®€è¦ä¿¡æ¯åˆ°å‘½ä»¤è¡Œä¸­ï¼›æ­¤å¤„ç†å™¨ä»…åœ¨è°ƒè¯•æ¨¡å¼ç”Ÿæ•ˆ</li><li><code>mail_admins</code>ï¼šå¤„ç†<code>ERROR</code>ä»¥ä¸Šçº§åˆ«æ¶ˆæ¯ï¼Œè¾“å‡ºè¯¦ç»†ä¿¡æ¯åˆ°Emailä¸­</li><li><code>file</code>ï¼šå¤„ç†<code>WARNING</code>ä»¥ä¸Šçº§åˆ«æ¶ˆæ¯ï¼Œè¾“å‡ºè¯¦ç»†ä¿¡æ¯åˆ°æ–‡ä»¶ä¸­</li></ul><p><strong>ä¸¤ä¸ªè®°å½•å™¨</strong>ï¼š</p><ul><li><code>django</code>ï¼šå°†djangoäº§ç”Ÿçš„æ‰€æœ‰æ¶ˆæ¯è½¬äº¤ç»™<code>console</code>å¤„ç†å™¨</li><li><code>django.request</code>ï¼šå°†ç½‘ç»œè¯·æ±‚ç›¸å…³æ¶ˆæ¯è½¬äº¤ç»™<code>file</code>ã€<code>mail_admins</code>è¿™ä¸¤ä¸ªå¤„ç†å™¨ã€‚æ³¨æ„è¿™é‡Œçš„<code>&#39;propagate&#39;: False</code>ä½¿å¾—æ­¤è®°å½•å™¨å¤„ç†è¿‡çš„æ¶ˆæ¯å°±ä¸å†è®©<code>django</code>è®°å½•å™¨å†æ¬¡å¤„ç†äº†</li></ul><p>è¯»è€…å¯ä»¥å°è¯•åˆ¶é€ ä¸åŒçº§åˆ«çš„æ¶ˆæ¯ï¼Œçœ‹çœ‹æ—¥å¿—ç³»ç»Ÿæ˜¯å¦æ­£å¸¸å·¥ä½œã€‚å½“ç„¶æœ€é‡è¦çš„ï¼Œè·ŸEmailæœ‰å…³çš„é…ç½®ä¸€å®šè¦äº‹å…ˆæŠŠEmailç»™è®¾ç½®å¥½ï¼Œå³ä¸‹é¢çš„å†…å®¹å¡«æˆä½ çš„ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># SMTPæœåŠ¡å™¨</span>EMAIL_HOST <span class="token operator">=</span> <span class="token string">'your smtp'</span><span class="token comment"># é‚®ç®±å</span>EMAIL_HOST_USER <span class="token operator">=</span> <span class="token string">'your email'</span><span class="token comment"># é‚®ç®±å¯†ç </span>EMAIL_HOST_PASSWORD <span class="token operator">=</span> <span class="token string">'your password'</span><span class="token comment"># å‘é€é‚®ä»¶çš„ç«¯å£</span>EMAIL_PORT <span class="token operator">=</span> <span class="token number">25</span><span class="token comment"># æ˜¯å¦ä½¿ç”¨ TLS</span>EMAIL_USE_TLS <span class="token operator">=</span> <span class="token boolean">True</span><span class="token comment"># é»˜è®¤çš„å‘ä»¶äºº</span>DEFAULT_FROM_EMAIL <span class="token operator">=</span> <span class="token string">'your email'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ—¥å¿—åˆ†å‰²"><a href="#æ—¥å¿—åˆ†å‰²" class="headerlink" title="æ—¥å¿—åˆ†å‰²"></a>æ—¥å¿—åˆ†å‰²</h3><p>ç°åœ¨æˆ‘ä»¬å·²ç»å¯ä»¥æ„‰å¿«çš„è®°å½•æ—¥å¿—äº†ï¼Œæ¥ä¸‹æ¥ä¸€ä¸ªé—®é¢˜æ˜¯å¦‚ä½•å»<strong>åˆ†å‰²æ—¥å¿—</strong>ï¼Ÿå‡è®¾ä½ çš„ç½‘ç«™èƒ½å¤Ÿæœ‰å¹¸è¿è¡Œåå¹´æ—¶é—´ï¼Œå¦‚æœä¸é—´æ–­çš„å¾€åŒä¸€ä¸ªæ–‡ä»¶ä¸­å†™æ—¥å¿—ä¿¡æ¯ï¼Œæœ€ç»ˆå®ƒä¼šå˜æˆä¸€ä¸ªæ‹–å®æœåŠ¡å™¨çš„åºç„¶å¤§ç‰©ã€‚</p><p>æœ€å¥½æ˜¯æ—¥å¿—èƒ½å¤ŸæŒ‰è‡ªç„¶å¤©è¿›è¡Œè®°å½•å’Œåˆ†å‰²ã€‚å¥½åœ¨è¿™ä¸ªé—®é¢˜ä¹Ÿä¸éœ€è¦ä½ å»è´¹è„‘ç­‹ï¼ŒPythonå¸®ä½ æå®šäº†ã€‚</p><p>åªéœ€è¦æŠŠå¤„ç†å™¨ç¨ç¨æ”¹ä¸€ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_blog<span class="token operator">/</span>settings<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>LOGGING <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token string">'file'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>            <span class="token comment"># æ³¨é‡Šæ‰ class</span>            <span class="token comment"># 'class': 'logging.FileHandler',</span>                        <span class="token comment">#æ–°å¢å†…å®¹</span>            <span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'logging.handlers.TimedRotatingFileHandler'</span><span class="token punctuation">,</span>            <span class="token string">'when'</span><span class="token punctuation">:</span> <span class="token string">'midnight'</span><span class="token punctuation">,</span>            <span class="token string">'backupCount'</span><span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">,</span>                    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>TimedRotatingFileHandler</code>ï¼šPythonå†…ç½®çš„éšæ—¶é—´åˆ†å‰²æ—¥å¿—æ–‡ä»¶çš„æ¨¡å—</li><li><code>when</code>ï¼šåˆ†å‰²æ—¶é—´ä¸ºå‡Œæ™¨</li><li><code>backupCount</code>ï¼šæ—¥å¿—æ–‡ä»¶ä¿å­˜æ—¥æœŸä¸º30å¤©</li></ul><p>æ¥ä¸‹æ¥æŠŠç³»ç»Ÿæ—¶é—´å¾€åè°ƒä¸€å¤©ï¼Œç„¶åé‡æ–°å¯åŠ¨æœåŠ¡å™¨ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">python manage.py runserver --noreload<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>æ³¨æ„è¿™æ¬¡å¯åŠ¨æœ‰ç‚¹ä¸ä¸€æ ·</strong>ï¼Œåé¢æœ‰ä¸ª<code>--noreload</code>åç¼€ã€‚è¿™æ˜¯å› ä¸ºé€šå¸¸Djangoçš„è°ƒè¯•æœåŠ¡å™¨è¿è¡Œæ—¶ä¼šé¡ºå¸¦å¯åŠ¨é‡è½½å™¨ï¼Œæ‰€ä»¥æ¯å½“é‡è½½å™¨æ£€æµ‹åˆ°ä»£ç æœ‰å˜åŒ–åï¼Œä¼šè‡ªåŠ¨é‡å¯æœåŠ¡å™¨ï¼Œç›¸å½“çš„æ–¹ä¾¿ã€‚ä½†é—®é¢˜æ˜¯åˆ†å‰²æ–‡ä»¶ä¸é‡è½½å™¨åŒæ—¶æ“ä½œæ—¥å¿—æ–‡ä»¶ä¼šäº§ç”Ÿå†²çªï¼Œå› æ­¤è¿™é‡Œä¸€å®šè¦ç”¨<code>--noreload</code>æš‚æ—¶å°†é‡è½½å™¨ç¦æ­¢æ‰ã€‚</p><p>ç„¶åå°±å¯ä»¥æ„‰å¿«çš„åˆ·å‡ æ¡æ¶ˆæ¯åˆ°æ–‡ä»¶ä¸­å•¦ã€‚ä½ ä¼šå‘ç°è€æ—¥å¿—å·²ç»æ›´åä¸º<code>debug.log.2019-07-17</code>äº†ï¼Œè€Œåˆšåˆ·çš„æ–°æ¶ˆæ¯åˆ™ä¿å­˜åœ¨<code>debug.log</code>ä¸­ã€‚</p><blockquote><p>é™¤äº†ä¸Šé¢ä»‹ç»çš„<code>TimedRotatingFileHandler</code>ï¼ŒPythonè¿˜æä¾›äº†ä¸€ä¸ªæŒ‰ç…§æ–‡ä»¶å¤§å°åˆ†å‰²çš„<code>RotatingFileHandler</code>ã€‚æœ‰å…´è¶£çš„çœ‹<a href="https://docs.python.org/3/library/logging.handlers.html#logging.handlers.RotatingFileHandler">Pythonå®˜æ–¹æ–‡æ¡£</a></p></blockquote><h2 id="è‡ªå®šä¹‰æ—¥å¿—"><a href="#è‡ªå®šä¹‰æ—¥å¿—" class="headerlink" title="è‡ªå®šä¹‰æ—¥å¿—"></a>è‡ªå®šä¹‰æ—¥å¿—</h2><p>å†…ç½®é…ç½®å®é™…ä¸Šå·²ç»èƒ½å¤Ÿæ»¡è¶³90%ä»¥ä¸Šçš„æ—¥å¿—éœ€æ±‚äº†ï¼Œä½†æ€»æœ‰æ—¶å€™ä½ æƒ³åœ¨ä¸€äº›å¥‡æ€ªçš„åœ°æ–¹è¿›è¡Œè®°å½•ï¼Œè¿™å°±éœ€è¦ä½ è‡ªå·±åœ¨ä»£ç ä¸­æ’å…¥è‡ªå®šä¹‰çš„æ—¥å¿—è®°å½•ä»£ç äº†ã€‚</p><p>è‡ªå®šä¹‰æ—¥å¿—ç”¨èµ·æ¥ä¹Ÿæ˜¯ç›¸å½“æ–¹ä¾¿çš„ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> my_blog<span class="token punctuation">.</span>settings <span class="token keyword">import</span> LOGGING<span class="token keyword">import</span> logginglogging<span class="token punctuation">.</span>config<span class="token punctuation">.</span>dictConfig<span class="token punctuation">(</span>LOGGING<span class="token punctuation">)</span>logger <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span><span class="token string">'django.request'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">whatever</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># do something</span>    logger<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token string">'Something went wrong!'</span><span class="token punctuation">)</span>    <span class="token comment"># do something else</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¼å…¥åˆšæ‰å†™çš„æ—¥å¿—æ¡†æ¶å¹¶å°†<code>django.request</code>é…ç½®åˆ°<code>logger</code>å¯¹è±¡ä¸­ã€‚ç„¶åä½ å°±å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹å®‰æ’ä»»ä½•çº§åˆ«çš„æ¶ˆæ¯äº†ã€‚æ¶ˆæ¯å†…å®¹å¯ä»¥ç”¨å­—ç¬¦ä¸²çš„æ ¼å¼åŒ–æ–¹æ³•ï¼ˆ<code>str.format()</code>ï¼‰ï¼Œç©å‡ºå„ç§èŠ±æ ·ã€‚</p><p>å…³äºæ—¥å¿—çš„å…¥é—¨ä»‹ç»å°±åˆ°æ­¤ä¸ºæ­¢äº†ï¼Œæƒ³æ·±å…¥å­¦ä¹ çš„è¯»è€…è¯·ç»§ç»­é˜…è¯»æœ¬æ–‡çš„å‚è€ƒæ–‡ç« ï¼š</p><ul><li><a href="https://docs.djangoproject.com/en/2.2/topics/logging/">Django logging</a></li><li><a href="https://docs.python.org/3/library/logging.html">Python 3 logging</a></li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å’Œä¸Šç« ç±»ä¼¼ï¼Œæœ¬ç« çš„å†…å®¹ä¹Ÿæ˜¯æ¦‚å¿µåå¤šï¼Œå¸Œæœ›è¯»è€…å°½å¯èƒ½å»ç†è§£ï¼Œæœ€èµ·ç è¦å›«å›µåæ£çš„æŠŠæ—¥å¿—æˆåŠŸç§»æ¤åˆ°ä½ çš„é¡¹ç›®ä¸­å»ã€‚<strong>è·å–ä¸€ä»½å¥½çš„æ—¥å¿—ï¼Œæœ‰æ—¶å€™è¿œæ¯”å¼€å‘ä¸€ä¸ªæ— å…³ç´§è¦çš„æ–°åŠŸèƒ½æ›´é‡è¦ã€‚</strong></p><p>æ¯”è¾ƒèµ·æ¥åšä¸»è®¤ä¸ºå¯¹åšå®¢é¡¹ç›®æ¥è¯´ï¼Œæ—¥å¿—æ¯”æµ‹è¯•è¿˜é‡è¦ï¼Œæ¯•ç«Ÿç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒæ˜¯æœ€ä½³çš„å®è·µã€‚</p><p>ä½†è¯·ä¸è¦è¯¯ä¼šæˆ‘çš„æ„æ€ã€‚æµ‹è¯•å’Œæ—¥å¿—å°±åƒä¸¤å…„å¼Ÿï¼Œæµ‹è¯•è§£å†³å¼€å‘ä¸­çš„é—®é¢˜ï¼Œæ—¥å¿—è§£å†³ç»´æŠ¤ä¸­çš„é—®é¢˜ã€‚æœ‰æœºçš„ç»“åˆèµ·æ¥ï¼Œä½ çš„é¡¹ç›®æ‰èƒ½å¤Ÿé•¿æœŸç¨³å®šå¥åº·ã€‚</p><hr><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#100;&#117;&#x73;&#97;&#x69;&#112;&#x68;&#x6f;&#116;&#x6f;&#x40;&#x66;&#x6f;&#x78;&#x6d;&#x61;&#105;&#x6c;&#46;&#x63;&#111;&#109;">&#100;&#117;&#x73;&#97;&#x69;&#112;&#x68;&#x6f;&#116;&#x6f;&#x40;&#x66;&#x6f;&#x78;&#x6d;&#x61;&#105;&#x6c;&#46;&#x63;&#111;&#109;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--39.ç‚¹èµåŠŸèƒ½</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/39.dian-zan-gong-neng/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/39.dian-zan-gong-neng/</url>
      
        <content type="html"><![CDATA[<p>å‡è®¾ä½ çš„åšå®¢å·²ç»é¡ºåˆ©éƒ¨ç½²åˆ°äº†çº¿ä¸Šã€‚ä½ å†™äº†å¾ˆå¤šå¥½æ–‡ç« ï¼Œå’Œç²‰ä¸ä»¬äº’åŠ¨å¹¶æ„Ÿå—æˆå°±æ„Ÿã€‚</p><p>ç°åœ¨ä½ æƒ³æ›´è¿›ä¸€æ­¥ï¼ŒåŠªåŠ›æé«˜æ–‡ç« è´¨é‡ï¼Œä½¿å…¶æ›´å—è¯»è€…æ¬¢è¿ï¼Œæ‰“é€ åœˆå†…ä¸€æµåšå®¢ã€‚é—®é¢˜æ˜¯è¯¥å¦‚ä½•åˆ¤æ–­ä¸€ç¯‡æ–‡ç« æ˜¯â€œå—æ¬¢è¿çš„â€ï¼Ÿé æµè§ˆé‡æ˜¯ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯å¹¶ä¸èƒ½åŒºåˆ†å‡ºå†…å®¹èŠ±æ‹³ç»£è…¿çš„æ ‡é¢˜å…šã€‚é è¯„è®ºæ•°ä¹Ÿæ˜¯ä¸ªå¥½æ–¹æ³•ï¼Œä½†ä¸ªäººåšå®¢é€šå¸¸è¯»è€…ä¸å¤šï¼Œå¥½æ–‡ç« é›¶è¯„è®ºæ˜¯å¾ˆæ­£å¸¸çš„ã€‚</p><p>è¿™æ—¶å€™<strong>â€œç‚¹èµâ€</strong>åŠŸèƒ½å°±æ˜¾å¾—é‡è¦äº†ã€‚å¦‚æœå¤§éƒ¨åˆ†è¯»è€…éƒ½ç»™äº†ä¸€ä¸ªèµï¼Œé‚£å°±è¡¨æ˜æ–‡ç« ç¡®å®è¿˜ä¸é”™ã€‚</p><h2 id="åŠ¨æ‰‹ä¹‹å‰çš„æ€è€ƒ"><a href="#åŠ¨æ‰‹ä¹‹å‰çš„æ€è€ƒ" class="headerlink" title="åŠ¨æ‰‹ä¹‹å‰çš„æ€è€ƒ"></a>åŠ¨æ‰‹ä¹‹å‰çš„æ€è€ƒ</h2><p>ç‚¹èµåŠŸèƒ½å¯ä¸ç®€å•ï¼Œå®ç°é€”å¾„éå¸¸çš„å¤šã€‚åˆ«æ€¥ç€åŠ¨æ‰‹ï¼Œè€å¿ƒæ€è€ƒï¼šæˆ‘ä»¬çš„åšå®¢åˆ°åº•éœ€è¦ä»€ä¹ˆæ ·çš„ç‚¹èµï¼Ÿ</p><p><strong>é¦–å…ˆï¼Œç‚¹èµæ˜¯å¦è¦æ±‚ç”¨æˆ·å¿…é¡»ç™»å½•ï¼Ÿ</strong>è¦æ±‚ç™»å½•çš„å¥½å¤„æ˜¯å¯ä»¥ç²¾ç¡®çš„è®°å½•æ˜¯å“ªäº›ç”¨æˆ·ã€å¯¹å“ªäº›æ–‡ç« ç‚¹è¿‡èµï¼ˆå¤šå¯¹å¤šå…³ç³»ï¼‰ï¼Œä»¥ä¾¿è¿›è¡Œç»†è‡´çš„æ•°æ®åˆ†æã€‚åå¤„æ˜¯ç™»å½•è¿™ä¸ªè¦æ±‚å¾ˆç¬¨é‡ï¼Œä¼šå±è”½æ‰å¤§éƒ¨åˆ†çš„æ¸¸å®¢ç”¨æˆ·ã€‚åšä¸»å€¾å‘äºä¸è¦æ±‚ç”¨æˆ·ç™»å½•ï¼Œæ¯•ç«Ÿå°ç«™é€šå¸¸ç”¨æˆ·å°±ä¸å¤šï¼Œæé«˜å‚ä¸åº¦æ‰æ˜¯ç‚¹èµæœ€æ ¸å¿ƒçš„ä»»åŠ¡ã€‚</p><blockquote><p>å¦‚æœæŸå¤©ä½ çš„å°ç«™ç«äº†ï¼Œå°±æŠŠè¦æ±‚ç”¨æˆ·ç™»å½•çš„äº¤äº’åŠŸèƒ½è®©ç»™â€œæ”¶è—â€å§ï¼</p></blockquote><p><strong>å…¶æ¬¡ï¼Œç”¨æˆ·æ˜¯å¦å¯ä»¥é‡å¤ç‚¹èµï¼Ÿ</strong>å¾ˆå¤šè§†é¢‘å¹³å°çš„ç”¨æˆ·å¯ä»¥å¯¹æŸä¸ªå–œæ¬¢çš„å¥³ä¸»æ’­ç–¯ç‹‚ç‚¹èµï¼Œä»¥è¡¨è¾¾è‡ªå·±éå¸¸éå¸¸çš„å–œæ¬¢ã€‚è¿™å¯¹ç”¨æˆ·è¾ƒå¤šçš„å¹³å°æ˜¯æ²¡é—®é¢˜çš„ï¼Œå› ä¸ºç”¨æˆ·æ•°é‡å¤šäº†ä¹‹åï¼Œä½ ç‚¹å‡ ç™¾ä¸ªèµä¹Ÿåªæ˜¯ä¹ç‰›ä¸€æ¯›ã€‚ä½†åšå®¢ç½‘ç«™è¿™æ ·åšå¾ˆå®¹æ˜“é€ æˆæŸäº›æ–‡ç« ç‚¹èµä¸ºé›¶ï¼ŒæŸäº›æ–‡ç« ç‚¹èµæ•°åˆå‡ºå¥‡çš„é«˜ã€‚æ˜¾ç„¶è¿™ä¸ä»£è¡¨æ–‡ç« è´¨é‡çš„å·®å¼‚ã€‚</p><p>å¥½äº†ï¼Œç›®å‰æˆ‘ä»¬çš„ç­–ç•¥æ˜¯ä¸è¦æ±‚ç”¨æˆ·ç™»å½•ï¼Œä¹Ÿä¸å…è®¸ç”¨æˆ·é‡å¤ç‚¹èµã€‚<strong>ä¸‹ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œåœ¨å“ªé‡Œè®°å½•ç”¨æˆ·çš„ç‚¹èµç›¸å…³çš„æ•°æ®å‘¢ï¼Ÿ</strong>ç‚¹èµæ•°é‡æ¯«æ— ç–‘é—®è¦ä¿å­˜åœ¨æ•°æ®åº“é‡Œï¼Œä»¥ä¾¿éšæ—¶å–å‡ºæ•°æ®å¹¶å‘ˆç°å‡ºæ¥ã€‚</p><p>ä½†é—®é¢˜æ˜¯<strong>æ ¡éªŒç”¨æˆ·æ˜¯å¦å·²ç‚¹èµçš„è®°å½•ä¿å­˜åœ¨å“ªï¼Ÿ</strong>åœ¨æ•°æ®åº“ä¸­è®°å½•ç”¨æˆ·çš„IPåœ°å€æ˜¯ä¸ªæ–¹æ³•ï¼Œä½†ä½ å¾—å¤„ç†å¥½è®°å½•IPå’Œè®°å½•ç™»å½•ç”¨æˆ·çš„å…³ç³»ï¼Œç¨å¾®æœ‰ç‚¹éº»çƒ¦ã€‚å¦å¤–æ¯æ¬¡ç”¨æˆ·çš„ç‚¹èµéƒ½éœ€è¦å‘åç«¯å‘é€æ ¡éªŒè¯·æ±‚ï¼Œå¢åŠ äº†æœåŠ¡å™¨çš„è´Ÿæ‹…ã€‚</p><p>æ—¢ç„¶æ•°æ®ä¿å­˜åœ¨åç«¯æ•°æ®åº“é‡Œä¸å¥½ï¼Œ<strong>é‚£èƒ½ä¸èƒ½ä¿å­˜åœ¨æµè§ˆå™¨ç«¯å‘¢ï¼Ÿ</strong>ç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œå¹¶ä¸”æœ‰ <strong>Cookie</strong> å’Œ <strong>LocalStorage</strong> éƒ½å¯ä»¥è®©ä½ ä¿å­˜æ•°æ®ã€‚å®ƒä¸¤çš„ä¸»è¦åŒºåˆ«å¦‚ä¸‹ï¼š</p><table><thead><tr><th>ç‰¹æ€§</th><th align="left">Cookie</th><th>LocalStorage</th></tr></thead><tbody><tr><td>ç”Ÿå‘½å‘¨æœŸ</td><td align="left">å¯è®¾ç½®å¤±æ•ˆæ—¶é—´ï¼Œé»˜è®¤æ˜¯å…³é—­æµè§ˆå™¨åå¤±æ•ˆ</td><td>é™¤éè¢«æ¸…é™¤ï¼Œå¦åˆ™æ°¸ä¹…ä¿å­˜</td></tr><tr><td>å­˜å‚¨ç©ºé—´</td><td align="left">4Kå·¦å³</td><td>ä¸€èˆ¬ä¸º5MB</td></tr><tr><td>ä¸æœåŠ¡å™¨é€šä¿¡</td><td align="left">æ¯æ¬¡éƒ½ä¼šæºå¸¦åœ¨HTTPå¤´ä¸­</td><td>ä¸å‚ä¸æœåŠ¡å™¨çš„é€šä¿¡</td></tr><tr><td>æ˜“ç”¨æ€§</td><td align="left">æºç”Ÿæ¥å£ä¸å‹å¥½</td><td>æºç”Ÿæ¥å£å¯ä»¥æ¥å—</td></tr></tbody></table><p>æ¯”è¾ƒä¸‹æ¥ä¼šå‘ç° LocalStorage å¯ä»¥æ°¸ä¹…ä¿å­˜æ•°æ®ï¼Œå­˜å‚¨ç©ºé—´å¤§ï¼Œä¹Ÿä¸å‚ä¸æœåŠ¡å™¨é€šä¿¡ï¼Œå¾ˆé€‚åˆç‚¹èµçš„éœ€æ±‚ã€‚ç”±äºæ•°æ®ä¿å­˜åœ¨æµè§ˆå™¨ä¸­ï¼Œæ‰€ä»¥ä¹Ÿä¸éœ€è¦åŒºåˆ†ç”¨æˆ·æœ‰æ²¡æœ‰ç™»å½•äº†ï¼šå®é™…ä¸Šæ¯æ¬¡è¯·æ±‚ç‚¹èµæ—¶ï¼Œæ ¡éªŒçš„æ˜¯å½“å‰è¿™ä¸ªæµè§ˆå™¨æ˜¯å¦å·²ç»ç‚¹è¿‡èµäº†ï¼Œè€Œä¸æ˜¯ç”¨æˆ·ï¼</p><p>å¯èƒ½ä½ ä¼šåé©³è¯´ï¼Œé‚£è¦æ˜¯ç”¨æˆ·æ¢ä¸€ä¸ªæµè§ˆå™¨ä¸å°±å¯ä»¥é‡å¤ç‚¹èµäº†å—ï¼Œæ›´ä½•å†µæµè§ˆå™¨ç«¯çš„æ•°æ®æ˜¯éå¸¸å®¹æ˜“ç¯¡æ”¹çš„ã€‚ä½†è¿™åˆæœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿç‚¹èµæ•°æ®å¹¶ä¸éœ€è¦éå¸¸ç²¾ç¡®ï¼Œéšä»–å»å§ã€‚</p><blockquote><p>æ‰€æœ‰çš„ç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒ LocalStorage åŠŸèƒ½ã€‚å¦‚æœä½ è¿˜åœ¨ç”¨ IE6 ï¼Œèµ¶ç´§è€ƒè™‘å‡çº§æµè§ˆå™¨å§ã€‚</p></blockquote><p>æ€»ç»“ä¸€ä¸‹ï¼Œæˆ‘ä»¬çš„ç‚¹èµåŠŸèƒ½å¦‚ä¸‹ï¼š</p><ul><li>ä¸è¦æ±‚ç”¨æˆ·ç™»å½•</li><li>ä¸å…è®¸é‡å¤ç‚¹èµ</li><li>ç‚¹èµæ•°ä¿å­˜åœ¨æœåŠ¡å™¨æ•°æ®åº“ä¸­</li><li>ç‚¹èµæ ¡éªŒæ•°æ®ä¿å­˜åœ¨æµè§ˆå™¨çš„ LocalStorage ä¸­</li></ul><p>å½“ç”¨æˆ·ç‚¹èµæ—¶ï¼Œå‰ç«¯è„šæœ¬ä¼šåœ¨ LocalStorage é‡Œæ ¡éªŒæ˜¯å¦å·²ç»ç‚¹è¿‡èµäº†ï¼›å¦‚æœªç‚¹è¿‡èµï¼Œæ‰ä¼šå‘æœåŠ¡å™¨å‘é€ç‚¹èµè¯·æ±‚ï¼Œå¹¶è®°å½•æ•°æ®ã€‚</p><p>æƒ³æ¸…æ¥šéœ€æ±‚ï¼Œéš¾é¢˜å°±è¿åˆƒè€Œè§£äº†ã€‚æ¥ä¸‹æ¥å°±æ˜¯ä»£ç å®ç°ã€‚</p><blockquote><p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œä»¥ä¸Šåˆ†æå¹¶ä¸ä»£è¡¨å…¶ä»–æ–¹æ³•ä¸å¥½ï¼Œä»…ä»…æ˜¯åœ¨åšå®¢å°ç«™çš„ç¯å¢ƒä¸‹ï¼Œåšä¸»è§‰å¾—åˆé€‚çš„æŠ€æœ¯è·¯å¾„è€Œå·²ã€‚å¦‚æœä½ å¿ƒä¸­ä½ç€å¦ä¸€ä¸ªå“ˆå§†é›·ç‰¹ï¼Œè¯·æƒ³åŠæ³•å»å®ç°å®ƒã€‚</p></blockquote><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><h3 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h3><p>æœ¬ç« çš„é‡ç‚¹å·¥ä½œåœ¨å‰ç«¯ï¼Œå› æ­¤å…ˆæŠŠç®€å•çš„åç«¯ä»£ç å†™äº†ï¼Œæƒå½“çƒ­èº«ã€‚</p><blockquote><p>æœ‰çš„è¯»è€…å¬åˆ°å‰ç«¯å°±è§‰å¾—å¤´ç–¼ã€‚ä½ çš„ç—›è‹¦æˆ‘æ˜ç™½ï¼Œä½†ä¹Ÿæ˜¯å¿…ä¸å¯å°‘çš„ã€‚å…‰å†™ Python æ˜¯åšä¸å‡ºæ¼‚äº®ç½‘ç«™çš„ã€‚</p></blockquote><p>ç”±äºç‚¹èµæ•°éœ€è¦ä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œå› æ­¤ä¿®æ”¹æ–‡ç« æ¨¡å‹æ˜¯å¿…é¡»çš„äº†ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>models<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># æ–‡ç« æ¨¡å‹</span><span class="token keyword">class</span> <span class="token class-name">ArticlePost</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># æ–°å¢ç‚¹èµæ•°ç»Ÿè®¡</span>    likes <span class="token operator">=</span> models<span class="token punctuation">.</span>PositiveIntegerField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿ç§»æ•°æ®ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token operator">></span> python manage.py makemigrations<span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token operator">></span> python manage.py migrate<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç»§ç»­ç”¨ç±»è§†å›¾ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># ç‚¹èµæ•° +1</span><span class="token keyword">class</span> <span class="token class-name">IncreaseLikesView</span><span class="token punctuation">(</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        article <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>kwargs<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        article<span class="token punctuation">.</span>likes <span class="token operator">+=</span> <span class="token number">1</span>        article<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">'success'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åŠŸèƒ½æ˜¯è®©ç‚¹èµæ•°å¢åŠ 1ä¸ªï¼Œå¹¶ä¸”è¿”å› <code>success</code> ã€‚è‡³äºä¸ºä»€ä¹ˆæ˜¯ <code>success</code> åé¢å†è®²ã€‚</p><p>æœ€åå°±æ˜¯è·¯ç”±äº†ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>urls<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># ç‚¹èµ +1</span>    path<span class="token punctuation">(</span>        <span class="token string">'increase-likes/&lt;int:id>/'</span><span class="token punctuation">,</span>         views<span class="token punctuation">.</span>IncreaseLikesView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>         name<span class="token operator">=</span><span class="token string">'increase_likes'</span>    <span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¾ˆç®€å•å§ã€‚å‰©ä¸‹çš„å°±æ˜¯ä¸“å¿ƒå†™å‰ç«¯ä»£ç äº†ã€‚</p><h3 id="JSä¸Ajax"><a href="#JSä¸Ajax" class="headerlink" title="JSä¸Ajax"></a>JSä¸Ajax</h3><p>ç”±äºæ ¡éªŒæ•°æ®ä¿å­˜åœ¨æµè§ˆå™¨ä¸­ï¼Œå› æ­¤å‰ç«¯çš„å·¥ä½œè¾ƒå¤šã€‚</p><p>å…ˆæŠŠå®Œæ•´ä»£ç è´´å‡ºæ¥ï¼ˆè®²è§£åœ¨åé¢ï¼‰ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/detail.html...<span class="token comment">&lt;!-- å·²æœ‰ä»£ç ï¼Œæ–‡ç« æ­£æ–‡ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-12<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>&#123;&#123; article.body|safe &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- æ–°å¢ç‚¹èµæŒ‰é’® --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">text-align</span><span class="token punctuation">:</span>center<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mt-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-outline-danger<span class="token punctuation">"</span></span>            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span>            <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">validate_is_like</span><span class="token punctuation">(</span>                     <span class="token string">'&#123;% url '</span>article<span class="token operator">:</span>increase_likes<span class="token string">' article.id %&#125;'</span><span class="token punctuation">,</span>                     <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> article<span class="token punctuation">.</span>id <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                     <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> article<span class="token punctuation">.</span>likes <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>                     <span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span>            <span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>ç‚¹èµ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fas fa-heart<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>likes_number<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            &#123;&#123; article.likes &#125;&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>...&#123;% block script %&#125;...<span class="token comment">&lt;!-- ä»¥ä¸‹å‡ä¸ºæ–°ä»£ç  --></span><span class="token comment">&lt;!-- csrf token --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>csrf.js<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token comment">// ç‚¹èµåŠŸèƒ½ä¸»å‡½æ•°</span>    <span class="token keyword">function</span> <span class="token function">validate_is_like</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> id<span class="token punctuation">,</span> likes</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// å–å‡º LocalStorage ä¸­çš„æ•°æ®</span>        <span class="token keyword">let</span> storage <span class="token operator">=</span> window<span class="token punctuation">.</span>localStorage<span class="token punctuation">;</span>        <span class="token keyword">const</span> storage_str_data <span class="token operator">=</span> storage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"my_blog_data"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">let</span> storage_json_data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>storage_str_data<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è‹¥æ•°æ®ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºç©ºå­—å…¸</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>storage_json_data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            storage_json_data <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token comment">// æ£€æŸ¥å½“å‰æ–‡ç« æ˜¯å¦å·²ç‚¹èµã€‚æ˜¯åˆ™ status = true</span>        <span class="token keyword">const</span> status <span class="token operator">=</span> <span class="token function">check_status</span><span class="token punctuation">(</span>storage_json_data<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>status<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            layer<span class="token punctuation">.</span><span class="token function">msg</span><span class="token punctuation">(</span><span class="token string">'å·²ç»ç‚¹è¿‡èµäº†å“Ÿ~'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// ç‚¹è¿‡èµåˆ™ç«‹å³é€€å‡ºå‡½æ•°</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// ç”¨ Jquery æ‰¾åˆ°ç‚¹èµæ•°é‡ï¼Œå¹¶ +1</span>            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'span#likes_number'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>likes <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'color'</span><span class="token punctuation">,</span> <span class="token string">'#dc3545'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// ç”¨ ajax å‘åç«¯å‘é€ post è¯·æ±‚</span>        $<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>            url<span class="token punctuation">,</span>            <span class="token comment">// post åªæ˜¯ä¸ºäº†åš csrf æ ¡éªŒï¼Œå› æ­¤æ•°æ®ä¸ºç©º</span>            <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">===</span> <span class="token string">'success'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token comment">// å°è¯•ä¿®æ”¹ç‚¹èµæ•°æ®</span>                    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                        storage_json_data<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>                    <span class="token comment">// å°†å­—å…¸è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œä»¥ä¾¿å­˜å‚¨åˆ° LocalStorage</span>                    <span class="token keyword">const</span> d <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>storage_json_data<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">// å°è¯•å­˜å‚¨ç‚¹èµæ•°æ®åˆ° LocalStorage</span>                    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                        storage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"my_blog_data"</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        <span class="token comment">// code 22 é”™è¯¯è¡¨ç¤º LocalStorage ç©ºé—´æ»¡äº†</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">22</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                            window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                            storage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"my_blog_data"</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token punctuation">&#125;</span>                    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                    layer<span class="token punctuation">.</span><span class="token function">msg</span><span class="token punctuation">(</span><span class="token string">"ä¸æœåŠ¡å™¨é€šä¿¡å¤±è´¥..è¿‡ä¸€ä¼šå„¿å†è¯•è¯•å‘—~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">// è¾…åŠ©ç‚¹èµä¸»å‡½æ•°ï¼ŒéªŒè¯ç‚¹èµçŠ¶æ€</span>    <span class="token keyword">function</span> <span class="token function">check_status</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> id</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// å°è¯•æŸ¥è¯¢ç‚¹èµçŠ¶æ€</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token keyword">in</span> data <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>&#123;% endblock script %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»£ç å†…å®¹å¾ˆå¤šï¼Œæ¥ä¸‹æ¥æ‹†åˆ†è®²è§£ã€‚</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token comment">&lt;!-- æ–°å¢ç‚¹èµä»£ç  --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">text-align</span><span class="token punctuation">:</span>center<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mt-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-outline-danger<span class="token punctuation">"</span></span>            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span>            <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">validate_is_like</span><span class="token punctuation">(</span>                     <span class="token string">'&#123;% url '</span>article<span class="token operator">:</span>increase_likes<span class="token string">' article.id %&#125;'</span><span class="token punctuation">,</span>                     <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> article<span class="token punctuation">.</span>id <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                     <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> article<span class="token punctuation">.</span>likes <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>                     <span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span>            <span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>ç‚¹èµ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fas fa-heart<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>likes_number<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            &#123;&#123; article.likes &#125;&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢çš„ HTML ä»£ç åŠŸèƒ½å¾ˆç®€å•ï¼Œæä¾›ä¸€ä¸ªç‚¹èµçš„æŒ‰é’®ï¼Œç‚¹å‡»æ­¤æŒ‰é’®æ—¶ä¼šè§¦å‘å«åš<code>validate_is_like</code>çš„ JavaScript å‡½æ•°ã€‚<strong>ç‰¹åˆ«éœ€è¦æ³¨æ„</strong>çš„æ˜¯ <code>&#39;&#123;% url 'article:increase_likes' article.id %&#125;&#39;</code> éƒ½æ˜¯ç”¨çš„å•å¼•å·ï¼Œè¿™é‡Œåƒä¸‡ä¸èƒ½ç”¨åŒå¼•å·ï¼ŒåŸå› è¯·è¯»è€…æ€è€ƒä¸€ä¸‹ã€‚</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>csrf.js<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿˜è®°å¾—<a href="https://github.com/stacklens/django_blog_tutorial/blob/master/static/csrf.js">csrf.js</a>å—ï¼Ÿæˆ‘ä»¬åœ¨å¤šçº§è¯„è®ºç« èŠ‚å·²ç»å°†å®ƒå¼•å…¥äº†ï¼Œç›®çš„æ˜¯è®© Ajax ä¹Ÿèƒ½é€šè¿‡ csrf æ ¡éªŒã€‚å¦‚æœè¿˜æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶çš„è¯·ç‚¹å‡»é“¾æ¥ä¸‹è½½ã€‚</p><p>æ¥ä¸‹æ¥å°±æ˜¯å æ®æœ€å¤šç‰ˆé¢çš„å‡½æ•°<code>validate_is_like()</code>ï¼Œæˆ‘ä»¬æ¥æ‹†åˆ†é‡Œé¢çš„å†…å®¹ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// å–å‡º LocalStorage ä¸­çš„æ•°æ®</span><span class="token keyword">let</span> storage <span class="token operator">=</span> window<span class="token punctuation">.</span>localStorage<span class="token punctuation">;</span><span class="token keyword">const</span> storage_str_data <span class="token operator">=</span> storage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"my_blog_data"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> storage_json_data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>storage_str_data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è‹¥æ•°æ®ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºç©ºå­—å…¸</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>storage_json_data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    storage_json_data <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æµè§ˆå™¨é‡Œé¢ï¼Œ <code>window</code> å¯¹è±¡æŒ‡å½“å‰çš„æµè§ˆå™¨çª—å£ã€‚å®ƒä¹Ÿæ˜¯å½“å‰é¡µé¢çš„é¡¶å±‚å¯¹è±¡ï¼ˆå³æœ€é«˜ä¸€å±‚çš„å¯¹è±¡ï¼‰ï¼Œæ‰€æœ‰å…¶ä»–å¯¹è±¡éƒ½æ˜¯å®ƒçš„ä¸‹å±ï¼Œ<code>localStorage</code> ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><p>è¦æ ¡éªŒæ•°æ®ï¼Œé¦–å…ˆå¿…é¡»å–å‡ºæ•°æ®ã€‚è¿™é‡Œç”¨<code>localStorage.getItem()</code>æ¥å£å–å‡ºäº†æ•°æ®ã€‚</p><p>è™½ç„¶ LocalStorage çš„å­˜å‚¨æ–¹å¼ä¸ºæ ‡å‡†çš„<strong>é”®å€¼å¯¹</strong>ç±»å‹ï¼ˆç±»ä¼¼Pythonçš„å­—å…¸ï¼‰ï¼Œä½†æ˜¯å¾ˆæ€ªçš„æ˜¯å­˜å‚¨çš„å€¼åªæ”¯æŒå­—ç¬¦ä¸²ç±»å‹ã€‚æ‰€ä»¥è¿™é‡Œè¦ç”¨ <code>JSON.parse()</code> å°†å­—ç¬¦ä¸²è¿˜åŸä¸ºå¯¹è±¡ã€‚</p><p>ç”¨æˆ·ç¬¬ä¸€æ¬¡ç‚¹èµæ—¶ï¼ŒLocalStorage ä¸­è‚¯å®šæ˜¯æ²¡æœ‰ä»»ä½•æ•°æ®çš„ï¼Œæ‰€ä»¥ <code>if</code> è¯­å¥çš„ä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ªç©ºçš„å­—å…¸å¾…ç”¨ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// æ£€æŸ¥å½“å‰æ–‡ç« æ˜¯å¦å·²ç‚¹èµã€‚æ˜¯åˆ™ status = true</span><span class="token keyword">const</span> status <span class="token operator">=</span> <span class="token function">check_status</span><span class="token punctuation">(</span>storage_json_data<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>status<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    layer<span class="token punctuation">.</span><span class="token function">msg</span><span class="token punctuation">(</span><span class="token string">'å·²ç»ç‚¹è¿‡èµäº†å“Ÿ~'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ç‚¹è¿‡èµåˆ™ç«‹å³é€€å‡ºå‡½æ•°</span>    <span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ç”¨ Jquery æ‰¾åˆ°ç‚¹èµæ•°é‡ï¼Œå¹¶ +1</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'span#likes_number'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>likes <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'color'</span><span class="token punctuation">,</span> <span class="token string">'#dc3545'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥é©¬ä¸Šè°ƒç”¨å‡½æ•° <code>check_status</code> æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç»å¯¹æœ¬æ–‡ç‚¹è¿‡èµäº†ã€‚å¦‚æœç‚¹è¿‡äº†ï¼Œå°±å¼¹çª—æç¤ºï¼Œå¹¶ä¸”ç”¨ <code>return</code> é©¬ä¸Šç»ˆæ­¢ <code>validate_is_like</code> å‡½æ•°ï¼Œ<strong>åé¢çš„ä»£ç å°±ä¸æ‰§è¡Œäº†</strong>ï¼›å¦‚æœè¿˜æ²¡ç‚¹è¿‡ï¼Œå°±è®©æŒ‰é’®çš„ç‚¹èµæ•° +1ã€‚</p><p>ä½†è¿™æ—¶å€™å…¶å®åå°æ•°æ®åº“çš„ç‚¹èµæ•°å¹¶æ²¡æœ‰æ›´æ–°ã€‚æ¥ç€å¾€ä¸‹çœ‹ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// ç”¨ ajax å‘åç«¯å‘é€ post è¯·æ±‚</span>$<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>    url<span class="token punctuation">,</span>    <span class="token comment">// post åªæ˜¯ä¸ºäº†åš csrf æ ¡éªŒï¼Œå› æ­¤æ•°æ®ä¸ºç©º</span>    <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">===</span> <span class="token string">'success'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// å°è¯•ä¿®æ”¹ç‚¹èµæ•°æ®</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                storage_json_data<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>            <span class="token keyword">const</span> d <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>storage_json_data<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// å°è¯•å­˜å‚¨ç‚¹èµæ•°æ®åˆ° LocalStorage</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                storage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"my_blog_data"</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// code 22 é”™è¯¯è¡¨ç¤º LocalStorage ç©ºé—´æ»¡äº†</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">22</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    storage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"my_blog_data"</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            layer<span class="token punctuation">.</span><span class="token function">msg</span><span class="token punctuation">(</span><span class="token string">"ä¸æœåŠ¡å™¨é€šä¿¡å¤±è´¥..è¿‡ä¸€ä¼šå„¿å†è¯•è¯•å‘—~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œå¼€å§‹å°è¯•ä¸åç«¯é€šä¿¡å¹¶æ›´æ–°ç‚¹èµæ•°ã€‚æ•´å—ä»£ç è¢« <code>$.post()</code> åŒ…è£¹ï¼Œå®ƒå…¶å®å°±æ˜¯ Ajax çš„ post è¯·æ±‚ã€‚<code>function(result) &#123;...&#125;</code> æ˜¯è¯·æ±‚æˆåŠŸæ—¶æ‰æ‰§è¡Œçš„å›è°ƒå‡½æ•°ï¼Œå‚æ•° <code>result</code> æ˜¯åç«¯çš„è¿”å›å€¼ã€‚å¦‚æœé€šä¿¡æˆåŠŸï¼Œåˆ™å°è¯•å°†ç‚¹èµçš„æ ¡éªŒæ•°æ®ä¿å­˜åˆ° LocalStorage ä¸­ã€‚æœŸé—´å‘ç”Ÿä»»ä½•é”™è¯¯ï¼ˆç‰¹åˆ«æ˜¯ LocalStorage å­˜å‚¨å·²æ»¡çš„é”™è¯¯ï¼‰ï¼Œéƒ½ä¼šæ¸…é™¤ LocalStorage ä¸­çš„æ‰€æœ‰æ•°æ®ï¼Œä»¥ä¾¿åç»­çš„æ•°æ®è®°å½•ã€‚</p><p>å¯ä»¥çœ‹å‡ºï¼Œåšä¸»é‡‡ç”¨çš„æ•°æ®ç»“æ„æ¯”è¾ƒç®€å•ï¼Œåƒè¿™æ ·ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token punctuation">&#123;</span>    <span class="token number">2</span><span class="token punctuation">:</span> true<span class="token punctuation">,</span>    <span class="token number">31</span><span class="token punctuation">:</span> true    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é”®ä»£è¡¨æ–‡ç« çš„ <code>id</code>ï¼Œå¸ƒå°”å€¼ä»£è¡¨ç‚¹èµçš„çŠ¶æ€ã€‚ä¸Šé¢æ•°æ®çš„æ„æ€æ˜¯ <code>id</code> ä¸º 2 å’Œ 31 çš„æ–‡ç« å·²ç»ç‚¹è¿‡èµäº†ã€‚è¯»è€…ä»¥åå¯èƒ½ä¼šå¸Œæœ›æ–‡ç« ã€è¯„è®ºä»¥åŠå…¶ä»–å†…å®¹éƒ½å¯ä»¥ç‚¹èµï¼Œé‚£å°±éœ€è¦è®¾è®¡æ›´åŠ å¤æ‚çš„æ•°æ®ç»“æ„ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// è¾…åŠ©ç‚¹èµä¸»å‡½æ•°ï¼ŒéªŒè¯ç‚¹èµçŠ¶æ€</span><span class="token keyword">function</span> <span class="token function">check_status</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> id</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// å°è¯•æŸ¥è¯¢ç‚¹èµçŠ¶æ€</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token keyword">in</span> data <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è‡³äº <code>check_status()</code> å‡½æ•°å°±å¾ˆç®€å•äº†ï¼Œä½œç”¨æ˜¯æŸ¥è¯¢æ˜¯å¦å·²ç»ç‚¹è¿‡èµäº†ï¼Œæ˜¯åˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚</p><p>æ•´ä¸ª JavaScript è„šæœ¬å°±å®Œæˆäº†ã€‚</p><h3 id="è°ƒè¯•æ¥å£"><a href="#è°ƒè¯•æ¥å£" class="headerlink" title="è°ƒè¯•æ¥å£"></a>è°ƒè¯•æ¥å£</h3><p>è¯»è€…åœ¨è°ƒè¯•æ—¶å¯èƒ½ä¼šå‡ºç°å„ç§é—®é¢˜ï¼Œè¯·æŒ‰ <code>Ctrl + Shift + I</code> æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°çš„ <code>Console</code> ç•Œé¢ï¼Œåˆ©ç”¨ä»¥ä¸‹å‘½ä»¤ debugï¼š</p><ul><li>localStorageï¼šæŸ¥çœ‹ LocalStorage çš„æ•°æ®</li><li>localStorage.clear()ï¼šæ¸…é™¤æ‰€æœ‰æ•°æ®</li><li>localStorage.getItem()ï¼šè·å–æŸä¸ªæ•°æ®</li><li>localStorage.setItem()ï¼šä¿å­˜æŸä¸ªæ•°æ®</li></ul><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>ä»£ç è®²å®Œäº†ï¼Œæ¥ä¸‹æ¥å°±æ‰“å¼€æ–‡ç« è¯¦æƒ…é¡µé¢æµ‹è¯•ä¸€ä¸‹ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190905/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE234.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190905/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE234.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ç‚¹å‡»ç‚¹èµæŒ‰é’®ï¼Œç‚¹èµæ•° +1ï¼›å†æ¬¡ç‚¹å‡»ç‚¹èµæŒ‰é’®ï¼Œç‚¹èµæ•°ä¸ä¼šå¢åŠ ï¼Œå¹¶ä¸”ä¼šå¼¹çª—æç¤ºç”¨æˆ·å·²ç»ç‚¹è¿‡äº†ã€‚</p><p>ä½ å¯ä»¥éšæ„å°è¯•å…³é—­é¡µé¢æˆ–æµè§ˆå™¨ï¼Œä¿å­˜çš„ç‚¹èµæ ¡éªŒæ•°æ®æ˜¯ä¸ä¼šæ¶ˆå¤±çš„ã€‚</p><p>è¿™æ ·å°±å®Œæˆäº†ä¸€ä¸ªç®€å•çš„ç‚¹èµåŠŸèƒ½ã€‚</p><p>å½“ç„¶è¿˜å¯ä»¥ç»§ç»­å¾€ä¸‹ä¼˜åŒ–ï¼š</p><ul><li>æ²¡ç‚¹èµçš„çˆ±å¿ƒåº”è¯¥æ˜¾ç¤ºä¸ºç°è‰²ï¼Œç‚¹è¿‡çš„æ˜¾ç¤ºä¸ºçº¢è‰²ï¼Œè¿™æ ·æ‰äººæ€§åŒ–</li><li>æœ€å¥½å†æ¥ä¸€ç‚¹é…·ç‚«çš„ç‚¹èµåŠ¨ç”»ï¼Œæˆ–è€…æç¤ºæ€§æ–‡å­—</li><li>è¦ä¸è¦ç»™è¢«ç‚¹èµäººå‘ä¸€æ¡é€šçŸ¥ä¿¡æ¯å‘¢ï¼Ÿ</li><li>â€¦</li></ul><p>æ•™ç¨‹ç¯‡å¹…æœ‰é™ï¼Œä¸æ‰“ç®—å†æ·±å…¥ä¸‹å»äº†ï¼Œå°±å½“åšè¯»è€…æœ‹å‹çš„è¯¾åä½œä¸šå§ï¼Œè¦ç”¨å¿ƒå®Œæˆå“¦ã€‚<strong>ç»™ä½ ç‚¹èµï¼</strong></p><blockquote><p>ç¬¬ä¸€æ¡çš„æç¤ºï¼šåˆå§‹åŠ è½½é¡µé¢æ—¶ï¼Œçˆ±å¿ƒç»Ÿä¸€æ˜¾ç¤ºä¸ºç°è‰²ï¼Œç„¶åè°ƒç”¨ JavaScript è„šæœ¬æ¯”å¯¹ LocalStorage ä¸­çš„æ•°æ®ï¼Œçµæ´»è¿ç”¨ Jquery ï¼Œå°†ç‚¹è¿‡èµçš„çˆ±å¿ƒé¢œè‰²ä¿®æ”¹ä¸ºçº¢è‰²ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æˆ‘ä»¬çš„åšå®¢é¡¹ç›®ç°åœ¨æ‹¥æœ‰äº†å±‚æ¬¡åˆ†æ˜çš„ç”¨æˆ·äº¤äº’ç»“æ„ï¼šæµè§ˆé‡æ•°æ®æœ€è½»å·§ï¼Œè¯„ä»·æ–‡ç« ç±»å‹çš„å—æ¬¢è¿åº¦ï¼›ç‚¹èµæ•°æ®æ¯”è¾ƒå¹³è¡¡ï¼Œè¯„ä»·æ–‡ç« å†…å®¹çš„å—æ¬¢è¿åº¦ï¼›è¯„è®ºæ•°æ®æœ€ç¬¨é‡ï¼Œä½†ä»·å€¼ä¹Ÿæœ€é«˜ã€‚è¯»è€…ä»¥ååœ¨å¼€å‘åŠŸèƒ½çš„æ—¶å€™ï¼Œä¹Ÿè¦åƒè¿™æ ·æŠŠæ ¸å¿ƒéœ€æ±‚æƒ³æ¸…æ¥šæ‰è¡Œã€‚</p><p>å¦ä¸€ä¸ªéœ€è¦æå‡ºçš„æ˜¯ï¼Œåªæœ‰éæ•æ„Ÿã€ä¸é‡è¦çš„æ•°æ®æ‰ä¿å­˜åœ¨ LocalStorageï¼Œä¸è¦å¯¹å®ƒå¤ªè¿‡ä¾èµ–ã€‚</p><p>å†ä¸€æ¬¡æé†’ï¼Œæ•™ç¨‹ä¸ºäº†ä¾¿äºè®²è§£ï¼Œä»£ç æ–‡ä»¶å·²ç»å˜å¾—è¶Šæ¥è¶Šåºå¤§ã€‚è¯·åœ¨é€‚å½“çš„æ—¶å€™æŠŠå®ƒåˆ†å‰²æˆå¤šä¸ªæ›´å°çš„ç»„ä»¶ï¼Œæ–¹ä¾¿ç»´æŠ¤å’Œé‡ç”¨ã€‚</p><hr><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#100;&#117;&#x73;&#97;&#105;&#x70;&#104;&#111;&#x74;&#111;&#x40;&#x66;&#111;&#120;&#109;&#x61;&#x69;&#x6c;&#x2e;&#x63;&#x6f;&#109;">&#100;&#117;&#x73;&#97;&#105;&#x70;&#104;&#111;&#x74;&#111;&#x40;&#x66;&#111;&#120;&#109;&#x61;&#x69;&#x6c;&#x2e;&#x63;&#x6f;&#109;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--41.æœŸæœ«æ€»ç»“</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/41.qi-mo-zong-jie/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/41.qi-mo-zong-jie/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ•™ç¨‹å…±å†™ä½œäº†ä¸€å¹´å¤šï¼ˆé¾Ÿé€Ÿæ›´æ–°..ï¼‰ï¼Œä¹Ÿç®—å‘Šä¸€æ®µè½äº†ã€‚å¦‚æœè¿˜æœ‰è¯»è€…ç‰¹åˆ«æƒ³çœ‹ã€ä½†æ˜¯æ•™ç¨‹åˆæ²¡æ¶‰åŠçš„å†…å®¹ï¼Œåšä¸»ä¼šç»§ç»­æ›´æ–°ï¼Œä¸è¿‡æ—¶é—´å°±ä¸èƒ½ä¿è¯äº†ã€‚ä¸šä½™ç²¾åŠ›æœ‰é™ï¼Œå¦‚æœä¸èƒ½ä¿è¯æ–‡ç« çš„è´¨é‡ï¼Œé‚£æˆ‘æƒ…æ„¿ä¸å†™ã€‚</p><p>å¦‚æœä½ æ˜¯æœ¬æ•™ç¨‹çš„å¿ å®è¯»è€…ï¼Œçœ‹åˆ°è¿™é‡Œå°±å·²ç»å­¦ä¼šäº†ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li>åšæ–‡ç®¡ç†</li><li>ç”¨æˆ·ç®¡ç†</li><li>å¤šçº§è¯„è®º</li><li>æ–‡ç« æ ç›®å’Œæ ‡ç­¾</li><li>å›¾ç‰‡å¤„ç†</li><li>ç¬¬ä¸‰æ–¹ç™»å½•</li><li>ç‚¹èµ</li><li>æµ‹è¯•ä¸ç»´æŠ¤</li><li>éƒ¨ç½²</li><li>å…¶ä»–é›¶æ˜ŸåŠŸèƒ½</li></ul><p>ä¸é”™ï¼ŒåŸºæœ¬åŠŸèƒ½éƒ½æœ‰äº†ã€‚</p><h2 id="æ¥ä¸‹æ¥å­¦ä»€ä¹ˆ"><a href="#æ¥ä¸‹æ¥å­¦ä»€ä¹ˆ" class="headerlink" title="æ¥ä¸‹æ¥å­¦ä»€ä¹ˆ"></a>æ¥ä¸‹æ¥å­¦ä»€ä¹ˆ</h2><h3 id="å“åº”å¼å¸ƒå±€"><a href="#å“åº”å¼å¸ƒå±€" class="headerlink" title="å“åº”å¼å¸ƒå±€"></a>å“åº”å¼å¸ƒå±€</h3><p>å“åº”å¼å¸ƒå±€ï¼Œç®€å•æ¥è¯´å°±æ˜¯é¡µé¢å¸ƒå±€éšç€ç»ˆç«¯è®¾å¤‡çš„å˜åŒ–è€Œè‡ªåŠ¨é€‚åº”ã€‚</p><p>æ•™ç¨‹ä¸ºäº†èµ·æ­¥å¹³ç¼“ï¼Œæ²¡æœ‰å±•å¼€è¿™æ–¹é¢çš„å†…å®¹ã€‚ä¹Ÿå°±æ˜¯è¯´æ•™ç¨‹ä¸­çš„åšå®¢åœ¨æ‰‹æœºä¸Šæµè§ˆï¼Œç•Œé¢ä¼šå˜å¾—éå¸¸çš„ç³Ÿç³•ã€‚</p><p>å¥½åœ¨ BootStrap å°±æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å“åº”å¼å¸ƒå±€æ¡†æ¶ã€‚åœ¨å®ƒçš„å®˜ç½‘ä¸Šæœ‰éå¸¸è¯¦ç»†çš„ä»‹ç»ã€å¤åˆ¶å°±èƒ½ç”¨çš„ä»£ç ï¼Œè¯·è€å¿ƒæŸ¥é˜…ï¼š<a href="https://getbootstrap.com/docs/4.1/getting-started/introduction/">Bootstrapå®˜æ–¹æ–‡æ¡£</a></p><h3 id="å„ç§è½®å­"><a href="#å„ç§è½®å­" class="headerlink" title="å„ç§è½®å­"></a>å„ç§è½®å­</h3><p>è½®å­æ˜¯åˆ«äººå°è£…å¥½çš„åº“ã€‚è™½ç„¶ä¸ç”¨è‡ªå·±å†™ï¼Œä½†æœ€èµ·ç è¦å­¦ä¼šä½¿ç”¨ã€‚ä¼˜ç§€çš„è½®å­æ¨èå¦‚ä¸‹ï¼š</p><ul><li><a href="https://github.com/brack3t/django-braces">django-braces</a>ï¼šåŒ…å«å„ç§æœ‰ç”¨çš„åŸºç¡€ç±»è§†å›¾ã€‚å†™ç±»è§†å›¾ç”¨å®ƒå¯ä»¥èŠ‚çœå¾ˆå¤šæ—¶é—´ã€‚</li><li><a href="https://django-haystack.readthedocs.io/en/master/">django-haystack</a>ï¼šå®ç°å¤æ‚çš„å®šåˆ¶åŒ–æœç´¢ã€‚</li><li><a href="https://www.django-rest-framework.org/">django-rest-framework</a>ï¼šæœ‰çš„è¯»è€…è¿«ä¸åŠå¾…æƒ³å°è¯•å‰åç«¯åˆ†ç¦»å¼€å‘æ¨¡å¼ï¼Œè¿™ä¸ªæ¡†æ¶å‡ ä¹æ˜¯ä½ å”¯ä¸€çš„é€‰æ‹©ã€‚</li></ul><p>ä¼˜ç§€çš„appå¾ˆå¤šï¼Œè¿™é‡Œæ²¡åŠæ³•åˆ—ä¸¾ã€‚æ„Ÿå…´è¶£çš„åŒå­¦è¯·ç‚¹è¿™é‡Œï¼š<a href="https://djangopackages.org/">djangopackages</a>ï¼Œè¿™ä¸ªç½‘å€é›†åˆäº†æ‰€æœ‰ä¼˜ç§€çš„åº“ã€‚æ…¢æ…¢ç ”ç©¶å§ã€‚</p><h3 id="å…¶ä»–æŠ€èƒ½"><a href="#å…¶ä»–æŠ€èƒ½" class="headerlink" title="å…¶ä»–æŠ€èƒ½"></a>å…¶ä»–æŠ€èƒ½</h3><p>åšä¸»ä¹‹å‰åå¤å¼ºè°ƒäº†ï¼Œè™½ç„¶è¿™åªæ˜¯ä¸ª Django æ•™ç¨‹ï¼Œä½†æ˜¯åªä¼šå†™ Django æ˜¯æ²¡æ³•æ”¯æ’‘ä¸€ä¸ªæ¼‚äº®çš„ç½‘ç«™çš„ã€‚</p><ul><li>ä½ è¦å­¦ <code>JavaScript</code>ï¼Œè®©ç•Œé¢æ›´ç¾è§‚</li><li>è¦å­¦ <code>Linux</code>ï¼Œä»¥ä¾¿ç½‘ç«™è¿ç»´</li><li>è¦å­¦æ•°æ®åº“çŸ¥è¯†ï¼Œè®©ä½ åœ¨æŸäº›ç‰¹æ®Šæƒ…å†µä¸‹æ‘†è„± ORMï¼Œé«˜æ•ˆçš„æ“ä½œè¿œç¨‹æ•°æ®åº“</li><li>ä»¥åŠäº‘æœåŠ¡å™¨å„ç§ç»„ä»¶ã€å¾®ä¿¡æ”¯ä»˜æ¥å£ã€ç¼“å­˜æ•°æ®åº“ã€â€¦</li></ul><p><strong>ä¸è¦ä½ ç²¾é€šï¼Œä½†æ˜¯è‡³å°‘å¾—ä¼šä¸€ç‚¹ç‚¹ï¼Œå…³é”®æ—¶åˆ»å¯ä»¥æ•‘å‘½ã€‚</strong></p><h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h2><p>è¯»è€…åœ¨æ•™ç¨‹ä¸­æ˜¯å¦å­¦åˆ°æ–°ä¸œè¥¿äº†å‘¢ï¼Ÿ</p><p>å¦‚æœæœ‰ï¼Œæ¬¢è¿ç‚¹å‡»æ•™ç¨‹å°¾éƒ¨çš„**[æ‰“èµ]**æŒ‰é’®ï¼Œè¯·åšä¸»å–æ¯å’–å•¡~</p><p>æˆ–è€…åœ¨æˆ‘çš„<a href="https://github.com/stacklens/django_blog_tutorial">GitHubåšå®¢æ•™ç¨‹ä»£ç </a>ç»™ä¸€ä¸ªå°æ˜Ÿæ˜Ÿï¼Œæ„Ÿè°¢å„ä½çš„æ”¯æŒã€‚</p><p><strong>æˆ‘çš„æ•™ç¨‹æ˜¯å†™å®Œäº†ï¼Œä½†æ˜¯ä½ çš„å­¦ä¹ æ‰åˆšå¼€å§‹ã€‚</strong>èƒœåˆ©çš„èƒŒåæ€»æœ‰æ— æ•°ä¸ªéš¾ç†¬çš„å¤œæ™šã€‚</p><p>å¤©ä¸‹æ²¡æœ‰ä¸æ•£çš„ç­µå¸­ã€‚ä¸‹ä¸€ä¸ªæ•™ç¨‹è§ï¼</p><blockquote><p>è¿‘æœŸå‘åšä¸»å’¨è¯¢é—®é¢˜çš„è¯»è€…æ¯”è¾ƒå¤šï¼Œè€ƒè™‘ç»„å»ºå¾®ä¿¡ç¾¤æˆ–QQç¾¤ï¼Œè®©å¤§å®¶æœ‰ä¸€ä¸ªäº’ç›¸å­¦ä¹ çš„ç©ºé—´ï¼Œä¹Ÿå‡è½»æˆ‘çš„å‹åŠ›ã€‚åˆ°æ—¶ç½‘ç«™çš„é†’ç›®ä½ç½®ä¼šæœ‰äºŒç»´ç æˆ–é“¾æ¥ï¼Œæœ‰å…´è¶£çš„è¯»è€…å¯ä»¥å¶å°”æ¥è½¬è½¬ã€‚</p></blockquote><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190101/end.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190101/end.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--40.å°†é¡¹ç›®éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/40.jiang-xiang-mu-bu-shu-dao-yun-fu-wu-qi/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/40.jiang-xiang-mu-bu-shu-dao-yun-fu-wu-qi/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬çš„åšå®¢è™½ç„¶è¿˜æœ‰å¾ˆå¤šä¸å®Œå–„çš„åœ°æ–¹ï¼Œä½†æ˜¯æ²¡å…³ç³»ï¼Œè¶Šæ—©æŠŠå®ƒéƒ¨ç½²åˆ°äº’è”ç½‘ä¸Šï¼Œæ‰èƒ½è¶Šæ—©å‘ç°çº¿ä¸Šç‰¹æœ‰çš„é—®é¢˜ã€‚ç°åœ¨ä¹Ÿæå€¡æ¸è¿›å¼å¼€å‘ï¼Œè®©äº§å“åœ¨è¿­ä»£ä¸­å¿«é€Ÿæˆé•¿ã€‚</p><p>éƒ¨ç½²è€ƒéªŒçš„ä¸æ˜¯ä½ çš„ Django ç¼–ç¨‹æ°´å¹³ï¼Œè€Œæ˜¯ä½ å¯¹ Linux çš„æ“ä½œèƒ½åŠ›ï¼Œä»¥åŠå¯¹ç½‘ç»œé€šä¿¡çš„ç†è§£ã€‚å¤šè¯´æ— ç›Šï¼Œç›´æ¥å¼€å¹²ï¼</p><h2 id="é…ç½®æœåŠ¡å™¨"><a href="#é…ç½®æœåŠ¡å™¨" class="headerlink" title="é…ç½®æœåŠ¡å™¨"></a>é…ç½®æœåŠ¡å™¨</h2><p>è¦æ¶è®¾ç½‘ç«™ï¼Œé¦–å…ˆä½ è¦æœ‰ä¸€å°è¿æ¥åˆ°äº’è”ç½‘çš„æœåŠ¡å™¨ã€‚å›½å†…æ¯”è¾ƒå‡ºåçš„äº‘æœåŠ¡å™¨å±<strong>é˜¿é‡Œäº‘</strong>ã€<strong>è…¾è®¯äº‘</strong>ã€<strong>ç™¾åº¦äº‘</strong>ï¼Œä¸‰å®¶å„æœ‰ä¼˜åŠ£ï¼Œå¤§å®¶è‡ªè¡Œäº†è§£æ¯”è¾ƒï¼Œå¹¶é€‰æ‹©è‡ªå·±é€‚åˆçš„è´­ä¹°ã€‚</p><p><strong>åˆ©ç›Šç›¸å…³ï¼š</strong>åšä¸»è‡ªå·±ç”¨çš„æ˜¯é˜¿é‡Œäº‘ï¼Œæ‰€ä»¥æ•™ç¨‹ä¼šä»¥<strong>é˜¿é‡Œäº‘ECS</strong>ä½œä¸ºä¾‹å­è®²è§£ã€‚æ–°ç”¨æˆ·é€šè¿‡<a href="https://www.aliyun.com/product/ecs?source=5176.11533457&userCode=m3bbolgr&type=copy">æ¨å¹¿é“¾æ¥</a>æ³¨å†Œæœ‰æŠ˜æ‰£å’Œç°é‡‘åˆ¸ï¼ˆç›®å‰æ˜¯20å…ƒï¼‰ï¼›å­¦ç”Ÿæœ‰<a href="https://promotion.aliyun.com/ntms/act/campus2018.html?source=5176.11533457&userCode=m3bbolgr&type=copy">ä¼˜æƒ æœåŠ¡å™¨</a>æ¯æœˆ9.5å…ƒï¼Œæ€§èƒ½è¿˜ä¸é”™ï¼Œå¾ˆåˆ’ç®—ã€‚å¦‚æœä½ æƒ³ç”¨å…¶ä»–äº‘æœåŠ¡å™¨ï¼Œæ“ä½œæµç¨‹ä¹Ÿå·®ä¸å¤šï¼Œä¸å¿…æ‹…å¿ƒã€‚</p><p>é¦–å…ˆè¿›å…¥<strong>é˜¿é‡Œäº‘ECSçš„è´­ä¹°é¡µé¢</strong>ï¼š</p><p><img src="http://blog.dusaiphoto.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%28249%29.png" class="lazyload placeholder" data-srcset="http://blog.dusaiphoto.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%28249%29.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>å›¾ç‰‡å­—å¾ˆå°ï¼Œçœ‹ä¸æ¸…æ¥šçš„åŒå­¦å°†å°±ä¸€ä¸‹æ”¾å¤§çœ‹å§ã€‚</p><p>æŒ‘é‡ç‚¹è¯´ä¸€ä¸‹ï¼š</p><ul><li><strong>å®ä¾‹</strong>ä»å…¥é—¨çº§é‡Œé€‰ä¸€æ¬¾ä¾¿å®œçš„ï¼Œä»¥åæµé‡é«˜äº†å†å‡çº§ä¹Ÿä¸è¿Ÿï¼ˆåœŸè±ªè¯·æ— è§†è¿™æ¡ï¼‰ã€‚</li><li><strong>é•œåƒ</strong>é€‰æ‹© Ubuntu 16.04 64ä½ã€‚å…¶ä»– Linux ç‰ˆæœ¬ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</li><li><strong>ç³»ç»Ÿç›˜</strong>å…ˆé€‰ä¸ª 20Gï¼Œå¤Ÿä½ ç”¨ä¸€é˜µäº†ã€‚æ•°æ®ç›˜æš‚æ—¶ç”¨ä¸ä¸Šï¼Œä¸ç”¨å‹¾é€‰ã€‚</li></ul><p>ç‚¹å‡»ä¸‹ä¸€æ­¥ï¼Œæ¥åˆ°<strong>ç½‘ç»œå’Œå®‰å…¨ç»„</strong>é¡µé¢ï¼š</p><p><img src="http://blog.dusaiphoto.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%28250%29.png" class="lazyload placeholder" data-srcset="http://blog.dusaiphoto.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%28250%29.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>è¿™é¡µé»˜è®¤å°±è¡Œäº†ï¼Œå…¬ç½‘å¸¦å®½é€‰æœ€ä½çš„ 1M ï¼ŒåˆæœŸå¤Ÿç”¨äº†ã€‚</p><p>ç‚¹å‡»ä¸‹ä¸€æ­¥ï¼Œåˆ°<strong>ç³»ç»Ÿé…ç½®</strong>é¡µé¢ï¼š</p><p><img src="http://blog.dusaiphoto.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%28241%29.png" class="lazyload placeholder" data-srcset="http://blog.dusaiphoto.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%28241%29.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ä¸ºäº†åé¢è¿œç¨‹è¿æ¥æœåŠ¡å™¨æ›´ç®€å•ï¼Œè¿™é‡Œå‹¾é€‰<strong>è‡ªå®šä¹‰å¯†ç </strong>ï¼Œä¹Ÿå°±æ˜¯è¾“å…¥ç”¨æˆ·/å¯†ç çš„è®¤è¯æ–¹å¼äº†ã€‚å®é™…ä¸Šç§˜é’¥å¯¹çš„è®¤è¯æ–¹å¼æ›´å®‰å…¨äº›ï¼Œä»¥åæ‘¸ç†Ÿäº†å†æ”¹å›æ¥å§ã€‚</p><p>ç‚¹å‡»ä¸‹ä¸€æ­¥ï¼Œåˆ°<strong>åˆ†ç»„è®¾ç½®</strong>é¡µé¢ã€‚è¿™ä¸ªé¡µé¢å…¨éƒ¨é»˜è®¤è®¾ç½®å°±å¥½äº†ã€‚ç‚¹å‡»ä¸‹ä¸€æ­¥ï¼Œ<strong>ç¡®è®¤è®¢å•</strong>æ— è¯¯åï¼Œå°±å¯ä»¥ä»˜æ¬¾å•¦ã€‚</p><p>ä»˜æ¬¾æˆåŠŸåï¼Œé€šè¿‡æ§åˆ¶å°å°±å¯ä»¥çœ‹åˆ°å·²è´­ä¹°çš„äº‘æœåŠ¡å™¨äº†ï¼š</p><p><img src="http://blog.dusaiphoto.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%28243%29.png" class="lazyload placeholder" data-srcset="http://blog.dusaiphoto.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%28243%29.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>è¿™é‡Œæœ‰æ—¶å€™ä¼šæœ‰é»„å­—æé†’ä½ æœåŠ¡å™¨çš„ç½‘ç»œç«¯å£æ²¡å¼€ï¼Œç‚¹å‡»é»„å­—é“¾æ¥å»å¼€é€šä¸€ä¸‹ï¼š</p><p><img src="http://blog.dusaiphoto.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%28244%29.png" class="lazyload placeholder" data-srcset="http://blog.dusaiphoto.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%28244%29.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>æŠŠ 22ï¼ˆè¿œç¨‹è¿æ¥ç«¯å£ï¼‰ã€443ï¼ˆHTTPSç«¯å£ï¼‰ã€80ï¼ˆHTTPç«¯å£ï¼‰éƒ½æ‰“å¼€ï¼Œ3389ç«¯å£é¡ºä¾¿ä¹Ÿå¼€äº†ã€‚</p><p>è‡³æ­¤æœåŠ¡å™¨çš„è´­ä¹°ã€é…ç½®å°±å®Œæˆå•¦ã€‚ç¨ç­‰å‡ åˆ†é’Ÿåç­‰å¾…åˆå§‹åŒ–å®Œæˆï¼Œå°±å¯ä»¥å¾—åˆ°æœåŠ¡å™¨çš„<strong>å…¬ç½‘ IP åœ°å€</strong>ï¼Œåšä¸»çš„æ˜¯ <code>118.31.35.48</code> ï¼Œåé¢ä¼šç”¨åˆ°ã€‚</p><p>æ¥ä¸‹æ¥å°±æ˜¯æ­£å¼çš„éƒ¨ç½²ã€‚</p><h2 id="æ­£å¼éƒ¨ç½²"><a href="#æ­£å¼éƒ¨ç½²" class="headerlink" title="æ­£å¼éƒ¨ç½²"></a>æ­£å¼éƒ¨ç½²</h2><p>å¼€å‘æ—¶æˆ‘ä»¬ç”¨çš„æ˜¯ Django è‡ªå¸¦çš„å¼€å‘æœåŠ¡å™¨ï¼Œä½†é‚£ä¸ªæ€§èƒ½å¤ªå·®äº†ï¼Œä¸å¯èƒ½ç”¨åˆ°çº¿ä¸Šç¯å¢ƒã€‚æ‰€ä»¥çº¿ä¸Šéƒ¨ç½²æ—¶ï¼Œæˆ‘ä»¬ä¸ä»…è¦å®‰è£… <code>Django</code>ï¼Œè¿˜è¦å®‰è£… <code>Nginx</code> å’Œ <code>Gunicorn</code>ï¼Œè¿™ä¸‰å…„å¼Ÿçš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p><ul><li>å®¢æˆ·ç«¯å‘æ¥ http è¯·æ±‚ï¼ŒNginx ä½œä¸ºç›´æ¥å¯¹å¤–çš„æœåŠ¡å™¨æ¥å£ï¼Œå¯¹ http è¯·æ±‚è¿›è¡Œåˆ†æ</li><li>å¦‚æœæ˜¯é™æ€èµ„æºè¯·æ±‚ï¼Œåˆ™ç”±Nginxè‡ªå·±å¤„ç†ï¼ˆæ•ˆç‡æé«˜ï¼‰</li><li>å¦‚æœæ˜¯åŠ¨æ€èµ„æºè¯·æ±‚ï¼Œåˆ™æŠŠå®ƒè½¬å‘ç»™ Gunicorn</li><li>Gunicorn å¯¹è¯·æ±‚è¿›è¡Œé¢„å¤„ç†åï¼Œè½¬å‘ç»™ Djangoï¼Œæœ€ç»ˆå®Œæˆèµ„æºçš„è¿”å›</li></ul><p>å¦‚æœç”¨é¤é¦†æ¥åšæ¯”å–»çš„è¯ï¼ŒNginx å°±æ˜¯è¿å®¾å°å§ï¼Œå®¢äººå¦‚æœç‚¹äº†é…’æ°´ï¼Œè¿å®¾å°å§è‡ªå·±å°±å¸®å¿™æ‹¿äº†ï¼›è€Œ Gunicorn æ˜¯ä¼ èœå‘˜ï¼ŒDjango æ˜¯å¨å¸ˆï¼Œä»–ä¸¤ä¸€èµ·æ»¡è¶³å®¢äººå¯¹ç°ç‚’ç¾é£Ÿçš„éœ€æ±‚ã€‚</p><h3 id="è¿œç¨‹è¿æ¥"><a href="#è¿œç¨‹è¿æ¥" class="headerlink" title="è¿œç¨‹è¿æ¥"></a>è¿œç¨‹è¿æ¥</h3><p>éƒ¨ç½²çš„ç¬¬ä¸€æ­¥å°±æ˜¯æƒ³åŠæ³•è¿æ¥åˆ°äº‘æœåŠ¡å™¨ä¸Šå»ï¼Œå¦åˆ™ä¸€åˆ‡éƒ½å…è°ˆã€‚é‰´äºé¡¹ç›®æ˜¯åœ¨ Windows ç¯å¢ƒå¼€å‘çš„ï¼Œæ¨èç”¨ <strong>XShell</strong> æ¥ä½œä¸ºè¿œç¨‹è¿æ¥çš„å·¥å…·ï¼Œéå¸¸çš„å¥½ç”¨ã€‚XShell æœ‰<a href="https://www.netsarang.com/zh/free-for-home-school/">å­¦æ ¡åŠå®¶åº­ç‰ˆæœ¬</a>ï¼Œå¡«ä¸€ä¸‹å§“åå’Œé‚®ç®±å°±å¯ä»¥å…è´¹ä½¿ç”¨äº†ã€‚åƒä¸‡åˆ«å«Œéº»çƒ¦å»ä¸‹è½½æ¥è·¯ä¸æ˜çš„â€œç»¿è‰²ç‰ˆâ€ã€â€œçº¯å‡€ç‰ˆâ€ï¼Œä¸‡ä¸€æœ‰æœ¨é©¬ä½ å“­éƒ½å“­ä¸å‡ºæ¥äº†ã€‚</p><p>XShell æ€ä¹ˆä½¿ç”¨å°±ä¸èµ˜è¿°äº†ï¼Œä»¥è¯»è€…çš„èªæ˜æ‰æ™ºï¼Œç¨å¾®æŸ¥é˜…ä¸€ä¸‹å°±æ˜ç™½äº†ã€‚</p><blockquote><p>ä½¿ç”¨ç›¸å½“ç®€å•ï¼ŒåŸºæœ¬å°±æ˜¯æŠŠä¸»æœº IPã€ç«¯å£å·ï¼ˆ22ï¼‰ä»¥åŠç™»å½•éªŒè¯å¡«å¥½å°±èƒ½è¿æ¥äº†ã€‚</p></blockquote><p>è¿æ¥æˆåŠŸåï¼Œå°±èƒ½åœ¨ XShell çª—å£ä¸­çœ‹åˆ°é˜¿é‡Œäº‘çš„æ¬¢è¿å­—æ ·äº†ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Welcome to Ubuntu <span class="token number">16.04</span>.6 LTS <span class="token punctuation">(</span>GNU/Linux <span class="token number">4.4</span>.0-151-generic x86_64<span class="token punctuation">)</span> * Documentation:  https://help.ubuntu.com * Management:     https://landscape.canonical.com * Support:        https://ubuntu.com/advantageWelcome to Alibaba Cloud Elastic Compute Service <span class="token operator">!</span>root@dusaiphoto:~$ <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>root@dusaiphoto:~$ </code>æ˜¯å‘½ä»¤æç¤ºç¬¦ï¼Œè¾“å…¥å‘½ä»¤æ—¶ä¸éœ€è¦ä½ è¾“å…¥è¿™ä¸ªã€‚æœ¬æ–‡åé¢æŠŠ <code>root@dusaiphoto:</code>å­—ç¬¦çœç•¥æ‰ï¼Œæ–¹ä¾¿å¤§å®¶é˜…è¯»ã€‚</p><h3 id="ä»£ç éƒ¨ç½²"><a href="#ä»£ç éƒ¨ç½²" class="headerlink" title="ä»£ç éƒ¨ç½²"></a>ä»£ç éƒ¨ç½²</h3><p>ä¸ºäº†é˜²æ­¢ç³»ç»Ÿå¤ªæ—§å¼•èµ·çš„å„ç§éº»çƒ¦ï¼Œå…ˆå‡çº§ä¸€ä¸‹åº“çš„ç‰ˆæœ¬ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">~$ <span class="token function">sudo</span> <span class="token function">apt-get</span> update~$ <span class="token function">sudo</span> <span class="token function">apt-get</span> upgrade<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å®Œæˆä¹‹åï¼Œæ¥ç€å®‰è£…éœ€è¦çš„å‡ ä¸ªåŒ…ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">~$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> nginx~$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> python3~$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> python3-pip~$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token function">git</span>~$ <span class="token function">sudo</span> pip3 <span class="token function">install</span> virtualenv<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ†åˆ«å®‰è£…äº† <strong>nginx</strong>ã€<strong>python3</strong>ã€<strong>pip</strong>ã€<strong>git</strong>ã€<strong>virtualenv</strong>ã€‚å…¶ä¸­ python3 å’Œ pip3 çš„å†™æ³•æ˜¯å› ä¸ºé˜¿é‡Œäº‘è‡ªå¸¦äº† Python2.7ï¼ŒæŠŠå®ƒä»¬åŒºåˆ†ä¸€ä¸‹ã€‚ä¹‹å‰å¼€å‘æ—¶è™šæ‹Ÿç¯å¢ƒç”¨çš„ python è‡ªå¸¦çš„ï¼Œä¸ºäº†é¿å…è¯»è€…çš„ç‰ˆæœ¬ä¸åŒé€ æˆçš„å„ç±»é”™è¯¯ï¼Œç¨³å¦¥èµ·è§ç”¨ virtualenv åº“æ¥åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œæ“ä½œæ­¥éª¤éƒ½æ˜¯å·®ä¸å¤šçš„ã€‚</p><p>æ¥ä¸‹æ¥å°±æ˜¯è¦æ”¹ä¸€ä¸‹ Django çš„é…ç½®æ–‡ä»¶ <code>settings.py</code>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_blog<span class="token operator">/</span>settings<span class="token punctuation">.</span>py<span class="token comment"># å…³é—­è°ƒè¯•æ¨¡å¼</span>DEBUG <span class="token operator">=</span> <span class="token boolean">False</span><span class="token comment"># å…è®¸çš„æœåŠ¡å™¨</span>ALLOWED_HOSTS <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'*'</span><span class="token punctuation">]</span><span class="token comment"># é™æ€æ–‡ä»¶æ”¶é›†ç›®å½•</span>STATIC_ROOT <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>BASE_DIR<span class="token punctuation">,</span> <span class="token string">'collected_static'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>éƒ¨ç½²æ—¶è¦å…³é—­è°ƒè¯•æ¨¡å¼ï¼Œé¿å…å®‰å…¨æ€§é—®é¢˜ï¼ˆæ­¤æ—¶ Django å°±ä¸å†å¤„ç†é™æ€èµ„æºäº†ï¼‰ã€‚</li><li><code>ALLOWED_HOSTS</code>æŒ‡æ˜äº†å…è®¸è®¿é—®çš„æœåŠ¡å™¨åç§°æˆ– IPï¼Œæ˜Ÿå·è¡¨ç¤ºå…è®¸æ‰€æœ‰çš„è¯·æ±‚ã€‚å®é™…éƒ¨ç½²æ—¶è¯·æ”¹æˆä½ çš„åŸŸåæˆ– IPï¼Œæ¯”å¦‚<code>ALLOWED_HOSTS = [&#39;.dusaiphoto.com&#39;, &#39;127.0.0.1&#39;]</code>ã€‚</li><li>é¡¹ç›®ä¸­æœ‰å¾ˆå¤šé™æ€æ–‡ä»¶ï¼Œéƒ¨ç½²æ—¶éœ€è¦æ‰¾ä¸€ä¸ªåœ°æ–¹ç»Ÿä¸€æ”¶é›†èµ·æ¥ï¼Œä¹Ÿå°±æ˜¯<code>STATIC_ROOT</code>æŒ‡å®šçš„åœ°å€äº†ã€‚</li></ul><p>å› ä¸ºé¡¹ç›®ä»£ç éœ€è¦é€šè¿‡ <code>GitHub</code> ä»“åº“è¿›è¡Œä¸‹è½½ï¼ˆå°±åƒæœ¬æ•™ç¨‹çš„ç¤ºä¾‹ä»£ç ä¸€æ ·ï¼‰ï¼Œå› æ­¤ä¿®æ”¹å®Œæ¯•åéœ€è¦æŠŠä»£ç ä¸Šä¼ åˆ° <code>GitHub</code>ã€‚æ€ä¹ˆä¸Šä¼ è¿™é‡Œä¹Ÿä¸èµ˜è¿°äº†ï¼Œåšä¸»ä¹‹å‰å†™è¿‡ä¸€ç¯‡<a href="https://www.dusaiphoto.com/article/detail/13/">ã€ŠWin 10 è¿æ¥ GitHubã€‹</a>çš„æ–‡ç« ï¼Œæœ‰éœ€è¦çš„è¯»è€…ç¨å¾®è¯»ä¸€ä¸‹ã€‚</p><p><strong>æ³¨æ„ï¼š</strong>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œéœ€è¦å°†å¼€å‘æ—¶ç”Ÿæˆçš„è¿ç§»æ–‡ä»¶ï¼ˆå„ä¸ª app ä¸­çš„ migrations ç›®å½•ï¼‰ä¸€å¹¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ç«¯ï¼Œè¿™æ ·å¯ä»¥ä¿è¯å„ç¯å¢ƒä¸­çš„æ•°æ®åº“æ“ä½œä¸€è‡´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæœåŠ¡å™¨ä¸Šä¸å†éœ€è¦ makemigrations äº†ï¼Œåªè¿›è¡Œ migrate å°±å¯ä»¥äº†ã€‚è¿™ä¸‹ç†è§£ä¸ºä»€ä¹ˆæ•°æ®è¿ç§»è¦è®¾è®¡æˆä¸¤æ¡æŒ‡ä»¤äº†å§ã€‚</p><p>å¦å¤–ï¼Œ<strong>è™šæ‹Ÿç¯å¢ƒä¸€èˆ¬æ˜¯éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šé‡æ–°ç”Ÿæˆçš„</strong>ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æŠŠå¼€å‘ä¸­ç”¨åˆ°çš„åº“åˆ—ä¸€ä¸ªæ¸…å•ï¼Œä»¥ä¾¿åœ¨æœåŠ¡å™¨ä¸Šç»Ÿä¸€å®‰è£…ã€‚åœ¨<strong>æœ¬åœ°è™šæ‹Ÿç¯å¢ƒ</strong>ä¸­è¾“å…¥ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pip freeze <span class="token operator">></span> requirements.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>é¡¹ç›®ä¸­å°±å¤šäº†ä¸ª <code>requirements.txt</code> æ–‡ä»¶ï¼Œé‡Œé¢è®°å½•äº†é¡¹ç›®éœ€è¦çš„åº“çš„æ¸…å•ã€‚</p><blockquote><p>æ•™ç¨‹ä¸ºäº†æ¼”ç¤ºï¼Œä¸Šä¼ äº†åª’ä½“èµ„æºå’Œæ•°æ®åº“ï¼Œå®é™…å¼€å‘æ—¶å¯åƒä¸‡ä¸è¦ä¸Šä¼ ã€‚</p></blockquote><p>ç„¶åæ›´æ–° Git è®°å½•å¹¶ä¸Šä¼ åˆ° GitHubã€‚é‡æ–°å›åˆ°<strong>æœåŠ¡å™¨çš„å‘½ä»¤è¡Œ</strong>ï¼Œç»™é¡¹ç›®ä»£ç åˆ›å»ºç›®å½•å¹¶è¿›å…¥æ­¤ç›®å½•ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">~$ <span class="token function">mkdir</span> -p /home/sites/dusaiphoto.com~$ <span class="token builtin class-name">cd</span> /home/sites/dusaiphoto.com<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç›®å½•ä½ç½®æ˜¯éšä¾¿ä½ çš„ï¼Œä½†å»ºè®®æ‰¾ä¸ªåœ°æ–¹ç»Ÿä¸€ç®¡ç†æ‰€æœ‰çš„ç½‘ç«™é¡¹ç›®ã€‚</p><p>ç„¶åä» GitHub ä¸­æ‹‰å–é¡¹ç›®ä»£ç ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">..</span>/dusaiphoto.com$ <span class="token function">git</span> clone https://github.com/stacklens/django_blog_tutorial.git<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™é‡Œæ‹‰å–çš„åšå®¢æ•™ç¨‹çš„ä»£ç ã€‚å»ºè®®è¯»è€…å…ˆæ‹‰å–æ•™ç¨‹ä»£ç æ¥æµ‹è¯•ï¼ŒæˆåŠŸä¹‹åå†é‡æ–°éƒ¨ç½²è‡ªå·±çš„ä»£ç ã€‚å®Œæˆä¹‹åå¯ä»¥è¾“å…¥ <code>ls</code> æŒ‡ä»¤ï¼Œçœ‹çœ‹ä»£ç æ–‡ä»¶å¤¹æ˜¯å¦æ­£å¸¸ç”Ÿæˆäº†ã€‚</p><p>æ¥ç€åœ¨æœåŠ¡å™¨ç”Ÿæˆè™šæ‹Ÿç¯å¢ƒï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">..</span>/dusaiphoto.com$ virtualenv --python<span class="token operator">=</span>python3.5 <span class="token function">env</span><span class="token punctuation">..</span>/dusaiphoto.com$ <span class="token builtin class-name">source</span> env/bin/activate<span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token punctuation">..</span>/dusaiphoto.com$ <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œç”¨ <code>virtualenv</code> ç”Ÿæˆå¹¶æ¿€æ´»äº†è™šæ‹Ÿç¯å¢ƒã€‚python ç‰ˆæœ¬é€‰æ‹© 3.5 è¿˜æ˜¯ 3.7 éƒ½å¯ä»¥ï¼ŒåŒºåˆ«å¹¶ä¸å¤§ã€‚</p><p>æ¥ä¸‹æ¥å°±æ˜¯å®‰è£…åº“ã€æ”¶é›†é™æ€èµ„æºã€æ•°æ®è¿ç§»äº†ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token punctuation">..</span>/dusaiphoto.com$ <span class="token builtin class-name">cd</span> django_blog_tutorial<span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token punctuation">..</span>/django_blog_tutorial$ pip3 <span class="token function">install</span> -r requirements.txt<span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token punctuation">..</span>/django_blog_tutorial$ python3 manage.py collectstatic<span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token punctuation">..</span>/django_blog_tutorial$ python3 manage.py migrate<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ä»£ç éƒ¨ç½²åŸºæœ¬å°±å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥é…ç½® <code>Nginx</code> ã€‚</p><h3 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h3><p>å‰é¢æˆ‘ä»¬å®‰è£…äº† <code>Nginx</code> ï¼Œå…ˆæ¥è¯•è¯•å®‰è£…æ˜¯å¦æ­£å¸¸ã€‚å¯åŠ¨ nginx æœåŠ¡ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> ~$ <span class="token function">sudo</span> <span class="token function">service</span> nginx start<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ä½ çš„<strong>æœåŠ¡å™¨å…¬ç½‘ IP åœ°å€</strong>ï¼š</p><p><img src="http://blog.dusaiphoto.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%28247%29.png" class="lazyload placeholder" data-srcset="http://blog.dusaiphoto.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%28247%29.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>Nginx æ¬¢è¿ç•Œé¢å‡ºç°äº†ï¼Œç¥å¥‡å§ã€‚ä½†è¿™ä¸ªé»˜è®¤é…ç½®æ˜¾ç„¶æ˜¯ä¸èƒ½ç”¨çš„ï¼Œæ‰€ä»¥éœ€è¦é‡æ–°å†™ Nginx çš„é…ç½®æ–‡ä»¶ã€‚è¿›å…¥ <code>/etc/nginx/sites-available</code> ç›®å½•ï¼Œè¿™é‡Œæ˜¯å®šä¹‰ <strong>Nginx å¯ç”¨é…ç½®</strong>çš„åœ°æ–¹ã€‚è¾“å…¥æŒ‡ä»¤ <code>sudo vi dusaiphoto.com</code> åˆ›å»ºé…ç½®æ–‡ä»¶å¹¶æ‰“å¼€ <strong>vi ç¼–è¾‘å™¨</strong>ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> ~$ <span class="token builtin class-name">cd</span> /etc/nginx/sites-available<span class="token punctuation">(</span>env<span class="token punctuation">)</span> /etc/nginx/sites-available$ <span class="token punctuation">(</span>env<span class="token punctuation">)</span> /etc/nginx/sites-available$ <span class="token function">sudo</span> <span class="token function">vi</span> dusaiphoto.com<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å…³äº <code>vi</code> ç¼–è¾‘å™¨å¦‚ä½•ä½¿ç”¨ä¹Ÿä¸èµ˜è¿°äº†ï¼Œè¿™é‡Œåªè¯´ä¸¤ä¸ªæœ€åŸºæœ¬çš„æ“ä½œï¼š</p><ul><li>æŒ‰ <code>i</code> é”®åˆ‡æ¢åˆ°<strong>ç¼–è¾‘æ¨¡å¼</strong>ï¼Œè¿™æ—¶å€™æ‰å¯ä»¥è¿›è¡Œè¾“å…¥ã€åˆ é™¤ã€ä¿®æ”¹ç­‰æ“ä½œ</li><li>æŒ‰ <code> Ctrl + c</code> é€€å›åˆ°<strong>å‘½ä»¤æ¨¡å¼</strong>ï¼Œç„¶åè¾“å…¥ <code>:wq + Enter</code> ä¿å­˜æ–‡ä»¶ä¿®æ”¹å¹¶é€€å›åˆ°æœåŠ¡å™¨å‘½ä»¤è¡Œ</li></ul><p>å›åˆ°æ­£é¢˜ï¼Œç”¨ <code>vi</code> åœ¨ <code>dusaiphoto.com</code> æ–‡ä»¶ä¸­å†™å…¥ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">server <span class="token punctuation">&#123;</span>  charset utf-8<span class="token punctuation">;</span>  listen <span class="token number">80</span><span class="token punctuation">;</span>  server_name <span class="token number">118.31</span>.35.48<span class="token punctuation">;</span>  <span class="token comment"># æ”¹æˆä½ çš„ IP</span>  location /static <span class="token punctuation">&#123;</span>    <span class="token builtin class-name">alias</span> /home/sites/dusaiphoto.com/django_blog_tutorial/collected_static<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>    location /media <span class="token punctuation">&#123;</span>    <span class="token builtin class-name">alias</span> /home/sites/dusaiphoto.com/django_blog_tutorial/media<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  location / <span class="token punctuation">&#123;</span>    proxy_set_header Host <span class="token variable">$host</span><span class="token punctuation">;</span>    proxy_pass http://unix:/tmp/118.31.35.48.socket<span class="token punctuation">;</span>  <span class="token comment"># æ”¹æˆä½ çš„ IP</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ­¤é…ç½®ä¼šç›‘å¬ 80 ç«¯å£ï¼ˆé€šå¸¸ http è¯·æ±‚çš„ç«¯å£ï¼‰ï¼Œç›‘å¬çš„ IP åœ°å€å†™ä½ è‡ªå·±çš„<strong>æœåŠ¡å™¨å…¬ç½‘ IP</strong>ã€‚</p><p>é…ç½®ä¸­æœ‰3ä¸ªè§„åˆ™ï¼š</p><ul><li>å¦‚æœè¯·æ±‚ static è·¯å¾„åˆ™ç”± Nginx è½¬å‘åˆ°ç›®å½•ä¸­å¯»æ‰¾é™æ€èµ„æº</li><li>å¦‚æœè¯·æ±‚ media è·¯å¾„åˆ™ç”± Nginx è½¬å‘åˆ°ç›®å½•ä¸­å¯»æ‰¾åª’ä½“èµ„æº</li><li>å…¶ä»–è¯·æ±‚åˆ™äº¤ç»™ Django å¤„ç†</li></ul><blockquote><p>å¦‚æœä½ å·²ç»ç”³è¯·å¥½åŸŸåäº†ï¼Œå°±æŠŠé…ç½®ä¸­æœ‰ IP çš„åœ°æ–¹éƒ½ä¿®æ”¹ä¸ºåŸŸåï¼Œæ¯”å¦‚ï¼šserver_name <a href="http://www.dusaiphoto.com/">www.dusaiphoto.com</a>;</p></blockquote><p>å†™å¥½åå°±é€€å‡º <code>vi</code> ç¼–è¾‘å™¨ï¼Œå›åˆ°å‘½ä»¤è¡Œã€‚å› ä¸ºæˆ‘ä»¬å†™çš„åªæ˜¯ Nginx çš„<strong>å¯ç”¨é…ç½®</strong>ï¼Œæ‰€ä»¥è¿˜éœ€è¦æŠŠè¿™ä¸ªé…ç½®æ–‡ä»¶é“¾æ¥åˆ°<strong>åœ¨ç”¨é…ç½®</strong>ä¸Šå»ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token punctuation">..</span>/sites-available$ <span class="token function">sudo</span> <span class="token function">ln</span> -s /etc/nginx/sites-available/dusaiphoto.com /etc/nginx/sites-enabled<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è‡³æ­¤ Nginx å°±é…ç½®å¥½äº†ï¼Œæ¥ä¸‹æ¥æå®š <code>Gunicorn</code>ã€‚</p><blockquote><p>æœ‰çš„è¯»è€…æ— è®ºæ€ä¹ˆé…ç½®éƒ½åªèƒ½çœ‹åˆ° Nginx æ¬¢è¿é¡µé¢ï¼Œæœ‰å¯èƒ½æ˜¯ sites-enabled ç›®å½•ä¸­çš„ default æ–‡ä»¶è¦†ç›–äº†ä½ å†™çš„é…ç½®ã€‚å°† default æ–‡ä»¶åˆ æ‰å°±å¯ä»¥æ­£å¸¸ä»£ç†è‡ªå·±çš„é…ç½®æ–‡ä»¶äº†ã€‚</p></blockquote><h3 id="GunicornåŠæµ‹è¯•"><a href="#GunicornåŠæµ‹è¯•" class="headerlink" title="GunicornåŠæµ‹è¯•"></a>GunicornåŠæµ‹è¯•</h3><p><strong>å…ˆå›åˆ°é¡¹ç›®æ‰€åœ¨çš„ç›®å½•</strong>ï¼Œå¹¶ä¸”è¿›å…¥<strong>è™šæ‹Ÿç¯å¢ƒ</strong>ï¼Œç„¶åè¾“å…¥ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token punctuation">..</span>/django_blog_tutorial$ pip3 <span class="token function">install</span> gunicorn<span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token punctuation">..</span>/django_blog_tutorial$ <span class="token function">sudo</span> <span class="token function">service</span> nginx reload<span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token punctuation">..</span>/django_blog_tutorial$ gunicorn --bind unix:/tmp/118.31.35.48.socket my_blog.wsgi:application<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œçš„ä¸‰ä¸ªæ­¥éª¤åˆ†åˆ«æ˜¯ï¼š</p><ul><li>å®‰è£… <code>Gunicorn</code></li><li>é‡å¯ <code>Nginx</code> æœåŠ¡</li><li>å¯åŠ¨ <code>Gunicorn</code> </li></ul><blockquote><p>å¯åŠ¨ Gunicorn ä¹Ÿæ˜¯ä¸€æ ·ï¼Œå¦‚æœä½ å·²ç»æœ‰åŸŸåäº†ï¼Œå°±æŠŠå¥—æ¥å­—ä¸­çš„ IP åœ°å€æ¢æˆåŸŸåï¼›wsgi å­—çœ¼å‰é¢æ˜¯é¡¹ç›®çš„åç§°ã€‚å¦å¤– <code>sudo service nginx reload</code> å¯æ›¿æ¢æˆ <code>sudo service nginx restart</code>ï¼ŒåŒºåˆ«æ˜¯ reload åªé‡è½½é…ç½®æ–‡ä»¶ï¼Œrestart é‡å¯æ•´ä¸ªæœåŠ¡ã€‚</p></blockquote><p>æ¥ä¸‹æ¥ç”¨æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨è¯•ä¸€ä¸‹ï¼š</p><p><img src="http://blog.dusaiphoto.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%28251%29.jpg" class="lazyload placeholder" data-srcset="http://blog.dusaiphoto.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%28251%29.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p><strong>å¤§åŠŸå‘Šæˆå•¦ï¼Œæ’’èŠ±åº†ç¥ï¼</strong></p><h2 id="åç»­å·¥ä½œ"><a href="#åç»­å·¥ä½œ" class="headerlink" title="åç»­å·¥ä½œ"></a>åç»­å·¥ä½œ</h2><h3 id="é—ç•™é—®é¢˜"><a href="#é—ç•™é—®é¢˜" class="headerlink" title="é—ç•™é—®é¢˜"></a>é—ç•™é—®é¢˜</h3><p>æˆåŠŸéƒ¨ç½²åˆ°çº¿ä¸Šåï¼Œè¿˜æœ‰äº›å°é—®é¢˜æ²¡è§£å†³ã€‚</p><p><strong>ç¬¬ä¸€ä¸ªé—®é¢˜</strong>æ˜¯è¿›å…¥æ–‡ç« è¯¦æƒ…é¡µé¢ï¼Œ ckeditor æ— æ³•åŠ è½½äº†ï¼Œå¹¶ä¸”æµè§ˆå™¨æŠ¥å‡º <code>prism_patched.js Not Found</code>çš„é”™è¯¯ã€‚è¿™ä¸ªé—®é¢˜çš„æ ¹æºåœ¨äºä¹‹å‰æˆ‘ä»¬åœ¨å¼€å‘ ckeditor çš„ä»£ç é«˜äº®åŠŸèƒ½æ—¶ï¼Œ<code>prism</code> æ¨¡å—æ˜¯ç›´æ¥æ’å…¥åˆ°è™šæ‹Ÿç¯å¢ƒçš„åº“ä¸­çš„ï¼Œä½†é—®é¢˜æ˜¯éƒ¨ç½²æ—¶è™šæ‹Ÿç¯å¢ƒæ˜¯éœ€è¦é‡æ–°å»ºç«‹çš„ï¼Œæ‰€ä»¥å°±ç¼ºå°‘äº†è¿™ä¸ª prism æ’ä»¶å¯¼è‡´æŠ¥é”™ã€‚</p><p>è§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨è™šæ‹Ÿç¯å¢ƒä¸­æ‰¾åˆ° prism æ’ä»¶çš„ä½ç½®ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">..</span><span class="token punctuation">\</span>env<span class="token punctuation">\</span>Lib<span class="token punctuation">\</span>site-packages<span class="token punctuation">\</span>ckeditor<span class="token punctuation">\</span>static<span class="token punctuation">\</span>ckeditor<span class="token punctuation">\</span>ckeditor<span class="token punctuation">\</span>plugins<span class="token punctuation">\</span>prism<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç„¶åæŠŠå®ƒåŸå°ä¸åŠ¨çš„å¤åˆ¶åˆ°é¡¹ç›®çš„ <code>static</code> ä¸­å®Œå…¨ç›¸åŒçš„ç›®å½•ä¸­å»ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">my_blog<span class="token punctuation">\</span>static<span class="token punctuation">\</span>ckeditor<span class="token punctuation">\</span>ckeditor<span class="token punctuation">\</span>plugins<span class="token punctuation">\</span>prism<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™æ ·åšè¡Œå¾—é€šçš„åŸå› æ˜¯ django-ckeditor ä¹Ÿæ˜¯ä¸€ä¸ª appï¼ŒDjango è®¿é—® app èµ„æºæ—¶ä¼šä¼˜å…ˆåœ¨é¡¹ç›®ä¸­æœç´¢ï¼Œæ²¡æœ‰æ‰å»è™šæ‹Ÿç¯å¢ƒé‡Œæœç´¢ã€‚</p><p>ç„¶åå°±æ˜¯é€šè¿‡ GitHub æ›´æ–°æœåŠ¡å™¨ä»£ç ï¼Œå¹¶ä¸”é‡æ–°æ”¶é›†é™æ€æ–‡ä»¶ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token punctuation">..</span>/django_blog_tutorial$ <span class="token function">git</span> pull origin master<span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token punctuation">..</span>/django_blog_tutorial$ python3 manage.py collectstatic<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿™ä¸ªé—®é¢˜ç»™æˆ‘ä»¬çš„å¯ç¤ºå°±æ˜¯ï¼šé’ˆå¯¹ä¸‰æ–¹åº“ã€èµ„æºçš„æ”¹åŠ¨æœ€å¥½ä¸è¦ç›´æ¥ä¿®æ”¹æºæ–‡ä»¶æˆ–ç¯å¢ƒï¼Œè€Œæ˜¯æƒ³åŠæ³•åœ¨é¡¹ç›®å‰¯æœ¬ä¸­æ›´æ”¹ï¼Œè¿™æ ·æ›´ä¾¿äºç»´æŠ¤ã€‚</p><blockquote><p>æœ‰è¯»è€…å‘ç°æ—§çš„å¯Œæ–‡æœ¬è¯„è®ºä¸­çš„è¡¨æƒ…æ²¡æ˜¾ç¤ºï¼Œè¿™ä¸ªåˆ«æ‹…å¿ƒï¼Œæ–°å‘è¡¨çš„è¯„è®ºæ˜¯æ²¡é—®é¢˜çš„ã€‚</p></blockquote><p><strong>ç¬¬äºŒä¸ªé—®é¢˜</strong>æ˜¯ GitHub ç™»å½•ä¸æ­£å¸¸äº†ï¼Œè¿™ä¸ªå¤šåŠä¸æ˜¯ä»£ç çš„é—®é¢˜ï¼Œè€Œæ˜¯ä½ çš„æœåŠ¡å™¨ä»¥åŠ GitHub çš„å›è°ƒé…ç½®é—®é¢˜ã€‚è¿™é‡Œä¹Ÿä¸å±•å¼€è®²äº†ï¼Œè¯·è¯»è€…è¿”å›å‰é¢ç¬¬ä¸‰æ–¹ç™»å½•çš„æ–‡ç« å†ç ”ç©¶ä¸‹ã€‚</p><p><strong>ç¬¬ä¸‰ä¸ªé—®é¢˜</strong>æ˜¯å¼€å‘é˜¶æ®µç”¨çš„ <code>sqlite</code> æ•°æ®åº“è™½ç„¶å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯æ€§èƒ½è¾ƒå·®ã€‚çº¿ä¸Šä»¥æ€§èƒ½ä¸ºç‹ï¼Œæ‰€ä»¥éœ€è¦å°†æ•°æ®åº“æ›´æ¢ä¸º <code>MYSQL</code> è¿™ç±»ä¸»æµçš„é«˜æ€§èƒ½æ•°æ®åº“ã€‚è¿œç¨‹å®‰è£…é…ç½® MYSQL çš„æ–¹æ³•å¯ä»¥å‚è€ƒä¸€ä¸‹<a href="http://www.liujiangblog.com/course/django/165">åˆ˜æ±Ÿçš„åšå®¢</a>ï¼Œè®²å¾—å¾ˆæ¸…æ¥šã€‚</p><p><strong>ç¬¬å››ä¸ªé—®é¢˜</strong>æ˜¯æ•™ç¨‹éƒ¨ç½²æ˜¯ä»¥ root ç”¨æˆ·è¿›è¡Œçš„ï¼Œè¿™æ˜¯æœåŠ¡å™¨ä¸­å…·æœ‰æœ€é«˜æƒé™çš„ç”¨æˆ·ï¼Œé™¤æ‰è‡ªèº«çš„çæ“ä½œï¼Œä¸€æ—¦è¢«æ”»å‡»è€…ç™»å½•äº†ä¼šç›¸å½“æƒ¨çƒˆï¼ˆå°¤å…¶æ˜¯ç”¨æˆ·/å¯†ç çš„ç™»å½•æ–¹å¼ï¼Œå®‰å…¨ç³»æ•°æä½ï¼‰ã€‚æ¯”è¾ƒå¥½çš„æ–¹å¼æ˜¯é‡æ–°åˆ›å»ºä¸€ä¸ªæ™®é€šç”¨æˆ·æ¥è¿›è¡Œéƒ¨ç½²ï¼Œå¹¶ä¸”å°†ç™»å½•æ–¹å¼æ”¹ä¸ºç§˜é’¥å¯¹ã€‚</p><h3 id="åæœŸè¿ç»´"><a href="#åæœŸè¿ç»´" class="headerlink" title="åæœŸè¿ç»´"></a>åæœŸè¿ç»´</h3><p>ä½ çš„ç½‘ç«™æ˜¯éœ€è¦ä¸æ–­æ›´æ–°ä¼˜åŒ–ä»£ç çš„ã€‚æ¯æ¬¡ä¿®æ”¹ä»£ç åï¼Œæ›´æ–°åˆ°æœåŠ¡å™¨ä¸Šä¹Ÿå¾ˆç®€å•ã€‚åœ¨<strong>è™šæ‹Ÿç¯å¢ƒ</strong>ä¸­å¹¶<strong>è¿›å…¥é¡¹ç›®ç›®å½•</strong>ï¼Œä¾æ¬¡ï¼ˆcollectstatic å’Œ migrate æ˜¯å¯é€‰çš„ï¼‰æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> pull origin masterpython3 manage.py collectstaticpython3 manage.py migrate<span class="token comment"># é‡å¯ gunicorn</span><span class="token function">pkill</span> gunicorngunicorn --bind unix:/tmp/118.31.35.48.socket my_blog.wsgi:application<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åŠ ä¸Š <code>cd</code> æ›´æ”¹ç›®å½•çš„æŒ‡ä»¤ï¼Œéƒ¨ç½²è¿‡ç¨‹æœ‰åå‡ æ¡æŒ‡ä»¤ï¼Œæ‰‹åŠ¨è¾“å…¥ä¹Ÿå¤ªéº»çƒ¦äº†ã€‚ç®€å•ç²—æš´çš„åŠæ³•æ˜¯åˆ©ç”¨ XShell çš„å®ï¼ŒæŠŠéƒ¨ç½²æŒ‡ä»¤å†™æˆé¡ºåºæ‰§è¡Œçš„è„šæœ¬ï¼Œç‚¹å‡ ä¸ªæŒ‰é’®å°±å®Œæˆäº†ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p><blockquote><p>æ›´é«˜çº§çš„åšæ³•æ˜¯åœ¨æœåŠ¡å™¨ä¸Šç¼–å†™è‡ªåŠ¨åŒ–éƒ¨ç½²çš„è„šæœ¬ï¼Œè¿™ä¸ªå°±è¯»è€…ä»¥åæ…¢æ…¢ç ”ç©¶å§</p></blockquote><p>å¦‚æœä½ æ›´æ”¹äº† Nginx çš„é…ç½®æ–‡ä»¶ï¼Œè¿˜éœ€è¦é‡å¯ Nginx æœåŠ¡ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">service</span> nginx reload<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æœ€åï¼Œè¿˜è®°å¾—å‰é¢ç« èŠ‚å¼€å‘çš„<strong>æ—¥å¿—è®°å½•åŠŸèƒ½</strong>ä¸ï¼Ÿçœ‹çœ‹é¡¹ç›®ä¸­æœ‰ <code>logs</code> ç›®å½•å—ï¼Ÿ</p><h3 id="åŸŸååŠä¼˜åŒ–"><a href="#åŸŸååŠä¼˜åŒ–" class="headerlink" title="åŸŸååŠä¼˜åŒ–"></a>åŸŸååŠä¼˜åŒ–</h3><p>ç›¸å¯¹éƒ¨ç½²æ¥è¯´ï¼ŒåŸŸåé…ç½®å°±å¾ˆå®¹æ˜“äº†ã€‚é˜¿é‡Œäº‘æä¾›åŸŸåçš„è´­ä¹°ã€å¤‡æ¡ˆï¼ˆé¡¶çº§åŸŸåå¿…é¡»ï¼Œçº¦10ä¸ªå·¥ä½œæ—¥ï¼‰ã€è§£ææœåŠ¡ï¼Œç®€ç›´å…¨å®¶æ¡¶æœ‰æ²¡æœ‰ã€‚é‡ç‚¹æé†’æœ‰äº†åŸŸåä¹‹åè¦æ”¹çš„åœ°æ–¹ï¼š</p><ul><li><code>settings.py</code> ä¸­çš„ <code>ALLOWED_HOSTS</code></li><li><code>Nginx</code> ä¸­ä¸ IP/åŸŸå æœ‰å…³çš„ä½ç½®</li><li><code>Gunicorn</code> ä¸­ä¸ IP/åŸŸå æœ‰å…³çš„ä½ç½®</li></ul><p>åŸŸåæå®šä¹‹åï¼Œæ¥ç€å°±å¯ä»¥ç€æ‰‹è€ƒè™‘æŠŠç½‘ç«™å‡çº§ä¸º https ç‰ˆæœ¬äº†ï¼Œè¿™æ˜¯å¤§è¶‹åŠ¿ï¼Œä¸€å®šè¦åšã€‚ï¼ˆè¿™ä¸ªä¹Ÿç•™ç»™è¯»è€…è‡ªå·±æŠ˜è…¾ï¼‰</p><p>å¦å¤–ï¼Œå¼€å‘æ—¶ä¸ºäº†æ•ˆç‡æŠŠæ‰€æœ‰é™æ€èµ„æºéƒ½ä¸‹è½½åˆ°æœ¬åœ°ï¼Œä½†æ˜¯éƒ¨ç½²æ—¶ä¸æ¨èè¿™æ ·åšï¼ŒåŸå› æ˜¯é™æ€æ–‡ä»¶é€šå¸¸ä½“ç§¯éƒ½è¾ƒå¤§ï¼Œä½ èŠ±è¡€æ±—é’±ä¹°çš„æœåŠ¡å™¨è½½å…¥ä¼šå¾ˆæ…¢ã€‚å°½é‡è¿œç¨‹ CDN è°ƒç”¨ï¼Œåƒè¿™æ ·ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å›½å†…æ¨è<a href="https://www.bootcdn.cn/">BootCDN</a>ï¼Œé€Ÿåº¦å¿«è¿˜å…è´¹ã€‚</p><p>åª’ä½“èµ„æºä¹Ÿæ˜¯ç±»ä¼¼ï¼Œå°å›¾è¿˜æ— æ‰€è°“ï¼Œå¤§å›¾å°±è¦æ”¾åœ¨<a href="https://portal.qiniu.com/signup?code=1hfqrn5z85c9e">ä¸ƒç‰›äº‘</a>è¿™ç±»çš„å¯¹è±¡å­˜å‚¨äº‘ä¸Šï¼Œå¦åˆ™ä½ ç½‘é¡µçš„è½½å…¥é€Ÿåº¦ä¼šå¾ˆæ‚²å‰§çš„ã€‚</p><p>æœ€åå†æ¬¡æé†’ï¼Œåœ¨å¼€å‘æ—¶æˆ‘ä»¬å¾€ <code>settings.py</code> ä¸­å†™å…¥å¦‚ SECRET_KEY ã€é‚®ç®±å¯†ç ç­‰å„ç§æ•æ„Ÿä¿¡æ¯ï¼Œéƒ¨ç½²æ—¶åƒä¸‡ä¸è¦ç›´æ¥ä¸Šä¼ åˆ°äº’è”ç½‘ï¼ˆGitHub åº“æ˜¯å…¬å¼€çš„ï¼ï¼‰ï¼Œè€Œæ˜¯æŠŠè¿™äº›ä¿¡æ¯å†™åˆ°æœåŠ¡å™¨æœ¬åœ°ï¼Œç„¶ååœ¨ <code>settings.py</code> ä¸­è¯»å–ã€‚</p><h3 id="è¿›ç¨‹æ‰˜ç®¡"><a href="#è¿›ç¨‹æ‰˜ç®¡" class="headerlink" title="è¿›ç¨‹æ‰˜ç®¡"></a>è¿›ç¨‹æ‰˜ç®¡</h3><p>éƒ¨ç½²è¿‡ç¨‹ä¸­è¿˜æœ‰ä¸ªæ–°æ‰‹ç»å¸¸ç¢°åˆ°çš„é—®é¢˜ï¼Œå°±æ˜¯å½“ SSH ç»ˆç«¯ä¸€å…³é—­ï¼ŒWeb æœåŠ¡ä¹Ÿä¸€èµ·è¢«å…³é—­äº†ï¼Œå¯¼è‡´ç½‘ç«™æ— æ³•è¿æ¥ã€‚è¿™ä¸ªé—®é¢˜åœ¨ @frostming çš„æ–‡ç«  <a href="https://frostming.com/2020/05-24/process-management">ã€ŠWeb æœåŠ¡çš„è¿›ç¨‹æ‰˜ç®¡ã€‹</a> ä¸­ç”¨äº†ä¸‰ç§å¸¸è§æ–¹æ³•è§£å†³äº†ï¼Œå¹¶ä¸”è¿˜å®ç°äº†å¼‚å¸¸é‡å¯å’Œå¼€æœºè‡ªå¯åŠ¨ã€‚æœ‰ç±»ä¼¼ç–‘æƒ‘çš„åŒå­¦å¯ä»¥å‰å¾€å›´è§‚ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>éƒ¨ç½²å¯ä»¥è¯´æ˜¯å…¥é—¨è€…æœ€å¤§çš„éš¾å…³äº†ï¼Œä¹Ÿæ˜¯æ£€éªŒæˆæœã€è·å–æˆå°±æ„Ÿçš„å…³é”®ä¸€æ­¥ã€‚å¤šæŸ¥èµ„æ–™ï¼Œè¦ç›¸ä¿¡ä½ é‡åˆ°çš„é—®é¢˜åˆ«äººæ—©å°±é‡åˆ°è¿‡äº†ã€‚</p><p>éƒ¨ç½²æ˜¯èœé¸Ÿçš„æ¯•ä¸šç¤¼ï¼Œä¹Ÿæ˜¯æ–°äººçš„ç¬¬ä¸€è¯¾ã€‚</p><p><strong>è·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ï¼Œå¾å°†ä¸Šä¸‹è€Œæ±‚ç´¢ã€‚</strong></p><hr><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#100;&#x75;&#115;&#x61;&#105;&#x70;&#x68;&#111;&#116;&#x6f;&#64;&#102;&#111;&#120;&#109;&#97;&#105;&#108;&#46;&#x63;&#111;&#x6d;">&#100;&#x75;&#115;&#x61;&#105;&#x70;&#x68;&#111;&#116;&#x6f;&#64;&#102;&#111;&#120;&#109;&#97;&#105;&#108;&#46;&#x63;&#111;&#x6d;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--42.å°åŠŸèƒ½é›†åˆè´´</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/42.xiao-gong-neng-ji-he-tie/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/42.xiao-gong-neng-ji-he-tie/</url>
      
        <content type="html"><![CDATA[<p>æœ‰äº›<strong>åŠŸèƒ½ç‹¬ç«‹çš„å°åŠŸèƒ½</strong>ï¼Œå•ç‹¬ä¸€ç¯‡æ–‡ç« ä¸å¤Ÿåˆ†é‡ï¼Œäºæ˜¯åœ¨è¿™é‡Œé›†ä¸­è§£é‡Šäº†ã€‚</p><p>å’Œ<a href="https://www.dusaiphoto.com/article/detail/43/">è¯»è€…å¸¸è§é—®é¢˜å¸–</a>ä¸€æ ·ï¼Œæœ¬ç¯‡æ˜¯<strong>æŒç»­æ›´æ–°</strong>çš„ï¼Œæƒ³åˆ°ä¸€ä¸ªå†™ä¸€ä¸ªã€‚</p><h2 id="æ–‡ç« å¿«æ·å¯¼èˆª"><a href="#æ–‡ç« å¿«æ·å¯¼èˆª" class="headerlink" title="æ–‡ç« å¿«æ·å¯¼èˆª"></a>æ–‡ç« å¿«æ·å¯¼èˆª</h2><p>å¿«æ·å¯¼èˆªæŒ‡çš„æ˜¯è¿™ä¸ªåŠŸèƒ½ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190117/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE145.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190117/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE145.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ç‚¹å‡»å¯¹åº”æŒ‰é’®ï¼Œé¡µé¢ç«‹å³è·³è½¬åˆ°å¦ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œçœå»äº†ç”¨æˆ·è¿”å›é¦–é¡µé‡æ–°å¯»æ‰¾æ–‡ç« çš„ç¹çã€‚</p><h3 id="è§†å›¾"><a href="#è§†å›¾" class="headerlink" title="è§†å›¾"></a>è§†å›¾</h3><p>å®ç°æœ¬åŠŸèƒ½çš„å…³é”®å°±æ˜¯è¦æŸ¥æ‰¾å‡º<strong>å‘è¡¨æ—¶é—´ä¸å½“å‰æ–‡ç« ç›¸é‚»</strong>çš„æ–‡ç« ã€‚ä¸ºäº†æ¼”ç¤ºç®€å•ï¼Œå°±ç²—ç•¥ä»¥<code>id</code>ä½œä¸ºå‘è¡¨æ—¶é—´çš„æ’åºã€‚</p><p>åœ¨ä¹‹å‰çš„<a href="https://www.dusaiphoto.com/article/detail/47/">æœç´¢æ–‡ç« çš„æ•™ç¨‹</a>ä¸­ï¼Œæˆ‘ä»¬å·²ç»ä½“éªŒè¿‡<code>contains</code>è¿™ç§æŸ¥æ‰¾æ–¹æ³•äº†ï¼Œç°åœ¨éœ€è¦ç”¨åˆ°å¦å¤–ä¸¤ç§ï¼š<code>gt</code>å’Œ<code>lt</code>ã€‚</p><p>ç¼–å†™è§†å›¾ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># æ–‡ç« è¯¦æƒ…</span><span class="token keyword">def</span> <span class="token function">article_detail</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># å·²æœ‰ä»£ç ã€‚å–å‡ºç›¸åº”çš„æ–‡ç« </span>    article <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token builtin">id</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># è¿‡æ»¤å‡ºæ‰€æœ‰çš„idæ¯”å½“å‰æ–‡ç« å°çš„æ–‡ç« </span>    pre_article <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>id__lt<span class="token operator">=</span>article<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">'-id'</span><span class="token punctuation">)</span>    <span class="token comment"># è¿‡æ»¤å‡ºidå¤§çš„æ–‡ç« </span>    next_article <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>id__gt<span class="token operator">=</span>article<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span>        <span class="token comment"># å–å‡ºç›¸é‚»å‰ä¸€ç¯‡æ–‡ç« </span>    <span class="token keyword">if</span> pre_article<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">:</span>        pre_article <span class="token operator">=</span> pre_article<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        pre_article <span class="token operator">=</span> <span class="token boolean">None</span>            <span class="token comment"># å–å‡ºç›¸é‚»åä¸€ç¯‡æ–‡ç« </span>    <span class="token keyword">if</span> next_article<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">:</span>        next_article <span class="token operator">=</span> next_article<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        next_article <span class="token operator">=</span> <span class="token boolean">None</span>            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token comment"># éœ€è¦ä¼ é€’ç»™æ¨¡æ¿çš„å¯¹è±¡</span>    context <span class="token operator">=</span> <span class="token punctuation">&#123;</span>         <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token string">'pre_article'</span><span class="token punctuation">:</span> pre_article<span class="token punctuation">,</span>        <span class="token string">'next_article'</span><span class="token punctuation">:</span> next_article<span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œé€»è¾‘å¦‚ä¸‹ï¼š</p><ul><li><code>lt</code>è¿‡æ»¤å‡ºæ‰€æœ‰<code>id</code>æ¯”å½“å‰æ–‡ç« å°çš„æ–‡ç« </li><li>å¯¹è¿™äº›æ–‡ç« æŒ‰<code>-id</code>è¿›è¡Œæ’åº</li><li>å–å‡ºæ’åœ¨é¦–ä½çš„æ–‡ç« ï¼Œå³ç›¸é‚»çš„æ–‡ç« </li><li>è¿”å›ç»™æ¨¡æ¿ä¸Šä¸‹æ–‡</li></ul><p><code>gt</code>çš„åŸç†ä¹Ÿæ˜¯ç±»ä¼¼ã€‚</p><h3 id="æ¨¡æ¿"><a href="#æ¨¡æ¿" class="headerlink" title="æ¨¡æ¿"></a>æ¨¡æ¿</h3><p>æ¨¡æ¿å¾—åˆ°ä¸Šä¸‹æ–‡åï¼Œå°±è¦ç›¸åº”ä¿®æ”¹ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/detail.html...<span class="token comment">&lt;!-- ç›¸é‚»æ–‡ç« å¯¼èˆª --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row justify-content-end<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    &#123;% if next_article %&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-auto mr-auto<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span>  <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123; next_article.get_absolute_url &#125;&#125;<span class="token punctuation">"</span></span>             <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-info<span class="token punctuation">"</span></span>            <span class="token punctuation">></span></span>            &#123;&#123; next_article.title &#125;&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    &#123;% endif %&#125;&#123;% if pre_article %&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-auto<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span>  <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123; pre_article.get_absolute_url &#125;&#125;<span class="token punctuation">"</span></span>         <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-info<span class="token punctuation">"</span></span>         <span class="token punctuation">></span></span>            &#123;&#123; pre_article.title &#125;&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>&#123;% endif %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»£ç å¾ˆç®€å•ï¼Œå°±æ˜¯æŒ‰ç…§ä¸Šä¸‹æ–‡çš„ä¿¡æ¯ï¼Œå°†å¯¼èˆªæŒ‰é’®æ­£ç¡®æ˜¾ç¤ºå‡ºæ¥ã€‚åŠŸèƒ½å°±å®Œæˆäº†ã€‚</p><p>å¯¼èˆªçš„é€»è¾‘ä¸ä¸€å®šéè¦æŒ‰æ—¶é—´æ’åºï¼Œä¹Ÿå¯ä»¥æŒ‰ç…§çƒ­åº¦ã€æ–‡ç« ç±»åˆ«ç”šè‡³æ–‡å­—ä¸ªæ•°ï¼Œè¿™ä¸ªå°±éšä¾¿ä½ äº†ã€‚</p><h2 id="é¡µé¢å®šä½"><a href="#é¡µé¢å®šä½" class="headerlink" title="é¡µé¢å®šä½"></a>é¡µé¢å®šä½</h2><p>è‰¯å¥½çš„UIè®¾è®¡åº”è¯¥è®©ç”¨æˆ·æ¸…æ¥šè‡ªå·±å½“å‰çš„çŠ¶æ€ã€‚</p><p>æ¯”å¦‚<a href="https://www.dusaiphoto.com/">æˆ‘çš„åšå®¢</a>å°±æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20190105/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE139.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20190105/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE139.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>å¯ä»¥æ¸…æ¥šçœ‹åˆ°å½“å‰æ­£ä½äºã€æ–‡ç« ã€‘-ã€ç¼–ç¨‹ã€‘-ã€æœ€è¿‘ã€‘è¿™ä¸ªé¡µé¢ä¸­çš„ã€‚</p><p>å®ç°æ–¹æ³•æä¾›ç»™å¤§å®¶å‚è€ƒã€‚</p><blockquote><p>ä¾‹å­ä¸­çš„æ ·å¼ç”¨çš„LayUIï¼Œè€Œä¸æ˜¯Bootstrapï¼Œä½†æ˜¯æ€è·¯æ˜¯ç›¸åŒçš„</p><p>è¯»è€…è¯·å°è¯•ç”¨Bootstrapå®ç°</p></blockquote><h3 id="æ ç›®å’Œæ’åº"><a href="#æ ç›®å’Œæ’åº" class="headerlink" title="æ ç›®å’Œæ’åº"></a>æ ç›®å’Œæ’åº</h3><p>æ ç›®å’Œæ’åºéƒ½æ˜¯<strong>è¢«æŸ¥è¯¢æ–‡ç« é›†åˆ</strong>çš„å…±æœ‰å±æ€§ï¼Œå› æ­¤è€ƒè™‘åœ¨<code>article_list()</code>è§†å›¾ä¸­æŠŠå®ƒä»¬ä½œä¸º<strong>ä¸Šä¸‹æ–‡</strong>ä¼ é€’åˆ°æ¨¡æ¿ä¸­æ¥ï¼Œç±»ä¼¼äºæŸç§â€œæ ‡è®°â€ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token comment"># ä¼ é€’åˆ°æ¨¡æ¿çš„å¯¹è±¡</span>context <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token string">'column'</span><span class="token punctuation">:</span> column<span class="token punctuation">,</span> <span class="token string">'order'</span><span class="token punctuation">:</span> order <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶ååœ¨æ¨¡æ¿ä¸­é€šè¿‡<code>column</code>å’Œ<code>order</code>çš„å€¼ï¼Œæ§åˆ¶æŒ‰é’®çš„æ ·å¼ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">/list.html<span class="token comment">&lt;!-- æ ç›® --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">...</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>          ...          &#123;% if column_id == column.id %&#125;          layui-btn-warm          &#123;% else %&#125;          layui-btn-primary          &#123;% endif %&#125;          <span class="token punctuation">"</span></span><span class="token punctuation">></span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>...<span class="token comment">&lt;!-- æ’åº --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">...</span><span class="token punctuation">></span></span>    &#123;% if order == 'total_views' %&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cite</span><span class="token punctuation">></span></span>æœ€è¿‘<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cite</span><span class="token punctuation">></span></span>    &#123;% else %&#125;    æœ€è¿‘    &#123;% endif %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»£ç ä¸­çš„<code>column_id</code>æ˜¯å½“å‰é¡µé¢æ‰€åœ¨çš„æ ç›®ï¼Œ<code>column.id</code>æ˜¯è§†å›¾ä¼ é€’ç»™æ¨¡æ¿çš„ä¸Šä¸‹æ–‡ã€‚é€šè¿‡æ¯”å¯¹è¿™ä¸¤ä¸ªå€¼æ˜¯å¦ä¸€è‡´ï¼Œä»è€Œå†³å®š<strong>æ ç›®æŒ‰é’®</strong>çš„æ ·å¼ã€‚</p><p>é¢åŒ…å±‘ä¹Ÿæ˜¯ç±»ä¼¼çš„æ–¹æ³•ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦æ’å…¥<code>&lt;cite&gt;</code>æ ‡ç­¾ã€‚</p><h3 id="å¯¼èˆªæ "><a href="#å¯¼èˆªæ " class="headerlink" title="å¯¼èˆªæ "></a>å¯¼èˆªæ </h3><p>å°±æ˜¯<a href="https://www.dusaiphoto.com/">æˆ‘çš„åšå®¢</a>é¡¶éƒ¨çš„â€œé»‘æ¡â€ï¼Œå®ƒæ˜¯æ‰€æœ‰æ¿å—çš„å…¥å£ã€‚</p><p>å¦‚æœå¯¼èˆªæ ä¹Ÿé‡‡ç”¨ç±»ä¼¼ä¸Šé¢çš„<strong>ä¼ é€’å€¼ç»™æ¨¡æ¿</strong>æ¥å®šä½ï¼Œé‚£ä¹ˆè¦æ±‚æ‰€æœ‰çš„appéƒ½è¦ä¼ é€’åŒä¸€ä¸ªâ€æ ‡è®°â€åˆ°æ¨¡æ¿ä¸­ã€‚ç†è®ºä¸Šå¯è¡Œï¼Œä½†æ˜¯ä¹Ÿä¼šå¯¼è‡´appä¹‹é—´è€¦åˆå¾—å¤ªç´§ï¼Œä¸ªäººæ„Ÿè§‰ä¸æ˜¯å¥½çš„å®è·µã€‚</p><p>æ‰€ä»¥æˆ‘é‡‡ç”¨äº†ä¸€ç§ç¬¨åŠæ³•ï¼šç›´æ¥åœ¨æ¨¡æ¿ä¸­è¯»å–å½“å‰çš„urlï¼Œä»è€Œåˆ¤æ–­é¡µé¢ä½ç½®ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">/header.html...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>  <span class="token punctuation">"</span>             ...             &#123;% if <span class="token punctuation">'</span>/xxx<span class="token punctuation">'</span> in request.path %&#125;             layui-this             &#123;% endif %&#125;             <span class="token punctuation">"</span></span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ç§æ–¹æ³•æœ‰ä¸ªå°é—®é¢˜ï¼Œå°±æ˜¯å¦‚æœurlä¸­æ°å¥½å‡ºç°äº†åˆ«çš„æ¿å—çš„å…³é”®è¯ï¼Œå®šä½å¯èƒ½ä¼šæ˜¾ç¤ºé”™è¯¯ã€‚</p><p>ä¸è¿‡å¯¹åšå®¢æ¥è¯´ä¹Ÿä¸ç®—ä»€ä¹ˆå¤§é—®é¢˜ï¼Œæ¯”ç´§è€¦åˆçš„è®¾è®¡è¦å¥½å¤šäº†ã€‚</p><hr><p><em>æŒç»­æ›´æ–°ä¸­â€¦</em></p><hr><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#x64;&#x75;&#115;&#97;&#x69;&#x70;&#104;&#x6f;&#116;&#111;&#64;&#102;&#111;&#120;&#109;&#97;&#105;&#108;&#x2e;&#x63;&#111;&#x6d;">&#x64;&#x75;&#115;&#97;&#x69;&#x70;&#104;&#x6f;&#116;&#111;&#64;&#102;&#111;&#120;&#109;&#97;&#105;&#108;&#x2e;&#x63;&#111;&#x6d;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--11.åˆ é™¤æ–‡ç« </title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/11.shan-chu-wen-zhang/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/11.shan-chu-wen-zhang/</url>
      
        <content type="html"><![CDATA[<p>æ—¢ç„¶æœ‰äº†å†™æ–‡ç« çš„åŠŸèƒ½ï¼Œé‚£å½“ç„¶ä¹Ÿå¿…é¡»è¦æœ‰åˆ é™¤æ–‡ç« çš„åŠŸèƒ½äº†ã€‚</p><h2 id="ä¸å®‰å…¨çš„æ–¹å¼"><a href="#ä¸å®‰å…¨çš„æ–¹å¼" class="headerlink" title="ä¸å®‰å…¨çš„æ–¹å¼"></a>ä¸å®‰å…¨çš„æ–¹å¼</h2><p>æœ‰äº†ä¹‹å‰çš„å­¦ä¹ åšé“ºå«ï¼Œåˆ é™¤æ–‡ç« å®ç°èµ·æ¥å°±æ¯”è¾ƒç®€å•äº†ã€‚</p><p>é¦–å…ˆå¢åŠ ä¸€ä¸ªè§†å›¾å‡½æ•°ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># åˆ æ–‡ç« </span><span class="token keyword">def</span> <span class="token function">article_delete</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># æ ¹æ® id è·å–éœ€è¦åˆ é™¤çš„æ–‡ç« </span>    article <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token builtin">id</span><span class="token punctuation">)</span>    <span class="token comment"># è°ƒç”¨.delete()æ–¹æ³•åˆ é™¤æ–‡ç« </span>    article<span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># å®Œæˆåˆ é™¤åè¿”å›æ–‡ç« åˆ—è¡¨</span>    <span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">"article:article_list"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ä¸æŸ¥è¯¢æ–‡ç« ç±»ä¼¼ï¼Œå› ä¸ºéœ€è¦çŸ¥é“å…·ä½“åº”è¯¥åˆ é™¤å“ªä¸€ç¯‡æ–‡ç« ï¼Œå› æ­¤å¿…é¡»ä¼ å…¥æ–‡ç« çš„<code>id</code>ï¼›</li><li>ç´§æ¥ç€è°ƒç”¨<code>.delete()</code>å‡½æ•°åˆ é™¤æ•°æ®åº“ä¸­è¿™ç¯‡æ–‡ç« çš„æ¡ç›®ï¼›</li><li>åˆ é™¤æˆåŠŸåè¿”å›åˆ°æ–‡ç« åˆ—è¡¨ã€‚</li></ul><p>è¿™é‡Œä¸ä¸Šä¸€ç« ä¸€æ ·ï¼Œä¸å¯¹ç”¨æˆ·çš„èº«ä»½è¿›è¡Œé™åˆ¶ï¼Œå³ä»»ä½•äººéƒ½å¯ä»¥åˆ é™¤ä»»æ„æ–‡ç« ã€‚å½“ç„¶è¿™æ ·è‚¯å®šæ˜¯ä¸ç¬¦åˆå¸¸ç†çš„ï¼Œç­‰åˆ°æˆ‘ä»¬å­¦ä¹ äº†ç”¨æˆ·ç®¡ç†çš„çŸ¥è¯†åï¼Œå†å›å¤´æ¥ä¿®æ”¹ã€‚</p><p>ç„¶åå†™å…¥è·¯ç”±ä¿¡æ¯ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>urls<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># åˆ é™¤æ–‡ç« </span>    path<span class="token punctuation">(</span><span class="token string">'article-delete/&lt;int:id>/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>article_delete<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'article_delete'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œå‡ ä¹ä¸æ–‡ç« è¯¦æƒ…çš„å†™æ³•ä¸€æ ·ï¼Œæ²¡æœ‰æ–°çš„å†…å®¹ã€‚å†æ¬¡æ³¨æ„æ–‡ç« çš„idæ˜¯å¦‚ä½•ä¼ é€’åˆ°è§†å›¾ä¸­çš„ã€‚</p><p>æœ€åæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿåœ¨æ–‡ç« è¯¦æƒ…çš„é¡µé¢è¿›è¡Œåˆ é™¤çš„æ“ä½œï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥åœ¨ä¸“é—¨çš„ç®¡ç†æ–‡ç« çš„é¡µé¢ä¸­ï¼‰ï¼Œå› æ­¤ä¿®æ”¹æ¨¡æ¿<code>detail.html</code>ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/detail.html...<span class="token comment">&lt;!-- æ–‡ç« è¯¦æƒ… --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        ...        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-12 alert alert-success<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä½œè€…ï¼š&#123;&#123; article.author &#125;&#125;         Â· <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">"</span></span><span class="token attr-name"><span class="token namespace">article:</span>article_delete"</span> <span class="token attr-name">article.id</span> <span class="token attr-name">%&#125;"</span><span class="token punctuation">></span></span>åˆ é™¤æ–‡ç« <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        ...    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œå¢åŠ äº†ä¸€ä¸ªè°ƒç”¨<code>article_delete</code>è§†å›¾å‡½æ•°çš„é“¾æ¥ï¼Œå¹¶ä¸”å°†<code>article.id</code>ä¼ é€’è¿›å»ã€‚</p><p>è¿è¡Œå¼€å‘æœåŠ¡å™¨ï¼Œå¯ä»¥å‘ç°å·²ç»èƒ½å¤Ÿæ­£å¸¸çš„åˆ é™¤æ–‡ç« äº†ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181008/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE56.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181008/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE56.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><h3 id="å¢åŠ å¼¹çª—"><a href="#å¢åŠ å¼¹çª—" class="headerlink" title="å¢åŠ å¼¹çª—"></a>å¢åŠ å¼¹çª—</h3><p>åŠŸèƒ½å·²ç»å®ç°äº†ï¼Œä½†æ˜¯è¿˜æœ‰ä¸ªå°é—®é¢˜æ²¡æœ‰è§£å†³ï¼šä¸‡ä¸€æˆ‘åªæ˜¯ä¸å°å¿ƒç‚¹åˆ°äº†é“¾æ¥ï¼Œè¾›è¾›è‹¦è‹¦å†™çš„æ–‡ç« å°±è¢«åˆ é™¤äº†ï¼Œå²‚ä¸æ˜¯æ¬²å“­æ— æ³ªäº†ï¼Ÿ</p><p>å¾ˆå®¹æ˜“æƒ³åˆ°çš„ä¸€ä¸ªè§£å†³æ–¹æ³•ï¼Œå°±æ˜¯ç‚¹å‡»åˆ é™¤æŒ‰é’®æ˜¯å‡ºç°ä¸€ä¸ªå¼¹çª—ï¼Œç¡®è®¤åå†è¿›è¡Œåˆ é™¤ï¼Œç¡®ä¿ç”¨æˆ·ä¸æ˜¯è¯¯æ“ä½œçš„ã€‚</p><p>å¼¹çª—æ˜¯å¾ˆå¸¸ç”¨çš„åŠŸèƒ½ï¼Œä½†æ˜¯æƒ³å†™å‡ºä¸€ä¸ªç¾è§‚å¥½ç”¨çš„å¼¹çª—å´ä¸å®¹æ˜“ã€‚å¹¸è¿çš„æ˜¯æˆ‘ä»¬ä¸éœ€è¦é‡å¤é€ è½®å­ï¼Œæ—©å°±æœ‰é©å‘½å…ˆé©±åšå¥½ç›¸å…³çš„åŠŸèƒ½äº†ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨<strong>Layerå¼¹çª—ç»„ä»¶</strong>ã€‚</p><p><em>layer</em>æ˜¯ä¸€æ¬¾å¤‡å—é’ççš„webå¼¹å±‚ç»„ä»¶ï¼Œå…·å¤‡å…¨æ–¹ä½çš„è§£å†³æ–¹æ¡ˆã€‚é¦–å…ˆåˆ°å®˜ç½‘ä¸‹è½½Layeræ’ä»¶ï¼š<a href="https://layer.layui.com/">Layer</a></p><p>è§£å‹åå°†é‡Œé¢çš„<strong>layeræ–‡ä»¶å¤¹ï¼ˆå«æœ‰layer.jsçš„ï¼‰</strong>ç›´æ¥å¤åˆ¶åˆ°é¡¹ç›®çš„<code>static</code>æ–‡ä»¶å¤¹ä¸‹ã€‚</p><p>ä¸ºäº†æœªæ¥åœ¨æ‰€æœ‰é¡µé¢éƒ½èƒ½ä½¿ç”¨Layerå¼¹çª—åŠŸèƒ½ï¼Œåœ¨<code>base.html</code>ä¸­é€šè¿‡æ ‡ç­¾å¼•å…¥ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/base.html...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    ...    <span class="token comment">&lt;!-- bootstrap.js ä¾èµ– jquery.js å’Œpopper.jsï¼Œå› æ­¤åœ¨è¿™é‡Œå¼•å…¥ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>jquery/jquery-3.3.1.js<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    ...    <span class="token comment">&lt;!-- å¼•å…¥layer.js --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>layer/layer.js<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>layeræ’ä»¶ä¾èµ–jqueryæ‰èƒ½æ­£å¸¸å·¥ä½œï¼Œå› æ­¤è¦åœ¨jqueryçš„åé¢å¼•å…¥layerã€‚</strong></p><p>å†æ¬¡æ”¹å†™æ¨¡æ¿æ–‡ä»¶<code>detail.html</code>ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/detail.html...<span class="token comment">&lt;!-- æ–‡ç« è¯¦æƒ… --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        ...        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-12 alert alert-success<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä½œè€…ï¼š&#123;&#123; article.author &#125;&#125;         Â· <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">confirm_delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>åˆ é™¤æ–‡ç« <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        ...    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token comment">// åˆ é™¤æ–‡ç« çš„å‡½æ•°</span>    <span class="token keyword">function</span> <span class="token function">confirm_delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// è°ƒç”¨layerå¼¹çª—ç»„ä»¶</span>        layer<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>            <span class="token comment">// å¼¹çª—æ ‡é¢˜</span>            title<span class="token operator">:</span> <span class="token string">"ç¡®è®¤åˆ é™¤"</span><span class="token punctuation">,</span>            <span class="token comment">// æ­£æ–‡</span>            content<span class="token operator">:</span> <span class="token string">"ç¡®è®¤åˆ é™¤è¿™ç¯‡æ–‡ç« å—ï¼Ÿ"</span><span class="token punctuation">,</span>            <span class="token comment">// ç‚¹å‡»ç¡®å®šæŒ‰é’®åè°ƒç”¨çš„å›è°ƒå‡½æ•°</span>            <span class="token function-variable function">yes</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">index<span class="token punctuation">,</span> layero</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// æŒ‡å®šåº”å½“å‰å¾€çš„ url</span>                location<span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token string">'&#123;% url "article:article_delete" article.id %&#125;'</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>&#123;% endblock content %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>&lt;a&gt;</code>æ ‡ç­¾ä¸­å¢åŠ äº†<code>onclick</code>å±æ€§ï¼Œè¡¨ç¤ºåœ¨ç‚¹å‡»é“¾æ¥æ—¶è°ƒç”¨åé¢çš„<code>confirm_delete()</code>å‡½æ•°ã€‚</li><li><code>confirm_delete()</code>å‡½æ•°ä¸­è°ƒç”¨äº†<strong>layerå¼¹çª—ç»„ä»¶</strong>ï¼Œå¯¹å¼¹çª—çš„<strong>æ ‡é¢˜</strong>ã€<strong>æ­£æ–‡</strong>ä»¥åŠ<strong>ç¡®å®šé”®</strong>è¿›è¡Œäº†å®šä¹‰ã€‚**<code>location.href</code>æ˜¯ç‚¹å‡»ç¡®å®šé”®ååº”è¯¥å‰å¾€çš„åœ°å€ï¼Œå³åˆ é™¤æ–‡ç« çš„urlã€‚**ï¼ˆå½“ç„¶Layerç»„ä»¶è¿œä¸æ­¢è¿™äº›ç”¨æ³•ï¼Œå…·ä½“å¯åœ¨å®˜æ–¹æ–‡æ¡£ä¸­æŸ¥é˜…ï¼‰ã€‚</li><li>é€šè¿‡<code>onclick</code>å®ç°äº†åŠŸèƒ½é€»è¾‘ï¼Œå› æ­¤<code>href</code>é“¾æ¥å°±ä¸éœ€è¦å†è·³è½¬äº†ã€‚</li></ul><blockquote><p>ä¸è¦å°†æ¨¡æ¿è¯­æ³•å’ŒJavaScriptè¯­æ³•ææ··äº†ã€‚</p><p>åŒ…è£¹åœ¨ <code>&#123;% .. %&#125;</code> ä¸­çš„æ˜¯Djangoçš„æ¨¡æ¿è¯­æ³•ã€‚Djangoåœ¨æ¨¡æ¿è¯­æ³•å¸®åŠ©ä¸‹å°†é›¶æ•£çš„æ¨¡æ¿æ–‡ä»¶æ‹¼æ¥æˆå®Œæ•´çš„htmlæ–‡ä»¶ï¼Œå†ä¼ é€’åˆ°ç”¨æˆ·çš„æµè§ˆå™¨ä¸­è¿›è¡Œè§£æã€‚æ¨¡æ¿è¯­æ³•é€‚åˆæ‰§è¡Œä¸€äº›ç®€å•çš„é€»è¾‘ã€‚</p><p>åŒ…è£¹åœ¨<code>script</code>æ ‡ç­¾ä¸­çš„æ˜¯JavaScriptè¯­æ³•ï¼Œå®ƒæ˜¯ä¸Pythonä¸åŒçš„ã€èƒ½å¤Ÿåœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„å‰ç«¯è¯­è¨€ã€‚å­¦å¥½JavaScriptåŒæ ·æ˜¯ä¸€ä¸ªæ¼«é•¿çš„è¿‡ç¨‹ï¼Œå¥½åœ¨æœ¬æ•™ç¨‹ä¸­åªä¼šæ¶‰åŠä¸€ç‚¹åŸºæœ¬çš„JavaScriptä»£ç ã€‚</p></blockquote><p>ä¿å­˜æ‰€æœ‰æ–‡ä»¶ååˆ·æ–°é¡µé¢ï¼Œå¾ˆå¥½ï¼Œè¾¾åˆ°äº†ç†æƒ³çš„æ•ˆæœï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181008/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE57.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181008/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE57.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><h2 id="å®‰å…¨çš„æ–¹å¼"><a href="#å®‰å…¨çš„æ–¹å¼" class="headerlink" title="å®‰å…¨çš„æ–¹å¼"></a>å®‰å…¨çš„æ–¹å¼</h2><p>å¯èƒ½ä½ è®¤ä¸ºåˆ é™¤æ–‡ç« åŠŸèƒ½å®ç°èµ·æ¥æ²¡ä»€ä¹ˆéš¾åº¦ï¼Œä½†æ˜¯è¯·æ³¨æ„ï¼Œ<strong>ä¸Šé¢çš„æ–¹æ³•æ˜¯æœ‰éšæ‚£çš„</strong>ã€‚è¦ç»§ç»­æ·±å…¥æ¢è®¨ï¼Œå°±å¾—æåˆ°<strong>è·¨åŸŸè¯·æ±‚ä¼ªé€ æ”»å‡»</strong>ï¼Œä¹Ÿç§°ä¸º<strong>CSRFæ”»å‡»</strong>äº†ï¼ˆCross-site request forgeryï¼‰ã€‚</p><h3 id="CSRFæ”»å‡»"><a href="#CSRFæ”»å‡»" class="headerlink" title="CSRFæ”»å‡»"></a>CSRFæ”»å‡»</h3><p>CSRFæ”»å‡»ä½ å¯ä»¥ç†è§£ä¸ºï¼šæ”»å‡»è€…ç›—ç”¨äº†ä½ çš„èº«ä»½ï¼Œä»¥ä½ çš„åä¹‰å‘é€æ¶æ„è¯·æ±‚ã€‚è¿˜æ˜¯æ‹¿åˆ é™¤æ–‡ç« ä¸¾ä¾‹ï¼š</p><ul><li>ç”¨æˆ·ç™»å½•äº†<strong>åšå®¢ç½‘ç«™A</strong>ï¼Œæµè§ˆå™¨è®°å½•ä¸‹è¿™æ¬¡ä¼šè¯ï¼Œå¹¶ä¿æŒäº†ç™»å½•çŠ¶æ€ï¼›</li><li>ç”¨æˆ·åœ¨æ²¡æœ‰é€€å‡ºç™»å½•çš„æƒ…å†µä¸‹ï¼Œåˆéå¸¸ä¸å°å¿ƒçš„æ‰“å¼€äº†é‚ªæ¶çš„<strong>æ”»å‡»ç½‘ç«™B</strong>ï¼›</li><li><strong>æ”»å‡»ç½‘ç«™B</strong>åœ¨é¡µé¢ä¸­æ¤å…¥æ¶æ„ä»£ç ï¼Œæ‚„æ— å£°æ¯çš„å‘<strong>åšå®¢ç½‘ç«™A</strong>å‘é€åˆ é™¤æ–‡ç« çš„è¯·æ±‚ï¼Œæ­¤æ—¶æµè§ˆå™¨è¯¯ä»¥ä¸ºæ˜¯ç”¨æˆ·åœ¨æ“ä½œï¼Œä»è€Œé¡ºåˆ©çš„æ‰§è¡Œäº†åˆ é™¤æ“ä½œã€‚</li></ul><p>ç”±äºæµè§ˆå™¨çš„åŒæºç­–ç•¥ï¼ŒCSRFæ”»å‡»è€…å¹¶ä¸èƒ½å¾—åˆ°ä½ çš„ç™»å½•æ•°æ®å®é™…å†…å®¹ï¼Œä½†æ˜¯å¯ä»¥æ¬ºéª—æµè§ˆå™¨ï¼Œè®©æ¶æ„è¯·æ±‚é™„ä¸Šæ­£ç¡®çš„ç™»å½•æ•°æ®ã€‚ä¸è¦å°çœ‹CSRFæ”»å‡»çš„å¨åŠ›ï¼šå€˜è‹¥æ˜¯ä½ çš„é“¶è¡Œè´¦æˆ·å…·æœ‰æ­¤ç±»å®‰å…¨æ¼æ´ï¼Œé»‘å®¢å°±å¯ä»¥ç¥ä¸çŸ¥é¬¼ä¸è§‰è½¬èµ°ä½ çš„æ‰€æœ‰å­˜æ¬¾ã€‚</p><p>æ‰€ä»¥è¿™é‡Œå¦‚ä½•é˜²èŒƒCSRFæ”»å‡»çš„é£é™©å‘¢ï¼Ÿæ–¹æ³•æ˜¯æœ‰çš„ï¼Œå³åˆ é™¤æ–‡ç« æ—¶ç”¨POSTæ–¹æ³•ï¼Œå¹¶ä¸”æ ¡éªŒ<code>csrf</code>ä»¤ç‰Œã€‚</p><h3 id="CSRFä»¤ç‰Œ"><a href="#CSRFä»¤ç‰Œ" class="headerlink" title="CSRFä»¤ç‰Œ"></a>CSRFä»¤ç‰Œ</h3><p>å‰é¢æˆ‘ä»¬è®²åˆ°åœ¨ Django ä¸­æäº¤è¡¨å•å¿…é¡»åŠ <code>csrf_token</code>ï¼Œè¿™ä¸ªå°±æ˜¯CSRFä»¤ç‰Œäº†ï¼Œå®ƒé˜²èŒƒCSRFæ”»å‡»çš„æµç¨‹å¦‚ä¸‹ï¼š</p><ul><li>å½“ç”¨æˆ·è®¿é—® django ç«™ç‚¹æ—¶ï¼Œdjango åé¦ˆç»™ç”¨æˆ·çš„è¡¨å•ä¸­æœ‰ä¸€ä¸ªéšå«å­—æ®µ <code>csrf_token</code>ï¼Œè¿™ä¸ªå€¼æ˜¯åœ¨æœåŠ¡å™¨ç«¯éšæœºç”Ÿæˆçš„ï¼Œæ¯æ¬¡éƒ½ä¸ä¸€æ ·ï¼›</li><li>åœ¨åç«¯å¤„ç† POST è¯·æ±‚å‰ï¼Œdjango ä¼šæ ¡éªŒè¯·æ±‚çš„ cookie é‡Œçš„ <code>csrf_token</code> å’Œè¡¨å•é‡Œçš„ <code>csrf_token</code> æ˜¯å¦ä¸€è‡´ã€‚ä¸€è‡´åˆ™è¯·æ±‚åˆæ³•ï¼Œå¦åˆ™è¿™ä¸ªè¯·æ±‚å¯èƒ½æ˜¯æ¥è‡ªäº CSRFæ”»å‡»ï¼Œè¿”å› 403 æœåŠ¡å™¨ç¦æ­¢è®¿é—®ã€‚</li></ul><p>ç”±äºæ”»å‡»è€…å¹¶ä¸èƒ½å¾—åˆ°ç”¨æˆ·çš„ cookie å†…å®¹ï¼ˆä»…ä»…æ˜¯é æµè§ˆå™¨è½¬å‘ï¼‰ï¼Œæ‰€ä»¥é€šå¸¸æƒ…å†µä¸‹æ˜¯æ— æ³•æ„é€ å‡ºæ­£ç¡®çš„ <code>csrf_token</code>  çš„ï¼Œä»è€Œé˜²èŒƒäº†æ­¤ç±»æ”»å‡»ã€‚åŸç†å°±æ˜¯è¿™æ ·ï¼Œä¸‹é¢æ¥çœ‹çœ‹å¦‚ä½•å®ç°å®‰å…¨çš„åˆ é™¤åŠŸèƒ½ã€‚</p><h3 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><p>é¦–å…ˆä¿®æ”¹åˆ é™¤æ–‡ç« çš„é“¾æ¥ï¼Œä»¥åŠç‚¹å‡»å®ƒæ—¶è°ƒç”¨çš„å‡½æ•°ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">templates/article/detail.html...<span class="token comment">&lt;!-- Â· &lt;a href="#" onclick="confirm_delete()">åˆ é™¤æ–‡ç« &lt;/a> --></span>Â· <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">confirm_safe_delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>åˆ é™¤æ–‡ç« <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- æ–°å¢ä¸€ä¸ªéšè—çš„è¡¨å• --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span>       <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span>       <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>safe_delete<span class="token punctuation">"</span></span>      <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>article:article_safe_delete<span class="token punctuation">'</span> article.id %&#125;<span class="token punctuation">"</span></span>       <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>POST<span class="token punctuation">"</span></span>      <span class="token punctuation">></span></span>    &#123;% csrf_token %&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å‘é€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><span class="token operator">...</span><span class="token keyword">function</span> <span class="token function">confirm_safe_delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    layer<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        title<span class="token operator">:</span> <span class="token string">"ç¡®è®¤åˆ é™¤"</span><span class="token punctuation">,</span>        content<span class="token operator">:</span> <span class="token string">"ç¡®è®¤åˆ é™¤è¿™ç¯‡æ–‡ç« å—ï¼Ÿ"</span><span class="token punctuation">,</span>        <span class="token function-variable function">yes</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">index<span class="token punctuation">,</span> layero</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'form#safe_delete button'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            layer<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»£ç æµç¨‹å¦‚ä¸‹ï¼š</p><ul><li>ç‚¹å‡»åˆ é™¤æ–‡ç« é“¾æ¥æ—¶ï¼Œå¼¹å‡º layer å¼¹çª—</li><li>å¼¹çª—ä¸å†å‘èµ· GET è¯·æ±‚ï¼Œè€Œæ˜¯é€šè¿‡ Jquery é€‰æ‹©å™¨æ‰¾åˆ°éšè—çš„è¡¨å•ï¼Œå¹¶ç‚¹å‡»å‘é€æŒ‰é’®</li><li>è¡¨å•å‘èµ· POST è¯·æ±‚ï¼Œå¹¶æºå¸¦äº† csrf ä»¤ç‰Œï¼Œä»è€Œé¿å…äº† csrf æ”»å‡»</li></ul><p>æ¥ç€æ·»åŠ è¡¨å•æäº¤çš„urlï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>urls<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># å®‰å…¨åˆ é™¤æ–‡ç« </span>    path<span class="token punctuation">(</span>        <span class="token string">'article-safe-delete/&lt;int:id>/'</span><span class="token punctuation">,</span>        views<span class="token punctuation">.</span>article_safe_delete<span class="token punctuation">,</span>        name<span class="token operator">=</span><span class="token string">'article_safe_delete'</span>    <span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åå°±æ˜¯å°†æ–°çš„åˆ é™¤è§†å›¾å†™å¥½ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">article<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># å®‰å…¨åˆ é™¤æ–‡ç« </span><span class="token keyword">def</span> <span class="token function">article_safe_delete</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">:</span>        article <span class="token operator">=</span> ArticlePost<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token builtin">id</span><span class="token punctuation">)</span>        article<span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">"article:article_list"</span><span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"ä»…å…è®¸postè¯·æ±‚"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯èƒ½ä½ è¦é—®äº†ï¼Œæ²¡å‘ç°å“ªè¡Œä»£ç æ ¡éªŒäº†<code>csrf</code>ä»¤ç‰Œå•Šï¼Ÿæ”¾å¿ƒï¼Œé»˜è®¤é…ç½®ä¸‹æ‰€æœ‰çš„ POST è¯·æ±‚éƒ½ç”± <strong>Django ä¸­é—´ä»¶</strong>å¸®ä½ éªŒè¯äº†ã€‚å¦å¤–è§†å›¾ä¸€å®šè¦é™åˆ¶ä¸º POST è¯·æ±‚ï¼Œå³<code>if request.method == &#39;POST&#39;</code>å¿…é¡»æœ‰ï¼Œå°±è¯·è¯»è€…æ€è€ƒä¸€ä¸‹åŸå› å§ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« æ–°å¢äº†åˆ é™¤åšå®¢æ–‡ç« çš„åŠŸèƒ½ï¼Œå¹¶ä¸”ä½¿ç”¨äº†å¼¹çª—ç»„ä»¶ä¼˜åŒ–äº†ç”¨æˆ·ä½“éªŒã€‚</p><p>å¦ä¸€ä¸ªé‡è¦çš„çŸ¥è¯†ç‚¹å°±æ˜¯CSRFæ”»å‡»çš„é˜²èŒƒã€‚è®°ä½ä¸€æ¡ï¼Œå‡¡æ˜¯é‡è¦çš„æ•°æ®æ“ä½œï¼Œéƒ½åº”è¯¥è€ƒè™‘å¸¦æœ‰ csrf ä»¤ç‰Œçš„ POST è¯·æ±‚ï¼›æˆ–è€…æ›´ç®€å•çš„æ–¹æ³•ï¼Œæ•°æ®æŸ¥è¯¢ç”¨ GETï¼Œæ•°æ®æ›´æ”¹ç”¨ POSTã€‚</p><p>æ³¨æ„è¿™ä¸ªåˆ é™¤æ–‡ç« çš„åŠŸèƒ½å¹¶æ²¡æœ‰å¯¹ç”¨æˆ·èº«ä»½è¿›è¡ŒéªŒè¯ã€‚åˆ«æ€¥ï¼Œç­‰åˆ°è®²å®Œç”¨æˆ·ç®¡ç†ä¹‹åå†æ¥å¤„ç†ã€‚</p><p>ä¸‹ä¸€ç« å°†å­¦ä¹ å¦‚ä½•æ›´æ–°æ–‡ç« ï¼Œå‡†å¤‡å¥½ç»§ç»­ä½œæˆ˜å§ã€‚</p><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#x64;&#x75;&#x73;&#97;&#x69;&#x70;&#104;&#x6f;&#116;&#111;&#x40;&#102;&#111;&#x78;&#109;&#x61;&#x69;&#x6c;&#x2e;&#99;&#111;&#109;">&#x64;&#x75;&#x73;&#97;&#x69;&#x70;&#104;&#x6f;&#116;&#111;&#x40;&#102;&#111;&#x78;&#109;&#x61;&#x69;&#x6c;&#x2e;&#99;&#111;&#109;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--45.htmlå­¦ä¹ 1</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/45.html-xue-xi-1/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/45.html-xue-xi-1/</url>
      
        <content type="html"><![CDATA[<p>#HTTMLå­¦ä¹ 1</p><h2 id="lang-â€enâ€"><a href="#lang-â€enâ€" class="headerlink" title="lang=â€enâ€"></a>lang=â€enâ€</h2><p>è¿™æ˜¯ä¸€ä¸ªW3Cçš„æ ‡å‡†ï¼›<br>langä»£è¡¨è¯­è¨€ï¼Œenæ˜¯è‹±è¯­ï¼›æ”¹æˆzh-cnæŒ‡ç®€ä½“ä¸­æ–‡<br>xml:langå°±æ˜¯xmlçš„è¯­è¨€<br>##metaæ ‡ç­¾<br>###charset<br>ä»£è¡¨ç¼–ç æ ¼å¼ï¼Œä¸€èˆ¬æœ‰utf-8,gbk-2312ç­‰<br>###viewport<br>ä¸€èˆ¬ç”¨äºç§»åŠ¨ç«¯å¸ƒå±€</p><pre><code>contentå±æ€§å€¼è¯¦è§£ï¼šwidthï¼šå¯è§†åŒºåŸŸçš„å®½åº¦ï¼Œå€¼å¯ä¸ºæ•°å­—æˆ–å…³é”®è¯device-widthheightï¼šåŒwidthinitial-scaleï¼šé¡µé¢é¦–æ¬¡è¢«æ˜¾ç¤ºæ˜¯å¯è§†åŒºåŸŸçš„ç¼©æ”¾çº§åˆ«ï¼Œå–å€¼1.0åˆ™é¡µé¢æŒ‰å®é™…å°ºå¯¸æ˜¾ç¤ºï¼Œæ— ä»»ä½•ç¼©æ”¾user-scalable:æ˜¯å¦å¯å¯¹é¡µé¢è¿›è¡Œç¼©æ”¾ï¼Œ0ç¦æ­¢ç¼©æ”¾maximum-scale=1.0, minimum-scale=1.0;å¯è§†åŒºåŸŸçš„ç¼©æ”¾çº§åˆ«ï¼Œmaximum-scaleç”¨æˆ·å¯å°†é¡µé¢æ”¾å¤§çš„ç¨‹åºï¼Œ1.0å°†ç¦æ­¢ç”¨æˆ·æ”¾å¤§åˆ°å®é™…å°ºå¯¸ä¹‹ä¸Šã€‚</code></pre><p>###Keywords<br>åœ¨æ—©å¹´ï¼Œkeywordsæ ‡ç­¾åœ¨å…³é”®è¯æ’åä¸­èµ·åˆ°éå¸¸å¤§çš„ä½œç”¨ï¼Œä½†æ˜¯åæ¥è¢«å¾ˆå¤šçš„SEOERç”¨æ¥ä½œå¼Šï¼Œæœ€ç»ˆå¯¼è‡´æœç´¢å¼•æ“å¤§å¤§é™ä½äº†æ­¤æ ‡ç­¾çš„é‡è¦æ€§ï¼Œ</p><p>æ‰€ä»¥æ‰æœ‰æˆ‘ä»¬ç°åœ¨ç»å¸¸çœ‹åˆ°çš„å¾ˆå¤šå¤§å‹ç½‘ç«™çš„å…³é”®è¯æ’åå¾ˆå¥½ï¼Œä½†æ˜¯å´æ²¡æœ‰ä¹¦å†™keywordsæ ‡ç­¾.</p><p>æ‰€ä»¥è¯´ç°åœ¨å†™ä¸å†™keywordsæ ‡ç­¾çœŸçš„æ— æ‰€è°“äº†ï¼Œä½†æ˜¯å¦‚æœä½ è¿˜æ˜¯æ”¾ä¸ä¸‹è¿™ä¸ªæ ‡ç­¾ä½ ä¹Ÿå¯ä»¥å†™ä¸Šï¼Œä½†åƒä¸‡ä¸èƒ½æœ‰æ•…æ„å †ç Œå…³é”®è¯çš„å«Œç–‘äº†ï¼<br>###description<br>descriptionè¦ç”¨ç®€çŸ­çš„æ–‡å­—æè¿°ç½‘ç«™æˆ–ç½‘é¡µçš„ä¸»è¦å†…å®¹ï¼Œæœ‰åˆ©äºå„å¤§æœç´¢å¼•æ“çš„æŠ“å–æ”¶å½•ä½ çš„ç½‘ç«™æˆ–ç½‘é¡µã€‚</p><p>å½“ä½ è®¾ç½®äº†descriptionç½‘ç«™æè¿°æ–‡å­—ï¼Œæ‰ä¼šæ˜¾ç¤ºåœ¨æœç´¢å¼•æ“çš„ç»“æœé¡µä¸­ï¼Œè€Œæ¯ä¸ªç½‘é¡µçš„descriptionä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼Œç®€çŸ­åˆå‡†ç¡®çš„ç½‘é¡µæè¿°æ–‡å­—ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·åœ¨æœç´¢å¼•æ“ä¸­æ›´æ–¹ä¾¿çš„æ‰¾åˆ°ä½ çš„ç½‘ç«™å’Œç½‘é¡µï¼<br>contentå±æ€§å€¼æ˜¯ç½‘é¡µæè¿°æ–‡å­—ï¼Œå°½é‡ç”¨ç®€æ´çš„æ–‡å­—æè¿°è¯¥ç½‘é¡µçš„ä¸»è¦å†…å®¹ï¼Œä¸€èˆ¬æ§åˆ¶åœ¨60å­—ä»¥å†…</p><p>metaæ ‡ç­¾å¿…é¡»å†™åœ¨å¤´éƒ¨headæ ‡ç­¾ä¹‹å†…ï¼Œè€Œdescriptionçš„metaæ ‡ç­¾åŠ¡å¿…è¦å†™åœ¨keywordsçš„metaæ ‡ç­¾ä¹‹å<br>###ä¹¦ç­¾å›¾æ ‡</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>icon<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% static <span class="token punctuation">'</span>tag.icon<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p> ä¸€èˆ¬ä¸ºè¿™ç§æ ¼å¼ï¼Œæ˜¾ç¤ºåœ¨ç½‘é¡µé¡¶éƒ¨ï¼Œå½“æœ‰äººæ”¶è—ä½ çš„ç½‘ç«™æ—¶ä¹Ÿä¼šæ˜¾ç¤º</p><p>##jså’Œmin.jsåŒºåˆ«<br>   ç›¸åŒçš„æ˜¯ï¼Œä»–ä»¬çš„å†…å®¹æ˜¯ä¸€æ ·çš„ï¼ŒåŒ…å«çš„å‡½æ•°æ•°é‡ç›¸åŒï¼ŒåŒç‰ˆæœ¬ä¸­çš„å‡½æ•°è¡¨è¾¾ä¹Ÿæ˜¯ä¸€æ ·ã€‚</p><p>   ä¸åŒç‚¹ï¼Œå•å•ä»åå­—å¯ä»¥çœ‹å‡ºï¼Œä¸€ä¸ªå çš„ç©ºé—´å¤§äº›ï¼Œä¸€ä¸ªå çš„ç©ºé—´å°ã€‚</p><p>   .min.jsæ–‡ä»¶æ˜¯å°†æ­£å¸¸çš„.jsæ–‡ä»¶ç©ºæ ¼éƒ½å»æ‰ï¼Œå‡½æ•°åå°½é‡ç®€å†™ï¼Œä½¿æ–‡ä»¶ç©ºé—´å°½é‡å°ï¼ŒåŠ å…¥é¡¹ç›®ï¼Œå¯ä»¥å°½é‡å‡å°‘é¡¹ç›®çš„æ€»çš„å¤§å°ã€‚</p><p>   è€Œ.jsæ–‡ä»¶ä¾¿äºæŸ¥çœ‹å’Œå­¦ä¹ ï¼Œå‡½æ•°éƒ½æœ‰å¾ˆå¥½çš„æ’ç‰ˆã€‚</p><p>  ç»¼åˆæ¥è¯´ã€‚jquery.min.jsæ˜¯ç”¨äºé¡¹ç›®å¼•ç”¨ã€‚</p><p>##ç«™é•¿æ¨é€ä»£ç </p><pre><code> &lt;script&gt;    ã€€(function()&#123;    ã€€var bp = document.createElement(&#39;script&#39;);    ã€€var curProtocol = window.location.protocol.split(&#39;:&#39;)[0];      ã€€if (curProtocol === &#39;https&#39;)&#123;            bp.src = &#39;https://zz.bdstatic.com/linksubmit/push.js&#39;;      ã€€&#125;        else&#123;          bp.src = &#39;http://push.zhanzhang.baidu.com/push.js&#39;;        &#125;        var s = document.getElementsByTagName(&quot;script&quot;)[0];        s.parentNode.insertBefore(bp, s);      &#125;)();  &lt;/script&gt;</code></pre><p>ä½æœ¬é’±å®ç°é“¾æ¥è‡ªåŠ¨æäº¤ï¼Œç™¾åº¦ç«™é•¿å¹³å°å®£å¸ƒ,ç«™é•¿éœ€è¦åœ¨æ¯ä¸ªé¡µé¢çš„HTMLä»£ç ä¸­åŒ…æ‹¬ä»¥ä¸‹è‡ªåŠ¨æ¨é€JSä»£ç å½“é¡µé¢è¢«ä¼šè§æ—¶ã€‚</p><p>é¡µé¢é“¾æ¥ä¼šè‡ªåŠ¨æ¨é€ç»™ç™¾åº¦ï¼Œæœ‰åˆ©äºæ–°é¡µé¢æ›´å¿«è¢«ç™¾åº¦å‘ç°ï¼ä¸ºäº†æ›´å¿«é€Ÿçš„å‘ç°ç«™ç‚¹å¤©å¤©å‘ç”Ÿçš„æœ€æ–°å†…å®¹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoåšå®¢ç½‘ç«™æ­å»º--13.ç”¨æˆ·çš„ç™»å½•å’Œé€€å‡º</title>
      <link href="/post/django-bo-ke-wang-zhan-da-jian/13.yong-hu-de-deng-lu-he-tui-chu/"/>
      <url>/post/django-bo-ke-wang-zhan-da-jian/13.yong-hu-de-deng-lu-he-tui-chu/</url>
      
        <content type="html"><![CDATA[<h2 id="ç”¨æˆ·ç®¡ç†"><a href="#ç”¨æˆ·ç®¡ç†" class="headerlink" title="ç”¨æˆ·ç®¡ç†"></a>ç”¨æˆ·ç®¡ç†</h2><p>ç”¨æˆ·æ•°æ®å¯ä»¥è¯´æ˜¯å¤§éƒ¨åˆ†ç½‘ç«™æœ€é‡è¦çš„èµ„äº§ã€‚ç”¨æˆ·ç®¡ç†å°±æ˜¯å¯¹ç”¨æˆ·æ•°æ®è¿›è¡Œå¢åˆ æ”¹æŸ¥ç­‰æ“ä½œçš„åŠŸèƒ½ï¼Œè‡ªç„¶ä¹Ÿå°±éå¸¸çš„é‡è¦äº†ã€‚</p><p>æœ¬ç« å¼€å§‹å­¦ä¹ ç”¨æˆ·ç®¡ç†çš„å†…å®¹ï¼Œé¦–å…ˆä»ç”¨æˆ·ç™»å½•å¼€å§‹ã€‚</p><p>åœ¨Djangoä¸­ç”¨appæ¥åŒºåˆ«ä¸åŒåŠŸèƒ½çš„æ¨¡å—ï¼Œè¾¾åˆ°ä»£ç éš”ç¦»å’Œå¤ç”¨ã€‚<strong>å› ä¸ºç”¨æˆ·ç®¡ç†å’Œåšå®¢æ–‡ç« çš„åŠŸèƒ½ä¸åŒï¼Œå› æ­¤éœ€è¦æ–°å»ºä¸€ä¸ªä¸“é—¨çš„appã€‚</strong></p><p><strong>è¿›å…¥è™šæ‹Ÿç¯å¢ƒ</strong>ï¼Œè¿è¡Œ<code>startapp</code>æŒ‡ä»¤åˆ›å»ºæ–°çš„appï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">python manage<span class="token punctuation">.</span>py startapp userprofile<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æŸ¥çœ‹é¡¹ç›®ç›®å½•ï¼Œå‘ç°å·²ç»æ–°ç”Ÿæˆäº†userprofileç›®å½•åŠå…¶ä¸­çš„æ–‡ä»¶äº†ã€‚</p><h2 id="å†é‡è¡¨å•ç±»"><a href="#å†é‡è¡¨å•ç±»" class="headerlink" title="å†é‡è¡¨å•ç±»"></a>å†é‡è¡¨å•ç±»</h2><p>ç”¨æˆ·ç™»å½•æ—¶ï¼Œéœ€è¦å¡«å†™è´¦æˆ·å¯†ç ç­‰è¡¨å•æ•°æ®ï¼Œå› æ­¤åˆè¦ç”¨åˆ°Formè¡¨å•ç±»ã€‚</p><p>åœ¨<code>userprofile</code>ç›®å½•ä¸­åˆ›å»ºè¡¨å•ç±»çš„æ–‡ä»¶<code>forms.py</code>ï¼Œç¼–å†™å¦‚ä¸‹ä»£ç ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">/</span>userprofile<span class="token operator">/</span>forms<span class="token punctuation">.</span>py<span class="token comment"># å¼•å…¥è¡¨å•ç±»</span><span class="token keyword">from</span> django <span class="token keyword">import</span> forms<span class="token comment"># å¼•å…¥ User æ¨¡å‹</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>models <span class="token keyword">import</span> User<span class="token comment"># ç™»å½•è¡¨å•ï¼Œç»§æ‰¿äº† forms.Form ç±»</span><span class="token keyword">class</span> <span class="token class-name">UserLoginForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>Form<span class="token punctuation">)</span><span class="token punctuation">:</span>    username <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span><span class="token punctuation">)</span>    password <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨å‰é¢å‘è¡¨æ–‡ç« çš„æ¨¡å—ä¸­ï¼Œè¡¨å•ç±»ç»§æ‰¿äº†<code>forms.ModelForm</code>ï¼Œè¿™ä¸ªçˆ¶ç±»<strong>é€‚åˆäºéœ€è¦ç›´æ¥ä¸æ•°æ®åº“äº¤äº’çš„åŠŸèƒ½</strong>ï¼Œæ¯”å¦‚æ–°å»ºã€æ›´æ–°æ•°æ®åº“çš„å­—æ®µç­‰ã€‚å¦‚æœè¡¨å•å°†ç”¨äºç›´æ¥æ·»åŠ æˆ–ç¼–è¾‘Djangoæ¨¡å‹ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ <code>ModelForm</code>æ¥é¿å…é‡å¤ä¹¦å†™å­—æ®µæè¿°ã€‚</p><p>è€Œ<code>forms.Form</code>åˆ™éœ€è¦æ‰‹åŠ¨é…ç½®æ¯ä¸ªå­—æ®µï¼Œ<strong>å®ƒé€‚ç”¨äºä¸ä¸æ•°æ®åº“è¿›è¡Œç›´æ¥äº¤äº’çš„åŠŸèƒ½</strong>ã€‚ç”¨æˆ·ç™»å½•ä¸éœ€è¦å¯¹æ•°æ®åº“è¿›è¡Œä»»ä½•æ”¹åŠ¨ï¼Œå› æ­¤ç›´æ¥ç»§æ‰¿<code>forms.Form</code>å°±å¯ä»¥äº†ã€‚</p><h2 id="ç¼–å†™è§†å›¾"><a href="#ç¼–å†™è§†å›¾" class="headerlink" title="ç¼–å†™è§†å›¾"></a>ç¼–å†™è§†å›¾</h2><p>ç”¨æˆ·çš„ç™»å½•æ˜¯æ¯”è¾ƒå¤æ‚çš„åŠŸèƒ½ï¼Œå¥½åœ¨Djangoæä¾›äº†å°è£…å¥½çš„æ¨¡å—ä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚</p><p>é¦–å…ˆåœ¨<code>userprofile/views.py</code>ä¸­å†™è§†å›¾å‡½æ•°ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">/</span>userprofile<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render<span class="token punctuation">,</span> redirect<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth <span class="token keyword">import</span> authenticate<span class="token punctuation">,</span> login<span class="token keyword">from</span> django<span class="token punctuation">.</span>http <span class="token keyword">import</span> HttpResponse<span class="token keyword">from</span> <span class="token punctuation">.</span>forms <span class="token keyword">import</span> UserLoginForm<span class="token comment"># Create your views here.</span><span class="token keyword">def</span> <span class="token function">user_login</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">:</span>        user_login_form <span class="token operator">=</span> UserLoginForm<span class="token punctuation">(</span>data<span class="token operator">=</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">)</span>        <span class="token keyword">if</span> user_login_form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment"># .cleaned_data æ¸…æ´—å‡ºåˆæ³•æ•°æ®</span>            data <span class="token operator">=</span> user_login_form<span class="token punctuation">.</span>cleaned_data            <span class="token comment"># æ£€éªŒè´¦å·ã€å¯†ç æ˜¯å¦æ­£ç¡®åŒ¹é…æ•°æ®åº“ä¸­çš„æŸä¸ªç”¨æˆ·</span>            <span class="token comment"># å¦‚æœå‡åŒ¹é…åˆ™è¿”å›è¿™ä¸ª user å¯¹è±¡</span>            user <span class="token operator">=</span> authenticate<span class="token punctuation">(</span>username<span class="token operator">=</span>data<span class="token punctuation">[</span><span class="token string">'username'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> password<span class="token operator">=</span>data<span class="token punctuation">[</span><span class="token string">'password'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> user<span class="token punctuation">:</span>                <span class="token comment"># å°†ç”¨æˆ·æ•°æ®ä¿å­˜åœ¨ session ä¸­ï¼Œå³å®ç°äº†ç™»å½•åŠ¨ä½œ</span>                login<span class="token punctuation">(</span>request<span class="token punctuation">,</span> user<span class="token punctuation">)</span>                <span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">"article:article_list"</span><span class="token punctuation">)</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"è´¦å·æˆ–å¯†ç è¾“å…¥æœ‰è¯¯ã€‚è¯·é‡æ–°è¾“å…¥~"</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"è´¦å·æˆ–å¯†ç è¾“å…¥ä¸åˆæ³•"</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'GET'</span><span class="token punctuation">:</span>        user_login_form <span class="token operator">=</span> UserLoginForm<span class="token punctuation">(</span><span class="token punctuation">)</span>        context <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token string">'form'</span><span class="token punctuation">:</span> user_login_form <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'userprofile/login.html'</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"è¯·ä½¿ç”¨GETæˆ–POSTè¯·æ±‚æ•°æ®"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>è·Ÿå‘è¡¨æ–‡ç« çš„è¡¨å•ç±»ç±»ä¼¼ï¼ŒFormå¯¹è±¡çš„ä¸»è¦ä»»åŠ¡å°±æ˜¯éªŒè¯æ•°æ®ã€‚è°ƒç”¨<code>is_valid()</code>æ–¹æ³•éªŒè¯å¹¶è¿”å›æŒ‡å®šæ•°æ®æ˜¯å¦æœ‰æ•ˆçš„å¸ƒå°”å€¼ã€‚</p></li><li><p><code>Form</code>ä¸ä»…è´Ÿè´£éªŒè¯æ•°æ®ï¼Œè¿˜å¯ä»¥â€œæ¸…æ´—â€å®ƒï¼šå°†å…¶æ ‡å‡†åŒ–ä¸ºä¸€è‡´çš„æ ¼å¼ï¼Œè¿™ä¸ªç‰¹æ€§ä½¿å¾—å®ƒå…è®¸ä»¥å„ç§æ–¹å¼è¾“å…¥ç‰¹å®šå­—æ®µçš„æ•°æ®ï¼Œ<strong>å¹¶ä¸”å§‹ç»ˆäº§ç”Ÿä¸€è‡´çš„è¾“å‡ºã€‚</strong>ä¸€æ—¦<code>Form</code>ä½¿ç”¨æ•°æ®åˆ›å»ºäº†ä¸€ä¸ªå®ä¾‹å¹¶å¯¹å…¶è¿›è¡Œäº†<strong>éªŒè¯</strong>ï¼Œå°±å¯ä»¥é€šè¿‡<code>cleaned_data</code>å±æ€§è®¿é—®æ¸…æ´—ä¹‹åçš„æ•°æ®ã€‚</p></li><li><p><code>authenticate()</code>æ–¹æ³•éªŒè¯ç”¨æˆ·åç§°å’Œå¯†ç æ˜¯å¦åŒ¹é…ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å°†è¿™ä¸ªç”¨æˆ·æ•°æ®è¿”å›ã€‚</p></li><li><p><code>login()</code>æ–¹æ³•å®ç°ç”¨æˆ·ç™»å½•ï¼Œå°†ç”¨æˆ·æ•°æ®ä¿å­˜åœ¨sessionä¸­ã€‚</p></li></ul><p>å…¶ä»–çš„å†…å®¹å°±è·Ÿå‘è¡¨æ–‡ç« æ—¶çš„æŠ€å·§ç±»ä¼¼äº†ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯session"><a href="#ä»€ä¹ˆæ˜¯session" class="headerlink" title="ä»€ä¹ˆæ˜¯session"></a>ä»€ä¹ˆæ˜¯session</h3><p>Sessionåœ¨ç½‘ç»œåº”ç”¨ä¸­ï¼Œç§°ä¸º<strong>â€œä¼šè¯æ§åˆ¶â€</strong>ï¼Œå®ƒå­˜å‚¨ç‰¹å®šç”¨æˆ·ä¼šè¯æ‰€éœ€çš„å±æ€§åŠé…ç½®ä¿¡æ¯ã€‚</p><p>å½“ç”¨æˆ·åœ¨ Web é¡µä¹‹é—´è·³è½¬æ—¶ï¼Œå­˜å‚¨åœ¨ Session å¯¹è±¡ä¸­çš„å˜é‡å°†ä¸ä¼šä¸¢å¤±ï¼Œè€Œæ˜¯åœ¨æ•´ä¸ªç”¨æˆ·ä¼šè¯ä¸­ä¸€ç›´å­˜åœ¨ä¸‹å»ã€‚</p><p>Session æœ€å¸¸è§çš„ç”¨æ³•å°±æ˜¯å­˜å‚¨ç”¨æˆ·çš„ç™»å½•æ•°æ®ã€‚</p><p>è¯¦æƒ…çœ‹è¿™é‡Œï¼š<a href="https://baike.baidu.com/item/Session/479100">Sessionç™¾åº¦ç™¾ç§‘</a></p><h2 id="ç™»å½•çš„æ¨¡æ¿"><a href="#ç™»å½•çš„æ¨¡æ¿" class="headerlink" title="ç™»å½•çš„æ¨¡æ¿"></a>ç™»å½•çš„æ¨¡æ¿</h2><p>æ¥ç€å†™æ¨¡æ¿æ–‡ä»¶ã€‚</p><p>åˆ›å»º<code>/templates/userprofile/login.html</code>æ¨¡æ¿ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">/templates/userprofile/login.html&#123;% extends "base.html" %&#125; &#123;% load staticfiles %&#125;&#123;% block title %&#125; ç™»å½• &#123;% endblock title %&#125;&#123;% block content %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>col-12<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                &#123;% csrf_token %&#125;                <span class="token comment">&lt;!-- è´¦å· --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è´¦å·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- å¯†ç  --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å¯†ç <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token comment">&lt;!-- æäº¤æŒ‰é’® --></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-primary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æäº¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>&#123;% endblock content %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å†…å®¹ä¸<a href="https://www.dusaiphoto.com/article/article-detail/22/">ä½¿ç”¨Formè¡¨å•ç±»å‘è¡¨æ–°æ–‡ç« </a>éå¸¸ç±»ä¼¼ã€‚å”¯ä¸€æ–°çŸ¥è¯†æ˜¯è¾“å…¥å¯†ç è¡¨å•çš„<code>type=&quot;password&quot;</code>ï¼Œå¯ä»¥è®©è¾“å…¥å¯†ç çš„æ—¶å€™æ˜¾ç¤ºå°åœ†ç‚¹ï¼Œé¿å…æœ‰äººå·çª¥ã€‚</p><p>ç„¶åæˆ‘ä»¬æ”¹å†™ä¸€ä¸‹<code>tempalates/header.html</code>ï¼ŒæŠŠç™»å½•çš„æŒ‰é’®åŠ è¿›å»ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">/tempalates/header.html...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>navbar-nav<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    ...        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav-link<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>article:article_list<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ–‡ç« <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- Djangoçš„ if æ¨¡æ¿è¯­å¥ --></span>    &#123;% if user.is_authenticated %&#125;        <span class="token comment">&lt;!-- å¦‚æœç”¨æˆ·å·²ç»ç™»å½•ï¼Œåˆ™æ˜¾ç¤ºç”¨æˆ·åä¸‹æ‹‰æ¡† --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav-item dropdown<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav-link dropdown-toggle<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>navbarDropdown<span class="token punctuation">"</span></span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">data-toggle</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dropdown<span class="token punctuation">"</span></span> <span class="token attr-name">aria-haspopup</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">aria-expanded</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>              &#123;&#123; user.username &#125;&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dropdown-menu<span class="token punctuation">"</span></span> <span class="token attr-name">aria-labelledby</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>navbarDropdown<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dropdown-item<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>é€€å‡ºç™»å½•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- å¦‚æœç”¨æˆ·æœªç™»å½•ï¼Œåˆ™æ˜¾ç¤º â€œç™»å½•â€ --></span>    &#123;% else %&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav-link<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;% url <span class="token punctuation">'</span>userprofile:login<span class="token punctuation">'</span> %&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç™»å½•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                        <span class="token comment">&lt;!-- if è¯­å¥åœ¨è¿™é‡Œç»“æŸ --></span>    &#123;% endif %&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œä½¿ç”¨äº†æ–°çš„æ¨¡æ¿è¯­æ³•ï¼š<code>&#123;% if ... %&#125;</code>ï¼Œç”¨æ¥åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å·²ç»ç™»å½•ï¼š</p><ul><li>å¦‚æœç”¨æˆ·å·²ç»ç™»å½•ï¼Œåˆ™æ˜¾ç¤ºä¸€ä¸ªåå­—ä¸ºç”¨æˆ·åç§°çš„ä¸‹æ‹‰æ¡†ï¼Œå°±åƒé€šå¸¸çš„ç¤¾äº¤ç½‘ç«™ä¸€æ ·ã€‚</li><li>å¦‚æœç”¨æˆ·æœªç™»å½•ï¼Œåˆ™æ˜¾ç¤ºâ€œç™»å½•â€ä¸¤ä¸ªå­—æé†’ç”¨æˆ·å¯ä»¥ç‚¹å‡»ç™»å½•ã€‚</li></ul><p><code>is_authenticated</code>æ˜¯<code>models.User</code>ç±»çš„å±æ€§ï¼Œç”¨äºåˆ¤æ–­ç”¨æˆ·æ˜¯å¦å·²é€šè¿‡èº«ä»½éªŒè¯ã€‚</p><h2 id="urlåŠå…¶ä»–è®¾ç½®"><a href="#urlåŠå…¶ä»–è®¾ç½®" class="headerlink" title="urlåŠå…¶ä»–è®¾ç½®"></a>urlåŠå…¶ä»–è®¾ç½®</h2><p>æœ€åçš„æ­¥éª¤å°±æ˜¯å°†appé…ç½®åˆ°é¡¹ç›®ä¸­å»ã€‚</p><p>åˆ›å»º<code>userprofile/urls.py</code>æ–‡ä»¶ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">/</span>userprofile<span class="token operator">/</span>urls<span class="token punctuation">.</span>py<span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> viewsapp_name <span class="token operator">=</span> <span class="token string">'userprofile'</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token comment"># ç”¨æˆ·ç™»å½•</span>    path<span class="token punctuation">(</span><span class="token string">'login/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>user_login<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'login'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é…ç½®æ ¹è·¯ç”±<code>my_blog/urls.py</code>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">/</span>my_blog<span class="token operator">/</span>urls<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token comment"># ç”¨æˆ·ç®¡ç†</span>    path<span class="token punctuation">(</span><span class="token string">'userprofile/'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">'userprofile.urls'</span><span class="token punctuation">,</span> namespace<span class="token operator">=</span><span class="token string">'userprofile'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é…ç½®<code>my_blog/settings.py</code>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">my_blog<span class="token operator">/</span>settings<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token string">'userprofile'</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å› ä¸º<code>userprofile</code>è¿™ä¸ªappå¹¶æ²¡æœ‰æ”¹åŠ¨modelï¼Œå› æ­¤ä¸ç”¨è¿ç§»æ•°æ®ã€‚</p><p>OKäº†ï¼Œè¿è¡ŒæœåŠ¡å™¨ï¼Œåœ¨adminåå°ä¸­é€€å‡ºç™»å½•ï¼ˆæ‰¾æ‰¾é¡µé¢å³ä¸Šè§’ï¼‰ï¼Œè¿”å›åˆ°æ–‡ç« åˆ—è¡¨é¡µï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181029/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE66.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181029/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE66.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ç‚¹å‡»ç™»å½•æŒ‰é’®ï¼Œè¾“å…¥è´¦å·å’Œå¯†ç ï¼ˆå¯ä»¥æ•…æ„è¾“é”™è¯•è¯•ä¼šå‡ºç°ä»€ä¹ˆï¼‰ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181029/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE68.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181029/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE68.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>ç‚¹å‡»æäº¤ï¼Œå°†è‡ªåŠ¨å›åˆ°æ–‡ç« åˆ—è¡¨é¡µé¢ï¼š</p><p><img src="https://www.dusaiphoto.com/media/image/image_source/20181029/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE69.jpg" class="lazyload placeholder" data-srcset="https://www.dusaiphoto.com/media/image/image_source/20181029/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE69.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg"></p><p>å¤§åŠŸå‘Šæˆã€‚</p><h2 id="ç”¨æˆ·çš„é€€å‡º"><a href="#ç”¨æˆ·çš„é€€å‡º" class="headerlink" title="ç”¨æˆ·çš„é€€å‡º"></a>ç”¨æˆ·çš„é€€å‡º</h2><p>æœ‰äº†ç”¨æˆ·ç™»å½•çš„çŸ¥è¯†åï¼Œç”¨æˆ·é€€å‡ºå°±å¾ˆç®€å•äº†ã€‚è¿™é‡Œå°±ç›´æ¥ç»™å‡ºä»£ç ï¼Œç›¸ä¿¡ä½ ä¸€å®šèƒ½çœ‹æ‡‚ã€‚</p><p>è¿˜æ˜¯å…ˆæ·»åŠ ç”¨æˆ·é€€å‡ºçš„è§†å›¾ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">/</span>userprofile<span class="token operator">/</span>views<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># å¼•å…¥logoutæ¨¡å—</span><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth <span class="token keyword">import</span> authenticate<span class="token punctuation">,</span> login<span class="token punctuation">,</span> logout<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># ç”¨æˆ·é€€å‡º</span><span class="token keyword">def</span> <span class="token function">user_logout</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>    logout<span class="token punctuation">(</span>request<span class="token punctuation">)</span>    <span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">"article:article_list"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åé…ç½®<code>/userprofile/urls.py</code>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">/</span>userprofile<span class="token operator">/</span>urls<span class="token punctuation">.</span>py<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>    path<span class="token punctuation">(</span><span class="token string">'login/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>user_login<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'login'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token comment"># ç”¨æˆ·é€€å‡º</span>    path<span class="token punctuation">(</span><span class="token string">'logout/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>user_logout<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'logout'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨å†™ç™»å½•çš„ä»£ç æ—¶ï¼Œå·²ç»ç»™ç”¨æˆ·é€€å‡ºç•™å¥½äº†æ¥å£ï¼Œå› æ­¤åªéœ€è¦æ”¹åŠ¨<code>/templates/header.html</code>ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">/templates/header.html...# æ”¹åŠ¨ href ä¸­çš„é“¾æ¥æŒ‡å‘<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dropdown-item<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>&#123;% url <span class="token punctuation">"</span>userprofile:logout<span class="token punctuation">"</span> %&#125;<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>é€€å‡ºç™»å½•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¿å­˜ååˆ·æ–°é¡µé¢ï¼Œç‚¹å‡»ä¸‹æ‹‰æ¡†ä¸­â€œé€€å‡ºç™»å½•â€é€‰é¡¹ï¼Œç”¨æˆ·å°±é¡ºåˆ©é€€å‡ºäº†ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« ç”¨åˆ°äº†è¡¨å•ç±»ã€ifæ¨¡æ¿è¯­å¥ã€ç”¨æˆ·éªŒè¯ç­‰çŸ¥è¯†å®Œæˆäº†ç”¨æˆ·ç®¡ç†çš„ç™»å½•å’Œé€€å‡ºã€‚</p><p>æ¥ä¸‹æ¥å­¦ä¹ å¦‚ä½•å®ç°æ³¨å†Œå’Œåˆ é™¤ã€‚</p><ul><li>æœ‰ç–‘é—®è¯·åœ¨<a href="http://www.dusaiphoto.com/">æœèµ›çš„ä¸ªäººç½‘ç«™</a>ç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ã€‚</li><li>æˆ–Emailç§ä¿¡æˆ‘ï¼š<a href="mailto:&#x64;&#117;&#x73;&#x61;&#105;&#112;&#x68;&#x6f;&#x74;&#111;&#x40;&#x66;&#x6f;&#x78;&#x6d;&#97;&#105;&#108;&#x2e;&#x63;&#x6f;&#109;">&#x64;&#117;&#x73;&#x61;&#105;&#112;&#x68;&#x6f;&#x74;&#111;&#x40;&#x66;&#x6f;&#x78;&#x6d;&#97;&#105;&#108;&#x2e;&#x63;&#x6f;&#109;</a></li><li>é¡¹ç›®å®Œæ•´ä»£ç ï¼š<a href="https://github.com/stacklens/django_blog_tutorial">Django_blog_tutorial</a></li></ul><blockquote><p>è½¬è½½è¯·å‘ŠçŸ¥ä½œè€…å¹¶æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Djangoåšå®¢ç½‘ç«™æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaé¢å‘å¯¹è±¡è®¾è®¡ä¹‹æ¡¥æ¥æ¨¡å¼</title>
      <link href="/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-qiao-jie-mo-shi/"/>
      <url>/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-qiao-jie-mo-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="æ¨¡å¼åŠ¨æœº"><a href="#æ¨¡å¼åŠ¨æœº" class="headerlink" title="æ¨¡å¼åŠ¨æœº"></a>æ¨¡å¼åŠ¨æœº</h2><p>è®¾æƒ³å¦‚æœè¦ç»˜åˆ¶çŸ©å½¢ã€åœ†å½¢ã€æ¤­åœ†ã€æ­£æ–¹å½¢ï¼Œæˆ‘ä»¬è‡³å°‘éœ€è¦4ä¸ªå½¢çŠ¶ç±»ï¼Œä½†æ˜¯å¦‚æœç»˜åˆ¶çš„å›¾å½¢éœ€è¦å…·æœ‰ä¸åŒçš„é¢œè‰²ï¼Œå¦‚çº¢è‰²ã€ç»¿è‰²ã€è“è‰²ç­‰ï¼Œæ­¤æ—¶è‡³å°‘æœ‰å¦‚ä¸‹ä¸¤ç§è®¾è®¡æ–¹æ¡ˆï¼š</p><ul><li>ç¬¬ä¸€ç§è®¾è®¡æ–¹æ¡ˆæ˜¯ä¸ºæ¯ä¸€ç§å½¢çŠ¶éƒ½æä¾›ä¸€å¥—å„ç§é¢œè‰²çš„ç‰ˆæœ¬ã€‚</li><li>ç¬¬äºŒç§è®¾è®¡æ–¹æ¡ˆæ˜¯æ ¹æ®å®é™…éœ€è¦å¯¹å½¢çŠ¶å’Œé¢œè‰²è¿›è¡Œç»„åˆ</li></ul><p>å¯¹äºæœ‰ä¸¤ä¸ªå˜åŒ–ç»´åº¦ï¼ˆå³ä¸¤ä¸ªå˜åŒ–çš„åŸå› ï¼‰çš„ç³»ç»Ÿï¼Œé‡‡ç”¨æ–¹æ¡ˆäºŒæ¥è¿›è¡Œè®¾è®¡ç³»ç»Ÿä¸­ç±»çš„ä¸ªæ•°æ›´å°‘ï¼Œä¸”ç³»ç»Ÿæ‰©å±•æ›´ä¸ºæ–¹ä¾¿ã€‚è®¾è®¡æ–¹æ¡ˆäºŒå³æ˜¯æ¡¥æ¥æ¨¡å¼çš„åº”ç”¨ã€‚æ¡¥æ¥æ¨¡å¼å°†ç»§æ‰¿å…³ç³»è½¬æ¢ä¸ºå…³è”å…³ç³»ï¼Œä»è€Œé™ä½äº†ç±»ä¸ç±»ä¹‹é—´çš„è€¦åˆï¼Œå‡å°‘äº†ä»£ç ç¼–å†™é‡ã€‚</p><h2 id="æ¨¡å¼å®šä¹‰"><a href="#æ¨¡å¼å®šä¹‰" class="headerlink" title="æ¨¡å¼å®šä¹‰"></a>æ¨¡å¼å®šä¹‰</h2><blockquote><p><strong>æ¡¥æ¥æ¨¡å¼</strong>(<code>Bridge Pattern</code>)ï¼šå°†æŠ½è±¡å’Œå®ç°è§£è€¦ï¼Œä½¿å¾—ä¸¤è€…å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚å®ƒæ˜¯ä¸€ç§å¯¹è±¡ç»“æ„å‹æ¨¡å¼ï¼Œåˆç§°ä¸ºæ¡¥æ¢æ¨¡å¼ã€‚</p></blockquote><h3 id="æ¨¡å¼è§’è‰²"><a href="#æ¨¡å¼è§’è‰²" class="headerlink" title="æ¨¡å¼è§’è‰²"></a>æ¨¡å¼è§’è‰²</h3><p>æ¡¥æ¥æ¨¡å¼åŒ…å«å¦‚ä¸‹è§’è‰²ï¼š</p><ul><li><code>Abstraction</code>ï¼šæŠ½è±¡ç±»è§’è‰²</li><li><code>RefinedAbstraction</code>ï¼šæ‰©å……æŠ½è±¡ç±»</li><li><code>Implementor</code>ï¼šå®ç°åŒ–è§’è‰²</li><li><code>ConcreteImplementor</code>ï¼šå…·ä½“å®ç°åŒ–è§’è‰²çš„å®ç°ç±»</li></ul><h3 id="UMLç±»å›¾"><a href="#UMLç±»å›¾" class="headerlink" title="UMLç±»å›¾"></a>UMLç±»å›¾</h3><p><img src="https://statics.sh1a.qingstor.com/2018/12/19/java-design-bridge.jpg" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/12/19/java-design-bridge.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="æ¡¥æ¥æ¨¡å¼UML"></p><h2 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h2><p>é¦–å…ˆï¼Œæ˜¯å®ç°åŒ–è§’è‰²<code>Abstraction</code>ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å®ç°åŒ–è§’è‰² Implementor. * * @author blinkfox on 2018-12-17. */</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Implementor</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * åŸºæœ¬æ–¹æ³•1.     */</span>    <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * åŸºæœ¬æ–¹æ³•2.     */</span>    <span class="token keyword">void</span> <span class="token function">doAnything</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åï¼Œæ˜¯å„ä¸ªå…·ä½“çš„å®ç°åŒ–è§’è‰²ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * ConcreteImplementor1. * * @author blinkfox on 2018-12-17. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteImplementor1</span> <span class="token keyword">implements</span> <span class="token class-name">Implementor</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * åŸºæœ¬æ–¹æ³•1.     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ConcreteImplementor1 çš„ä¸šåŠ¡é€»è¾‘ doSomething."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * åŸºæœ¬æ–¹æ³•2.     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doAnything</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ConcreteImplementor1 çš„ä¸šåŠ¡é€»è¾‘ doAnything."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * ConcreteImplementor2. * * @author blinkfox on 2018-12-17. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteImplementor2</span> <span class="token keyword">implements</span> <span class="token class-name">Implementor</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * åŸºæœ¬æ–¹æ³•1.     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ConcreteImplementor2 çš„ä¸šåŠ¡é€»è¾‘ doSomething."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * åŸºæœ¬æ–¹æ³•2.     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doAnything</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ConcreteImplementor2 çš„ä¸šåŠ¡é€»è¾‘ doAnything."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥ï¼Œæ˜¯æŠ½è±¡ç±»è§’è‰²<code>Abstraction</code>ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>blinkfox<span class="token punctuation">.</span>patterns<span class="token punctuation">.</span>bridge</span><span class="token punctuation">;</span><span class="token comment">/** * æŠ½è±¡åŒ–è§’è‰² Abstraction. * * @author blinkfox on 2018-12-17. */</span><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Abstraction</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/** å®šä¹‰å¯¹å®ç°åŒ–è§’è‰²çš„å¼•ç”¨. */</span>    <span class="token keyword">private</span> <span class="token class-name">Implementor</span> impl<span class="token punctuation">;</span>    <span class="token comment">/**     * æ„é€ æ–¹æ³•.     *     * @param impl å®ç°ç±»çš„å®ä¾‹     */</span>    <span class="token keyword">public</span> <span class="token class-name">Abstraction</span><span class="token punctuation">(</span><span class="token class-name">Implementor</span> impl<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>impl <span class="token operator">=</span> impl<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * impl çš„ getteræ–¹æ³•.     *     * @return impl     */</span>    <span class="token keyword">public</span> <span class="token class-name">Implementor</span> <span class="token function">getImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> impl<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * è‡ªèº«çš„è¯·æ±‚å¤„ç†æ–¹æ³•.     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>impl<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å†æ¬¡ï¼Œæ˜¯æ‰©å±•çš„å…·ä½“æŠ½è±¡åŒ–è§’è‰²ç±»<code>RefinedAbstraction</code>ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * RefinedAbstraction. * * @author blinkfox on 2018-12-17. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RefinedAbstraction</span> <span class="token keyword">extends</span> <span class="token class-name">Abstraction</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * æ„é€ æ–¹æ³•.     *     * @param impl å®ç°ç±»çš„å®ä¾‹     */</span>    <span class="token keyword">public</span> <span class="token class-name">RefinedAbstraction</span><span class="token punctuation">(</span><span class="token class-name">Implementor</span> impl<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>impl<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * è¦†ç›–åçš„è¯·æ±‚å¤„ç†æ–¹æ³•.     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"RefinedAbstraction å¼€å§‹åšä¸šåŠ¡å¤„ç†."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doAnything</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åï¼Œæ˜¯å®¢æˆ·ç«¯åœºæ™¯ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * Client. * * @author blinkfox on 2018-12-17. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * mainæ–¹æ³•.     *     * @param args æ•°ç»„å‚æ•°     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// å®šä¹‰ä¸€ä¸ªå®ç°åŒ–è§’è‰²å’ŒæŠ½è±¡åŒ–è§’è‰²,å¹¶æ‰§è¡Œè¯·æ±‚æ–¹æ³•.</span>        <span class="token class-name">Implementor</span> impl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteImplementor1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Abstraction</span> abs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RefinedAbstraction</span><span class="token punctuation">(</span>impl<span class="token punctuation">)</span><span class="token punctuation">;</span>        abs<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ¨¡å¼åˆ†æ"><a href="#æ¨¡å¼åˆ†æ" class="headerlink" title="æ¨¡å¼åˆ†æ"></a>æ¨¡å¼åˆ†æ</h2><p>ç†è§£æ¡¥æ¥æ¨¡å¼ï¼Œé‡ç‚¹éœ€è¦ç†è§£å¦‚ä½•å°†æŠ½è±¡åŒ–(<code>Abstraction</code>)ä¸å®ç°åŒ–(<code>Implementation</code>)è„±è€¦ï¼Œä½¿å¾—äºŒè€…å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚</p><ul><li><strong>æŠ½è±¡åŒ–</strong>ï¼šæŠ½è±¡åŒ–å°±æ˜¯å¿½ç•¥ä¸€äº›ä¿¡æ¯ï¼ŒæŠŠä¸åŒçš„å®ä½“å½“ä½œåŒæ ·çš„å®ä½“å¯¹å¾…ã€‚åœ¨é¢å‘å¯¹è±¡ä¸­ï¼Œå°†å¯¹è±¡çš„å…±åŒæ€§è´¨æŠ½å–å‡ºæ¥å½¢æˆç±»çš„è¿‡ç¨‹å³ä¸ºæŠ½è±¡åŒ–çš„è¿‡ç¨‹ã€‚</li><li><strong>å®ç°åŒ–</strong>ï¼šé’ˆå¯¹æŠ½è±¡åŒ–ç»™å‡ºçš„å…·ä½“å®ç°ï¼Œå°±æ˜¯å®ç°åŒ–ï¼ŒæŠ½è±¡åŒ–ä¸å®ç°åŒ–æ˜¯ä¸€å¯¹äº’é€†çš„æ¦‚å¿µï¼Œå®ç°åŒ–äº§ç”Ÿçš„å¯¹è±¡æ¯”æŠ½è±¡åŒ–æ›´å…·ä½“ï¼Œæ˜¯å¯¹æŠ½è±¡åŒ–äº‹ç‰©çš„è¿›ä¸€æ­¥å…·ä½“åŒ–çš„äº§ç‰©ã€‚</li><li><strong>è„±è€¦</strong>ï¼šè„±è€¦å°±æ˜¯å°†æŠ½è±¡åŒ–å’Œå®ç°åŒ–ä¹‹é—´çš„è€¦åˆè§£è„±å¼€ï¼Œæˆ–è€…è¯´æ˜¯å°†å®ƒä»¬ä¹‹é—´çš„å¼ºå…³è”æ”¹æ¢æˆå¼±å…³è”ï¼Œå°†ä¸¤ä¸ªè§’è‰²ä¹‹é—´çš„ç»§æ‰¿å…³ç³»æ”¹ä¸ºå…³è”å…³ç³»ã€‚<strong>æ¡¥æ¥æ¨¡å¼ä¸­çš„æ‰€è°“è„±è€¦ï¼Œå°±æ˜¯æŒ‡åœ¨ä¸€ä¸ªè½¯ä»¶ç³»ç»Ÿçš„æŠ½è±¡åŒ–å’Œå®ç°åŒ–ä¹‹é—´ä½¿ç”¨å…³è”å…³ç³»ï¼ˆç»„åˆæˆ–è€…èšåˆå…³ç³»ï¼‰è€Œä¸æ˜¯ç»§æ‰¿å…³ç³»ï¼Œä»è€Œä½¿ä¸¤è€…å¯ä»¥ç›¸å¯¹ç‹¬ç«‹åœ°å˜åŒ–ï¼Œè¿™å°±æ˜¯æ¡¥æ¥æ¨¡å¼çš„ç”¨æ„ã€‚</strong></li></ul><h3 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h3><p>æ¡¥æ¥æ¨¡å¼çš„ä¼˜ç‚¹:</p><ul><li>åˆ†ç¦»æŠ½è±¡æ¥å£åŠå…¶å®ç°éƒ¨åˆ†ã€‚</li><li>æ¡¥æ¥æ¨¡å¼æœ‰æ—¶ç±»ä¼¼äºå¤šç»§æ‰¿æ–¹æ¡ˆï¼Œä½†æ˜¯å¤šç»§æ‰¿æ–¹æ¡ˆè¿èƒŒäº†ç±»çš„å•ä¸€èŒè´£åŸåˆ™ï¼ˆå³ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå˜åŒ–çš„åŸå› ï¼‰ï¼Œå¤ç”¨æ€§æ¯”è¾ƒå·®ï¼Œè€Œä¸”å¤šç»§æ‰¿ç»“æ„ä¸­ç±»çš„ä¸ªæ•°éå¸¸åºå¤§ï¼Œæ¡¥æ¥æ¨¡å¼æ˜¯æ¯”å¤šç»§æ‰¿æ–¹æ¡ˆæ›´å¥½çš„è§£å†³æ–¹æ³•ã€‚</li><li>æ¡¥æ¥æ¨¡å¼æé«˜äº†ç³»ç»Ÿçš„å¯æ‰©å……æ€§ï¼Œåœ¨ä¸¤ä¸ªå˜åŒ–ç»´åº¦ä¸­ä»»æ„æ‰©å±•ä¸€ä¸ªç»´åº¦ï¼Œéƒ½ä¸éœ€è¦ä¿®æ”¹åŸæœ‰ç³»ç»Ÿã€‚</li><li>å®ç°ç»†èŠ‚å¯¹å®¢æˆ·é€æ˜ï¼Œå¯ä»¥å¯¹ç”¨æˆ·éšè—å®ç°ç»†èŠ‚ã€‚</li></ul><h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h3><p>æ¡¥æ¥æ¨¡å¼çš„ç¼ºç‚¹:</p><ul><li>æ¡¥æ¥æ¨¡å¼çš„å¼•å…¥ä¼šå¢åŠ ç³»ç»Ÿçš„ç†è§£ä¸è®¾è®¡éš¾åº¦ï¼Œç”±äºèšåˆå…³è”å…³ç³»å»ºç«‹åœ¨æŠ½è±¡å±‚ï¼Œè¦æ±‚å¼€å‘è€…é’ˆå¯¹æŠ½è±¡è¿›è¡Œè®¾è®¡ä¸ç¼–ç¨‹ã€‚ </li><li>æ¡¥æ¥æ¨¡å¼è¦æ±‚æ­£ç¡®è¯†åˆ«å‡ºç³»ç»Ÿä¸­ä¸¤ä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œå› æ­¤å…¶ä½¿ç”¨èŒƒå›´å…·æœ‰ä¸€å®šçš„å±€é™æ€§ã€‚</li></ul><h3 id="é€‚ç”¨ç¯å¢ƒ"><a href="#é€‚ç”¨ç¯å¢ƒ" class="headerlink" title="é€‚ç”¨ç¯å¢ƒ"></a>é€‚ç”¨ç¯å¢ƒ</h3><p>åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨æ¡¥æ¥æ¨¡å¼ï¼š</p><ul><li>å¦‚æœä¸€ä¸ªç³»ç»Ÿéœ€è¦åœ¨æ„ä»¶çš„æŠ½è±¡åŒ–è§’è‰²å’Œå…·ä½“åŒ–è§’è‰²ä¹‹é—´å¢åŠ æ›´å¤šçš„çµæ´»æ€§ï¼Œé¿å…åœ¨ä¸¤ä¸ªå±‚æ¬¡ä¹‹é—´å»ºç«‹é™æ€çš„ç»§æ‰¿è”ç³»ï¼Œé€šè¿‡æ¡¥æ¥æ¨¡å¼å¯ä»¥ä½¿å®ƒä»¬åœ¨æŠ½è±¡å±‚å»ºç«‹ä¸€ä¸ªå…³è”å…³ç³»ã€‚</li><li>æŠ½è±¡åŒ–è§’è‰²å’Œå®ç°åŒ–è§’è‰²å¯ä»¥ä»¥ç»§æ‰¿çš„æ–¹å¼ç‹¬ç«‹æ‰©å±•è€Œäº’ä¸å½±å“ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶å¯ä»¥åŠ¨æ€å°†ä¸€ä¸ªæŠ½è±¡åŒ–å­ç±»çš„å¯¹è±¡å’Œä¸€ä¸ªå®ç°åŒ–å­ç±»çš„å¯¹è±¡è¿›è¡Œç»„åˆï¼Œå³ç³»ç»Ÿéœ€è¦å¯¹æŠ½è±¡åŒ–è§’è‰²å’Œå®ç°åŒ–è§’è‰²è¿›è¡ŒåŠ¨æ€è€¦åˆã€‚</li><li>ä¸€ä¸ªç±»å­˜åœ¨ä¸¤ä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œä¸”è¿™ä¸¤ä¸ªç»´åº¦éƒ½éœ€è¦è¿›è¡Œæ‰©å±•ã€‚</li><li>è™½ç„¶åœ¨ç³»ç»Ÿä¸­ä½¿ç”¨ç»§æ‰¿æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯ç”±äºæŠ½è±¡åŒ–è§’è‰²å’Œå…·ä½“åŒ–è§’è‰²éœ€è¦ç‹¬ç«‹å˜åŒ–ï¼Œè®¾è®¡è¦æ±‚éœ€è¦ç‹¬ç«‹ç®¡ç†è¿™ä¸¤è€…ã€‚</li><li>å¯¹äºé‚£äº›ä¸å¸Œæœ›ä½¿ç”¨ç»§æ‰¿æˆ–å› ä¸ºå¤šå±‚æ¬¡ç»§æ‰¿å¯¼è‡´ç³»ç»Ÿç±»çš„ä¸ªæ•°æ€¥å‰§å¢åŠ çš„ç³»ç»Ÿï¼Œæ¡¥æ¥æ¨¡å¼å°¤ä¸ºé€‚ç”¨ã€‚</li></ul><h3 id="æ¨¡å¼åº”ç”¨"><a href="#æ¨¡å¼åº”ç”¨" class="headerlink" title="æ¨¡å¼åº”ç”¨"></a>æ¨¡å¼åº”ç”¨</h3><p>ä¸€ä¸ªJavaæ¡Œé¢è½¯ä»¶æ€»æ˜¯å¸¦æœ‰æ‰€åœ¨æ“ä½œç³»ç»Ÿçš„è§†æ„Ÿ(<code>LookAndFeel</code>)ï¼Œå¦‚æœä¸€ä¸ªJavaè½¯ä»¶æ˜¯åœ¨Unixç³»ç»Ÿä¸Šå¼€å‘çš„ï¼Œé‚£ä¹ˆå¼€å‘äººå‘˜çœ‹åˆ°çš„æ˜¯<code>Motif</code>ç”¨æˆ·ç•Œé¢çš„è§†æ„Ÿï¼›åœ¨Windowsä¸Šé¢ä½¿ç”¨è¿™ä¸ªç³»ç»Ÿçš„ç”¨æˆ·çœ‹åˆ°çš„æ˜¯Windowsç”¨æˆ·ç•Œé¢çš„è§†æ„Ÿï¼›è€Œä¸€ä¸ªåœ¨<code>Macintosh</code>ä¸Šé¢ä½¿ç”¨çš„ç”¨æˆ·çœ‹åˆ°çš„åˆ™æ˜¯<code>Macintosh</code>ç”¨æˆ·ç•Œé¢çš„è§†æ„Ÿï¼ŒJavaè¯­è¨€æ˜¯é€šè¿‡æ‰€è°“çš„Peeræ¶æ„åšåˆ°è¿™ä¸€ç‚¹çš„ã€‚Javaä¸ºAWTä¸­çš„æ¯ä¸€ä¸ªGUIæ„ä»¶éƒ½æä¾›äº†ä¸€ä¸ªPeeræ„ä»¶ï¼Œåœ¨AWTä¸­çš„Peeræ¶æ„å°±ä½¿ç”¨äº†æ¡¥æ¥æ¨¡å¼ã€‚</p><h3 id="æ¨¡å¼æ‰©å±•"><a href="#æ¨¡å¼æ‰©å±•" class="headerlink" title="æ¨¡å¼æ‰©å±•"></a>æ¨¡å¼æ‰©å±•</h3><p>é€‚é…å™¨æ¨¡å¼ä¸æ¡¥æ¥æ¨¡å¼çš„è”ç”¨:</p><p>æ¡¥æ¥æ¨¡å¼å’Œé€‚é…å™¨æ¨¡å¼ç”¨äºè®¾è®¡çš„ä¸åŒé˜¶æ®µï¼Œ<strong>æ¡¥æ¥æ¨¡å¼ç”¨äºç³»ç»Ÿçš„åˆæ­¥è®¾è®¡</strong>ï¼Œå¯¹äºå­˜åœ¨ä¸¤ä¸ªç‹¬ç«‹å˜åŒ–ç»´åº¦çš„ç±»å¯ä»¥å°†å…¶åˆ†ä¸ºæŠ½è±¡åŒ–å’Œå®ç°åŒ–ä¸¤ä¸ªè§’è‰²ï¼Œä½¿å®ƒä»¬å¯ä»¥åˆ†åˆ«è¿›è¡Œå˜åŒ–ï¼›è€Œåœ¨åˆæ­¥è®¾è®¡å®Œæˆä¹‹åï¼Œ<strong>å½“å‘ç°ç³»ç»Ÿä¸å·²æœ‰ç±»æ— æ³•ååŒå·¥ä½œæ—¶ï¼Œå¯ä»¥é‡‡ç”¨é€‚é…å™¨æ¨¡å¼</strong>ã€‚ä½†æœ‰æ—¶å€™åœ¨è®¾è®¡åˆæœŸä¹Ÿéœ€è¦è€ƒè™‘é€‚é…å™¨æ¨¡å¼ï¼Œç‰¹åˆ«æ˜¯é‚£äº›æ¶‰åŠåˆ°å¤§é‡ç¬¬ä¸‰æ–¹åº”ç”¨æ¥å£çš„æƒ…å†µã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li>æ¡¥æ¥æ¨¡å¼å°†æŠ½è±¡éƒ¨åˆ†ä¸å®ƒçš„å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚å®ƒæ˜¯ä¸€ç§å¯¹è±¡ç»“æ„å‹æ¨¡å¼ã€‚</li><li>æ¡¥æ¥æ¨¡å¼åŒ…å«å¦‚ä¸‹å››ä¸ªè§’è‰²ï¼šæŠ½è±¡ç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªå®ç°ç±»æ¥å£ç±»å‹çš„å¯¹è±¡å¹¶å¯ä»¥ç»´æŠ¤è¯¥å¯¹è±¡ï¼›æ‰©å……æŠ½è±¡ç±»æ‰©å……ç”±æŠ½è±¡ç±»å®šä¹‰çš„æ¥å£ï¼Œå®ƒå®ç°äº†åœ¨æŠ½è±¡ç±»ä¸­å®šä¹‰çš„æŠ½è±¡ä¸šåŠ¡æ–¹æ³•ï¼Œåœ¨æ‰©å……æŠ½è±¡ç±»ä¸­å¯ä»¥è°ƒç”¨åœ¨å®ç°ç±»æ¥å£ä¸­å®šä¹‰çš„ä¸šåŠ¡æ–¹æ³•ï¼›å®ç°ç±»æ¥å£å®šä¹‰äº†å®ç°ç±»çš„æ¥å£ï¼Œå®ç°ç±»æ¥å£ä»…æä¾›åŸºæœ¬æ“ä½œï¼Œè€ŒæŠ½è±¡ç±»å®šä¹‰çš„æ¥å£å¯èƒ½ä¼šåšæ›´å¤šæ›´å¤æ‚çš„æ“ä½œï¼›å…·ä½“å®ç°ç±»å®ç°äº†å®ç°ç±»æ¥å£å¹¶ä¸”å…·ä½“å®ç°å®ƒï¼Œåœ¨ä¸åŒçš„å…·ä½“å®ç°ç±»ä¸­æä¾›åŸºæœ¬æ“ä½œçš„ä¸åŒå®ç°ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œå…·ä½“å®ç°ç±»å¯¹è±¡å°†æ›¿æ¢å…¶çˆ¶ç±»å¯¹è±¡ï¼Œæä¾›ç»™å®¢æˆ·ç«¯å…·ä½“çš„ä¸šåŠ¡æ“ä½œæ–¹æ³•ã€‚</li><li>åœ¨æ¡¥æ¥æ¨¡å¼ä¸­ï¼ŒæŠ½è±¡åŒ–(<code>Abstraction</code>)ä¸å®ç°åŒ–(<code>Implementation</code>)è„±è€¦ï¼Œå®ƒä»¬å¯ä»¥æ²¿ç€å„è‡ªçš„ç»´åº¦ç‹¬ç«‹å˜åŒ–ã€‚</li><li>æ¡¥æ¥æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹æ˜¯åˆ†ç¦»æŠ½è±¡æ¥å£åŠå…¶å®ç°éƒ¨åˆ†ï¼Œæ˜¯æ¯”å¤šç»§æ‰¿æ–¹æ¡ˆæ›´å¥½çš„è§£å†³æ–¹æ³•ï¼Œæ¡¥æ¥æ¨¡å¼è¿˜æé«˜äº†ç³»ç»Ÿçš„å¯æ‰©å……æ€§ï¼Œåœ¨ä¸¤ä¸ªå˜åŒ–ç»´åº¦ä¸­ä»»æ„æ‰©å±•ä¸€ä¸ªç»´åº¦ï¼Œéƒ½ä¸éœ€è¦ä¿®æ”¹åŸæœ‰ç³»ç»Ÿï¼Œå®ç°ç»†èŠ‚å¯¹å®¢æˆ·é€æ˜ï¼Œå¯ä»¥å¯¹ç”¨æˆ·éšè—å®ç°ç»†èŠ‚ï¼›å…¶ä¸»è¦ç¼ºç‚¹æ˜¯å¢åŠ ç³»ç»Ÿçš„ç†è§£ä¸è®¾è®¡éš¾åº¦ï¼Œä¸”è¯†åˆ«å‡ºç³»ç»Ÿä¸­ä¸¤ä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦å¹¶ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…ã€‚</li><li>æ¡¥æ¥æ¨¡å¼é€‚ç”¨æƒ…å†µåŒ…æ‹¬ï¼šéœ€è¦åœ¨æ„ä»¶çš„æŠ½è±¡åŒ–è§’è‰²å’Œå…·ä½“åŒ–è§’è‰²ä¹‹é—´å¢åŠ æ›´å¤šçš„çµæ´»æ€§ï¼Œé¿å…åœ¨ä¸¤ä¸ªå±‚æ¬¡ä¹‹é—´å»ºç«‹é™æ€çš„ç»§æ‰¿è”ç³»ï¼›æŠ½è±¡åŒ–è§’è‰²å’Œå®ç°åŒ–è§’è‰²å¯ä»¥ä»¥ç»§æ‰¿çš„æ–¹å¼ç‹¬ç«‹æ‰©å±•è€Œäº’ä¸å½±å“ï¼›ä¸€ä¸ªç±»å­˜åœ¨ä¸¤ä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œä¸”è¿™ä¸¤ä¸ªç»´åº¦éƒ½éœ€è¦è¿›è¡Œæ‰©å±•ï¼›è®¾è®¡è¦æ±‚éœ€è¦ç‹¬ç«‹ç®¡ç†æŠ½è±¡åŒ–è§’è‰²å’Œå…·ä½“åŒ–è§’è‰²ï¼›ä¸å¸Œæœ›ä½¿ç”¨ç»§æ‰¿æˆ–å› ä¸ºå¤šå±‚æ¬¡ç»§æ‰¿å¯¼è‡´ç³»ç»Ÿç±»çš„ä¸ªæ•°æ€¥å‰§å¢åŠ çš„ç³»ç»Ÿã€‚</li></ul><p>å‚è€ƒè‡ªï¼š<a href="https://design-patterns.readthedocs.io/zh_CN/latest/structural_patterns/bridge.html">æ¡¥æ¥æ¨¡å¼</a></p>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶è®¾è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaé¢å‘å¯¹è±¡è®¾è®¡ä¹‹é€‚é…å™¨æ¨¡å¼</title>
      <link href="/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-gua-pei-qi-mo-shi/"/>
      <url>/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-gua-pei-qi-mo-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="æ¨¡å¼åŠ¨æœº"><a href="#æ¨¡å¼åŠ¨æœº" class="headerlink" title="æ¨¡å¼åŠ¨æœº"></a>æ¨¡å¼åŠ¨æœº</h2><ul><li>åœ¨è½¯ä»¶å¼€å‘ä¸­é‡‡ç”¨ç±»ä¼¼äºç”µæºé€‚é…å™¨çš„è®¾è®¡å’Œç¼–ç æŠ€å·§è¢«ç§°ä¸ºé€‚é…å™¨æ¨¡å¼ã€‚</li><li>é€šå¸¸æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ç›®æ ‡ç±»çš„æ¥å£è®¿é—®å®ƒæ‰€æä¾›çš„æœåŠ¡ã€‚æœ‰æ—¶ï¼Œç°æœ‰çš„ç±»å¯ä»¥æ»¡è¶³å®¢æˆ·ç±»çš„åŠŸèƒ½éœ€è¦ï¼Œä½†æ˜¯å®ƒæ‰€æä¾›çš„æ¥å£ä¸ä¸€å®šæ˜¯å®¢æˆ·ç±»æ‰€æœŸæœ›çš„ï¼Œè¿™å¯èƒ½æ˜¯å› ä¸ºç°æœ‰ç±»ä¸­æ–¹æ³•åä¸ç›®æ ‡ç±»ä¸­å®šä¹‰çš„æ–¹æ³•åä¸ä¸€è‡´ç­‰åŸå› æ‰€å¯¼è‡´çš„ã€‚</li><li>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç°æœ‰çš„æ¥å£éœ€è¦è½¬åŒ–ä¸ºå®¢æˆ·ç±»æœŸæœ›çš„æ¥å£ï¼Œè¿™æ ·ä¿è¯äº†å¯¹ç°æœ‰ç±»çš„é‡ç”¨ã€‚å¦‚æœä¸è¿›è¡Œè¿™æ ·çš„è½¬åŒ–ï¼Œå®¢æˆ·ç±»å°±ä¸èƒ½åˆ©ç”¨ç°æœ‰ç±»æ‰€æä¾›çš„åŠŸèƒ½ï¼Œé€‚é…å™¨æ¨¡å¼å¯ä»¥å®Œæˆè¿™æ ·çš„è½¬åŒ–ã€‚</li><li>åœ¨é€‚é…å™¨æ¨¡å¼ä¸­å¯ä»¥å®šä¹‰ä¸€ä¸ªåŒ…è£…ç±»ï¼ŒåŒ…è£…ä¸å…¼å®¹æ¥å£çš„å¯¹è±¡ï¼Œè¿™ä¸ªåŒ…è£…ç±»æŒ‡çš„å°±æ˜¯é€‚é…å™¨(<code>Adapter</code>)ï¼Œå®ƒæ‰€åŒ…è£…çš„å¯¹è±¡å°±æ˜¯é€‚é…è€…(<code>Adaptee</code>)ï¼Œå³è¢«é€‚é…çš„ç±»ã€‚</li><li>é€‚é…å™¨æä¾›å®¢æˆ·ç±»éœ€è¦çš„æ¥å£ï¼Œé€‚é…å™¨çš„å®ç°å°±æ˜¯æŠŠå®¢æˆ·ç±»çš„è¯·æ±‚è½¬åŒ–ä¸ºå¯¹é€‚é…è€…çš„ç›¸åº”æ¥å£çš„è°ƒç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šå½“å®¢æˆ·ç±»è°ƒç”¨é€‚é…å™¨çš„æ–¹æ³•æ—¶ï¼Œåœ¨é€‚é…å™¨ç±»çš„å†…éƒ¨å°†è°ƒç”¨é€‚é…è€…ç±»çš„æ–¹æ³•ï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹å¯¹å®¢æˆ·ç±»æ˜¯é€æ˜çš„ï¼Œå®¢æˆ·ç±»å¹¶ä¸ç›´æ¥è®¿é—®é€‚é…è€…ç±»ã€‚å› æ­¤ï¼Œé€‚é…å™¨å¯ä»¥ä½¿ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½äº¤äº’çš„ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚è¿™å°±æ˜¯é€‚é…å™¨æ¨¡å¼çš„æ¨¡å¼åŠ¨æœºã€‚</li></ul><h2 id="æ¨¡å¼å®šä¹‰"><a href="#æ¨¡å¼å®šä¹‰" class="headerlink" title="æ¨¡å¼å®šä¹‰"></a>æ¨¡å¼å®šä¹‰</h2><blockquote><p><strong>é€‚é…å™¨æ¨¡å¼</strong>(<code>Adapter Pattern</code>) ï¼šå°†ä¸€ä¸ªæ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦ä¸€ä¸ªæ¥å£ï¼Œä½¿æ¥å£ä¸å…¼å®¹çš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œï¼Œå…¶åˆ«åä¸ºåŒ…è£…å™¨(<code>Wrapper</code>)ã€‚é€‚é…å™¨æ¨¡å¼æ—¢å¯ä»¥ä½œä¸ºç±»ç»“æ„å‹æ¨¡å¼ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå¯¹è±¡ç»“æ„å‹æ¨¡å¼ã€‚é€‚é…å™¨æ¨¡å¼æ˜¯ä¸€ç§<strong>ç»“æ„å‹æ¨¡å¼</strong>ã€‚</p></blockquote><h2 id="æ¨¡å¼ç»“æ„"><a href="#æ¨¡å¼ç»“æ„" class="headerlink" title="æ¨¡å¼ç»“æ„"></a>æ¨¡å¼ç»“æ„</h2><h3 id="å‚ä¸è§’è‰²"><a href="#å‚ä¸è§’è‰²" class="headerlink" title="å‚ä¸è§’è‰²"></a>å‚ä¸è§’è‰²</h3><p>é€‚é…å™¨æ¨¡å¼åŒ…å«å¦‚ä¸‹è§’è‰²ï¼š</p><ul><li><code>Target</code>ï¼šç›®æ ‡æŠ½è±¡ç±»</li><li><code>Adapter</code>ï¼šé€‚é…å™¨ç±»</li><li><code>Adaptee</code>ï¼šé€‚é…è€…ç±»</li><li><code>Client</code>ï¼šå®¢æˆ·ç±»</li></ul><h3 id="UMLç±»å›¾"><a href="#UMLç±»å›¾" class="headerlink" title="UMLç±»å›¾"></a>UMLç±»å›¾</h3><p><img src="https://statics.sh1a.qingstor.com/2018/12/12/adapter-structure.jpg" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/12/12/adapter-structure.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="é€‚é…å™¨æ¨¡å¼UML"></p><h2 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h2><p>é¦–å…ˆï¼Œæ˜¯ç›®æ ‡è§’è‰²æ¥å£å’Œå…·ä½“ç›®æ ‡å®ç°ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * Target ç›®æ ‡è§’è‰²ç±». * * @author blinkfox on 2018-12-11. */</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Target</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * ç›®æ ‡è§’è‰²è‡ªå·±çš„æ–¹æ³•.     */</span>    <span class="token keyword">void</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å…·ä½“çš„ç›®æ ‡è§’è‰²å®ç°ç±». * * @author blinkfox on 2018-12-11. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteTarget</span> <span class="token keyword">implements</span> <span class="token class-name">Target</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * ç›®æ ‡è§’è‰²è‡ªå·±çš„æ–¹æ³•.     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello, I'm concrete target method."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶æ¬¡ï¼Œæ˜¯é€‚é…è€…ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * é€‚é…è€…ç±». * * @author blinkfox on 2018-12-11. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Adaptee</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * è¿™æ˜¯åŸæœ‰çš„ä¸šåŠ¡é€»è¾‘æ–¹æ³•.     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hello, I'm Adaptee method."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åï¼Œæ˜¯é€‚é…å™¨è§’è‰²ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * é€‚é…å™¨ç±». * * @author blinkfox on 2018-12-11. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Adapter</span> <span class="token keyword">extends</span> <span class="token class-name">Adaptee</span> <span class="token keyword">implements</span> <span class="token class-name">Target</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * é€‚é…äº†ç›®æ ‡è§’è‰²è‡ªå·±çš„æ–¹æ³•.     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"é€‚é…å™¨é€‚é…äº†ç›®æ ‡è§’è‰²æ–¹æ³•."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åï¼Œæ˜¯å®¢æˆ·ç«¯åœºæ™¯ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å®¢æˆ·ç«¯åœºæ™¯ç±». * * @author blinkfox on 2018-12-11. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * mainæ–¹æ³•.     *     * @param args æ•°ç»„å‚æ•°     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// åŸæœ‰ä¸šåŠ¡é€»è¾‘.</span>        <span class="token class-name">Target</span> target <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        target<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å¢åŠ äº†é€‚é…å™¨è§’è‰²åçš„ä¸šåŠ¡é€»è¾‘.</span>        <span class="token class-name">Target</span> adaptTarget <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Adapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        adaptTarget<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ¨¡å¼åˆ†æ"><a href="#æ¨¡å¼åˆ†æ" class="headerlink" title="æ¨¡å¼åˆ†æ"></a>æ¨¡å¼åˆ†æ</h2><h3 id="é€‚ç”¨ç¯å¢ƒ"><a href="#é€‚ç”¨ç¯å¢ƒ" class="headerlink" title="é€‚ç”¨ç¯å¢ƒ"></a>é€‚ç”¨ç¯å¢ƒ</h3><p>åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨é€‚é…å™¨æ¨¡å¼ï¼š</p><ul><li>ç³»ç»Ÿéœ€è¦ä½¿ç”¨ç°æœ‰çš„ç±»ï¼Œè€Œè¿™äº›ç±»çš„æ¥å£ä¸ç¬¦åˆç³»ç»Ÿçš„éœ€è¦ã€‚</li><li>æƒ³è¦å»ºç«‹ä¸€ä¸ªå¯ä»¥é‡å¤ä½¿ç”¨çš„ç±»ï¼Œç”¨äºä¸ä¸€äº›å½¼æ­¤ä¹‹é—´æ²¡æœ‰å¤ªå¤§å…³è”çš„ä¸€äº›ç±»ï¼ŒåŒ…æ‹¬ä¸€äº›å¯èƒ½åœ¨å°†æ¥å¼•è¿›çš„ç±»ä¸€èµ·å·¥ä½œã€‚</li></ul><h3 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h3><ul><li>å°†ç›®æ ‡ç±»å’Œé€‚é…è€…ç±»è§£è€¦ï¼Œé€šè¿‡å¼•å…¥ä¸€ä¸ªé€‚é…å™¨ç±»æ¥é‡ç”¨ç°æœ‰çš„é€‚é…è€…ç±»ï¼Œè€Œæ— é¡»ä¿®æ”¹åŸæœ‰ä»£ç ã€‚</li><li>å¢åŠ äº†ç±»çš„é€æ˜æ€§å’Œå¤ç”¨æ€§ï¼Œå°†å…·ä½“çš„å®ç°å°è£…åœ¨é€‚é…è€…ç±»ä¸­ï¼Œå¯¹äºå®¢æˆ·ç«¯ç±»æ¥è¯´æ˜¯é€æ˜çš„ï¼Œè€Œä¸”æé«˜äº†é€‚é…è€…çš„å¤ç”¨æ€§ã€‚</li><li>çµæ´»æ€§å’Œæ‰©å±•æ€§éƒ½éå¸¸å¥½ï¼Œé€šè¿‡ä½¿ç”¨é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ›´æ¢é€‚é…å™¨ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸ä¿®æ”¹åŸæœ‰ä»£ç çš„åŸºç¡€ä¸Šå¢åŠ æ–°çš„é€‚é…å™¨ç±»ï¼Œå®Œå…¨ç¬¦åˆâ€œå¼€é—­åŸåˆ™â€ã€‚</li></ul><h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h3><p>å¦‚æœä¸€å®šè¦ç½®æ¢æ‰é€‚é…è€…ç±»çš„ä¸€ä¸ªæˆ–å¤šä¸ªæ–¹æ³•ï¼Œå°±åªå¥½å…ˆåšä¸€ä¸ªé€‚é…è€…ç±»çš„å­ç±»ï¼Œå°†é€‚é…è€…ç±»çš„æ–¹æ³•ç½®æ¢æ‰ï¼Œç„¶åå†æŠŠé€‚é…è€…ç±»çš„å­ç±»å½“åšçœŸæ­£çš„é€‚é…è€…è¿›è¡Œé€‚é…ï¼Œå®ç°è¿‡ç¨‹è¾ƒä¸ºå¤æ‚ã€‚</p><h3 id="æ¨¡å¼åº”ç”¨"><a href="#æ¨¡å¼åº”ç”¨" class="headerlink" title="æ¨¡å¼åº”ç”¨"></a>æ¨¡å¼åº”ç”¨</h3><p>Sunå…¬å¸åœ¨1996å¹´å…¬å¼€äº†Javaè¯­è¨€çš„æ•°æ®åº“è¿æ¥å·¥å…·JDBCï¼ŒJDBCä½¿å¾—Javaè¯­è¨€ç¨‹åºèƒ½å¤Ÿä¸æ•°æ®åº“è¿æ¥ï¼Œå¹¶ä½¿ç”¨SQLè¯­è¨€æ¥æŸ¥è¯¢å’Œæ“ä½œæ•°æ®ã€‚JDBCç»™å‡ºä¸€ä¸ªå®¢æˆ·ç«¯é€šç”¨çš„æŠ½è±¡æ¥å£ï¼Œæ¯ä¸€ä¸ªå…·ä½“æ•°æ®åº“å¼•æ“ï¼ˆå¦‚SQL Serverã€Oracleã€MySQLç­‰ï¼‰çš„JDBCé©±åŠ¨è½¯ä»¶éƒ½æ˜¯ä¸€ä¸ªä»‹äºJDBCæ¥å£å’Œæ•°æ®åº“å¼•æ“æ¥å£ä¹‹é—´çš„é€‚é…å™¨è½¯ä»¶ã€‚æŠ½è±¡çš„JDBCæ¥å£å’Œå„ä¸ªæ•°æ®åº“å¼•æ“APIä¹‹é—´éƒ½éœ€è¦ç›¸åº”çš„é€‚é…å™¨è½¯ä»¶ï¼Œè¿™å°±æ˜¯ä¸ºå„ä¸ªä¸åŒæ•°æ®åº“å¼•æ“å‡†å¤‡çš„é©±åŠ¨ç¨‹åºã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li>ç»“æ„å‹æ¨¡å¼æè¿°å¦‚ä½•å°†ç±»æˆ–è€…å¯¹è±¡ç»“åˆåœ¨ä¸€èµ·å½¢æˆæ›´å¤§çš„ç»“æ„ã€‚</li><li>é€‚é…å™¨æ¨¡å¼ç”¨äºå°†ä¸€ä¸ªæ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦ä¸€ä¸ªæ¥å£ï¼Œé€‚é…å™¨æ¨¡å¼ä½¿æ¥å£ä¸å…¼å®¹çš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œï¼Œå…¶åˆ«åä¸ºåŒ…è£…å™¨ã€‚é€‚é…å™¨æ¨¡å¼æ—¢å¯ä»¥ä½œä¸ºç±»ç»“æ„å‹æ¨¡å¼ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå¯¹è±¡ç»“æ„å‹æ¨¡å¼ã€‚</li><li>é€‚é…å™¨æ¨¡å¼åŒ…å«å››ä¸ªè§’è‰²ï¼šç›®æ ‡æŠ½è±¡ç±»å®šä¹‰å®¢æˆ·è¦ç”¨çš„ç‰¹å®šé¢†åŸŸçš„æ¥å£ï¼›é€‚é…å™¨ç±»å¯ä»¥è°ƒç”¨å¦ä¸€ä¸ªæ¥å£ï¼Œä½œä¸ºä¸€ä¸ªè½¬æ¢å™¨ï¼Œå¯¹é€‚é…è€…å’ŒæŠ½è±¡ç›®æ ‡ç±»è¿›è¡Œé€‚é…ï¼Œå®ƒæ˜¯é€‚é…å™¨æ¨¡å¼çš„æ ¸å¿ƒï¼›é€‚é…è€…ç±»æ˜¯è¢«é€‚é…çš„è§’è‰²ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ¥å£ï¼Œè¿™ä¸ªæ¥å£éœ€è¦é€‚é…ï¼›åœ¨å®¢æˆ·ç±»ä¸­é’ˆå¯¹ç›®æ ‡æŠ½è±¡ç±»è¿›è¡Œç¼–ç¨‹ï¼Œè°ƒç”¨åœ¨ç›®æ ‡æŠ½è±¡ç±»ä¸­å®šä¹‰çš„ä¸šåŠ¡æ–¹æ³•ã€‚</li><li>åœ¨ç±»é€‚é…å™¨æ¨¡å¼ä¸­ï¼Œé€‚é…å™¨ç±»å®ç°äº†ç›®æ ‡æŠ½è±¡ç±»æ¥å£å¹¶ç»§æ‰¿äº†é€‚é…è€…ç±»ï¼Œå¹¶åœ¨ç›®æ ‡æŠ½è±¡ç±»çš„å®ç°æ–¹æ³•ä¸­è°ƒç”¨æ‰€ç»§æ‰¿çš„é€‚é…è€…ç±»çš„æ–¹æ³•ï¼›åœ¨å¯¹è±¡é€‚é…å™¨æ¨¡å¼ä¸­ï¼Œé€‚é…å™¨ç±»ç»§æ‰¿äº†ç›®æ ‡æŠ½è±¡ç±»å¹¶å®šä¹‰äº†ä¸€ä¸ªé€‚é…è€…ç±»çš„å¯¹è±¡å®ä¾‹ï¼Œåœ¨æ‰€ç»§æ‰¿çš„ç›®æ ‡æŠ½è±¡ç±»æ–¹æ³•ä¸­è°ƒç”¨é€‚é…è€…ç±»çš„ç›¸åº”ä¸šåŠ¡æ–¹æ³•ã€‚</li><li>é€‚é…å™¨æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹æ˜¯å°†ç›®æ ‡ç±»å’Œé€‚é…è€…ç±»è§£è€¦ï¼Œå¢åŠ äº†ç±»çš„é€æ˜æ€§å’Œå¤ç”¨æ€§ï¼ŒåŒæ—¶ç³»ç»Ÿçš„çµæ´»æ€§å’Œæ‰©å±•æ€§éƒ½éå¸¸å¥½ï¼Œæ›´æ¢é€‚é…å™¨æˆ–è€…å¢åŠ æ–°çš„é€‚é…å™¨éƒ½éå¸¸æ–¹ä¾¿ï¼Œç¬¦åˆâ€œå¼€é—­åŸåˆ™â€ï¼›ç±»é€‚é…å™¨æ¨¡å¼çš„ç¼ºç‚¹æ˜¯é€‚é…å™¨ç±»åœ¨å¾ˆå¤šç¼–ç¨‹è¯­è¨€ä¸­ä¸èƒ½åŒæ—¶é€‚é…å¤šä¸ªé€‚é…è€…ç±»ï¼Œå¯¹è±¡é€‚é…å™¨æ¨¡å¼çš„ç¼ºç‚¹æ˜¯å¾ˆéš¾ç½®æ¢é€‚é…è€…ç±»çš„æ–¹æ³•ã€‚</li><li>é€‚é…å™¨æ¨¡å¼é€‚ç”¨æƒ…å†µåŒ…æ‹¬ï¼šç³»ç»Ÿéœ€è¦ä½¿ç”¨ç°æœ‰çš„ç±»ï¼Œè€Œè¿™äº›ç±»çš„æ¥å£ä¸ç¬¦åˆç³»ç»Ÿçš„éœ€è¦ï¼›æƒ³è¦å»ºç«‹ä¸€ä¸ªå¯ä»¥é‡å¤ä½¿ç”¨çš„ç±»ï¼Œç”¨äºä¸ä¸€äº›å½¼æ­¤ä¹‹é—´æ²¡æœ‰å¤ªå¤§å…³è”çš„ä¸€äº›ç±»ä¸€èµ·å·¥ä½œã€‚</li></ul><p>å‚è€ƒè‡ªï¼š<a href="https://design-patterns.readthedocs.io/zh_CN/latest/structural_patterns/adapter.html">é€‚é…å™¨æ¨¡å¼</a></p>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶è®¾è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è½¯ä»¶ç¨‹åºè®¾è®¡åŸåˆ™</title>
      <link href="/post/ruan-jian-she-ji/ruan-jian-cheng-xu-she-ji-yuan-ze/"/>
      <url>/post/ruan-jian-she-ji/ruan-jian-cheng-xu-she-ji-yuan-ze/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€å‰è¨€"><a href="#ä¸€ã€å‰è¨€" class="headerlink" title="ä¸€ã€å‰è¨€"></a>ä¸€ã€å‰è¨€</h2><p>è½¯ä»¶ä¹Ÿåƒäººä¸€æ ·ï¼Œå…·æœ‰ç”Ÿå‘½åŠ›ï¼Œä»å‡ºç”Ÿåˆ°æ­»äº¡ï¼Œä¼šç»å†å¤šç§å˜åŒ–ã€‚è½¯ä»¶æ¶æ„è®¾è®¡ä¹Ÿä¸æ˜¯ä¸€è¹´è€Œå°±çš„ï¼Œæ˜¯ä¸æ–­åœ°æ¼”è¿›å‘å±•ã€‚æ¯ä¸ªç¨‹åºå‘˜éƒ½å¯ä»¥ä»ç†è§£ç¼–ç¨‹åŸåˆ™å’Œæ¨¡å¼ä¸­å—ç›Šã€‚</p><p>è½¯ä»¶è®¾è®¡åŸåˆ™æ˜¯ä¸€ç»„å¸®åŠ©æˆ‘ä»¬é¿å¼€ä¸è‰¯è®¾è®¡çš„æŒ‡å¯¼æ–¹é’ˆã€‚æ ¹æ®<code>Robert Martin</code>çš„ç†è®ºï¼Œåº”è¯¥é¿å…ä¸è‰¯è®¾è®¡çš„ä»¥ä¸‹ä¸‰ä¸ªé‡è¦ç‰¹ç‚¹ï¼š</p><ul><li><strong>åƒµåŒ–</strong>ï¼šå¾ˆéš¾åšæ”¹åŠ¨ï¼Œå› ä¸ºæ¯ä¸€ä¸ªç»†å¾®çš„æ”¹åŠ¨éƒ½ä¼šå½±å“åˆ°ç³»ç»Ÿå¤§é‡çš„å…¶ä»–åŠŸèƒ½</li><li><strong>è„†å¼±</strong>ï¼šæ¯å½“ä½ åšä¸€æ¬¡æ”¹åŠ¨ï¼Œæ€»ä¼šå¼•èµ·ç³»ç»Ÿä¸­é¢„æœŸä¹‹å¤–çš„éƒ¨åˆ†å‡ºç°æ•…éšœ</li><li><strong>æ­»æ¿</strong>ï¼šä»£ç å¾ˆéš¾åœ¨å…¶ä»–åº”ç”¨ä¸­é‡ç”¨ï¼Œå› å…¶ä¸èƒ½ä»å½“å‰åº”ç”¨ä¸­å•ç‹¬æŠ½ç¦»å‡ºæ¥</li></ul><p>ä¸‹é¢è¿™äº›è½¯ä»¶è®¾è®¡åŸåˆ™æ˜¯æˆ‘ä»ä¸€äº›ä¹¦ç±å’Œç½‘ç»œä¸­æ”¶é›†è€Œæ¥ï¼Œå¹¶ä¸å®Œæ•´ï¼Œè€Œä¸”ä½ ä¹Ÿéœ€è¦åœ¨ä¸€äº›æœ‰â€œå†²çªçš„åŸåˆ™â€ä¹‹é—´è¿›è¡Œæƒè¡¡å’Œå–èˆã€‚æœ¬æ–‡æˆ–è®¸ä¼šå¯¹ä½ çš„ç¼–ç¨‹ã€ç¨‹åºè®¾è®¡ã€è®¨è®ºæˆ–è¯„å®¡å·¥ä½œæœ‰æ‰€å¸®åŠ©ã€‚</p><h2 id="äºŒã€é€šç”¨è®¾è®¡åŸåˆ™"><a href="#äºŒã€é€šç”¨è®¾è®¡åŸåˆ™" class="headerlink" title="äºŒã€é€šç”¨è®¾è®¡åŸåˆ™"></a>äºŒã€é€šç”¨è®¾è®¡åŸåˆ™</h2><h3 id="1-KISS"><a href="#1-KISS" class="headerlink" title="1. KISS"></a>1. KISS</h3><p>æ‰€è°“<code>KISS</code>åŸåˆ™ï¼Œå³ï¼š<code>Keep It Simple,Stupid</code>ï¼ŒæŒ‡<strong>è®¾è®¡æ—¶è¦åšæŒç®€çº¦åŸåˆ™ï¼Œé¿å…ä¸å¿…è¦çš„å¤æ‚åŒ–ï¼Œå¹¶ä¸”æ˜“äºä¿®æ”¹</strong>ã€‚</p><blockquote><p>Everything should be made as simple as possible, but not simpler. - Albert Einstein</p></blockquote><p>ç®€å•æ¸…æ™°ã€åŠŸèƒ½å¼ºå¤§æ˜¯è½¯ä»¶è®¾è®¡æœ€é‡è¦çš„åŸåˆ™å’Œç›®æ ‡ã€‚ä½†æ˜¯è½¯ä»¶å·¥ç¨‹å¤©ç„¶é”™ç»¼å¤æ‚ï¼Œè€Œâ€œç®€å•â€å´æ²¡æœ‰ä¸€ä¸ªè¡¡é‡æ ‡å‡†ï¼Œåˆ¤æ–­å’Œå®ç°ä¸€ä¸ªä¸œè¥¿æ˜¯ä¸æ˜¯ç®€å•ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥å‚è€ƒã€‚</p><ul><li>è®©åˆ«çš„è½¯ä»¶å·¥ç¨‹å¸ˆä»¥ä¸€ç§æœ€å®¹æ˜“çš„æ–¹å¼ä½¿ç”¨ä½ çš„æ–¹æ¡ˆã€‚</li><li>ç®€å•ä¸æ˜¯èµ°æ·å¾„ï¼Œä¸æ˜¯ä¸ºæ‰‹è¾¹çš„é—®é¢˜æ‰¾ä¸€ä¸ªæœ€å¿«çš„æ–¹æ¡ˆã€‚</li><li>å½“ç³»ç»Ÿå˜å¾—æ›´åºå¤§æ›´å¤æ‚çš„æ—¶å€™ä¾ç„¶èƒ½å¤Ÿè¢«ç†è§£ã€‚</li><li>å¦‚æœç³»ç»Ÿæ— æ³•ä¿æŒç®€å•ï¼Œé‚£ä¹ˆæˆ‘ä»¬èƒ½åšçš„å°±æ˜¯ä¿æŒå„ä¸ªå±€éƒ¨ç®€å•ï¼Œå³ä»»ä½•å•ä¸ªçš„ç±»ã€æ¨¡å—ã€åº”ç”¨çš„è®¾è®¡ç›®æ ‡åŠå·¥ä½œåŸç†éƒ½èƒ½è¢«å¿«é€Ÿç†è§£ã€‚</li></ul><blockquote><p><strong>æˆ‘çš„ç†è§£</strong>ï¼šä¿æŒç®€å•ä½†ä¸èƒ½æ©ç›–è½¯ä»¶ä¸°å¯Œçš„å†…æ¶µã€‚å³<strong>ç®€çº¦è€Œä¸ç®€å•</strong>ï¼ç®€çº¦æ˜¯å¯¹å¤æ‚çš„äº‹ç‰©æŠ½ä¸å‰¥èŒ§ã€å»é™¤ç»†ææœ«èŠ‚æ˜¾éœ²ä¸»è¦é€»è¾‘çš„è¿‡ç¨‹ã€‚å°±åƒå°æ—¶å€™è€å¸ˆæ•™å†™æ–‡ç« ï¼Œè¦æ±‚å°½å¯èƒ½ç”¨æœ´å®çš„è¯­è¨€ï¼Œè¨€ç®€æ„èµ…çš„å†™å‡ºæ¥ï¼Œä½†å´åˆè¦é¿å…è¯­è¨€è¿‡äºè´«ä¹ã€‚è½¯ä»¶çš„â€œæŠ½è±¡â€å’Œå®ƒçš„â€œç›´è§‚æ€§â€ï¼Œå…¶å®æ˜¯ä¸€å¯¹çŸ›ç›¾çš„å…³ç³»ï¼Œè½¯ä»¶è®¾è®¡å°±è¦ä¿è¯è¿™ä¸¤è€…çš„å¹³è¡¡ã€‚ä»£ç æŠ½è±¡è¿‡äºå¤æ‚ä¼šé™·å…¥â€œè¿‡åº¦è®¾è®¡â€ä¸æ˜“ç†è§£çš„å›°å¢ƒï¼›ä¸ºäº†â€œç›´è§‚æ€§â€ç¼ºä¹æŠ½è±¡ï¼Œé•¿æ­¤ä»¥å¾€åˆä¼šå‡ºç°å¤§é‡çš„é‡å¤ã€ä¸æ˜“äºæ‰©å±•å’Œéš¾ç»´æŠ¤çš„å›°å¢ƒã€‚</p></blockquote><h3 id="2-DRY"><a href="#2-DRY" class="headerlink" title="2. DRY"></a>2. DRY</h3><p>æ‰€è°“<code>DRY</code>åŸåˆ™ï¼Œå³ï¼š<code>Don&#39;t Repeat Yourself</code>ï¼Œ<strong>ä¸è¦è®©è‡ªå·±é‡å¤</strong>ã€‚</p><p><strong>é‡å¤ä»£ç æ˜¯è½¯ä»¶ç¨‹åºå˜çƒ‚çš„ä¸‡æ¶ä¹‹é¦–</strong>ã€‚<code>DRY</code>å¹¶ä¸æ˜¯æŒ‡ä½ ä¸èƒ½å¤åˆ¶ä»£ç ï¼Œè€Œæ˜¯ä½ å¤åˆ¶çš„ä»£ç ä¸èƒ½åŒ…å«é‡å¤çš„â€œä¿¡æ¯â€ã€‚å¤åˆ¶çš„ä¸œè¥¿å¹¶ä¸ä»…ä»…æ˜¯å¤åˆ¶äº†ä»£ç ï¼Œè€Œæ˜¯ç”±äºä½ æŠŠåŒä¸€ä¸ªä¿¡æ¯æ•£æ’­åœ¨äº†ä»£ç çš„å„ä¸ªéƒ¨åˆ†å¯¼è‡´äº†æœ‰å¾ˆå¤šç›¸è¿‘çš„ä»£ç ä¹Ÿæ•£æ’­åœ¨å„ä¸ªåœ°æ–¹ã€‚ä»£ç ä¹‹æ‰€ä»¥è¦å†™çš„å¥½ï¼Œä¸è¦é‡å¤æŸäº›â€œä¿¡æ¯â€ï¼Œå› ä¸ºéœ€æ±‚äººå‘˜æ€»æ˜¯è¦æ”¹éœ€æ±‚ï¼Œä¸æ”¹ä»£ç ä½ å°±è¦â€œæ­»â€ï¼Œæ”¹ä»£ç ä½ å°±è¦åŠ ç­ï¼Œæ‰€ä»¥ä¸ºäº†å‡å°‘ä¿®æ”¹ä»£ç çš„ç—›è‹¦ï¼Œæˆ‘ä»¬ä¸èƒ½é‡å¤ä»»ä½•ä¿¡æ¯ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæœ‰ä¸€å¤©éœ€æ±‚äººå‘˜è¯´ï¼Œè¦æŠŠåˆ†éš”ç¬¦ä»åˆ†å·æ”¹æˆé¡¿å·ï¼ä¸€ä¸‹å­å°±è¦æ”¹å¤šä¸ªåœ°æ–¹äº†ã€‚</p><p>æ‰€ä»¥ï¼Œ<strong>å»æ‰é‡å¤çš„ä¿¡æ¯ä¼šè®©ä½ çš„ä»£ç ç»“æ„å‘ç”Ÿæœ¬è´¨çš„å˜åŒ–</strong>ã€‚</p><p>â€œé‡å¤ä»£ç â€æœ‰å¾ˆå¤šå˜ä½“ï¼š</p><ul><li>é­”æ³•æ•°å­—ã€é­”æ³•å­—ç¬¦ä¸²ç­‰</li><li>ç›¸åŒä»£ç å—</li><li>ç›¸ä¼¼çš„ä»£ç é€»è¾‘åŠæ“ä½œ</li></ul><p>å¯¹äºæ¶ˆé™¤é‡å¤çš„ä»£ç æœ‰<strong>äº‹ä¸è¿‡ä¸‰</strong>æ³•åˆ™ã€‚</p><ul><li>ç¬¬ä¸€æ¬¡å…ˆå†™äº†ä¸€æ®µä»£ç ã€‚</li><li>ç¬¬äºŒæ¬¡åœ¨å¦ä¸€ä¸ªåœ°æ–¹å†™äº†ä¸€æ®µç›¸åŒæˆ–ç›¸ä¼¼é€»è¾‘çš„ä»£ç ï¼Œä½ å·²ç»æœ‰æ¶ˆé™¤å’Œæå–é‡å¤ä»£ç çš„å†²åŠ¨äº†ã€‚</li><li>å†æ¬¡åœ¨å¦ä¸€ä¸ªåœ°æ–¹å†™äº†åŒæ ·çš„ä»£ç ï¼Œä½ å·²å¿æ— å¯å¿ï¼Œç°åœ¨å¯ä»¥è€ƒè™‘æŠ½å–å’Œæ¶ˆé™¤é‡å¤ä»£ç äº†ã€‚</li></ul><blockquote><p><strong>æˆ‘çš„ç†è§£</strong>ï¼šè§£å†³é‡å¤çš„æœ€ä½³çš„æ–¹å¼æ˜¯é€šè¿‡åŸ¹å…»è‰¯å¥½çš„ç¼–ç ä¹ æƒ¯æ¥é¿å…é‡å¤ï¼Œé€šè¿‡é‡æ„çš„æ‰‹æ®µæ¥æ¶ˆé™¤é‡å¤ã€‚å‘ç°å’Œè§£å†³é‡å¤å¹¶ä¸å›°éš¾ï¼Œé€šè¿‡æå–æŠ½è±¡ã€æå–æ–¹æ³•ç­‰æªæ–½å°±èƒ½æ¶ˆé™¤é‡å¤ï¼Œä½†å›°éš¾çš„æ˜¯<strong>ç«‹å³è¡ŒåŠ¨</strong>å»è§£å†³é‡å¤ï¼Œä»è€Œä¸æ–­çš„ç£¨ç ºå’Œæå‡è‡ªå·±çš„ç¼–ç¨‹æŠ€è‰ºï¼Œä¸æ–­å°†ç§äººä»£ç å˜æˆå…¬å…±ä»£ç ï¼Œè¿™æ‰æ˜¯è‡ªæˆ‘æå‡çš„è¿‡ç¨‹ã€‚è§£å†³äº†é‡å¤ï¼Œç»è¿‡ä¸€æ®µæ—¶é—´ï¼Œä½ å°±ä¼šå‘ç°ï¼Œä½ å¯¹æ•´ä¸ªç³»ç»Ÿçš„ç†è§£ç¨‹åº¦åœ¨ä¸çŸ¥ä¸è§‰ä¸­æé«˜äº†ä¸å°‘ã€‚</p></blockquote><h3 id="3-Maximize-Cohesionï¼Œ-Minimize-Coupling"><a href="#3-Maximize-Cohesionï¼Œ-Minimize-Coupling" class="headerlink" title="3. Maximize Cohesionï¼Œ Minimize Coupling"></a>3. Maximize Cohesionï¼Œ Minimize Coupling</h3><p>æ‰€è°“<code>Maximize Cohesion,Minimize Coupling</code>åŸåˆ™ï¼Œå³ï¼š<strong>é«˜å†…èšä½è€¦åˆ</strong>ã€‚è¿™æ˜¯åˆ¤æ–­è®¾è®¡å¥½åçš„æ ‡å‡†ï¼Œä¸»è¦æ˜¯çœ‹<strong>æ¨¡å—å†…çš„å†…èšæ€§æ˜¯å¦é«˜ï¼Œæ¨¡å—é—´çš„è€¦åˆåº¦æ˜¯å¦ä½ã€‚</strong></p><ul><li><strong>è€¦åˆæ€§</strong>ï¼šä¹Ÿç§°å—é—´è”ç³»ã€‚æŒ‡è½¯ä»¶ç³»ç»Ÿç»“æ„ä¸­å„æ¨¡å—é—´ç›¸äº’è”ç³»ç´§å¯†ç¨‹åº¦çš„ä¸€ç§åº¦é‡ã€‚æ¨¡å—ä¹‹é—´è”ç³»è¶Šç´§å¯†ï¼Œå…¶è€¦åˆæ€§å°±è¶Šå¼ºï¼Œæ¨¡å—çš„ç‹¬ç«‹æ€§åˆ™è¶Šå·®ã€‚æ¨¡å—é—´è€¦åˆé«˜ä½å–å†³äºæ¨¡å—é—´æ¥å£çš„å¤æ‚æ€§ã€è°ƒç”¨çš„æ–¹å¼åŠä¼ é€’çš„ä¿¡æ¯ã€‚è€¦åˆæ˜¯è½¯ä»¶ç»“æ„ä¸­å„æ¨¡å—ä¹‹é—´ç›¸äº’è¿æ¥çš„ä¸€ç§åº¦é‡ï¼Œè€¦åˆå¼ºå¼±å–å†³äºæ¨¡å—é—´æ¥å£çš„å¤æ‚ç¨‹åº¦ã€è¿›å…¥æˆ–è®¿é—®ä¸€ä¸ªæ¨¡å—çš„ç‚¹ä»¥åŠé€šè¿‡æ¥å£çš„æ•°æ®ã€‚</li><li><strong>å†…èšæ€§</strong>ï¼šåˆç§°å—å†…è”ç³»ã€‚æŒ‡æ¨¡å—çš„åŠŸèƒ½å¼ºåº¦çš„åº¦é‡ï¼Œå³ä¸€ä¸ªæ¨¡å—å†…éƒ¨å„ä¸ªå…ƒç´ å½¼æ­¤ç»“åˆçš„ç´§å¯†ç¨‹åº¦çš„åº¦é‡ã€‚è‹¥ä¸€ä¸ªæ¨¡å—å†…å„å…ƒç´ ï¼ˆè¯­åä¹‹é—´ã€ç¨‹åºæ®µä¹‹é—´ï¼‰è”ç³»çš„è¶Šç´§å¯†ï¼Œåˆ™å®ƒçš„å†…èšæ€§å°±è¶Šé«˜ã€‚å†…èšæ˜¯ä»åŠŸèƒ½è§’åº¦æ¥åº¦é‡æ¨¡å—å†…çš„è”ç³»ï¼Œä¸€ä¸ªå¥½çš„å†…èšæ¨¡å—åº”å½“æ°å¥½åšä¸€ä»¶äº‹ã€‚å®ƒæè¿°çš„æ˜¯æ¨¡å—å†…çš„åŠŸèƒ½è”ç³»ã€‚</li></ul><p>å†…èšå’Œè€¦åˆæ˜¯å¯†åˆ‡ç›¸å…³çš„ï¼ŒåŒå…¶ä»–æ¨¡å—å­˜åœ¨é«˜è€¦åˆçš„æ¨¡å—æ„å‘³ç€ä½å†…èšï¼Œè€Œé«˜å†…èšçš„æ¨¡å—æ„å‘³ç€è¯¥æ¨¡å—åŒå…¶ä»–æ¨¡å—ä¹‹é—´æ˜¯ä½è€¦åˆã€‚åœ¨è¿›è¡Œè½¯ä»¶è®¾è®¡æ—¶ï¼Œåº”åŠ›äº‰åšåˆ°é«˜å†…èšï¼Œä½è€¦åˆã€‚</p><p>Javaä¸­å®ç°é«˜å†…èšä½è€¦åˆçš„å¸¸ç”¨æ–¹å¼ï¼š</p><ul><li>å°‘ä½¿ç”¨ç±»çš„ç»§æ‰¿ï¼Œå¤šç”¨æ¥å£éšè—å®ç°çš„ç»†èŠ‚ã€‚</li><li>æ¨¡å—çš„åŠŸèƒ½åŒ–åˆ†å°½å¯èƒ½çš„å•ä¸€ï¼Œé“ç†ä¹Ÿå¾ˆç®€å•ï¼ŒåŠŸèƒ½å•ä¸€çš„æ¨¡å—ä¾›å…¶å®ƒæ¨¡å—è°ƒç”¨çš„æœºä¼šå°±å°‘ã€‚</li><li>éµå¾ªä¸€ä¸ªå®šä¹‰åªåœ¨ä¸€ä¸ªåœ°æ–¹å‡ºç°ã€‚</li><li>å°‘ä½¿ç”¨å…¨å±€å˜é‡ã€‚</li><li>ç±»å±æ€§å’Œæ–¹æ³•çš„å£°æ˜å°‘ç”¨<code>public</code>ï¼Œå¤šç”¨<code>private</code>å…³é”®å­—ï¼Œ</li><li>å¤šç”¨è®¾è®¡æ¨¡å¼ï¼Œæ¯”å¦‚é‡‡ç”¨<code>MVC</code>çš„è®¾è®¡æ¨¡å¼å°±å¯ä»¥é™ä½ç•Œé¢ä¸ä¸šåŠ¡é€»è¾‘çš„è€¦åˆåº¦ã€‚</li><li>å°½é‡ä¸ç”¨â€œç¡¬ç¼–ç â€çš„æ–¹å¼å†™ç¨‹åºã€‚</li><li>æœ€åå½“ç„¶å°±æ˜¯é¿å…ç›´æ¥æ“ä½œæˆ–è°ƒç”¨å…¶å®ƒæ¨¡å—æˆ–ç±»ï¼ˆå†…å®¹è€¦åˆï¼‰ã€‚</li></ul><h3 id="4-SOC"><a href="#4-SOC" class="headerlink" title="4. SOC"></a>4. SOC</h3><p>æ‰€è°“<code>SOC</code>åŸåˆ™ï¼Œå³ï¼š<strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>ï¼ˆ<code>Separation of Concerns</code>ï¼‰ã€‚<strong>ä¸åŒé¢†åŸŸçš„åŠŸèƒ½ï¼Œåº”è¯¥ç”±ä¸åŒçš„ä»£ç å’Œæœ€å°é‡è¿­çš„æ¨¡å—ç»„æˆã€‚</strong>å…³æ³¨ç‚¹åˆ†ç¦»æ˜¯å¤„ç†å¤æ‚æ€§çš„ä¸€ä¸ªåŸåˆ™ã€‚ç”±äºå…³æ³¨ç‚¹æ··æ‚åœ¨ä¸€èµ·ä¼šå¯¼è‡´è½¯ä»¶ç¨‹åºå¤æ‚æ€§å¤§å¤§å¢åŠ ï¼Œæ‰€ä»¥èƒ½å¤ŸæŠŠä¸åŒçš„å…³æ³¨ç‚¹åˆ†ç¦»å¼€æ¥ï¼Œåˆ†åˆ«å¤„ç†å°±æ˜¯å¤„ç†å¤æ‚æ€§çš„ä¸€ä¸ªåŸåˆ™ï¼Œä¸€ç§æ–¹æ³•ã€‚å…³æ³¨ç‚¹åˆ†ç¦»åŸåˆ™ä¸ä»…ä½“ç°åœ¨è½¯ä»¶ç¨‹åºè®¾è®¡ç­‰è®¾è®¡æ–¹æ³•ä¸­ï¼ŒåŒæ—¶ä¹Ÿä½“ç°åœ¨æ¶æ„è®¾è®¡ã€é—®é¢˜æ±‚è§£ã€è½¯ä»¶å¼€å‘è¿‡ç¨‹ã€è½¯ä»¶é¡¹ç›®ç®¡ç†ä»¥åŠè½¯ä»¶å¼€å‘æ–¹æ³•å­¦ç­‰è¯¸å¤šæ–¹é¢ã€‚</p><p><code>MVC</code>å°±æ˜¯å…³æ³¨ç‚¹åˆ†ç¦»çš„ä¸€ä¸ªä½“ç°ï¼ŒæŠŠä¸šåŠ¡é€»è¾‘ã€æ•°æ®ã€ç•Œé¢åˆ†ç¦»ï¼Œè¿™ä¹Ÿæ˜¯ç»„ç»‡ä»£ç ç»“æ„çš„ä¸€ä¸ªå½¢å¼ã€‚<code>MVC</code>çš„åŸºæœ¬ç»“æ„ï¼š</p><ul><li><code>Model</code>å±‚è¡¨ç¤ºåº”ç”¨ç¨‹åºçš„æ•°æ®æ ¸å¿ƒï¼Œé€šå¸¸è´Ÿè´£åœ¨æ•°æ®åº“ä¸­å­˜å–æ•°æ®ã€‚</li><li><code>View</code>æ˜¯åº”ç”¨ç¨‹åºçš„æ˜¾ç¤ºå±‚ï¼Œé€šå¸¸æ˜¯ä¾æ®æ¨¡å‹çš„æ•°æ®è€Œå»ºç«‹ã€‚</li><li><code>Controller</code>æ˜¯ç”¨æ¥æ§åˆ¶å’Œå¤„ç†è¾“å…¥è¾“å‡ºçš„ï¼Œæ˜¯å¤„ç†ç”¨æˆ·äº¤äº’çš„éƒ¨åˆ†ï¼Œä¹Ÿè´Ÿè´£å‘æ¨¡å‹ï¼ˆ<code>Model</code>å±‚ï¼‰å‘é€æ•°æ®ã€‚</li></ul><p><code>MVC</code>çš„è¿™ä¸ªè®¾è®¡å„ä¸ªå…³æ³¨ç‚¹æ˜¯åˆ†å¼€çš„ï¼Œè¿™æ ·æœ‰åŠ©äºæˆ‘ä»¬ç®¡ç†å’Œå¼€å‘å¤æ‚çš„åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æŸä¸ªæ—¶é—´ç‚¹åªé›†ä¸­ç²¾åŠ›åœ¨å…¶ä¸­çš„æŸä¸€ä¸ªå…³æ³¨ç‚¹ï¼Œè€Œä¸æ˜¯æ‰€æœ‰çš„éƒ¨åˆ†ã€‚</p><blockquote><p>å¥½çš„æ¶æ„å¿…é¡»ä½¿æ¯ä¸ªå…³æ³¨ç‚¹ç›¸äº’åˆ†ç¦»ï¼Œä¹Ÿå°±æ˜¯è¯´ç³»ç»Ÿä¸­çš„ä¸€ä¸ªéƒ¨åˆ†å‘ç”Ÿäº†å˜åŒ–ï¼Œä¸ä¼šå½±å“å…¶ä»–éƒ¨åˆ†ã€‚å³ä½¿éœ€è¦æ”¹å˜ï¼Œä¹Ÿèƒ½å¤Ÿæ¸…æ™°åœ°è¯†åˆ«å‡ºé‚£äº›éƒ¨åˆ†éœ€è¦æ”¹å˜ã€‚å¦‚æœéœ€è¦æ‰©å±•æ¶æ„ï¼Œå½±å“å°†ä¼šæœ€å°åŒ–ï¼Œå·²ç»å¯ä»¥å·¥ä½œçš„æ¯ä¸ªéƒ¨åˆ†éƒ½å°†ç»§ç»­å·¥ä½œã€‚â€”â€”Ivar Jacobson(ã€ŠAOSDä¸­æ–‡ç‰ˆã€‹)</p></blockquote><h4 id="åˆ†ç¦»æ–¹å¼"><a href="#åˆ†ç¦»æ–¹å¼" class="headerlink" title="åˆ†ç¦»æ–¹å¼"></a>åˆ†ç¦»æ–¹å¼</h4><p>ä¸‹é¢å°†ä»‹ç»ä¸€äº›åˆ†å±‚çš„æ€æƒ³å’Œæ–¹å¼:</p><ul><li><strong>çºµå‘åˆ†ç¦»</strong>: å¦‚å¸¸è§çš„ä¸‰å±‚æ¶æ„ï¼ˆé€»è¾‘æ§åˆ¶å±‚ã€ä¸šåŠ¡å¤„ç†å±‚å’Œæ•°æ®æŒä¹…åŒ–å±‚ï¼‰ã€‚</li><li><strong>æ¨ªå‘åˆ†ç¦»</strong>: å¦‚æŠŠæˆ‘ä»¬çš„è½¯ä»¶æ‹†åˆ†æˆæ¨¡å—æˆ–å­ç³»ç»Ÿã€‚ä»å·¦åˆ°å³æ˜¯æ¨¡å—1ã€æ¨¡å—2ã€æ¨¡å—3ï¼Œè¿™æ˜¯ä¸€ç§æ°´å¹³æ–¹å‘çš„åˆ‡å‰²ã€‚è¿™è·Ÿçºµå‘çš„åˆ†ç¦»æ˜¯ä¸¤ä¸ªä¸åŒçš„æ–¹å‘ï¼Œæ¨ªå‘åˆ†ç¦»å¤§å¤šæ˜¯æ¨¡å—åŒ–çš„è¿‡ç¨‹ã€‚</li><li><strong>åˆ‡é¢åˆ†ç¦»</strong>: æœ‰äº›å†…å®¹æ˜¯å¤šä¸ªå±‚ä¹‹é—´éƒ½éœ€è¦çš„ï¼Œæ¯”å¦‚æ—¥å¿—ï¼ˆ<code>log</code>ï¼‰ï¼Œåœ¨ä½ çš„ç³»ç»Ÿé‡Œé¢ï¼Œç•Œé¢å±‚ã€é€»è¾‘å±‚ã€æ•°æ®è®¿é—®å±‚å¯èƒ½éƒ½éœ€è¦å†™æ—¥å¿—ï¼Œè¿™ç§è·¨åˆ°å¤šå±‚åŒæ ·é€»è¾‘å°±å¯ä»¥è€ƒè™‘åˆ‡é¢åˆ†ç¦»ã€‚</li><li><strong>ä¾èµ–æ–¹å‘åˆ†ç¦»</strong>: æŒ‰ä¾èµ–æ–¹å‘è€ƒè™‘ï¼Œå†³å®šæŸä¸ªç±»åº”è¯¥æ”¾åœ¨å“ªä¸ªå±‚æ¬¡é‡Œé¢ï¼Œæˆ–è€…è€ƒè™‘å°†æŸä¸€å±‚åˆ‡å‰²æˆå¤šå±‚ã€‚</li><li><strong>å…³æ³¨æ•°æ®åˆ†ç¦»</strong>: åœ¨ç»„ç»‡æ•°æ®æ—¶ï¼Œåº”è¯¥å°½é‡è€ƒè™‘æ•°æ®æœ¬èº«çš„å›ºæœ‰å±æ€§ï¼Œå¦‚æœä¸æ˜¯å®ƒä»¬çš„å›ºæœ‰å±æ€§ï¼Œé‚£ä¹ˆåº”è¯¥åˆ†ç¦»å‡ºæ¥ã€‚æ¯”å¦‚äº§å“çš„ç±»å°±ä¸åº”è¯¥å…³è”<code>customer</code>ç±»ï¼Œåº”è¯¥æ˜¯ç”¨è®¢å•ç±»æ¥æŠŠä»–ä»¬è”ç³»åœ¨ä¸€èµ·ã€‚</li><li><strong>å…³æ³¨è¡Œä¸ºåˆ†ç¦»</strong>: è¡Œä¸ºä¹Ÿåº”è¯¥æ˜¯äº‹ç‰©æˆ–å¯¹è±¡çš„å›ºæœ‰çš„æœ¬èº«çš„è¡Œä¸ºï¼Œæ˜æ˜¾åç¦»åŸæ¥è¡Œä¸ºçš„ï¼Œåº”è¯¥è€ƒè™‘æˆå¦å¤–çš„å…³æ³¨ç‚¹å„¿åˆ†ç¦»å¼€ã€‚æ¯”å¦‚æœ‰ä¸€ä¸ªå‡½æ•°å«åš<code>CreateNewCustomer()</code>ï¼Œé‚£ä¹ˆ<code>CreateNewCustomer()</code>çš„è¡Œä¸ºå°±åº”è¯¥é™å®šåœ¨åˆ›å»ºä¸€ä¸ªæ–°å®¢æˆ·ä¸Šé¢ï¼Œç»™æ–°å®¢æˆ·è‡ªåŠ¨å‘ä¼˜æƒ åˆ¸çš„åŠ¨ä½œå°±ä¸èƒ½æ”¾åˆ°è¿™ä¸ªå‡½æ•°é‡Œé¢ã€‚</li><li><strong>æ‰©å±•åˆ†ç¦»</strong>: å¦‚æœåŸºäºæŸç§è®¾è®¡ï¼ŒåŸå…ˆä¸å…·æœ‰æŸäº›è¡Œä¸ºéœ€è¦å¢åŠ ï¼Œå¯ä»¥è€ƒè™‘é€šè¿‡æ‰©å±•æˆ–æ’ä»¶çš„å½¢å¼æ¥å®Œæˆï¼Œå°†è¿™äº›åŠŸèƒ½æ”¾å…¥åˆ°æ’ä»¶æˆ–æ‰©å±•ä¸­ã€‚</li><li><strong>åè½¬åˆ†ç¦»</strong>: å¾ˆå¤šä¾èµ–æ³¨å…¥çš„æ¡†æ¶ï¼Œå¦‚<code>Spring</code>ã€<code>Guice</code>ç­‰ç­‰ï¼Œè¿™äº›å¸®åŠ©æˆ‘ä»¬åšä¾èµ–åè½¬ï¼Œä»è€Œå€’ç½®ä¾èµ–å…³ç³»ã€‚</li></ul><h3 id="5-YAGNI"><a href="#5-YAGNI" class="headerlink" title="5. YAGNI"></a>5. YAGNI</h3><p>æ‰€è°“<code>YAGNI</code>åŸåˆ™ï¼Œå³ï¼š<code>You Ainâ€™t Gonna Need It</code>ï¼Œ<strong>ä½ ä¸éœ€è¦å®ƒ</strong>ã€‚å®ƒæ˜¯ä¸€ç§æé™ç¼–ç¨‹ï¼ˆXPï¼‰å®è·µï¼Œè¡¨ç¤ºç¨‹åºå‘˜ä¸åº”ä¸ºç›®å‰è¿˜ä¸éœ€è¦çš„åŠŸèƒ½ç¼–å†™ä»£ç ã€‚<code>YAGNI</code>å¾ˆåƒ<code>KISS</code>åŸåˆ™ï¼Œå› ä¸ºå®ƒä¹Ÿæ˜¯è‡´åŠ›äºæ„å»ºç®€å•çš„æ–¹æ¡ˆã€‚ç„¶è€Œï¼Œ<code>KISS</code>æ˜¯é€šè¿‡å°½å¯èƒ½å®¹æ˜“çš„å®ŒæˆæŸä»¶äº‹æƒ…æ¥å®ç°ç²¾ç®€æ–¹æ¡ˆï¼›ä½†<code>YAGNI</code>æ˜¯é€šè¿‡æ ¹æœ¬å°±ä¸å®ç°å®ƒæ¥è¾¾åˆ°ç²¾ç®€ã€‚<code>YAGNI</code>çš„è§‚ç‚¹æ˜¯ä½ åº”è¯¥<strong>ä¸ºäº†çœ¼å‰çš„éœ€æ±‚åšè®¾è®¡è€Œä¸æ˜¯æœªæ¥</strong>ã€‚</p><blockquote><p>åªåœ¨çœŸæ­£éœ€è¦æŸäº›åŠŸèƒ½çš„æ—¶å€™æ‰å»å®ç°å®ƒï¼Œè€Œä¸æ˜¯ä»…ä»…å› ä¸ºä½ é¢„è§åˆ°å®ƒå°†å‡ºç°ã€‚- XPçš„è”åˆåˆ›å§‹äººRon Jeffries</p></blockquote><p>å³ä½¿ä½ éå¸¸ç¡®ä¿¡å°†æ¥ä½ éœ€è¦æŸä¸ªç‰¹æ€§ï¼Œä¹Ÿä¸è¦ç°åœ¨å°±å»å®ç°å®ƒã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œä½ ä¼šå‘ç°æˆ–è®¸æœ€ç»ˆä½ ä¸éœ€è¦å®ƒäº†ï¼Œæˆ–è€…æ˜¯ä½ çœŸæ­£æ‰€éœ€çš„ç‰¹æ€§ä¸ä½ ä¹‹å‰é¢„è®¡çš„æœ‰å¾ˆå¤§çš„å‡ºå…¥ã€‚éµå¾ª YAGNI å®è·µæœ‰ä¸¤ä¸ªä¸»è¦åŸå› ï¼š</p><ul><li>ä½ èŠ‚çº¦äº†æ—¶é—´ï¼Œå› ä¸ºä½ é¿å…äº†ç¼–å†™æœ€ç»ˆè¯æ˜ä¸å¿…è¦çš„ä»£ç ã€‚</li><li>ä½ çš„ä»£ç è´¨é‡æ›´é«˜äº†ï¼Œå› ä¸ºä½ ä½¿ä»£ç ä¸å¿…ä¸ºä½ çš„â€œæ¨æµ‹â€æ‰€æ±¡æŸ“ï¼Œè€Œè¿™äº›â€œæ¨æµ‹â€æœ€ç»ˆå¯èƒ½æˆ–å¤šæˆ–å°‘æœ‰äº›é”™è¯¯ï¼Œä½†æ­¤æ—¶è¿™äº›é”™è¯¯å·²ç‰¢ç‰¢åœ°ä¾é™„åœ¨ä½ çš„ä»£ç ä¸­äº†ã€‚</li></ul><blockquote><p><strong>æˆ‘çš„ç†è§£</strong>ï¼šYAGNI åŸåˆ™ï¼Œæœ¬è´¨ä¸Šæ˜¯å‘Šè¯«æˆ‘ä»¬<strong>å†™ä»£ç ä¸è¦ç”»è›‡æ·»è¶³ï¼Œå¦åˆ™å°±ä¼šå¼„å·§æˆæ‹™äº†</strong>ã€‚ç¼–å†™ä¸šåŠ¡ä»£ç æ—¶ï¼Œä¸è¦å»å‡æƒ³ä¸€äº›éœ€æ±‚æˆ–è€…åœºæ™¯ï¼Œå› ä¸ºå¤§å¤šæ•°ä½ æ‰€è®¾æƒ³çš„åœºæ™¯éƒ½ä¸ä¼šå‘ç”Ÿï¼Œè€Œä½ æ‰€å¤šå†™çš„é‚£äº›ä»£ç ä¹Ÿå°†ä¼šé•¿æœŸæ»ç•™åœ¨ä½ çš„ç³»ç»Ÿä¸­ï¼Œæ”¶æ•ˆç”šå¾®ï¼Œä½†å´è®©ä½ å’Œå›¢é˜ŸèŠ±è´¹äº†æ›´å¤šçš„æ—¶é—´å’Œç²¾åŠ›å»ä¹¦å†™å’Œç»´æŠ¤ï¼Œæ›´å¯æ€•çš„æ˜¯å¯èƒ½ä¼šå¯¹å°†æ¥æ–°çš„ä»£ç ç»´æŠ¤äººé€ æˆå›°æƒ‘ã€‚å¦å¤–å¯¹äºæ²¡æœ‰è¢«ä½¿ç”¨åˆ°çš„ä»£ç ï¼Œæˆ‘è®¤ä¸ºä¹Ÿéƒ½åº”è¯¥ç«‹å³åˆ é™¤ï¼Œä»è€Œä¿æŒç³»ç»Ÿçš„ç²¾ç®€ï¼Œå¦‚æœå°†æ¥éœ€è¦æ—¶å†å»ä¹¦å†™æˆ–æ¢å¤ï¼Œè€Œä¸”é‚£æ—¶ä¾¯å†™å‡ºçš„ä»£ç ä¹Ÿç»å¯¹æ¯”ä¹‹å‰çš„æ›´ä¸ºå¥‘åˆã€‚</p></blockquote><h3 id="6-Boy-Scout-Rule"><a href="#6-Boy-Scout-Rule" class="headerlink" title="6. Boy-Scout Rule"></a>6. Boy-Scout Rule</h3><p><code>Boy-Scout Rule</code>ï¼Œè¯‘ä¸ºï¼š<strong>ç«¥å­å†›è§„åˆ™</strong>ã€‚ç¾å›½ç«¥å­å†›æœ‰ä¸€ä¸ªç®€å•çš„è§„åˆ™ï¼šâ€œè®©è¥åœ°æ¯”ä½ åˆšæ¥æ—¶æ›´å¹²å‡€(<code>Always leave the campground cleaner than you found it</code>)â€ã€‚å¦‚æœçœ‹åˆ°åœ°ä¸Šæœ‰åƒåœ¾ï¼Œä¸ç®¡æ˜¯è°æ‰”çš„ï¼Œéƒ½è¦æ¸…ç†ã€‚è¿™æ ·ä½ å°±æœ‰æ„åœ°ä¸ºä¸‹ä¸€æ‰¹æ¥å®¿è¥çš„äººæ”¹å–„äº†ç¯å¢ƒã€‚</p><p>ç«¥å­å†›è§„åˆ™å‘Šè¯‰æˆ‘ä»¬åœ¨å¯¹ç°æœ‰ä»£ç åº“è¿›è¡Œæ›´æ”¹æ—¶ï¼Œä»£ç è´¨é‡å¾€å¾€ä¼šé™ä½ï¼Œä»è€Œç§¯ç´¯æŠ€æœ¯å€ºåŠ¡ã€‚æ‰€ä»¥éœ€è¦<strong>å§‹ç»ˆä¿æŒä»£ç æ•´æ´</strong>ã€‚ä¸ç®¡åŸä½œè€…æ˜¯è°ï¼Œå¦‚æœæˆ‘ä»¬åŠªåŠ›å»æ”¹è¿›ä»£ç æ¨¡å—ï¼Œä¸ç®¡æ˜¯å¤šä¹ˆå°çš„æ”¹è¿›ï¼Œæˆ‘ä»¬çš„è½¯ä»¶ç³»ç»Ÿå°±å†ä¹Ÿä¸ä¼šæŒç»­å˜åäº†ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œç³»ç»Ÿåœ¨å‘å±•çš„åŒæ—¶ä¼šé€æ¸å˜å¾—æ›´å¥½ã€‚æˆ‘ä»¬ä¹Ÿä¼šçœ‹åˆ°å›¢é˜Ÿä»¬å…³å¿ƒæ•´ä½“çš„ç³»ç»Ÿï¼Œè€Œä¸æ˜¯å„è‡ªåªå…³å¿ƒè‡ªå·±è´Ÿè´£çš„ä¸€å°éƒ¨åˆ†ã€‚è€Œä¸”å›¢é˜Ÿæˆå‘˜è¦äº’åŠ©ï¼Œäº’ç›¸æ¸…ç†ä»£ç ï¼Œä»–ä»¬éµä»ç«¥å­å†›è§„åˆ™ï¼Œå› ä¸ºé‚£å¯¹æ¯ä¸ªäººéƒ½å¾ˆå¥½ï¼Œè€Œä¸ä»…ä»…æ˜¯å¯¹è‡ªå·±å¥½ã€‚</p><p>å…³äºç«¥å­å†›è§„åˆ™ä¸­æ‰€æå€¡çš„<strong>å¯¹ä»£ç åå‘³é“çš„å°½æ—©ä¿®å¤</strong>ï¼Œæˆ‘ä¹Ÿæƒ³èµ·æ¥äº†æˆ‘ä»¬æ‰€ç†ŸçŸ¥çš„â€œ<strong>ç ´çª—æ•ˆåº”</strong>â€å’Œâ€œ<strong>è®³ç–¾å¿ŒåŒ»</strong>â€çš„å…¸æ•…ï¼š</p><h4 id="ç ´çª—æ•ˆåº”"><a href="#ç ´çª—æ•ˆåº”" class="headerlink" title="ç ´çª—æ•ˆåº”"></a>ç ´çª—æ•ˆåº”</h4><blockquote><p>å¦‚æœæœ‰äººæ‰“åäº†ä¸€å¹¢å»ºç­‘ç‰©çš„çª—æˆ·ç»ç’ƒï¼Œè€Œè¿™æ‰‡çª—æˆ·åˆå¾—ä¸åˆ°åŠæ—¶çš„ç»´ä¿®ï¼Œåˆ«äººå°±å¯èƒ½å—åˆ°æŸäº›ç¤ºèŒƒæ€§çš„çºµå®¹å»æ‰“çƒ‚æ›´å¤šçš„çª—æˆ·ã€‚ä¹…è€Œä¹…ä¹‹ï¼Œè¿™äº›ç ´çª—æˆ·å°±ç»™äººé€ æˆä¸€ç§æ— åºçš„æ„Ÿè§‰ï¼Œç»“æœåœ¨è¿™ç§å…¬ä¼—éº»æœ¨ä¸ä»çš„æ°›å›´ä¸­ï¼ŒçŠ¯ç½ªå°±ä¼šæ»‹ç”Ÿã€çŒ–ç—ã€‚â€”â€”æ”¿æ²»å­¦å®¶å¨å°”é€Šå’ŒçŠ¯ç½ªå­¦å®¶å‡¯ç³æå‡ºçš„â€œç ´çª—æ•ˆåº”â€ç†è®º</p></blockquote><ul><li>â€œç¯å¢ƒæ—©å°±è„äº†ï¼Œæˆ‘æ‰”çš„è¿™ç‚¹å„¿åƒåœ¾æ ¹æœ¬èµ·ä¸åˆ°å…³é”®æ€§ä½œç”¨ã€‚â€</li><li>â€œè¿™ä¸ªä»£ç ä»¥å‰çš„å…¶ä»–äººä¹Ÿéƒ½æ˜¯è¿™æ ·å†™çš„ã€‚â€</li><li>â€œåæ­£ä¹Ÿä¸æ˜¯åªæœ‰æˆ‘æ‰è¿™ä¹ˆå†™ä»£ç çš„ã€‚â€</li></ul><p>ä¸å°‘äººä¼šåƒä¸Šé¢è¿™æ ·è¾©è§£è‡ªå·±çš„è¿‡é”™ã€‚å…¶å®ï¼Œè¿™äº›è¯´æ³•æ ¹æœ¬ç«™ä¸ä½è„šï¼Œé”™äº†å°±æ˜¯é”™äº†ï¼Œå½±å“çš„å¤§å°å¹¶ä¸èƒ½æ”¹å˜è¡Œä¸ºé”™è¯¯çš„æœ¬è´¨ï¼Œåˆ«äººçš„é”™è¯¯æ›´ä¸ä¼šæ˜¯è¯æ˜ä½ æ— é”™çš„ç†ç”±ã€‚ä»»ä½•ä¸€ç§ä¸è‰¯ç°è±¡çš„å­˜åœ¨ï¼Œéƒ½æœ‰å¯èƒ½ä¼ é€’ä¸€ç§é”™è¯¯ä¿¡æ¯ã€‚è¿›è€Œå¯¼è‡´æ›´åçš„åæœï¼Œæ­£æ‰€è°“â€œ<strong>åƒé‡Œä¹‹å ¤ï¼Œæºƒäºèšç©´</strong>â€ã€<strong>å‹¿ä»¥å–„å°è€Œä¸ä¸ºï¼Œå‹¿ä»¥æ¶å°è€Œä¸ºä¹‹</strong>ã€‚</p><h4 id="è®³ç–¾å¿ŒåŒ»çš„å…¸æ•…"><a href="#è®³ç–¾å¿ŒåŒ»çš„å…¸æ•…" class="headerlink" title="è®³ç–¾å¿ŒåŒ»çš„å…¸æ•…"></a>è®³ç–¾å¿ŒåŒ»çš„å…¸æ•…</h4><p><img src="https://statics.sh1a.qingstor.com/2018/11/24/hjjy.jpeg" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/11/24/hjjy.jpeg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="æ‰é¹Šä¸‰è¿"></p><p>ã€Šæ‰é¹Šè§è”¡æ¡“å…¬ã€‹çš„æ•…äº‹ï¼Œæˆ‘ä»¬ä»å°å°±å­¦ä¹ äº†ï¼Œå‘Šè¯‰æˆ‘ä»¬ä¸èƒ½ç›²ç›®ç›¸ä¿¡è‡ªå·±ï¼Œä¸èƒ½è®³ç–¾å¿ŒåŒ»ã€‚ä½†æƒ³æƒ³æˆ‘ä»¬è‡ªå·±ä»£ç çš„åå‘³é“å’Œbugï¼Œä¹Ÿæ˜¯å¦‚å‡ºä¸€è¾™ã€‚</p><p>ä»£ç åå‘³é“æˆ–è€…ç³Ÿç³•çš„ç¨‹åºä»£ç å°±åƒéšå½¢çš„â€œç–¾ç—…â€ä¸€æ ·æ½œä¼åœ¨é¡¹ç›®ä¸­ï¼Œä¹Ÿå› æ­¤å½¢æˆäº†æŠ€æœ¯å€ºåŠ¡ã€‚å¦‚æœè¿™äº›â€œç–¾ç—…â€åœ¨é¡¹ç›®åˆæœŸä¸å¼•èµ·æ³¨å…³æ³¨ã€ä¸æŠŠç–¾ç—…æ‰¼æ€åœ¨èŒèŠ½ä¹‹ä¸­ï¼Œé‚£ä¹ˆåæœŸä¿®å¤å®ƒçš„ä»£ä»·ä¹Ÿå°±è¶Šå¤§ï¼Œä¹Ÿå¿…ç„¶ä¼šä½¿å¾—é¡¹ç›®çš„è½¯ä»¶ç¨‹åºè¶Šæ¥è¶Šéš¾ä»¥ç»´æŠ¤ï¼Œè¿™ä¸ªé¡¹ç›®ä¹Ÿæœ€ç»ˆä¼šåƒè”¡æ¡“å…¬ä¸€æ ·æ— è¯å¯æ²»ã€â€œæ— å¥ˆä½•ä¹Ÿâ€ã€‚</p><blockquote><p>æ‰€ä»¥ï¼Œè¯·è®°ä½ç«¥å­å†›è§„åˆ™å¯¹æˆ‘ä»¬çš„å¯ç¤ºï¼š<strong>å§‹ç»ˆä¿æŒä»£ç æ•´æ´ï¼Œå‹¿ä»¥å–„å°è€Œä¸ä¸ºï¼Œå‹¿ä»¥æ¶å°è€Œä¸ºä¹‹ï¼Œæœ‰ç—…æ—©æ²»</strong>ã€‚</p></blockquote><h3 id="å…¶ä»–åŸåˆ™ï¼š"><a href="#å…¶ä»–åŸåˆ™ï¼š" class="headerlink" title="å…¶ä»–åŸåˆ™ï¼š"></a>å…¶ä»–åŸåˆ™ï¼š</h3><ul><li><strong>é¿å…è¿‡æ—©ä¼˜åŒ–</strong>ï¼ˆ<code>Avoid Premature Optimization</code>ï¼‰: é™¤éä½ çš„ä»£ç è¿è¡Œçš„æ¯”ä½ æƒ³åƒä¸­çš„è¦æ…¢ï¼Œå¦åˆ™åˆ«å»ä¼˜åŒ–ã€‚å‡å¦‚ä½ çœŸçš„æƒ³ä¼˜åŒ–ï¼Œå°±å¿…é¡»å…ˆæƒ³å¥½å¦‚ä½•ç”¨æ•°æ®è¯æ˜ï¼Œå®ƒçš„é€Ÿåº¦å˜å¿«äº†ã€‚â€œ<strong>è¿‡æ—©çš„ä¼˜åŒ–æ˜¯ä¸€åˆ‡ç½ªæ¶ä¹‹æº</strong>ã€‚â€â€”â€”Donald Knuth</li><li><strong>æœ€å°æƒŠè®¶åŸåˆ™</strong>(<code>Principle of least astonishment</code>): ä»£ç åº”è¯¥å°½å¯èƒ½å‡å°‘è®©è¯»è€…æƒŠå–œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ ç¼–å†™çš„ä»£ç åªéœ€æŒ‰ç…§é¡¹ç›®çš„è¦æ±‚æ¥ç¼–å†™ã€‚å…¶ä»–åä¸½çš„åŠŸèƒ½å°±ä¸å¿…äº†ï¼Œä»¥å…å¼„å·§æˆæ‹™ã€‚</li><li><strong>ä»£ç é‡ç”¨åŸåˆ™</strong>ï¼ˆ<code>Code Reuse is Good</code>ï¼‰: é‡ç”¨ä»£ç èƒ½æé«˜ä»£ç çš„å¯è¯»æ€§ï¼Œç¼©çŸ­å¼€å‘æ—¶é—´ã€‚</li><li><strong>åˆ«è®©æˆ‘æ€è€ƒ</strong>(<code>Donâ€™t Make Me Think</code>): æ‰€ç¼–å†™çš„ä»£ç ä¸€å®šè¦æ˜“äºè¯»æ˜“äºç†è§£ï¼Œè¿™æ ·åˆ«äººæ‰ä¼šæ¬£èµï¼Œä¹Ÿèƒ½å¤Ÿç»™ä½ æå‡ºåˆç†åŒ–çš„å»ºè®®ã€‚ç›¸åï¼Œè‹¥æ˜¯ç¹æ‚éš¾è§£çš„ç¨‹åºï¼Œå…¶ä»–äººæ€»æ˜¯ä¼šé¿è€Œè¿œä¹‹çš„ã€‚</li><li><strong>ä¸ºç»´æŠ¤è€…å†™ä»£ç </strong>(<code>Write Code for the Maintainer</code>): ä¼˜ç§€çš„ä»£ç ï¼Œåº”å½“ä½¿æœ¬äººæˆ–æ˜¯ä»–äººåœ¨å°†æ¥éƒ½èƒ½å¤Ÿå¯¹å®ƒç»§ç»­ç¼–å†™æˆ–ç»´æŠ¤ã€‚ä»£ç ç»´æŠ¤æ—¶ï¼Œæˆ–è®¸æœ¬äººä¼šæ¯”è¾ƒå®¹æ˜“ï¼Œä½†å¯¹ä»–äººå´æ¯”è¾ƒéº»çƒ¦ã€‚å› æ­¤ä½ å†™çš„ä»£ç è¦å°½å¯èƒ½ä¿è¯ä»–äººèƒ½å¤Ÿå®¹æ˜“ç»´æŠ¤ã€‚â€œå¦‚æœä¸€ä¸ªç»´æŠ¤è€…ä¸å†ç»§ç»­ç»´æŠ¤ä½ çš„ä»£ç ï¼Œå¾ˆå¯èƒ½ä»–å°±æœ‰äº†æƒ³æ€ä½ çš„å†²åŠ¨ã€‚â€</li><li><strong>æ­£äº¤åŸåˆ™(Orthogonality)</strong>: æ­£äº¤æ€§çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼Œåœ¨æ¦‚å¿µä¸Šä¸ç›¸å…³çš„äº‹ç‰©ä¸åº”è¯¥ä¸ç³»ç»Ÿç›¸å…³ã€‚è®¾è®¡è¶Šæ­£äº¤ï¼Œå¼‚å¸¸è¶Šå°‘ã€‚ è¿™ä½¿å¾—ç”¨ç¼–ç¨‹è¯­è¨€æ›´å®¹æ˜“å­¦ä¹ ï¼Œè¯»å†™ç¨‹åºã€‚(åä¾‹ï¼š<code>CSS</code>)ã€‚</li><li><strong>åšæœ€ç®€å•çš„äº‹å„¿å°±è®©ä»£ç å¯è¿è¡Œ</strong>ï¼ˆ<code>Do the simplest thing that could possibly work</code>ï¼‰: å°½å¯èƒ½åšæœ€ç®€å•çš„äº‹å°±å¯ä»¥è®©ä»£ç å¯è¿è¡Œã€‚åœ¨ç¼–ç¨‹ä¸­ï¼Œä¸€å®šè¦ä¿æŒç®€å•åŸåˆ™ã€‚ä½œä¸ºä¸€åç¨‹åºå‘˜ä¸æ–­çš„åæ€â€œå¦‚ä½•åœ¨å·¥ä½œä¸­åšåˆ°ç®€åŒ–å‘¢ï¼Ÿâ€è¿™å°†æœ‰åŠ©äºåœ¨è®¾è®¡ä¸­ä¿æŒç®€å•çš„è·¯å¾„ã€‚</li><li><strong>éšè—å®ç°ç»†èŠ‚</strong>ï¼ˆ<code>Hide Implementation Details</code>ï¼‰: è½¯ä»¶æ¨¡å—é€šè¿‡æä¾›æ¥å£éšè—ä¿¡æ¯ï¼ˆå³å®ç°ç»†èŠ‚ï¼‰ï¼Œè€Œä¸æ³„æ¼ä»»ä½•ä¸å¿…è¦çš„ä¿¡æ¯ã€‚</li><li><strong>ç§‘é‡Œå®šå¾‹</strong>(<code>Curly&#39;s Law</code>): æ˜¯ä¸ºä»»ä½•ç‰¹å®šçš„ä»£ç é€‰æ‹©ä¸€ä¸ªæ˜ç¡®å®šä¹‰çš„ç›®æ ‡ï¼š<strong>åªåšä¸€ä»¶äº‹</strong>ã€‚</li><li><strong>å¢¨è²å®šå¾‹</strong>ï¼ˆ<code>Murphy&#39;s Law</code>ï¼‰:æ ¹æœ¬å†…å®¹æ˜¯ï¼š<strong>å¦‚æœäº‹æƒ…æœ‰å˜åçš„å¯èƒ½ï¼Œä¸ç®¡è¿™ç§å¯èƒ½æ€§æœ‰å¤šå°ï¼Œå®ƒæ€»ä¼šå‘ç”Ÿ</strong>ã€‚ä¸»è¦å†…å®¹å¦‚ä¸‹ï¼š<ul><li>ä»»ä½•äº‹éƒ½æ²¡æœ‰è¡¨é¢çœ‹èµ·æ¥é‚£ä¹ˆç®€å•ï¼›</li><li>æ‰€æœ‰çš„äº‹éƒ½ä¼šæ¯”ä½ é¢„è®¡çš„æ—¶é—´é•¿ï¼›</li><li>ä¼šå‡ºé”™çš„äº‹æ€»ä¼šå‡ºé”™ï¼›</li><li>å¦‚æœä½ æ‹…å¿ƒæŸç§æƒ…å†µå‘ç”Ÿï¼Œé‚£ä¹ˆå®ƒå°±æ›´æœ‰å¯èƒ½å‘ç”Ÿã€‚</li></ul></li></ul><h2 id="ä¸‰ã€é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™"><a href="#ä¸‰ã€é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™" class="headerlink" title="ä¸‰ã€é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™"></a>ä¸‰ã€é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™</h2><h3 id="1-SRP"><a href="#1-SRP" class="headerlink" title="1. SRP"></a>1. SRP</h3><p>æ‰€è°“<code>SRP</code>åŸåˆ™ï¼Œå³ï¼š<code>Single Responsibility Principle</code>ï¼Œ<strong>å•ä¸€èŒè´£åŸåˆ™</strong>ã€‚åŸå§‹å®šä¹‰å¦‚ä¸‹ï¼š</p><blockquote><p>There should never be more than one reason for a class to change.(<strong>åªæœ‰ä¸€ä¸ªå¼•èµ·ç±»æ”¹å˜çš„åŸå› </strong>)</p></blockquote><p>åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹é¢†åŸŸä¸­ï¼Œå•ä¸€èŒè´£åŸåˆ™ï¼ˆ<code>Single responsibility principle</code>ï¼‰è§„å®šæ¯ä¸ªç±»éƒ½åº”è¯¥æœ‰ä¸€ä¸ªå•ä¸€çš„èŒè´£æˆ–è€…å«åŠŸèƒ½ï¼Œå¹¶ä¸”è¯¥åŠŸèƒ½åº”è¯¥ç”±è¿™ä¸ªç±»å®Œå…¨å°è£…èµ·æ¥ã€‚æ‰€æœ‰å®ƒçš„ï¼ˆè¿™ä¸ªç±»çš„ï¼‰æœåŠ¡éƒ½åº”è¯¥ä¸¥å¯†çš„å’Œè¯¥åŠŸèƒ½å¹³è¡Œï¼ˆåŠŸèƒ½å¹³è¡Œï¼Œæ„å‘³ç€æ²¡æœ‰ä¾èµ–ï¼‰ã€‚ä¸€ä¸ªç±»æˆ–è€…æ¨¡å—åº”è¯¥æœ‰ä¸”åªæœ‰ä¸€ä¸ªæ”¹å˜çš„åŸå› ã€‚</p><p>å¦‚æœä¸€ä¸ªç±»æ‰¿æ‹…çš„èŒè´£è¿‡å¤šï¼Œå°±ç­‰äºæŠŠè¿™äº›èŒè´£è€¦åˆåœ¨ä¸€èµ·äº†ã€‚ä¸€ä¸ªèŒè´£çš„å˜åŒ–å¯èƒ½ä¼šå‰Šå¼±æˆ–è€…æŠ‘åˆ¶è¿™ä¸ªç±»å®Œæˆå…¶ä»–èŒè´£çš„èƒ½åŠ›ã€‚è¿™ç§è€¦åˆä¼šå¯¼è‡´è„†å¼±çš„è®¾è®¡ï¼Œå½“å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè®¾è®¡ä¼šé­å—åˆ°æ„æƒ³ä¸åˆ°çš„ç ´åã€‚è€Œå¦‚æœæƒ³è¦é¿å…è¿™ç§ç°è±¡çš„å‘ç”Ÿï¼Œå°±è¦å°½å¯èƒ½çš„éµå®ˆå•ä¸€èŒè´£åŸåˆ™ã€‚æ­¤åŸåˆ™çš„æ ¸å¿ƒå°±æ˜¯<strong>è§£è€¦</strong>å’Œ<strong>å¢å¼ºå†…èšæ€§</strong>ã€‚</p><h4 id="å•ä¸€èŒè´£çš„å¥½å¤„ï¼š"><a href="#å•ä¸€èŒè´£çš„å¥½å¤„ï¼š" class="headerlink" title="å•ä¸€èŒè´£çš„å¥½å¤„ï¼š"></a>å•ä¸€èŒè´£çš„å¥½å¤„ï¼š</h4><ul><li>ç±»çš„å¤æ‚æ€§é™ä½ï¼Œå®ç°ä»€ä¹ˆèŒè´£éƒ½æœ‰æ¸…æ™°æ˜ç¡®çš„å®šä¹‰;</li><li>å¯è¯»æ€§æé«˜ï¼Œå¤æ‚æ€§é™ä½ï¼Œå¯ç»´æŠ¤æ€§æé«˜;</li><li>å˜æ›´å¼•èµ·çš„é£é™©é™ä½ã€‚</li></ul><h4 id="å•ä¸€èŒè´£åŸåˆ™çš„æ³¨æ„ç‚¹ï¼š"><a href="#å•ä¸€èŒè´£åŸåˆ™çš„æ³¨æ„ç‚¹ï¼š" class="headerlink" title="å•ä¸€èŒè´£åŸåˆ™çš„æ³¨æ„ç‚¹ï¼š"></a>å•ä¸€èŒè´£åŸåˆ™çš„æ³¨æ„ç‚¹ï¼š</h4><ul><li>å•ä¸€èŒè´£æœ€éš¾åˆ’åˆ†çš„æ˜¯<strong>èŒè´£</strong>ã€‚</li><li>å•ä¸€èŒè´£åŸåˆ™æå‡ºæ ‡å‡†ï¼šç”¨èŒè´£å’Œå˜åŒ–åŸå› æ¥è¡¡é‡æ¥å£æˆ–ç±»è®¾è®¡çš„æ˜¯å¦ä¼˜è‰¯ï¼Œä½†æ˜¯èŒè´£å’Œå˜åŒ–åŸå› éƒ½æ˜¯ä¸å¯åº¦é‡çš„ï¼Œå› é¡¹ç›®ã€ç¯å¢ƒè€Œå¼‚ã€‚</li><li>æ¥å£ä¸€å®šè¦åšåˆ°å•ä¸€èŒè´£ï¼Œç±»çš„è®¾è®¡å°½é‡åšåˆ°åªæœ‰ä¸€ä¸ªåŸå› å¼•èµ·å®ƒå˜åŒ–ã€‚</li></ul><h3 id="2-LSP"><a href="#2-LSP" class="headerlink" title="2. LSP"></a>2. LSP</h3><p>æ‰€è°“<code>LSP</code>åŸåˆ™ï¼Œå³ï¼š<code>Liskov Substitution principle</code>ï¼Œ<strong>é‡Œæ°æ›¿æ¢åŸåˆ™</strong>ã€‚åŸå§‹å®šä¹‰å¦‚ä¸‹ï¼š</p><blockquote><p>Functions that use pointers of references to base classes must be able to use objects of derived classes without knowing it.ï¼ˆ<strong>æ‰€æœ‰å¼•ç”¨åŸºç±»çš„åœ°æ–¹å¿…é¡»èƒ½é€æ˜åœ°ä½¿ç”¨å…¶å­ç±»çš„å¯¹è±¡</strong>ï¼‰</p></blockquote><p>æ›´é€šä¿—çš„å®šä¹‰å³ä¸ºï¼š<strong>å­ç±»å¯ä»¥æ‰©å±•çˆ¶ç±»çš„åŠŸèƒ½ï¼Œä½†ä¸èƒ½æ”¹å˜çˆ¶ç±»åŸæœ‰çš„åŠŸèƒ½</strong>ã€‚é‡Œæ°æ›¿æ¢åŸåˆ™åŒ…å«äº†ä¸€ä¸‹4å±‚å«ä¹‰ï¼š</p><ul><li>å­ç±»å¿…é¡»å®Œå…¨å®ç°çˆ¶ç±»çš„æ–¹æ³•ã€‚åœ¨ç±»ä¸­è°ƒç”¨å…¶ä»–ç±»æ˜¯åŠ¡å¿…è¦ä½¿ç”¨çˆ¶ç±»æˆ–æ¥å£ï¼Œå¦‚æœä¸èƒ½ä½¿ç”¨çˆ¶ç±»æˆ–æ¥å£ï¼Œåˆ™è¯´æ˜ç±»çš„è®¾è®¡å·²ç»è¿èƒŒäº†<code>LSP</code>åŸåˆ™ã€‚</li><li>å­ç±»å¯ä»¥æœ‰è‡ªå·±çš„ä¸ªæ€§ã€‚å­ç±»å½“ç„¶å¯ä»¥æœ‰è‡ªå·±çš„è¡Œä¸ºå’Œå¤–è§‚äº†ï¼Œä¹Ÿå°±æ˜¯æ–¹æ³•å’Œå±æ€§ã€‚</li><li>è¦†ç›–æˆ–å®ç°çˆ¶ç±»çš„æ–¹æ³•æ—¶è¾“å…¥å‚æ•°å¯ä»¥è¢«æ”¾å¤§ã€‚å³å­ç±»å¯ä»¥è¦†ç›–çˆ¶ç±»çš„æ–¹æ³•ï¼Œä½†è¾“å…¥å‚æ•°åº”æ¯”çˆ¶ç±»æ–¹æ³•ä¸­çš„å¤§ï¼Œè¿™æ ·åœ¨å­ç±»ä»£æ›¿çˆ¶ç±»çš„æ—¶å€™ï¼Œè°ƒç”¨çš„ä»ç„¶æ˜¯çˆ¶ç±»çš„æ–¹æ³•ã€‚å³ä»¥å­ç±»ä¸­æ–¹æ³•çš„å‰ç½®æ¡ä»¶å¿…é¡»ä¸è¶…ç±»ä¸­è¢«è¦†ç›–çš„æ–¹æ³•çš„å‰ç½®æ¡ä»¶ç›¸åŒæˆ–è€…æ›´å®½æ¾ã€‚</li><li>è¦†ç›–æˆ–å®ç°çˆ¶ç±»çš„æ–¹æ³•æ—¶è¾“å‡ºç»“æœå¯ä»¥è¢«ç¼©å°ã€‚</li></ul><h4 id="ä¼˜ç‚¹ï¼š"><a href="#ä¼˜ç‚¹ï¼š" class="headerlink" title="ä¼˜ç‚¹ï¼š"></a>ä¼˜ç‚¹ï¼š</h4><ul><li>æé«˜ä»£ç çš„é‡ç”¨æ€§ï¼Œå­ç±»æ‹¥æœ‰çˆ¶ç±»çš„æ–¹æ³•å’Œå±æ€§ï¼›</li><li>æé«˜ä»£ç çš„å¯æ‰©å±•æ€§ï¼Œå­ç±»å¯å½¢ä¼¼äºçˆ¶ç±»ï¼Œä½†å¼‚äºçˆ¶ç±»ï¼Œä¿ç•™è‡ªæˆ‘çš„ç‰¹æ€§ï¼›</li></ul><h4 id="ç¼ºç‚¹ï¼š"><a href="#ç¼ºç‚¹ï¼š" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h4><ul><li>ç»§æ‰¿æ˜¯ä¾µå…¥æ€§çš„ï¼Œåªè¦ç»§æ‰¿å°±å¿…é¡»æ‹¥æœ‰çˆ¶ç±»çš„æ‰€æœ‰æ–¹æ³•å’Œå±æ€§ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šçº¦æŸäº†å­ç±»ï¼Œé™ä½äº†ä»£ç çš„çµæ´»æ€§ï¼›</li><li>å¢åŠ äº†è€¦åˆï¼Œå½“çˆ¶ç±»çš„å¸¸é‡ã€å˜é‡æˆ–è€…æ–¹æ³•è¢«ä¿®æ”¹äº†ï¼Œéœ€è¦è€ƒè™‘å­ç±»çš„ä¿®æ”¹ï¼Œæ‰€ä»¥ä¸€æ—¦çˆ¶ç±»æœ‰äº†å˜åŠ¨ï¼Œå¾ˆå¯èƒ½ä¼šé€ æˆéå¸¸ç³Ÿç³•çš„ç»“æœï¼Œè¦é‡æ„å¤§é‡çš„ä»£ç ã€‚</li></ul><h3 id="3-ISP"><a href="#3-ISP" class="headerlink" title="3. ISP"></a>3. ISP</h3><p>æ‰€è°“<code>ISP</code>åŸåˆ™ï¼Œå³ï¼š<code>InterfaceÂ SegregationÂ Principle</code>ï¼Œ<strong>æ¥å£éš”ç¦»åŸåˆ™</strong>ã€‚åŸå§‹å®šä¹‰å¦‚ä¸‹ï¼š</p><blockquote><p>Clients should not be forced to depend upon interfaces that they do not use.(å®¢æˆ·ç«¯åªä¾èµ–äºå®ƒæ‰€éœ€è¦çš„æ¥å£ï¼›å®ƒéœ€è¦ä»€ä¹ˆæ¥å£å°±æä¾›ä»€ä¹ˆæ¥å£ï¼ŒæŠŠä¸éœ€è¦çš„æ¥å£å‰”é™¤æ‰ã€‚)</p></blockquote><blockquote><p>The dependency of one class to another one should depend on the smallest possible interface.(ç±»é—´çš„ä¾èµ–å…³ç³»åº”å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¸Šã€‚)</p></blockquote><p>å³ï¼Œ<strong>æ¥å£å°½é‡ç»†åŒ–ï¼Œæ¥å£ä¸­çš„æ–¹æ³•å°½é‡å°‘</strong>ã€‚æ¥å£éš”ç¦»åŸåˆ™ä¸å•ä¸€èŒè´£åŸåˆ™çš„å®¡è§†è§’åº¦æ˜¯ä¸åŒçš„ï¼Œå•ä¸€èŒè´£åŸåˆ™è¦æ±‚çš„æ˜¯ç±»å’Œæ¥å£èŒè´£å•ä¸€ï¼Œæ³¨é‡çš„æ˜¯èŒè´£ï¼Œè¿™æ˜¯ä¸šåŠ¡é€»è¾‘ä¸Šçš„åˆ’åˆ†ï¼Œè€Œæ¥å£éš”ç¦»åŸåˆ™è¦æ±‚æ¥å£çš„æ–¹æ³•å°½é‡å°‘ã€‚æ ¹æ®æ¥å£éš”ç¦»åŸåˆ™æ‹†åˆ†æ¥å£æ—¶ï¼Œé¦–å…ˆå¿…é¡»æ»¡è¶³å•ä¸€èŒè´£åŸåˆ™ã€‚</p><p>é‡‡ç”¨æ¥å£éš”ç¦»åŸåˆ™å¯¹æ¥å£è¿›è¡Œçº¦æŸæ—¶ï¼Œè¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li>æ¥å£å°½é‡å°ï¼Œä½†æ˜¯è¦æœ‰é™åº¦ã€‚å¯¹æ¥å£è¿›è¡Œç»†åŒ–å¯ä»¥æé«˜ç¨‹åºè®¾è®¡çµæ´»æ€§æ˜¯ä¸æŒ£çš„äº‹å®ï¼Œä½†æ˜¯å¦‚æœè¿‡å°ï¼Œåˆ™ä¼šé€ æˆæ¥å£æ•°é‡è¿‡å¤šï¼Œä½¿è®¾è®¡å¤æ‚åŒ–ã€‚æ‰€ä»¥ä¸€å®šè¦é€‚åº¦ã€‚</li><li>ä¸ºä¾èµ–æ¥å£çš„ç±»å®šåˆ¶æœåŠ¡ï¼Œåªæš´éœ²ç»™è°ƒç”¨çš„ç±»å®ƒéœ€è¦çš„æ–¹æ³•ï¼Œå®ƒä¸éœ€è¦çš„æ–¹æ³•åˆ™éšè—èµ·æ¥ã€‚åªæœ‰ä¸“æ³¨åœ°ä¸ºä¸€ä¸ªæ¨¡å—æä¾›å®šåˆ¶æœåŠ¡ï¼Œæ‰èƒ½å»ºç«‹æœ€å°çš„ä¾èµ–å…³ç³»ã€‚</li><li>æé«˜å†…èšï¼Œå‡å°‘å¯¹å¤–äº¤äº’ã€‚ä½¿æ¥å£ç”¨æœ€å°‘çš„æ–¹æ³•å»å®Œæˆæœ€å¤šçš„äº‹æƒ…ã€‚</li></ul><p>è¿ç”¨æ¥å£éš”ç¦»åŸåˆ™ï¼Œä¸€å®šè¦é€‚åº¦ï¼Œæ¥å£è®¾è®¡çš„è¿‡å¤§æˆ–è¿‡å°éƒ½ä¸å¥½ã€‚è®¾è®¡æ¥å£çš„æ—¶å€™ï¼Œåªæœ‰å¤šèŠ±äº›æ—¶é—´å»æ€è€ƒå’Œç­¹åˆ’ï¼Œæ‰èƒ½å‡†ç¡®åœ°å®è·µè¿™ä¸€åŸåˆ™ã€‚</p><h3 id="4-OCP"><a href="#4-OCP" class="headerlink" title="4. OCP"></a>4. OCP</h3><p>æ‰€è°“<code>OCP</code>åŸåˆ™ï¼Œå³ï¼š<code>Open Closed Principle</code>ï¼Œ<strong>å¼€é—­åŸåˆ™</strong>ã€‚åŸå§‹å®šä¹‰å¦‚ä¸‹ï¼š</p><blockquote><p>software entities (classes, modules, functions, etc.) should be open for extension, but closed for modification.(å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­)</p></blockquote><p>å¼€é—­åŸåˆ™ï¼ˆ<code>OCP</code>ï¼‰æ˜¯é¢å‘å¯¹è±¡è®¾è®¡ä¸­â€œå¯å¤ç”¨è®¾è®¡â€çš„åŸºçŸ³ï¼Œæ˜¯é¢å‘å¯¹è±¡è®¾è®¡ä¸­æœ€é‡è¦çš„åŸåˆ™ä¹‹ä¸€ï¼Œå…¶å®ƒå¾ˆå¤šçš„è®¾è®¡åŸåˆ™å’Œè®¾è®¡æ¨¡å¼éƒ½æ˜¯å®ç°å¼€é—­åŸåˆ™çš„ä¸€ç§æ‰‹æ®µã€‚æ ¸å¿ƒå°±æ˜¯ï¼š<strong>å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­</strong>ã€‚å…¶å«ä¹‰æ˜¯è¯´ä¸€ä¸ªè½¯ä»¶åº”è¯¥é€šè¿‡æ‰©å±•æ¥å®ç°å˜åŒ–ï¼Œè€Œä¸æ˜¯é€šè¿‡ä¿®æ”¹å·²æœ‰çš„ä»£ç æ¥å®ç°å˜åŒ–çš„ã€‚</p><p>è½¯ä»¶ç³»ç»Ÿä¸­åŒ…å«çš„å„ç§ç»„ä»¶ï¼Œä¾‹å¦‚æ¨¡å—ï¼ˆ<code>Module</code>ï¼‰ã€ç±»ï¼ˆ<code>Class</code>ï¼‰ä»¥åŠåŠŸèƒ½ï¼ˆ<code>Function</code>ï¼‰ç­‰ç­‰ï¼Œåº”è¯¥åœ¨ä¸ä¿®æ”¹ç°æœ‰ä»£ç çš„åŸºç¡€ä¸Šï¼Œå¼•å…¥æ–°åŠŸèƒ½ã€‚å¼€é—­åŸåˆ™ä¸­â€œå¼€â€ï¼Œæ˜¯æŒ‡å¯¹äºç»„ä»¶åŠŸèƒ½çš„æ‰©å±•æ˜¯å¼€æ”¾çš„ï¼Œæ˜¯å…è®¸å¯¹å…¶è¿›è¡ŒåŠŸèƒ½æ‰©å±•çš„ï¼›å¼€é—­åŸåˆ™ä¸­â€œé—­â€ï¼Œæ˜¯æŒ‡å¯¹äºåŸæœ‰ä»£ç çš„ä¿®æ”¹æ˜¯å°é—­çš„ã€‚</p><p>å®ç°å¼€é—­åŸåˆ™çš„å…³é”®å°±åœ¨äºâ€œ<strong>æŠ½è±¡</strong>â€ã€‚æŠŠç³»ç»Ÿçš„æ‰€æœ‰å¯èƒ½çš„è¡Œä¸ºæŠ½è±¡æˆä¸€ä¸ªæŠ½è±¡åº•å±‚ï¼Œè¿™ä¸ªæŠ½è±¡åº•å±‚è§„å®šå‡ºæ‰€æœ‰çš„å…·ä½“å®ç°å¿…é¡»æä¾›çš„æ–¹æ³•çš„ç‰¹å¾ã€‚ä½œä¸ºç³»ç»Ÿè®¾è®¡çš„æŠ½è±¡å±‚ï¼Œè¦é¢„è§æ‰€æœ‰å¯èƒ½çš„æ‰©å±•ï¼Œä»è€Œä½¿å¾—åœ¨ä»»ä½•æ‰©å±•æƒ…å†µä¸‹ï¼Œç³»ç»Ÿçš„æŠ½è±¡åº•å±‚ä¸éœ€ä¿®æ”¹ï¼›åŒæ—¶ï¼Œç”±äºå¯ä»¥ä»æŠ½è±¡åº•å±‚å¯¼å‡ºä¸€ä¸ªæˆ–å¤šä¸ªæ–°çš„å…·ä½“å®ç°ï¼Œå¯ä»¥æ”¹å˜ç³»ç»Ÿçš„è¡Œä¸ºï¼Œå› æ­¤ç³»ç»Ÿè®¾è®¡å¯¹æ‰©å±•æ˜¯å¼€æ”¾çš„ã€‚åœ¨å®é™…å¼€å‘è¿‡ç¨‹çš„è®¾è®¡å¼€å§‹é˜¶æ®µï¼Œå°±è¦ç½—åˆ—å‡ºæ¥ç³»ç»Ÿæ‰€æœ‰å¯èƒ½çš„è¡Œä¸ºï¼Œå¹¶æŠŠè¿™äº›è¡Œä¸ºåŠ å…¥åˆ°æŠ½è±¡åº•å±‚ï¼Œæ ¹æœ¬å°±æ˜¯ä¸å¯èƒ½çš„ï¼Œè¿™ä¹ˆå»åšä¹Ÿæ˜¯ä¸ç»æµçš„ã€‚å› æ­¤æˆ‘ä»¬åº”è¯¥ç°å®çš„æ¥å—ä¿®æ”¹æ‹¥æŠ±å˜åŒ–ï¼Œä½¿æˆ‘ä»¬çš„ä»£ç å¯ä»¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚</p><p>å¼€é—­åŸåˆ™çš„å¥½å¤„ï¼š</p><ul><li>å¯å¤ç”¨æ€§å¥½;</li><li>å¯ç»´æŠ¤æ€§å¥½ã€‚</li></ul><h3 id="5-DIP"><a href="#5-DIP" class="headerlink" title="5. DIP"></a>5. DIP</h3><p>æ‰€è°“<code>DIP</code>åŸåˆ™ï¼Œå³ï¼š<code>Dependency Inversion Principle</code>ï¼Œ<strong>ä¾èµ–å€’ç½®åŸåˆ™</strong>ã€‚åŸå§‹å®šä¹‰å¦‚ä¸‹ï¼š</p><blockquote><p>High-level modules should not depend on low-level modules. Both should depend on abstractions.(<strong>é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½å±‚æ¨¡å—ï¼Œä¸¤è€…éƒ½åº”è¯¥ä¾èµ–å…¶æŠ½è±¡</strong>)</p></blockquote><blockquote><p>Abstractions should not depend on details. Details should depend on abstractions.(<strong>æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚ï¼›ç»†èŠ‚åº”è¯¥ä¾èµ–æŠ½è±¡</strong>)</p></blockquote><p>é¢å‘è¿‡ç¨‹çš„å¼€å‘ï¼Œä¸Šå±‚è°ƒç”¨ä¸‹å±‚ï¼Œä¸Šå±‚ä¾èµ–äºä¸‹å±‚ï¼Œå½“ä¸‹å±‚å‰§çƒˆå˜åŠ¨æ—¶ä¸Šå±‚ä¹Ÿè¦è·Ÿç€å˜åŠ¨ï¼Œè¿™å°±ä¼šå¯¼è‡´æ¨¡å—çš„å¤ç”¨æ€§é™ä½è€Œä¸”å¤§å¤§æé«˜äº†å¼€å‘çš„æˆæœ¬ã€‚é¢å‘å¯¹è±¡çš„å¼€å‘å¾ˆå¥½çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æŠ½è±¡çš„å˜åŒ–æ¦‚ç‡å¾ˆå°ï¼Œè®©ç”¨æˆ·ç¨‹åºä¾èµ–äºæŠ½è±¡ï¼Œå®ç°çš„ç»†èŠ‚ä¹Ÿä¾èµ–äºæŠ½è±¡ã€‚å³ä½¿å®ç°ç»†èŠ‚ä¸æ–­å˜åŠ¨ï¼Œåªè¦æŠ½è±¡ä¸å˜ï¼Œå®¢æˆ·ç¨‹åºå°±ä¸éœ€è¦å˜åŒ–ã€‚è¿™å¤§å¤§é™ä½äº†å®¢æˆ·ç¨‹åºä¸å®ç°ç»†èŠ‚çš„è€¦åˆåº¦ã€‚</p><p>ä¾èµ–å€’ç½®åŸåˆ™ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰å±‚å«ä¹‰ï¼š</p><ul><li>é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½å±‚æ¨¡å—ï¼Œä¸¤è€…éƒ½åº”è¯¥ä¾èµ–å…¶æŠ½è±¡ï¼ˆæŠ½è±¡ç±»æˆ–æ¥å£ï¼‰ï¼›</li><li>æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚ï¼ˆå…·ä½“å®ç°ï¼‰ï¼›  </li><li>ç»†èŠ‚ï¼ˆå…·ä½“å®ç°ï¼‰åº”è¯¥ä¾èµ–æŠ½è±¡ã€‚</li></ul><p>ä¾èµ–å€’ç½®åŸåˆ™åŸºäºè¿™æ ·ä¸€ä¸ªäº‹å®ï¼š<strong>ç›¸å¯¹äºç»†èŠ‚çš„å¤šå˜æ€§ï¼ŒæŠ½è±¡çš„ä¸œè¥¿è¦ç¨³å®šçš„å¤š</strong>ã€‚ä»¥æŠ½è±¡ä¸ºåŸºç¡€æ­å»ºèµ·æ¥çš„æ¶æ„æ¯”ä»¥ç»†èŠ‚ä¸ºåŸºç¡€æ­å»ºèµ·æ¥çš„æ¶æ„è¦ç¨³å®šçš„å¤šã€‚åœ¨ Java ä¸­ï¼ŒæŠ½è±¡æŒ‡çš„æ˜¯æ¥å£æˆ–è€…æŠ½è±¡ç±»ï¼Œç»†èŠ‚å°±æ˜¯å…·ä½“çš„å®ç°ç±»ï¼Œä½¿ç”¨æ¥å£æˆ–è€…æŠ½è±¡ç±»çš„ç›®çš„æ˜¯åˆ¶å®šå¥½è§„èŒƒå’Œå¥‘çº¦ï¼Œè€Œä¸å»æ¶‰åŠä»»ä½•å…·ä½“çš„æ“ä½œï¼ŒæŠŠå±•ç°ç»†èŠ‚çš„ä»»åŠ¡äº¤ç»™ä»–ä»¬çš„å®ç°ç±»å»å®Œæˆã€‚<strong>ä¾èµ–å€’ç½®åŸåˆ™çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯é¢å‘æ¥å£ç¼–ç¨‹</strong>ã€‚</p><h3 id="6-LOD-LKP"><a href="#6-LOD-LKP" class="headerlink" title="6. LOD | LKP"></a>6. LOD | LKP</h3><p>æ‰€è°“<code>LOD</code>åŸåˆ™ï¼Œå³ï¼š<code>Law of Demeter</code>ï¼Œ<strong>è¿ªç±³ç‰¹æ³•åˆ™</strong>ï¼Œåˆå«<strong>æœ€å°‘çŸ¥è¯†åŸåˆ™</strong>ï¼ˆ<code>Least Knowledge Principle</code>ï¼Œç®€å†™<code>LKP</code>ï¼‰ï¼Œå°±æ˜¯è¯´ä¸€ä¸ªå¯¹è±¡åº”å½“å¯¹å…¶ä»–å¯¹è±¡æœ‰å°½å¯èƒ½å°‘çš„äº†è§£ã€‚é€šä¿—çš„è®²ï¼Œä¸€ä¸ªç±»åº”è¯¥å¯¹è‡ªå·±éœ€è¦è€¦åˆæˆ–è°ƒç”¨çš„ç±»çŸ¥é“å¾—æœ€å°‘ï¼Œè¢«è€¦åˆçš„ç±»æ˜¯å¦‚ä½•çš„å¤æ‚éƒ½å’Œæˆ‘æ²¡å…³ç³»ï¼Œå³ä¸ºâ€œä¸å’Œé™Œç”Ÿäººè¯´è¯â€ã€‚è¿ªç±³ç‰¹æ³•åˆ™çš„è‹±æ–‡è§£é‡Šå¦‚ä¸‹ï¼š</p><blockquote><p>talk only to your immediate friends.(<strong>åªä¸ç›´æ¥çš„æœ‹å‹é€šä¿¡</strong>)</p></blockquote><p><strong>è¿ªç±³ç‰¹æ³•åˆ™çš„åˆè¡·åœ¨äºé™ä½ç±»ä¹‹é—´çš„è€¦åˆ</strong>ã€‚ç”±äºæ¯ä¸ªç±»å°½é‡å‡å°‘å¯¹å…¶ä»–ç±»çš„ä¾èµ–ï¼Œå› æ­¤ï¼Œå¾ˆå®¹æ˜“ä½¿å¾—ç³»ç»Ÿçš„åŠŸèƒ½æ¨¡å—åŠŸèƒ½ç‹¬ç«‹ï¼Œç›¸äº’ä¹‹é—´ä¸å­˜åœ¨ï¼ˆæˆ–å¾ˆå°‘æœ‰ï¼‰ä¾èµ–å…³ç³»ã€‚</p><p>è¿ªç±³ç‰¹æ³•åˆ™ä¸å¸Œæœ›ç±»ä¹‹é—´å»ºç«‹ç›´æ¥çš„è”ç³»ã€‚å¦‚æœçœŸçš„æœ‰éœ€è¦å»ºç«‹è”ç³»ï¼Œä¹Ÿå¸Œæœ›èƒ½é€šè¿‡å®ƒçš„â€œæœ‹å‹â€ç±»æ¥è½¬è¾¾ã€‚å› æ­¤ï¼Œåº”ç”¨è¿ªç±³ç‰¹æ³•åˆ™æœ‰å¯èƒ½é€ æˆçš„ä¸€ä¸ªåæœå°±æ˜¯ï¼šç³»ç»Ÿä¸­å­˜åœ¨å¤§é‡çš„ä¸­ä»‹ç±»ï¼Œè¿™äº›ç±»ä¹‹æ‰€ä»¥å­˜åœ¨å®Œå…¨æ˜¯ä¸ºäº†ä¼ é€’ç±»ä¹‹é—´çš„ç›¸äº’è°ƒç”¨å…³ç³»â€”â€”è¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦,åŒæ—¶ä¹Ÿä¸ºç³»ç»Ÿçš„ç»´æŠ¤å¸¦æ¥äº†éš¾åº¦ã€‚æ‰€ä»¥ï¼Œåœ¨é‡‡ç”¨è¿ªç±³ç‰¹æ³•åˆ™æ—¶éœ€è¦åå¤æƒè¡¡ï¼Œä¸éµå¾ªä¸å¯¹ï¼Œä¸¥æ ¼æ‰§è¡Œåˆä¼šâ€œè¿‡çŠ¹ä¸åŠâ€ã€‚æ—¢è¦åšåˆ°è®©ç»“æ„æ¸…æ™°ï¼Œåˆè¦åšåˆ°é«˜å†…èšä½è€¦åˆã€‚</p><h3 id="7-CRP"><a href="#7-CRP" class="headerlink" title="7. CRP"></a>7. CRP</h3><p>æ‰€è°“<code>CRP</code>åŸåˆ™ï¼Œå³ï¼š<code>CompositeÂ ReuseÂ Principle</code>ï¼Œ<strong>ç»„åˆå¤ç”¨åŸåˆ™</strong>ã€‚</p><p>ç»„åˆå¤ç”¨åŸåˆ™çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>å°½é‡ä½¿ç”¨å¯¹è±¡ç»„åˆï¼Œè€Œä¸æ˜¯ç»§æ‰¿æ¥è¾¾åˆ°å¤ç”¨çš„ç›®çš„</strong>ã€‚è¯¥åŸåˆ™å°±æ˜¯åœ¨ä¸€ä¸ªæ–°çš„å¯¹è±¡é‡Œé¢ä½¿ç”¨ä¸€äº›å·²æœ‰çš„å¯¹è±¡ï¼Œä½¿ä¹‹æˆä¸ºæ–°å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼šæ–°çš„å¯¹è±¡é€šè¿‡å‘è¿™äº›å¯¹è±¡çš„å§”æ´¾è¾¾åˆ°å¤ç”¨å·²æœ‰åŠŸèƒ½çš„ç›®çš„ã€‚</p><p>ç»§æ‰¿çš„ç¼ºç‚¹ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li>ç»§æ‰¿å¤ç”¨ç ´åæ•°æ®å°è£…æ€§ï¼Œå°†åŸºç±»çš„å®ç°ç»†èŠ‚å…¨éƒ¨æš´éœ²ç»™äº†æ´¾ç”Ÿç±»ï¼ŒåŸºç±»çš„å†…éƒ¨ç»†èŠ‚å¸¸å¸¸å¯¹æ´¾ç”Ÿç±»æ˜¯é€æ˜çš„ï¼Œç™½ç®±å¤ç”¨ã€‚è™½ç„¶ç®€å•ï¼Œä½†ä¸å®‰å…¨ï¼Œä¸èƒ½åœ¨ç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ä¸­éšä¾¿æ”¹å˜ã€‚</li><li>åŸºç±»çš„å®ç°å‘ç”Ÿäº†æ”¹å˜ï¼Œæ´¾ç”Ÿç±»çš„å®ç°ä¹Ÿä¸å¾—ä¸æ”¹å˜ã€‚</li><li>ä»åŸºç±»ç»§æ‰¿è€Œæ¥çš„æ´¾ç”Ÿç±»æ˜¯é™æ€çš„ï¼Œä¸å¯èƒ½åœ¨è¿è¡Œæ—¶é—´å†…å‘ç”Ÿæ”¹å˜ï¼Œå› æ­¤æ²¡æœ‰è¶³å¤Ÿçš„çµæ´»æ€§ã€‚</li></ul><p>ç”±äºç»„åˆå¯ä»¥å°†å·²æœ‰çš„å¯¹è±¡çº³å…¥åˆ°æ–°å¯¹è±¡ä¸­ï¼Œä½¿ä¹‹æˆä¸ºæ–°å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤æ–°å¯¹è±¡å¯ä»¥è°ƒç”¨å·²æœ‰å¯¹è±¡çš„åŠŸèƒ½ï¼Œè¿™æ ·åšæœ‰ä¸‹é¢çš„å¥½å¤„ï¼š</p><ul><li>æ–°å¯¹è±¡å­˜å–<code>ç»„æˆå¯¹è±¡</code>çš„å”¯ä¸€æ–¹æ³•æ˜¯é€šè¿‡<code>ç»„æˆå¯¹è±¡</code>çš„<code>getter/setter</code>æ–¹æ³•ã€‚</li><li>ç»„åˆå¤ç”¨æ˜¯é»‘ç®±å¤ç”¨ï¼Œå› ä¸ºç»„æˆå¯¹è±¡çš„å†…éƒ¨ç»†èŠ‚æ˜¯æ–°å¯¹è±¡æ‰€çœ‹ä¸è§çš„ã€‚</li><li>ç»„åˆå¤ç”¨æ‰€éœ€è¦çš„ä¾èµ–è¾ƒå°‘ã€‚</li><li>æ¯ä¸€ä¸ªæ–°çš„ç±»å¯ä»¥å°†ç„¦ç‚¹é›†ä¸­åˆ°ä¸€ä¸ªä»»åŠ¡ä¸Šã€‚</li><li>ç»„åˆå¤ç”¨å¯ä»¥åœ¨è¿è¡Œæ—¶é—´åŠ¨æ€è¿›è¡Œï¼Œæ–°å¯¹è±¡å¯ä»¥åŠ¨æ€çš„å¼•ç”¨ä¸æˆåˆ†å¯¹è±¡ç±»å‹ç›¸åŒçš„å¯¹è±¡ã€‚</li></ul><p>ç»„åˆå¤ç”¨çš„ç¼ºç‚¹ï¼šå°±æ˜¯ç”¨ç»„åˆå¤ç”¨å»ºé€ çš„ç³»ç»Ÿä¼šæœ‰è¾ƒå¤šçš„å¯¹è±¡éœ€è¦ç®¡ç†ã€‚</p><p>ç»„åˆå¤ç”¨åŸåˆ™å¯ä»¥ä½¿ç³»ç»Ÿæ›´åŠ çµæ´»ï¼Œç±»ä¸ç±»ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œä¸€ä¸ªç±»çš„å˜åŒ–å¯¹å…¶ä»–ç±»é€ æˆçš„å½±å“ç›¸å¯¹è¾ƒå°‘ï¼Œå› æ­¤ä¸€èˆ¬é¦–é€‰ä½¿ç”¨ç»„åˆæ¥å®ç°å¤ç”¨ï¼›å…¶æ¬¡æ‰è€ƒè™‘ç»§æ‰¿ã€‚åœ¨ä½¿ç”¨ç»§æ‰¿æ—¶ï¼Œéœ€è¦ä¸¥æ ¼éµå¾ªé‡Œæ°ä»£æ¢åŸåˆ™ï¼Œæœ‰æ•ˆä½¿ç”¨ç»§æ‰¿ä¼šæœ‰åŠ©äºå¯¹é—®é¢˜çš„ç†è§£ï¼Œé™ä½å¤æ‚åº¦ï¼Œè€Œæ»¥ç”¨ç»§æ‰¿åè€Œä¼šå¢åŠ ç³»ç»Ÿæ„å»ºå’Œç»´æŠ¤çš„éš¾åº¦ä»¥åŠç³»ç»Ÿçš„å¤æ‚åº¦ï¼Œå› æ­¤éœ€è¦æ…é‡ä½¿ç”¨ç»§æ‰¿å¤ç”¨ã€‚</p><p>ä½¿ç”¨ç»§æ‰¿æ—¶å¿…é¡»æ»¡è¶³<code>Is-A</code>çš„å…³ç³»æ˜¯æ‰èƒ½ä½¿ç”¨ç»§æ‰¿ï¼Œè€Œç»„åˆå´æ˜¯ä¸€ç§<code>Has-A</code>çš„å…³ç³»ã€‚å¯¼è‡´é”™è¯¯çš„ä½¿ç”¨ç»§æ‰¿è€Œä¸æ˜¯ä½¿ç”¨ç»„åˆçš„ä¸€ä¸ªé‡è¦åŸå› å¯èƒ½å°±æ˜¯é”™è¯¯çš„æŠŠ<code>Has-A</code>å½“æˆäº†<code>Is-A</code>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶è®¾è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> é¢å‘å¯¹è±¡ç¼–ç¨‹ </tag>
            
            <tag> è®¾è®¡åŸåˆ™ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GitLab CI/CD ä»‹ç»å’Œä½¿ç”¨</title>
      <link href="/post/ruan-jian-gong-ju/devops/gitlab-ci-jie-shao-he-shi-yong/"/>
      <url>/post/ruan-jian-gong-ju/devops/gitlab-ci-jie-shao-he-shi-yong/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€æŒç»­é›†æˆä»‹ç»"><a href="#ä¸€ã€æŒç»­é›†æˆä»‹ç»" class="headerlink" title="ä¸€ã€æŒç»­é›†æˆä»‹ç»"></a>ä¸€ã€æŒç»­é›†æˆä»‹ç»</h2><blockquote><p>æŒç»­é›†æˆæ˜¯ä¸€ç§è½¯ä»¶å¼€å‘å®è·µï¼Œå³å›¢é˜Ÿå¼€å‘æˆå‘˜ç»å¸¸é›†æˆä»–ä»¬çš„å·¥ä½œï¼Œé€šå¸¸æ¯ä¸ªæˆå‘˜æ¯å¤©è‡³å°‘é›†æˆä¸€æ¬¡ï¼Œä¹Ÿå°±æ„å‘³ç€æ¯å¤©å¯èƒ½ä¼šå‘ç”Ÿå¤šæ¬¡é›†æˆã€‚æ¯æ¬¡é›†æˆéƒ½é€šè¿‡è‡ªåŠ¨åŒ–çš„æ„å»ºï¼ˆåŒ…æ‹¬ç¼–è¯‘ï¼Œå‘å¸ƒï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•)æ¥éªŒè¯ï¼Œä»è€Œå°½å¿«åœ°å‘ç°é›†æˆé”™è¯¯ã€‚è®¸å¤šå›¢é˜Ÿå‘ç°è¿™ä¸ªè¿‡ç¨‹å¯ä»¥å¤§å¤§å‡å°‘é›†æˆçš„é—®é¢˜ï¼Œè®©å›¢é˜Ÿèƒ½å¤Ÿæ›´å¿«çš„å¼€å‘å†…èšçš„è½¯ä»¶ã€‚â€”â€” Martin Fowler</p></blockquote><h3 id="1-æ¦‚å¿µ"><a href="#1-æ¦‚å¿µ" class="headerlink" title="1 æ¦‚å¿µ"></a>1 æ¦‚å¿µ</h3><ul><li><strong>æŒç»­é›†æˆ</strong>(<code>Continuous Integration</code>)ï¼š<strong>é¢‘ç¹åœ°(ä¸€å¤©å¤šæ¬¡)å°†ä»£ç é›†æˆåˆ°ä¸»å¹²ã€‚</strong>è®©äº§å“å¯ä»¥å¿«é€Ÿè¿­ä»£ï¼ŒåŒæ—¶è¿˜èƒ½ä¿æŒé«˜è´¨é‡ã€‚å®ƒçš„æ ¸å¿ƒæªæ–½æ˜¯ï¼Œä»£ç é›†æˆåˆ°ä¸»å¹²ä¹‹å‰ï¼Œå¿…é¡»é€šè¿‡è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚åªè¦æœ‰ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹å¤±è´¥ï¼Œå°±ä¸èƒ½é›†æˆã€‚â€œæŒç»­é›†æˆå¹¶ä¸èƒ½æ¶ˆé™¤ Bugï¼Œè€Œæ˜¯è®©å®ƒä»¬éå¸¸å®¹æ˜“å‘ç°å’Œæ”¹æ­£ã€‚â€</li><li><strong>æŒç»­äº¤ä»˜</strong>(<code>Continuous Delivery</code>)ï¼š<strong>é¢‘ç¹åœ°å°†è½¯ä»¶çš„æ–°ç‰ˆæœ¬ï¼Œäº¤ä»˜ç»™è´¨é‡å›¢é˜Ÿæˆ–è€…ç”¨æˆ·ï¼Œä»¥ä¾›è¯„å®¡ã€‚</strong>å¦‚æœè¯„å®¡é€šè¿‡ï¼Œä»£ç å°±è¿›å…¥ç”Ÿäº§é˜¶æ®µã€‚æŒç»­äº¤ä»˜å¯ä»¥çœ‹ä½œæŒç»­é›†æˆçš„ä¸‹ä¸€æ­¥ã€‚å®ƒå¼ºè°ƒçš„æ˜¯ï¼Œä¸ç®¡æ€ä¹ˆæ›´æ–°ï¼Œè½¯ä»¶æ˜¯éšæ—¶éšåœ°å¯ä»¥äº¤ä»˜çš„ã€‚</li><li><strong>æŒç»­éƒ¨ç½²</strong>(<code>continuous Deployment</code>)ï¼š<strong>ä»£ç é€šè¿‡è¯„å®¡ä»¥åï¼Œè‡ªåŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚</strong>æ˜¯æŒç»­éƒ¨ç½²æ˜¯æŒç»­äº¤ä»˜çš„ä¸‹ä¸€æ­¥ï¼ŒæŒç»­éƒ¨ç½²çš„ç›®æ ‡æ˜¯ï¼Œä»£ç åœ¨ä»»ä½•æ—¶åˆ»éƒ½æ˜¯å¯éƒ¨ç½²çš„ï¼Œå¯ä»¥è¿›å…¥ç”Ÿäº§é˜¶æ®µã€‚</li></ul><h3 id="2-æŒç»­é›†æˆçš„å¥½å¤„"><a href="#2-æŒç»­é›†æˆçš„å¥½å¤„" class="headerlink" title="2 æŒç»­é›†æˆçš„å¥½å¤„"></a>2 æŒç»­é›†æˆçš„å¥½å¤„</h3><ul><li><strong>è‡ªåŠ¨åŒ–æ„å»ºä¸”çŠ¶æ€å¯¹æ¯ä¸ªäººå¯è§</strong>ã€‚å¯ä»¥ä½¿ç”¨<code>Maven</code>ã€<code>Gradle</code>ç­‰æ¥å®ç°è‡ªåŠ¨åŒ–æ„å»ºï¼Œå¯ä»¥åœ¨æ„å»ºè¿‡ç¨‹ä¸­å®ç°è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆå‰ææ˜¯æœ‰å†™å•å…ƒæµ‹è¯•ç”¨ä¾‹ï¼‰ã€‚é›†æˆæœåŠ¡å™¨åœ¨æŒç»­é›†æˆè¿‡ç¨‹ä¸­å‘ç°é—®é¢˜å¯ä»¥åŠæ—¶å‘é€è­¦å‘Šç»™ç›¸å…³çš„å¹²ç³»äººã€‚</li><li><strong>è§£æ”¾äº†é‡å¤æ€§åŠ³åŠ¨ã€‚</strong>è‡ªåŠ¨åŒ–éƒ¨ç½²å·¥ä½œå¯ä»¥è§£æ”¾é›†æˆã€æµ‹è¯•ã€éƒ¨ç½²ç­‰é‡å¤æ€§åŠ³åŠ¨ï¼Œè€Œæœºå™¨é›†æˆçš„é¢‘ç‡æ˜æ˜¾æ¯”æ‰‹å·¥é«˜å¾ˆå¤šã€‚</li><li><strong>æ›´å¿«åœ°å‘ç°å’Œä¿®å¤é—®é¢˜ã€‚</strong>æŒç»­é›†æˆæ›´æ—©çš„è·å–å˜æ›´ï¼Œæ›´æ—©çš„è¿›å…¥æµ‹è¯•ï¼Œæ›´æ—©çš„å‘ç°é—®é¢˜ï¼Œè§£å†³é—®é¢˜çš„æˆæœ¬æ˜¾è‘—ä¸‹é™ã€‚</li><li><strong>æ›´å¿«çš„äº¤ä»˜æˆæœã€‚</strong>æ›´æ—©å‘ç°é”™è¯¯å‡å°‘è§£å†³é”™è¯¯æ‰€éœ€çš„å·¥ä½œé‡ã€‚é›†æˆæœåŠ¡å™¨åœ¨æ„å»ºç¯èŠ‚å‘ç°é”™è¯¯å¯ä»¥åŠæ—¶é€šçŸ¥å¼€å‘äººå‘˜ä¿®å¤ã€‚é›†æˆæœåŠ¡å™¨åœ¨éƒ¨ç½²ç¯èŠ‚å‘ç°é”™è¯¯å¯ä»¥å›é€€åˆ°ä¸Šä¸€ç‰ˆæœ¬ï¼ŒæœåŠ¡å™¨å§‹ç»ˆæœ‰ä¸€ä¸ªå¯ç”¨çš„ç‰ˆæœ¬ã€‚</li><li><strong>å‡å°‘æ‰‹å·¥çš„é”™è¯¯ã€‚</strong>åœ¨é‡å¤æ€§åŠ¨ä½œä¸Šï¼Œäººå®¹æ˜“çŠ¯é”™ï¼Œè€Œæœºå™¨çŠ¯é”™çš„å‡ ç‡å‡ ä¹ä¸ºé›¶ã€‚</li><li><strong>å‡å°‘äº†ç­‰å¾…æ—¶é—´ã€‚</strong>ç¼©çŸ­äº†ä»å¼€å‘ã€é›†æˆã€æµ‹è¯•ã€éƒ¨ç½²å„ä¸ªç¯èŠ‚çš„æ—¶é—´ï¼Œä»è€Œä¹Ÿå°±ç¼©çŸ­äº†ä¸­é—´å¯ä»¥å‡ºç°çš„ç­‰å¾…æ—¶æœºã€‚æŒç»­é›†æˆï¼Œæ„å‘³ç€å¼€å‘ã€é›†æˆã€æµ‹è¯•ã€éƒ¨ç½²ä¹Ÿå¾—ä»¥æŒç»­ã€‚</li><li><strong>æ›´é«˜çš„äº§å“è´¨é‡ã€‚</strong>é›†æˆæœåŠ¡å™¨å¾€å¾€æä¾›ä»£ç è´¨é‡æ£€æµ‹ç­‰åŠŸèƒ½ï¼Œå¯¹ä¸è§„èŒƒæˆ–æœ‰é”™è¯¯çš„åœ°æ–¹ä¼šè¿›è¡Œæ ‡è‡´ï¼Œä¹Ÿå¯ä»¥è®¾ç½®é‚®ä»¶å’ŒçŸ­ä¿¡ç­‰è¿›è¡Œè­¦å‘Šã€‚</li></ul><h3 id="3-å¸¸ç”¨æŒç»­é›†æˆå·¥å…·"><a href="#3-å¸¸ç”¨æŒç»­é›†æˆå·¥å…·" class="headerlink" title="3 å¸¸ç”¨æŒç»­é›†æˆå·¥å…·"></a>3 å¸¸ç”¨æŒç»­é›†æˆå·¥å…·</h3><ul><li><a href="https://jenkins.io/">Jenkins</a></li><li><a href="https://docs.gitlab.com/ee/ci/README.html">GitLab CI</a></li><li><a href="https://www.jetbrains.com/teamcity/">TeamCity</a></li><li><a href="https://www.travis-ci.org/">Travis CI</a></li><li><a href="https://www.atlassian.com/software/bamboo">Bamboo</a></li><li><a href="https://circleci.com/">CircleCI</a></li><li>â€¦</li></ul><h2 id="äºŒã€Gitlab-æŒç»­é›†æˆ"><a href="#äºŒã€Gitlab-æŒç»­é›†æˆ" class="headerlink" title="äºŒã€Gitlab æŒç»­é›†æˆ"></a>äºŒã€Gitlab æŒç»­é›†æˆ</h2><p><img src="https://statics.sh1a.qingstor.com/2018/11/22/pipelines.png" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/11/22/pipelines.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="GitLab CI/CD"></p><h3 id="1-æ¦‚å¿µä»‹ç»"><a href="#1-æ¦‚å¿µä»‹ç»" class="headerlink" title="1 æ¦‚å¿µä»‹ç»"></a>1 æ¦‚å¿µä»‹ç»</h3><h4 id="1-GitLab"><a href="#1-GitLab" class="headerlink" title="(1) GitLab"></a>(1) GitLab</h4><p><a href="https://about.gitlab.com/">GitLab</a> æ˜¯ä¸€ä¸ªåˆ©ç”¨<code>Ruby on Rails</code>å¼€å‘çš„å¼€æºåº”ç”¨ç¨‹åºï¼Œå®ç°ä¸€ä¸ªè‡ªæ‰˜ç®¡çš„ Git é¡¹ç›®ä»“åº“ï¼Œå¯é€šè¿‡ Web ç•Œé¢è¿›è¡Œè®¿é—®å…¬å¼€çš„æˆ–è€…ç§äººé¡¹ç›®ã€‚å®ƒæ‹¥æœ‰ä¸<a href="https://github.com/">GitHub</a>ç±»ä¼¼çš„åŠŸèƒ½ï¼Œèƒ½å¤Ÿæµè§ˆæºä»£ç ï¼Œç®¡ç†ç¼ºé™·å’Œæ³¨é‡Šã€‚å¯ä»¥ç®¡ç†å›¢é˜Ÿå¯¹ä»“åº“çš„è®¿é—®ï¼Œå®ƒéå¸¸æ˜“äºæµè§ˆæäº¤è¿‡çš„ç‰ˆæœ¬å¹¶æä¾›ä¸€ä¸ªæ–‡ä»¶å†å²åº“ã€‚</p><h4 id="2-GitLab-CI-CD"><a href="#2-GitLab-CI-CD" class="headerlink" title="(2) GitLab CI/CD"></a>(2) GitLab CI/CD</h4><p><a href="https://docs.gitlab.com/ee/ci/README.html">GitLab CI/CD</a> æ˜¯<code>GitLab Continuous Integration</code>ï¼ˆGitlabæŒç»­é›†æˆï¼‰çš„ç®€ç§°ã€‚GitLab è‡ª<code>GitLab 8.0</code>å¼€å§‹æä¾›äº†æŒç»­é›†æˆçš„åŠŸèƒ½ï¼Œä¸”å¯¹æ‰€æœ‰é¡¹ç›®é»˜è®¤å¼€å¯ã€‚åªè¦åœ¨é¡¹ç›®ä»“åº“çš„æ ¹ç›®å½•æ·»åŠ <code>.gitlab-ci.yml</code>æ–‡ä»¶ï¼Œå¹¶ä¸”é…ç½®äº†Runnerï¼ˆè¿è¡Œå™¨ï¼‰ï¼Œé‚£ä¹ˆæ¯ä¸€æ¬¡<code>push</code>æˆ–è€…åˆå¹¶è¯·æ±‚ï¼ˆ<code>Merge Request</code>ï¼‰éƒ½ä¼šè§¦å‘<a href="https://docs.gitlab.com/ce/ci/pipelines.html">CI Pipeline</a>ã€‚</p><h4 id="3-GitLab-Runner"><a href="#3-GitLab-Runner" class="headerlink" title="(3) GitLab Runner"></a>(3) GitLab Runner</h4><p><a href="https://docs.gitlab.com/runner/">GitLab Runner</a> <code>GitLab Runner</code>æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå¯ä»¥è¿è¡Œåœ¨ GNU / Linuxï¼ŒmacOS å’Œ Windows æ“ä½œç³»ç»Ÿä¸Šã€‚æ¯æ¬¡<code>push</code>çš„æ—¶å€™ GitLab CI ä¼šæ ¹æ®<code>.gitlab-ci.yml</code>é…ç½®æ–‡ä»¶è¿è¡Œä½ æµæ°´çº¿ï¼ˆ<code>Pipeline</code>ï¼‰ä¸­å„ä¸ªé˜¶æ®µçš„ä»»åŠ¡ï¼ˆ<code>Job</code>ï¼‰ï¼Œå¹¶å°†ç»“æœå‘é€å› GitLabã€‚GitLab Runner æ˜¯åŸºäº Gitlab CI çš„ API è¿›è¡Œæ„å»ºçš„ç›¸äº’éš”ç¦»çš„æœºå™¨ï¼ˆæˆ–è™šæ‹Ÿæœºï¼‰ã€‚GitLab Runner ä¸éœ€è¦å’Œ Gitlab å®‰è£…åœ¨åŒä¸€å°æœºå™¨ä¸Šï¼Œä¸”è€ƒè™‘åˆ° GitLab Runner çš„èµ„æºæ¶ˆè€—é—®é¢˜å’Œå®‰å…¨é—®é¢˜ï¼Œä¹Ÿä¸å»ºè®®è¿™ä¸¤è€…å®‰è£…åœ¨åŒä¸€å°æœºå™¨ä¸Šã€‚</p><p>Gitlab Runner åˆ†ä¸ºä¸‰ç§ï¼š</p><ul><li>å…±äº«Runner(<code>Shared runners</code>)</li><li>ä¸“äº«Runner(<code>Specific runners</code>)</li><li>åˆ†ç»„Runner(<code>Group Runners</code>)</li></ul><h4 id="4-Pipelines"><a href="#4-Pipelines" class="headerlink" title="(4) Pipelines"></a>(4) Pipelines</h4><p><a href="https://docs.gitlab.com/ce/ci/pipelines.html">Pipelines</a> ä¸­æ–‡ç§°ä¸ºæµæ°´çº¿ï¼Œæ˜¯åˆ†é˜¶æ®µæ‰§è¡Œçš„æ„å»ºä»»åŠ¡ã€‚å¦‚ï¼šå®‰è£…ä¾èµ–ã€è¿è¡Œæµ‹è¯•ã€æ‰“åŒ…ã€éƒ¨ç½²å¼€å‘æœåŠ¡å™¨ã€éƒ¨ç½²ç”Ÿäº§æœåŠ¡å™¨ç­‰æµç¨‹ã€‚æ¯ä¸€æ¬¡<code>push</code>æˆ–è€…<code>Merge Request</code>éƒ½ä¼šè§¦å‘ç”Ÿæˆä¸€æ¡æ–°çš„Pipelineã€‚</p><p>ä¸‹é¢æ˜¯æµæ°´çº¿ç¤ºä¾‹å›¾ï¼š</p><p><img src="https://docs.gitlab.com/ce/ci/img/pipelines_index.png" class="lazyload placeholder" data-srcset="https://docs.gitlab.com/ce/ci/img/pipelines_index.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="Pipeline Status"></p><h4 id="5-Stages"><a href="#5-Stages" class="headerlink" title="(5) Stages"></a>(5) Stages</h4><p><a href="https://docs.gitlab.com/ce/ci/yaml/README.html#stages">Stages</a> è¡¨ç¤ºæ„å»ºé˜¶æ®µï¼Œå¯ä»¥ç†è§£ä¸ºä¸Šé¢æ‰€è¯´â€œå®‰è£…ä¾èµ–â€ã€â€œè¿è¡Œæµ‹è¯•â€ç­‰ç¯èŠ‚çš„æµç¨‹ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä¸€æ¬¡ Pipeline ä¸­å®šä¹‰å¤šä¸ª Stagesï¼Œè¿™äº› Stages ä¼šæœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>æ‰€æœ‰ Stages ä¼šæŒ‰ç…§é¡ºåºè¿è¡Œï¼Œå³å½“ä¸€ä¸ª Stage å®Œæˆåï¼Œä¸‹ä¸€ä¸ª Stage æ‰ä¼šå¼€å§‹ï¼ˆå½“ç„¶å¯ä»¥åœ¨<code>.gitlab-ci.yml</code>æ–‡ä»¶ä¸­é…ç½®ä¸Šä¸€é˜¶æ®µå¤±è´¥æ—¶ä¸‹ä¸€é˜¶æ®µä¹Ÿæ‰§è¡Œï¼‰</li><li>åªæœ‰å½“æ‰€æœ‰ Stages å®Œæˆåï¼Œè¯¥æ„å»ºä»»åŠ¡ (Pipeline) æ‰ä¼šæˆåŠŸ</li><li>å¦‚æœä»»ä½•ä¸€ä¸ª Stage å¤±è´¥ï¼Œé‚£ä¹ˆåé¢çš„ Stages ä¸ä¼šæ‰§è¡Œï¼Œè¯¥æ„å»ºä»»åŠ¡ (Pipeline) å¤±è´¥</li></ul><p>ä¸‹é¢æ˜¯ä¸€ä¸ªæµæ°´çº¿å†…çš„é˜¶æ®µä»»åŠ¡ç¤ºä¾‹å›¾ï¼š</p><p><img src="https://docs.gitlab.com/ce/ci/img/pipelines.png" class="lazyload placeholder" data-srcset="https://docs.gitlab.com/ce/ci/img/pipelines.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="Job Status"></p><h4 id="6-Jobs"><a href="#6-Jobs" class="headerlink" title="(6) Jobs"></a>(6) Jobs</h4><p><a href="https://docs.gitlab.com/ce/ci/pipelines.html#jobs">Jobs</a> è¡¨ç¤ºæ„å»ºçš„ä½œä¸šï¼ˆæˆ–ç§°ä¹‹ä¸ºä»»åŠ¡ï¼‰ï¼Œè¡¨ç¤ºæŸä¸ª Stage é‡Œé¢æ‰§è¡Œçš„å…·ä½“ä»»åŠ¡ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ Stages é‡Œé¢å®šä¹‰å¤šä¸ª Jobsï¼Œè¿™äº› Jobs ä¼šæœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>ç›¸åŒ Stage ä¸­çš„ Jobs æ— æ‰§è¡Œé¡ºåºè¦æ±‚ï¼Œä¼šå¹¶è¡Œæ‰§è¡Œ</li><li>ç›¸åŒ Stage ä¸­çš„ Jobs éƒ½æ‰§è¡ŒæˆåŠŸæ—¶ï¼Œè¯¥ Stage æ‰ä¼šæˆåŠŸ</li><li>å¦‚æœä»»ä½•ä¸€ä¸ª Job å¤±è´¥ï¼Œé‚£ä¹ˆè¯¥ Stage å¤±è´¥ï¼Œå³è¯¥æ„å»ºä»»åŠ¡ (Pipeline) ä¹Ÿå¤±è´¥ï¼ˆå¯ä»¥åœ¨<code>.gitlab-ci.yml</code>æ–‡ä»¶ä¸­é…ç½®å…è®¸æŸ Job å¯ä»¥å¤±è´¥ï¼Œä¹Ÿç®—è¯¥ Stage æˆåŠŸï¼‰</li></ul><h4 id="7-gitlab-ci-yml"><a href="#7-gitlab-ci-yml" class="headerlink" title="(7) .gitlab-ci.yml"></a>(7) .gitlab-ci.yml</h4><p>GitLab ä¸­é»˜è®¤å¼€å¯äº† Gitlab CI/CD çš„æ”¯æŒï¼Œä¸”ä½¿ç”¨<a href="http://yaml.org/">YAML</a>æ–‡ä»¶<a href="https://docs.gitlab.com/ee/ci/yaml/README.html#examples">.gitlab-ci.yml</a>æ¥ç®¡ç†é¡¹ç›®æ„å»ºé…ç½®ã€‚è¯¥æ–‡ä»¶éœ€è¦å­˜æ”¾äºé¡¹ç›®ä»“åº“çš„æ ¹ç›®å½•ï¼ˆé»˜è®¤è·¯å¾„ï¼Œå¯åœ¨ GitLab ä¸­ä¿®æ”¹ï¼‰ï¼Œå®ƒå®šä¹‰è¯¥é¡¹ç›®çš„ CI/CD å¦‚ä½•é…ç½®ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨<code>.gitlab-ci.yml</code>é…ç½®æ–‡ä»¶ä¸­å®šä¹‰æµæ°´çº¿çš„å„ä¸ªé˜¶æ®µï¼Œä»¥åŠå„ä¸ªé˜¶æ®µä¸­çš„è‹¥å¹²ä½œä¸šï¼ˆä»»åŠ¡ï¼‰å³å¯ã€‚</p><p>ä¸‹é¢æ˜¯<code>.gitlab-ci.yml</code>æ–‡ä»¶çš„ä¸€ä¸ªç®€å•çš„<code>Hello World</code>ç¤ºä¾‹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># å®šä¹‰ test å’Œ package ä¸¤ä¸ª Stages</span><span class="token key atrule">stages</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> test  <span class="token punctuation">-</span> package<span class="token comment"># å®šä¹‰ package é˜¶æ®µçš„ä¸€ä¸ª job</span><span class="token key atrule">package-job</span><span class="token punctuation">:</span>  <span class="token key atrule">stage</span><span class="token punctuation">:</span> package  <span class="token key atrule">script</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> echo "Hello<span class="token punctuation">,</span> package<span class="token punctuation">-</span>job"    <span class="token punctuation">-</span> echo "I am in package stage"<span class="token comment"># å®šä¹‰ test é˜¶æ®µçš„ä¸€ä¸ª job</span><span class="token key atrule">test-job</span><span class="token punctuation">:</span>  <span class="token key atrule">stage</span><span class="token punctuation">:</span> test  <span class="token key atrule">script</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> echo "Hello<span class="token punctuation">,</span> test<span class="token punctuation">-</span>job"    <span class="token punctuation">-</span> echo "I am in test stage"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»¥ä¸Šé…ç½®ä¸­ï¼Œç”¨ stages å…³é”®å­—æ¥å®šä¹‰ Pipeline ä¸­çš„å„ä¸ªæ„å»ºé˜¶æ®µï¼Œç„¶åç”¨ä¸€äº›éå…³é”®å­—æ¥å®šä¹‰ jobsã€‚æ¯ä¸ª job ä¸­å¯ä»¥å¯ä»¥å†ç”¨ stage å…³é”®å­—æ¥æŒ‡å®šè¯¥ job å¯¹åº”å“ªä¸ª stageã€‚job é‡Œé¢çš„<code>script</code>å…³é”®å­—æ˜¯æ¯ä¸ª job ä¸­å¿…é¡»è¦åŒ…å«çš„ï¼Œå®ƒè¡¨ç¤ºæ¯ä¸ª job è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚</p><blockquote><p><strong>æ³¨</strong>ï¼šçŒœçŒœä¸Šé¢ä¾‹å­çš„è¿è¡Œç»“æœï¼Ÿ</p></blockquote><h4 id="8-Badges"><a href="#8-Badges" class="headerlink" title="(8) Badges"></a>(8) Badges</h4><p><a href="https://docs.gitlab.com/ce/ci/pipelines.html#badges">Badges</a> å³ï¼š<strong>å¾½ç« </strong>ï¼Œå½“ Pipelines æ‰§è¡Œè¿‡ç¨‹ä¸­æˆ–è€…æ‰§è¡Œå®Œæˆæ—¶ä¼šç”Ÿæˆå¾½ç« ï¼Œä½ å¯ä»¥å°†è¿™äº›å¾½ç« åŠ å…¥åˆ°ä½ çš„<code>README.md</code>æ–‡ä»¶ä¸­ï¼Œä¾¿äºä»ä»“åº“ä¸»é¡µçœ‹åˆ°æœ€æ–°çš„æ„å»ºçŠ¶æ€ã€‚</p><p>å¾½ç« çš„é“¾æ¥å½¢å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">http://example.gitlab.com/namespace/project/badges/branch/build.svg <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æˆ‘ä»¬ç”¨ GitLab é¡¹ç›®çš„å¾½ç« ä½œä¸ºä¾‹å­ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://gitlab.com/gitlab-org/gitlab-ce/badges/master/build.svg" class="lazyload placeholder" data-srcset="https://gitlab.com/gitlab-org/gitlab-ce/badges/master/build.svg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="Gitlab build badges"> <img src="https://gitlab.com/gitlab-org/gitlab-ce/badges/master/coverage.svg?job=coverage" class="lazyload placeholder" data-srcset="https://gitlab.com/gitlab-org/gitlab-ce/badges/master/coverage.svg?job=coverage" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="Gitlab coverage badges"></p><h3 id="2-å®‰è£…-GitLab-Runner"><a href="#2-å®‰è£…-GitLab-Runner" class="headerlink" title="2 å®‰è£… GitLab Runner"></a>2 å®‰è£… GitLab Runner</h3><p><a href="https://docs.gitlab.com/runner/install/index.html">è¿™é‡Œ</a>æœ‰ GitLab Runnerå®‰è£…ç›¸å…³çš„èµ„æºå’Œæ–‡æ¡£å¯ä¾›å¤§å®¶å‚è€ƒã€‚ä»¥ä¸‹ä»…ä»¥å’±ä»¬å…¬å¸å¸¸ç”¨çš„<code>Centos</code>ä¸ºä¾‹æ¥åšå®‰è£…è¯´æ˜ã€‚</p><h4 id="1-åœ¨çº¿å®‰è£…"><a href="#1-åœ¨çº¿å®‰è£…" class="headerlink" title="(1) åœ¨çº¿å®‰è£…"></a>(1) åœ¨çº¿å®‰è£…</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ·»åŠ å®˜æ–¹çš„repo.</span><span class="token function">curl</span> -L https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.rpm.sh <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">bash</span><span class="token comment"># yum å®‰è£…Gtilab Runner.</span><span class="token function">sudo</span> yum <span class="token function">install</span> gitlab-runner<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-ç¦»çº¿å®‰è£…"><a href="#2-ç¦»çº¿å®‰è£…" class="headerlink" title="(2) ç¦»çº¿å®‰è£…"></a>(2) ç¦»çº¿å®‰è£…</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å®‰è£…Git</span><span class="token function">sudo</span> yum â€“y <span class="token function">install</span> <span class="token function">git</span><span class="token comment"># rpmç¦»çº¿å®‰è£…äº‹å…ˆä¸‹è½½å¥½çš„ Gitlab Runner rpmåŒ….</span><span class="token function">rpm</span> -ivh gitlab-runner-10.5.0-1.x86_64.rpm<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>æ³¨</strong>ï¼šGitlab Runner ä¾èµ–äº†<code>Git</code>ï¼Œæ‰€ä»¥ï¼Œç¦»çº¿å®‰è£… Gitlab Runner ä¹‹å‰å¾—é¦–å…ˆå®‰è£…Gitï¼Œç¦»çº¿å®‰è£…åŒ…å¯ä»¥ä»<a href="https://packages.gitlab.com/runner/gitlab-runner">è¿™é‡Œ</a>ä¸‹è½½ã€‚</p></blockquote><h3 id="3-æ³¨å†Œ-Gitlab-Runner"><a href="#3-æ³¨å†Œ-Gitlab-Runner" class="headerlink" title="3 æ³¨å†Œ Gitlab Runner"></a>3 æ³¨å†Œ Gitlab Runner</h3><p>å®‰è£…äº† GitLab Runner ä¹‹å,å°±å¯ä»¥ä¸º GitLab ä¸­çš„ä»“åº“<a href="https://docs.gitlab.com/runner/register/index.html">æ³¨å†Œä¸€ä¸ª Runner</a>ï¼Œæ³¨å†Œçš„äº¤äº’å¼å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> gitlab-runner register<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å‘½ä»¤çš„äº¤äº’å¼çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># è¾“å…¥æ³¨å†Œå‘½ä»¤</span><span class="token function">sudo</span> gitlab-runner register<span class="token comment"># è¾“å…¥å…¬å¸çš„ GitLab ç½‘ç«™åœ°å€</span>Please enter the gitlab-ci coordinator URL <span class="token punctuation">(</span>e.g. https://gitlab.com <span class="token punctuation">)</span>http://gitlab.xxxx.com/<span class="token comment"># ä½ é¡¹ç›®ä»“åº“çš„tokenï¼Œtokenå¯ä»¥åœ¨ Settings -> CI/CD -> Runners settings ä¸­æ‰¾åˆ°.</span>Please enter the gitlab-ci token <span class="token keyword">for</span> this runnerxxx<span class="token comment"># è¾“å…¥æè¿°è¿™ä¸ª runner çš„åç§°</span>Please enter the gitlab-ci description <span class="token keyword">for</span> this runner<span class="token punctuation">[</span>hostame<span class="token punctuation">]</span> my-runner<span class="token comment"># è¾“å…¥ runner çš„æ ‡ç­¾</span>Please enter the gitlab-ci tags <span class="token keyword">for</span> this runner <span class="token punctuation">(</span>comma separated<span class="token punctuation">)</span>:my-tag,another-tag<span class="token comment"># è¾“å…¥ runner çš„æ‰§è¡Œå™¨.</span>Please enter the executor: ssh, docker+machine, docker-ssh+machine, kubernetes, docker, parallels, virtualbox, docker-ssh, shell:shell<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»¥ä¸Šæµç¨‹æ³¨å†ŒæˆåŠŸä¹‹åï¼Œå°±å¯ä»¥åœ¨ä½ çš„é¡¹ç›®ä»“åº“ä¸­ <code>Settings</code> -&gt; <code>CI/CD</code> -&gt; <code>Runners settings</code> çœ‹åˆ°è¿™ä¸ª Runner äº†ã€‚</p><h3 id="4-Gitlab-Runner-å¸¸ç”¨å‘½ä»¤æ±‡æ€»"><a href="#4-Gitlab-Runner-å¸¸ç”¨å‘½ä»¤æ±‡æ€»" class="headerlink" title="4 Gitlab Runner å¸¸ç”¨å‘½ä»¤æ±‡æ€»"></a>4 Gitlab Runner å¸¸ç”¨å‘½ä»¤æ±‡æ€»</h3><p>ä¸‹é¢çš„è¡¨æ ¼ä¸­åˆ—å‡ºäº†ä¸€äº›å¸¸ç”¨çš„<a href="https://docs.gitlab.com/runner/commands/README.html#gitlab-runner-list">Gitlab Runnerå‘½ä»¤</a>ï¼Œä»¥ä¾›å‚è€ƒï¼š</p><table><thead><tr><th>å‘½ä»¤</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td>gitlab-runner run</td><td align="left">è¿è¡Œä¸€ä¸ªrunneræœåŠ¡</td></tr><tr><td>gitlab-runner register</td><td align="left">æ³¨å†Œä¸€ä¸ªæ–°çš„runner</td></tr><tr><td>gitlab-runner start</td><td align="left">å¯åŠ¨æœåŠ¡</td></tr><tr><td>gitlab-runner stop</td><td align="left">å…³é—­æœåŠ¡</td></tr><tr><td>gitlab-runner restart</td><td align="left">é‡å¯æœåŠ¡</td></tr><tr><td>gitlab-runner status</td><td align="left">æŸ¥çœ‹å„ä¸ªrunnerçš„çŠ¶æ€</td></tr><tr><td>gitlab-runner unregister</td><td align="left">æ³¨é”€æ‰æŸä¸ªrunner</td></tr><tr><td>gitlab-runner list</td><td align="left">æ˜¾ç¤ºæ‰€æœ‰è¿è¡Œç€çš„runner</td></tr><tr><td>gitlab-runner verify</td><td align="left">æ£€æŸ¥å·²æ³¨å†Œçš„è¿è¡Œç¨‹åºæ˜¯å¦å¯ä»¥è¿æ¥åˆ°GitLabï¼Œä½†å®ƒä¸éªŒè¯GitLab RunneræœåŠ¡æ˜¯å¦æ­£åœ¨ä½¿ç”¨è¿è¡Œç¨‹åºã€‚</td></tr></tbody></table><h2 id="ä¸‰ã€ä¸€ä¸ªWebé¡¹ç›®-CI-CD-ç®€å•ç¤ºä¾‹"><a href="#ä¸‰ã€ä¸€ä¸ªWebé¡¹ç›®-CI-CD-ç®€å•ç¤ºä¾‹" class="headerlink" title="ä¸‰ã€ä¸€ä¸ªWebé¡¹ç›® CI/CD ç®€å•ç¤ºä¾‹"></a>ä¸‰ã€ä¸€ä¸ªWebé¡¹ç›® CI/CD ç®€å•ç¤ºä¾‹</h2><p>æ¥ä¸‹æ¥ï¼Œç”¨ä¸€ä¸ªå®é™…é¡¹ç›®æ¥æ¼”ç¤º GitLab CI/CD çš„é…ç½®å’Œä½¿ç”¨ï¼Œå…¶ä¸­ä¸»è¦åŒ…æ‹¬ï¼šç¼–è¯‘æµ‹è¯•ã€é¡¹ç›®æ‰“åŒ…ã€éƒ¨ç½²æœåŠ¡ã€Sonaræ‰‹åŠ¨æ£€æŸ¥ã€Sonarå®šæ—¶æ£€æŸ¥äº”ä¸ªé˜¶æ®µã€‚</p><p>ä¸‹é¢ç”¨ä¸€ä¸ªä¼ ç»Ÿçš„ Java web é¡¹ç›®(è¿™é‡Œç§°ä¹‹ä¸º<code>cidemo</code>)å’Œ<code>Tomcat</code>æ¥ä½œä¸ºç¤ºä¾‹ï¼Œå¹¶ç”¨æ¥å±•ç¤ºå¸¸ç”¨é…ç½®çš„ä½¿ç”¨ã€‚å½“æˆ‘æ¯æ¬¡<code>push</code>ä»£ç æˆ–è€…<code>Merge Request</code>æ—¶ï¼Œéƒ½ä¼šç”Ÿæˆä¸€æ¡æµæ°´çº¿ï¼Œä¸”ä¼šè‡ªåŠ¨æ‰§è¡Œæˆ‘ä»¬ä¸Šé¢æ‰€è¯´çš„ä¸€äº›é˜¶æ®µï¼Œè€ŒSonaræ‰‹åŠ¨æ£€æŸ¥æˆ‘ä»¬è®¾ç½®ä¸ºæ‰‹åŠ¨æ“ä½œï¼Œä¸”å†é¢å¤–é…ç½®Sonarå®šæ—¶æ£€æŸ¥çš„ä»»åŠ¡ã€‚</p><blockquote><p><strong>æ³¨</strong>ï¼šæˆ‘ Gitlab Runner æ˜¯å®‰è£…åœ¨<code>Centos</code>ç¯å¢ƒä¸­ï¼Œå¹¶ä½¿ç”¨çš„<code>shell</code>æ‰§è¡Œå™¨ã€‚</p></blockquote><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># å®šä¹‰stages</span><span class="token key atrule">stages</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> test  <span class="token punctuation">-</span> install  <span class="token punctuation">-</span> run  <span class="token punctuation">-</span> sonar<span class="token comment"># å®šä¹‰å®‰è£…åŒ…çš„å­˜æ”¾ä½ç½®å’ŒTomcatæœåŠ¡å™¨çš„åœ°å€çš„å˜é‡ï¼Œä¾¿äºåç»­éƒ¨ç½²ä½¿ç”¨.</span><span class="token key atrule">variables</span><span class="token punctuation">:</span>  <span class="token key atrule">CIDEMO_PACKAGE_DIR</span><span class="token punctuation">:</span> <span class="token string">'/home/gitlab-runner/packages/cidemo/'</span>  <span class="token key atrule">SERVER_HOME_DIR</span><span class="token punctuation">:</span> <span class="token string">'/home/gitlab-runner/tomcat/cidemo-tomcat/'</span><span class="token comment">###################### æ„å»ºç¼–è¯‘å’Œå•å…ƒæµ‹è¯•çš„job. #######################</span><span class="token key atrule">ç¼–è¯‘æµ‹è¯•ä»»åŠ¡</span><span class="token punctuation">:</span>  <span class="token key atrule">stage</span><span class="token punctuation">:</span> test  <span class="token key atrule">only</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> branches  <span class="token key atrule">script</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> mvn clean test<span class="token comment">###################### Mavenå®‰è£…å¾—åˆ°waråŒ…çš„job. #######################</span><span class="token key atrule">æ‰“åŒ…ä»»åŠ¡</span><span class="token punctuation">:</span>  <span class="token key atrule">stage</span><span class="token punctuation">:</span> install  <span class="token key atrule">only</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> develop  <span class="token key atrule">script</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> mvn install    <span class="token punctuation">-</span> echo 'å‡†å¤‡å°†æœ€æ–°çš„waråŒ…å¤åˆ¶ã€ä¿å­˜åˆ°æŸä¸ªç›®å½•é‡Œé¢ä¾›åç»­ä½¿ç”¨.'    <span class="token punctuation">-</span> rm <span class="token punctuation">-</span>rf $CIDEMO_PACKAGE_DIR/<span class="token important">*.war</span>    <span class="token punctuation">-</span> cp target/<span class="token important">*.war</span> $CIDEMO_PACKAGE_DIR/cidemo.war<span class="token comment">####################### éƒ¨ç½²è¿è¡ŒwaråŒ…çš„job. #######################</span><span class="token key atrule">éƒ¨ç½²è¿è¡Œä»»åŠ¡</span><span class="token punctuation">:</span>  <span class="token key atrule">stage</span><span class="token punctuation">:</span> run  <span class="token key atrule">only</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> develop  <span class="token key atrule">script</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> echo 'å‡†å¤‡éƒ¨ç½²å’Œè¿è¡ŒwaråŒ…ï¼(ä¸ºäº†æ–¹ä¾¿éƒ¨ç½²åˆ°äº†Tomcatä¸­è¿è¡Œ)'    <span class="token punctuation">-</span> cd $SERVER_HOME_DIR    <span class="token punctuation">-</span> sh bin/shutdown.sh    <span class="token punctuation">-</span> rm <span class="token punctuation">-</span>rf webapps/cidemo.war    <span class="token punctuation">-</span> cp $CIDEMO_PACKAGE_DIR/cidemo.war $SERVER_HOME_DIR/webapps/cidemo.war    <span class="token punctuation">-</span> nohup sh ./bin/startup.sh <span class="token punctuation">></span> logs/cidemo_nohup.log 2<span class="token punctuation">></span><span class="token important">&amp;1</span> &amp;<span class="token comment">###################### Sonaræ‰‹åŠ¨æ„å»ºçš„job. #######################</span><span class="token key atrule">Sonaræ‰‹åŠ¨æ£€æŸ¥</span><span class="token punctuation">:</span>  <span class="token key atrule">stage</span><span class="token punctuation">:</span> sonar  <span class="token key atrule">when</span><span class="token punctuation">:</span> manual  <span class="token key atrule">only</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> develop  <span class="token key atrule">script</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> echo 'å‡†å¤‡å¯¹é¡¹ç›®ä»£ç åšsonarçš„è´¨é‡æ£€æŸ¥ï¼'    <span class="token punctuation">-</span> mvn compile <span class="token important">&amp;&amp;</span> mvn sonar<span class="token punctuation">:</span>sonar <span class="token punctuation">-</span>Dsonar.host.url=http<span class="token punctuation">:</span>//172.16.34.102<span class="token punctuation">:</span>9000 <span class="token punctuation">-</span>Dsonar.login=497a0e0e2fc07f64c4b54edc17bb47dfa251ba34<span class="token comment">###################### Sonaræ¯æ™šå®šæ—¶æ„å»ºçš„job. #######################</span><span class="token key atrule">Sonarå®šæ—¶æ£€æŸ¥</span><span class="token punctuation">:</span>  <span class="token key atrule">stage</span><span class="token punctuation">:</span> sonar  <span class="token key atrule">only</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> schedules  <span class="token key atrule">script</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> echo 'å¼€å§‹å®šæ—¶å¯¹é¡¹ç›®ä»£ç åšsonarçš„è´¨é‡æ£€æŸ¥ï¼'    <span class="token punctuation">-</span> mvn compile <span class="token important">&amp;&amp;</span> mvn sonar<span class="token punctuation">:</span>sonar <span class="token punctuation">-</span>Dsonar.host.url=http<span class="token punctuation">:</span>//172.16.34.102<span class="token punctuation">:</span>9000 <span class="token punctuation">-</span>Dsonar.login=497a0e0e2fc07f64c4b54edc17bb47dfa251ba34<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å››ã€Gitlab-CI-CD-yaml-å¸¸ç”¨é…ç½®ä»‹ç»"><a href="#å››ã€Gitlab-CI-CD-yaml-å¸¸ç”¨é…ç½®ä»‹ç»" class="headerlink" title="å››ã€Gitlab CI/CD yaml å¸¸ç”¨é…ç½®ä»‹ç»"></a>å››ã€Gitlab CI/CD yaml å¸¸ç”¨é…ç½®ä»‹ç»</h2><p>å¼€å§‹æ„å»ºä¹‹å‰<code>.gitlab-ci.yml</code>æ–‡ä»¶å®šä¹‰äº†ä¸€ç³»åˆ—å¸¦æœ‰çº¦æŸè¯´æ˜çš„ä»»åŠ¡ã€‚è¿™äº›ä»»åŠ¡éƒ½æ˜¯ä»¥ä»»åŠ¡åå¼€å§‹å¹¶ä¸”è‡³å°‘è¦åŒ…å«scriptéƒ¨åˆ†ï¼Œ<code>.gitlab-ci.yml</code>å…è®¸æŒ‡å®šæ— é™é‡ jobsã€‚æ¯ä¸ª jobs å¿…é¡»æœ‰ä¸€ä¸ªå”¯ä¸€çš„åå­—ï¼Œä¸”åå­—ä¸èƒ½æ˜¯ä¸‹é¢åˆ—å‡ºçš„ä¿ç•™å­—æ®µï¼š</p><ul><li><code>image</code></li><li><code>services</code></li><li><code>stages</code></li><li><code>types</code></li><li><code>before_script</code></li><li><code>after_script</code></li><li><code>variables</code></li><li><code>cache</code></li></ul><p>jobç”±ä¸€åˆ—å‚æ•°æ¥å®šä¹‰ jobs çš„è¡Œä¸ºï¼š</p><table><thead><tr><th>Keyword</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>script</td><td>yes</td><td>Runneræ‰§è¡Œçš„å‘½ä»¤æˆ–è„šæœ¬</td></tr><tr><td>extends</td><td>no</td><td>å®šä¹‰æ­¤ä½œä¸šå°†ç»§æ‰¿çš„é…ç½®æ¡ç›®</td></tr><tr><td>image</td><td>no</td><td>æ‰€ä½¿ç”¨çš„dockeré•œåƒï¼ŒæŸ¥é˜…<a href="https://docs.gitlab.com/ce/ci/docker/using_docker_images.html#define-image-and-services-from-gitlab-ciyml">ä½¿ç”¨dockeré•œåƒ</a></td></tr><tr><td>services</td><td>no</td><td>æ‰€ä½¿ç”¨çš„dockeræœåŠ¡ï¼ŒæŸ¥é˜…<a href="https://docs.gitlab.com/ce/ci/docker/using_docker_images.html#define-image-and-services-from-gitlab-ciyml">ä½¿ç”¨dockeré•œåƒ</a></td></tr><tr><td>stage</td><td>no</td><td>å®šä¹‰job stageï¼ˆé»˜è®¤ï¼š<code>test</code>ï¼‰</td></tr><tr><td>type</td><td>no</td><td><code>stage</code>çš„åˆ«åï¼ˆå·²å¼ƒç”¨ï¼‰</td></tr><tr><td>variables</td><td>no</td><td>å®šä¹‰jobçº§åˆ«çš„å˜é‡</td></tr><tr><td>only</td><td>no</td><td>å®šä¹‰ä¸€åˆ—gitåˆ†æ”¯ï¼Œå¹¶ä¸ºå…¶åˆ›å»ºjob</td></tr><tr><td>except</td><td>no</td><td>å®šä¹‰ä¸€åˆ—gitåˆ†æ”¯ï¼Œä¸åˆ›å»ºjob</td></tr><tr><td>tags</td><td>no</td><td>å®šä¹‰ä¸€åˆ—tagsï¼Œç”¨æ¥æŒ‡å®šé€‰æ‹©å“ªä¸ªRunnerï¼ˆåŒæ—¶Runnerä¹Ÿè¦è®¾ç½®tagsï¼‰</td></tr><tr><td>allow_failure</td><td>no</td><td>å…è®¸jobå¤±è´¥ã€‚å¤±è´¥çš„jobä¸å½±å“commitçŠ¶æ€</td></tr><tr><td>when</td><td>no</td><td>å®šä¹‰ä½•æ—¶å¼€å§‹jobã€‚å¯ä»¥æ˜¯<code>on_success</code>ï¼Œ<code>on_failure</code>ï¼Œ<code>always</code>æˆ–è€…<code>manual</code></td></tr><tr><td>dependencies</td><td>no</td><td>å®šä¹‰jobä¾èµ–å…³ç³»ï¼Œè¿™æ ·ä»–ä»¬å°±å¯ä»¥äº’ç›¸ä¼ é€’artifacts</td></tr><tr><td>cache</td><td>no</td><td>å®šä¹‰åº”åœ¨åç»­è¿è¡Œä¹‹é—´ç¼“å­˜çš„æ–‡ä»¶åˆ—è¡¨</td></tr><tr><td>before_script</td><td>no</td><td>é‡å†™ä¸€ç»„åœ¨ä½œä¸šå‰æ‰§è¡Œçš„å‘½ä»¤</td></tr><tr><td>after_script</td><td>no</td><td>é‡å†™ä¸€ç»„åœ¨ä½œä¸šåæ‰§è¡Œçš„å‘½ä»¤</td></tr><tr><td>environment</td><td>no</td><td>å®šä¹‰æ­¤ä½œä¸šå®Œæˆéƒ¨ç½²çš„ç¯å¢ƒåç§°</td></tr><tr><td>coverage</td><td>no</td><td>å®šä¹‰ç»™å®šä½œä¸šçš„ä»£ç è¦†ç›–ç‡è®¾ç½®</td></tr><tr><td>etry</td><td>no</td><td>å®šä¹‰åœ¨å‘ç”Ÿæ•…éšœæ—¶å¯ä»¥è‡ªåŠ¨é‡è¯•ä½œä¸šçš„æ—¶é—´å’Œæ¬¡æ•°</td></tr><tr><td>parallel</td><td>no</td><td>å®šä¹‰åº”å¹¶è¡Œè¿è¡Œçš„ä½œä¸šå®ä¾‹æ•°</td></tr></tbody></table><h3 id="extends"><a href="#extends" class="headerlink" title="extends"></a>extends</h3><blockquote><p>æ˜¯åœ¨ GitLab 11.3 ä¸­å¼•å…¥çš„ã€‚</p></blockquote><p><code>extends</code>å®šä¹‰äº†ä¸€ä¸ªä½¿ç”¨<code>extends</code>çš„ä½œä¸šå°†ç»§æ‰¿çš„æ¡ç›®åç§°ã€‚å®ƒæ˜¯ä½¿ç”¨<a href="https://docs.gitlab.com/ee/ci/yaml/README.html#anchors">YAMLé”šç‚¹</a>çš„æ›¿ä»£æ–¹æ¡ˆï¼Œå¹¶ä¸”æ›´åŠ çµæ´»å’Œå¯è¯»ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">.tests</span><span class="token punctuation">:</span>  <span class="token key atrule">script</span><span class="token punctuation">:</span> rake test  <span class="token key atrule">stage</span><span class="token punctuation">:</span> test  <span class="token key atrule">only</span><span class="token punctuation">:</span>    <span class="token key atrule">refs</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> branches<span class="token key atrule">rspec</span><span class="token punctuation">:</span>  <span class="token key atrule">extends</span><span class="token punctuation">:</span> .tests  <span class="token key atrule">script</span><span class="token punctuation">:</span> rake rspec  <span class="token key atrule">only</span><span class="token punctuation">:</span>    <span class="token key atrule">variables</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> $RSPEC<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œ<code>rspec</code>ä½œä¸šç»§æ‰¿è‡ª<code>.tests</code>æ¨¡æ¿ä½œä¸šã€‚ GitLab å°†æ ¹æ®é”®æ‰§è¡Œåå‘æ·±åº¦åˆå¹¶ã€‚ GitLabå°†ï¼š</p><ul><li>å°†<code>rspec</code>å†…å®¹ä»¥é€’å½’æ–¹å¼åˆå¹¶åˆ°<code>.tests</code>ä¸­ã€‚</li><li>ä¸åˆå¹¶é”®çš„å€¼ã€‚</li></ul><p>è¿™å®é™…ç”Ÿæˆçš„æ˜¯ä»¥ä¸‹<code>rspec</code>ä½œä¸šï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">rspec</span><span class="token punctuation">:</span>  <span class="token key atrule">script</span><span class="token punctuation">:</span> rake rspec  <span class="token key atrule">stage</span><span class="token punctuation">:</span> test  <span class="token key atrule">only</span><span class="token punctuation">:</span>    <span class="token key atrule">refs</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> branches    <span class="token key atrule">variables</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> $RSPEC<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>æ³¨</strong>: <code>rake test</code>å·²è¢«<code>rake rspec</code>è„šæœ¬è¦†ç›–ã€‚</p></blockquote><h3 id="image-å’Œ-services"><a href="#image-å’Œ-services" class="headerlink" title="image å’Œ services"></a>image å’Œ services</h3><p>è¿™ä¸¤ä¸ªå…³é”®å­—å…è®¸ä½¿ç”¨ä¸€ä¸ªè‡ªå®šä¹‰çš„ Docker é•œåƒå’Œä¸€ç³»åˆ—çš„æœåŠ¡ï¼Œå¹¶ä¸”å¯ä»¥ç”¨äºæ•´ä¸ª job å‘¨æœŸã€‚è¯¦ç»†é…ç½®æ–‡æ¡£è¯·æŸ¥çœ‹<a href="https://docs.gitlab.com/ee/ci/docker/README.html">a separate document</a>ã€‚</p><h3 id="before-script-å’Œ-after-script"><a href="#before-script-å’Œ-after-script" class="headerlink" title="before_script å’Œ after_script"></a>before_script å’Œ after_script</h3><p><code>before_script</code>ç”¨æ¥å®šä¹‰æ‰€æœ‰ job ä¹‹å‰è¿è¡Œçš„å‘½ä»¤ï¼Œ<code>after_script</code>ç”¨æ¥å®šä¹‰æ‰€æœ‰ job ä¹‹åè¿è¡Œçš„å‘½ä»¤ã€‚å®ƒä»¬å¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„æˆ–è€…æ˜¯å¤šè¡Œå­—ç¬¦ä¸²ã€‚</p><h3 id="stages"><a href="#stages" class="headerlink" title="stages"></a>stages</h3><p>stages ç”¨æ¥å®šä¹‰å¯ä»¥è¢« job è°ƒç”¨çš„ stagesã€‚stages çš„è§„èŒƒå…è®¸æœ‰çµæ´»çš„å¤šçº§ pipelinesã€‚</p><p>stagesä¸­çš„å…ƒç´ é¡ºåºå†³å®šäº†å¯¹åº”jobçš„æ‰§è¡Œé¡ºåºï¼š</p><ol><li>ç›¸åŒ stage çš„ job å¯ä»¥å¹³è¡Œæ‰§è¡Œã€‚</li><li>ä¸‹ä¸€ä¸ª stage çš„ job ä¼šåœ¨å‰ä¸€ä¸ª stage çš„ job æˆåŠŸåå¼€å§‹æ‰§è¡Œã€‚</li></ol><p>æ¥ä¸‹ä»”ç»†çœ‹çœ‹è¿™ä¸ªä¾‹å­ï¼Œå®ƒåŒ…å«äº†3ä¸ª stageï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">stages</span><span class="token punctuation">:</span> <span class="token punctuation">-</span> build <span class="token punctuation">-</span> test <span class="token punctuation">-</span> deploy<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ol><li>é¦–å…ˆï¼Œæ‰€æœ‰ build çš„ jobs éƒ½æ˜¯å¹¶è¡Œæ‰§è¡Œçš„ã€‚</li><li>æ‰€æœ‰ build çš„ jobs æ‰§è¡ŒæˆåŠŸåï¼Œtest çš„ jobs æ‰ä¼šå¼€å§‹å¹¶è¡Œæ‰§è¡Œã€‚</li><li>æ‰€æœ‰ test çš„ jobs æ‰§è¡ŒæˆåŠŸï¼Œdeploy çš„ jobs æ‰ä¼šå¼€å§‹å¹¶è¡Œæ‰§è¡Œã€‚</li><li>æ‰€æœ‰çš„ deploy çš„ jobs æ‰§è¡ŒæˆåŠŸï¼Œ<code>commit</code>æ‰ä¼šæ ‡è®°ä¸º<code>success</code>ã€‚</li><li>ä»»ä½•ä¸€ä¸ªå‰ç½®çš„ jobs å¤±è´¥äº†ï¼Œ<code>commit</code>ä¼šæ ‡è®°ä¸º<code>failed</code>å¹¶ä¸”ä¸‹ä¸€ä¸ª stages çš„ jobs éƒ½ä¸ä¼šæ‰§è¡Œã€‚</li></ol><p>è¿™æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„ä¾‹å­å€¼å¾—ä¸€æï¼š</p><ol><li>å¦‚æœ<code>.gitlab-ci.yml</code>ä¸­æ²¡æœ‰å®šä¹‰stagesï¼Œé‚£ä¹ˆ jobâ€™s stages ä¼šé»˜è®¤å®šä¹‰ä¸º<code>build</code>ï¼Œ<code>test</code>å’Œ<code>deploy</code>ã€‚</li><li>å¦‚æœä¸€ä¸ª job æ²¡æœ‰æŒ‡å®š stageï¼Œé‚£ä¹ˆè¿™ä¸ªä»»åŠ¡ä¼šåˆ†é…åˆ° test stageã€‚</li></ol><h3 id="only-å’Œ-except"><a href="#only-å’Œ-except" class="headerlink" title="only å’Œ except"></a>only å’Œ except</h3><p><code>only</code>å’Œ<code>except</code>æ˜¯ä¸¤ä¸ªå‚æ•°ç”¨åˆ†æ”¯ç­–ç•¥æ¥é™åˆ¶ jobs æ„å»ºï¼š</p><ul><li><code>only</code>å®šä¹‰å“ªäº›åˆ†æ”¯å’Œæ ‡ç­¾çš„gité¡¹ç›®å°†ä¼šè¢«jobæ‰§è¡Œã€‚</li><li><code>except</code>å®šä¹‰å“ªäº›åˆ†æ”¯å’Œæ ‡ç­¾çš„gité¡¹ç›®å°†ä¸ä¼šè¢«jobæ‰§è¡Œã€‚</li></ul><p>ä¸‹é¢æ˜¯refsç­–ç•¥çš„ä½¿ç”¨è§„åˆ™ï¼š</p><ul><li>only å’Œ except å¯åŒæ—¶ä½¿ç”¨ã€‚å¦‚æœ<code>only</code>å’Œ<code>except</code>åœ¨ä¸€ä¸ª job é…ç½®ä¸­åŒæ—¶å­˜åœ¨ï¼Œåˆ™ä»¥ only ä¸ºå‡†ï¼Œè·³è¿‡ except(ä»ä¸‹é¢ç¤ºä¾‹ä¸­å¾—å‡º)ã€‚</li><li>only å’Œ except å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ã€‚</li><li>only å’Œ except å…è®¸ä½¿ç”¨ç‰¹æ®Šçš„å…³é”®å­—ï¼š<code>branches</code>ï¼Œ<code>tags</code>å’Œ<code>triggers</code>ã€‚</li><li>only å’Œ except å…è®¸ä½¿ç”¨æŒ‡å®šä»“åº“åœ°å€ä½†ä¸æ˜¯forksçš„ä»“åº“(æŸ¥çœ‹ç¤ºä¾‹3)ã€‚</li></ul><p>åœ¨ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œjob å°†åªä¼šè¿è¡Œä»¥<code>issue-</code>å¼€å§‹çš„refs(åˆ†æ”¯)ï¼Œç„¶è€Œ<code>except</code>ä¸­è®¾ç½®å°†è¢«è·³è¿‡ã€‚</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">job</span><span class="token punctuation">:</span>  <span class="token comment"># use regexp</span>  <span class="token key atrule">only</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> /^issue<span class="token punctuation">-</span>.<span class="token important">*$/</span>  <span class="token comment"># use special keyword</span>  <span class="token key atrule">except</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> branches<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œjob å°†åªä¼šæ‰§è¡Œæœ‰<code>tags</code>çš„refsï¼Œæˆ–è€…é€šè¿‡<code>API</code>è§¦å‘å™¨æ˜ç¡®åœ°è¯·æ±‚æ„å»ºã€‚</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">job</span><span class="token punctuation">:</span>  <span class="token comment"># use special keywords</span>  <span class="token key atrule">only</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> tags    <span class="token punctuation">-</span> triggers<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸‹é¢è¿™ä¸ªä¾‹å­å°†ä¼šä¸ºæ‰€æœ‰çš„åˆ†æ”¯æ‰§è¡Œjobï¼Œä½† master åˆ†æ”¯é™¤å¤–ã€‚</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">job</span><span class="token punctuation">:</span>  <span class="token key atrule">only</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> branches@gitlab<span class="token punctuation">-</span>org/gitlab<span class="token punctuation">-</span>ce  <span class="token key atrule">except</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> master@gitlab<span class="token punctuation">-</span>org/gitlab<span class="token punctuation">-</span>ce<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="variables"><a href="#variables" class="headerlink" title="variables"></a>variables</h3><p>GItLab CI å…è®¸åœ¨<code>.gitlab-ci.yml</code>æ–‡ä»¶ä¸­æ·»åŠ å˜é‡ï¼Œå¹¶åœ¨ job ç¯å¢ƒä¸­èµ·ä½œç”¨ã€‚å› ä¸ºè¿™äº›é…ç½®æ˜¯å­˜å‚¨åœ¨ git ä»“åº“ä¸­ï¼Œæ‰€ä»¥<strong>æœ€å¥½æ˜¯å­˜å‚¨é¡¹ç›®çš„éæ•æ„Ÿé…ç½®</strong>ï¼Œä¾‹å¦‚ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">variables</span><span class="token punctuation">:</span>  DATABASE_URL<span class="token punctuation">:</span><span class="token string">"postgres://postgres@postgres/my_database"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿™äº›å˜é‡å¯ä»¥è¢«åç»­çš„å‘½ä»¤å’Œè„šæœ¬ä½¿ç”¨ã€‚</p><p>é™¤äº†ç”¨æˆ·è‡ªå®šä¹‰çš„å˜é‡å¤–ï¼ŒRunner ä¹Ÿå¯ä»¥å®šä¹‰å®ƒè‡ªå·±çš„å˜é‡ã€‚<code>CI_COMMIT_REG_NAME</code>å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œå®ƒçš„å€¼è¡¨ç¤ºç”¨äºæ„å»ºé¡¹ç›®çš„åˆ†æ”¯æˆ–tagåç§°ã€‚é™¤äº†åœ¨<code>.gitlab-ci.yml</code>ä¸­è®¾ç½®å˜é‡å¤–ï¼Œè¿˜æœ‰å¯ä»¥é€šè¿‡ GitLab çš„ç•Œé¢ä¸Šè®¾ç½®ç§æœ‰å˜é‡ã€‚</p><p>è¿™é‡Œæœ‰æ›´å¤šå…³äº<a href="https://docs.gitlab.com/ce/ci/variables/README.html">variables</a>çš„ä»‹ç»ã€‚</p><h3 id="cache"><a href="#cache" class="headerlink" title="cache"></a>cache</h3><h4 id="cache-paths"><a href="#cache-paths" class="headerlink" title="cache: paths"></a>cache: paths</h4><p>ä½¿ç”¨<code>paths</code>æŒ‡ä»¤é€‰æ‹©è¦ç¼“å­˜çš„æ–‡ä»¶æˆ–ç›®å½•ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ã€‚</p><p>å¦‚æœ cache å®šä¹‰åœ¨ jobs çš„ä½œç”¨åŸŸä¹‹å¤–ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯å…¨å±€ç¼“å­˜ï¼Œæ‰€æœ‰ jobs éƒ½å¯ä»¥ä½¿ç”¨è¯¥ç¼“å­˜ã€‚</p><p>ç¼“å­˜<code>binaries</code>å’Œ<code>.config</code>ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">rspec</span><span class="token punctuation">:</span>  <span class="token key atrule">script</span><span class="token punctuation">:</span> test  <span class="token key atrule">cache</span><span class="token punctuation">:</span>    <span class="token key atrule">paths</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> binaries/    <span class="token punctuation">-</span> .config<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¼“å­˜<code>git</code>ä¸­æ²¡æœ‰è¢«è·Ÿè¸ªçš„æ–‡ä»¶ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">rspec</span><span class="token punctuation">:</span>  <span class="token key atrule">script</span><span class="token punctuation">:</span> test  <span class="token key atrule">cache</span><span class="token punctuation">:</span>    <span class="token key atrule">untracked</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç¼“å­˜<code>binaries</code>ä¸‹æ²¡æœ‰è¢«<code>git</code>è·Ÿè¸ªçš„æ–‡ä»¶ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">rspec</span><span class="token punctuation">:</span>  <span class="token key atrule">script</span><span class="token punctuation">:</span> test  <span class="token key atrule">cache</span><span class="token punctuation">:</span>    <span class="token key atrule">untracked</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>    <span class="token key atrule">paths</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> binaries/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>job ä¸­ä¼˜å…ˆçº§é«˜äºå…¨å±€çš„ã€‚ä¸‹é¢è¿™ä¸ª<code>rspec</code> jobä¸­å°†åªä¼šç¼“å­˜<code>binaries/</code>ä¸‹çš„æ–‡ä»¶ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">cache</span><span class="token punctuation">:</span>  <span class="token key atrule">paths</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> my/files<span class="token key atrule">rspec</span><span class="token punctuation">:</span>  <span class="token key atrule">script</span><span class="token punctuation">:</span> test  <span class="token key atrule">cache</span><span class="token punctuation">:</span>    <span class="token key atrule">key</span><span class="token punctuation">:</span> rspec    <span class="token key atrule">paths</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> binaries/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„ï¼Œç¼“å­˜æ˜¯åœ¨ jobs ä¹‹å‰è¿›è¡Œå…±äº«çš„ã€‚å¦‚æœä½ ä¸åŒçš„ jobs ç¼“å­˜ä¸åŒçš„æ–‡ä»¶è·¯å¾„ï¼Œå¿…é¡»è®¾ç½®ä¸åŒçš„<code>cache:key</code>ï¼Œå¦åˆ™ç¼“å­˜å†…å®¹å°†è¢«é‡å†™ã€‚ç¼“å­˜åªæ˜¯å°½åŠ›è€Œä¸ºä¹‹ï¼Œæ‰€ä»¥åˆ«æœŸæœ›ç¼“å­˜ä¼šä¸€ç›´å­˜åœ¨ã€‚</p><h4 id="cache-key"><a href="#cache-key" class="headerlink" title="cache: key"></a>cache: key</h4><p><code>key</code>æŒ‡ä»¤å…è®¸æˆ‘ä»¬å®šä¹‰ç¼“å­˜çš„ä½œç”¨åŸŸ(äº²å’Œæ€§)ï¼Œå¯ä»¥æ˜¯æ‰€æœ‰ jobs çš„å•ä¸ªç¼“å­˜ï¼Œä¹Ÿå¯ä»¥æ˜¯æ¯ä¸ª jobï¼Œä¹Ÿå¯ä»¥æ˜¯æ¯ä¸ªåˆ†æ”¯æˆ–è€…æ˜¯ä»»ä½•ä½ è®¤ä¸ºåˆé€‚çš„åœ°æ–¹ã€‚å®ƒä¹Ÿå¯ä»¥è®©ä½ å¾ˆå¥½çš„è°ƒæ•´ç¼“å­˜ï¼Œå…è®¸ä½ è®¾ç½®ä¸åŒ jobs çš„ç¼“å­˜ï¼Œç”šè‡³æ˜¯ä¸åŒåˆ†æ”¯çš„ç¼“å­˜ã€‚</p><p><code>cache:key</code>å¯ä»¥ä½¿ç”¨ä»»ä½•çš„<a href="https://docs.gitlab.com/ce/ci/variables/README.html">é¢„å®šä¹‰å˜é‡</a>ã€‚</p><p>é»˜è®¤keyæ˜¯é»˜è®¤è®¾ç½®çš„è¿™ä¸ªé¡¹ç›®ç¼“å­˜ï¼Œå› æ­¤é»˜è®¤æƒ…å†µä¸‹ï¼Œä»GitLab 9.0å¼€å§‹ï¼Œæ¯ä¸ª pipelines å’Œ jobs ä¸­å¯ä»¥å…±äº«ä¸€åˆ‡ã€‚</p><p>é…ç½®ç¤ºä¾‹</p><p>ç¼“å­˜æ¯ä¸ªjobï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">cache</span><span class="token punctuation">:</span>  <span class="token key atrule">key</span><span class="token punctuation">:</span> <span class="token string">"$CI_JOB_NAME"</span>  <span class="token key atrule">untracked</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ç¼“å­˜æ¯ä¸ªåˆ†æ”¯ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">cache</span><span class="token punctuation">:</span>  <span class="token key atrule">key</span><span class="token punctuation">:</span> <span class="token string">"$CI_COMMIT_REF_NAME"</span>  <span class="token key atrule">untracked</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ç¼“å­˜æ¯ä¸ª job ä¸”æ¯ä¸ªåˆ†æ”¯ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">cache</span><span class="token punctuation">:</span>  <span class="token key atrule">key</span><span class="token punctuation">:</span> <span class="token string">"$CI_JOB_NAME/$CI_COMMIT_REF_NAME"</span>  <span class="token key atrule">untracked</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ç¼“å­˜æ¯ä¸ªåˆ†æ”¯ä¸”æ¯ä¸ªstageï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">cache</span><span class="token punctuation">:</span>  <span class="token key atrule">key</span><span class="token punctuation">:</span> <span class="token string">"$CI_JOB_STAGE/$CI_COMMIT_REF_NAME"</span>  <span class="token key atrule">untracked</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å¦‚æœä½¿ç”¨çš„Windows Batch(windowsæ‰¹å¤„ç†)æ¥è·‘è„šæœ¬éœ€è¦ç”¨%æ›¿ä»£$ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">cache</span><span class="token punctuation">:</span>  <span class="token key atrule">key</span><span class="token punctuation">:</span> <span class="token string">"%CI_JOB_STAGE%/%CI_COMMIT_REF_NAME%"</span>  <span class="token key atrule">untracked</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="allow-failure"><a href="#allow-failure" class="headerlink" title="allow_failure"></a>allow_failure</h3><p><code>allow_failure</code>å¯ä»¥ç”¨äºå½“ä½ æƒ³è®¾ç½®ä¸€ä¸ª job å¤±è´¥çš„ä¹‹åå¹¶ä¸å½±å“åç»­çš„CIç»„ä»¶çš„æ—¶å€™ã€‚å¤±è´¥çš„ jobs ä¸ä¼šå½±å“åˆ°<code>commit</code>çŠ¶æ€ã€‚</p><p>å½“å¼€å¯äº†å…è®¸ job å¤±è´¥ï¼Œæ‰€æœ‰çš„ intents å’Œ purposes é‡Œçš„ pipeline éƒ½æ˜¯æˆåŠŸ/ç»¿è‰²ï¼Œä½†æ˜¯ä¹Ÿä¼šæœ‰ä¸€ä¸ªâ€<code>CI build passed with warnings</code>â€œä¿¡æ¯æ˜¾ç¤ºåœ¨<code>Merge Request</code>æˆ–<code>commit</code>æˆ–<code>job page</code>ã€‚è¿™è¢«å…è®¸å¤±è´¥çš„ä½œä¸šä½¿ç”¨ï¼Œä½†æ˜¯å¦‚æœå¤±è´¥è¡¨ç¤ºå…¶ä»–åœ°æ–¹åº”é‡‡å–å…¶ä»–ï¼ˆæ‰‹åŠ¨ï¼‰æ­¥éª¤ã€‚</p><p>ä¸‹é¢çš„è¿™ä¸ªä¾‹å­ä¸­ï¼Œjob1å’Œjob2å°†ä¼šå¹¶åˆ—è¿›è¡Œï¼Œå¦‚æœjob1å¤±è´¥äº†ï¼Œå®ƒä¹Ÿä¸ä¼šå½±å“è¿›è¡Œä¸­çš„ä¸‹ä¸€ä¸ª stageï¼Œå› ä¸ºè¿™é‡Œæœ‰è®¾ç½®äº†<code>allow_failure: true</code>ã€‚</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">job1</span><span class="token punctuation">:</span>  <span class="token key atrule">stage</span><span class="token punctuation">:</span> test  <span class="token key atrule">script</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> execute_script_that_will_fail  <span class="token key atrule">allow_failure</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token key atrule">job2</span><span class="token punctuation">:</span>  <span class="token key atrule">stage</span><span class="token punctuation">:</span> test  <span class="token key atrule">script</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> execute_script_that_will_succeed<span class="token key atrule">job3</span><span class="token punctuation">:</span>  <span class="token key atrule">stage</span><span class="token punctuation">:</span> deploy  <span class="token key atrule">script</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> deploy_to_staging<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="when"><a href="#when" class="headerlink" title="when"></a>when</h3><p><code>when</code>ç”¨äºå®ç°åœ¨å‘ç”Ÿæ•…éšœæˆ–å°½ç®¡å¤±è´¥æ—¶è¿è¡Œçš„ä½œä¸šã€‚whenå¯ä»¥è®¾ç½®ä»¥ä¸‹å€¼ï¼š</p><ul><li><code>on_success</code> - åªæœ‰å‰é¢ stages çš„æ‰€æœ‰å·¥ä½œæˆåŠŸæ—¶æ‰æ‰§è¡Œã€‚è¿™æ˜¯é»˜è®¤å€¼ã€‚</li><li><code>on_failure</code> - å½“å‰é¢ stages ä¸­ä»»æ„ä¸€ä¸ªjobså¤±è´¥åæ‰§è¡Œã€‚</li><li><code>always</code> - æ— è®ºå‰é¢ stages ä¸­ jobs çŠ¶æ€å¦‚ä½•éƒ½æ‰§è¡Œã€‚</li><li><code>manual</code> - æ‰‹åŠ¨æ‰§è¡Œ(GitLab8.10å¢åŠ )ã€‚æ›´å¤šè¯·æŸ¥çœ‹æ‰‹åŠ¨æ“ä½œã€‚</li></ul><h3 id="artifacts"><a href="#artifacts" class="headerlink" title="artifacts"></a>artifacts</h3><p><code>artifacts</code>ç”¨äºæŒ‡å®šæˆåŠŸååº”é™„åŠ åˆ° job çš„æ–‡ä»¶å’Œç›®å½•çš„åˆ—è¡¨ã€‚åªèƒ½ä½¿ç”¨é¡¹ç›®å·¥ä½œé—´å†…çš„æ–‡ä»¶æˆ–ç›®å½•è·¯å¾„ã€‚åœ¨jobæˆåŠŸå®Œæˆåartifactså°†ä¼šå‘é€åˆ°GitLabä¸­ï¼ŒåŒæ—¶ä¹Ÿä¼šåœ¨ GitLab UI ä¸­æä¾›ä¸‹è½½ã€‚å¦‚æœæƒ³è¦åœ¨ä¸é€šçš„ job ä¹‹é—´ä¼ é€’<code>artifacts</code>ï¼Œè¯·æŸ¥é˜…<a href="https://docs.gitlab.com/ce/ci/yaml/README.html#dependencies">ä¾èµ–å…³ç³»</a>ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¾‹å­ï¼š</p><p>å‘é€<code>binaries</code>å’Œ<code>.config</code>ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">artifacts</span><span class="token punctuation">:</span>  <span class="token key atrule">paths</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> binaries/  <span class="token punctuation">-</span> .config<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å‘é€æ‰€æœ‰æ²¡æœ‰è¢«Gitè·Ÿè¸ªçš„æ–‡ä»¶ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">artifacts</span><span class="token punctuation">:</span>  <span class="token key atrule">untracked</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å‘é€æ²¡æœ‰è¢«Gitè·Ÿè¸ªå’Œ<code>binaries</code>ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">artifacts</span><span class="token punctuation">:</span>  <span class="token key atrule">untracked</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">paths</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> binaries/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="äº”ã€å…¶ä»–ç›¸å…³å†…å®¹"><a href="#äº”ã€å…¶ä»–ç›¸å…³å†…å®¹" class="headerlink" title="äº”ã€å…¶ä»–ç›¸å…³å†…å®¹"></a>äº”ã€å…¶ä»–ç›¸å…³å†…å®¹</h2><h3 id="1-APIè§¦å‘å™¨-Triggers"><a href="#1-APIè§¦å‘å™¨-Triggers" class="headerlink" title="1 APIè§¦å‘å™¨ Triggers"></a>1 APIè§¦å‘å™¨ Triggers</h3><p>Triggers å¯ç”¨äºå¼ºåˆ¶ä½¿ç”¨APIè°ƒç”¨é‡å»ºç‰¹å®šåˆ†æ”¯ï¼Œ<code>tag</code>æˆ–<code>commits</code>ã€‚APIçš„ä½¿ç”¨ç¤ºä¾‹å¯ä»¥åœ¨<code>Settings</code> -&gt; <code>CI/CD</code> -&gt; <code>Pipeline triggers</code>ä¸­æ‰¾åˆ°ã€‚</p><p>åœ¨<code>triggers</code>æ–‡æ¡£ä¸­<a href="https://docs.gitlab.com/ce/ci/triggers/README.html">æŸ¥çœ‹æ›´å¤š</a>ã€‚</p><h3 id="2-é…ç½®å®šæ—¶ä»»åŠ¡"><a href="#2-é…ç½®å®šæ—¶ä»»åŠ¡" class="headerlink" title="2 é…ç½®å®šæ—¶ä»»åŠ¡"></a>2 é…ç½®å®šæ—¶ä»»åŠ¡</h3><p>GitLab CI ä¸­å¯ä»¥åœ¨ GitLab <code>Settings</code> -&gt; <code>CI/CD</code> -&gt; <code>Schedules</code>ä¸­é…ç½®å®šæ—¶ä»»åŠ¡ï¼Œç‚¹å‡»<code>New Schedule</code>æŒ‰é’®ï¼Œå¯ä»¥é…ç½®ä½ æµæ°´çº¿çš„å®šæ—¶æ‰§è¡Œä»»åŠ¡ï¼ŒåŒ…æ‹¬ï¼šæè¿°ä¿¡æ¯ã€å®šæ—¶çš„Cronè¡¨è¾¾å¼ã€ç›®æ ‡åˆ†æ”¯ã€å˜é‡ç­‰ä¿¡æ¯ã€‚</p><p>ç„¶ååœ¨éœ€è¦å®šæ—¶æ‰§è¡Œçš„ä½œä¸šçš„<code>only</code>åˆ†æ”¯å†™ä¸Š<code>schedules</code>å³å¯ã€‚</p><h3 id="3-æ ¡éªŒ-gitlab-ci-yml"><a href="#3-æ ¡éªŒ-gitlab-ci-yml" class="headerlink" title="3 æ ¡éªŒ .gitlab-ci.yml"></a>3 æ ¡éªŒ .gitlab-ci.yml</h3><p>GitLab CI çš„æ¯ä¸ªå®ä¾‹éƒ½æœ‰ä¸€ä¸ªåä¸º<code>Lint</code>çš„åµŒå…¥å¼è°ƒè¯•å·¥å…·ã€‚ ä½ å¯ä»¥åœ¨ GitLab å®ä¾‹çš„<code>-/ci/lint</code>ä¸‹æ‰¾åˆ°è¯¥é“¾æ¥ã€‚</p><h3 id="4-é…ç½®é‚®ä»¶å‘é€"><a href="#4-é…ç½®é‚®ä»¶å‘é€" class="headerlink" title="4 é…ç½®é‚®ä»¶å‘é€"></a>4 é…ç½®é‚®ä»¶å‘é€</h3><p>å¦‚æœå¸Œæœ›åœ¨æ¯æ¬¡æ„å»ºå®Œæˆåï¼ˆæˆ–è€…åœ¨ä»…æ„å»ºå¤±è´¥çš„æƒ…å†µä¸‹ï¼‰ï¼Œæƒ³é‚®ä»¶å‘é€ç»™ç›¸å…³å¼€å‘äººå‘˜ï¼Œåˆ™å¯ä»¥åœ¨ GitLab <code>Settings</code> -&gt; <code>Integrations</code> ä¸­æ‰¾åˆ°<code>Pipelines emails</code>ï¼Œç‚¹å‡»è¿›å»å°±å¯ä»¥é…ç½®é‚®ä»¶å‘é€ç›¸å…³çš„å†…å®¹äº†ã€‚</p><h3 id="5-GitLab-Pages"><a href="#5-GitLab-Pages" class="headerlink" title="5 GitLab Pages"></a>5 GitLab Pages</h3><p><a href="https://gitlab.com/pages/">GitLab Pages</a>æ˜¯ç”¨äºæ‰˜ç®¡é™æ€æ–‡ä»¶çš„æœåŠ¡ã€‚è€Œ<code>pages</code>æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„jobï¼Œç”¨äºå°†é™æ€çš„å†…å®¹ä¸Šä¼ åˆ°GitLabï¼Œå¯ç”¨äºä¸ºæ‚¨çš„ç½‘ç«™æä¾›æœåŠ¡ã€‚å®ƒæœ‰ç‰¹æ®Šçš„è¯­æ³•ï¼Œå› æ­¤å¿…é¡»æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªè¦æ±‚ï¼š</p><ul><li>ä»»ä½•é™æ€å†…å®¹å¿…é¡»æ”¾åœ¨<code>public/</code>ç›®å½•ä¸‹</li><li>artifactså¿…é¡»å®šä¹‰åœ¨<code>public/</code>ç›®å½•ä¸‹</li></ul><p>ä¸‹é¢çš„è¿™ä¸ªä¾‹å­æ˜¯å°†æ‰€æœ‰æ–‡ä»¶ä»é¡¹ç›®æ ¹ç›®å½•ç§»åŠ¨åˆ°<code>public/</code>ç›®å½•ã€‚<code>.public</code>å·¥ä½œæµæ˜¯<code>cp</code>ï¼Œå¹¶ä¸”å®ƒä¸ä¼šå¾ªç¯å¤åˆ¶<code>public/</code>æœ¬èº«ã€‚</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">pages</span><span class="token punctuation">:</span>  <span class="token key atrule">stage</span><span class="token punctuation">:</span> deploy  <span class="token key atrule">script</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> mkdir .public  <span class="token punctuation">-</span> cp <span class="token punctuation">-</span>r * .public  <span class="token punctuation">-</span> mv .public public  <span class="token key atrule">artifacts</span><span class="token punctuation">:</span>    <span class="token key atrule">paths</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> public  <span class="token key atrule">only</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ›´å¤šå†…å®¹è¯·æŸ¥çœ‹<a href="https://docs.gitlab.com/ce/user/project/pages/index.html">GitLab Pagesç”¨æˆ·æ–‡æ¡£</a>ã€‚</p><h3 id="6-è·³è¿‡-jobs"><a href="#6-è·³è¿‡-jobs" class="headerlink" title="6 è·³è¿‡ jobs"></a>6 è·³è¿‡ jobs</h3><p>å¦‚æœä½ çš„<code>commit</code>ä¿¡æ¯ä¸­åŒ…å«<code>[ci skip]</code>æˆ–è€…<code>[skip ci]</code>ï¼Œä¸è®ºå¤§å°å†™ï¼Œé‚£ä¹ˆè¿™ä¸ª<code>commit</code>å°†ä¼šåˆ›å»ºä½†æ˜¯ jobs ä¹Ÿä¼šè·³è¿‡ã€‚</p><hr><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ul><li><a href="https://docs.gitlab.com/ce/ci/yaml/README.html">å®˜æ–¹æ–‡æ¡£åœ°å€</a></li><li><a href="https://segmentfault.com/a/1190000010442764#articleHeader24">segmentfault yamlé…ç½®ä¸­æ–‡ç¿»è¯‘</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitLab CI </tag>
            
            <tag> DevOps </tag>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue æ–‡æ¡£é£æ ¼çš„ Typora ä¸»é¢˜</title>
      <link href="/post/ruan-jian-gong-ju/markdown/vue-wen-dang-feng-ge-de-typora-zhu-ti/"/>
      <url>/post/ruan-jian-gong-ju/markdown/vue-wen-dang-feng-ge-de-typora-zhu-ti/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://github.com/blinkfox/typora-vue-theme">typora-vue-theme</a> æ˜¯ Typora Markdown æ–‡æ¡£ç¼–è¾‘å™¨ä¸­ä¸€æ¬¾ç±»ä¼¼<a href="https://vuejs.org/">Vue</a>æ–‡æ¡£é£æ ¼çš„ä¸»é¢˜ã€‚</p></blockquote><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p><a href="https://www.typora.io/">Typora</a>æ˜¯ä¸€æ¬¾æ”¯æŒå®æ—¶é¢„è§ˆçš„ Markdown ç¼–è¾‘å™¨å’Œé˜…è¯»å™¨ï¼Œæ”¯æŒ<code>Windows</code>ã€<code>macOS</code>ã€<code>Linux</code>ä¸‰å¤§å¹³å°ã€‚Typora ä½œä¸ºä¸€æ¬¾åˆæ ¼çš„ Markdown ç¼–è¾‘å™¨ï¼Œæ”¯æŒå›¾ç‰‡ã€åˆ—è¡¨ã€è¡¨æ ¼ã€ä»£ç ã€å…¬å¼ã€ç›®å½•ç­‰åŠŸèƒ½ï¼ŒåŒæ—¶è¿™æ¬¾è½¯ä»¶è¿˜æ”¯æŒï¼ˆä¸€é”®ï¼‰åŠ¨æ€é¢„è§ˆåŠŸèƒ½ï¼Œè®©ä¸€åˆ‡éƒ½å˜å¾—å¦‚æ­¤å¹²å‡€ã€çº¯ç²¹ã€‚å¹¶ä¸”æœ‰å¤šç§ä¸»é¢˜æ¨¡æ¿ã€‚**<a href="https://github.com/blinkfox/typora-vue-theme">typora-vue-theme</a>å°±æ˜¯å‚è€ƒäº†<a href="https://vuejs.org/">Vue</a>æ–‡æ¡£é£æ ¼è€Œå¼€å‘çš„ä¸€ä¸ª Typora è‡ªå®šä¹‰ä¸»é¢˜**ã€‚</p><h2 id="å®‰è£…ä¸»é¢˜"><a href="#å®‰è£…ä¸»é¢˜" class="headerlink" title="å®‰è£…ä¸»é¢˜"></a>å®‰è£…ä¸»é¢˜</h2><ol><li>ä¸‹è½½æœ¬ä¸»é¢˜ä¸­çš„<code>vue.css</code>ã€<code>vue-dark.css</code>æ–‡ä»¶å’ŒåŒ…å«å­—ä½“çš„<code>vue</code>æ–‡ä»¶å¤¹ï¼›</li><li>æ‰“å¼€ Typoraï¼Œç‚¹å‡»â€œ<strong>åå¥½è®¾ç½®</strong>â€ =&gt; â€œ<strong>æ‰“å¼€ä¸»é¢˜æ–‡ä»¶å¤¹</strong>â€æŒ‰é’®ï¼Œå°†å¼¹å‡º Typora çš„ä¸»é¢˜æ–‡ä»¶å¤¹ï¼›</li><li>å°†ä¸‹è½½å¥½çš„<code>vue.css</code>å’Œ<code>vue-dark.css</code>æ–‡ä»¶å’ŒåŒ…å«å­—ä½“çš„<code>vue</code>æ–‡ä»¶å¤¹æ”¾åˆ° Typora çš„ä¸»é¢˜æ–‡ä»¶å¤¹ä¸­ï¼›</li><li>å…³é—­å¹¶é‡æ–°æ‰“å¼€ Typoraï¼Œä»èœå•æ ä¸­é€‰æ‹© â€œ<strong>ä¸»é¢˜</strong>â€ =&gt; â€œ<strong>Vue</strong>â€ æˆ–è€… â€œ<strong>Vue Dark</strong>â€ å³å¯ã€‚</li></ol><h2 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h2><p><img src="https://statics.sh1a.qingstor.com/2018/11/19/typora-vue-theme-screen-1.png" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/11/19/typora-vue-theme-screen-1.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="vueä¸»é¢˜æ•ˆæœå›¾1"></p><p><img src="https://statics.sh1a.qingstor.com/2018/11/19/typora-vue-theme-screen-2.png" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/11/19/typora-vue-theme-screen-2.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="vueä¸»é¢˜æ•ˆæœå›¾2"></p><p><img src="https://statics.sh1a.qingstor.com/2018/11/19/typora-vue-theme-screen-3.png" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/11/19/typora-vue-theme-screen-3.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="vueä¸»é¢˜æ•ˆæœå›¾3"></p><h3 id="Vue-Dark"><a href="#Vue-Dark" class="headerlink" title="Vue Dark"></a>Vue Dark</h3><p><img src="https://github.com/MamoruDS/typora-vue-theme/raw/master/screenshots/screenshot_01.png" class="lazyload placeholder" data-srcset="https://github.com/MamoruDS/typora-vue-theme/raw/master/screenshots/screenshot_01.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="vueä¸»é¢˜æ•ˆæœå›¾4"></p><p><img src="https://github.com/MamoruDS/typora-vue-theme/raw/master/screenshots/screenshot_02.png" class="lazyload placeholder" data-srcset="https://github.com/MamoruDS/typora-vue-theme/raw/master/screenshots/screenshot_02.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="vueä¸»é¢˜æ•ˆæœå›¾5"></p><blockquote><p><strong>æ„Ÿè°¢</strong>: æœ¬ä¸»é¢˜ä¸­çš„<code>vue-dark.css</code>æ¥è‡ª<a href="https://github.com/MamoruDS/typora-vue-dark-theme">typora-vue-dark-theme</a>.</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Typora </tag>
            
            <tag> Markdown </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CPUå¤šçº§ç¼“å­˜</title>
      <link href="/post/ruan-jian-gong-ju/cpu-duo-ji-huan-cun/"/>
      <url>/post/ruan-jian-gong-ju/cpu-duo-ji-huan-cun/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€ä»€ä¹ˆæ˜¯CPUç¼“å­˜"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯CPUç¼“å­˜" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯CPUç¼“å­˜"></a>ä¸€ã€ä»€ä¹ˆæ˜¯CPUç¼“å­˜</h2><h3 id="1-CPUç¼“å­˜çš„æ¥å†"><a href="#1-CPUç¼“å­˜çš„æ¥å†" class="headerlink" title="1. CPUç¼“å­˜çš„æ¥å†"></a>1. CPUç¼“å­˜çš„æ¥å†</h3><p>ä¼—æ‰€å‘¨çŸ¥,CPUæ˜¯è®¡ç®—æœºçš„å¤§è„‘ï¼Œå®ƒè´Ÿè´£æ‰§è¡Œç¨‹åºçš„æŒ‡ä»¤ï¼Œè€Œå†…å­˜è´Ÿè´£å­˜æ•°æ®, åŒ…æ‹¬ç¨‹åºè‡ªèº«çš„æ•°æ®ã€‚åœ¨å¾ˆå¤šå¹´å‰ï¼ŒCPUçš„é¢‘ç‡ä¸å†…å­˜æ€»çº¿çš„é¢‘ç‡åœ¨åŒä¸€å±‚é¢ä¸Šã€‚å†…å­˜çš„è®¿é—®é€Ÿåº¦ä»…æ¯”å¯„å­˜å™¨æ…¢ä¸€äº›ã€‚ä½†æ˜¯ï¼Œè¿™ä¸€å±€é¢åœ¨ä¸Šä¸–çºª90å¹´ä»£è¢«æ‰“ç ´äº†ã€‚CPUçš„é¢‘ç‡å¤§å¤§æå‡ï¼Œä½†å†…å­˜æ€»çº¿çš„é¢‘ç‡ä¸å†…å­˜èŠ¯ç‰‡çš„æ€§èƒ½å´æ²¡æœ‰å¾—åˆ°æˆæ¯”ä¾‹çš„æå‡ã€‚å¹¶ä¸æ˜¯å› ä¸ºé€ ä¸å‡ºæ›´å¿«çš„å†…å­˜ï¼Œåªæ˜¯å› ä¸ºå¤ªè´µäº†ã€‚å†…å­˜å¦‚æœè¦è¾¾åˆ°ç›®å‰CPUé‚£æ ·çš„é€Ÿåº¦ï¼Œé‚£ä¹ˆå®ƒçš„é€ ä»·ææ€•è¦è´µä¸Šå¥½å‡ ä¸ªæ•°é‡çº§ã€‚æ‰€ä»¥ï¼ŒCPUçš„è¿ç®—é€Ÿåº¦è¦æ¯”å†…å­˜è¯»å†™é€Ÿåº¦å¿«å¾ˆå¤šï¼Œè¿™æ ·ä¼šä½¿CPUèŠ±è´¹å¾ˆé•¿çš„æ—¶é—´ç­‰å¾…æ•°æ®çš„åˆ°æ¥æˆ–æŠŠæ•°æ®å†™å…¥åˆ°å†…å­˜ä¸­ã€‚æ‰€ä»¥ï¼Œ<strong>ä¸ºäº†è§£å†³CPUè¿ç®—é€Ÿåº¦ä¸å†…å­˜è¯»å†™é€Ÿåº¦ä¸åŒ¹é…çš„çŸ›ç›¾</strong>ï¼Œå°±å‡ºç°äº†CPUç¼“å­˜ã€‚</p><h3 id="2-CPUç¼“å­˜çš„æ¦‚å¿µ"><a href="#2-CPUç¼“å­˜çš„æ¦‚å¿µ" class="headerlink" title="2. CPUç¼“å­˜çš„æ¦‚å¿µ"></a>2. CPUç¼“å­˜çš„æ¦‚å¿µ</h3><p><strong>CPUç¼“å­˜æ˜¯ä½äºCPUä¸å†…å­˜ä¹‹é—´çš„ä¸´æ—¶æ•°æ®äº¤æ¢å™¨ï¼Œå®ƒçš„å®¹é‡æ¯”å†…å­˜å°çš„å¤šä½†æ˜¯äº¤æ¢é€Ÿåº¦å´æ¯”å†…å­˜è¦å¿«å¾—å¤šã€‚CPUç¼“å­˜ä¸€èˆ¬ç›´æ¥è·ŸCPUèŠ¯ç‰‡é›†æˆæˆ–ä½äºä¸»æ¿æ€»çº¿äº’è¿çš„ç‹¬ç«‹èŠ¯ç‰‡ä¸Š</strong>ã€‚</p><p>ä¸ºäº†ç®€åŒ–ä¸å†…å­˜ä¹‹é—´çš„é€šä¿¡ï¼Œé«˜é€Ÿç¼“å­˜æ§åˆ¶å™¨æ˜¯é’ˆå¯¹æ•°æ®å—ï¼Œè€Œä¸æ˜¯å­—èŠ‚è¿›è¡Œæ“ä½œçš„ã€‚é«˜é€Ÿç¼“å­˜å…¶å®å°±æ˜¯ä¸€ç»„ç§°ä¹‹ä¸º<strong>ç¼“å­˜è¡Œ</strong>(Cache Line)çš„å›ºå®šå¤§å°çš„æ•°æ®å—ç»„æˆçš„ï¼Œå…¸å‹çš„ä¸€è¡Œæ˜¯<code>64</code>å­—èŠ‚ã€‚</p><h3 id="3-CPUç¼“å­˜çš„æ„ä¹‰"><a href="#3-CPUç¼“å­˜çš„æ„ä¹‰" class="headerlink" title="3. CPUç¼“å­˜çš„æ„ä¹‰"></a>3. CPUç¼“å­˜çš„æ„ä¹‰</h3><p>CPUå¾€å¾€éœ€è¦é‡å¤å¤„ç†ç›¸åŒçš„æ•°æ®ã€é‡å¤æ‰§è¡Œç›¸åŒçš„æŒ‡ä»¤ï¼Œå¦‚æœè¿™éƒ¨åˆ†æ•°æ®ã€æŒ‡ä»¤CPUèƒ½åœ¨CPUç¼“å­˜ä¸­æ‰¾åˆ°ï¼ŒCPUå°±ä¸éœ€è¦ä»å†…å­˜æˆ–ç¡¬ç›˜ä¸­å†è¯»å–æ•°æ®ã€æŒ‡ä»¤ï¼Œä»è€Œå‡å°‘äº†æ•´æœºçš„å“åº”æ—¶é—´ã€‚æ‰€ä»¥ï¼Œç¼“å­˜çš„æ„ä¹‰æ»¡è¶³ä»¥ä¸‹ä¸¤ç§<strong>å±€éƒ¨æ€§åŸç†</strong>ï¼š</p><ul><li><strong>æ—¶é—´å±€éƒ¨æ€§ï¼ˆTemporal Localityï¼‰</strong>ï¼šå¦‚æœä¸€ä¸ªä¿¡æ¯é¡¹æ­£åœ¨è¢«è®¿é—®ï¼Œé‚£ä¹ˆåœ¨è¿‘æœŸå®ƒå¾ˆå¯èƒ½è¿˜ä¼šè¢«å†æ¬¡è®¿é—®ã€‚</li><li><strong>ç©ºé—´å±€éƒ¨æ€§ï¼ˆSpatial Localityï¼‰</strong>ï¼šå¦‚æœä¸€ä¸ªå­˜å‚¨å™¨çš„ä½ç½®è¢«å¼•ç”¨ï¼Œé‚£ä¹ˆå°†æ¥ä»–é™„è¿‘çš„ä½ç½®ä¹Ÿä¼šè¢«å¼•ç”¨ã€‚</li></ul><h2 id="äºŒã€CPUçš„ä¸‰çº§ç¼“å­˜"><a href="#äºŒã€CPUçš„ä¸‰çº§ç¼“å­˜" class="headerlink" title="äºŒã€CPUçš„ä¸‰çº§ç¼“å­˜"></a>äºŒã€CPUçš„ä¸‰çº§ç¼“å­˜</h2><h3 id="1-CPUçš„ä¸‰çº§ç¼“å­˜"><a href="#1-CPUçš„ä¸‰çº§ç¼“å­˜" class="headerlink" title="1. CPUçš„ä¸‰çº§ç¼“å­˜"></a>1. CPUçš„ä¸‰çº§ç¼“å­˜</h3><p>éšç€å¤šæ ¸CPUçš„å‘å±•ï¼ŒCPUç¼“å­˜é€šå¸¸åˆ†æˆäº†ä¸‰ä¸ªçº§åˆ«ï¼š<code>L1</code>ï¼Œ<code>L2</code>ï¼Œ<code>L3</code>ã€‚çº§åˆ«è¶Šå°è¶Šæ¥è¿‘CPUï¼Œæ‰€ä»¥é€Ÿåº¦ä¹Ÿæ›´å¿«ï¼ŒåŒæ—¶ä¹Ÿä»£è¡¨ç€å®¹é‡è¶Šå°ã€‚L1 æ˜¯æœ€æ¥è¿‘CPUçš„, å®ƒå®¹é‡æœ€å°ï¼ˆä¾‹å¦‚ï¼š<code>32K</code>ï¼‰ï¼Œé€Ÿåº¦æœ€å¿«ï¼Œæ¯ä¸ªæ ¸ä¸Šéƒ½æœ‰ä¸€ä¸ª L1 ç¼“å­˜ï¼ŒL1 ç¼“å­˜æ¯ä¸ªæ ¸ä¸Šå…¶å®æœ‰ä¸¤ä¸ª L1 ç¼“å­˜, ä¸€ä¸ªç”¨äºå­˜æ•°æ®çš„ L1d Cacheï¼ˆData Cacheï¼‰ï¼Œä¸€ä¸ªç”¨äºå­˜æŒ‡ä»¤çš„ L1i Cacheï¼ˆInstruction Cacheï¼‰ã€‚L2 ç¼“å­˜ æ›´å¤§ä¸€äº›ï¼ˆä¾‹å¦‚ï¼š<code>256K</code>ï¼‰ï¼Œé€Ÿåº¦è¦æ…¢ä¸€äº›, ä¸€èˆ¬æƒ…å†µä¸‹æ¯ä¸ªæ ¸ä¸Šéƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„L2 ç¼“å­˜; L3 ç¼“å­˜æ˜¯ä¸‰çº§ç¼“å­˜ä¸­æœ€å¤§çš„ä¸€çº§ï¼ˆä¾‹å¦‚3MBï¼‰ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æœ€æ…¢çš„ä¸€çº§, åœ¨åŒä¸€ä¸ªCPUæ’æ§½ä¹‹é—´çš„æ ¸å…±äº«ä¸€ä¸ª L3 ç¼“å­˜ã€‚</p><p>ä¸‹é¢æ˜¯ä¸‰çº§ç¼“å­˜çš„å¤„ç†é€Ÿåº¦å‚è€ƒè¡¨ï¼š</p><table><thead><tr><th>ä»CPUåˆ°</th><th>å¤§çº¦éœ€è¦çš„CPUå‘¨æœŸ</th><th>å¤§çº¦éœ€è¦çš„æ—¶é—´(å•ä½ns)</th></tr></thead><tbody><tr><td>å¯„å­˜å™¨</td><td>1 cycle</td><td></td></tr><tr><td>L1 Cache</td><td>~3-4 cycles</td><td>~0.5-1 ns</td></tr><tr><td>L2 Cache</td><td>~10-20 cycles</td><td>~3-7 ns</td></tr><tr><td>L3 Cache</td><td>~40-45 cycles</td><td>~15 ns</td></tr><tr><td>è·¨æ§½ä¼ è¾“</td><td></td><td>~20 ns</td></tr><tr><td>å†…å­˜</td><td>~120-240 cycles</td><td>~60-120ns</td></tr></tbody></table><p>ä¸‹å›¾æ˜¯Intel Core i5-4285Uçš„CPUä¸‰çº§ç¼“å­˜ç¤ºæ„å›¾ï¼š</p><p><img src="https://statics.sh1a.qingstor.com/2018/11/18/javabf-cpu-1.png" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/11/18/javabf-cpu-1.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="CPUä¸‰çº§ç¼“å­˜"></p><p>å°±åƒæ•°æ®åº“ç¼“å­˜ä¸€æ ·ï¼Œè·å–æ•°æ®æ—¶é¦–å…ˆä¼šåœ¨æœ€å¿«çš„ç¼“å­˜ä¸­æ‰¾æ•°æ®ï¼Œå¦‚æœç¼“å­˜æ²¡æœ‰å‘½ä¸­(Cache miss) åˆ™å¾€ä¸‹ä¸€çº§æ‰¾, ç›´åˆ°ä¸‰çº§ç¼“å­˜éƒ½æ‰¾ä¸åˆ°æ—¶ï¼Œé‚£åªæœ‰å‘å†…å­˜è¦æ•°æ®äº†ã€‚ä¸€æ¬¡æ¬¡åœ°æœªå‘½ä¸­ï¼Œä»£è¡¨å–æ•°æ®æ¶ˆè€—çš„æ—¶é—´è¶Šé•¿ã€‚</p><h3 id="2-å¸¦æœ‰é«˜é€Ÿç¼“å­˜CPUæ‰§è¡Œè®¡ç®—çš„æµç¨‹"><a href="#2-å¸¦æœ‰é«˜é€Ÿç¼“å­˜CPUæ‰§è¡Œè®¡ç®—çš„æµç¨‹" class="headerlink" title="2. å¸¦æœ‰é«˜é€Ÿç¼“å­˜CPUæ‰§è¡Œè®¡ç®—çš„æµç¨‹"></a>2. å¸¦æœ‰é«˜é€Ÿç¼“å­˜CPUæ‰§è¡Œè®¡ç®—çš„æµç¨‹</h3><ol><li>ç¨‹åºä»¥åŠæ•°æ®è¢«åŠ è½½åˆ°ä¸»å†…å­˜</li><li>æŒ‡ä»¤å’Œæ•°æ®è¢«åŠ è½½åˆ°CPUçš„é«˜é€Ÿç¼“å­˜</li><li>CPUæ‰§è¡ŒæŒ‡ä»¤ï¼ŒæŠŠç»“æœå†™åˆ°é«˜é€Ÿç¼“å­˜</li><li>é«˜é€Ÿç¼“å­˜ä¸­çš„æ•°æ®å†™å›ä¸»å†…å­˜</li></ol><p>ç›®å‰æµè¡Œçš„å¤šçº§ç¼“å­˜ç»“æ„å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://statics.sh1a.qingstor.com/2018/11/18/javabf-cpu-2.png" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/11/18/javabf-cpu-2.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å¤šçº§ç¼“å­˜ç»“æ„"></p><h2 id="ä¸‰ã€CPUç¼“å­˜ä¸€è‡´æ€§åè®®-MESI"><a href="#ä¸‰ã€CPUç¼“å­˜ä¸€è‡´æ€§åè®®-MESI" class="headerlink" title="ä¸‰ã€CPUç¼“å­˜ä¸€è‡´æ€§åè®®(MESI)"></a>ä¸‰ã€CPUç¼“å­˜ä¸€è‡´æ€§åè®®(MESI)</h2><p><strong>MESI</strong>ï¼ˆ<code>Modified Exclusive Shared Or Invalid</code>ï¼‰(ä¹Ÿç§°ä¸º<strong>ä¼Šåˆ©è¯ºæ–¯åè®®</strong>ï¼Œæ˜¯å› ä¸ºè¯¥åè®®ç”±ä¼Šåˆ©è¯ºæ–¯å·ç«‹å¤§å­¦æå‡ºçš„ï¼‰æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„æ”¯æŒå†™å›ç­–ç•¥çš„ç¼“å­˜ä¸€è‡´æ€§åè®®ã€‚ä¸ºäº†ä¿è¯å¤šä¸ªCPUç¼“å­˜ä¸­å…±äº«æ•°æ®çš„ä¸€è‡´æ€§ï¼Œå®šä¹‰äº†ç¼“å­˜è¡Œ(Cache Line)çš„å››ç§çŠ¶æ€ï¼Œè€ŒCPUå¯¹ç¼“å­˜è¡Œçš„å››ç§æ“ä½œå¯èƒ½ä¼šäº§ç”Ÿä¸ä¸€è‡´çš„çŠ¶æ€ï¼Œå› æ­¤ç¼“å­˜æ§åˆ¶å™¨ç›‘å¬åˆ°æœ¬åœ°æ“ä½œå’Œè¿œç¨‹æ“ä½œçš„æ—¶å€™ï¼Œéœ€è¦å¯¹åœ°å€ä¸€è‡´çš„ç¼“å­˜è¡Œçš„çŠ¶æ€è¿›è¡Œä¸€è‡´æ€§ä¿®æ”¹ï¼Œä»è€Œä¿è¯æ•°æ®åœ¨å¤šä¸ªç¼“å­˜ä¹‹é—´ä¿æŒä¸€è‡´æ€§ã€‚</p><h3 id="1-MESIåè®®ä¸­çš„çŠ¶æ€"><a href="#1-MESIåè®®ä¸­çš„çŠ¶æ€" class="headerlink" title="1. MESIåè®®ä¸­çš„çŠ¶æ€"></a>1. MESIåè®®ä¸­çš„çŠ¶æ€</h3><p>CPUä¸­æ¯ä¸ªç¼“å­˜è¡Œï¼ˆCaceh line)ä½¿ç”¨<code>4</code>ç§çŠ¶æ€è¿›è¡Œæ ‡è®°ï¼Œä½¿ç”¨<code>2bit</code>æ¥è¡¨ç¤º:</p><table><thead><tr><th>çŠ¶æ€</th><th>æè¿°</th><th>ç›‘å¬ä»»åŠ¡</th><th>çŠ¶æ€è½¬æ¢</th></tr></thead><tbody><tr><td>M ä¿®æ”¹ (Modified)</td><td>è¯¥Cache lineæœ‰æ•ˆï¼Œæ•°æ®è¢«ä¿®æ”¹äº†ï¼Œå’Œå†…å­˜ä¸­çš„æ•°æ®ä¸ä¸€è‡´ï¼Œæ•°æ®åªå­˜åœ¨äºæœ¬Cacheä¸­ã€‚</td><td>ç¼“å­˜è¡Œå¿…é¡»æ—¶åˆ»ç›‘å¬æ‰€æœ‰è¯•å›¾è¯»è¯¥ç¼“å­˜è¡Œç›¸å¯¹å°±ä¸»å­˜çš„æ“ä½œï¼Œè¿™ç§æ“ä½œå¿…é¡»åœ¨ç¼“å­˜å°†è¯¥ç¼“å­˜è¡Œå†™å›ä¸»å­˜å¹¶å°†çŠ¶æ€å˜æˆSï¼ˆå…±äº«ï¼‰çŠ¶æ€ä¹‹å‰è¢«å»¶è¿Ÿæ‰§è¡Œã€‚</td><td>å½“è¢«å†™å›ä¸»å­˜ä¹‹åï¼Œè¯¥ç¼“å­˜è¡Œçš„çŠ¶æ€ä¼šå˜æˆç‹¬äº«ï¼ˆexclusive)çŠ¶æ€ã€‚</td></tr><tr><td>E ç‹¬äº«ã€äº’æ–¥ (Exclusive)</td><td>è¯¥Cache lineæœ‰æ•ˆï¼Œæ•°æ®å’Œå†…å­˜ä¸­çš„æ•°æ®ä¸€è‡´ï¼Œæ•°æ®åªå­˜åœ¨äºæœ¬Cacheä¸­ã€‚</td><td>ç¼“å­˜è¡Œä¹Ÿå¿…é¡»ç›‘å¬å…¶å®ƒç¼“å­˜è¯»ä¸»å­˜ä¸­è¯¥ç¼“å­˜è¡Œçš„æ“ä½œï¼Œä¸€æ—¦æœ‰è¿™ç§æ“ä½œï¼Œè¯¥ç¼“å­˜è¡Œéœ€è¦å˜æˆSï¼ˆå…±äº«ï¼‰çŠ¶æ€ã€‚</td><td>å½“CPUä¿®æ”¹è¯¥ç¼“å­˜è¡Œä¸­å†…å®¹æ—¶ï¼Œè¯¥çŠ¶æ€å¯ä»¥å˜æˆModifiedçŠ¶æ€</td></tr><tr><td>S å…±äº« (Shared)</td><td>è¯¥Cache lineæœ‰æ•ˆï¼Œæ•°æ®å’Œå†…å­˜ä¸­çš„æ•°æ®ä¸€è‡´ï¼Œæ•°æ®å­˜åœ¨äºå¾ˆå¤šCacheä¸­ã€‚</td><td>ç¼“å­˜è¡Œä¹Ÿå¿…é¡»ç›‘å¬å…¶å®ƒç¼“å­˜ä½¿è¯¥ç¼“å­˜è¡Œæ— æ•ˆæˆ–è€…ç‹¬äº«è¯¥ç¼“å­˜è¡Œçš„è¯·æ±‚ï¼Œå¹¶å°†è¯¥ç¼“å­˜è¡Œå˜æˆæ— æ•ˆï¼ˆInvalidï¼‰ã€‚</td><td>å½“æœ‰ä¸€ä¸ªCPUä¿®æ”¹è¯¥ç¼“å­˜è¡Œæ—¶ï¼Œå…¶å®ƒCPUä¸­è¯¥ç¼“å­˜è¡Œå¯ä»¥è¢«ä½œåºŸï¼ˆå˜æˆæ— æ•ˆçŠ¶æ€ Invalidï¼‰ã€‚</td></tr><tr><td>I æ— æ•ˆ (Invalid)</td><td>è¯¥Cache lineæ— æ•ˆã€‚</td><td>æ— </td><td>æ— </td></tr></tbody></table><blockquote><p><strong>æ³¨æ„</strong>ï¼š<br><strong>å¯¹äºMå’ŒEçŠ¶æ€è€Œè¨€æ€»æ˜¯ç²¾ç¡®çš„ï¼Œä»–ä»¬åœ¨å’Œè¯¥ç¼“å­˜è¡Œçš„çœŸæ­£çŠ¶æ€æ˜¯ä¸€è‡´çš„ï¼Œè€ŒSçŠ¶æ€å¯èƒ½æ˜¯éä¸€è‡´çš„</strong>ã€‚å¦‚æœä¸€ä¸ªç¼“å­˜å°†å¤„äºSçŠ¶æ€çš„ç¼“å­˜è¡Œä½œåºŸäº†ï¼Œè€Œå¦ä¸€ä¸ªç¼“å­˜å®é™…ä¸Šå¯èƒ½å·²ç»ç‹¬äº«äº†è¯¥ç¼“å­˜è¡Œï¼Œä½†æ˜¯è¯¥ç¼“å­˜å´ä¸ä¼šå°†è¯¥ç¼“å­˜è¡Œå‡è¿ä¸ºEçŠ¶æ€ï¼Œè¿™æ˜¯å› ä¸ºå…¶å®ƒç¼“å­˜ä¸ä¼šå¹¿æ’­ä»–ä»¬ä½œåºŸæ‰è¯¥ç¼“å­˜è¡Œçš„é€šçŸ¥ï¼ŒåŒæ ·ç”±äºç¼“å­˜å¹¶æ²¡æœ‰ä¿å­˜è¯¥ç¼“å­˜è¡Œçš„copyçš„æ•°é‡ï¼Œå› æ­¤ï¼ˆå³ä½¿æœ‰è¿™ç§é€šçŸ¥ï¼‰ä¹Ÿæ²¡æœ‰åŠæ³•ç¡®å®šè‡ªå·±æ˜¯å¦å·²ç»ç‹¬äº«äº†è¯¥ç¼“å­˜è¡Œã€‚</p></blockquote><p>ä»ä¸Šé¢çš„æ„ä¹‰çœ‹æ¥EçŠ¶æ€æ˜¯ä¸€ç§æŠ•æœºæ€§çš„ä¼˜åŒ–ï¼šå¦‚æœä¸€ä¸ªCPUæƒ³ä¿®æ”¹ä¸€ä¸ªå¤„äºSçŠ¶æ€çš„ç¼“å­˜è¡Œï¼Œæ€»çº¿äº‹åŠ¡éœ€è¦å°†æ‰€æœ‰è¯¥ç¼“å­˜è¡Œçš„copyå˜æˆinvalidçŠ¶æ€ï¼Œè€Œä¿®æ”¹EçŠ¶æ€çš„ç¼“å­˜ä¸éœ€è¦ä½¿ç”¨æ€»çº¿äº‹åŠ¡ã€‚</p><p>MESIçŠ¶æ€è½¬æ¢å›¾ï¼š</p><p><img src="https://statics.sh1a.qingstor.com/2018/11/18/javabf-cpu-3.png" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/11/18/javabf-cpu-3.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="MESIçŠ¶æ€è½¬æ¢å›¾"></p><p>ä¸‹å›¾è¡¨ç¤ºäº†å½“ä¸€ä¸ªç¼“å­˜è¡Œ(Cache line)çš„è°ƒæ•´çš„çŠ¶æ€çš„æ—¶å€™ï¼Œå¦å¤–ä¸€ä¸ªç¼“å­˜è¡Œ(Cache line)éœ€è¦è°ƒæ•´çš„çŠ¶æ€ã€‚</p><table><thead><tr><th>çŠ¶æ€</th><th>M</th><th>E</th><th>S</th><th><strong>I</strong></th></tr></thead><tbody><tr><td><strong>M</strong></td><td>Ã—</td><td>Ã—</td><td>Ã—</td><td>âˆš</td></tr><tr><td><strong>E</strong></td><td>Ã—</td><td>Ã—</td><td>Ã—</td><td>âˆš</td></tr><tr><td><strong>S</strong></td><td>Ã—</td><td>Ã—</td><td>âˆš</td><td>âˆš</td></tr><tr><td><strong>I</strong></td><td>âˆš</td><td>âˆš</td><td>âˆš</td><td>âˆš</td></tr></tbody></table><p>ä¸¾ä¸ªç¤ºä¾‹ï¼š</p><blockquote><p>å‡è®¾cache 1 ä¸­æœ‰ä¸€ä¸ªå˜é‡<code>x = 0</code>çš„ Cache line å¤„äºSçŠ¶æ€(å…±äº«)ã€‚<br>é‚£ä¹ˆå…¶ä»–æ‹¥æœ‰xå˜é‡çš„ cache 2ã€cache 3 ç­‰<code>x</code>çš„ Cache lineè°ƒæ•´ä¸º<code>S</code>çŠ¶æ€ï¼ˆå…±äº«ï¼‰æˆ–è€…è°ƒæ•´ä¸º<code>I</code>çŠ¶æ€ï¼ˆæ— æ•ˆï¼‰ã€‚</p></blockquote><h3 id="2-å¤šæ ¸ç¼“å­˜ååŒæ“ä½œ"><a href="#2-å¤šæ ¸ç¼“å­˜ååŒæ“ä½œ" class="headerlink" title="2. å¤šæ ¸ç¼“å­˜ååŒæ“ä½œ"></a>2. å¤šæ ¸ç¼“å­˜ååŒæ“ä½œ</h3><h4 id="1-å†…å­˜å˜é‡"><a href="#1-å†…å­˜å˜é‡" class="headerlink" title="(1) å†…å­˜å˜é‡"></a>(1) å†…å­˜å˜é‡</h4><p>å‡è®¾æœ‰ä¸‰ä¸ªCPU Aã€Bã€Cï¼Œå¯¹åº”ä¸‰ä¸ªç¼“å­˜åˆ†åˆ«æ˜¯cache aã€bã€cã€‚åœ¨ä¸»å†…å­˜ä¸­å®šä¹‰äº†<code>x</code>çš„å¼•ç”¨å€¼ä¸º0ã€‚</p><p><img src="https://statics.sh1a.qingstor.com/2018/11/18/javabf-cpu-4.png" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/11/18/javabf-cpu-4.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å†…å­˜å˜é‡"></p><h4 id="2-å•æ ¸è¯»å–"><a href="#2-å•æ ¸è¯»å–" class="headerlink" title="(2) å•æ ¸è¯»å–"></a>(2) å•æ ¸è¯»å–</h4><p>æ‰§è¡Œæµç¨‹æ˜¯ï¼š</p><ul><li>CPU Aå‘å‡ºäº†ä¸€æ¡æŒ‡ä»¤ï¼Œä»ä¸»å†…å­˜ä¸­è¯»å–<code>x</code>ã€‚</li><li>ä»ä¸»å†…å­˜é€šè¿‡ bus è¯»å–åˆ° CPU A çš„ç¼“å­˜ä¸­ï¼ˆè¿œç«¯è¯»å– Remote readï¼‰,è¿™æ—¶è¯¥ Cache line ä¿®æ”¹ä¸º E çŠ¶æ€ï¼ˆç‹¬äº«ï¼‰ã€‚</li></ul><p><img src="https://statics.sh1a.qingstor.com/2018/11/18/javabf-cpu-5.png" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/11/18/javabf-cpu-5.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å•æ ¸è¯»å–"></p><h4 id="3-åŒæ ¸è¯»å–"><a href="#3-åŒæ ¸è¯»å–" class="headerlink" title="(3) åŒæ ¸è¯»å–"></a>(3) åŒæ ¸è¯»å–</h4><p>æ‰§è¡Œæµç¨‹æ˜¯ï¼š</p><ul><li>CPU Aå‘å‡ºäº†ä¸€æ¡æŒ‡ä»¤ï¼Œä»ä¸»å†…å­˜ä¸­è¯»å–<code>x</code>ã€‚</li><li>CPU Aä»ä¸»å†…å­˜é€šè¿‡busè¯»å–åˆ° cache a ä¸­å¹¶å°†è¯¥ Cache line è®¾ç½®ä¸ºEçŠ¶æ€ã€‚</li><li>CPU Bå‘å‡ºäº†ä¸€æ¡æŒ‡ä»¤ï¼Œä»ä¸»å†…å­˜ä¸­è¯»å–<code>x</code>ã€‚</li><li>CPU Bè¯•å›¾ä»ä¸»å†…å­˜ä¸­è¯»å–<code>x</code>æ—¶ï¼ŒCPU Aæ£€æµ‹åˆ°äº†åœ°å€å†²çªã€‚è¿™æ—¶CPU Aå¯¹ç›¸å…³æ•°æ®åšå‡ºå“åº”ã€‚æ­¤æ—¶<code>x</code>å­˜å‚¨äº cache a å’Œ cache b ä¸­ï¼Œ<code>x</code>åœ¨ chche a å’Œ cache b ä¸­éƒ½è¢«è®¾ç½®ä¸ºSçŠ¶æ€(å…±äº«)ã€‚</li></ul><p><img src="https://statics.sh1a.qingstor.com/2018/11/18/javabf-cpu-6.png" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/11/18/javabf-cpu-6.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="åŒæ ¸è¯»å–"></p><h4 id="4-ä¿®æ”¹æ•°æ®"><a href="#4-ä¿®æ”¹æ•°æ®" class="headerlink" title="(4) ä¿®æ”¹æ•°æ®"></a>(4) ä¿®æ”¹æ•°æ®</h4><p>æ‰§è¡Œæµç¨‹æ˜¯ï¼š</p><ul><li>CPU A è®¡ç®—å®Œæˆåå‘æŒ‡ä»¤éœ€è¦ä¿®æ”¹<code>x</code>.</li><li>CPU A å°†<code>x</code>è®¾ç½®ä¸ºMçŠ¶æ€ï¼ˆä¿®æ”¹ï¼‰å¹¶é€šçŸ¥ç¼“å­˜äº†<code>x</code>çš„ CPU B, CPU B å°†æœ¬åœ° cache b ä¸­çš„<code>x</code>è®¾ç½®ä¸º<code>I</code>çŠ¶æ€(æ— æ•ˆ)</li><li>CPU A å¯¹<code>x</code>è¿›è¡Œèµ‹å€¼ã€‚</li></ul><p><img src="https://statics.sh1a.qingstor.com/2018/11/18/javabf-cpu-7.png" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/11/18/javabf-cpu-7.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="ä¿®æ”¹æ•°æ®"></p><h4 id="5-åŒæ­¥æ•°æ®"><a href="#5-åŒæ­¥æ•°æ®" class="headerlink" title="(5) åŒæ­¥æ•°æ®"></a>(5) åŒæ­¥æ•°æ®</h4><p>é‚£ä¹ˆæ‰§è¡Œæµç¨‹æ˜¯ï¼š</p><ul><li>CPU B å‘å‡ºäº†è¦è¯»å–xçš„æŒ‡ä»¤ã€‚</li><li>CPU B é€šçŸ¥CPU A,CPU Aå°†ä¿®æ”¹åçš„æ•°æ®åŒæ­¥åˆ°ä¸»å†…å­˜æ—¶cache a ä¿®æ”¹ä¸ºEï¼ˆç‹¬äº«ï¼‰</li><li>CPU AåŒæ­¥CPU Bçš„x,å°†cache aå’ŒåŒæ­¥åcache bä¸­çš„xè®¾ç½®ä¸ºSçŠ¶æ€ï¼ˆå…±äº«ï¼‰ã€‚</li></ul><p><img src="https://statics.sh1a.qingstor.com/2018/11/18/javabf-cpu-8.png" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/11/18/javabf-cpu-8.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="åŒæ­¥æ•°æ®"></p><h3 id="3-CPU-å­˜å‚¨æ¨¡å‹ç®€ä»‹"><a href="#3-CPU-å­˜å‚¨æ¨¡å‹ç®€ä»‹" class="headerlink" title="3. CPU å­˜å‚¨æ¨¡å‹ç®€ä»‹"></a>3. CPU å­˜å‚¨æ¨¡å‹ç®€ä»‹</h3><p>MESIåè®®ä¸ºäº†ä¿è¯å¤šä¸ª CPU cache ä¸­å…±äº«æ•°æ®çš„ä¸€è‡´æ€§ï¼Œå®šä¹‰äº† Cache line çš„å››ç§çŠ¶æ€ï¼Œè€Œ CPU å¯¹ cache çš„<code>4</code>ç§æ“ä½œå¯èƒ½ä¼šäº§ç”Ÿä¸ä¸€è‡´çŠ¶æ€ï¼Œå› æ­¤ cache æ§åˆ¶å™¨ç›‘å¬åˆ°æœ¬åœ°æ“ä½œå’Œè¿œç¨‹æ“ä½œçš„æ—¶å€™ï¼Œéœ€è¦å¯¹åœ°å€ä¸€è‡´çš„ Cache line çŠ¶æ€åšå‡ºä¸€å®šçš„ä¿®æ”¹ï¼Œä»è€Œä¿è¯æ•°æ®åœ¨å¤šä¸ªcacheä¹‹é—´æµè½¬çš„ä¸€è‡´æ€§ã€‚</p><p>ä½†æ˜¯ï¼Œç¼“å­˜çš„ä¸€è‡´æ€§æ¶ˆæ¯ä¼ é€’æ˜¯è¦æ—¶é—´çš„ï¼Œè¿™å°±ä½¿å¾—çŠ¶æ€åˆ‡æ¢ä¼šæœ‰æ›´å¤šçš„å»¶è¿Ÿã€‚æŸäº›çŠ¶æ€çš„åˆ‡æ¢éœ€è¦ç‰¹æ®Šçš„å¤„ç†ï¼Œå¯èƒ½ä¼šé˜»å¡å¤„ç†å™¨ã€‚è¿™äº›éƒ½å°†ä¼šå¯¼è‡´å„ç§å„æ ·çš„ç¨³å®šæ€§å’Œæ€§èƒ½é—®é¢˜ã€‚æ¯”å¦‚ä½ éœ€è¦ä¿®æ”¹æœ¬åœ°ç¼“å­˜ä¸­çš„ä¸€æ¡ä¿¡æ¯ï¼Œé‚£ä¹ˆä½ å¿…é¡»å°†<code>I</code>ï¼ˆæ— æ•ˆï¼‰çŠ¶æ€é€šçŸ¥åˆ°å…¶ä»–æ‹¥æœ‰è¯¥ç¼“å­˜æ•°æ®çš„CPUç¼“å­˜ä¸­ï¼Œå¹¶ä¸”ç­‰å¾…ç¡®è®¤ã€‚ç­‰å¾…ç¡®è®¤çš„è¿‡ç¨‹ä¼šé˜»å¡å¤„ç†å™¨ï¼Œè¿™ä¼šé™ä½å¤„ç†å™¨çš„æ€§èƒ½ã€‚å› ä¸ºè¿™ä¸ªç­‰å¾…è¿œè¿œæ¯”ä¸€ä¸ªæŒ‡ä»¤çš„æ‰§è¡Œæ—¶é—´é•¿çš„å¤šã€‚æ‰€ä»¥ï¼Œä¸ºäº†ä¸ºäº†é¿å…è¿™ç§é˜»å¡å¯¼è‡´æ—¶é—´çš„æµªè´¹ï¼Œå¼•å…¥äº†å­˜å‚¨ç¼“å­˜(<code>Store Buffer</code>)å’Œæ— æ•ˆé˜Ÿåˆ—(<code>Invalidate Queue</code>)ã€‚</p><h4 id="1-å­˜å‚¨ç¼“å­˜"><a href="#1-å­˜å‚¨ç¼“å­˜" class="headerlink" title="(1) å­˜å‚¨ç¼“å­˜"></a>(1) å­˜å‚¨ç¼“å­˜</h4><p>åœ¨æ²¡æœ‰å­˜å‚¨ç¼“å­˜æ—¶ï¼ŒCPU è¦å†™å…¥ä¸€ä¸ªé‡ï¼Œæœ‰ä»¥ä¸‹æƒ…å†µï¼š</p><ul><li>é‡ä¸åœ¨è¯¥ CPU ç¼“å­˜ä¸­ï¼Œåˆ™éœ€è¦å‘é€ Read Invalidate ä¿¡å·ï¼Œå†ç­‰å¾…æ­¤ä¿¡å·è¿”å›ï¼Œä¹‹åå†å†™å…¥é‡åˆ°ç¼“å­˜ä¸­ã€‚</li><li>é‡åœ¨è¯¥ CPU ç¼“å­˜ä¸­ï¼Œå¦‚æœè¯¥é‡çš„çŠ¶æ€æ˜¯ Exclusive åˆ™ç›´æ¥æ›´æ”¹ã€‚è€Œå¦‚æœæ˜¯ Shared åˆ™éœ€è¦å‘é€ Invalidate æ¶ˆæ¯è®©å…¶å®ƒ CPU æ„ŸçŸ¥åˆ°è¿™ä¸€æ›´æ”¹åå†æ›´æ”¹ã€‚</li></ul><p>è¿™äº›æƒ…å†µä¸­ï¼Œå¾ˆæœ‰å¯èƒ½ä¼šè§¦å‘è¯¥ CPU ä¸å…¶å®ƒ CPU è¿›è¡Œé€šè®¯ï¼Œæ¥ç€éœ€è¦ç­‰å¾…å®ƒä»¬å›å¤ã€‚è¿™ä¼šæµªè´¹å¤§é‡çš„æ—¶é’Ÿå‘¨æœŸï¼ä¸ºäº†æé«˜æ•ˆç‡ï¼Œå¯ä»¥ä½¿ç”¨<strong>å¼‚æ­¥</strong>çš„æ–¹å¼å»å¤„ç†ï¼šå…ˆå°†å€¼å†™å…¥åˆ°ä¸€ä¸ª Buffer ä¸­ï¼Œå†å‘é€é€šè®¯çš„ä¿¡å·ï¼Œç­‰åˆ°ä¿¡å·è¢«å“åº”ï¼Œå†åº”ç”¨åˆ° cache ä¸­ã€‚å¹¶ä¸”æ­¤ Buffer èƒ½å¤Ÿæ¥å—è¯¥ CPU è¯»å€¼ã€‚è¿™ä¸ª Buffer å°±æ˜¯ Store Bufferã€‚è€Œä¸é¡»è¦ç­‰å¾…å¯¹æŸä¸ªé‡çš„èµ‹å€¼æŒ‡ä»¤çš„å®Œæˆæ‰ç»§ç»­æ‰§è¡Œä¸‹ä¸€æ¡æŒ‡ä»¤ï¼Œç›´æ¥å» Store Buffer ä¸­è¯»è¯¥é‡çš„å€¼ï¼Œè¿™ç§ä¼˜åŒ–å«<strong>Store Forwarding</strong>ã€‚</p><h4 id="2-æ— æ•ˆé˜Ÿåˆ—"><a href="#2-æ— æ•ˆé˜Ÿåˆ—" class="headerlink" title="(2) æ— æ•ˆé˜Ÿåˆ—"></a>(2) æ— æ•ˆé˜Ÿåˆ—</h4><p>åŒç†ï¼Œè§£å†³äº†ä¸»åŠ¨å‘é€ä¿¡å·ç«¯çš„æ•ˆç‡é—®é¢˜ï¼Œé‚£ä¹ˆï¼Œæ¥å—ç«¯ CPU æ¥å—åˆ° Invalidate ä¿¡å·åå¦‚æœç«‹å³é‡‡å–ç›¸åº”è¡ŒåŠ¨(å»å…¶å®ƒ CPU åŒæ­¥å€¼)ï¼Œå†è¿”å›å“åº”ä¿¡å·ï¼Œåˆ™æ—¶é’Ÿå‘¨æœŸä¹Ÿå¤ªé•¿äº†ï¼Œæ­¤å¤„ä¹Ÿå¯ä¼˜åŒ–ã€‚æ¥å—ç«¯ CPU æ¥å—åˆ°ä¿¡å·åä¸æ˜¯ç«‹å³é‡‡å–è¡ŒåŠ¨ï¼Œè€Œæ˜¯å°† Invalidate ä¿¡å·æ’å…¥åˆ°ä¸€ä¸ªé˜Ÿåˆ— Queue ä¸­ï¼Œç«‹å³ä½œå‡ºå“åº”ã€‚ç­‰åˆ°åˆé€‚çš„æ—¶æœºï¼Œå†å»å¤„ç†è¿™ä¸ª Queue ä¸­çš„ Invalidate ä¿¡å·ï¼Œå¹¶ä½œç›¸åº”å¤„ç†ã€‚è¿™ä¸ª Queue å°±æ˜¯<strong>Invalidate Queue</strong>ã€‚</p><h2 id="å››ã€ä¹±åºæ‰§è¡Œ"><a href="#å››ã€ä¹±åºæ‰§è¡Œ" class="headerlink" title="å››ã€ä¹±åºæ‰§è¡Œ"></a>å››ã€ä¹±åºæ‰§è¡Œ</h2><p><strong>ä¹±åºæ‰§è¡Œï¼ˆ<code>out-of-orderexecution</code>ï¼‰</strong>ï¼šæ˜¯æŒ‡CPUå…è®¸å°†å¤šæ¡æŒ‡ä»¤ä¸æŒ‰ç¨‹åºè§„å®šçš„é¡ºåºåˆ†å¼€å‘é€ç»™å„ç›¸åº”ç”µè·¯å•å…ƒå¤„ç†çš„æŠ€æœ¯ã€‚è¿™æ ·å°†æ ¹æ®å„ç”µè·¯å•å…ƒçš„çŠ¶æ€å’Œå„æŒ‡ä»¤èƒ½å¦æå‰æ‰§è¡Œçš„å…·ä½“æƒ…å†µåˆ†æåï¼Œå°†èƒ½æå‰æ‰§è¡Œçš„æŒ‡ä»¤ç«‹å³å‘é€ç»™ç›¸åº”ç”µè·¯ã€‚</p><p>è¿™å¥½æ¯”è¯·Aã€Bã€Cä¸‰ä¸ªåäººä¸ºæ™šä¼šé¢˜å†™æ¨ªå¹…â€œæ˜¥èŠ‚è”æ¬¢æ™šä¼šâ€å…­ä¸ªå¤§å­—ï¼Œæ¯äººå„å†™ä¸¤ä¸ªå­—ã€‚å¦‚æœè¿™æ—¶åœ¨ä¸€å¼ å¤§çº¸ä¸ŠæŒ‰é¡ºåºç”±Aå†™å¥½â€æ˜¥èŠ‚â€åå†äº¤ç»™Bå†™â€è”æ¬¢â€ï¼Œç„¶åå†ç”±Cå†™â€æ™šä¼šâ€ï¼Œé‚£ä¹ˆè¿™æ ·åœ¨Aå†™çš„æ—¶å€™ï¼ŒBå’ŒCå¿…é¡»ç­‰å¾…ï¼Œè€Œåœ¨Bå†™çš„æ—¶å€™Cä»ç„¶è¦ç­‰å¾…è€ŒAå·²ç»æ²¡äº‹äº†ã€‚</p><p>ä½†å¦‚æœé‡‡ç”¨ä¸‰ä¸ªäººåˆ†åˆ«ç”¨ä¸‰å¼ çº¸åŒæ—¶å†™çš„åšæ³•ï¼Œ é‚£ä¹ˆBå’ŒCéƒ½ä¸å¿…é¡»ç­‰å¾…å°±å¯ä»¥åŒæ—¶å„å†™å„çš„äº†ï¼Œç”šè‡³Cå’ŒBè¿˜å¯ä»¥æ¯”Aå…ˆå†™å¥½ä¹Ÿæ²¡å…³ç³»ï¼ˆå°±è±¡ä¹±åºæ‰§è¡Œï¼‰ï¼Œä½†å½“ä»–ä»¬éƒ½å†™å®Œåå°±å¿…é¡»é‡æ–°åœ¨æ¨ªå¹…ä¸Šï¼ˆè‡ªç„¶å¯ä»¥ç”±åˆ«äººåšï¼Œå°±è±¡CPUä¸­ä¹±åºæ‰§è¡Œåçš„é‡æ–°æ’åˆ—å•å…ƒï¼‰æŒ‰â€æ˜¥èŠ‚è”æ¬¢æ™šä¼šâ€çš„é¡ºåºæ’å¥½æ‰èƒ½æŒ‚å‡ºå»ã€‚</p><p>æ‰€ä»¥ï¼ŒCPU ä¸ºä»€ä¹ˆä¼šæœ‰ä¹±åºæ‰§è¡Œä¼˜åŒ–ï¼Ÿæœ¬è´¨åŸå› æ˜¯<strong>CPUä¸ºäº†æ•ˆç‡</strong>ï¼Œå°†é•¿è´¹æ—¶çš„æ“ä½œâ€œå¼‚æ­¥â€æ‰§è¡Œï¼Œæ’åœ¨åé¢çš„æŒ‡ä»¤ä¸ç­‰å‰é¢çš„æŒ‡ä»¤æ‰§è¡Œå®Œæ¯•å°±å¼€å§‹æ‰§è¡Œåé¢çš„æŒ‡ä»¤ã€‚è€Œä¸”å…è®¸æ’åœ¨å‰é¢çš„é•¿è´¹æ—¶æŒ‡ä»¤åäºæ’åœ¨åé¢çš„æŒ‡ä»¤æ‰§è¡Œå®Œã€‚</p><p>CPU æ‰§è¡Œä¹±åºä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li>**å†™å†™ä¹±åº(store store)**ï¼š<code>a=1;b=2; -&gt; b=2;a=1;</code></li><li>**å†™è¯»ä¹±åº(store load)**ï¼š<code>a=1;load(b); -&gt; load(b);a=1;</code></li><li>**è¯»è¯»ä¹±åº(load load)**ï¼š<code>load(a);load(b); -&gt; load(b);load(a);</code></li><li>**è¯»å†™ä¹±åº(load store)**ï¼š<code>load(a);b=2; -&gt; b=2;load(a);</code></li></ul><p>æ€»è€Œè¨€ä¹‹ï¼Œ<strong>CPUçš„ä¹±åºæ‰§è¡Œä¼˜åŒ–æŒ‡çš„æ˜¯å¤„ç†å™¨ä¸ºæé«˜è¿ç®—é€Ÿåº¦è€Œåšå‡ºè¿èƒŒä»£ç åŸæœ‰é¡ºåºçš„ä¼˜åŒ–</strong>ã€‚</p><hr><p>å‚è€ƒæ–‡ç« ï¼š</p><ul><li><a href="http://ifeve.com/from-javaeye-cpu-cache/">ä»Javaè§†è§’ç†è§£ç³»ç»Ÿç»“æ„ï¼ˆäºŒï¼‰CPUç¼“å­˜</a></li><li><a href="http://www.cnblogs.com/yanlong300/p/8986041.html">CPUç¼“å­˜ä¸€è‡´æ€§åè®®MESI</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CPUç¼“å­˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaé¢å‘å¯¹è±¡è®¾è®¡ä¹‹è´£ä»»é“¾æ¨¡å¼</title>
      <link href="/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-ze-ren-lian-mo-shi/"/>
      <url>/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-ze-ren-lian-mo-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="æ¨¡å¼åŠ¨æœº"><a href="#æ¨¡å¼åŠ¨æœº" class="headerlink" title="æ¨¡å¼åŠ¨æœº"></a>æ¨¡å¼åŠ¨æœº</h2><p>å¾ˆå¤šæƒ…å†µä¸‹ï¼Œåœ¨ä¸€ä¸ªè½¯ä»¶ç³»ç»Ÿä¸­å¯ä»¥å¤„ç†æŸä¸ªè¯·æ±‚çš„å¯¹è±¡ä¸æ­¢ä¸€ä¸ªã€‚ä¾‹å¦‚å®¡æ‰¹å·¥ä½œæµç­‰ï¼Œä»–ä»¬å¯ä»¥æ„æˆä¸€æ¡å¤„ç†é‡‡è´­å•çš„é“¾å¼ç»“æ„ï¼Œé‡‡è´­å•(å¯ä»¥çœ‹ä½œæ˜¯è¦å¤„ç†çš„ä¿¡æ¯)æ²¿ç€è¿™æ¡é“¾è¿›è¡Œä¼ é€’ï¼Œè¿™æ¡é“¾å°±ç§°ä¸ºè´£ä»»é“¾ã€‚è´£ä»»é“¾å¯ä»¥æ˜¯ä¸€æ¡ç›´çº¿ã€ä¸€ä¸ªç¯æˆ–è€…ä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼Œæœ€å¸¸è§çš„èŒè´£é“¾æ˜¯ç›´çº¿å‹ï¼Œå³æ²¿ç€ä¸€æ¡å•å‘çš„é“¾æ¥ä¼ é€’è¯·æ±‚ã€‚é“¾ä¸Šçš„æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æ˜¯è¯·æ±‚å¤„ç†è€…ï¼Œè´£ä»»é“¾æ¨¡å¼å¯ä»¥å°†è¯·æ±‚çš„å¤„ç†è€…ç»„ç»‡æˆä¸€æ¡é“¾ï¼Œå¹¶è®©è¯·æ±‚æ²¿ç€é“¾ä¼ é€’ï¼Œç”±é“¾ä¸Šçš„å¤„ç†è€…å¯¹è¯·æ±‚è¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œå®¢æˆ·ç«¯å®é™…ä¸Šæ— é¡»å…³å¿ƒè¯·æ±‚çš„å¤„ç†ç»†èŠ‚ä»¥åŠè¯·æ±‚çš„ä¼ é€’ï¼Œåªéœ€å°†è¯·æ±‚å‘é€åˆ°é“¾ä¸Šå³å¯ï¼Œä»è€Œå®ç°è¯·æ±‚å‘é€è€…å’Œè¯·æ±‚å¤„ç†è€…è§£è€¦ã€‚</p><h2 id="æ¨¡å¼å®šä¹‰"><a href="#æ¨¡å¼å®šä¹‰" class="headerlink" title="æ¨¡å¼å®šä¹‰"></a>æ¨¡å¼å®šä¹‰</h2><blockquote><p><strong>å®šä¹‰</strong>ï¼šè´£ä»»é“¾æ¨¡å¼(<code>Chain of Responsibility Pattern</code>)æ˜¯ä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…ä¸è¯·æ±‚å¤„ç†è€…è€¦åˆåœ¨ä¸€èµ·ã€‚å°†è¿™äº›å¯¹è±¡è¿æ¥æˆä¸€æ¡é“¾ï¼Œå¹¶ä¸”æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯·æ±‚ï¼Œç›´åˆ°æœ‰å¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚å®ƒæ˜¯ä¸€ç§å¯¹è±¡è¡Œä¸ºå‹æ¨¡å¼ã€‚</p></blockquote><p><strong>å®è´¨</strong>ï¼šè´£ä»»é“¾ä¸Šçš„å¤„ç†è€…è´Ÿè´£å¤„ç†è¯·æ±‚ï¼Œå®¢æˆ·åªéœ€è¦å°†è¯·æ±‚å‘é€åˆ°èŒè´£é“¾ä¸Šå³å¯ï¼Œæ— é¡»å…³å¿ƒè¯·æ±‚çš„å¤„ç†ç»†èŠ‚å’Œè¯·æ±‚çš„ä¼ é€’ï¼Œä»è€Œå®ç°è¯·æ±‚å‘é€è€…ä¸è¯·æ±‚å¤„ç†è€…çš„è§£è€¦ã€‚</p><h2 id="æ¨¡å¼ç»“æ„"><a href="#æ¨¡å¼ç»“æ„" class="headerlink" title="æ¨¡å¼ç»“æ„"></a>æ¨¡å¼ç»“æ„</h2><h3 id="å‚ä¸è§’è‰²"><a href="#å‚ä¸è§’è‰²" class="headerlink" title="å‚ä¸è§’è‰²"></a>å‚ä¸è§’è‰²</h3><ul><li><code>Handler</code>ï¼ˆæŠ½è±¡å¤„ç†è€…ï¼‰ï¼šå¤„ç†è¯·æ±‚çš„æ¥å£ï¼Œä¸€èˆ¬è®¾è®¡ä¸ºå…·æœ‰æŠ½è±¡è¯·æ±‚å¤„ç†æ–¹æ³•çš„æŠ½è±¡ç±»ï¼Œä»¥ä¾¿äºä¸åŒçš„å…·ä½“å¤„ç†è€…è¿›è¡Œç»§æ‰¿ï¼Œä»è€Œå®ç°å…·ä½“çš„è¯·æ±‚å¤„ç†æ–¹æ³•ã€‚æ­¤å¤–ï¼Œç”±äºæ¯ä¸€ä¸ªè¯·æ±‚å¤„ç†è€…çš„ä¸‹å®¶è¿˜æ˜¯ä¸€ä¸ªå¤„ç†è€…ï¼Œå› æ­¤æŠ½è±¡å¤„ç†è€…æœ¬èº«è¿˜åŒ…å«äº†ä¸€ä¸ªæœ¬èº«çš„å¼•ç”¨(<code>nextHandler</code>)ä½œä¸ºå…¶å¯¹ä¸‹å®¶çš„å¼•ç”¨ï¼Œä»¥ä¾¿å°†å¤„ç†è€…é“¾æˆä¸€æ¡é“¾ï¼›</li><li><code>ConcreteHandler</code>ï¼ˆå…·ä½“å¤„ç†è€…ï¼‰ï¼šæŠ½è±¡å¤„ç†è€…çš„å­ç±»ï¼Œå¯ä»¥å¤„ç†ç”¨æˆ·è¯·æ±‚ï¼Œå…¶å®ç°äº†æŠ½è±¡å¤„ç†è€…ä¸­å®šä¹‰çš„è¯·æ±‚å¤„ç†æ–¹æ³•ã€‚åœ¨å…·ä½“å¤„ç†è¯·æ±‚æ—¶éœ€è¦è¿›è¡Œåˆ¤æ–­ï¼Œè‹¥å…¶å…·æœ‰ç›¸åº”çš„å¤„ç†æƒé™ï¼Œé‚£ä¹ˆå°±å¤„ç†å®ƒï¼›å¦åˆ™ï¼Œå…¶å°†è¯·æ±‚è½¬å‘ç»™åç»§è€…ï¼Œä»¥ä¾¿è®©åé¢çš„å¤„ç†è€…è¿›è¡Œå¤„ç†ã€‚</li></ul><p>åœ¨è´£ä»»é“¾æ¨¡å¼é‡Œï¼Œç”±æ¯ä¸€ä¸ªè¯·æ±‚å¤„ç†è€…å¯¹è±¡å¯¹å…¶ä¸‹å®¶çš„å¼•ç”¨è€Œè¿æ¥èµ·æ¥å½¢æˆä¸€æ¡è¯·æ±‚å¤„ç†é“¾ã€‚è¯·æ±‚å°†åœ¨è¿™æ¡é“¾ä¸Šä¸€ç›´ä¼ é€’ï¼Œç›´åˆ°é“¾ä¸Šçš„æŸä¸€ä¸ªè¯·æ±‚å¤„ç†è€…èƒ½å¤Ÿå¤„ç†æ­¤è¯·æ±‚ã€‚<strong>å‘å‡ºè¿™ä¸ªè¯·æ±‚çš„å®¢æˆ·ç«¯å¹¶ä¸çŸ¥é“é“¾ä¸Šçš„å“ªä¸€ä¸ªè¯·æ±‚å¤„ç†è€…å°†å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œè¿™ä½¿å¾—ç³»ç»Ÿå¯ä»¥åœ¨ä¸å½±å“å®¢æˆ·ç«¯çš„æƒ…å†µä¸‹åŠ¨æ€åœ°é‡æ–°ç»„ç»‡é“¾å’Œåˆ†é…è´£ä»»</strong>ã€‚</p><h3 id="UMLç±»å›¾"><a href="#UMLç±»å›¾" class="headerlink" title="UMLç±»å›¾"></a>UMLç±»å›¾</h3><p><img src="https://statics.sh1a.qingstor.com/2018/11/04/chain-of-responsibility.png" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/11/04/chain-of-responsibility.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="è´£ä»»é“¾æ¨¡å¼UMLç±»å›¾"></p><h2 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h2><p>é¦–å…ˆï¼Œè´£ä»»é“¾æ¨¡å¼çš„æ ¸å¿ƒåœ¨äºå¯¹è¯·æ±‚å¤„ç†è€…çš„æŠ½è±¡ã€‚åœ¨å®ç°è¿‡ç¨‹ä¸­ï¼ŒæŠ½è±¡å¤„ç†è€…ä¸€èˆ¬ä¼šè¢«è®¾å®šä¸º<strong>æŠ½è±¡ç±»</strong>ï¼Œå…¶å…¸å‹å®ç°ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * è´£ä»»è¿æ¨¡å¼çš„æŠ½è±¡å¤„ç†è€…è§’è‰². * * Created by blinkfox on 16/7/11. */</span><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Handler</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/** åç»§å¤„ç†è€…è§’è‰². */</span>    <span class="token keyword">protected</span> <span class="token class-name">Handler</span> nextHandler<span class="token punctuation">;</span>    <span class="token comment">/**     * å¤„ç†è¯·æ±‚çš„æŠ½è±¡æ–¹æ³•.     *     * @param condition æ¡ä»¶     */</span>    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token class-name">String</span> condition<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * nextHandlerçš„Setteræ–¹æ³•.     *     * @param nextHandler åç»§å¤„ç†å™¨     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNextHandler</span><span class="token punctuation">(</span><span class="token class-name">Handler</span> nextHandler<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>nextHandler <span class="token operator">=</span> nextHandler<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶æ¬¡ï¼Œæ˜¯è‹¥å¹²ä¸ªå…·ä½“çš„å¤„ç†è§’è‰²ç±»ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å…·ä½“å¤„ç†è§’è‰²1. * * Created by blinkfox on 16/7/11. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteHandler1</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * å…·ä½“å¤„ç†è§’è‰²1çš„å¤„ç†æ–¹æ³•.     *     * @param condition æ¡ä»¶     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token class-name">String</span> condition<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// å¦‚æœæ˜¯è‡ªå·±çš„è´£ä»»ï¼Œå°±è‡ªå·±å¤„ç†ï¼Œè´Ÿè´£ä¼ ç»™ä¸‹å®¶å¤„ç†</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"ConcreteHandler1"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>condition<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">"å…·ä½“å¤„ç†è§’è‰²1çš„å¤„ç†æ–¹æ³•handled1..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">"å…·ä½“å¤„ç†è§’è‰²1 é€šè¿‡..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            nextHandler<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span>condition<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å…·ä½“å¤„ç†è§’è‰²2. * * Created by blinkfox on 16/7/11. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteHandler2</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * å…·ä½“å¤„ç†è§’è‰²2çš„å¤„ç†æ–¹æ³•.     *     * @param condition æ¡ä»¶     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token class-name">String</span> condition<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// å¦‚æœæ˜¯è‡ªå·±çš„è´£ä»»ï¼Œå°±è‡ªå·±å¤„ç†ï¼Œè´Ÿè´£ä¼ ç»™ä¸‹å®¶å¤„ç†</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"ConcreteHandler2"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>condition<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">"å…·ä½“å¤„ç†è§’è‰²2çš„å¤„ç†æ–¹æ³•handled1..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">"å…·ä½“å¤„ç†è§’è‰²2 é€šè¿‡..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            nextHandler<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span>condition<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å…·ä½“å¤„ç†è§’è‰²n. * * Created by blinkfox on 16/7/11. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteHandlerN</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * è¿™é‡Œå‡è®¾næ˜¯é“¾çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹å¿…é¡»å¤„ç†æ‰.     * åœ¨å®é™…æƒ…å†µä¸‹ï¼Œå¯èƒ½å‡ºç°ç¯ï¼Œæˆ–è€…æ˜¯æ ‘å½¢ï¼Œè¿™é‡Œå¹¶ä¸ä¸€å®šæ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹.     *     * @param condition å‚æ•°æ¡ä»¶     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token class-name">String</span> condition<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">"å…·ä½“å¤„ç†è§’è‰²nçš„å¤„ç†æ–¹æ³• ç»“æŸ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åï¼Œæ˜¯å®¢æˆ·ç«¯åœºæ™¯ç±»ï¼Œä»£ç è°ƒç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * è´£ä»»è¿æ¨¡å¼çš„å®¢æˆ·ç«¯åœºæ™¯ç±». * * Created by blinkfox on 16/7/11. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ChainClient</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * ä¸»å…¥å£æ–¹æ³•.     *     * @param args æ•°ç»„å‚æ•°     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Handler</span> handler1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteHandler1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Handler</span> handler2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteHandler2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Handler</span> handlern <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteHandlerN</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        handler1<span class="token punctuation">.</span><span class="token function">setNextHandler</span><span class="token punctuation">(</span>handler2<span class="token punctuation">)</span><span class="token punctuation">;</span>        handler2<span class="token punctuation">.</span><span class="token function">setNextHandler</span><span class="token punctuation">(</span>handlern<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//å‡è®¾è¿™ä¸ªè¯·æ±‚æ˜¯ConcreteHandler2çš„è´£ä»»</span>        handler1<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span><span class="token string">"ConcreteHandler2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>æ³¨</strong>ï¼šè´£ä»»é“¾æ¨¡å¼å¹¶ä¸åˆ›å»ºèŒè´£é“¾ï¼ŒèŒè´£é“¾çš„åˆ›å»ºå·¥ä½œå¿…é¡»ç”±ç³»ç»Ÿçš„å…¶ä»–éƒ¨åˆ†æ¥å®Œæˆï¼Œä¸€èˆ¬ç”±ä½¿ç”¨è¯¥è´£ä»»é“¾çš„å®¢æˆ·ç«¯åˆ›å»ºã€‚èŒè´£é“¾æ¨¡å¼é™ä½äº†è¯·æ±‚çš„å‘é€è€…å’Œè¯·æ±‚å¤„ç†è€…ä¹‹é—´çš„è€¦åˆï¼Œä»è€Œä½¿å¾—å¤šä¸ªè¯·æ±‚å¤„ç†è€…éƒ½æœ‰æœºä¼šå¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚</p></blockquote><h2 id="æ¨¡å¼åˆ†æ"><a href="#æ¨¡å¼åˆ†æ" class="headerlink" title="æ¨¡å¼åˆ†æ"></a>æ¨¡å¼åˆ†æ</h2><h3 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h3><p>åœ¨å®é™…è½¯ä»¶å¼€å‘ä¸­ï¼Œå¦‚æœé‡åˆ°æœ‰å¤šä¸ªå¯¹è±¡å¯ä»¥å¤„ç†åŒä¸€è¯·æ±‚æ—¶å¯ä»¥è€ƒè™‘ä½¿ç”¨èŒè´£é“¾æ¨¡å¼ï¼Œæœ€å¸¸è§çš„ä¾‹å­åŒ…æ‹¬åœ¨ Java Web åº”ç”¨å¼€å‘ä¸­åˆ›å»ºä¸€ä¸ªè¿‡æ»¤å™¨ï¼ˆFilterï¼‰é“¾æ¥å¯¹è¯·æ±‚æ•°æ®è¿›è¡Œè¿‡æ»¤ï¼ˆä¸­æ–‡å­—ç¬¦ä¹±ç çš„å¤„ç†ï¼‰ã€åœ¨å·¥ä½œæµç³»ç»Ÿä¸­å®ç°å…¬æ–‡çš„åˆ†çº§å®¡æ‰¹ã€åœ¨Strutsåº”ç”¨ä¸­æ·»åŠ ä¸åŒçš„æ‹¦æˆªå™¨(å¸¸ç”¨çš„æœ‰ç±»å‹è½¬åŒ–ã€å¼‚å¸¸å¤„ç†ï¼Œæ•°æ®æ ¡éªŒâ€¦)ä»¥å¢å¼ºStruts2çš„åŠŸèƒ½ç­‰ã€‚</p><h3 id="çº¯ä¸ä¸çº¯çš„è´£ä»»é“¾æ¨¡å¼"><a href="#çº¯ä¸ä¸çº¯çš„è´£ä»»é“¾æ¨¡å¼" class="headerlink" title="çº¯ä¸ä¸çº¯çš„è´£ä»»é“¾æ¨¡å¼"></a>çº¯ä¸ä¸çº¯çš„è´£ä»»é“¾æ¨¡å¼</h3><ul><li><strong>çº¯çš„è´£ä»»é“¾æ¨¡å¼</strong>è¦æ±‚ä¸€ä¸ªå…·ä½“çš„å¤„ç†è€…å¯¹è±¡åªèƒ½åœ¨ä¸¤ä¸ªè¡Œä¸ºä¸­é€‰æ‹©ä¸€ä¸ªï¼šä¸€æ˜¯æ‰¿æ‹…è´£ä»»ï¼Œè€Œæ˜¯æŠŠè´£ä»»æ¨ç»™ä¸‹å®¶ã€‚ä¸å…è®¸å‡ºç°æŸä¸€ä¸ªå…·ä½“å¤„ç†è€…å¯¹è±¡åœ¨æ‰¿æ‹…äº†ä¸€éƒ¨åˆ†è´£ä»»ååˆæŠŠè´£ä»»å‘ä¸‹ä¼ çš„æƒ…å†µï¼›</li><li>åœ¨çº¯è´£ä»»é“¾æ¨¡å¼é‡Œé¢ï¼Œä¸€ä¸ªè¯·æ±‚å¿…é¡»è¢«æŸä¸€ä¸ªå¤„ç†è€…å¯¹è±¡æ‰€æ¥æ”¶ï¼›</li><li>åœ¨ä¸çº¯çš„è´£ä»»é“¾æ¨¡å¼é‡Œé¢ï¼Œä¸€ä¸ªè¯·æ±‚å¯ä»¥æœ€ç»ˆä¸è¢«ä»»ä½•æ¥æ”¶ç«¯å¯¹è±¡æ‰€æ¥æ”¶ã€‚</li></ul><p>çº¯çš„è´£ä»»é“¾æ¨¡å¼çš„å®é™…ä¾‹å­å¾ˆéš¾æ‰¾åˆ°ï¼Œä¸€èˆ¬çœ‹åˆ°çš„ä¾‹å­å‡æ˜¯ä¸çº¯çš„è´£ä»»é“¾æ¨¡å¼çš„å®ç°ã€‚</p><h3 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h3><ul><li>é™ä½è€¦åˆåº¦ï¼Œä½¿è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…è§£è€¦ï¼Œä¾¿äºçµæ´»çš„ã€å¯æ’æ‹”çš„å®šä¹‰è¯·æ±‚å¤„ç†è¿‡ç¨‹ï¼›</li><li>ç®€åŒ–ã€å°è£…äº†è¯·æ±‚çš„å¤„ç†è¿‡ç¨‹ï¼Œå¹¶ä¸”è¿™ä¸ªè¿‡ç¨‹å¯¹å®¢æˆ·ç«¯è€Œè¨€æ˜¯é€æ˜çš„ï¼Œä»¥ä¾¿äºåŠ¨æ€åœ°é‡æ–°ç»„ç»‡é“¾ä»¥åŠåˆ†é…è´£ä»»ï¼Œå¢å¼ºè¯·æ±‚å¤„ç†çš„çµæ´»æ€§ï¼›</li><li>å¯ä»¥ä»èŒè´£é“¾ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹ï¼Œä¹Ÿå¯ä»¥éšæ—¶æ”¹å˜å†…éƒ¨çš„è¯·æ±‚å¤„ç†è§„åˆ™ï¼Œæ¯ä¸ªè¯·æ±‚å¤„ç†è€…éƒ½å¯ä»¥å»åŠ¨æ€åœ°æŒ‡å®šä»–çš„ç»§ä»»è€…ï¼›</li><li>èŒè´£é“¾å¯ç®€åŒ–å¯¹è±¡é—´çš„ç›¸äº’è¿æ¥ã€‚å®ƒä»¬ä»…éœ€ä¿æŒä¸€ä¸ªæŒ‡å‘å…¶åç»§è€…çš„å¼•ç”¨ï¼Œè€Œä¸éœ€ä¿æŒå®ƒæ‰€æœ‰çš„å€™é€‰æ¥å—è€…çš„å¼•ç”¨ï¼›</li><li>å¢åŠ æ–°çš„è¯·æ±‚å¤„ç†ç±»å¾ˆæ–¹ä¾¿ã€‚</li></ul><h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h3><ul><li>ä¸èƒ½ä¿è¯è¯·æ±‚ä¸€å®šè¢«æ¥æ”¶ã€‚æ—¢ç„¶ä¸€ä¸ªè¯·æ±‚æ²¡æœ‰æ˜ç¡®çš„æ¥æ”¶è€…ï¼Œé‚£ä¹ˆå°±ä¸èƒ½ä¿è¯å®ƒä¸€å®šä¼šè¢«å¤„ç†ï¼›</li><li>è¯¥è¯·æ±‚å¯èƒ½ä¸€ç›´åˆ°é“¾çš„æœ«ç«¯éƒ½å¾—ä¸åˆ°å¤„ç†ã€‚ä¸€ä¸ªè¯·æ±‚ä¹Ÿå¯èƒ½å› è¯¥é“¾æ²¡æœ‰è¢«æ­£ç¡®é…ç½®è€Œå¾—ä¸åˆ°å¤„ç†ï¼›</li><li>ç³»ç»Ÿæ€§èƒ½å°†å—åˆ°ä¸€å®šå½±å“ï¼Œè€Œä¸”åœ¨è¿›è¡Œä»£ç è°ƒè¯•æ—¶ä¸å¤ªæ–¹ä¾¿ï¼›å¯èƒ½ä¼šé€ æˆå¾ªç¯è°ƒç”¨ã€‚</li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li>åœ¨èŒè´£é“¾æ¨¡å¼é‡Œï¼Œå¾ˆå¤šå¯¹è±¡ç”±æ¯ä¸€ä¸ªå¯¹è±¡å¯¹å…¶ä¸‹å®¶çš„å¼•ç”¨è€Œè¿æ¥èµ·æ¥å½¢æˆä¸€æ¡é“¾ã€‚è¯·æ±‚åœ¨è¿™ä¸ªé“¾ä¸Šä¼ é€’ï¼Œç›´åˆ°é“¾ä¸Šçš„æŸä¸€ä¸ªå¯¹è±¡å†³å®šå¤„ç†æ­¤è¯·æ±‚ã€‚å‘å‡ºè¿™ä¸ªè¯·æ±‚çš„å®¢æˆ·ç«¯å¹¶ä¸çŸ¥é“é“¾ä¸Šçš„å“ªä¸€ä¸ªå¯¹è±¡æœ€ç»ˆå¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œè¿™ä½¿å¾—ç³»ç»Ÿå¯ä»¥åœ¨ä¸å½±å“å®¢æˆ·ç«¯çš„æƒ…å†µä¸‹åŠ¨æ€åœ°é‡æ–°ç»„ç»‡é“¾å’Œåˆ†é…è´£ä»»ã€‚</li><li>èŒè´£é“¾æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹åœ¨äºå¯ä»¥é™ä½ç³»ç»Ÿçš„è€¦åˆåº¦ï¼Œç®€åŒ–å¯¹è±¡çš„ç›¸äº’è¿æ¥ï¼ŒåŒæ—¶å¢å¼ºç»™å¯¹è±¡æŒ‡æ´¾èŒè´£çš„çµæ´»æ€§ï¼Œå¢åŠ æ–°çš„è¯·æ±‚å¤„ç†ç±»ä¹Ÿå¾ˆæ–¹ä¾¿ï¼›å…¶ä¸»è¦ç¼ºç‚¹åœ¨äºä¸èƒ½ä¿è¯è¯·æ±‚ä¸€å®šè¢«æ¥æ”¶ï¼Œä¸”å¯¹äºæ¯”è¾ƒé•¿çš„èŒè´£é“¾ï¼Œè¯·æ±‚çš„å¤„ç†å¯èƒ½æ¶‰åŠåˆ°å¤šä¸ªå¤„ç†å¯¹è±¡ï¼Œç³»ç»Ÿæ€§èƒ½å°†å—åˆ°ä¸€å®šå½±å“ï¼Œè€Œä¸”åœ¨è¿›è¡Œä»£ç è°ƒè¯•æ—¶ä¸å¤ªæ–¹ä¾¿ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶è®¾è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScriptä¹‹å†å­¦ä¹ </title>
      <link href="/post/qian-duan/javascript-zhi-zai-xue-xi/"/>
      <url>/post/qian-duan/javascript-zhi-zai-xue-xi/</url>
      
        <content type="html"><![CDATA[<h2 id="æ¦‚è§ˆ"><a href="#æ¦‚è§ˆ" class="headerlink" title="æ¦‚è§ˆ"></a>æ¦‚è§ˆ</h2><p>JavaScript æ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„åŠ¨æ€è¯­è¨€ï¼Œå®ƒåŒ…å«ç±»å‹ã€è¿ç®—ç¬¦ã€æ ‡å‡†å†…ç½®ï¼ˆ built-inï¼‰å¯¹è±¡å’Œæ–¹æ³•ã€‚å®ƒçš„è¯­æ³•æ¥æºäº Java å’Œ Cï¼Œæ‰€ä»¥è¿™ä¸¤ç§è¯­è¨€çš„è®¸å¤šè¯­æ³•ç‰¹æ€§åŒæ ·é€‚ç”¨äº JavaScriptã€‚éœ€è¦æ³¨æ„çš„ä¸€ä¸ªä¸»è¦åŒºåˆ«æ˜¯ JavaScript ä¸æ”¯æŒç±»ï¼Œç±»è¿™ä¸€æ¦‚å¿µåœ¨ JavaScript é€šè¿‡å¯¹è±¡åŸå‹ï¼ˆobject prototypeï¼‰å¾—åˆ°å»¶ç»­ã€‚å¦ä¸€ä¸ªä¸»è¦åŒºåˆ«æ˜¯ JavaScript ä¸­çš„å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼ŒJavaScript å…è®¸å‡½æ•°åœ¨åŒ…å«å¯æ‰§è¡Œä»£ç çš„åŒæ—¶ï¼Œèƒ½åƒå…¶ä»–å¯¹è±¡ä¸€æ ·è¢«ä¼ é€’ã€‚</p><h2 id="æ•°æ®ç±»å‹å’Œç»“æ„"><a href="#æ•°æ®ç±»å‹å’Œç»“æ„" class="headerlink" title="æ•°æ®ç±»å‹å’Œç»“æ„"></a>æ•°æ®ç±»å‹å’Œç»“æ„</h2><h3 id="1-åŠ¨æ€ç±»å‹"><a href="#1-åŠ¨æ€ç±»å‹" class="headerlink" title="1. åŠ¨æ€ç±»å‹"></a>1. åŠ¨æ€ç±»å‹</h3><p><code>JavaScript</code>æ˜¯ä¸€ç§å¼±ç±»å‹æˆ–è€…è¯´åŠ¨æ€è¯­è¨€ã€‚è¿™æ„å‘³ç€ä½ ä¸ç”¨æå‰å£°æ˜å˜é‡çš„ç±»å‹ï¼Œåœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œç±»å‹ä¼šè¢«è‡ªåŠ¨ç¡®å®šã€‚è¿™ä¹Ÿæ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªå˜é‡ä¿å­˜ä¸åŒç±»å‹çš„æ•°æ®ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>    <span class="token comment">// foo is a Number now</span><span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token string">"bar"</span><span class="token punctuation">;</span> <span class="token comment">// foo is a String now</span><span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token comment">// foo is a Boolean now</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="2-æ•°æ®ç±»å‹"><a href="#2-æ•°æ®ç±»å‹" class="headerlink" title="2. æ•°æ®ç±»å‹"></a>2. æ•°æ®ç±»å‹</h3><p>æœ€æ–°çš„<code>ECMAScript</code>æ ‡å‡†å®šä¹‰äº† 7 ç§æ•°æ®ç±»å‹:</p><ul><li>6 ç§åŸå§‹ç±»å‹<ul><li><code>Null</code> (ç©º, åªæœ‰ä¸€ä¸ªå€¼<code>null</code>)</li><li><code>Undefined</code> (æœªå®šä¹‰, ä¸€ä¸ªæ²¡æœ‰è¢«èµ‹å€¼çš„å˜é‡çš„é»˜è®¤å€¼æ˜¯<code>undefined</code>):</li><li><code>Boolean</code> (å¸ƒå°”, å¯ä»¥æœ‰ä¸¤ä¸ªå€¼ï¼š<code>true</code> å’Œ <code>false</code>)</li><li><code>Number</code> (æ•°å­—)</li><li><code>String</code> (å­—ç¬¦ä¸²)</li><li><code>Symbol</code> (ç¬¦å·, ECMAScript 6 æ–°å®šä¹‰çš„ç±»å‹ï¼Œè¡¨ç¤ºç‹¬ä¸€æ— äºŒçš„å€¼)</li></ul></li><li>å’Œ <code>Object</code> (å¯¹è±¡)<ul><li><code>Function</code> (å‡½æ•°)</li><li><code>Array</code> (æ•°ç»„)</li><li><code>Date</code> (æ—¥æœŸ)</li><li><code>JSON</code> (JSå¯¹è±¡æ ‡è¯†,æ¥åºåˆ—åŒ–å¯¹è±¡ã€æ•°ç»„ã€æ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼å’Œ <code>null</code>)</li><li><code>Math</code> (æ•°å­¦æ–¹é¢çš„è®¡ç®—)</li><li><code>RegExp</code> (æ­£åˆ™è¡¨è¾¾å¼)</li><li><code>Error</code> (é”™è¯¯)</li><li><code>Map</code></li><li><code>Set</code></li></ul></li></ul><h3 id="å†…ç½®å¯¹è±¡"><a href="#å†…ç½®å¯¹è±¡" class="headerlink" title="å†…ç½®å¯¹è±¡"></a>å†…ç½®å¯¹è±¡</h3><p>è¿™é‡Œçš„<strong>å†…ç½®å¯¹è±¡</strong>æŒ‡çš„æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸ(<code>global scope</code>)ä¸­çš„å¯¹è±¡ï¼Œç”±äºå¾ˆå¤šï¼Œä¸å†ä¸€ä¸€åˆ—å‡ºè¯´æ˜ï¼Œæ›´å…¨é¢çš„è§£é‡Šåœ¨<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects">è¿™é‡Œ</a>ã€‚</p><p>å…¨å±€å¯¹è±¡æœ¬èº«å¯é€šè¿‡<code>this</code>æ“ä½œç¬¦åœ¨å…¨å±€ä½œç”¨åŸŸä¸­è·å¾—ã€‚å®é™…ä¸Šï¼Œå…¨å±€ä½œç”¨åŸŸå°±æ˜¯ç”±å…¨å±€å¯¹è±¡çš„å„ä¸ªå±æ€§ç»„æˆçš„ï¼ˆåŒ…æ‹¬ç»§æ‰¿æ¥çš„å±æ€§ï¼‰ã€‚</p><h2 id="ä¸¥æ ¼æ¨¡å¼"><a href="#ä¸¥æ ¼æ¨¡å¼" class="headerlink" title="ä¸¥æ ¼æ¨¡å¼"></a>ä¸¥æ ¼æ¨¡å¼</h2><p>é™¤äº†æ­£å¸¸è¿è¡Œæ¨¡å¼ï¼ŒECMAscript 5æ·»åŠ äº†ç¬¬äºŒç§è¿è¡Œæ¨¡å¼ï¼šâ€ä¸¥æ ¼æ¨¡å¼â€ï¼ˆ<code>strict mode</code>ï¼‰ã€‚é¡¾åæ€ä¹‰ï¼Œè¿™ç§æ¨¡å¼ä½¿å¾—Javascriptåœ¨æ›´ä¸¥æ ¼çš„æ¡ä»¶ä¸‹è¿è¡Œã€‚</p><p>ä¸¥æ ¼æ¨¡å¼å¯ä»¥åº”ç”¨åˆ°æ•´ä¸ªscriptæ ‡ç­¾æˆ–ä¸ªåˆ«å‡½æ•°ä¸­ã€‚è®¾ç«‹â€ä¸¥æ ¼æ¨¡å¼â€çš„ç›®çš„ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š</p><ul><li>æ¶ˆé™¤ Javascript è¯­æ³•çš„ä¸€äº›ä¸åˆç†ã€ä¸ä¸¥è°¨ä¹‹å¤„ï¼Œå‡å°‘ä¸€äº›æ€ªå¼‚è¡Œä¸º;</li><li>æ¶ˆé™¤ä»£ç è¿è¡Œçš„ä¸€äº›ä¸å®‰å…¨ä¹‹å¤„ï¼Œä¿è¯ä»£ç è¿è¡Œçš„å®‰å…¨ï¼›</li><li>æé«˜ç¼–è¯‘å™¨æ•ˆç‡ï¼Œå¢åŠ è¿è¡Œé€Ÿåº¦ï¼›</li><li>ä¸ºæœªæ¥æ–°ç‰ˆæœ¬çš„ Javascript åšå¥½é“ºå«ã€‚</li></ul><h3 id="ä¸ºæŸä¸ªscriptæ ‡ç­¾å¼€å¯ä¸¥æ ¼æ¨¡å¼"><a href="#ä¸ºæŸä¸ªscriptæ ‡ç­¾å¼€å¯ä¸¥æ ¼æ¨¡å¼" class="headerlink" title="ä¸ºæŸä¸ªscriptæ ‡ç­¾å¼€å¯ä¸¥æ ¼æ¨¡å¼"></a>ä¸ºæŸä¸ªscriptæ ‡ç­¾å¼€å¯ä¸¥æ ¼æ¨¡å¼</h3><p>è¿›å…¥ä¸¥æ ¼æ¨¡å¼çš„æ ‡å¿—ï¼Œæ˜¯ä¸‹é¢è¿™è¡Œè¯­å¥ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token string">'use strict'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="ä¸ºæŸä¸ªå‡½æ•°å¼€å¯ä¸¥æ ¼æ¨¡å¼"><a href="#ä¸ºæŸä¸ªå‡½æ•°å¼€å¯ä¸¥æ ¼æ¨¡å¼" class="headerlink" title="ä¸ºæŸä¸ªå‡½æ•°å¼€å¯ä¸¥æ ¼æ¨¡å¼"></a>ä¸ºæŸä¸ªå‡½æ•°å¼€å¯ä¸¥æ ¼æ¨¡å¼</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">strict</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token comment">// å‡½æ•°çº§åˆ«ä¸¥æ ¼æ¨¡å¼è¯­æ³•</span>  <span class="token string">'use strict'</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token string">"I'm a strict mode function!  "</span> <span class="token operator">+</span> <span class="token function">nested</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">notStrict</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token string">"I'm not strict."</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç›¸ç­‰æ€§åˆ¤æ–­"><a href="#ç›¸ç­‰æ€§åˆ¤æ–­" class="headerlink" title="ç›¸ç­‰æ€§åˆ¤æ–­"></a>ç›¸ç­‰æ€§åˆ¤æ–­</h2><p>JavaScriptæä¾›ä¸‰ç§ä¸åŒçš„å€¼æ¯”è¾ƒæ“ä½œï¼š</p><ul><li>ä¸¥æ ¼ç›¸ç­‰ (â€œtriple equalsâ€ æˆ– â€œidentityâ€)ï¼Œä½¿ç”¨<code>===</code></li><li>å®½æ¾ç›¸ç­‰ (â€œdouble equalsâ€) ï¼Œä½¿ç”¨<code>==</code></li><li>ä»¥åŠ<code>Object.is</code> (ECMAScript 2015/ ES6 æ–°ç‰¹æ€§)</li></ul><p>ç®€è€Œè¨€ä¹‹ï¼Œåœ¨æ¯”è¾ƒä¸¤ä»¶äº‹æƒ…æ—¶ï¼ŒåŒç­‰å·å°†æ‰§è¡Œç±»å‹è½¬æ¢; ä¸‰ç­‰å·å°†è¿›è¡Œç›¸åŒçš„æ¯”è¾ƒï¼Œè€Œä¸è¿›è¡Œç±»å‹è½¬æ¢ (å¦‚æœç±»å‹ä¸åŒ, åªæ˜¯æ€»ä¼šè¿”å› false );  è€Œ<code>Object.is</code>çš„è¡Œä¸ºæ–¹å¼ä¸ä¸‰ç­‰å·ç›¸åŒï¼Œä½†æ˜¯å¯¹äºNaNå’Œ-0å’Œ+0è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œæ‰€ä»¥æœ€åä¸¤ä¸ªä¸ç›¸åŒï¼Œè€Œ<code>Object.is(NaNï¼ŒNaN)</code>å°†ä¸º trueã€‚</p><p><img src="https://statics.sh1a.qingstor.com/2020/11/27/js_equals.png" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2020/11/27/js_equals.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å„åŸå§‹ç±»å‹å€¼çš„ç›¸ç­‰æ¯”è¾ƒå¯¹ç…§è¡¨"></p><h2 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h2><p>ä½œç”¨åŸŸå°±æ˜¯å˜é‡ä¸å‡½æ•°çš„å¯è®¿é—®èŒƒå›´ï¼Œå³ä½œç”¨åŸŸæ§åˆ¶ç€å˜é‡ä¸å‡½æ•°çš„å¯è§æ€§å’Œç”Ÿå‘½å‘¨æœŸã€‚åœ¨JavaScriptä¸­ï¼Œå˜é‡çš„ä½œç”¨åŸŸæœ‰<strong>å…¨å±€ä½œç”¨åŸŸ</strong>å’Œ<strong>å±€éƒ¨ä½œç”¨åŸŸ</strong>ä¸¤ç§ã€‚</p><h3 id="å…¨å±€ä½œç”¨åŸŸ"><a href="#å…¨å±€ä½œç”¨åŸŸ" class="headerlink" title="å…¨å±€ä½œç”¨åŸŸ"></a>å…¨å±€ä½œç”¨åŸŸ</h3><p>åœ¨ä»£ç ä¸­ä»»ä½•åœ°æ–¹éƒ½èƒ½è®¿é—®åˆ°çš„å¯¹è±¡æ‹¥æœ‰å…¨å±€ä½œç”¨åŸŸã€‚ä¸€èˆ¬æ¥è¯´ä»¥ä¸‹å‡ ç§æƒ…å½¢ï¼š</p><ul><li>æœ€å¤–å±‚å‡½æ•°å’Œåœ¨æœ€å¤–å±‚å‡½æ•°å¤–é¢å®šä¹‰çš„å˜é‡æ‹¥æœ‰å…¨å±€ä½œç”¨åŸŸã€‚</li><li>æ‰€æœ‰æœªå®šä¹‰è€Œç›´æ¥èµ‹å€¼çš„å˜é‡è‡ªåŠ¨å£°æ˜ä¸ºæ‹¥æœ‰å…¨å±€ä½œç”¨åŸŸã€‚</li><li>æ‰€æœ‰windowå¯¹è±¡çš„å±æ€§æ‹¥æœ‰å…¨å±€ä½œç”¨åŸŸã€‚å¦‚ï¼š<code>window.name</code>ã€<code>window.location</code>ç­‰ã€‚</li></ul><blockquote><p><strong>æ³¨</strong>ï¼šå…¨å±€å˜é‡å­˜åœ¨äºç¨‹åºçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚æ²¡æœ‰å—çº§ä½œç”¨åŸŸã€‚</p></blockquote><h3 id="å±€éƒ¨ä½œç”¨åŸŸ"><a href="#å±€éƒ¨ä½œç”¨åŸŸ" class="headerlink" title="å±€éƒ¨ä½œç”¨åŸŸ"></a>å±€éƒ¨ä½œç”¨åŸŸ</h3><p>å±€éƒ¨ä½œç”¨åŸŸä¸€èˆ¬åªåœ¨å›ºå®šçš„ä»£ç ç‰‡æ®µå†…å¯è®¿é—®åˆ°ï¼Œæœ€å¸¸è§çš„æ˜¯åœ¨å‡½æ•°å†…éƒ¨ï¼Œæ‰€æœ‰åœ¨ä¸€äº›åœ°æ–¹ä¹Ÿä¼šçœ‹åˆ°æœ‰äººæŠŠè¿™ç§ä½œç”¨åŸŸç§°ä¸º<strong>å‡½æ•°ä½œç”¨åŸŸ</strong>ã€‚</p><h3 id="ä½œç”¨åŸŸé“¾"><a href="#ä½œç”¨åŸŸé“¾" class="headerlink" title="ä½œç”¨åŸŸé“¾"></a>ä½œç”¨åŸŸé“¾</h3><p>JavaScripté‡Œä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡ã€‚å‡½æ•°å¯¹è±¡å’Œå…¶å®ƒå¯¹è±¡ä¸€æ ·ï¼Œæ‹¥æœ‰å¯ä»¥é€šè¿‡ä»£ç è®¿é—®çš„å±æ€§å’Œä¸€ç³»åˆ—ä»…ä¾›JavaScriptå¼•æ“è®¿é—®çš„å†…éƒ¨å±æ€§ã€‚å…¶ä¸­ä¸€ä¸ªå†…éƒ¨å±æ€§æ˜¯<code>Scope</code>ï¼Œè¯¥å†…éƒ¨å±æ€§åŒ…å«äº†å‡½æ•°è¢«åˆ›å»ºçš„ä½œç”¨åŸŸä¸­å¯¹è±¡çš„é›†åˆï¼Œè¿™ä¸ªé›†åˆè¢«ç§°ä¸ºå‡½æ•°çš„ä½œç”¨åŸŸé“¾ï¼Œå®ƒå†³å®šäº†å“ªäº›æ•°æ®èƒ½è¢«å‡½æ•°è®¿é—®ã€‚</p><p>å› ä¸ºå…¨å±€å˜é‡æ€»æ˜¯å­˜åœ¨äº<strong>è¿è¡Œæ—¶ä¸Šä¸‹æ–‡</strong>ä½œç”¨åŸŸé“¾çš„æœ€æœ«ç«¯ã€‚æ‰€ä»¥ï¼Œåœ¨æ ‡è¯†ç¬¦è§£æçš„æ—¶å€™ï¼ŒæŸ¥æ‰¾å…¨å±€å˜é‡æ˜¯æœ€æ…¢çš„ã€‚æ‰€ä»¥ï¼Œåœ¨ç¼–å†™ä»£ç çš„æ—¶å€™åº”å°½é‡å°‘ä½¿ç”¨å…¨å±€å˜é‡ï¼Œå°½å¯èƒ½ä½¿ç”¨å±€éƒ¨å˜é‡ã€‚ä¸€ä¸ªå¥½çš„ç»éªŒæ³•åˆ™æ˜¯ï¼š<strong>å¦‚æœä¸€ä¸ªè·¨ä½œç”¨åŸŸçš„å¯¹è±¡è¢«å¼•ç”¨äº†ä¸€æ¬¡ä»¥ä¸Šï¼Œåˆ™å…ˆæŠŠå®ƒå­˜å‚¨åˆ°å±€éƒ¨å˜é‡é‡Œå†ä½¿ç”¨</strong>ã€‚</p><p><code>with</code>è¯­å¥ä¸»è¦ç”¨æ¥ä¸´æ—¶æ‰©å±•ä½œç”¨åŸŸé“¾ï¼Œå°†è¯­å¥ä¸­çš„å¯¹è±¡æ·»åŠ åˆ°ä½œç”¨åŸŸçš„å¤´éƒ¨ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">person <span class="token operator">=</span> <span class="token punctuation">&#123;</span>name<span class="token operator">:</span> <span class="token string">"yhb"</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span> height<span class="token operator">:</span><span class="token number">175</span><span class="token punctuation">,</span> wife<span class="token operator">:</span> <span class="token punctuation">&#123;</span>name<span class="token operator">:</span> <span class="token string">"lwy"</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">with</span> <span class="token punctuation">(</span>person<span class="token punctuation">.</span>wife<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>withè¯­å¥å°†<code>person.wife</code>æ·»åŠ åˆ°å½“å‰ä½œç”¨åŸŸé“¾çš„å¤´éƒ¨ï¼Œæ‰€ä»¥è¾“å‡ºçš„å°±æ˜¯ï¼š<code>lwy</code>ï¼›withè¯­å¥ç»“æŸåï¼Œä½œç”¨åŸŸé“¾æ¢å¤æ­£å¸¸ã€‚</p><blockquote><p>å½“ä»£ç è¿è¡Œåˆ°withè¯­å¥æ—¶ï¼Œè¿è¡ŒæœŸä¸Šä¸‹æ–‡çš„ä½œç”¨åŸŸé“¾ä¸´æ—¶è¢«æ”¹å˜äº†ã€‚ä¸€ä¸ªæ–°çš„å¯å˜å¯¹è±¡è¢«åˆ›å»ºï¼Œå®ƒåŒ…å«äº†å‚æ•°æŒ‡å®šçš„å¯¹è±¡çš„æ‰€æœ‰å±æ€§ã€‚è¿™ä¸ªå¯¹è±¡å°†è¢«æ¨å…¥ä½œç”¨åŸŸé“¾çš„å¤´éƒ¨ï¼Œè¿™æ„å‘³ç€å‡½æ•°çš„æ‰€æœ‰å±€éƒ¨å˜é‡ç°åœ¨å¤„äºç¬¬äºŒä¸ªä½œç”¨åŸŸé“¾å¯¹è±¡ä¸­ï¼Œå› æ­¤è®¿é—®ä»£ä»·æ›´é«˜äº†ã€‚<br><strong>æ³¨</strong>ï¼šåœ¨ç¨‹åºä¸­åº”é¿å…ä½¿ç”¨withè¯­å¥ã€‚</p></blockquote><h2 id="é—­åŒ…-Closures"><a href="#é—­åŒ…-Closures" class="headerlink" title="é—­åŒ…(Closures)"></a>é—­åŒ…(Closures)</h2><h3 id="ä¸€ä¸ªç¤ºä¾‹"><a href="#ä¸€ä¸ªç¤ºä¾‹" class="headerlink" title="ä¸€ä¸ªç¤ºä¾‹"></a>ä¸€ä¸ªç¤ºä¾‹</h3><p>å¦‚ä½•ä»å¤–éƒ¨è¯»å–å±€éƒ¨å˜é‡ï¼Ÿ</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> n<span class="token operator">=</span><span class="token number">999</span><span class="token punctuation">;</span>    <span class="token keyword">function</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">alert</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 999</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå‡½æ•°f2å°±è¢«åŒ…æ‹¬åœ¨å‡½æ•°f1å†…éƒ¨ï¼Œè¿™æ—¶f1å†…éƒ¨çš„æ‰€æœ‰å±€éƒ¨å˜é‡ï¼Œå¯¹f2éƒ½æ˜¯å¯è§çš„ã€‚ä½†æ˜¯åè¿‡æ¥å°±ä¸è¡Œï¼Œf2å†…éƒ¨çš„å±€éƒ¨å˜é‡ï¼Œå¯¹f1å°±æ˜¯ä¸å¯è§çš„ã€‚è¿™å°±æ˜¯Javascriptè¯­è¨€ç‰¹æœ‰çš„â€é“¾å¼ä½œç”¨åŸŸâ€ç»“æ„ï¼ˆ<code>chain scope</code>ï¼‰ï¼Œå­å¯¹è±¡ä¼šä¸€çº§ä¸€çº§åœ°å‘ä¸Šå¯»æ‰¾æ‰€æœ‰çˆ¶å¯¹è±¡çš„å˜é‡ã€‚æ‰€ä»¥ï¼Œ<strong>çˆ¶å¯¹è±¡çš„æ‰€æœ‰å˜é‡ï¼Œå¯¹å­å¯¹è±¡éƒ½æ˜¯å¯è§çš„ï¼Œåä¹‹åˆ™ä¸æˆç«‹</strong>ã€‚</p><p>æ—¢ç„¶f2å¯ä»¥è¯»å–f1ä¸­çš„å±€éƒ¨å˜é‡ï¼Œé‚£ä¹ˆåªè¦æŠŠf2ä½œä¸ºè¿”å›å€¼ï¼Œæˆ‘ä»¬ä¸å°±å¯ä»¥åœ¨f1å¤–éƒ¨è¯»å–å®ƒçš„å†…éƒ¨å˜é‡äº†å—ï¼</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> n<span class="token operator">=</span><span class="token number">999</span><span class="token punctuation">;</span>    <span class="token keyword">function</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">alert</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 999</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> f2<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> result<span class="token operator">=</span><span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">result</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 999</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="é—­åŒ…è§£é‡Š"><a href="#é—­åŒ…è§£é‡Š" class="headerlink" title="é—­åŒ…è§£é‡Š"></a>é—­åŒ…è§£é‡Š</h3><blockquote><p><strong>é—­åŒ…å®šä¹‰</strong>ï¼šé—­åŒ…æ˜¯ä¸€ä¸ªå‡½æ•°å’Œå‡½æ•°æ‰€å£°æ˜çš„è¯æ³•ç¯å¢ƒçš„ç»“åˆã€‚</p></blockquote><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œf2å‡½æ•°å°±æ˜¯é—­åŒ…ã€‚<strong>é—­åŒ…</strong>ï¼ˆ<code>closure</code>ï¼‰å®šä¹‰éå¸¸æŠ½è±¡ï¼Œå¾ˆéš¾çœ‹æ‡‚ã€‚æˆ‘çš„ç†è§£æ˜¯ï¼Œ<strong>é—­åŒ…å°±æ˜¯èƒ½å¤Ÿè¯»å–å…¶ä»–å‡½æ•°å†…éƒ¨å˜é‡çš„å‡½æ•°</strong>ã€‚åœ¨æœ¬è´¨ä¸Šï¼Œé—­åŒ…å°±æ˜¯å°†å‡½æ•°å†…éƒ¨å’Œå‡½æ•°å¤–éƒ¨è¿æ¥èµ·æ¥çš„ä¸€åº§æ¡¥æ¢ã€‚</p><p>é—­åŒ…æœ€å¤§ç”¨å¤„æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯å¯ä»¥è¯»å–å‡½æ•°å†…éƒ¨çš„å˜é‡ï¼Œå¦ä¸€ä¸ªå°±æ˜¯è®©è¿™äº›å˜é‡çš„å€¼å§‹ç»ˆä¿æŒåœ¨å†…å­˜ä¸­ï¼Œä¸ä¼šåœ¨è°ƒç”¨ç»“æŸåè¢«åƒåœ¾å›æ”¶æœºåˆ¶ï¼ˆ<code>garbage collection</code>ï¼‰å›æ”¶ã€‚</p><h3 id="ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼"><a href="#ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼" class="headerlink" title="ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼"></a>ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼</h3><p>æœ‰æ—¶ä½ æƒ³æ¨¡æ‹Ÿä¸€ä¸ªæ¨¡æ‹Ÿå—çº§ä½œç”¨åŸŸï¼Œä¾‹å¦‚ä½ æƒ³å°†å˜é‡ä»å…¨å±€ä½œç”¨åŸŸéš”ç¦»ã€‚å®Œæˆè¿™ä¸ªå·¥ä½œçš„æ¨¡å¼å«åš<code>IIFE</code>(ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼(<code>Immediately Invoked Function Expression</code>))ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// å—å¼€å§‹</span>    <span class="token keyword">var</span> tmp <span class="token operator">=</span> <span class="token operator">...</span><span class="token punctuation">;</span>  <span class="token comment">// éå…¨å±€å˜é‡</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å—ç»“æŸ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="ç”¨é—­åŒ…æ¨¡æ‹Ÿç§æœ‰æ–¹æ³•"><a href="#ç”¨é—­åŒ…æ¨¡æ‹Ÿç§æœ‰æ–¹æ³•" class="headerlink" title="ç”¨é—­åŒ…æ¨¡æ‹Ÿç§æœ‰æ–¹æ³•"></a>ç”¨é—­åŒ…æ¨¡æ‹Ÿç§æœ‰æ–¹æ³•</h3><p>JavaScript å¹¶ä¸æä¾›åŸç”Ÿçš„æ”¯æŒç§æœ‰æ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨é—­åŒ…æ¨¡æ‹Ÿç§æœ‰æ–¹æ³•ã€‚ç§æœ‰æ–¹æ³•ä¸ä»…ä»…æœ‰åˆ©äºé™åˆ¶å¯¹ä»£ç çš„è®¿é—®ï¼šè¿˜æä¾›äº†ç®¡ç†å…¨å±€å‘½åç©ºé—´çš„å¼ºå¤§èƒ½åŠ›ï¼Œé¿å…éæ ¸å¿ƒçš„æ–¹æ³•å¼„ä¹±äº†ä»£ç çš„å…¬å…±æ¥å£éƒ¨åˆ†ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Counter <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> privateCounter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">function</span> <span class="token function">changeBy</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        privateCounter <span class="token operator">+=</span> val<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>        <span class="token function-variable function">increment</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">changeBy</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token function-variable function">decrement</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">changeBy</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> privateCounter<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Counter<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* logs 0 */</span>Counter<span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Counter<span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Counter<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* logs 2 */</span>Counter<span class="token punctuation">.</span><span class="token function">decrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Counter<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* logs 1 */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢åˆ›å»ºäº†ä¸€ä¸ªç¯å¢ƒï¼Œä¸ºä¸‰ä¸ªå‡½æ•°æ‰€å…±äº«ï¼š<code>Counter.increment</code>, <code>Counter.decrement</code>å’Œ<code>Counter.value</code>ã€‚è¯¥å…±äº«ç¯å¢ƒåˆ›å»ºäºä¸€ä¸ªåŒ¿åå‡½æ•°ä½“å†…ï¼Œè¯¥å‡½æ•°ä¸€ç»å®šä¹‰ç«‹åˆ»æ‰§è¡Œã€‚ç¯å¢ƒä¸­åŒ…å«ä¸¤ä¸ªç§æœ‰é¡¹ï¼šåä¸º<code>privateCounter</code>çš„å˜é‡å’Œåä¸º<code>changeBy</code>çš„å‡½æ•°ã€‚è¿™ä¸¤é¡¹éƒ½æ— æ³•åœ¨åŒ¿åå‡½æ•°å¤–éƒ¨ç›´æ¥è®¿é—®ã€‚å¿…é¡»é€šè¿‡åŒ¿ååŒ…è£…å™¨è¿”å›çš„ä¸‰ä¸ªå…¬å…±å‡½æ•°è®¿é—®ã€‚</p><p><strong>æ³¨æ„</strong>ï¼š</p><ul><li>ç”±äºé—­åŒ…ä¼šä½¿å¾—å‡½æ•°ä¸­çš„å˜é‡éƒ½è¢«ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå†…å­˜æ¶ˆè€—å¾ˆå¤§ï¼Œæ‰€ä»¥ä¸èƒ½æ»¥ç”¨é—­åŒ…ï¼Œå¦åˆ™ä¼šé€ æˆç½‘é¡µçš„æ€§èƒ½é—®é¢˜ï¼Œåœ¨IEä¸­å¯èƒ½å¯¼è‡´å†…å­˜æ³„éœ²ã€‚è§£å†³æ–¹æ³•æ˜¯ï¼Œåœ¨é€€å‡ºå‡½æ•°ä¹‹å‰ï¼Œå°†ä¸ä½¿ç”¨çš„å±€éƒ¨å˜é‡å…¨éƒ¨åˆ é™¤ã€‚</li><li>é—­åŒ…ä¼šåœ¨çˆ¶å‡½æ•°å¤–éƒ¨ï¼Œæ”¹å˜çˆ¶å‡½æ•°å†…éƒ¨å˜é‡çš„å€¼ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ æŠŠçˆ¶å‡½æ•°å½“ä½œå¯¹è±¡ï¼ˆobjectï¼‰ä½¿ç”¨ï¼ŒæŠŠé—­åŒ…å½“ä½œå®ƒçš„å…¬ç”¨æ–¹æ³•ï¼ˆPublic Methodï¼‰ï¼ŒæŠŠå†…éƒ¨å˜é‡å½“ä½œå®ƒçš„ç§æœ‰å±æ€§ï¼ˆprivate valueï¼‰ï¼Œè¿™æ—¶ä¸€å®šè¦å°å¿ƒï¼Œä¸è¦éšä¾¿æ”¹å˜çˆ¶å‡½æ•°å†…éƒ¨å˜é‡çš„å€¼ã€‚</li></ul><h2 id="å†…å­˜æœºåˆ¶"><a href="#å†…å­˜æœºåˆ¶" class="headerlink" title="å†…å­˜æœºåˆ¶"></a>å†…å­˜æœºåˆ¶</h2><p>é¦–å…ˆJavaScriptä¸­çš„å˜é‡åˆ†ä¸º<strong>åŸºæœ¬ç±»å‹</strong>å’Œ<strong>å¼•ç”¨ç±»å‹</strong>ã€‚</p><ul><li>åŸºæœ¬ç±»å‹å°±æ˜¯ä¿å­˜åœ¨æ ˆå†…å­˜ä¸­çš„ç®€å•æ•°æ®æ®µã€‚åŸºæœ¬ç±»å‹æœ‰<code>Undefined</code>ã€<code>Null</code>ã€<code>Boolean</code>ã€<code>Number</code>å’Œ<code>String</code>ã€‚è¿™äº›ç±»å‹åœ¨å†…å­˜ä¸­åˆ†åˆ«å æœ‰å›ºå®šå¤§å°çš„ç©ºé—´ï¼Œä»–ä»¬çš„å€¼ä¿å­˜åœ¨<strong>æ ˆç©ºé—´</strong>ï¼Œæˆ‘ä»¬é€šè¿‡æŒ‰å€¼æ¥è®¿é—®çš„ã€‚</li><li>å¼•ç”¨ç±»å‹æŒ‡çš„æ˜¯é‚£äº›ä¿å­˜åœ¨å †å†…å­˜ä¸­çš„å¯¹è±¡ã€‚å¼•ç”¨ç±»å‹ï¼Œå€¼å¤§å°ä¸å›ºå®šï¼Œæ ˆå†…å­˜ä¸­å­˜æ”¾åœ°å€æŒ‡å‘å †å†…å­˜ä¸­çš„å¯¹è±¡ã€‚æ˜¯æŒ‰å¼•ç”¨è®¿é—®çš„ã€‚æ ˆå†…å­˜ä¸­å­˜æ”¾çš„åªæ˜¯è¯¥å¯¹è±¡çš„è®¿é—®åœ°å€ï¼Œåœ¨å †å†…å­˜ä¸­ä¸ºè¿™ä¸ªå€¼åˆ†é…ç©ºé—´ã€‚</li></ul><h3 id="ä¸ºä»€ä¹ˆä¼šæœ‰æ ˆå†…å­˜å’Œå †å†…å­˜ä¹‹åˆ†ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¼šæœ‰æ ˆå†…å­˜å’Œå †å†…å­˜ä¹‹åˆ†ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šæœ‰æ ˆå†…å­˜å’Œå †å†…å­˜ä¹‹åˆ†ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¼šæœ‰æ ˆå†…å­˜å’Œå †å†…å­˜ä¹‹åˆ†ï¼Ÿ</h3><p>ä¸åƒåœ¾å›æ”¶æœºåˆ¶æœ‰å…³ï¼Œä¸ºäº†ä½¿ç¨‹åºè¿è¡Œæ—¶å ç”¨çš„å†…å­˜æœ€å°ã€‚</p><p>å½“ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œæ—¶ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½ä¼šå»ºç«‹è‡ªå·±çš„å†…å­˜æ ˆï¼Œåœ¨è¿™ä¸ªæ–¹æ³•å†…å®šä¹‰çš„å˜é‡å°†ä¼šé€ä¸ªæ”¾å…¥è¿™å—æ ˆå†…å­˜é‡Œï¼Œéšç€æ–¹æ³•çš„æ‰§è¡Œç»“æŸï¼Œè¿™ä¸ªæ–¹æ³•çš„å†…å­˜æ ˆä¹Ÿå°†è‡ªç„¶é”€æ¯äº†ã€‚å› æ­¤ï¼Œæ‰€æœ‰åœ¨æ–¹æ³•ä¸­å®šä¹‰çš„å˜é‡éƒ½æ˜¯æ”¾åœ¨æ ˆå†…å­˜ä¸­çš„ï¼›</p><p>å½“æˆ‘ä»¬åœ¨ç¨‹åºä¸­åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œè¿™ä¸ªå¯¹è±¡å°†è¢«ä¿å­˜åˆ°è¿è¡Œæ—¶æ•°æ®åŒºä¸­ï¼Œä»¥ä¾¿åå¤åˆ©ç”¨ï¼ˆå› ä¸ºå¯¹è±¡çš„åˆ›å»ºæˆæœ¬é€šå¸¸è¾ƒå¤§ï¼‰ï¼Œè¿™ä¸ªè¿è¡Œæ—¶æ•°æ®åŒºå°±æ˜¯å †å†…å­˜ã€‚å †å†…å­˜ä¸­çš„å¯¹è±¡ä¸ä¼šéšæ–¹æ³•çš„ç»“æŸè€Œé”€æ¯ï¼Œå³ä½¿æ–¹æ³•ç»“æŸåï¼Œè¿™ä¸ªå¯¹è±¡è¿˜å¯èƒ½è¢«å¦ä¸€ä¸ªå¼•ç”¨å˜é‡æ‰€å¼•ç”¨ï¼ˆæ–¹æ³•çš„å‚æ•°ä¼ é€’æ—¶å¾ˆå¸¸è§ï¼‰ï¼Œåˆ™è¿™ä¸ªå¯¹è±¡ä¾ç„¶ä¸ä¼šè¢«é”€æ¯ï¼Œåªæœ‰å½“ä¸€ä¸ªå¯¹è±¡æ²¡æœ‰ä»»ä½•å¼•ç”¨å˜é‡å¼•ç”¨å®ƒæ—¶ï¼Œç³»ç»Ÿçš„åƒåœ¾å›æ”¶æœºåˆ¶æ‰ä¼šåœ¨æ ¸å®çš„æ—¶å€™å›æ”¶å®ƒã€‚</p><h3 id="åƒåœ¾å›æ”¶æœºåˆ¶"><a href="#åƒåœ¾å›æ”¶æœºåˆ¶" class="headerlink" title="åƒåœ¾å›æ”¶æœºåˆ¶"></a>åƒåœ¾å›æ”¶æœºåˆ¶</h3><p>Javascriptå…·æœ‰è‡ªåŠ¨åƒåœ¾å›æ”¶æœºåˆ¶(<code>GC</code>:<code>Garbage Collecation</code>)ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰§è¡Œç¯å¢ƒä¼šè´Ÿè´£ç®¡ç†ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­ä½¿ç”¨çš„å†…å­˜ã€‚</p><p>JavaScriptåƒåœ¾å›æ”¶çš„æœºåˆ¶å¾ˆç®€å•ï¼š<strong>æ‰¾å‡ºä¸å†ä½¿ç”¨çš„å˜é‡ï¼Œç„¶åé‡Šæ”¾æ‰å…¶å ç”¨çš„å†…å­˜ï¼Œä½†æ˜¯è¿™ä¸ªè¿‡ç¨‹ä¸æ˜¯å®æ—¶çš„ï¼Œå› ä¸ºå…¶å¼€é”€æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥åƒåœ¾å›æ”¶å™¨ä¼šæŒ‰ç…§å›ºå®šçš„æ—¶é—´é—´éš”å‘¨æœŸæ€§çš„æ‰§è¡Œ</strong>ã€‚</p><p>ä¸å†ä½¿ç”¨çš„å˜é‡ä¹Ÿå°±æ˜¯ç”Ÿå‘½å‘¨æœŸç»“æŸçš„å˜é‡ï¼Œå½“ç„¶åªå¯èƒ½æ˜¯å±€éƒ¨å˜é‡ï¼Œå…¨å±€å˜é‡çš„ç”Ÿå‘½å‘¨æœŸç›´è‡³æµè§ˆå™¨å¸è½½é¡µé¢æ‰ä¼šç»“æŸã€‚å±€éƒ¨å˜é‡åªåœ¨å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹ä¸­å­˜åœ¨ï¼Œè€Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šä¸ºå±€éƒ¨å˜é‡åœ¨æ ˆæˆ–å †ä¸Šåˆ†é…ç›¸åº”çš„ç©ºé—´ï¼Œä»¥å­˜å‚¨å®ƒä»¬çš„å€¼ï¼Œç„¶ååœ¨å‡½æ•°ä¸­ä½¿ç”¨è¿™äº›å˜é‡ï¼Œç›´è‡³å‡½æ•°ç»“æŸï¼Œè€Œé—­åŒ…ä¸­ç”±äºå†…éƒ¨å‡½æ•°çš„åŸå› ï¼Œå¤–éƒ¨å‡½æ•°å¹¶ä¸èƒ½ç®—æ˜¯ç»“æŸã€‚</p><h4 id="æ¸…é™¤æ–¹å¼"><a href="#æ¸…é™¤æ–¹å¼" class="headerlink" title="æ¸…é™¤æ–¹å¼"></a>æ¸…é™¤æ–¹å¼</h4><ul><li><strong>æ ‡è®°æ¸…é™¤</strong>ï¼šåƒåœ¾å›æ”¶å™¨åœ¨è¿è¡Œçš„æ—¶å€™ä¼šç»™å­˜å‚¨åœ¨å†…å­˜ä¸­çš„æ‰€æœ‰å˜é‡éƒ½åŠ ä¸Šæ ‡è®°ã€‚ç„¶åï¼Œå®ƒä¼šå»æ‰ç¯å¢ƒä¸­çš„å˜é‡ä»¥åŠè¢«ç¯å¢ƒä¸­çš„å˜é‡å¼•ç”¨çš„å˜é‡çš„æ ‡è®°ï¼ˆé—­åŒ…ï¼‰ã€‚è€Œåœ¨æ­¤ä¹‹åå†è¢«åŠ ä¸Šæ ‡è®°çš„å˜é‡å°†è¢«è§†ä¸ºå‡†å¤‡åˆ é™¤çš„å˜é‡ï¼ŒåŸå› æ˜¯ç¯å¢ƒä¸­çš„å˜é‡å·²ç»æ— æ³•è®¿é—®åˆ°è¿™äº›å˜é‡äº†ã€‚æœ€åï¼Œåƒåœ¾å›æ”¶å™¨å®Œæˆå†…å­˜æ¸…é™¤å·¥ä½œï¼Œé”€æ¯é‚£äº›å¸¦æ ‡è®°çš„å€¼å¹¶å›æ”¶å®ƒä»¬æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ã€‚</li><li><strong>å¼•ç”¨è®¡æ•°</strong>ï¼šå¼•ç”¨è®¡æ•°çš„å«ä¹‰æ˜¯è·Ÿè¸ªè®°å½•æ¯ä¸ªå€¼è¢«å¼•ç”¨çš„æ¬¡æ•°ã€‚å½“å£°æ˜äº†ä¸€ä¸ªå˜é‡å¹¶å°†ä¸€ä¸ªå¼•ç”¨ç±»å‹å€¼èµ‹ç»™è¯¥å˜é‡æ—¶ï¼Œåˆ™è¿™ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°å°±æ˜¯1ã€‚å¦‚æœåŒä¸€ä¸ªå€¼åˆè¢«èµ‹ç»™å¦ä¸€ä¸ªå˜é‡ï¼Œåˆ™è¯¥å€¼çš„å¼•ç”¨æ¬¡æ•°åŠ 1ã€‚ç›¸åï¼Œå¦‚æœåŒ…å«å¯¹è¿™ä¸ªå€¼å¼•ç”¨çš„å˜é‡åˆå–å¾—äº†å¦å¤–ä¸€ä¸ªå€¼ï¼Œåˆ™è¿™ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°å‡1ã€‚å½“è¿™ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°å˜æˆ0æ—¶ï¼Œåˆ™è¯´æ˜æ²¡æœ‰åŠæ³•å†è®¿é—®è¿™ä¸ªå€¼äº†ï¼Œå› è€Œå°±å¯ä»¥å°†å…¶å ç”¨çš„å†…å­˜ç©ºé—´å›æ”¶å›æ¥ã€‚è¿™æ ·ï¼Œå½“åƒåœ¾å›æ”¶å™¨ä¸‹æ¬¡å†è¿è¡Œæ—¶ï¼Œå®ƒå°±ä¼šé‡Šæ”¾é‚£äº›å¼•ç”¨æ¬¡æ•°ä¸º0çš„å€¼æ‰€å ç”¨çš„å†…å­˜ã€‚</li></ul><h2 id="åŸå‹-prototype"><a href="#åŸå‹-prototype" class="headerlink" title="åŸå‹(prototype)"></a>åŸå‹(prototype)</h2><p>åŸå‹æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä»–å¯¹è±¡å¯ä»¥é€šè¿‡å®ƒå®ç°å±æ€§ç»§æ‰¿ã€‚JavaScriptçš„å¯¹è±¡ä¸­éƒ½åŒ…å«äº†ä¸€ä¸ª<code>Prototype</code>å†…éƒ¨å±æ€§ï¼Œè¿™ä¸ªå±æ€§æ‰€å¯¹åº”çš„å°±æ˜¯è¯¥å¯¹è±¡çš„åŸå‹ã€‚<code>Prototype</code>ä½œä¸ºå¯¹è±¡çš„å†…éƒ¨å±æ€§ï¼Œæ˜¯ä¸èƒ½è¢«ç›´æ¥è®¿é—®çš„ã€‚æ‰€ä»¥ä¸ºäº†æ–¹ä¾¿æŸ¥çœ‹ä¸€ä¸ªå¯¹è±¡çš„åŸå‹ï¼ŒFirefoxå’ŒChromeä¸­æä¾›äº†<code>__proto__</code>è¿™ä¸ªéæ ‡å‡†çš„è®¿é—®å™¨ã€‚</p><ul><li>æ‰€æœ‰çš„å¯¹è±¡éƒ½æœ‰<code>__proto__</code>å±æ€§ï¼Œè¯¥å±æ€§å¯¹åº”ç€è¯¥å¯¹è±¡çš„åŸå‹ã€‚</li><li>æ‰€æœ‰çš„å‡½æ•°å¯¹è±¡éƒ½æœ‰<code>prototype</code>å±æ€§ï¼Œè¯¥å±æ€§çš„å€¼ä¼šè¢«èµ‹å€¼ç»™è¯¥å‡½æ•°åˆ›å»ºçš„å¯¹è±¡çš„<code>__proto__</code>å±æ€§</li><li>æ‰€æœ‰çš„åŸå‹å¯¹è±¡éƒ½æœ‰<code>constructor</code>å±æ€§ï¼Œè¯¥å±æ€§å¯¹åº”åˆ›å»ºæ‰€æœ‰æŒ‡å‘è¯¥åŸå‹çš„å®ä¾‹çš„æ„é€ å‡½æ•°</li><li>å‡½æ•°å¯¹è±¡å’ŒåŸå‹å¯¹è±¡é€šè¿‡<code>prototype</code>å’Œ<code>constructor</code>å±æ€§è¿›è¡Œç›¸äº’å…³è”</li><li><code>Object</code>å®ä¾‹å¯¹è±¡çš„åŸå‹<code>obj.__proto__</code>å°±æ˜¯<code>Object.prototype</code></li><li><code>hasOwnProperty</code>æ˜¯<code>Object.prototype</code>çš„ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•èƒ½åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦åŒ…å«è‡ªå®šä¹‰å±æ€§è€Œä¸æ˜¯åŸå‹é“¾ä¸Šçš„å±æ€§ï¼Œå› ä¸ºâ€hasOwnPropertyâ€ æ˜¯ JavaScript ä¸­å”¯ä¸€ä¸€ä¸ªå¤„ç†å±æ€§ä½†æ˜¯ä¸æŸ¥æ‰¾åŸå‹é“¾çš„å‡½æ•°</li></ul><h3 id="åŸå‹é“¾"><a href="#åŸå‹é“¾" class="headerlink" title="åŸå‹é“¾"></a>åŸå‹é“¾</h3><p>å› ä¸ºæ¯ä¸ªå¯¹è±¡å’ŒåŸå‹éƒ½æœ‰åŸå‹ï¼Œå¯¹è±¡çš„åŸå‹æŒ‡å‘å¯¹è±¡çš„çˆ¶ï¼Œè€Œçˆ¶çš„åŸå‹åˆæŒ‡å‘çˆ¶çš„çˆ¶ï¼Œè¿™ç§åŸå‹å±‚å±‚è¿æ¥èµ·æ¥çš„å°±æ„æˆäº†åŸå‹é“¾ã€‚</p><p>å½“é€šè¿‡åŸå‹é“¾æŸ¥æ‰¾ä¸€ä¸ªå±æ€§çš„æ—¶å€™ï¼Œé¦–å…ˆæŸ¥æ‰¾çš„æ˜¯å¯¹è±¡æœ¬èº«çš„å±æ€§ï¼Œå¦‚æœæ‰¾ä¸åˆ°æ‰ä¼šç»§ç»­æŒ‰ç…§åŸå‹é“¾è¿›è¡ŒæŸ¥æ‰¾ã€‚è¿™æ ·ä¸€æ¥ï¼Œå¦‚æœæƒ³è¦è¦†ç›–åŸå‹é“¾ä¸Šçš„ä¸€äº›å±æ€§ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥åœ¨å¯¹è±¡ä¸­å¼•å…¥è¿™äº›å±æ€§ï¼Œè¾¾åˆ°å±æ€§éšè—çš„æ•ˆæœã€‚</p><h2 id="å¯¹è±¡åˆ›å»ºæ–¹å¼"><a href="#å¯¹è±¡åˆ›å»ºæ–¹å¼" class="headerlink" title="å¯¹è±¡åˆ›å»ºæ–¹å¼"></a>å¯¹è±¡åˆ›å»ºæ–¹å¼</h2><h3 id="1-Objectæ„é€ å‡½æ•°æ–¹å¼"><a href="#1-Objectæ„é€ å‡½æ•°æ–¹å¼" class="headerlink" title="1. Objectæ„é€ å‡½æ•°æ–¹å¼"></a>1. Objectæ„é€ å‡½æ•°æ–¹å¼</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Person<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Nike'</span><span class="token punctuation">;</span>Person<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">29</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è¿™è¡Œä»£ç åˆ›å»ºäº†<code>Object</code>å¼•ç”¨ç±»å‹çš„ä¸€ä¸ªæ–°å®ä¾‹ï¼Œç„¶åæŠŠå®ä¾‹ä¿å­˜åœ¨å˜é‡<code>Person</code>ä¸­ã€‚</p><h3 id="2-å¯¹è±¡å­—é¢é‡æ–¹å¼"><a href="#2-å¯¹è±¡å­—é¢é‡æ–¹å¼" class="headerlink" title="2. å¯¹è±¡å­—é¢é‡æ–¹å¼"></a>2. å¯¹è±¡å­—é¢é‡æ–¹å¼</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Person <span class="token operator">=</span> <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'Nike'</span><span class="token punctuation">;</span> age<span class="token operator">:</span> <span class="token number">29</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹è±¡å­—é¢é‡æ˜¯å¯¹è±¡å®šä¹‰çš„ä¸€ç§ç®€å†™å½¢å¼ï¼Œç›®çš„åœ¨äºç®€åŒ–åˆ›å»ºåŒ…å«å¤§é‡å±æ€§å¯¹è±¡çš„è¿‡ç¨‹ã€‚</p><blockquote><p><strong>æ³¨</strong>ï¼šå‰ä¸¤ç§æ–¹æ³•çš„ç¼ºç‚¹åœ¨äºï¼šå®ƒä»¬éƒ½æ˜¯ç”¨äº†åŒä¸€ä¸ªæ¥å£åˆ›å»ºå¾ˆå¤šå¯¹è±¡ï¼Œä¼šäº§ç”Ÿå¤§é‡çš„é‡å¤ä»£ç ï¼Œå°±æ˜¯å¦‚æœä½ æœ‰100ä¸ªå¯¹è±¡ï¼Œé‚£ä½ è¦è¾“å…¥100æ¬¡å¾ˆå¤šç›¸åŒçš„ä»£ç ã€‚é‚£æˆ‘ä»¬æœ‰ä»€ä¹ˆæ–¹æ³•æ¥é¿å…è¿‡å¤šçš„é‡å¤ä»£ç å‘¢ï¼Œå°±æ˜¯æŠŠåˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹å°è£…åœ¨å‡½æ•°ä½“å†…ï¼Œé€šè¿‡å‡½æ•°çš„è°ƒç”¨ç›´æ¥ç”Ÿæˆå¯¹è±¡ã€‚</p></blockquote><h3 id="3-å·¥å‚æ¨¡å¼"><a href="#3-å·¥å‚æ¨¡å¼" class="headerlink" title="3. å·¥å‚æ¨¡å¼"></a>3. å·¥å‚æ¨¡å¼</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> job</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    o<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    o<span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    o<span class="token punctuation">.</span>job <span class="token operator">=</span> job<span class="token punctuation">;</span>    o<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> o<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token string">'Nike'</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">,</span> <span class="token string">'teacher'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨ä½¿ç”¨å·¥å‚æ¨¡å¼åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥æ³¨æ„åˆ°ï¼Œåœ¨<code>createPerson</code>å‡½æ•°ä¸­ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚ä½†æˆ‘ä»¬å°±æ— æ³•åˆ¤æ–­è¿”å›çš„å¯¹è±¡ç©¶ç«Ÿæ˜¯ä¸€ä¸ªä»€ä¹ˆæ ·çš„ç±»å‹ã€‚äºæ˜¯å°±å‡ºç°äº†ç¬¬å››ç§åˆ›å»ºå¯¹è±¡çš„æ¨¡å¼ã€‚</p><h3 id="4-æ„é€ å‡½æ•°æ–¹å¼"><a href="#4-æ„é€ å‡½æ•°æ–¹å¼" class="headerlink" title="4. æ„é€ å‡½æ•°æ–¹å¼"></a>4. æ„é€ å‡½æ•°æ–¹å¼</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> job</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>job <span class="token operator">=</span> job<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Nike'</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">,</span> <span class="token string">'teacher'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">alert</span><span class="token punctuation">(</span>person1 <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ture</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹æ¯”å·¥å‚æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ä»¥ä¸‹åŒºåˆ«ï¼š</p><ul><li>æ²¡æœ‰æ˜¾ç¤ºåœ°åˆ›å»ºå¯¹è±¡</li><li>ç›´æ¥å°†å±æ€§å’Œæ–¹æ³•èµ‹ç»™äº†<code>this</code>å¯¹è±¡</li><li>æ²¡æœ‰<code>return</code>è¯­å¥</li><li>ç»ˆäºå¯ä»¥è¯†åˆ«çš„å¯¹è±¡çš„ç±»å‹ã€‚å¯¹äºæ£€æµ‹å¯¹è±¡ç±»å‹ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨instanceofæ“ä½œç¬¦ï¼Œæˆ‘ä»¬æ¥è¿›è¡Œè‡ªä¸»æ£€æµ‹ï¼š</li></ul><p>é‚£ä¹ˆæ„é€ å‡½æ•°ç¡®å®æŒºå¥½ç”¨çš„ï¼Œä½†æ˜¯å®ƒä¹Ÿæœ‰å®ƒçš„ç¼ºç‚¹ï¼šå°±æ˜¯æ¯ä¸ªæ–¹æ³•éƒ½è¦åœ¨æ¯ä¸ªå®ä¾‹ä¸Šé‡æ–°åˆ›å»ºä¸€éï¼Œæ–¹æ³•æŒ‡çš„å°±æ˜¯æˆ‘ä»¬åœ¨å¯¹è±¡é‡Œé¢å®šä¹‰çš„å‡½æ•°ã€‚å¦‚æœæ–¹æ³•çš„æ•°é‡å¾ˆå¤šï¼Œå°±ä¼šå ç”¨å¾ˆå¤šä¸å¿…è¦çš„å†…å­˜ã€‚äºæ˜¯å‡ºç°äº†ç¬¬äº”ç§åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•ã€‚</p><h3 id="5-åŸå‹åˆ›å»ºå¯¹è±¡æ¨¡å¼"><a href="#5-åŸå‹åˆ›å»ºå¯¹è±¡æ¨¡å¼" class="headerlink" title="5. åŸå‹åˆ›å»ºå¯¹è±¡æ¨¡å¼"></a>5. åŸå‹åˆ›å»ºå¯¹è±¡æ¨¡å¼</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Nike'</span><span class="token punctuation">;</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>jbo <span class="token operator">=</span> <span class="token string">'teacher'</span><span class="token punctuation">;</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> person2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>person1<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Greg'</span><span class="token punctuation">;</span><span class="token function">alert</span><span class="token punctuation">(</span>person1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//'Greg' --æ¥è‡ªå®ä¾‹</span><span class="token function">alert</span><span class="token punctuation">(</span>person2<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//'Nike' --æ¥è‡ªåŸå‹</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½“ä¸ºå¯¹è±¡å®ä¾‹æ·»åŠ ä¸€ä¸ªå±æ€§æ—¶ï¼Œè¿™ä¸ªå±æ€§å°±ä¼šå±è”½åŸå‹å¯¹è±¡ä¸­ä¿å­˜çš„åŒåå±æ€§ã€‚</p><p>è¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼ä¸åŸå‹æ¨¡å¼ç»“åˆçš„æ–¹å¼ï¼Œæ„é€ å‡½æ•°æ¨¡å¼ç”¨äºå®šä¹‰å®ä¾‹å±æ€§ï¼Œè€ŒåŸå‹æ¨¡å¼ç”¨äºå®šä¹‰æ–¹æ³•å’Œå…±äº«çš„å±æ€§ã€‚</p><h3 id="6-ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼å’ŒåŸå‹æ¨¡å¼"><a href="#6-ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼å’ŒåŸå‹æ¨¡å¼" class="headerlink" title="6. ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼å’ŒåŸå‹æ¨¡å¼"></a>6. ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼å’ŒåŸå‹æ¨¡å¼</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> job</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>job <span class="token operator">=</span> job<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    constructor<span class="token operator">:</span> Person<span class="token punctuation">,</span>    <span class="token function-variable function">sayName</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Nike'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">'teacher'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="7-åŠ¨æ€åŸå‹æ¨¡å¼"><a href="#7-åŠ¨æ€åŸå‹æ¨¡å¼" class="headerlink" title="7. åŠ¨æ€åŸå‹æ¨¡å¼"></a>7. åŠ¨æ€åŸå‹æ¨¡å¼</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> job</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>job <span class="token operator">=</span> job<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sayName <span class="token operator">!=</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Nike'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">'teacher'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>person1<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åŠ¨æ€åŸå‹æ¨¡å¼å°†æ‰€æœ‰ä¿¡æ¯å°è£…åœ¨äº†æ„é€ å‡½æ•°ä¸­ï¼Œè€Œé€šè¿‡æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–åŸå‹ï¼ˆä»…ç¬¬ä¸€ä¸ªå¯¹è±¡å®ä¾‹åŒ–æ—¶åˆå§‹åŒ–åŸå‹ï¼‰ï¼Œè¿™ä¸ªå¯ä»¥é€šè¿‡åˆ¤æ–­è¯¥æ–¹æ³•æ˜¯å¦æœ‰æ•ˆè€Œé€‰æ‹©æ˜¯å¦éœ€è¦åˆå§‹åŒ–åŸå‹ã€‚</p><h3 id="8-å¯„ç”Ÿæ„é€ å‡½æ•°æ–¹å¼"><a href="#8-å¯„ç”Ÿæ„é€ å‡½æ•°æ–¹å¼" class="headerlink" title="8. å¯„ç”Ÿæ„é€ å‡½æ•°æ–¹å¼"></a>8. å¯„ç”Ÿæ„é€ å‡½æ•°æ–¹å¼</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> job</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    o<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    o<span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    o<span class="token punctuation">.</span>job <span class="token operator">=</span> job<span class="token punctuation">;</span>    o<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> o<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Nike'</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">,</span> <span class="token string">'teacher'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯„ç”Ÿæ¨¡å¼å’Œå·¥å‚æ¨¡å¼å‡ ä¹ä¸€æ ·ï¼Œå¯„ç”Ÿæ¨¡å¼å’Œå·¥å‚æ¨¡å¼çš„åŒºåˆ«ï¼š</p><ul><li>å¯„ç”Ÿæ¨¡å¼åˆ›å»ºå¯¹è±¡æ—¶ä½¿ç”¨äº†<code>new</code>å…³é”®å­—</li><li>å¯„ç”Ÿæ¨¡å¼çš„å¤–éƒ¨åŒ…è£…å‡½æ•°æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°</li></ul><blockquote><p><strong>ä½œç”¨</strong>:å¯„ç”Ÿæ¨¡å¼å¯ä»¥åœ¨ç‰¹æ®Šçš„æƒ…å†µä¸‹ä¸ºå¯¹è±¡æ¥åˆ›å»ºæ„é€ å‡½æ•°,åŸå› åœ¨äºæˆ‘ä»¬å¯ä»¥é€šè¿‡æ„é€ å‡½æ•°é‡å†™å¯¹è±¡çš„å€¼ï¼Œå¹¶é€šè¿‡returnè¿”å›ã€‚é‡å†™è°ƒç”¨æ„é€ å‡½æ•°(åˆ›å»ºçš„å¯¹è±¡çš„å®ä¾‹)ä¹‹åçš„å¯¹è±¡å®ä¾‹çš„æ–°çš„å€¼ã€‚</p></blockquote><h3 id="9-ç¨³å¦¥æ„é€ å‡½æ•°æ–¹å¼"><a href="#9-ç¨³å¦¥æ„é€ å‡½æ•°æ–¹å¼" class="headerlink" title="9. ç¨³å¦¥æ„é€ å‡½æ•°æ–¹å¼"></a>9. ç¨³å¦¥æ„é€ å‡½æ•°æ–¹å¼</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> job</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    o<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> o<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Nike'</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">,</span> <span class="token string">'teacher'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>person<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä½¿ç”¨ç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼åªèƒ½é€šè¿‡å…¶æ„é€ å‡½æ•°å†…éƒ¨çš„æ–¹æ³•æ¥è·å–é‡Œé¢çš„å±æ€§å€¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é“æ ¼æ‹‰æ–¯Â·å…‹æ‹‰å…‹ç¦å¾·å‘æ˜äº†JavaScriptä¸­çš„ç¨³å¦¥å¯¹è±¡è¿™ä¸ªæ¦‚å¿µã€‚æ‰€è°“ç¨³å¦¥å¯¹è±¡ï¼Œæ˜¯æŒ‡æ²¡æœ‰å…¬å…±å±æ€§ï¼Œè€Œä¸”å…¶æ–¹æ³•ä¹Ÿä¸å¼•ç”¨<code>this</code>å¯¹è±¡ã€‚ç¨³å¦¥å¯¹è±¡æœ€é€‚åˆåœ¨ä¸€äº›å®‰å…¨ç¯å¢ƒä¸­ï¼ˆè¿™äº›ç¯å¢ƒä¼šç¦æ­¢ä½¿ç”¨<code>this</code>å’Œ<code>new</code>ï¼‰ï¼Œæˆ–è€…åœ¨é˜²æ­¢æ•°æ®è¢«å…¶ä»–åº”ç”¨ç¨‹åºæ”¹åŠ¨æ—¶ä½¿ç”¨ã€‚ç¨³å¦¥æ„é€ å‡½æ•°éµå¾ªçš„ä¸å¯„ç”Ÿæ„é€ å‡½æ•°ç±»ä¼¼çš„æ¨¡å¼ï¼Œä½†åˆä¸¤ç‚¹ä¸åŒï¼š</p><ul><li>ä¸€æ˜¯æ–°åˆ›å»ºå¯¹è±¡çš„å®ä¾‹æ–¹æ³•ä¸å¼•ç”¨<code>this</code>ï¼›</li><li>äºŒæ˜¯ä¸ä½¿ç”¨<code>new</code>æ“ä½œç¬¦è°ƒç”¨æ„é€ å‡½æ•°ã€‚</li></ul><blockquote><p><strong>æ³¨</strong>ï¼šä¸å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼ç±»ä¼¼ï¼Œä½¿ç”¨ç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼åˆ›å»ºçš„å¯¹è±¡ä¸æ„é€ å‡½æ•°ä¹‹é—´æ²¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Œå› æ­¤instanceofæ“ä½œç¬¦å¯¹è¿™ç§å¯¹è±¡ä¹Ÿæ²¡æœ‰æ„ä¹‰ã€‚</p></blockquote><h2 id="å¹¶å‘æ¨¡å‹å’Œäº‹ä»¶å¾ªç¯-event-loop"><a href="#å¹¶å‘æ¨¡å‹å’Œäº‹ä»¶å¾ªç¯-event-loop" class="headerlink" title="å¹¶å‘æ¨¡å‹å’Œäº‹ä»¶å¾ªç¯(event loop)"></a>å¹¶å‘æ¨¡å‹å’Œäº‹ä»¶å¾ªç¯(event loop)</h2><p>JavaScript çš„å¹¶å‘æ¨¡å‹åŸºäº<strong>äº‹ä»¶å¾ªç¯</strong>ã€‚</p><p><img src="https://statics.sh1a.qingstor.com/2020/11/27/js_event.png" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2020/11/27/js_event.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="Jså †æ ˆé˜Ÿåˆ—å›¾"></p><h3 id="1-è¿è¡Œæ—¶æ¦‚å¿µ"><a href="#1-è¿è¡Œæ—¶æ¦‚å¿µ" class="headerlink" title="1. è¿è¡Œæ—¶æ¦‚å¿µ"></a>1. è¿è¡Œæ—¶æ¦‚å¿µ</h3><h4 id="æ ˆ"><a href="#æ ˆ" class="headerlink" title="æ ˆ"></a>æ ˆ</h4><p>å‡½æ•°è°ƒç”¨å½¢æˆäº†ä¸€ä¸ªæ ˆå¸§ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> <span class="token number">11</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token function">foo</span><span class="token punctuation">(</span>x <span class="token operator">*</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½“è°ƒç”¨ bar æ—¶ï¼Œåˆ›å»ºäº†ç¬¬ä¸€ä¸ªå¸§ ï¼Œå¸§ä¸­åŒ…å«äº† bar çš„å‚æ•°å’Œå±€éƒ¨å˜é‡ã€‚å½“ bar è°ƒç”¨ foo æ—¶ï¼Œç¬¬äºŒä¸ªå¸§å°±è¢«åˆ›å»ºï¼Œå¹¶è¢«å‹åˆ°ç¬¬ä¸€ä¸ªå¸§ä¹‹ä¸Šï¼Œå¸§ä¸­åŒ…å«äº† foo çš„å‚æ•°å’Œå±€éƒ¨å˜é‡ã€‚å½“ foo è¿”å›æ—¶ï¼Œæœ€ä¸Šå±‚çš„å¸§å°±è¢«å¼¹å‡ºæ ˆï¼ˆå‰©ä¸‹ bar å‡½æ•°çš„è°ƒç”¨å¸§ ï¼‰ã€‚å½“ bar è¿”å›çš„æ—¶å€™ï¼Œæ ˆå°±ç©ºäº†ã€‚</p><h4 id="å †"><a href="#å †" class="headerlink" title="å †"></a>å †</h4><p>å¯¹è±¡è¢«åˆ†é…åœ¨ä¸€ä¸ªå †ä¸­ï¼Œå³ç”¨ä»¥è¡¨ç¤ºä¸€ä¸ªå¤§éƒ¨åˆ†éç»“æ„åŒ–çš„å†…å­˜åŒºåŸŸã€‚</p><h4 id="é˜Ÿåˆ—"><a href="#é˜Ÿåˆ—" class="headerlink" title="é˜Ÿåˆ—"></a>é˜Ÿåˆ—</h4><p>ä¸€ä¸ª JavaScript è¿è¡Œæ—¶åŒ…å«äº†ä¸€ä¸ªå¾…å¤„ç†çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚æ¯ä¸€ä¸ªæ¶ˆæ¯éƒ½ä¸ä¸€ä¸ªå‡½æ•°ç›¸å…³è”ã€‚å½“æ ˆæ‹¥æœ‰è¶³å¤Ÿå†…å­˜æ—¶ï¼Œä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªæ¶ˆæ¯è¿›è¡Œå¤„ç†ã€‚è¿™ä¸ªå¤„ç†è¿‡ç¨‹åŒ…å«äº†è°ƒç”¨ä¸è¿™ä¸ªæ¶ˆæ¯ç›¸å…³è”çš„å‡½æ•°ï¼ˆä»¥åŠå› è€Œåˆ›å»ºäº†ä¸€ä¸ªåˆå§‹å †æ ˆå¸§ï¼‰ã€‚å½“æ ˆå†æ¬¡ä¸ºç©ºçš„æ—¶å€™ï¼Œä¹Ÿå°±æ„å‘³ç€æ¶ˆæ¯å¤„ç†ç»“æŸã€‚</p><h3 id="2-äº‹ä»¶å¾ªç¯"><a href="#2-äº‹ä»¶å¾ªç¯" class="headerlink" title="2. äº‹ä»¶å¾ªç¯"></a>2. äº‹ä»¶å¾ªç¯</h3><p>ä¹‹æ‰€ä»¥ç§°ä¸º<strong>äº‹ä»¶å¾ªç¯</strong>ï¼Œæ˜¯å› ä¸ºå®ƒç»å¸¸è¢«ç”¨äºç±»ä¼¼å¦‚ä¸‹çš„æ–¹å¼æ¥å®ç°ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">while</span> <span class="token punctuation">(</span>queue<span class="token punctuation">.</span><span class="token function">waitForMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  queue<span class="token punctuation">.</span><span class="token function">processNextMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å¦‚æœå½“å‰æ²¡æœ‰ä»»ä½•æ¶ˆæ¯ï¼Œqueue.waitForMessage ä¼šç­‰å¾…ç€åŒæ­¥å°†è¦åˆ°æ¥çš„æ¶ˆæ¯ã€‚</p><p>æ¯ä¸€ä¸ªæ¶ˆæ¯å®Œæ•´çš„æ‰§è¡Œåï¼Œå…¶å®ƒæ¶ˆæ¯æ‰ä¼šè¢«æ‰§è¡Œã€‚è¿™ä¸ªæ¨¡å‹çš„ä¸€ä¸ªç¼ºç‚¹åœ¨äºå½“ä¸€ä¸ªæ¶ˆæ¯çš„å®Œæˆè€—æ—¶è¿‡é•¿ï¼Œç½‘ç»œåº”ç”¨æ— æ³•å¤„ç†ç”¨æˆ·çš„äº¤äº’å¦‚ç‚¹å‡»æˆ–è€…æ»šåŠ¨ã€‚æµè§ˆå™¨ç”¨â€œç¨‹åºéœ€è¦è¿‡é•¿æ—¶é—´è¿è¡Œâ€çš„å¯¹è¯æ¡†æ¥ç¼“è§£è¿™ä¸ªé—®é¢˜ã€‚ä¸€ä¸ªæ¯”è¾ƒå¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿æ¶ˆæ¯å¤„ç†å˜çŸ­ä¸”å¦‚æœå¯èƒ½çš„è¯ï¼Œå°†ä¸€ä¸ªæ¶ˆæ¯æ‹†åˆ†æˆå‡ ä¸ªæ¶ˆæ¯ã€‚</p><p>åœ¨æµè§ˆå™¨é‡Œï¼Œå½“ä¸€ä¸ªäº‹ä»¶å‡ºç°ä¸”æœ‰ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨è¢«ç»‘å®šæ—¶ï¼Œæ¶ˆæ¯ä¼šè¢«éšæ—¶æ·»åŠ ã€‚å¦‚æœæ²¡æœ‰äº‹ä»¶ç›‘å¬å™¨ï¼Œäº‹ä»¶ä¼šä¸¢å¤±ã€‚æ‰€ä»¥ç‚¹å‡»ä¸€ä¸ªé™„å¸¦ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°çš„å…ƒç´ ä¼šæ·»åŠ ä¸€ä¸ªæ¶ˆæ¯ã€‚å…¶å®ƒäº‹ä»¶äº¦ç„¶ã€‚</p><h3 id="3-ç»ä¸é˜»å¡"><a href="#3-ç»ä¸é˜»å¡" class="headerlink" title="3. ç»ä¸é˜»å¡"></a>3. ç»ä¸é˜»å¡</h3><p>äº‹ä»¶å¾ªç¯(event loop)æ¨¡å‹ç‰¹æ€§åœ¨äºå®ƒ<strong>æ°¸ä¸é˜»å¡</strong>ã€‚é€šå¸¸ç”±äº‹ä»¶æˆ–è€…å›è°ƒå‡½æ•°è¿›è¡Œ I/O (input/output)å¤„ç† ã€‚</p><hr><p>å‚è€ƒæ–‡æ¡£ï¼š</p><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript">MDN</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaé¢å‘å¯¹è±¡è®¾è®¡ä¹‹å•ä¾‹æ¨¡å¼</title>
      <link href="/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-dan-li-mo-shi/"/>
      <url>/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-dan-li-mo-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="æ¨¡å¼åŠ¨æœº"><a href="#æ¨¡å¼åŠ¨æœº" class="headerlink" title="æ¨¡å¼åŠ¨æœº"></a>æ¨¡å¼åŠ¨æœº</h2><p>å¯¹äºç³»ç»Ÿä¸­çš„æŸäº›ç±»æ¥è¯´ï¼Œåªæœ‰ä¸€ä¸ªå®ä¾‹å¾ˆé‡è¦ï¼Œä¾‹å¦‚ï¼Œä¸€ä¸ªç³»ç»Ÿä¸­å¯ä»¥å­˜åœ¨å¤šä¸ªæ‰“å°ä»»åŠ¡ï¼Œä½†æ˜¯åªèƒ½æœ‰ä¸€ä¸ªæ­£åœ¨å·¥ä½œçš„ä»»åŠ¡ï¼›ä¸€ä¸ªç³»ç»Ÿåªèƒ½æœ‰ä¸€ä¸ªçª—å£ç®¡ç†å™¨æˆ–æ–‡ä»¶ç³»ç»Ÿï¼›ä¸€ä¸ªç³»ç»Ÿåªèƒ½æœ‰ä¸€ä¸ªè®¡æ—¶å·¥å…·æˆ–IDï¼ˆåºå·ï¼‰ç”Ÿæˆå™¨ã€‚</p><p>å¦‚ä½•ä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹å¹¶ä¸”è¿™ä¸ªå®ä¾‹æ˜“äºè¢«è®¿é—®å‘¢ï¼Ÿå®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡å¯ä»¥ç¡®ä¿å¯¹è±¡éšæ—¶éƒ½å¯ä»¥è¢«è®¿é—®ï¼Œä½†ä¸èƒ½é˜²æ­¢æˆ‘ä»¬å®ä¾‹åŒ–å¤šä¸ªå¯¹è±¡ã€‚</p><p>ä¸€ä¸ªæ›´å¥½çš„è§£å†³åŠæ³•æ˜¯è®©ç±»è‡ªèº«è´Ÿè´£ä¿å­˜å®ƒçš„å”¯ä¸€å®ä¾‹ã€‚è¿™ä¸ªç±»å¯ä»¥ä¿è¯æ²¡æœ‰å…¶ä»–å®ä¾‹è¢«åˆ›å»ºï¼Œå¹¶ä¸”å®ƒå¯ä»¥æä¾›ä¸€ä¸ªè®¿é—®è¯¥å®ä¾‹çš„æ–¹æ³•ã€‚è¿™å°±æ˜¯å•ä¾‹æ¨¡å¼çš„æ¨¡å¼åŠ¨æœºã€‚</p><h2 id="æ¨¡å¼å®šä¹‰"><a href="#æ¨¡å¼å®šä¹‰" class="headerlink" title="æ¨¡å¼å®šä¹‰"></a>æ¨¡å¼å®šä¹‰</h2><blockquote><p><strong>å•ä¾‹æ¨¡å¼(<code>Singleton Pattern</code>)<strong>ï¼šå•ä¾‹æ¨¡å¼ç¡®ä¿æŸä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œè€Œä¸”è‡ªè¡Œå®ä¾‹åŒ–å¹¶å‘æ•´ä¸ªç³»ç»Ÿæä¾›è¿™ä¸ªå®ä¾‹ï¼Œè¿™ä¸ªç±»ç§°ä¸ºå•ä¾‹ç±»ï¼Œå®ƒæä¾›å…¨å±€è®¿é—®çš„æ–¹æ³•ã€‚å•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§</strong>å¯¹è±¡åˆ›å»ºå‹æ¨¡å¼</strong>ã€‚å•ä¾‹æ¨¡å¼åˆåå•ä»¶æ¨¡å¼æˆ–å•æ€æ¨¡å¼ã€‚</p></blockquote><p>å•ä¾‹æ¨¡å¼çš„è¦ç‚¹æœ‰ä¸‰ä¸ªï¼š</p><ul><li>ä¸€æ˜¯æŸä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ï¼›</li><li>äºŒæ˜¯å®ƒå¿…é¡»è‡ªè¡Œåˆ›å»ºè¿™ä¸ªå®ä¾‹ï¼›</li><li>ä¸‰æ˜¯å®ƒå¿…é¡»è‡ªè¡Œå‘æ•´ä¸ªç³»ç»Ÿæä¾›è¿™ä¸ªå®ä¾‹ã€‚</li></ul><h2 id="æ¨¡å¼ç»“æ„"><a href="#æ¨¡å¼ç»“æ„" class="headerlink" title="æ¨¡å¼ç»“æ„"></a>æ¨¡å¼ç»“æ„</h2><h3 id="å‚ä¸è§’è‰²"><a href="#å‚ä¸è§’è‰²" class="headerlink" title="å‚ä¸è§’è‰²"></a>å‚ä¸è§’è‰²</h3><ul><li><code>Singleton</code>: å•ä¾‹</li></ul><h3 id="UMLç±»å›¾"><a href="#UMLç±»å›¾" class="headerlink" title="UMLç±»å›¾"></a>UMLç±»å›¾</h3><p><img src="https://statics.sh1a.qingstor.com/2018/10/29/Java-design-singleton-uml.jpg" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/10/29/Java-design-singleton-uml.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å•ä¾‹æ¨¡å¼UMLç±»å›¾"></p><h3 id="æ—¶åºå›¾"><a href="#æ—¶åºå›¾" class="headerlink" title="æ—¶åºå›¾"></a>æ—¶åºå›¾</h3><p><img src="https://statics.sh1a.qingstor.com/2018/10/29/Java-design-singleton-seq.jpg" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/10/29/Java-design-singleton-seq.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å•ä¾‹æ¨¡å¼æ—¶åºå›¾"></p><h2 id="ä»£ç å®ç°æ–¹å¼"><a href="#ä»£ç å®ç°æ–¹å¼" class="headerlink" title="ä»£ç å®ç°æ–¹å¼"></a>ä»£ç å®ç°æ–¹å¼</h2><h3 id="1-é¥¿æ±‰å¼ï¼ˆæ¨èä½¿ç”¨ï¼‰"><a href="#1-é¥¿æ±‰å¼ï¼ˆæ¨èä½¿ç”¨ï¼‰" class="headerlink" title="1. é¥¿æ±‰å¼ï¼ˆæ¨èä½¿ç”¨ï¼‰"></a>1. é¥¿æ±‰å¼ï¼ˆæ¨èä½¿ç”¨ï¼‰</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * é¥¿æ±‰å¼å•ä¾‹æ¨¡å¼. * * @author blinkfox on 2017-10-23. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/** å…¨å±€å”¯ä¸€å®ä¾‹. */</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Singleton</span> singleton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> singleton<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>æ³¨</strong>ï¼šè¿™ç§æ–¹å¼é¿å…äº†å¤šçº¿ç¨‹çš„åŒæ­¥é—®é¢˜ï¼Œä½†ä¸æ˜¯æ‡’åŠ è½½ã€‚å¦‚æœä¸éœ€è¦æ‡’åŠ è½½çš„æ–¹å¼ï¼Œæ¨èä½¿ç”¨ã€‚</p></blockquote><h3 id="2-éçº¿ç¨‹å®‰å…¨æ‡’æ±‰å¼ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰"><a href="#2-éçº¿ç¨‹å®‰å…¨æ‡’æ±‰å¼ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰" class="headerlink" title="2. éçº¿ç¨‹å®‰å…¨æ‡’æ±‰å¼ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰"></a>2. éçº¿ç¨‹å®‰å…¨æ‡’æ±‰å¼ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * éçº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰å¼. * * @author blinkfox on 2017-10-23. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> singleton<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token comment">/**     * é€šè¿‡æ‡’åŠ è½½çš„æ–¹å¼è·å–å®ä¾‹ï¼Œä½†æ˜¯éçº¿ç¨‹å®‰å…¨.     * @return Singletonå®ä¾‹     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>singleton <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            singleton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> singleton<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>æ³¨</strong>ï¼šæ˜¯æ‡’åŠ è½½çš„æ–¹å¼ï¼Œä½†éçº¿ç¨‹å®‰å…¨ã€‚ä¸æ¨èä½¿ç”¨ã€‚</p></blockquote><h3 id="3-ä½æ•ˆçš„çº¿ç¨‹å®‰å…¨æ‡’æ±‰å¼ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰"><a href="#3-ä½æ•ˆçš„çº¿ç¨‹å®‰å…¨æ‡’æ±‰å¼ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰" class="headerlink" title="3. ä½æ•ˆçš„çº¿ç¨‹å®‰å…¨æ‡’æ±‰å¼ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰"></a>3. ä½æ•ˆçš„çº¿ç¨‹å®‰å…¨æ‡’æ±‰å¼ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * ä½æ•ˆçš„çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰å¼. * * @author blinkfox on 2017-10-23. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> singleton<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token comment">/**     * é€šè¿‡ synchronized å…³é”®å­—æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œä¹Ÿæ˜¯æ‡’åŠ è½½çš„æ–¹å¼æ¥è·å–å®ä¾‹.     * @return Singletonå®ä¾‹     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">synchronized</span> <span class="token class-name">Singleton</span> <span class="token function">getSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>singleton <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            singleton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> singleton<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>æ³¨</strong>ï¼šæ˜¯æ‡’åŠ è½½çš„æ–¹å¼ï¼Œä¹Ÿçº¿ç¨‹å®‰å…¨ï¼Œä½†æ˜¯æ•ˆç‡å¾ˆä½ã€‚å› ä¸º99%çš„æƒ…å†µä¸‹æ˜¯ä¸éœ€è¦å»åŒæ­¥çš„ã€‚ä¸æ¨èä½¿ç”¨ã€‚</p></blockquote><h3 id="4-åŒé‡æ ¡éªŒé”çº¿ç¨‹å®‰å…¨æ‡’æ±‰å¼ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰"><a href="#4-åŒé‡æ ¡éªŒé”çº¿ç¨‹å®‰å…¨æ‡’æ±‰å¼ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰" class="headerlink" title="4. åŒé‡æ ¡éªŒé”çº¿ç¨‹å®‰å…¨æ‡’æ±‰å¼ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰"></a>4. åŒé‡æ ¡éªŒé”çº¿ç¨‹å®‰å…¨æ‡’æ±‰å¼ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * åŒé‡æ ¡éªŒé”çº¿ç¨‹å®‰å…¨æ‡’æ±‰å¼. * * @author blinkfox on 2017-10-23. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> singleton<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token comment">/**     * é€šè¿‡'åŒé‡æ ¡éªŒé”'æ¥æ›´é«˜æ•ˆçš„ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œä¹Ÿæ˜¯æ‡’åŠ è½½çš„æ–¹å¼æ¥è·å–å®ä¾‹.     * @return Singletonå®ä¾‹     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>singleton <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>singleton <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    singleton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> singleton<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>æ³¨</strong>ï¼šæ˜¯æ‡’åŠ è½½çš„æ–¹å¼ï¼Œä¹Ÿçº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡ä¹Ÿä¸é”™ã€‚ä½†å—é™äºJdk5ä»¥å‰çš„Javaå†…å­˜æ¨¡å‹ï¼Œä»ç„¶ä¼šæœ‰bugï¼ŒJava5åŠä¹‹åæ‰èƒ½æ­£å¸¸è¾¾åˆ°å•ä¾‹æ•ˆæœã€‚</p></blockquote><h3 id="5-æšä¸¾å¼ï¼ˆå¼ºçƒˆæ¨èä½¿ç”¨ï¼‰"><a href="#5-æšä¸¾å¼ï¼ˆå¼ºçƒˆæ¨èä½¿ç”¨ï¼‰" class="headerlink" title="5. æšä¸¾å¼ï¼ˆå¼ºçƒˆæ¨èä½¿ç”¨ï¼‰"></a>5. æšä¸¾å¼ï¼ˆå¼ºçƒˆæ¨èä½¿ç”¨ï¼‰</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * æšä¸¾æ–¹å¼çš„å•ä¾‹. * * @author blinkfox on 2017-10-23. */</span><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Singleton</span> <span class="token punctuation">&#123;</span>    INSTANCE<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>æ³¨</strong>ï¼šåœ¨<code>ã€ŠEffective Javaã€‹</code>ä¸€ä¹¦ä¸­å¼ºçƒˆæ¨èä½¿ç”¨æšä¸¾æ¥å®ç°å•ä¾‹æ¨¡å¼ï¼Œè¯¥æ–¹å¼ç®€å•å¯è‡ªç”±åºåˆ—åŒ–ï¼›ä¿è¯åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼ˆå³ä½¿ä½¿ç”¨åå°„æœºåˆ¶ä¹Ÿæ— æ³•å¤šæ¬¡å®ä¾‹åŒ–ä¸€ä¸ªæšä¸¾é‡ï¼‰ï¼›çº¿ç¨‹å®‰å…¨ã€‚å”¯ä¸€çš„ç¼ºç‚¹æ˜¯éæ‡’åŠ è½½æ–¹å¼ã€‚</p></blockquote><h3 id="6-é™æ€å†…éƒ¨ç±»ï¼ˆæ¨èä½¿ç”¨ï¼‰"><a href="#6-é™æ€å†…éƒ¨ç±»ï¼ˆæ¨èä½¿ç”¨ï¼‰" class="headerlink" title="6. é™æ€å†…éƒ¨ç±»ï¼ˆæ¨èä½¿ç”¨ï¼‰"></a>6. é™æ€å†…éƒ¨ç±»ï¼ˆæ¨èä½¿ç”¨ï¼‰</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * é€šè¿‡ä½¿ç”¨é™æ€å†…éƒ¨ç±»çš„æ–¹å¼æ¥å®ç°æ‡’åŠ è½½ä¸”çº¿ç¨‹å®‰å…¨çš„åˆ›å»ºå•ä¾‹. * * @author blinkfox on 2017-10-23. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token comment">/**     * é™æ€å†…éƒ¨ç±».     */</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">private</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton4</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * é€šè¿‡æ‡’åŠ è½½çš„æ–¹å¼è·å–Singletonå”¯ä¸€å®ä¾‹çš„æ–¹æ³•.     * @return Singletonå®ä¾‹     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span>instance<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>æ³¨</strong>ï¼šè¿™ç§æ–¹å¼åˆ©ç”¨äº†<code>ClassLoader</code>çš„æœºåˆ¶ä¿è¯åˆå§‹åŒ–<code>instance</code>æ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œå…¶åªæœ‰æ˜¾ç¤ºé€šè¿‡è°ƒç”¨<code>getInstance</code>æ–¹æ³•æ—¶ï¼Œæ‰ä¼šæ˜¾ç¤ºè£…è½½<code>SingletonHolder</code>ç±»ï¼Œä»è€Œå®ä¾‹åŒ–<code>instance</code>ã€‚</p></blockquote><h2 id="æ¨¡å¼åˆ†æ"><a href="#æ¨¡å¼åˆ†æ" class="headerlink" title="æ¨¡å¼åˆ†æ"></a>æ¨¡å¼åˆ†æ</h2><p>å•ä¾‹æ¨¡å¼çš„ç›®çš„æ˜¯ä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ã€‚å•ä¾‹æ¨¡å¼åŒ…å«çš„è§’è‰²åªæœ‰ä¸€ä¸ªï¼Œå°±æ˜¯å•ä¾‹ç±»â€”â€”<code>Singleton</code>ã€‚</p><h3 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h3><ul><li>æä¾›äº†å¯¹å”¯ä¸€å®ä¾‹çš„å—æ§è®¿é—®ã€‚å› ä¸ºå•ä¾‹ç±»å°è£…äº†å®ƒçš„å”¯ä¸€å®ä¾‹ï¼Œæ‰€ä»¥å®ƒå¯ä»¥ä¸¥æ ¼æ§åˆ¶å®¢æˆ·æ€æ ·ä»¥åŠä½•æ—¶è®¿é—®å®ƒï¼Œå¹¶ä¸ºè®¾è®¡åŠå¼€å‘å›¢é˜Ÿæä¾›äº†å…±äº«çš„æ¦‚å¿µã€‚</li><li>ç”±äºåœ¨ç³»ç»Ÿå†…å­˜ä¸­åªå­˜åœ¨ä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤å¯ä»¥èŠ‚çº¦ç³»ç»Ÿèµ„æºï¼Œå¯¹äºä¸€äº›éœ€è¦é¢‘ç¹åˆ›å»ºå’Œé”€æ¯çš„å¯¹è±¡ï¼Œå•ä¾‹æ¨¡å¼æ— ç–‘å¯ä»¥æé«˜ç³»ç»Ÿçš„æ€§èƒ½ã€‚</li><li>å…è®¸å¯å˜æ•°ç›®çš„å®ä¾‹ã€‚æˆ‘ä»¬å¯ä»¥åŸºäºå•ä¾‹æ¨¡å¼è¿›è¡Œæ‰©å±•ï¼Œä½¿ç”¨ä¸å•ä¾‹æ§åˆ¶ç›¸ä¼¼çš„æ–¹æ³•æ¥è·å¾—æŒ‡å®šä¸ªæ•°çš„å¯¹è±¡å®ä¾‹ã€‚</li></ul><h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h3><ul><li>ç”±äºå•ä¾‹æ¨¡å¼ä¸­æ²¡æœ‰æŠ½è±¡å±‚ï¼Œå› æ­¤å•ä¾‹ç±»çš„æ‰©å±•æœ‰å¾ˆå¤§çš„å›°éš¾ã€‚</li><li>å•ä¾‹ç±»çš„èŒè´£è¿‡é‡ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šè¿èƒŒäº†â€œå•ä¸€èŒè´£åŸåˆ™â€ã€‚å› ä¸ºå•ä¾‹ç±»æ—¢å……å½“äº†å·¥å‚è§’è‰²ï¼Œæä¾›äº†å·¥å‚æ–¹æ³•ï¼ŒåŒæ—¶åˆå……å½“äº†äº§å“è§’è‰²ï¼ŒåŒ…å«ä¸€äº›ä¸šåŠ¡æ–¹æ³•ï¼Œå°†äº§å“çš„åˆ›å»ºå’Œäº§å“çš„æœ¬èº«çš„åŠŸèƒ½èåˆåˆ°ä¸€èµ·ã€‚</li><li>æ»¥ç”¨å•ä¾‹å°†å¸¦æ¥ä¸€äº›è´Ÿé¢é—®é¢˜ï¼Œå¦‚ä¸ºäº†èŠ‚çœèµ„æºå°†æ•°æ®åº“è¿æ¥æ± å¯¹è±¡è®¾è®¡ä¸ºå•ä¾‹ç±»ï¼Œå¯èƒ½ä¼šå¯¼è‡´å…±äº«è¿æ¥æ± å¯¹è±¡çš„ç¨‹åºè¿‡å¤šè€Œå‡ºç°è¿æ¥æ± æº¢å‡ºï¼›ç°åœ¨å¾ˆå¤šé¢å‘å¯¹è±¡è¯­è¨€(å¦‚<code>Java</code>ã€<code>C#</code>)çš„è¿è¡Œç¯å¢ƒéƒ½æä¾›äº†è‡ªåŠ¨åƒåœ¾å›æ”¶çš„æŠ€æœ¯ï¼Œå› æ­¤ï¼Œå¦‚æœå®ä¾‹åŒ–çš„å¯¹è±¡é•¿æ—¶é—´ä¸è¢«åˆ©ç”¨ï¼Œç³»ç»Ÿä¼šè®¤ä¸ºå®ƒæ˜¯åƒåœ¾ï¼Œä¼šè‡ªåŠ¨é”€æ¯å¹¶å›æ”¶èµ„æºï¼Œä¸‹æ¬¡åˆ©ç”¨æ—¶åˆå°†é‡æ–°å®ä¾‹åŒ–ï¼Œè¿™å°†å¯¼è‡´å¯¹è±¡çŠ¶æ€çš„ä¸¢å¤±ã€‚</li></ul><h3 id="é€‚ç”¨ç¯å¢ƒ"><a href="#é€‚ç”¨ç¯å¢ƒ" class="headerlink" title="é€‚ç”¨ç¯å¢ƒ"></a>é€‚ç”¨ç¯å¢ƒ</h3><p>åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼š</p><ul><li>ç³»ç»Ÿåªéœ€è¦ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œå¦‚ç³»ç»Ÿè¦æ±‚æä¾›ä¸€ä¸ªå”¯ä¸€çš„åºåˆ—å·ç”Ÿæˆå™¨ï¼Œæˆ–è€…éœ€è¦è€ƒè™‘èµ„æºæ¶ˆè€—å¤ªå¤§è€Œåªå…è®¸åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚</li><li>å®¢æˆ·è°ƒç”¨ç±»çš„å•ä¸ªå®ä¾‹åªå…è®¸ä½¿ç”¨ä¸€ä¸ªå…¬å…±è®¿é—®ç‚¹ï¼Œé™¤äº†è¯¥å…¬å…±è®¿é—®ç‚¹ï¼Œä¸èƒ½é€šè¿‡å…¶ä»–é€”å¾„è®¿é—®è¯¥å®ä¾‹ã€‚</li><li>åœ¨ä¸€ä¸ªç³»ç»Ÿä¸­è¦æ±‚ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹æ—¶æ‰åº”å½“ä½¿ç”¨å•ä¾‹æ¨¡å¼ã€‚åè¿‡æ¥ï¼Œå¦‚æœä¸€ä¸ªç±»å¯ä»¥æœ‰å‡ ä¸ªå®ä¾‹å…±å­˜ï¼Œå°±éœ€è¦å¯¹å•ä¾‹æ¨¡å¼è¿›è¡Œæ”¹è¿›ï¼Œä½¿ä¹‹æˆä¸ºå¤šä¾‹æ¨¡å¼ã€‚</li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li>å•ä¾‹æ¨¡å¼ç¡®ä¿æŸä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œè€Œä¸”è‡ªè¡Œå®ä¾‹åŒ–å¹¶å‘æ•´ä¸ªç³»ç»Ÿæä¾›è¿™ä¸ªå®ä¾‹ï¼Œè¿™ä¸ªç±»ç§°ä¸ºå•ä¾‹ç±»ï¼Œå®ƒæä¾›å…¨å±€è®¿é—®çš„æ–¹æ³•ã€‚å•ä¾‹æ¨¡å¼çš„è¦ç‚¹æœ‰ä¸‰ä¸ªï¼šä¸€æ˜¯æŸä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ï¼›äºŒæ˜¯å®ƒå¿…é¡»è‡ªè¡Œåˆ›å»ºè¿™ä¸ªå®ä¾‹ï¼›ä¸‰æ˜¯å®ƒå¿…é¡»è‡ªè¡Œå‘æ•´ä¸ªç³»ç»Ÿæä¾›è¿™ä¸ªå®ä¾‹ã€‚å•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡åˆ›å»ºå‹æ¨¡å¼ã€‚</li><li>å•ä¾‹æ¨¡å¼åªåŒ…å«ä¸€ä¸ªå•ä¾‹è§’è‰²ï¼šåœ¨å•ä¾‹ç±»çš„å†…éƒ¨å®ç°åªç”Ÿæˆä¸€ä¸ªå®ä¾‹ï¼ŒåŒæ—¶å®ƒæä¾›ä¸€ä¸ªé™æ€çš„å·¥å‚æ–¹æ³•ï¼Œè®©å®¢æˆ·å¯ä»¥ä½¿ç”¨å®ƒçš„å”¯ä¸€å®ä¾‹ï¼›ä¸ºäº†é˜²æ­¢åœ¨å¤–éƒ¨å¯¹å…¶å®ä¾‹åŒ–ï¼Œå°†å…¶æ„é€ å‡½æ•°è®¾è®¡ä¸ºç§æœ‰ã€‚</li><li>å®ç°å•ä¾‹æ¨¡å¼ï¼Œå¦‚æœä¸éœ€è¦æ‡’åŠ è½½çš„æ•ˆæœï¼Œåˆ™æ¨èä½¿ç”¨æšä¸¾å’Œé¥¿æ±‰å¼çš„æ–¹å¼ï¼›å¦‚æœéœ€è¦æ‡’åŠ è½½çš„æ•ˆæœï¼Œåˆ™æ¨èä½¿ç”¨é™æ€å†…éƒ¨ç±»æ¥å®ç°æ›´å¥½ã€‚</li><li>å•ä¾‹æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹åœ¨äºæä¾›äº†å¯¹å”¯ä¸€å®ä¾‹çš„å—æ§è®¿é—®å¹¶å¯ä»¥èŠ‚çº¦ç³»ç»Ÿèµ„æºï¼›å…¶ä¸»è¦ç¼ºç‚¹åœ¨äºå› ä¸ºç¼ºå°‘æŠ½è±¡å±‚è€Œéš¾ä»¥æ‰©å±•ï¼Œä¸”å•ä¾‹ç±»èŒè´£è¿‡é‡ã€‚</li><li>å•ä¾‹æ¨¡å¼é€‚ç”¨æƒ…å†µåŒ…æ‹¬ï¼šç³»ç»Ÿåªéœ€è¦ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼›å®¢æˆ·è°ƒç”¨ç±»çš„å•ä¸ªå®ä¾‹åªå…è®¸ä½¿ç”¨ä¸€ä¸ªå…¬å…±è®¿é—®ç‚¹ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶è®¾è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ç†è§£</title>
      <link href="/post/bian-cheng-zhi-dao/mian-xiang-dui-xiang-bian-cheng-de-li-jie/"/>
      <url>/post/bian-cheng-zhi-dao/mian-xiang-dui-xiang-bian-cheng-de-li-jie/</url>
      
        <content type="html"><![CDATA[<h2 id="é¢å‘è¿‡ç¨‹å’Œé¢å‘å¯¹è±¡"><a href="#é¢å‘è¿‡ç¨‹å’Œé¢å‘å¯¹è±¡" class="headerlink" title="é¢å‘è¿‡ç¨‹å’Œé¢å‘å¯¹è±¡"></a>é¢å‘è¿‡ç¨‹å’Œé¢å‘å¯¹è±¡</h2><h3 id="é¢å‘è¿‡ç¨‹æ€æƒ³æ¦‚è¿°"><a href="#é¢å‘è¿‡ç¨‹æ€æƒ³æ¦‚è¿°" class="headerlink" title="é¢å‘è¿‡ç¨‹æ€æƒ³æ¦‚è¿°"></a>é¢å‘è¿‡ç¨‹æ€æƒ³æ¦‚è¿°</h3><p>é¢å‘ç€å…·ä½“çš„æ¯ä¸€ä¸ªæ­¥éª¤å’Œè¿‡ç¨‹ï¼ŒæŠŠæ¯ä¸€ä¸ªæ­¥éª¤å’Œè¿‡ç¨‹å®Œæˆï¼Œç„¶åç”±è¿™äº›åŠŸèƒ½æ–¹æ³•ç›¸äº’è°ƒç”¨ï¼Œå®Œæˆéœ€æ±‚ã€‚</p><h3 id="é¢å‘å¯¹è±¡æ€æƒ³æ¦‚è¿°"><a href="#é¢å‘å¯¹è±¡æ€æƒ³æ¦‚è¿°" class="headerlink" title="é¢å‘å¯¹è±¡æ€æƒ³æ¦‚è¿°"></a>é¢å‘å¯¹è±¡æ€æƒ³æ¦‚è¿°</h3><p>å½“éœ€æ±‚å•ä¸€ï¼Œæˆ–è€…ç®€å•æ—¶ï¼Œæˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥å»æ“ä½œæ²¡é—®é¢˜ï¼Œå¹¶ä¸”æ•ˆç‡ä¹ŸæŒºé«˜ã€‚å¯éšç€éœ€æ±‚çš„æ›´æ”¹ï¼ŒåŠŸèƒ½çš„å¢å¤šï¼Œå‘ç°éœ€è¦é¢å¯¹æ¯ä¸€ä¸ªæ­¥éª¤å¾ˆéº»çƒ¦äº†ï¼Œè¿™æ—¶å°±å¼€å§‹æ€ç´¢ï¼Œèƒ½ä¸èƒ½æŠŠè¿™äº›æ­¥éª¤å’ŒåŠŸèƒ½åœ¨è¿›è¡Œå°è£…ï¼Œå°è£…æ—¶æ ¹æ®ä¸åŒçš„åŠŸèƒ½ï¼Œè¿›è¡Œä¸åŒçš„å°è£…ï¼ŒåŠŸèƒ½ç±»ä¼¼çš„å°è£…åœ¨ä¸€èµ·ã€‚è¿™æ ·ç»“æ„å°±æ¸…æ™°äº†å¾ˆå¤šã€‚ç”¨çš„æ—¶å€™ï¼Œæ‰¾åˆ°å¯¹åº”çš„ç±»å°±å¯ä»¥äº†ã€‚è¿™å°±æ˜¯é¢å‘å¯¹è±¡çš„æ€æƒ³ã€‚é¢å‘å¯¹è±¡æ˜¯åŸºäºé¢å‘è¿‡ç¨‹çš„ç¼–ç¨‹æ€æƒ³ã€‚</p><h2 id="é¢å‘å¯¹è±¡ç‰¹å¾"><a href="#é¢å‘å¯¹è±¡ç‰¹å¾" class="headerlink" title="é¢å‘å¯¹è±¡ç‰¹å¾"></a>é¢å‘å¯¹è±¡ç‰¹å¾</h2><ul><li>æŠ½è±¡</li><li>å°è£…</li><li>ç»§æ‰¿</li><li>å¤šæ€</li></ul><h3 id="æŠ½è±¡"><a href="#æŠ½è±¡" class="headerlink" title="æŠ½è±¡"></a>æŠ½è±¡</h3><p>æŠŠç°å®ä¸–ç•Œä¸­çš„æŸä¸€ç±»ä¸œè¥¿ï¼Œæå–å‡ºæ¥ï¼Œç”¨ç¨‹åºä»£ç è¡¨ç¤ºï¼ŒæŠ½è±¡å‡ºæ¥çš„ä¸€èˆ¬å«åšç±»æˆ–è€…æ¥å£ã€‚æŠ½è±¡å¹¶ä¸æ‰“ç®—äº†è§£å…¨éƒ¨é—®é¢˜ï¼Œè€Œæ˜¯é€‰æ‹©å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œæš‚æ—¶ä¸ç”¨éƒ¨åˆ†ç»†èŠ‚ã€‚æŠ½è±¡åŒ…æ‹¬ä¸¤ä¸ªæ–¹é¢ï¼š</p><ul><li>æ•°æ®æŠ½è±¡ï¼šè¡¨ç¤ºä¸–ç•Œä¸­ä¸€ç±»äº‹ç‰©çš„ç‰¹å¾,å°±æ˜¯å¯¹è±¡çš„å±æ€§.æ¯”å¦‚é¸Ÿæœ‰ç¿…è†€,ç¾½æ¯›ç­‰(ç±»çš„å±æ€§)</li><li>è¿‡ç¨‹æŠ½è±¡ï¼šè¡¨ç¤ºä¸–ç•Œä¸­ä¸€ç±»äº‹ç‰©çš„è¡Œä¸º,å°±æ˜¯å¯¹è±¡çš„è¡Œä¸º.æ¯”å¦‚é¸Ÿä¼šé£,ä¼šå«(ç±»çš„æ–¹æ³•)</li></ul><h3 id="å°è£…"><a href="#å°è£…" class="headerlink" title="å°è£…"></a>å°è£…</h3><p>å°è£…ï¼Œå³éšè—å¯¹è±¡çš„å±æ€§å’Œå®ç°ç»†èŠ‚ï¼Œä»…å¯¹å¤–å…¬å¼€æ¥å£ï¼Œæ§åˆ¶åœ¨ç¨‹åºä¸­å±æ€§çš„è¯»å’Œä¿®æ”¹çš„è®¿é—®çº§åˆ«ï¼›å°†æŠ½è±¡å¾—åˆ°çš„æ•°æ®å’Œè¡Œä¸ºï¼ˆæˆ–åŠŸèƒ½ï¼‰ç›¸ç»“åˆï¼Œå½¢æˆä¸€ä¸ªæœ‰æœºçš„æ•´ä½“ï¼Œä¹Ÿå°±æ˜¯å°†æ•°æ®ä¸æ“ä½œæ•°æ®çš„æºä»£ç è¿›è¡Œæœ‰æœºçš„ç»“åˆï¼Œå½¢æˆâ€œç±»â€ï¼Œå…¶ä¸­æ•°æ®å’Œå‡½æ•°éƒ½æ˜¯ç±»çš„æˆå‘˜ã€‚å°è£…çš„ç›®çš„æ˜¯å¢å¼ºå®‰å…¨æ€§å’Œç®€åŒ–ç¼–ç¨‹ï¼Œä½¿ç”¨è€…ä¸å¿…äº†è§£å…·ä½“çš„å®ç°ç»†èŠ‚ï¼Œè€Œåªæ˜¯è¦é€šè¿‡å¤–éƒ¨æ¥å£ï¼Œä»¥ç‰¹å®šçš„è®¿é—®æƒé™æ¥ä½¿ç”¨ç±»çš„æˆå‘˜ã€‚éšè—ä¹‹åï¼Œå¤–éƒ¨ç¨‹åºå°±ä¸èƒ½æ¥è§¦å’Œæ”¹å˜é‚£äº›ç»†èŠ‚ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒè‡ªå·±çš„ç±»ä¼šå—åˆ°éæ³•ä¿®æ”¹ï¼Œå¯ç¡®ä¿å®ƒä»¬ä¸ä¼šå¯¹å…¶ä»–ç¨‹åºé€ æˆå½±å“ã€‚</p><h4 id="å°è£…çš„åŸåˆ™"><a href="#å°è£…çš„åŸåˆ™" class="headerlink" title="å°è£…çš„åŸåˆ™"></a>å°è£…çš„åŸåˆ™</h4><ul><li>å°†ä¸éœ€è¦å¯¹å¤–æä¾›çš„å†…å®¹éƒ½éšè—èµ·æ¥</li><li>æŠŠå±æ€§éƒ½éšè—ï¼Œæä¾›å…¬å…±æ–¹æ³•å¯¹å…¶è®¿é—®</li></ul><h3 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h3><p>ä¸€ç§è”ç»“ç±»çš„å±‚æ¬¡æ¨¡å‹ï¼Œå¹¶ä¸”å…è®¸å’Œé¼“åŠ±ç±»çš„é‡ç”¨ï¼Œæä¾›ä¸€ç§æ˜ç¡®è¡¨è¾¾å…±æ€§çš„æ–¹æ³•ã€‚å¯¹è±¡çš„ä¸€ä¸ªæ–°ç±»å¯ä»¥ä»ç°æœ‰çš„ç±»ä¸­æ´¾ç”Ÿï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºç±»ç»§æ‰¿ã€‚æ–°ç±»ç»§æ‰¿äº†åŸå§‹ç±»çš„ç‰¹æ€§ï¼Œæ–°ç±»ç§°ä¸ºåŸå§‹ç±»çš„æ´¾ç”Ÿç±»(å­ç±»)ï¼ŒåŸå§‹ç±»ç§°ä¸ºæ–°ç±»çš„åŸºç±»(çˆ¶ç±»)ã€‚æ´¾ç”Ÿç±»å¯ä»¥ä»å®ƒçš„çˆ¶ç±»å“ªé‡Œç»§æ‰¿æ–¹æ³•å’Œå®ä¾‹å˜é‡ï¼Œå¹¶ä¸”ç±»å¯ä»¥ä¿®æ”¹æˆ–å¢åŠ æ–°çš„æ–¹æ³•ä½¿ä¹‹æ›´é€‚åˆç‰¹æ®Šçš„éœ€è¦ã€‚å› æ­¤å¯ä»¥è¯´ï¼Œç»§æ‰¿ä¸ºäº†é‡ç”¨çˆ¶ç±»ä»£ç ï¼ŒåŒæ—¶ä¸ºå®ç°å¤šæ€æ€§ä½œå‡†å¤‡ã€‚</p><h4 id="ç»§æ‰¿æ¦‚å¿µçš„å®ç°æ–¹å¼"><a href="#ç»§æ‰¿æ¦‚å¿µçš„å®ç°æ–¹å¼" class="headerlink" title="ç»§æ‰¿æ¦‚å¿µçš„å®ç°æ–¹å¼"></a>ç»§æ‰¿æ¦‚å¿µçš„å®ç°æ–¹å¼</h4><ul><li>ç±»ç»§æ‰¿ï¼šç±»ç»§æ‰¿æ˜¯æŒ‡ç›´æ¥ä½¿ç”¨åŸºç±»çš„å±æ€§å’Œæ–¹æ³•è€Œæ— éœ€é¢å¤–ç¼–ç ã€‚</li><li>æ¥å£ç»§æ‰¿ï¼šæ¥å£ç»§æ‰¿æ˜¯æŒ‡ä»…ä½¿ç”¨å±æ€§å’Œæ–¹æ³•çš„åç§°ã€ä½†æ˜¯å­ç±»å¿…é¡»æä¾›å®ç°ã€‚</li></ul><h3 id="å¤šæ€"><a href="#å¤šæ€" class="headerlink" title="å¤šæ€"></a>å¤šæ€</h3><p>å¤šæ€å°±æ˜¯æŒ‡ä¸€ä¸ªç±»å®ä¾‹çš„ç›¸åŒæ–¹æ³•åœ¨ä¸åŒæƒ…å½¢æœ‰ä¸åŒè¡¨ç°å½¢å¼ã€‚å¤šæ€æœºåˆ¶ä½¿å…·æœ‰ä¸åŒå†…éƒ¨ç»“æ„çš„å¯¹è±¡å¯ä»¥å…±äº«ç›¸åŒçš„å¤–éƒ¨æ¥å£ã€‚è¿™æ„å‘³ç€ï¼Œè™½ç„¶é’ˆå¯¹ä¸åŒå¯¹è±¡çš„å…·ä½“æ“ä½œä¸åŒï¼Œä½†é€šè¿‡ä¸€ä¸ªå…¬å…±çš„ç±»ï¼Œå®ƒä»¬ï¼ˆé‚£äº›æ“ä½œï¼‰å¯ä»¥é€šè¿‡ç›¸åŒçš„æ–¹å¼äºˆä»¥è°ƒç”¨ã€‚</p><h4 id="å®ç°å¤šæ€çš„æ–¹å¼"><a href="#å®ç°å¤šæ€çš„æ–¹å¼" class="headerlink" title="å®ç°å¤šæ€çš„æ–¹å¼"></a>å®ç°å¤šæ€çš„æ–¹å¼</h4><ul><li>é‡è½½</li><li>é‡å†™</li><li>å®ç°æ¥å£</li></ul><h2 id="é¢å‘å¯¹è±¡æ€»ç»“"><a href="#é¢å‘å¯¹è±¡æ€»ç»“" class="headerlink" title="é¢å‘å¯¹è±¡æ€»ç»“"></a>é¢å‘å¯¹è±¡æ€»ç»“</h2><p>å°è£…å¯ä»¥éšè—å®ç°ç»†èŠ‚ï¼Œä½¿å¾—ä»£ç æ¨¡å—åŒ–ï¼›ç»§æ‰¿å¯ä»¥æ‰©å±•å·²å­˜åœ¨çš„ä»£ç æ¨¡å—ï¼ˆç±»ï¼‰ï¼›å®ƒä»¬çš„ç›®çš„éƒ½æ˜¯ä¸ºäº†<strong>ä»£ç é‡ç”¨</strong>ã€‚è€Œå¤šæ€åˆ™æ˜¯ä¸ºäº†å®ç°å¦ä¸€ä¸ªç›®çš„ï¼š<strong>æ¥å£é‡ç”¨</strong>ï¼å¤šæ€çš„ä½œç”¨ï¼Œå°±æ˜¯ä¸ºäº†ç±»åœ¨ç»§æ‰¿å’Œæ´¾ç”Ÿçš„æ—¶å€™ï¼Œä¿è¯ä½¿ç”¨â€œå®¶è°±â€ä¸­ä»»ä¸€ç±»çš„å®ä¾‹çš„æŸä¸€å±æ€§æ—¶çš„æ­£ç¡®è°ƒç”¨ã€‚</p><h3 id="é¢å‘å¯¹è±¡å¼€å‘"><a href="#é¢å‘å¯¹è±¡å¼€å‘" class="headerlink" title="é¢å‘å¯¹è±¡å¼€å‘"></a>é¢å‘å¯¹è±¡å¼€å‘</h3><p>å°±æ˜¯ä¸æ–­çš„åˆ›å»ºå¯¹è±¡ï¼Œä½¿ç”¨å¯¹è±¡ï¼ŒæŒ‡æŒ¥å¯¹è±¡åšäº‹æƒ…ã€‚</p><h3 id="é¢å‘å¯¹è±¡è®¾è®¡"><a href="#é¢å‘å¯¹è±¡è®¾è®¡" class="headerlink" title="é¢å‘å¯¹è±¡è®¾è®¡"></a>é¢å‘å¯¹è±¡è®¾è®¡</h3><p>æ›´å¥½çš„ç®¡ç†å’Œç»´æŠ¤å¯¹è±¡ä¹‹é—´çš„å…³ç³»ã€‚</p><h3 id="é¢å‘å¯¹è±¡ä¼˜ç‚¹"><a href="#é¢å‘å¯¹è±¡ä¼˜ç‚¹" class="headerlink" title="é¢å‘å¯¹è±¡ä¼˜ç‚¹"></a>é¢å‘å¯¹è±¡ä¼˜ç‚¹</h3><ul><li>æ›´ç¬¦åˆæˆ‘ä»¬æ€æƒ³ä¹ æƒ¯çš„æ€æƒ³</li><li>å°†å¤æ‚çš„äº‹æƒ…ç®€å•åŒ–</li><li>å°†æˆ‘ä»¬ä»æ‰§è¡Œè€…å˜æˆäº†æŒ‡æŒ¥è€…</li></ul>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ä¹‹é“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> é¢å‘å¯¹è±¡ç¼–ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaé¢å‘å¯¹è±¡è®¾è®¡ä¹‹å»ºé€ è€…æ¨¡å¼</title>
      <link href="/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-jian-zao-zhe-mo-shi/"/>
      <url>/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-jian-zao-zhe-mo-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€æ¨¡å¼åŠ¨æœº"><a href="#ä¸€ã€æ¨¡å¼åŠ¨æœº" class="headerlink" title="ä¸€ã€æ¨¡å¼åŠ¨æœº"></a>ä¸€ã€æ¨¡å¼åŠ¨æœº</h2><p>æ— è®ºæ˜¯åœ¨ç°å®ä¸–ç•Œä¸­è¿˜æ˜¯åœ¨è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œéƒ½å­˜åœ¨ä¸€äº›å¤æ‚çš„å¯¹è±¡ï¼Œå®ƒä»¬æ‹¥æœ‰å¤šä¸ªç»„æˆéƒ¨åˆ†ï¼Œå¦‚æ±½è½¦ï¼Œå®ƒåŒ…æ‹¬è½¦è½®ã€æ–¹å‘ç›˜ã€å‘åŠ¨æœºç­‰å„ç§éƒ¨ä»¶ã€‚è€Œå¯¹äºå¤§å¤šæ•°ç”¨æˆ·è€Œè¨€ï¼Œæ— é¡»çŸ¥é“è¿™äº›éƒ¨ä»¶çš„è£…é…ç»†èŠ‚ï¼Œä¹Ÿå‡ ä¹ä¸ä¼šä½¿ç”¨å•ç‹¬æŸä¸ªéƒ¨ä»¶ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€è¾†å®Œæ•´çš„æ±½è½¦ï¼Œå¯ä»¥é€šè¿‡å»ºé€ è€…æ¨¡å¼å¯¹å…¶è¿›è¡Œè®¾è®¡ä¸æè¿°ï¼Œå»ºé€ è€…æ¨¡å¼å¯ä»¥å°†éƒ¨ä»¶å’Œå…¶ç»„è£…è¿‡ç¨‹åˆ†å¼€ï¼Œä¸€æ­¥ä¸€æ­¥åˆ›å»ºä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ã€‚ç”¨æˆ·åªéœ€è¦æŒ‡å®šå¤æ‚å¯¹è±¡çš„ç±»å‹å°±å¯ä»¥å¾—åˆ°è¯¥å¯¹è±¡ï¼Œè€Œæ— é¡»çŸ¥é“å…¶å†…éƒ¨çš„å…·ä½“æ„é€ ç»†èŠ‚ã€‚</p><p>åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œä¹Ÿå­˜åœ¨å¤§é‡ç±»ä¼¼æ±½è½¦ä¸€æ ·çš„å¤æ‚å¯¹è±¡ï¼Œå®ƒä»¬æ‹¥æœ‰ä¸€ç³»åˆ—æˆå‘˜å±æ€§ï¼Œè¿™äº›æˆå‘˜å±æ€§ä¸­æœ‰äº›æ˜¯å¼•ç”¨ç±»å‹çš„æˆå‘˜å¯¹è±¡ã€‚è€Œä¸”åœ¨è¿™äº›å¤æ‚å¯¹è±¡ä¸­ï¼Œè¿˜å¯èƒ½å­˜åœ¨ä¸€äº›é™åˆ¶æ¡ä»¶ï¼Œå¦‚æŸäº›å±æ€§æ²¡æœ‰èµ‹å€¼åˆ™å¤æ‚å¯¹è±¡ä¸èƒ½ä½œä¸ºä¸€ä¸ªå®Œæ•´çš„äº§å“ä½¿ç”¨ï¼›æœ‰äº›å±æ€§çš„èµ‹å€¼å¿…é¡»æŒ‰ç…§æŸä¸ªé¡ºåºï¼Œä¸€ä¸ªå±æ€§æ²¡æœ‰èµ‹å€¼ä¹‹å‰ï¼Œå¦ä¸€ä¸ªå±æ€§å¯èƒ½æ— æ³•èµ‹å€¼ç­‰ã€‚</p><p>å¤æ‚å¯¹è±¡ç›¸å½“äºä¸€è¾†æœ‰å¾…å»ºé€ çš„æ±½è½¦ï¼Œè€Œå¯¹è±¡çš„å±æ€§ç›¸å½“äºæ±½è½¦çš„éƒ¨ä»¶ï¼Œå»ºé€ äº§å“çš„è¿‡ç¨‹å°±ç›¸å½“äºç»„åˆéƒ¨ä»¶çš„è¿‡ç¨‹ã€‚ç”±äºç»„åˆéƒ¨ä»¶çš„è¿‡ç¨‹å¾ˆå¤æ‚ï¼Œå› æ­¤ï¼Œè¿™äº›éƒ¨ä»¶çš„ç»„åˆè¿‡ç¨‹å¾€å¾€è¢«â€œå¤–éƒ¨åŒ–â€åˆ°ä¸€ä¸ªç§°ä½œå»ºé€ è€…çš„å¯¹è±¡é‡Œï¼Œå»ºé€ è€…è¿”è¿˜ç»™å®¢æˆ·ç«¯çš„æ˜¯ä¸€ä¸ªå·²ç»å»ºé€ å®Œæ¯•çš„å®Œæ•´äº§å“å¯¹è±¡ï¼Œè€Œç”¨æˆ·æ— é¡»å…³å¿ƒè¯¥å¯¹è±¡æ‰€åŒ…å«çš„å±æ€§ä»¥åŠå®ƒä»¬çš„ç»„è£…æ–¹å¼ï¼Œè¿™å°±æ˜¯å»ºé€ è€…æ¨¡å¼çš„æ¨¡å¼åŠ¨æœºã€‚</p><h2 id="äºŒã€æ¨¡å¼å®šä¹‰"><a href="#äºŒã€æ¨¡å¼å®šä¹‰" class="headerlink" title="äºŒã€æ¨¡å¼å®šä¹‰"></a>äºŒã€æ¨¡å¼å®šä¹‰</h2><blockquote><p>é€ è€…æ¨¡å¼(<code>Builder Pattern</code>)ï¼šå°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚å»ºé€ è€…æ¨¡å¼å±äº<strong>å¯¹è±¡åˆ›å»ºå‹æ¨¡å¼</strong>ã€‚å»ºé€ è€…æ¨¡å¼åˆå¯ä»¥ç§°ä¸º<strong>ç”Ÿæˆå™¨æ¨¡å¼</strong>ã€‚</p></blockquote><p>å»ºé€ è€…æ¨¡å¼æ˜¯ä¸€æ­¥ä¸€æ­¥åˆ›å»ºä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ï¼Œå®ƒå…è®¸ç”¨æˆ·åªé€šè¿‡æŒ‡å®šå¤æ‚å¯¹è±¡çš„ç±»å‹å’Œå†…å®¹å°±å¯ä»¥æ„å»ºå®ƒä»¬ï¼Œç”¨æˆ·ä¸éœ€è¦çŸ¥é“å†…éƒ¨çš„å…·ä½“æ„å»ºç»†èŠ‚ã€‚</p><h2 id="ä¸‰ã€æ¨¡å¼ç»“æ„"><a href="#ä¸‰ã€æ¨¡å¼ç»“æ„" class="headerlink" title="ä¸‰ã€æ¨¡å¼ç»“æ„"></a>ä¸‰ã€æ¨¡å¼ç»“æ„</h2><h3 id="1-è§’è‰²ç»„æˆ"><a href="#1-è§’è‰²ç»„æˆ" class="headerlink" title="1. è§’è‰²ç»„æˆ"></a>1. è§’è‰²ç»„æˆ</h3><p>å»ºé€ è€…æ¨¡å¼åŒ…å«å¦‚ä¸‹è§’è‰²ï¼š</p><ul><li><code>Builder</code>ï¼šæŠ½è±¡å»ºé€ è€…</li><li><code>ConcreteBuilder</code>ï¼šå…·ä½“å»ºé€ è€…</li><li><code>Director</code>ï¼šå¯¼æ¼”è€…</li><li><code>Product</code>ï¼šäº§å“è§’è‰²</li></ul><h3 id="2-ç»“æ„å›¾"><a href="#2-ç»“æ„å›¾" class="headerlink" title="2. ç»“æ„å›¾"></a>2. ç»“æ„å›¾</h3><p><img src="https://statics.sh1a.qingstor.com/2018/10/20/builder-structure.jpg" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/10/20/builder-structure.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å»ºé€ è€…æ¨¡å¼ç»“æ„å›¾"></p><h2 id="å››ã€ç¤ºä¾‹ä»£ç "><a href="#å››ã€ç¤ºä¾‹ä»£ç " class="headerlink" title="å››ã€ç¤ºä¾‹ä»£ç "></a>å››ã€ç¤ºä¾‹ä»£ç </h2><p>é¦–å…ˆï¼Œæ˜¯äº§å“ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * äº§å“ç±». * * Created by blinkfox on 2016/10/8. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Product</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> part1<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> part2<span class="token punctuation">;</span>    <span class="token comment">/* getter å’Œ setteræ–¹æ³•. */</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getPart1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> part1<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPart1</span><span class="token punctuation">(</span><span class="token class-name">String</span> part1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>part1 <span class="token operator">=</span> part1<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getPart2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> part2<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPart2</span><span class="token punctuation">(</span><span class="token class-name">String</span> part2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>part2 <span class="token operator">=</span> part2<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶å®ï¼Œæ˜¯æŠ½è±¡çš„å»ºé€ è€…<code>Builder</code>æ¥å£å’Œå…·ä½“çš„å»ºé€ è€…<code>ConcreteBuilder</code>ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * æŠ½è±¡çš„å»ºé€ è€…. * * Created by blinkfox on 2016/10/8. */</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Builder</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * äº§å“å»ºé€ éƒ¨åˆ†1.     */</span>    <span class="token keyword">void</span> <span class="token function">buildPart1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * äº§å“å»ºé€ éƒ¨åˆ†2.     */</span>    <span class="token keyword">void</span> <span class="token function">buildPart2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * å¾—åˆ°å»ºé€ çš„äº§å“.     *     * @return äº§å“     */</span>    <span class="token class-name">Product</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å…·ä½“çš„å»ºé€ è€…å®ç°ç±». * * Created by blinkfox on 2016/10/8. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteBuilder</span> <span class="token keyword">implements</span> <span class="token class-name">Builder</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/** äº§å“. */</span>    <span class="token keyword">private</span> <span class="token class-name">Product</span> product <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Product</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * äº§å“å»ºé€ éƒ¨åˆ†1.     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildPart1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        product<span class="token punctuation">.</span><span class="token function">setPart1</span><span class="token punctuation">(</span><span class="token string">"ç¼–å·ï¼š95757"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * äº§å“å»ºé€ éƒ¨åˆ†2.     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildPart2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        product<span class="token punctuation">.</span><span class="token function">setPart2</span><span class="token punctuation">(</span><span class="token string">"åç§°ï¼šå°æœºå™¨äºº"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * å¾—åˆ°å»ºé€ çš„äº§å“.     *     * @return äº§å“     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Product</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> product<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åï¼Œå¯¼æ¼”è€…<code>Director</code>ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å¯¼æ¼”è€…ç±». * * Created by blinkfox on 2016/10/8. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Director</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/** å½“å‰éœ€è¦çš„å»ºé€ è€…å¯¹è±¡. */</span>    <span class="token keyword">private</span> <span class="token class-name">Builder</span> builder<span class="token punctuation">;</span>    <span class="token comment">/**     * æ„é€ æ–¹æ³•.     *     * @param builder     */</span>    <span class="token keyword">public</span> <span class="token class-name">Director</span><span class="token punctuation">(</span><span class="token class-name">Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>builder <span class="token operator">=</span> builder<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * äº§å“æ„é€ æ–¹æ³•ï¼Œè´Ÿè´£è°ƒç”¨å„ä¸ªé›¶ä»¶å»ºé€ æ–¹æ³•.     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        builder<span class="token punctuation">.</span><span class="token function">buildPart1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        builder<span class="token punctuation">.</span><span class="token function">buildPart2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»¥ä¸‹æ˜¯å»ºé€ è€…æ¨¡å¼çš„å®¢æˆ·ç«¯åœºæ™¯ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å»ºé€ è€…æ¨¡å¼çš„å®¢æˆ·ç«¯åœºæ™¯ç±». * * Created by blinkfox on 2016/10/8. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BuilderClient</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * ä¸»å…¥å£æ–¹æ³•.     *     * @param args æ•°ç»„å‚æ•°     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Builder</span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Director</span> director <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Director</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span><span class="token punctuation">;</span>        director<span class="token punctuation">.</span><span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Product</span> product <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>product<span class="token punctuation">.</span><span class="token function">getPart1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>product<span class="token punctuation">.</span><span class="token function">getPart2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="äº”ã€æ¨¡å¼åˆ†æ"><a href="#äº”ã€æ¨¡å¼åˆ†æ" class="headerlink" title="äº”ã€æ¨¡å¼åˆ†æ"></a>äº”ã€æ¨¡å¼åˆ†æ</h2><p>æŠ½è±¡å»ºé€ è€…ç±»ä¸­å®šä¹‰äº†äº§å“çš„åˆ›å»ºæ–¹æ³•å’Œè¿”å›æ–¹æ³•;</p><p>å»ºé€ è€…æ¨¡å¼çš„ç»“æ„ä¸­è¿˜å¼•å…¥äº†ä¸€ä¸ªå¯¼æ¼”è€…ç±»<code>Director</code>ï¼Œè¯¥ç±»çš„ä½œç”¨ä¸»è¦æœ‰ä¸¤ä¸ªï¼šä¸€æ–¹é¢å®ƒéš”ç¦»äº†å®¢æˆ·ä¸ç”Ÿäº§è¿‡ç¨‹ï¼›å¦ä¸€æ–¹é¢å®ƒè´Ÿè´£æ§åˆ¶äº§å“çš„ç”Ÿæˆè¿‡ç¨‹ã€‚å¯¼æ¼”è€…é’ˆå¯¹æŠ½è±¡å»ºé€ è€…ç¼–ç¨‹ï¼Œå®¢æˆ·ç«¯åªéœ€è¦çŸ¥é“å…·ä½“å»ºé€ è€…çš„ç±»å‹ï¼Œå³å¯é€šè¿‡å¯¼æ¼”è€…ç±»è°ƒç”¨å»ºé€ è€…çš„ç›¸å…³æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªå®Œæ•´çš„äº§å“å¯¹è±¡</p><p>åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­ï¼Œæ— é¡»å…³å¿ƒäº§å“å¯¹è±¡çš„å…·ä½“ç»„è£…è¿‡ç¨‹ï¼Œåªéœ€ç¡®å®šå…·ä½“å»ºé€ è€…çš„ç±»å‹å³å¯ï¼Œå»ºé€ è€…æ¨¡å¼å°†å¤æ‚å¯¹è±¡çš„æ„å»ºä¸å¯¹è±¡çš„è¡¨ç°åˆ†ç¦»å¼€æ¥ï¼Œè¿™æ ·ä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºå‡ºä¸åŒçš„è¡¨ç°ã€‚</p><h3 id="1-ä¼˜ç‚¹"><a href="#1-ä¼˜ç‚¹" class="headerlink" title="1. ä¼˜ç‚¹"></a>1. ä¼˜ç‚¹</h3><p>å»ºé€ è€…æ¨¡å¼çš„ä¼˜ç‚¹ï¼š</p><ul><li>åœ¨å»ºé€ è€…æ¨¡å¼ä¸­ï¼Œ å®¢æˆ·ç«¯ä¸å¿…çŸ¥é“äº§å“å†…éƒ¨ç»„æˆçš„ç»†èŠ‚ï¼Œå°†äº§å“æœ¬èº«ä¸äº§å“çš„åˆ›å»ºè¿‡ç¨‹è§£è€¦ï¼Œä½¿å¾—ç›¸åŒçš„åˆ›å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„äº§å“å¯¹è±¡ã€‚</li><li>æ¯ä¸€ä¸ªå…·ä½“å»ºé€ è€…éƒ½ç›¸å¯¹ç‹¬ç«‹ï¼Œè€Œä¸å…¶ä»–çš„å…·ä½“å»ºé€ è€…æ— å…³ï¼Œå› æ­¤å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ›¿æ¢å…·ä½“å»ºé€ è€…æˆ–å¢åŠ æ–°çš„å…·ä½“å»ºé€ è€…ï¼Œ ç”¨æˆ·ä½¿ç”¨ä¸åŒçš„å…·ä½“å»ºé€ è€…å³å¯å¾—åˆ°ä¸åŒçš„äº§å“å¯¹è±¡ ã€‚</li><li>å¯ä»¥æ›´åŠ ç²¾ç»†åœ°æ§åˆ¶äº§å“çš„åˆ›å»ºè¿‡ç¨‹ ã€‚å°†å¤æ‚äº§å“çš„åˆ›å»ºæ­¥éª¤åˆ†è§£åœ¨ä¸åŒçš„æ–¹æ³•ä¸­ï¼Œä½¿å¾—åˆ›å»ºè¿‡ç¨‹æ›´åŠ æ¸…æ™°ï¼Œä¹Ÿæ›´æ–¹ä¾¿ä½¿ç”¨ç¨‹åºæ¥æ§åˆ¶åˆ›å»ºè¿‡ç¨‹ã€‚</li><li>å¢åŠ æ–°çš„å…·ä½“å»ºé€ è€…æ— é¡»ä¿®æ”¹åŸæœ‰ç±»åº“çš„ä»£ç ï¼ŒæŒ‡æŒ¥è€…ç±»é’ˆå¯¹æŠ½è±¡å»ºé€ è€…ç±»ç¼–ç¨‹ï¼Œç³»ç»Ÿæ‰©å±•æ–¹ä¾¿ï¼Œç¬¦åˆâ€œå¼€é—­åŸåˆ™â€ã€‚</li></ul><h3 id="2-ç¼ºç‚¹"><a href="#2-ç¼ºç‚¹" class="headerlink" title="2. ç¼ºç‚¹"></a>2. ç¼ºç‚¹</h3><p>å»ºé€ è€…æ¨¡å¼çš„ç¼ºç‚¹ï¼š</p><ul><li>å»ºé€ è€…æ¨¡å¼æ‰€åˆ›å»ºçš„äº§å“ä¸€èˆ¬å…·æœ‰è¾ƒå¤šçš„å…±åŒç‚¹ï¼Œå…¶ç»„æˆéƒ¨åˆ†ç›¸ä¼¼ï¼Œå¦‚æœäº§å“ä¹‹é—´çš„å·®å¼‚æ€§å¾ˆå¤§ï¼Œåˆ™ä¸é€‚åˆä½¿ç”¨å»ºé€ è€…æ¨¡å¼ï¼Œå› æ­¤å…¶ä½¿ç”¨èŒƒå›´å—åˆ°ä¸€å®šçš„é™åˆ¶ã€‚</li><li>å¦‚æœäº§å“çš„å†…éƒ¨å˜åŒ–å¤æ‚ï¼Œå¯èƒ½ä¼šå¯¼è‡´éœ€è¦å®šä¹‰å¾ˆå¤šå…·ä½“å»ºé€ è€…ç±»æ¥å®ç°è¿™ç§å˜åŒ–ï¼Œå¯¼è‡´ç³»ç»Ÿå˜å¾—å¾ˆåºå¤§ã€‚</li></ul><h3 id="3-é€‚ç”¨ç¯å¢ƒ"><a href="#3-é€‚ç”¨ç¯å¢ƒ" class="headerlink" title="3. é€‚ç”¨ç¯å¢ƒ"></a>3. é€‚ç”¨ç¯å¢ƒ</h3><p>åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨å»ºé€ è€…æ¨¡å¼ï¼š</p><ul><li>éœ€è¦ç”Ÿæˆçš„äº§å“å¯¹è±¡æœ‰å¤æ‚çš„å†…éƒ¨ç»“æ„ï¼Œè¿™äº›äº§å“å¯¹è±¡é€šå¸¸åŒ…å«å¤šä¸ªæˆå‘˜å±æ€§ã€‚</li><li>éœ€è¦ç”Ÿæˆçš„äº§å“å¯¹è±¡çš„å±æ€§ç›¸äº’ä¾èµ–ï¼Œéœ€è¦æŒ‡å®šå…¶ç”Ÿæˆé¡ºåºã€‚</li><li>å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ç‹¬ç«‹äºåˆ›å»ºè¯¥å¯¹è±¡çš„ç±»ã€‚åœ¨å»ºé€ è€…æ¨¡å¼ä¸­å¼•å…¥äº†æŒ‡æŒ¥è€…ç±»ï¼Œå°†åˆ›å»ºè¿‡ç¨‹å°è£…åœ¨æŒ‡æŒ¥è€…ç±»ä¸­ï¼Œè€Œä¸åœ¨å»ºé€ è€…ç±»ä¸­ã€‚</li><li>éš”ç¦»å¤æ‚å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨ï¼Œå¹¶ä½¿å¾—ç›¸åŒçš„åˆ›å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„äº§å“ã€‚</li></ul><h3 id="4-å»ºé€ è€…æ¨¡å¼ä¸æŠ½è±¡å·¥å‚æ¨¡å¼çš„æ¯”è¾ƒ"><a href="#4-å»ºé€ è€…æ¨¡å¼ä¸æŠ½è±¡å·¥å‚æ¨¡å¼çš„æ¯”è¾ƒ" class="headerlink" title="4. å»ºé€ è€…æ¨¡å¼ä¸æŠ½è±¡å·¥å‚æ¨¡å¼çš„æ¯”è¾ƒ"></a>4. å»ºé€ è€…æ¨¡å¼ä¸æŠ½è±¡å·¥å‚æ¨¡å¼çš„æ¯”è¾ƒ</h3><ul><li>ä¸æŠ½è±¡å·¥å‚æ¨¡å¼ç›¸æ¯”ï¼Œå»ºé€ è€…æ¨¡å¼è¿”å›ä¸€ä¸ªç»„è£…å¥½çš„å®Œæ•´äº§å“ï¼Œè€ŒæŠ½è±¡å·¥å‚æ¨¡å¼è¿”å›ä¸€ç³»åˆ—ç›¸å…³çš„äº§å“ï¼Œè¿™äº›äº§å“ä½äºä¸åŒçš„äº§å“ç­‰çº§ç»“æ„ï¼Œæ„æˆäº†ä¸€ä¸ªäº§å“æ—ã€‚</li><li>åœ¨æŠ½è±¡å·¥å‚æ¨¡å¼ä¸­ï¼Œå®¢æˆ·ç«¯å®ä¾‹åŒ–å·¥å‚ç±»ï¼Œç„¶åè°ƒç”¨å·¥å‚æ–¹æ³•è·å–æ‰€éœ€äº§å“å¯¹è±¡ï¼Œè€Œåœ¨å»ºé€ è€…æ¨¡å¼ä¸­ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä¸ç›´æ¥è°ƒç”¨å»ºé€ è€…çš„ç›¸å…³æ–¹æ³•ï¼Œè€Œæ˜¯é€šè¿‡æŒ‡æŒ¥è€…ç±»æ¥æŒ‡å¯¼å¦‚ä½•ç”Ÿæˆå¯¹è±¡ï¼ŒåŒ…æ‹¬å¯¹è±¡çš„ç»„è£…è¿‡ç¨‹å’Œå»ºé€ æ­¥éª¤ï¼Œå®ƒä¾§é‡äºä¸€æ­¥æ­¥æ„é€ ä¸€ä¸ªå¤æ‚å¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ªå®Œæ•´çš„å¯¹è±¡ã€‚</li><li>å¦‚æœå°†æŠ½è±¡å·¥å‚æ¨¡å¼çœ‹æˆæ±½è½¦é…ä»¶ç”Ÿäº§å·¥å‚ï¼Œç”Ÿäº§ä¸€ä¸ªäº§å“æ—çš„äº§å“ï¼Œé‚£ä¹ˆå»ºé€ è€…æ¨¡å¼å°±æ˜¯ä¸€ä¸ªæ±½è½¦ç»„è£…å·¥å‚ï¼Œé€šè¿‡å¯¹éƒ¨ä»¶çš„ç»„è£…å¯ä»¥è¿”å›ä¸€è¾†å®Œæ•´çš„æ±½è½¦ã€‚</li></ul><h2 id="å…­ã€æ¨¡å¼æ€»ç»“"><a href="#å…­ã€æ¨¡å¼æ€»ç»“" class="headerlink" title="å…­ã€æ¨¡å¼æ€»ç»“"></a>å…­ã€æ¨¡å¼æ€»ç»“</h2><ul><li>å»ºé€ è€…æ¨¡å¼å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚å»ºé€ è€…æ¨¡å¼æ˜¯ä¸€æ­¥ä¸€æ­¥åˆ›å»ºä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ï¼Œå®ƒå…è®¸ç”¨æˆ·åªé€šè¿‡æŒ‡å®šå¤æ‚å¯¹è±¡çš„ç±»å‹å’Œå†…å®¹å°±å¯ä»¥æ„å»ºå®ƒä»¬ï¼Œç”¨æˆ·ä¸éœ€è¦çŸ¥é“å†…éƒ¨çš„å…·ä½“æ„å»ºç»†èŠ‚ã€‚å»ºé€ è€…æ¨¡å¼å±äºå¯¹è±¡åˆ›å»ºå‹æ¨¡å¼ã€‚</li><li>å»ºé€ è€…æ¨¡å¼åŒ…å«å¦‚ä¸‹å››ä¸ªè§’è‰²ï¼šæŠ½è±¡å»ºé€ è€…ä¸ºåˆ›å»ºä¸€ä¸ªäº§å“å¯¹è±¡çš„å„ä¸ªéƒ¨ä»¶æŒ‡å®šæŠ½è±¡æ¥å£ï¼›å…·ä½“å»ºé€ è€…å®ç°äº†æŠ½è±¡å»ºé€ è€…æ¥å£ï¼Œå®ç°å„ä¸ªéƒ¨ä»¶çš„æ„é€ å’Œè£…é…æ–¹æ³•ï¼Œå®šä¹‰å¹¶æ˜ç¡®å®ƒæ‰€åˆ›å»ºçš„å¤æ‚å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æä¾›ä¸€ä¸ªæ–¹æ³•è¿”å›åˆ›å»ºå¥½çš„å¤æ‚äº§å“å¯¹è±¡ï¼›äº§å“è§’è‰²æ˜¯è¢«æ„å»ºçš„å¤æ‚å¯¹è±¡ï¼ŒåŒ…å«å¤šä¸ªç»„æˆéƒ¨ä»¶ï¼›æŒ‡æŒ¥è€…è´Ÿè´£å®‰æ’å¤æ‚å¯¹è±¡çš„å»ºé€ æ¬¡åºï¼ŒæŒ‡æŒ¥è€…ä¸æŠ½è±¡å»ºé€ è€…ä¹‹é—´å­˜åœ¨å…³è”å…³ç³»ï¼Œå¯ä»¥åœ¨å…¶<code>construct()</code>å»ºé€ æ–¹æ³•ä¸­è°ƒç”¨å»ºé€ è€…å¯¹è±¡çš„éƒ¨ä»¶æ„é€ ä¸è£…é…æ–¹æ³•ï¼Œå®Œæˆå¤æ‚å¯¹è±¡çš„å»ºé€ </li><li>åœ¨å»ºé€ è€…æ¨¡å¼çš„ç»“æ„ä¸­å¼•å…¥äº†ä¸€ä¸ªå¯¼æ¼”è€…ç±»ï¼Œè¯¥ç±»çš„ä½œç”¨ä¸»è¦æœ‰ä¸¤ä¸ªï¼šä¸€æ–¹é¢å®ƒéš”ç¦»äº†å®¢æˆ·ä¸ç”Ÿäº§è¿‡ç¨‹ï¼›å¦ä¸€æ–¹é¢å®ƒè´Ÿè´£æ§åˆ¶äº§å“çš„ç”Ÿæˆè¿‡ç¨‹ã€‚æŒ‡æŒ¥è€…é’ˆå¯¹æŠ½è±¡å»ºé€ è€…ç¼–ç¨‹ï¼Œå®¢æˆ·ç«¯åªéœ€è¦çŸ¥é“å…·ä½“å»ºé€ è€…çš„ç±»å‹ï¼Œå³å¯é€šè¿‡æŒ‡æŒ¥è€…ç±»è°ƒç”¨å»ºé€ è€…çš„ç›¸å…³æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªå®Œæ•´çš„äº§å“å¯¹è±¡ã€‚</li><li>å»ºé€ è€…æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹åœ¨äºå®¢æˆ·ç«¯ä¸å¿…çŸ¥é“äº§å“å†…éƒ¨ç»„æˆçš„ç»†èŠ‚ï¼Œå°†äº§å“æœ¬èº«ä¸äº§å“çš„åˆ›å»ºè¿‡ç¨‹è§£è€¦ï¼Œä½¿å¾—ç›¸åŒçš„åˆ›å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„äº§å“å¯¹è±¡ï¼Œæ¯ä¸€ä¸ªå…·ä½“å»ºé€ è€…éƒ½ç›¸å¯¹ç‹¬ç«‹ï¼Œè€Œä¸å…¶ä»–çš„å…·ä½“å»ºé€ è€…æ— å…³ï¼Œå› æ­¤å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ›¿æ¢å…·ä½“å»ºé€ è€…æˆ–å¢åŠ æ–°çš„å…·ä½“å»ºé€ è€…ï¼Œç¬¦åˆâ€œå¼€é—­åŸåˆ™â€ï¼Œè¿˜å¯ä»¥æ›´åŠ ç²¾ç»†åœ°æ§åˆ¶äº§å“çš„åˆ›å»ºè¿‡ç¨‹ï¼›å…¶ä¸»è¦ç¼ºç‚¹åœ¨äºç”±äºå»ºé€ è€…æ¨¡å¼æ‰€åˆ›å»ºçš„äº§å“ä¸€èˆ¬å…·æœ‰è¾ƒå¤šçš„å…±åŒç‚¹ï¼Œå…¶ç»„æˆéƒ¨åˆ†ç›¸ä¼¼ï¼Œå› æ­¤å…¶ä½¿ç”¨èŒƒå›´å—åˆ°ä¸€å®šçš„é™åˆ¶ï¼Œå¦‚æœäº§å“çš„å†…éƒ¨å˜åŒ–å¤æ‚ï¼Œå¯èƒ½ä¼šå¯¼è‡´éœ€è¦å®šä¹‰å¾ˆå¤šå…·ä½“å»ºé€ è€…ç±»æ¥å®ç°è¿™ç§å˜åŒ–ï¼Œå¯¼è‡´ç³»ç»Ÿå˜å¾—å¾ˆåºå¤§ã€‚</li><li>å»ºé€ è€…æ¨¡å¼é€‚ç”¨æƒ…å†µåŒ…æ‹¬ï¼šéœ€è¦ç”Ÿæˆçš„äº§å“å¯¹è±¡æœ‰å¤æ‚çš„å†…éƒ¨ç»“æ„ï¼Œè¿™äº›äº§å“å¯¹è±¡é€šå¸¸åŒ…å«å¤šä¸ªæˆå‘˜å±æ€§ï¼›éœ€è¦ç”Ÿæˆçš„äº§å“å¯¹è±¡çš„å±æ€§ç›¸äº’ä¾èµ–ï¼Œéœ€è¦æŒ‡å®šå…¶ç”Ÿæˆé¡ºåºï¼›å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ç‹¬ç«‹äºåˆ›å»ºè¯¥å¯¹è±¡çš„ç±»ï¼›éš”ç¦»å¤æ‚å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨ï¼Œå¹¶ä½¿å¾—ç›¸åŒçš„åˆ›å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒç±»å‹çš„äº§å“ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶è®¾è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaé¢å‘å¯¹è±¡è®¾è®¡ä¹‹å¤–è§‚æ¨¡å¼</title>
      <link href="/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-wai-guan-mo-shi/"/>
      <url>/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-wai-guan-mo-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€æ¨¡å¼å®šä¹‰"><a href="#ä¸€ã€æ¨¡å¼å®šä¹‰" class="headerlink" title="ä¸€ã€æ¨¡å¼å®šä¹‰"></a>ä¸€ã€æ¨¡å¼å®šä¹‰</h2><blockquote><p><strong>å¤–è§‚æ¨¡å¼</strong>(<code>Facade Pattern</code>)ï¼šå¤–éƒ¨ä¸ä¸€ä¸ªå­ç³»ç»Ÿçš„é€šä¿¡å¿…é¡»é€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„å¤–è§‚å¯¹è±¡è¿›è¡Œï¼Œä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„ç•Œé¢ï¼Œå¤–è§‚æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä½¿å¾—è¿™ä¸€å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨ã€‚å¤–è§‚æ¨¡å¼åˆç§°ä¸º<strong>é—¨é¢æ¨¡å¼</strong>ï¼Œå®ƒæ˜¯ä¸€ç§å¯¹è±¡ç»“æ„å‹æ¨¡å¼ã€‚</p></blockquote><h2 id="äºŒã€æ¨¡å¼ç»“æ„"><a href="#äºŒã€æ¨¡å¼ç»“æ„" class="headerlink" title="äºŒã€æ¨¡å¼ç»“æ„"></a>äºŒã€æ¨¡å¼ç»“æ„</h2><h3 id="1-è§’è‰²ç»„æˆ"><a href="#1-è§’è‰²ç»„æˆ" class="headerlink" title="1. è§’è‰²ç»„æˆ"></a>1. è§’è‰²ç»„æˆ</h3><p>å¤–è§‚æ¨¡å¼åŒ…å«å¦‚ä¸‹è§’è‰²ï¼š</p><ul><li><code>Facade</code>: å¤–è§‚è§’è‰²</li><li><code>SubSystem</code>: å­ç³»ç»Ÿè§’è‰²</li></ul><h3 id="2-ç»“æ„å›¾"><a href="#2-ç»“æ„å›¾" class="headerlink" title="2. ç»“æ„å›¾"></a>2. ç»“æ„å›¾</h3><p><img src="https://statics.sh1a.qingstor.com/2018/10/18/facade-structure.jpg" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/10/18/facade-structure.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å‘½ä»¤æ¨¡å¼ç»“æ„å›¾"></p><h2 id="ä¸‰ã€ç¤ºä¾‹ä»£ç "><a href="#ä¸‰ã€ç¤ºä¾‹ä»£ç " class="headerlink" title="ä¸‰ã€ç¤ºä¾‹ä»£ç "></a>ä¸‰ã€ç¤ºä¾‹ä»£ç </h2><p>é¦–å…ˆï¼Œæ˜¯å„ä¸ªå­ç³»ç»Ÿè§’è‰²ç±»ï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å­ç³»ç»Ÿç±»A. * * Created by blinkfox on 16/8/25. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassA</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomethingA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"----ä¸šåŠ¡æ–¹æ³•A..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å­ç³»ç»Ÿç±»B. * * Created by blinkfox on 16/8/25. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassB</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomethingB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"----ä¸šåŠ¡æ–¹æ³•B..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å­ç³»ç»Ÿç±»C. * * Created by blinkfox on 16/8/25. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassC</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomethingC</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"----ä¸šåŠ¡æ–¹æ³•C..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»¥ä¸‹æ˜¯å¤–è§‚æ¨¡å¼çš„å¤–è§‚ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å¤–è§‚é—¨é¢ç±». * * Created by blinkfox on 16/8/25. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Facade</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">ClassA</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">ClassB</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">ClassC</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ä»¥ä¸‹æ˜¯æä¾›ç»™å¤–éƒ¨è®¿é—®çš„æ–¹æ³•.</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">methodA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">.</span><span class="token function">doSomethingA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">methodB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>b<span class="token punctuation">.</span><span class="token function">doSomethingB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">methodC</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>c<span class="token punctuation">.</span><span class="token function">doSomethingC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å››ã€æ¨¡å¼åˆ†æ"><a href="#å››ã€æ¨¡å¼åˆ†æ" class="headerlink" title="å››ã€æ¨¡å¼åˆ†æ"></a>å››ã€æ¨¡å¼åˆ†æ</h2><p>æ ¹æ®â€œå•ä¸€èŒè´£åŸåˆ™â€ï¼Œåœ¨è½¯ä»¶ä¸­å°†ä¸€ä¸ªç³»ç»Ÿåˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªå­ç³»ç»Ÿæœ‰åˆ©äºé™ä½æ•´ä¸ªç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œä¸€ä¸ªå¸¸è§çš„è®¾è®¡ç›®æ ‡æ˜¯ä½¿å­ç³»ç»Ÿé—´çš„é€šä¿¡å’Œç›¸äº’ä¾èµ–å…³ç³»è¾¾åˆ°æœ€å°ï¼Œè€Œè¾¾åˆ°è¯¥ç›®æ ‡çš„é€”å¾„ä¹‹ä¸€å°±æ˜¯å¼•å…¥ä¸€ä¸ªå¤–è§‚å¯¹è±¡ï¼Œå®ƒä¸ºå­ç³»ç»Ÿçš„è®¿é—®æä¾›äº†ä¸€ä¸ªç®€å•è€Œå•ä¸€çš„å…¥å£ã€‚ å¤–è§‚æ¨¡å¼ä¹Ÿæ˜¯â€œ<strong>è¿ªç±³ç‰¹æ³•åˆ™</strong>â€çš„ä½“ç°ï¼Œé€šè¿‡å¼•å…¥ä¸€ä¸ªæ–°çš„å¤–è§‚ç±»å¯ä»¥é™ä½åŸæœ‰ç³»ç»Ÿçš„å¤æ‚åº¦ï¼ŒåŒæ—¶é™ä½å®¢æˆ·ç±»ä¸å­ç³»ç»Ÿç±»çš„è€¦åˆåº¦ã€‚</p><ul><li>å¤–è§‚æ¨¡å¼è¦æ±‚ä¸€ä¸ªå­ç³»ç»Ÿçš„å¤–éƒ¨ä¸å…¶å†…éƒ¨çš„é€šä¿¡é€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„å¤–è§‚å¯¹è±¡è¿›è¡Œï¼Œå¤–è§‚ç±»å°†å®¢æˆ·ç«¯ä¸å­ç³»ç»Ÿçš„å†…éƒ¨å¤æ‚æ€§åˆ†éš”å¼€ï¼Œä½¿å¾—å®¢æˆ·ç«¯åªéœ€è¦ä¸å¤–è§‚å¯¹è±¡æ‰“äº¤é“ï¼Œè€Œä¸éœ€è¦ä¸å­ç³»ç»Ÿå†…éƒ¨çš„å¾ˆå¤šå¯¹è±¡æ‰“äº¤é“ã€‚</li><li>å¤–è§‚æ¨¡å¼çš„ç›®çš„åœ¨äºé™ä½ç³»ç»Ÿçš„å¤æ‚ç¨‹åº¦ã€‚</li><li>å¤–è§‚æ¨¡å¼ä»å¾ˆå¤§ç¨‹åº¦ä¸Šæé«˜äº†å®¢æˆ·ç«¯ä½¿ç”¨çš„ä¾¿æ·æ€§ï¼Œä½¿å¾—å®¢æˆ·ç«¯æ— é¡»å…³å¿ƒå­ç³»ç»Ÿçš„å·¥ä½œç»†èŠ‚ï¼Œé€šè¿‡å¤–è§‚è§’è‰²å³å¯è°ƒç”¨ç›¸å…³åŠŸèƒ½ã€‚</li></ul><h3 id="1-ä¼˜ç‚¹"><a href="#1-ä¼˜ç‚¹" class="headerlink" title="1. ä¼˜ç‚¹"></a>1. ä¼˜ç‚¹</h3><p>å¤–è§‚æ¨¡å¼çš„ä¼˜ç‚¹kï¼š</p><ul><li>å¯¹å®¢æˆ·å±è”½å­ç³»ç»Ÿç»„ä»¶ï¼Œå‡å°‘äº†å®¢æˆ·å¤„ç†çš„å¯¹è±¡æ•°ç›®å¹¶ä½¿å¾—å­ç³»ç»Ÿä½¿ç”¨èµ·æ¥æ›´åŠ å®¹æ˜“ã€‚é€šè¿‡å¼•å…¥å¤–è§‚æ¨¡å¼ï¼Œå®¢æˆ·ä»£ç å°†å˜å¾—å¾ˆç®€å•ï¼Œä¸ä¹‹å…³è”çš„å¯¹è±¡ä¹Ÿå¾ˆå°‘ã€‚</li><li>å®ç°äº†å­ç³»ç»Ÿä¸å®¢æˆ·ä¹‹é—´çš„æ¾è€¦åˆå…³ç³»ï¼Œè¿™ä½¿å¾—å­ç³»ç»Ÿçš„ç»„ä»¶å˜åŒ–ä¸ä¼šå½±å“åˆ°è°ƒç”¨å®ƒçš„å®¢æˆ·ç±»ï¼Œåªéœ€è¦è°ƒæ•´å¤–è§‚ç±»å³å¯ã€‚</li><li>é™ä½äº†å¤§å‹è½¯ä»¶ç³»ç»Ÿä¸­çš„ç¼–è¯‘ä¾èµ–æ€§ï¼Œå¹¶ç®€åŒ–äº†ç³»ç»Ÿåœ¨ä¸åŒå¹³å°ä¹‹é—´çš„ç§»æ¤è¿‡ç¨‹ï¼Œå› ä¸ºç¼–è¯‘ä¸€ä¸ªå­ç³»ç»Ÿä¸€èˆ¬ä¸éœ€è¦ç¼–è¯‘æ‰€æœ‰å…¶ä»–çš„å­ç³»ç»Ÿã€‚ä¸€ä¸ªå­ç³»ç»Ÿçš„ä¿®æ”¹å¯¹å…¶ä»–å­ç³»ç»Ÿæ²¡æœ‰ä»»ä½•å½±å“ï¼Œè€Œä¸”å­ç³»ç»Ÿå†…éƒ¨å˜åŒ–ä¹Ÿä¸ä¼šå½±å“åˆ°å¤–è§‚å¯¹è±¡ã€‚</li><li>åªæ˜¯æä¾›äº†ä¸€ä¸ªè®¿é—®å­ç³»ç»Ÿçš„ç»Ÿä¸€å…¥å£ï¼Œå¹¶ä¸å½±å“ç”¨æˆ·ç›´æ¥ä½¿ç”¨å­ç³»ç»Ÿç±»ã€‚</li></ul><h3 id="2-ç¼ºç‚¹"><a href="#2-ç¼ºç‚¹" class="headerlink" title="2. ç¼ºç‚¹"></a>2. ç¼ºç‚¹</h3><p>å¤–è§‚æ¨¡å¼çš„ç¼ºç‚¹ï¼š</p><ul><li>ä¸èƒ½å¾ˆå¥½åœ°é™åˆ¶å®¢æˆ·ä½¿ç”¨å­ç³»ç»Ÿç±»ï¼Œå¦‚æœå¯¹å®¢æˆ·è®¿é—®å­ç³»ç»Ÿç±»åšå¤ªå¤šçš„é™åˆ¶åˆ™å‡å°‘äº†å¯å˜æ€§å’Œçµæ´»æ€§ã€‚</li><li>åœ¨ä¸å¼•å…¥æŠ½è±¡å¤–è§‚ç±»çš„æƒ…å†µä¸‹ï¼Œå¢åŠ æ–°çš„å­ç³»ç»Ÿå¯èƒ½éœ€è¦ä¿®æ”¹å¤–è§‚ç±»æˆ–å®¢æˆ·ç«¯çš„æºä»£ç ï¼Œè¿èƒŒäº†â€œ<strong>å¼€é—­åŸåˆ™</strong>â€ã€‚</li></ul><h3 id="3-é€‚ç”¨ç¯å¢ƒ"><a href="#3-é€‚ç”¨ç¯å¢ƒ" class="headerlink" title="3. é€‚ç”¨ç¯å¢ƒ"></a>3. é€‚ç”¨ç¯å¢ƒ</h3><p>åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨å¤–è§‚æ¨¡å¼ï¼š</p><ul><li>å½“è¦ä¸ºä¸€ä¸ªå¤æ‚å­ç³»ç»Ÿæä¾›ä¸€ä¸ªç®€å•æ¥å£æ—¶å¯ä»¥ä½¿ç”¨å¤–è§‚æ¨¡å¼ã€‚è¯¥æ¥å£å¯ä»¥æ»¡è¶³å¤§å¤šæ•°ç”¨æˆ·çš„éœ€æ±‚ï¼Œè€Œä¸”ç”¨æˆ·ä¹Ÿå¯ä»¥è¶Šè¿‡å¤–è§‚ç±»ç›´æ¥è®¿é—®å­ç³»ç»Ÿã€‚</li><li>å®¢æˆ·ç¨‹åºä¸å¤šä¸ªå­ç³»ç»Ÿä¹‹é—´å­˜åœ¨å¾ˆå¤§çš„ä¾èµ–æ€§ã€‚å¼•å…¥å¤–è§‚ç±»å°†å­ç³»ç»Ÿä¸å®¢æˆ·ä»¥åŠå…¶ä»–å­ç³»ç»Ÿè§£è€¦ï¼Œå¯ä»¥æé«˜å­ç³»ç»Ÿçš„ç‹¬ç«‹æ€§å’Œå¯ç§»æ¤æ€§ã€‚</li><li>åœ¨å±‚æ¬¡åŒ–ç»“æ„ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å¤–è§‚æ¨¡å¼å®šä¹‰ç³»ç»Ÿä¸­æ¯ä¸€å±‚çš„å…¥å£ï¼Œå±‚ä¸å±‚ä¹‹é—´ä¸ç›´æ¥äº§ç”Ÿè”ç³»ï¼Œè€Œé€šè¿‡å¤–è§‚ç±»å»ºç«‹è”ç³»ï¼Œé™ä½å±‚ä¹‹é—´çš„è€¦åˆåº¦ã€‚</li></ul><h2 id="äº”ã€æ¨¡å¼æ€»ç»“"><a href="#äº”ã€æ¨¡å¼æ€»ç»“" class="headerlink" title="äº”ã€æ¨¡å¼æ€»ç»“"></a>äº”ã€æ¨¡å¼æ€»ç»“</h2><ul><li>åœ¨å¤–è§‚æ¨¡å¼ä¸­ï¼Œå¤–éƒ¨ä¸ä¸€ä¸ªå­ç³»ç»Ÿçš„é€šä¿¡å¿…é¡»é€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„å¤–è§‚å¯¹è±¡è¿›è¡Œï¼Œä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„ç•Œé¢ï¼Œå¤–è§‚æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä½¿å¾—è¿™ä¸€å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨ã€‚å¤–è§‚æ¨¡å¼åˆç§°ä¸ºé—¨é¢æ¨¡å¼ï¼Œå®ƒæ˜¯ä¸€ç§å¯¹è±¡ç»“æ„å‹æ¨¡å¼ã€‚</li><li>å¤–è§‚æ¨¡å¼åŒ…å«ä¸¤ä¸ªè§’è‰²ï¼šå¤–è§‚è§’è‰²æ˜¯åœ¨å®¢æˆ·ç«¯ç›´æ¥è°ƒç”¨çš„è§’è‰²ï¼Œåœ¨å¤–è§‚è§’è‰²ä¸­å¯ä»¥çŸ¥é“ç›¸å…³çš„(ä¸€ä¸ªæˆ–è€…å¤šä¸ª)å­ç³»ç»Ÿçš„åŠŸèƒ½å’Œè´£ä»»ï¼Œå®ƒå°†æ‰€æœ‰ä»å®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚å§”æ´¾åˆ°ç›¸åº”çš„å­ç³»ç»Ÿå»ï¼Œä¼ é€’ç»™ç›¸åº”çš„å­ç³»ç»Ÿå¯¹è±¡å¤„ç†ï¼›åœ¨è½¯ä»¶ç³»ç»Ÿä¸­å¯ä»¥åŒæ—¶æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªå­ç³»ç»Ÿè§’è‰²ï¼Œæ¯ä¸€ä¸ªå­ç³»ç»Ÿå¯ä»¥ä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„ç±»ï¼Œè€Œæ˜¯ä¸€ä¸ªç±»çš„é›†åˆï¼Œå®ƒå®ç°å­ç³»ç»Ÿçš„åŠŸèƒ½ã€‚</li><li>å¤–è§‚æ¨¡å¼è¦æ±‚ä¸€ä¸ªå­ç³»ç»Ÿçš„å¤–éƒ¨ä¸å…¶å†…éƒ¨çš„é€šä¿¡é€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„å¤–è§‚å¯¹è±¡è¿›è¡Œï¼Œå¤–è§‚ç±»å°†å®¢æˆ·ç«¯ä¸å­ç³»ç»Ÿçš„å†…éƒ¨å¤æ‚æ€§åˆ†éš”å¼€ï¼Œä½¿å¾—å®¢æˆ·ç«¯åªéœ€è¦ä¸å¤–è§‚å¯¹è±¡æ‰“äº¤é“ï¼Œè€Œä¸éœ€è¦ä¸å­ç³»ç»Ÿå†…éƒ¨çš„å¾ˆå¤šå¯¹è±¡æ‰“äº¤é“ã€‚</li><li>å¤–è§‚æ¨¡å¼ä¸»è¦ä¼˜ç‚¹åœ¨äºå¯¹å®¢æˆ·å±è”½å­ç³»ç»Ÿç»„ä»¶ï¼Œå‡å°‘äº†å®¢æˆ·å¤„ç†çš„å¯¹è±¡æ•°ç›®å¹¶ä½¿å¾—å­ç³»ç»Ÿä½¿ç”¨èµ·æ¥æ›´åŠ å®¹æ˜“ï¼Œå®ƒå®ç°äº†å­ç³»ç»Ÿä¸å®¢æˆ·ä¹‹é—´çš„æ¾è€¦åˆå…³ç³»ï¼Œå¹¶é™ä½äº†å¤§å‹è½¯ä»¶ç³»ç»Ÿä¸­çš„ç¼–è¯‘ä¾èµ–æ€§ï¼Œç®€åŒ–äº†ç³»ç»Ÿåœ¨ä¸åŒå¹³å°ä¹‹é—´çš„ç§»æ¤è¿‡ç¨‹ï¼›å…¶ç¼ºç‚¹åœ¨äºä¸èƒ½å¾ˆå¥½åœ°é™åˆ¶å®¢æˆ·ä½¿ç”¨å­ç³»ç»Ÿç±»ï¼Œè€Œä¸”åœ¨ä¸å¼•å…¥æŠ½è±¡å¤–è§‚ç±»çš„æƒ…å†µä¸‹ï¼Œå¢åŠ æ–°çš„å­ç³»ç»Ÿå¯èƒ½éœ€è¦ä¿®æ”¹å¤–è§‚ç±»æˆ–å®¢æˆ·ç«¯çš„æºä»£ç ï¼Œè¿èƒŒäº†â€œå¼€é—­åŸåˆ™â€ã€‚</li><li>å¤–è§‚æ¨¡å¼é€‚ç”¨æƒ…å†µåŒ…æ‹¬ï¼šè¦ä¸ºä¸€ä¸ªå¤æ‚å­ç³»ç»Ÿæä¾›ä¸€ä¸ªç®€å•æ¥å£ï¼›å®¢æˆ·ç¨‹åºä¸å¤šä¸ªå­ç³»ç»Ÿä¹‹é—´å­˜åœ¨å¾ˆå¤§çš„ä¾èµ–æ€§ï¼›åœ¨å±‚æ¬¡åŒ–ç»“æ„ä¸­ï¼Œéœ€è¦å®šä¹‰ç³»ç»Ÿä¸­æ¯ä¸€å±‚çš„å…¥å£ï¼Œä½¿å¾—å±‚ä¸å±‚ä¹‹é—´ä¸ç›´æ¥äº§ç”Ÿè”ç³»ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶è®¾è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaé¢å‘å¯¹è±¡è®¾è®¡ä¹‹ä¸­ä»‹è€…æ¨¡å¼</title>
      <link href="/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-zhong-jie-zhe-mo-shi/"/>
      <url>/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-zhong-jie-zhe-mo-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€æ¨¡å¼åŠ¨æœº"><a href="#ä¸€ã€æ¨¡å¼åŠ¨æœº" class="headerlink" title="ä¸€ã€æ¨¡å¼åŠ¨æœº"></a>ä¸€ã€æ¨¡å¼åŠ¨æœº</h2><p>åœ¨ç”¨æˆ·ä¸ç”¨æˆ·ç›´æ¥èŠå¤©çš„è®¾è®¡æ–¹æ¡ˆä¸­ï¼Œç”¨æˆ·å¯¹è±¡ä¹‹é—´å­˜åœ¨å¾ˆå¼ºçš„å…³è”æ€§ï¼Œå°†å¯¼è‡´ç³»ç»Ÿå‡ºç°å¦‚ä¸‹é—®é¢˜ï¼š</p><ul><li>ç³»ç»Ÿç»“æ„å¤æ‚ï¼šå¯¹è±¡ä¹‹é—´å­˜åœ¨å¤§é‡çš„ç›¸äº’å…³è”å’Œè°ƒç”¨ï¼Œè‹¥æœ‰ä¸€ä¸ªå¯¹è±¡å‘ç”Ÿå˜åŒ–ï¼Œåˆ™éœ€è¦è·Ÿè¸ªå’Œè¯¥å¯¹è±¡å…³è”çš„å…¶ä»–æ‰€æœ‰å¯¹è±¡ï¼Œå¹¶è¿›è¡Œé€‚å½“å¤„ç†ã€‚</li><li>å¯¹è±¡å¯é‡ç”¨æ€§å·®ï¼šç”±äºä¸€ä¸ªå¯¹è±¡å’Œå…¶ä»–å¯¹è±¡å…·æœ‰å¾ˆå¼ºçš„å…³è”ï¼Œè‹¥æ²¡æœ‰å…¶ä»–å¯¹è±¡çš„æ”¯æŒï¼Œä¸€ä¸ªå¯¹è±¡å¾ˆéš¾è¢«å¦ä¸€ä¸ªç³»ç»Ÿæˆ–æ¨¡å—é‡ç”¨ï¼Œè¿™äº›å¯¹è±¡è¡¨ç°å‡ºæ¥æ›´åƒä¸€ä¸ªä¸å¯åˆ†å‰²çš„æ•´ä½“ï¼ŒèŒè´£è¾ƒä¸ºæ··ä¹±ã€‚</li><li>ç³»ç»Ÿæ‰©å±•æ€§ä½ï¼šå¢åŠ ä¸€ä¸ªæ–°çš„å¯¹è±¡éœ€è¦åœ¨åŸæœ‰ç›¸å…³å¯¹è±¡ä¸Šå¢åŠ å¼•ç”¨ï¼Œå¢åŠ æ–°çš„å¼•ç”¨å…³ç³»ä¹Ÿéœ€è¦è°ƒæ•´åŸæœ‰å¯¹è±¡ï¼Œç³»ç»Ÿè€¦åˆåº¦å¾ˆé«˜ï¼Œå¯¹è±¡æ“ä½œå¾ˆä¸çµæ´»ï¼Œæ‰©å±•æ€§å·®ã€‚</li><li>åœ¨é¢å‘å¯¹è±¡çš„è½¯ä»¶è®¾è®¡ä¸å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®â€œå•ä¸€èŒè´£åŸåˆ™â€ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡å°†å¯¹è±¡ç»†åŒ–ï¼Œä½¿å…¶åªè´Ÿè´£æˆ–å‘ˆç°å•ä¸€çš„èŒè´£ã€‚</li><li>å¯¹äºä¸€ä¸ªæ¨¡å—ï¼Œå¯èƒ½ç”±å¾ˆå¤šå¯¹è±¡æ„æˆï¼Œè€Œä¸”è¿™äº›å¯¹è±¡ä¹‹é—´å¯èƒ½å­˜åœ¨ç›¸äº’çš„å¼•ç”¨ï¼Œä¸ºäº†å‡å°‘å¯¹è±¡ä¸¤ä¸¤ä¹‹é—´å¤æ‚çš„å¼•ç”¨å…³ç³»ï¼Œä½¿ä¹‹æˆä¸ºä¸€ä¸ªæ¾è€¦åˆçš„ç³»ç»Ÿï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸­ä»‹è€…æ¨¡å¼ï¼Œè¿™å°±æ˜¯ä¸­ä»‹è€…æ¨¡å¼çš„æ¨¡å¼åŠ¨æœºã€‚</li></ul><h2 id="äºŒã€æ¨¡å¼å®šä¹‰"><a href="#äºŒã€æ¨¡å¼å®šä¹‰" class="headerlink" title="äºŒã€æ¨¡å¼å®šä¹‰"></a>äºŒã€æ¨¡å¼å®šä¹‰</h2><blockquote><p><strong>ä¸­ä»‹è€…æ¨¡å¼(<code>Mediator Pattern</code>)<strong>ï¼šç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’ï¼Œä¸­ä»‹è€…ä½¿å„å¯¹è±¡ä¸éœ€è¦æ˜¾å¼åœ°ç›¸äº’å¼•ç”¨ï¼Œä»è€Œä½¿å…¶è€¦åˆæ¾æ•£ï¼Œè€Œä¸”å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚ä¸­ä»‹è€…æ¨¡å¼åˆç§°ä¸º</strong>è°ƒåœè€…æ¨¡å¼</strong>ï¼Œå®ƒæ˜¯ä¸€ç§å¯¹è±¡è¡Œä¸ºå‹æ¨¡å¼ã€‚</p></blockquote><h2 id="ä¸‰ã€æ¨¡å¼ç»“æ„"><a href="#ä¸‰ã€æ¨¡å¼ç»“æ„" class="headerlink" title="ä¸‰ã€æ¨¡å¼ç»“æ„"></a>ä¸‰ã€æ¨¡å¼ç»“æ„</h2><h3 id="1-è§’è‰²ç»„æˆ"><a href="#1-è§’è‰²ç»„æˆ" class="headerlink" title="1. è§’è‰²ç»„æˆ"></a>1. è§’è‰²ç»„æˆ</h3><p>ä¸­ä»‹è€…æ¨¡å¼åŒ…å«å¦‚ä¸‹è§’è‰²ï¼š</p><ul><li><code>Mediator</code>: æŠ½è±¡ä¸­ä»‹è€…</li><li><code>ConcreteMediator</code>: å…·ä½“ä¸­ä»‹è€…</li><li><code>Colleague</code>: æŠ½è±¡åŒäº‹ç±»</li><li><code>ConcreteColleague</code>: å…·ä½“åŒäº‹ç±»</li></ul><h3 id="2-ç»“æ„å›¾"><a href="#2-ç»“æ„å›¾" class="headerlink" title="2. ç»“æ„å›¾"></a>2. ç»“æ„å›¾</h3><p><img src="https://statics.sh1a.qingstor.com/2018/10/17/mediator.jpg" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/10/17/mediator.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å‘½ä»¤æ¨¡å¼ç»“æ„å›¾"></p><h2 id="å››ã€ç¤ºä¾‹ä»£ç "><a href="#å››ã€ç¤ºä¾‹ä»£ç " class="headerlink" title="å››ã€ç¤ºä¾‹ä»£ç "></a>å››ã€ç¤ºä¾‹ä»£ç </h2><p>é¦–å…ˆï¼Œæ˜¯æŠ½è±¡çš„<code>Mediator</code>ç±»å’Œå…·ä½“çš„<code>ConcreteMediator</code>ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * é€šç”¨æŠ½è±¡ä¸­ä»‹è€…ç±». * * Created by blinkfox on 16/8/21. */</span><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Mediator</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/** å®šä¹‰åŒäº‹ç±»1. */</span>    <span class="token keyword">protected</span> <span class="token class-name">ConcreteColleague1</span> colleague1<span class="token punctuation">;</span>    <span class="token comment">/** å®šä¹‰åŒäº‹ç±»2. */</span>    <span class="token keyword">protected</span> <span class="token class-name">ConcreteColleague2</span> colleague2<span class="token punctuation">;</span>    <span class="token comment">/* getter å’Œ setter æ–¹æ³• */</span>    <span class="token keyword">public</span> <span class="token class-name">ConcreteColleague1</span> <span class="token function">getColleague1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> colleague1<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setColleague1</span><span class="token punctuation">(</span><span class="token class-name">ConcreteColleague1</span> colleague1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>colleague1 <span class="token operator">=</span> colleague1<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">ConcreteColleague2</span> <span class="token function">getColleague2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> colleague2<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setColleague2</span><span class="token punctuation">(</span><span class="token class-name">ConcreteColleague2</span> colleague2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>colleague2 <span class="token operator">=</span> colleague2<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * ä¸­ä»‹è€…æ¨¡å¼çš„æŠ½è±¡ä¸šåŠ¡é€»è¾‘1.     */</span>    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">doSomething1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * ä¸­ä»‹è€…æ¨¡å¼çš„æŠ½è±¡ä¸šåŠ¡é€»è¾‘2.     */</span>    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">doSomething2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å…·ä½“çš„é€šç”¨ä¸­ä»‹è€…ç±». * * Created by blinkfox on 16/8/21. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteMediator</span> <span class="token keyword">extends</span> <span class="token class-name">Mediator</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * ä¸­ä»‹è€…æ¨¡å¼çš„å…·ä½“ä¸šåŠ¡é€»è¾‘1.     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomething1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span>colleague1<span class="token punctuation">.</span><span class="token function">selfMethod1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span>colleague2<span class="token punctuation">.</span><span class="token function">selfMethod2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * ä¸­ä»‹è€…æ¨¡å¼çš„å…·ä½“ä¸šåŠ¡é€»è¾‘2.     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomething2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span>colleague1<span class="token punctuation">.</span><span class="token function">selfMethod1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span>colleague2<span class="token punctuation">.</span><span class="token function">selfMethod2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶å®ï¼Œæ˜¯æŠ½è±¡çš„<code>Colleague</code>ç±»å’Œå…·ä½“çš„<code>ConcreteColleague</code>ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * æŠ½è±¡çš„åŒäº‹ç±». * * Created by blinkfox on 16/8/21. */</span><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Colleague</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/** ä¸­ä»‹è€…. */</span>    <span class="token keyword">protected</span> <span class="token class-name">Mediator</span> mediator<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Colleague</span><span class="token punctuation">(</span><span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>mediator <span class="token operator">=</span> mediator<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å…·ä½“çš„åŒäº‹ç±»1. * * Created by blinkfox on 16/8/21. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteColleague1</span> <span class="token keyword">extends</span> <span class="token class-name">Colleague</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token class-name">ConcreteColleague1</span><span class="token punctuation">(</span><span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * è‡ªæœ‰æ–¹æ³•.     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">selfMethod1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------ConcreteColleague1-å¤„ç†è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘1--------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * ä¾èµ–æ–¹æ³•.     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">depMethod1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------ConcreteColleague1-å§”æ‰˜ç»™ä¸­ä»‹è€…çš„ä¸šåŠ¡é€»è¾‘1--------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span>mediator<span class="token punctuation">.</span><span class="token function">doSomething1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å…·ä½“çš„åŒäº‹ç±»2. * * Created by blinkfox on 16/8/21. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteColleague2</span> <span class="token keyword">extends</span> <span class="token class-name">Colleague</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token class-name">ConcreteColleague2</span><span class="token punctuation">(</span><span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * è‡ªæœ‰æ–¹æ³•2.     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">selfMethod2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------ConcreteColleague2-å¤„ç†è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘2--------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * ä¾èµ–æ–¹æ³•2.     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">depMethod2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------ConcreteColleague2-å§”æ‰˜ç»™ä¸­ä»‹è€…çš„ä¸šåŠ¡é€»è¾‘2--------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span>mediator<span class="token punctuation">.</span><span class="token function">doSomething2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»¥ä¸‹æ˜¯ä¸­ä»‹è€…æ¨¡å¼çš„å®¢æˆ·ç«¯åœºæ™¯ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * ä¸­ä»‹è€…æ¨¡å¼çš„åœºæ™¯ç±» * Created by blinkfox on 16/8/21. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MediatorClient</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Mediator</span> mediator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteMediator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ConcreteColleague1</span> colleague1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteColleague1</span><span class="token punctuation">(</span>mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ConcreteColleague2</span> colleague2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteColleague2</span><span class="token punctuation">(</span>mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>        mediator<span class="token punctuation">.</span><span class="token function">setColleague1</span><span class="token punctuation">(</span>colleague1<span class="token punctuation">)</span><span class="token punctuation">;</span>        mediator<span class="token punctuation">.</span><span class="token function">setColleague2</span><span class="token punctuation">(</span>colleague2<span class="token punctuation">)</span><span class="token punctuation">;</span>        colleague1<span class="token punctuation">.</span><span class="token function">depMethod1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        colleague2<span class="token punctuation">.</span><span class="token function">depMethod2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        mediator<span class="token punctuation">.</span><span class="token function">doSomething1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        mediator<span class="token punctuation">.</span><span class="token function">doSomething2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="äº”ã€æ¨¡å¼åˆ†æ"><a href="#äº”ã€æ¨¡å¼åˆ†æ" class="headerlink" title="äº”ã€æ¨¡å¼åˆ†æ"></a>äº”ã€æ¨¡å¼åˆ†æ</h2><p>ä¸­ä»‹è€…æ¨¡å¼å¯ä»¥ä½¿å¯¹è±¡ä¹‹é—´çš„å…³ç³»æ•°é‡æ€¥å‰§å‡å°‘ã€‚</p><p>ä¸­ä»‹è€…æ‰¿æ‹…ä¸¤æ–¹é¢çš„èŒè´£ï¼š</p><ul><li><strong>ä¸­è½¬ä½œç”¨ï¼ˆç»“æ„æ€§ï¼‰</strong>ï¼šé€šè¿‡ä¸­ä»‹è€…æä¾›çš„ä¸­è½¬ä½œç”¨ï¼Œå„ä¸ªåŒäº‹å¯¹è±¡å°±ä¸å†éœ€è¦æ˜¾å¼å¼•ç”¨å…¶ä»–åŒäº‹ï¼Œå½“éœ€è¦å’Œå…¶ä»–åŒäº‹è¿›è¡Œé€šä¿¡æ—¶ï¼Œé€šè¿‡ä¸­ä»‹è€…å³å¯ã€‚è¯¥ä¸­è½¬ä½œç”¨å±äºä¸­ä»‹è€…åœ¨ç»“æ„ä¸Šçš„æ”¯æŒã€‚</li><li><strong>åè°ƒä½œç”¨ï¼ˆè¡Œä¸ºæ€§ï¼‰</strong>ï¼šä¸­ä»‹è€…å¯ä»¥æ›´è¿›ä¸€æ­¥çš„å¯¹åŒäº‹ä¹‹é—´çš„å…³ç³»è¿›è¡Œå°è£…ï¼ŒåŒäº‹å¯ä»¥ä¸€è‡´åœ°å’Œä¸­ä»‹è€…è¿›è¡Œäº¤äº’ï¼Œè€Œä¸éœ€è¦æŒ‡æ˜ä¸­ä»‹è€…éœ€è¦å…·ä½“æ€ä¹ˆåšï¼Œä¸­ä»‹è€…æ ¹æ®å°è£…åœ¨è‡ªèº«å†…éƒ¨çš„åè°ƒé€»è¾‘ï¼Œå¯¹åŒäº‹çš„è¯·æ±‚è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†ï¼Œå°†åŒäº‹æˆå‘˜ä¹‹é—´çš„å…³ç³»è¡Œä¸ºè¿›è¡Œåˆ†ç¦»å’Œå°è£…ã€‚è¯¥åè°ƒä½œç”¨å±äºä¸­ä»‹è€…åœ¨è¡Œä¸ºä¸Šçš„æ”¯æŒã€‚</li></ul><h3 id="1-ä¼˜ç‚¹"><a href="#1-ä¼˜ç‚¹" class="headerlink" title="1. ä¼˜ç‚¹"></a>1. ä¼˜ç‚¹</h3><p>ä¸­ä»‹è€…æ¨¡å¼çš„ä¼˜ç‚¹ï¼š</p><ul><li>ç®€åŒ–äº†å¯¹è±¡ä¹‹é—´çš„äº¤äº’ã€‚</li><li>å°†å„åŒäº‹è§£è€¦ã€‚</li><li>å‡å°‘å­ç±»ç”Ÿæˆã€‚</li><li>å¯ä»¥ç®€åŒ–å„åŒäº‹ç±»çš„è®¾è®¡å’Œå®ç°ã€‚</li></ul><h3 id="2-ç¼ºç‚¹"><a href="#2-ç¼ºç‚¹" class="headerlink" title="2. ç¼ºç‚¹"></a>2. ç¼ºç‚¹</h3><p>ä¸­ä»‹è€…æ¨¡å¼çš„ç¼ºç‚¹ï¼š</p><ul><li>åœ¨å…·ä½“ä¸­ä»‹è€…ç±»ä¸­åŒ…å«äº†åŒäº‹ä¹‹é—´çš„äº¤äº’ç»†èŠ‚ï¼Œ<strong>å¯èƒ½ä¼šå¯¼è‡´å…·ä½“ä¸­ä»‹è€…ç±»éå¸¸å¤æ‚ï¼Œä½¿å¾—ç³»ç»Ÿéš¾ä»¥ç»´æŠ¤</strong>ã€‚</li></ul><h3 id="3-é€‚ç”¨ç¯å¢ƒ"><a href="#3-é€‚ç”¨ç¯å¢ƒ" class="headerlink" title="3. é€‚ç”¨ç¯å¢ƒ"></a>3. é€‚ç”¨ç¯å¢ƒ</h3><p>åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨ä¸­ä»‹è€…æ¨¡å¼ï¼š</p><ul><li>ç³»ç»Ÿä¸­å¯¹è±¡ä¹‹é—´å­˜åœ¨å¤æ‚çš„å¼•ç”¨å…³ç³»ï¼Œäº§ç”Ÿçš„ç›¸äº’ä¾èµ–å…³ç³»ç»“æ„æ··ä¹±ä¸”éš¾ä»¥ç†è§£ã€‚</li><li>ä¸€ä¸ªå¯¹è±¡ç”±äºå¼•ç”¨äº†å…¶ä»–å¾ˆå¤šå¯¹è±¡å¹¶ä¸”ç›´æ¥å’Œè¿™äº›å¯¹è±¡é€šä¿¡ï¼Œå¯¼è‡´éš¾ä»¥å¤ç”¨è¯¥å¯¹è±¡ã€‚</li><li>æƒ³é€šè¿‡ä¸€ä¸ªä¸­é—´ç±»æ¥å°è£…å¤šä¸ªç±»ä¸­çš„è¡Œä¸ºï¼Œè€Œåˆä¸æƒ³ç”Ÿæˆå¤ªå¤šçš„å­ç±»ã€‚å¯ä»¥é€šè¿‡å¼•å…¥ä¸­ä»‹è€…ç±»æ¥å®ç°ï¼Œåœ¨ä¸­ä»‹è€…ä¸­å®šä¹‰å¯¹è±¡ã€‚</li><li>äº¤äº’çš„å…¬å…±è¡Œä¸ºï¼Œå¦‚æœéœ€è¦æ”¹å˜è¡Œä¸ºåˆ™å¯ä»¥å¢åŠ æ–°çš„ä¸­ä»‹è€…ç±»ã€‚</li></ul><h2 id="å…­ã€æ¨¡å¼æ€»ç»“"><a href="#å…­ã€æ¨¡å¼æ€»ç»“" class="headerlink" title="å…­ã€æ¨¡å¼æ€»ç»“"></a>å…­ã€æ¨¡å¼æ€»ç»“</h2><ul><li>ä¸­ä»‹è€…æ¨¡å¼ç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’ï¼Œä¸­ä»‹è€…ä½¿å„å¯¹è±¡ä¸éœ€è¦æ˜¾å¼åœ°ç›¸äº’å¼•ç”¨ï¼Œä»è€Œä½¿å…¶è€¦åˆæ¾æ•£ï¼Œè€Œä¸”å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚ä¸­ä»‹è€…æ¨¡å¼åˆç§°ä¸ºè°ƒåœè€…æ¨¡å¼ï¼Œå®ƒæ˜¯ä¸€ç§å¯¹è±¡è¡Œä¸ºå‹æ¨¡å¼ã€‚</li><li>ä¸­ä»‹è€…æ¨¡å¼åŒ…å«å››ä¸ªè§’è‰²ï¼šæŠ½è±¡ä¸­ä»‹è€…ç”¨äºå®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œè¯¥æ¥å£ç”¨äºä¸å„åŒäº‹å¯¹è±¡ä¹‹é—´çš„é€šä¿¡ï¼›å…·ä½“ä¸­ä»‹è€…æ˜¯æŠ½è±¡ä¸­ä»‹è€…çš„å­ç±»ï¼Œé€šè¿‡åè°ƒå„ä¸ªåŒäº‹å¯¹è±¡æ¥å®ç°åä½œè¡Œä¸ºï¼Œäº†è§£å¹¶ç»´æŠ¤å®ƒçš„å„ä¸ªåŒäº‹å¯¹è±¡çš„å¼•ç”¨ï¼›æŠ½è±¡åŒäº‹ç±»å®šä¹‰å„åŒäº‹çš„å…¬æœ‰æ–¹æ³•ï¼›å…·ä½“åŒäº‹ç±»æ˜¯æŠ½è±¡åŒäº‹ç±»çš„å­ç±»ï¼Œæ¯ä¸€ä¸ªåŒäº‹å¯¹è±¡éƒ½å¼•ç”¨ä¸€ä¸ªä¸­ä»‹è€…å¯¹è±¡ï¼›æ¯ä¸€ä¸ªåŒäº‹å¯¹è±¡åœ¨éœ€è¦å’Œå…¶ä»–åŒäº‹å¯¹è±¡é€šä¿¡æ—¶ï¼Œå…ˆä¸ä¸­ä»‹è€…é€šä¿¡ï¼Œé€šè¿‡ä¸­ä»‹è€…æ¥é—´æ¥å®Œæˆä¸å…¶ä»–åŒäº‹ç±»çš„é€šä¿¡ï¼›åœ¨å…·ä½“åŒäº‹ç±»ä¸­å®ç°äº†åœ¨æŠ½è±¡åŒäº‹ç±»ä¸­å®šä¹‰çš„æ–¹æ³•ã€‚</li><li>é€šè¿‡å¼•å…¥ä¸­ä»‹è€…å¯¹è±¡ï¼Œå¯ä»¥å°†ç³»ç»Ÿçš„ç½‘çŠ¶ç»“æ„å˜æˆä»¥ä¸­ä»‹è€…ä¸ºä¸­å¿ƒçš„æ˜Ÿå½¢ç»“æ„ï¼Œä¸­ä»‹è€…æ‰¿æ‹…äº†ä¸­è½¬ä½œç”¨å’Œåè°ƒä½œç”¨ã€‚ä¸­ä»‹è€…ç±»æ˜¯ä¸­ä»‹è€…æ¨¡å¼çš„æ ¸å¿ƒï¼Œå®ƒå¯¹æ•´ä¸ªç³»ç»Ÿè¿›è¡Œæ§åˆ¶å’Œåè°ƒï¼Œç®€åŒ–äº†å¯¹è±¡ä¹‹é—´çš„äº¤äº’ï¼Œè¿˜å¯ä»¥å¯¹å¯¹è±¡é—´çš„äº¤äº’è¿›è¡Œè¿›ä¸€æ­¥çš„æ§åˆ¶ã€‚</li><li>ä¸­ä»‹è€…æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹åœ¨äºç®€åŒ–äº†å¯¹è±¡ä¹‹é—´çš„äº¤äº’ï¼Œå°†å„åŒäº‹è§£è€¦ï¼Œè¿˜å¯ä»¥å‡å°‘å­ç±»ç”Ÿæˆï¼Œå¯¹äºå¤æ‚çš„å¯¹è±¡ä¹‹é—´çš„äº¤äº’ï¼Œé€šè¿‡å¼•å…¥ä¸­ä»‹è€…ï¼Œå¯ä»¥ç®€åŒ–å„åŒäº‹ç±»çš„è®¾è®¡å’Œå®ç°ï¼›ä¸­ä»‹è€…æ¨¡å¼ä¸»è¦ç¼ºç‚¹åœ¨äºå…·ä½“ä¸­ä»‹è€…ç±»ä¸­åŒ…å«äº†åŒäº‹ä¹‹é—´çš„äº¤äº’ç»†èŠ‚ï¼Œå¯èƒ½ä¼šå¯¼è‡´å…·ä½“ä¸­ä»‹è€…ç±»éå¸¸å¤æ‚ï¼Œä½¿å¾—ç³»ç»Ÿéš¾ä»¥ç»´æŠ¤ã€‚</li><li>ä¸­ä»‹è€…æ¨¡å¼é€‚ç”¨æƒ…å†µåŒ…æ‹¬ï¼šç³»ç»Ÿä¸­å¯¹è±¡ä¹‹é—´å­˜åœ¨å¤æ‚çš„å¼•ç”¨å…³ç³»ï¼Œäº§ç”Ÿçš„ç›¸äº’ä¾èµ–å…³ç³»ç»“æ„æ··ä¹±ä¸”éš¾ä»¥ç†è§£ï¼›ä¸€ä¸ªå¯¹è±¡ç”±äºå¼•ç”¨äº†å…¶ä»–å¾ˆå¤šå¯¹è±¡å¹¶ä¸”ç›´æ¥å’Œè¿™äº›å¯¹è±¡é€šä¿¡ï¼Œå¯¼è‡´éš¾ä»¥å¤ç”¨è¯¥å¯¹è±¡ï¼›æƒ³é€šè¿‡ä¸€ä¸ªä¸­é—´ç±»æ¥å°è£…å¤šä¸ªç±»ä¸­çš„è¡Œä¸ºï¼Œè€Œåˆä¸æƒ³ç”Ÿæˆå¤ªå¤šçš„å­ç±»ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶è®¾è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaé¢å‘å¯¹è±¡è®¾è®¡ä¹‹å‘½ä»¤æ¨¡å¼</title>
      <link href="/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-ming-ling-mo-shi/"/>
      <url>/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-ming-ling-mo-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€æ¨¡å¼åŠ¨æœº"><a href="#ä¸€ã€æ¨¡å¼åŠ¨æœº" class="headerlink" title="ä¸€ã€æ¨¡å¼åŠ¨æœº"></a>ä¸€ã€æ¨¡å¼åŠ¨æœº</h2><p>åœ¨è½¯ä»¶è®¾è®¡ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å‘æŸäº›å¯¹è±¡å‘é€è¯·æ±‚ï¼Œä½†æ˜¯å¹¶ä¸çŸ¥é“è¯·æ±‚çš„æ¥æ”¶è€…æ˜¯è°ï¼Œä¹Ÿä¸çŸ¥é“è¢«è¯·æ±‚çš„æ“ä½œæ˜¯å“ªä¸ªï¼Œæˆ‘ä»¬åªéœ€åœ¨ç¨‹åºè¿è¡Œæ—¶æŒ‡å®šå…·ä½“çš„è¯·æ±‚æ¥æ”¶è€…å³å¯ï¼Œæ­¤æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤æ¨¡å¼æ¥è¿›è¡Œè®¾è®¡ï¼Œä½¿å¾—è¯·æ±‚å‘é€è€…ä¸è¯·æ±‚æ¥æ”¶è€…æ¶ˆé™¤å½¼æ­¤ä¹‹é—´çš„è€¦åˆï¼Œè®©å¯¹è±¡ä¹‹é—´çš„è°ƒç”¨å…³ç³»æ›´åŠ çµæ´»ã€‚</p><p>å‘½ä»¤æ¨¡å¼å¯ä»¥å¯¹å‘é€è€…å’Œæ¥æ”¶è€…å®Œå…¨è§£è€¦ï¼Œå‘é€è€…ä¸æ¥æ”¶è€…ä¹‹é—´æ²¡æœ‰ç›´æ¥å¼•ç”¨å…³ç³»ï¼Œå‘é€è¯·æ±‚çš„å¯¹è±¡åªéœ€è¦çŸ¥é“å¦‚ä½•å‘é€è¯·æ±‚ï¼Œè€Œä¸å¿…çŸ¥é“å¦‚ä½•å®Œæˆè¯·æ±‚ã€‚è¿™å°±æ˜¯å‘½ä»¤æ¨¡å¼çš„æ¨¡å¼åŠ¨æœºã€‚</p><h2 id="äºŒã€æ¨¡å¼å®šä¹‰"><a href="#äºŒã€æ¨¡å¼å®šä¹‰" class="headerlink" title="äºŒã€æ¨¡å¼å®šä¹‰"></a>äºŒã€æ¨¡å¼å®šä¹‰</h2><blockquote><p>**å‘½ä»¤æ¨¡å¼(<code>Command Pattern</code>)**ï¼šå°†ä¸€ä¸ªè¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œä½¿æˆ‘ä»¬å¯ç”¨ä¸åŒçš„è¯·æ±‚å¯¹å®¢æˆ·è¿›è¡Œå‚æ•°åŒ–ï¼›å¯¹è¯·æ±‚æ’é˜Ÿæˆ–è€…è®°å½•è¯·æ±‚æ—¥å¿—ï¼Œä»¥åŠæ”¯æŒå¯æ’¤é”€çš„æ“ä½œã€‚å‘½ä»¤æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡è¡Œä¸ºå‹æ¨¡å¼ï¼Œå…¶åˆ«åä¸ºåŠ¨ä½œ(<code>Action</code>)æ¨¡å¼æˆ–äº‹åŠ¡(<code>Transaction</code>)æ¨¡å¼ã€‚</p></blockquote><h2 id="ä¸‰ã€æ¨¡å¼ç»“æ„"><a href="#ä¸‰ã€æ¨¡å¼ç»“æ„" class="headerlink" title="ä¸‰ã€æ¨¡å¼ç»“æ„"></a>ä¸‰ã€æ¨¡å¼ç»“æ„</h2><h3 id="1-è§’è‰²ç»„æˆ"><a href="#1-è§’è‰²ç»„æˆ" class="headerlink" title="1. è§’è‰²ç»„æˆ"></a>1. è§’è‰²ç»„æˆ</h3><p>å‘½ä»¤æ¨¡å¼åŒ…å«å¦‚ä¸‹è§’è‰²ï¼š</p><ul><li><code>Command</code>: æŠ½è±¡å‘½ä»¤ç±»</li><li><code>ConcreteCommand</code>: å…·ä½“å‘½ä»¤ç±»</li><li><code>Invoker</code>: è°ƒç”¨è€…</li><li><code>Receiver</code>: æ¥æ”¶è€…</li><li><code>Client</code>: å®¢æˆ·ç±»</li></ul><h3 id="2-ç»“æ„å›¾"><a href="#2-ç»“æ„å›¾" class="headerlink" title="2. ç»“æ„å›¾"></a>2. ç»“æ„å›¾</h3><p><img src="https://statics.sh1a.qingstor.com/2018/10/16/command-structure.jpg" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/10/16/command-structure.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å‘½ä»¤æ¨¡å¼ç»“æ„å›¾"></p><h2 id="å››ã€ç¤ºä¾‹ä»£ç "><a href="#å››ã€ç¤ºä¾‹ä»£ç " class="headerlink" title="å››ã€ç¤ºä¾‹ä»£ç "></a>å››ã€ç¤ºä¾‹ä»£ç </h2><p>é¦–å…ˆï¼Œæ˜¯æŠ½è±¡çš„<code>Receiver</code>ç±»å’Œå…·ä½“çš„<code>Receiver</code>ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * é€šç”¨çš„æŠ½è±¡ Receiver æ¥æ”¶è€…. * * Created by blinkfox on 16/8/17. */</span><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Receiver</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * å®šä¹‰æ¯ä¸ªæ¥æ”¶è€…éƒ½å¿…é¡»å®Œæˆçš„ä¸šåŠ¡.     */</span>    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å…·ä½“çš„ Receiver ç±»1. * * Created by blinkfox on 16/8/17. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteReceiver1</span> <span class="token keyword">extends</span> <span class="token class-name">Receiver</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ConcreteReceiver1 å¤„ç†çš„ä¸šåŠ¡é€»è¾‘..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å…·ä½“çš„ Receiver ç±»2. * * Created by blinkfox on 16/8/17. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteReceiver2</span> <span class="token keyword">extends</span> <span class="token class-name">Receiver</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ConcreteReceiver2 å¤„ç†çš„ä¸šåŠ¡é€»è¾‘..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶å®ï¼Œæ˜¯æŠ½è±¡çš„<code>Command</code>ç±»å’Œå…·ä½“çš„<code>Command</code>ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * æŠ½è±¡çš„ Command ç±». * * Created by blinkfox on 16/8/17. */</span><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Command</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * å‘½ä»¤çš„æŠ½è±¡æ‰§è¡Œå‘½ä»¤çš„æ–¹æ³•.     */</span>    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å…·ä½“çš„ Command å‘½ä»¤ç±»1. * * Created by blinkfox on 16/8/17. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteCommand1</span> <span class="token keyword">extends</span> <span class="token class-name">Command</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/** å¯¹å“ªä¸ªreceiverç±»è¿›è¡Œå¤„ç†. */</span>    <span class="token keyword">private</span> <span class="token class-name">Receiver</span> receiver<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">ConcreteCommand1</span><span class="token punctuation">(</span><span class="token class-name">Receiver</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>receiver <span class="token operator">=</span> receiver<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * å¿…é¡»å®ç°çš„ä¸€ä¸ªå‘½ä»¤.     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>receiver<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å…·ä½“çš„ Command å‘½ä»¤ç±»2. * * Created by blinkfox on 16/8/17. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteCommand2</span> <span class="token keyword">extends</span> <span class="token class-name">Command</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/** å¯¹å“ªä¸ªreceiverç±»è¿›è¡Œå¤„ç†. */</span>    <span class="token keyword">private</span> <span class="token class-name">Receiver</span> receiver<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">ConcreteCommand2</span><span class="token punctuation">(</span><span class="token class-name">Receiver</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>receiver <span class="token operator">=</span> receiver<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * å¿…é¡»å®ç°çš„å‘½ä»¤.     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>receiver<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åï¼Œè°ƒç”¨è€…<code>Invoker</code>ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * è°ƒç”¨è€… Invoker ç±». * * Created by blinkfox on 16/8/17. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Invoker</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Command</span> command<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCommand</span><span class="token punctuation">(</span><span class="token class-name">Command</span> command<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>command <span class="token operator">=</span> command<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * æ‰§è¡Œå‘½ä»¤.     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>command<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»¥ä¸‹æ˜¯å‘½ä»¤æ¨¡å¼çš„å®¢æˆ·ç«¯åœºæ™¯ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å‘½ä»¤æ¨¡å¼çš„åœºæ™¯ç±». * * Created by blinkfox on 16/8/17. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CommandClient</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Invoker</span> invoker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Invoker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Receiver</span> receiver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteReceiver1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Command</span> command <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteCommand1</span><span class="token punctuation">(</span>receiver<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æŠŠå‘½ä»¤äº¤ç»™è°ƒç”¨è€…æ‰§è¡Œ</span>        invoker<span class="token punctuation">.</span><span class="token function">setCommand</span><span class="token punctuation">(</span>command<span class="token punctuation">)</span><span class="token punctuation">;</span>        invoker<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="äº”ã€æ¨¡å¼åˆ†æ"><a href="#äº”ã€æ¨¡å¼åˆ†æ" class="headerlink" title="äº”ã€æ¨¡å¼åˆ†æ"></a>äº”ã€æ¨¡å¼åˆ†æ</h2><p><strong>å‘½ä»¤æ¨¡å¼çš„æœ¬è´¨æ˜¯å¯¹å‘½ä»¤è¿›è¡Œå°è£…ï¼Œå°†å‘å‡ºå‘½ä»¤çš„è´£ä»»å’Œæ‰§è¡Œå‘½ä»¤çš„è´£ä»»åˆ†å‰²å¼€</strong>ã€‚</p><ul><li>æ¯ä¸€ä¸ªå‘½ä»¤éƒ½æ˜¯ä¸€ä¸ªæ“ä½œï¼šè¯·æ±‚çš„ä¸€æ–¹å‘å‡ºè¯·æ±‚ï¼Œè¦æ±‚æ‰§è¡Œä¸€ä¸ªæ“ä½œï¼›æ¥æ”¶çš„ä¸€æ–¹æ”¶åˆ°è¯·æ±‚ï¼Œå¹¶æ‰§è¡Œæ“ä½œã€‚</li><li>å‘½ä»¤æ¨¡å¼å…è®¸è¯·æ±‚çš„ä¸€æ–¹å’Œæ¥æ”¶çš„ä¸€æ–¹ç‹¬ç«‹å¼€æ¥ï¼Œä½¿å¾—è¯·æ±‚çš„ä¸€æ–¹ä¸å¿…çŸ¥é“æ¥æ”¶è¯·æ±‚çš„ä¸€æ–¹çš„æ¥å£ï¼Œæ›´ä¸å¿…çŸ¥é“è¯·æ±‚æ˜¯æ€ä¹ˆè¢«æ¥æ”¶ï¼Œä»¥åŠæ“ä½œæ˜¯å¦è¢«æ‰§è¡Œã€ä½•æ—¶è¢«æ‰§è¡Œï¼Œä»¥åŠæ˜¯æ€ä¹ˆè¢«æ‰§è¡Œçš„ã€‚</li><li>å‘½ä»¤æ¨¡å¼ä½¿è¯·æ±‚æœ¬èº«æˆä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å’Œå…¶ä»–å¯¹è±¡ä¸€æ ·å¯ä»¥è¢«å­˜å‚¨å’Œä¼ é€’ã€‚</li><li>å‘½ä»¤æ¨¡å¼çš„å…³é”®åœ¨äºå¼•å…¥äº†æŠ½è±¡å‘½ä»¤æ¥å£ï¼Œä¸”å‘é€è€…é’ˆå¯¹æŠ½è±¡å‘½ä»¤æ¥å£ç¼–ç¨‹ï¼Œåªæœ‰å®ç°äº†æŠ½è±¡å‘½ä»¤æ¥å£çš„å…·ä½“å‘½ä»¤æ‰èƒ½ä¸æ¥æ”¶è€…ç›¸å…³è”ã€‚</li></ul><h3 id="1-ä¼˜ç‚¹"><a href="#1-ä¼˜ç‚¹" class="headerlink" title="1. ä¼˜ç‚¹"></a>1. ä¼˜ç‚¹</h3><p>å‘½ä»¤æ¨¡å¼çš„ä¼˜ç‚¹ï¼š</p><ul><li>é™ä½ç³»ç»Ÿçš„è€¦åˆåº¦ã€‚</li><li>æ–°çš„å‘½ä»¤å¯ä»¥å¾ˆå®¹æ˜“åœ°åŠ å…¥åˆ°ç³»ç»Ÿä¸­ã€‚</li><li>å¯ä»¥æ¯”è¾ƒå®¹æ˜“åœ°è®¾è®¡ä¸€ä¸ªå‘½ä»¤é˜Ÿåˆ—å’Œå®å‘½ä»¤ï¼ˆç»„åˆå‘½ä»¤ï¼‰ã€‚</li><li>å¯ä»¥æ–¹ä¾¿åœ°å®ç°å¯¹è¯·æ±‚çš„<code>Undo</code>å’Œ<code>Redo</code>ã€‚</li></ul><h3 id="2-ç¼ºç‚¹"><a href="#2-ç¼ºç‚¹" class="headerlink" title="2. ç¼ºç‚¹"></a>2. ç¼ºç‚¹</h3><p>å‘½ä»¤æ¨¡å¼çš„ç¼ºç‚¹ï¼š</p><ul><li>ä½¿ç”¨å‘½ä»¤æ¨¡å¼å¯èƒ½ä¼šå¯¼è‡´æŸäº›ç³»ç»Ÿæœ‰è¿‡å¤šçš„å…·ä½“å‘½ä»¤ç±»ã€‚å› ä¸ºé’ˆå¯¹æ¯ä¸€ä¸ªå‘½ä»¤éƒ½éœ€è¦è®¾è®¡ä¸€ä¸ªå…·ä½“å‘½ä»¤ç±»ï¼Œå› æ­¤æŸäº›ç³»ç»Ÿå¯èƒ½éœ€è¦å¤§é‡å…·ä½“å‘½ä»¤ç±»ï¼Œè¿™å°†å½±å“å‘½ä»¤æ¨¡å¼çš„ä½¿ç”¨ã€‚</li></ul><h3 id="3-é€‚ç”¨ç¯å¢ƒ"><a href="#3-é€‚ç”¨ç¯å¢ƒ" class="headerlink" title="3. é€‚ç”¨ç¯å¢ƒ"></a>3. é€‚ç”¨ç¯å¢ƒ</h3><p>åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨å‘½ä»¤æ¨¡å¼ï¼š</p><ul><li>ç³»ç»Ÿéœ€è¦å°†è¯·æ±‚è°ƒç”¨è€…å’Œè¯·æ±‚æ¥æ”¶è€…è§£è€¦ï¼Œä½¿å¾—è°ƒç”¨è€…å’Œæ¥æ”¶è€…ä¸ç›´æ¥äº¤äº’ã€‚</li><li>ç³»ç»Ÿéœ€è¦åœ¨ä¸åŒçš„æ—¶é—´æŒ‡å®šè¯·æ±‚ã€å°†è¯·æ±‚æ’é˜Ÿå’Œæ‰§è¡Œè¯·æ±‚ã€‚</li><li>ç³»ç»Ÿéœ€è¦æ”¯æŒå‘½ä»¤çš„æ’¤é”€(Undo)æ“ä½œå’Œæ¢å¤(Redo)æ“ä½œã€‚</li><li>ç³»ç»Ÿéœ€è¦å°†ä¸€ç»„æ“ä½œç»„åˆåœ¨ä¸€èµ·ï¼Œå³æ”¯æŒå®å‘½ä»¤</li></ul><h2 id="å…­ã€æ¨¡å¼æ€»ç»“"><a href="#å…­ã€æ¨¡å¼æ€»ç»“" class="headerlink" title="å…­ã€æ¨¡å¼æ€»ç»“"></a>å…­ã€æ¨¡å¼æ€»ç»“</h2><ul><li>åœ¨å‘½ä»¤æ¨¡å¼ä¸­ï¼Œå°†ä¸€ä¸ªè¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œä½¿æˆ‘ä»¬å¯ç”¨ä¸åŒçš„è¯·æ±‚å¯¹å®¢æˆ·è¿›è¡Œå‚æ•°åŒ–ï¼›å¯¹è¯·æ±‚æ’é˜Ÿæˆ–è€…è®°å½•è¯·æ±‚æ—¥å¿—ï¼Œä»¥åŠæ”¯æŒå¯æ’¤é”€çš„æ“ä½œã€‚å‘½ä»¤æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡è¡Œä¸ºå‹æ¨¡å¼ï¼Œå…¶åˆ«åä¸ºåŠ¨ä½œæ¨¡å¼æˆ–äº‹åŠ¡æ¨¡å¼ã€‚</li><li>å‘½ä»¤æ¨¡å¼åŒ…å«å››ä¸ªè§’è‰²ï¼šæŠ½è±¡å‘½ä»¤ç±»ä¸­å£°æ˜äº†ç”¨äºæ‰§è¡Œè¯·æ±‚çš„<code>execute()</code>ç­‰æ–¹æ³•ï¼Œé€šè¿‡è¿™äº›æ–¹æ³•å¯ä»¥è°ƒç”¨è¯·æ±‚æ¥æ”¶è€…çš„ç›¸å…³æ“ä½œï¼›å…·ä½“å‘½ä»¤ç±»æ˜¯æŠ½è±¡å‘½ä»¤ç±»çš„å­ç±»ï¼Œå®ç°äº†åœ¨æŠ½è±¡å‘½ä»¤ç±»ä¸­å£°æ˜çš„æ–¹æ³•ï¼Œå®ƒå¯¹åº”å…·ä½“çš„æ¥æ”¶è€…å¯¹è±¡ï¼Œå°†æ¥æ”¶è€…å¯¹è±¡çš„åŠ¨ä½œç»‘å®šå…¶ä¸­ï¼›è°ƒç”¨è€…å³è¯·æ±‚çš„å‘é€è€…ï¼Œåˆç§°ä¸ºè¯·æ±‚è€…ï¼Œå®ƒé€šè¿‡å‘½ä»¤å¯¹è±¡æ¥æ‰§è¡Œè¯·æ±‚ï¼›æ¥æ”¶è€…æ‰§è¡Œä¸è¯·æ±‚ç›¸å…³çš„æ“ä½œï¼Œå®ƒå…·ä½“å®ç°å¯¹è¯·æ±‚çš„ä¸šåŠ¡å¤„ç†ã€‚</li><li>å‘½ä»¤æ¨¡å¼çš„æœ¬è´¨æ˜¯å¯¹å‘½ä»¤è¿›è¡Œå°è£…ï¼Œå°†å‘å‡ºå‘½ä»¤çš„è´£ä»»å’Œæ‰§è¡Œå‘½ä»¤çš„è´£ä»»åˆ†å‰²å¼€ã€‚å‘½ä»¤æ¨¡å¼ä½¿è¯·æ±‚æœ¬èº«æˆä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å’Œå…¶ä»–å¯¹è±¡ä¸€æ ·å¯ä»¥è¢«å­˜å‚¨å’Œä¼ é€’ã€‚</li><li>å‘½ä»¤æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹åœ¨äºé™ä½ç³»ç»Ÿçš„è€¦åˆåº¦ï¼Œå¢åŠ æ–°çš„å‘½ä»¤å¾ˆæ–¹ä¾¿ï¼Œè€Œä¸”å¯ä»¥æ¯”è¾ƒå®¹æ˜“åœ°è®¾è®¡ä¸€ä¸ªå‘½ä»¤é˜Ÿåˆ—å’Œå®å‘½ä»¤ï¼Œå¹¶æ–¹ä¾¿åœ°å®ç°å¯¹è¯·æ±‚çš„æ’¤é”€å’Œæ¢å¤ï¼›å…¶ä¸»è¦ç¼ºç‚¹åœ¨äºå¯èƒ½ä¼šå¯¼è‡´æŸäº›ç³»ç»Ÿæœ‰è¿‡å¤šçš„å…·ä½“å‘½ä»¤ç±»ã€‚</li><li>å‘½ä»¤æ¨¡å¼é€‚ç”¨æƒ…å†µåŒ…æ‹¬ï¼šéœ€è¦å°†è¯·æ±‚è°ƒç”¨è€…å’Œè¯·æ±‚æ¥æ”¶è€…è§£è€¦ï¼Œä½¿å¾—è°ƒç”¨è€…å’Œæ¥æ”¶è€…ä¸ç›´æ¥äº¤äº’ï¼›éœ€è¦åœ¨ä¸åŒçš„æ—¶é—´æŒ‡å®šè¯·æ±‚ã€å°†è¯·æ±‚æ’é˜Ÿå’Œæ‰§è¡Œè¯·æ±‚ï¼›éœ€è¦æ”¯æŒå‘½ä»¤çš„æ’¤é”€æ“ä½œå’Œæ¢å¤æ“ä½œï¼Œéœ€è¦å°†ä¸€ç»„æ“ä½œç»„åˆåœ¨ä¸€èµ·ï¼Œå³æ”¯æŒå®å‘½ä»¤ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶è®¾è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»£ç æ•´æ´ä¹‹é“å†…å®¹æ¦‚è¦</title>
      <link href="/post/bian-cheng-zhi-dao/dai-ma-zheng-ji-zhi-dao-nei-rong-gai-yao/"/>
      <url>/post/bian-cheng-zhi-dao/dai-ma-zheng-ji-zhi-dao-nei-rong-gai-yao/</url>
      
        <content type="html"><![CDATA[<p>è¯»äº†ä»£ç æ•´æ´ä¹‹é“ï¼Œè§‰å¾—è¿™æœ¬ä¹¦å†™çš„å¾ˆå¥½ï¼Œæ‰€ä»¥å°±å°†é‡Œé¢è‡ªå·±è§‰å¾—å¾ˆç»å…¸çš„å†…å®¹è®°å½•ä¸‹æ¥ï¼Œä½œä¸ºè‡ªå·±ä»¥åå†™ä»£ç çš„æ ‡å‡†å’Œå‡†åˆ™ã€‚åŒæ—¶ä¹Ÿä¸ºé‚£äº›æ›¾ç»å›°æƒ‘è¿‡çš„äººä¸€ç‚¹å‚è€ƒå§ï¼</p><h2 id="ä¸€ã€åœ¨æ­£å¼å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ€è€ƒå‡ ä¸ªå‡ ä¸ªé—®é¢˜ï¼š"><a href="#ä¸€ã€åœ¨æ­£å¼å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ€è€ƒå‡ ä¸ªå‡ ä¸ªé—®é¢˜ï¼š" class="headerlink" title="ä¸€ã€åœ¨æ­£å¼å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ€è€ƒå‡ ä¸ªå‡ ä¸ªé—®é¢˜ï¼š"></a>ä¸€ã€åœ¨æ­£å¼å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ€è€ƒå‡ ä¸ªå‡ ä¸ªé—®é¢˜ï¼š</h2><h3 id="1-éœ€æ±‚ä¸ä»£ç å“ªä¸ªé‡è¦ï¼Ÿ"><a href="#1-éœ€æ±‚ä¸ä»£ç å“ªä¸ªé‡è¦ï¼Ÿ" class="headerlink" title="1.éœ€æ±‚ä¸ä»£ç å“ªä¸ªé‡è¦ï¼Ÿ"></a>1.éœ€æ±‚ä¸ä»£ç å“ªä¸ªé‡è¦ï¼Ÿ</h3><p>ç­”ï¼šå¹¶ä¸æ˜¯æ‰€æœ‰çš„äº§å“éƒ½èƒ½æå‡ºåˆç†çš„éœ€æ±‚ï¼Œå½“ä½ é¢å¯¹ä¸€ä¸ªæå‡ºä¸åˆç†éœ€æ±‚çš„äº§å“çš„æ—¶å€™ï¼Œä½ éœ€è¦åšæŒè‡ªå·±çš„åŸåˆ™ï¼Œä¸èƒ½å¦¥åã€‚</p><h3 id="2-æ˜“è¯»å’Œæ˜“æ‡‚æ˜¯ä¸€å›äº‹å—ï¼Ÿ"><a href="#2-æ˜“è¯»å’Œæ˜“æ‡‚æ˜¯ä¸€å›äº‹å—ï¼Ÿ" class="headerlink" title="2.æ˜“è¯»å’Œæ˜“æ‡‚æ˜¯ä¸€å›äº‹å—ï¼Ÿ"></a>2.æ˜“è¯»å’Œæ˜“æ‡‚æ˜¯ä¸€å›äº‹å—ï¼Ÿ</h3><p>ç­”ï¼šæ˜“è¯»çš„ä»£ç å’Œæ˜“æ‡‚çš„ä»£ç æ˜¯æœ‰åŒºåˆ«çš„ï¼Œä¸æ˜¯æ˜“è¯»çš„ä»£ç å°±æ˜¯æ˜“æ‡‚çš„ä»£ç ã€‚</p><h3 id="3-ä»€ä¹ˆæ˜¯æµ‹è¯•é©±åŠ¨ä»£ç ï¼Ÿ"><a href="#3-ä»€ä¹ˆæ˜¯æµ‹è¯•é©±åŠ¨ä»£ç ï¼Ÿ" class="headerlink" title="3.ä»€ä¹ˆæ˜¯æµ‹è¯•é©±åŠ¨ä»£ç ï¼Ÿ"></a>3.ä»€ä¹ˆæ˜¯æµ‹è¯•é©±åŠ¨ä»£ç ï¼Ÿ</h3><p>ç­”ï¼šæµ‹è¯•é©±åŠ¨ä»£ç ï¼Œä½ å†™çš„ä»£ç è¦å¯ä»¥æ‰§è¡Œå•å…ƒæµ‹è¯•ã€‚å¦‚æœä½ å‘ç°ä½ çš„ä»£ç å¾ˆéš¾å†™å•å…ƒæµ‹è¯•ï¼Œé‚£ä¹ˆä½ å°±è¦æ€è€ƒä½ çš„ä»£ç æ˜¯ä¸æ˜¯å·²ç»ä¸æ•´æ´äº†ï¼Œæˆ–è€…è¯´å·²ç»ä¹±æˆä¸€å›¢äº†ã€‚</p><h3 id="4-ä»€ä¹ˆæ˜¯ç®€å•çš„ä»£ç ï¼Ÿ"><a href="#4-ä»€ä¹ˆæ˜¯ç®€å•çš„ä»£ç ï¼Ÿ" class="headerlink" title="4.ä»€ä¹ˆæ˜¯ç®€å•çš„ä»£ç ï¼Ÿ"></a>4.ä»€ä¹ˆæ˜¯ç®€å•çš„ä»£ç ï¼Ÿ</h3><p>ç­”ï¼š<br>1.èƒ½é€šè¿‡æ‰€æœ‰æµ‹è¯•<br>2.æ²¡æœ‰é‡å¤ä»£ç <br>3.ä½“ç°ç³»ç»Ÿä¸­å…¨éƒ¨è®¾è®¡ç†å¿µ<br>4.åŒ…å«å°½é‡å°‘çš„å®ä½“ï¼ŒåŒ…æ‹¬ï¼Œç±»ï¼Œå‡½æ•°ï¼Œæ–¹æ³•ç­‰</p><p>å¦‚æœæŸæ®µä»£ç åœ¨ç¨‹åºè®¾è®¡ä¸­åå¤å‡ºç°ï¼Œå°±è¯æ˜æƒ³æ³•åœ¨ä»£ç ä¸­æ²¡æœ‰å¾ˆå¥½çš„ä½“ç°å‡ºæ¥ã€‚æ€»ä¹‹ï¼Œä¸è¦é‡å¤ä»£ç ï¼Œåªåšä¸€ä»¶äº‹ï¼Œè¡¨è¾¾åŠ›ï¼Œå°è§„æ¨¡æŠ½è±¡ã€‚</p><h2 id="äºŒã€ç¬¬äºŒç« -æœ‰æ„ä¹‰çš„å‘½å"><a href="#äºŒã€ç¬¬äºŒç« -æœ‰æ„ä¹‰çš„å‘½å" class="headerlink" title="äºŒã€ç¬¬äºŒç«  æœ‰æ„ä¹‰çš„å‘½å"></a>äºŒã€ç¬¬äºŒç«  æœ‰æ„ä¹‰çš„å‘½å</h2><h3 id="1-åå‰¯å…¶å®"><a href="#1-åå‰¯å…¶å®" class="headerlink" title="1.åå‰¯å…¶å®"></a>1.åå‰¯å…¶å®</h3><p>å˜é‡ï¼Œå‡½æ•°æˆ–ç±»çš„åç§°åº”è¯¥å·²ç»ç­”å¤äº†æ‰€æœ‰çš„å¤§é—®é¢˜ã€‚å®ƒåº”è¯¥å‘Šè¯‰ä½ ï¼Œå®ƒä¸ºä»€ä¹ˆä¼šå­˜åœ¨ï¼Œå®ƒåšä»€ä¹ˆäº‹æƒ…ï¼Œåº”è¯¥æ€ä¹ˆç”¨ã€‚å¦‚æœåç§°éœ€è¦æ³¨é‡Šæ¥è¡¥å……ï¼Œé‚£ä¹ˆå°±ä¸ç®—åå‰¯å…¶å®ã€‚</p><h3 id="2-é¿å…è¯¯å¯¼"><a href="#2-é¿å…è¯¯å¯¼" class="headerlink" title="2.é¿å…è¯¯å¯¼"></a>2.é¿å…è¯¯å¯¼</h3><p>å¿…é¡»é¿å…ç•™ä¸‹æ©è—ä»£ç æœ¬æ„çš„é”™è¯¯çº¿ç´¢ã€‚</p><h3 id="3-åšæœ‰æ„ä¹‰çš„åŒºåˆ†"><a href="#3-åšæœ‰æ„ä¹‰çš„åŒºåˆ†" class="headerlink" title="3.åšæœ‰æ„ä¹‰çš„åŒºåˆ†"></a>3.åšæœ‰æ„ä¹‰çš„åŒºåˆ†</h3><p>åªè¦ä½“ç°å‡ºæœ‰æ„ä¹‰çš„åŒºåˆ†ï¼Œä½¿ç”¨aå’Œtheè¿™æ ·çš„å‰ç¼€å°±æ²¡æœ‰é”™ã€‚åºŸè¯å°±æ˜¯å†—ä½™ã€‚</p><h3 id="4-ä½¿ç”¨è¯»å¾—å‡ºæ¥çš„åç§°"><a href="#4-ä½¿ç”¨è¯»å¾—å‡ºæ¥çš„åç§°" class="headerlink" title="4.ä½¿ç”¨è¯»å¾—å‡ºæ¥çš„åç§°"></a>4.ä½¿ç”¨è¯»å¾—å‡ºæ¥çš„åç§°</h3><p>ä¸è¦ç”¨å‚»ä¹ä¹çš„è‡ªé€ è¯ï¼Œè€Œä¸æ˜¯æ°å½“çš„è‹±è¯­è¯ã€‚</p><h3 id="5-ä½¿ç”¨å¯æœç´¢çš„åç§°"><a href="#5-ä½¿ç”¨å¯æœç´¢çš„åç§°" class="headerlink" title="5.ä½¿ç”¨å¯æœç´¢çš„åç§°"></a>5.ä½¿ç”¨å¯æœç´¢çš„åç§°</h3><p>ä½¿ç”¨ä¾¿äºæœç´¢çš„åå­—ã€‚</p><h3 id="6-é¿å…ä½¿ç”¨ç¼–ç "><a href="#6-é¿å…ä½¿ç”¨ç¼–ç " class="headerlink" title="6.é¿å…ä½¿ç”¨ç¼–ç "></a>6.é¿å…ä½¿ç”¨ç¼–ç </h3><p>æŠŠç±»å‹æˆ–è€…ä½œç”¨åŸŸç¼–è¿›åç§°é‡Œé¢ï¼Œå¾’ç„¶å¢åŠ äº†è§£ç çš„è´Ÿæ‹…ã€‚æ²¡ç†ç”±è¦æ±‚æ¯ä½æ–°äººéƒ½åœ¨å¼„æ¸…è¦åº”ä»˜çš„ä»£ç ä¹‹å¤–ï¼Œè¿˜è¦å†ææ‡‚å¦ä¸€ç§ç¼–ç â€è¯­è¨€â€ã€‚</p><h3 id="7-é¿å…æ€ç»´æ˜ å°„"><a href="#7-é¿å…æ€ç»´æ˜ å°„" class="headerlink" title="7.é¿å…æ€ç»´æ˜ å°„"></a>7.é¿å…æ€ç»´æ˜ å°„</h3><p>ä¸åº”å½“è®©è¯»è€…åœ¨è„‘ä¸­æŠŠä½ çš„åç§°ç¿»è¯‘ä¸ºä»–ä»¬ç†ŸçŸ¥çš„åç§°ï¼Œå°¤å…¶æ˜¯åœ¨ç»å¸¸å‡ºç°åœ¨é€‰æ‹©æ˜¯ä½¿ç”¨é—®é¢˜é¢†åŸŸæœ¯è¯­è¿˜æ˜¯è§£å†³æ–¹æ¡ˆé¢†åŸŸæœ¯è¯­çš„æ—¶å€™ã€‚</p><h3 id="8-ç±»åæˆ–å¯¹è±¡åæœ€å¥½ä½¿ç”¨åè¯æˆ–è€…åè¯çŸ­è¯­"><a href="#8-ç±»åæˆ–å¯¹è±¡åæœ€å¥½ä½¿ç”¨åè¯æˆ–è€…åè¯çŸ­è¯­" class="headerlink" title="8.ç±»åæˆ–å¯¹è±¡åæœ€å¥½ä½¿ç”¨åè¯æˆ–è€…åè¯çŸ­è¯­"></a>8.ç±»åæˆ–å¯¹è±¡åæœ€å¥½ä½¿ç”¨åè¯æˆ–è€…åè¯çŸ­è¯­</h3><h3 id="9-æ–¹æ³•åæœ€å¥½ä½¿ç”¨åŠ¨è¯æˆ–è€…åŠ¨è¯çŸ­è¯­"><a href="#9-æ–¹æ³•åæœ€å¥½ä½¿ç”¨åŠ¨è¯æˆ–è€…åŠ¨è¯çŸ­è¯­" class="headerlink" title="9.æ–¹æ³•åæœ€å¥½ä½¿ç”¨åŠ¨è¯æˆ–è€…åŠ¨è¯çŸ­è¯­"></a>9.æ–¹æ³•åæœ€å¥½ä½¿ç”¨åŠ¨è¯æˆ–è€…åŠ¨è¯çŸ­è¯­</h3><h3 id="10-åˆ«æ‰®å¯çˆ±"><a href="#10-åˆ«æ‰®å¯çˆ±" class="headerlink" title="10.åˆ«æ‰®å¯çˆ±"></a>10.åˆ«æ‰®å¯çˆ±</h3><p>å‘½åä¸€å®šè¦é€šä¿—æ˜“æ‡‚ã€‚</p><h3 id="11-æ¯ä¸€ä¸ªæ¦‚å¿µå¯¹åº”ä¸€ä¸ªè¯"><a href="#11-æ¯ä¸€ä¸ªæ¦‚å¿µå¯¹åº”ä¸€ä¸ªè¯" class="headerlink" title="11.æ¯ä¸€ä¸ªæ¦‚å¿µå¯¹åº”ä¸€ä¸ªè¯"></a>11.æ¯ä¸€ä¸ªæ¦‚å¿µå¯¹åº”ä¸€ä¸ªè¯</h3><p>ç»™æ¯ä¸ªæŠ½è±¡æ¦‚å¿µé€‰æ‹©ä¸€ä¸ªè¯ï¼Œå¹¶ä¸€ä»¥è´¯ä¹‹</p><h3 id="12-åˆ«ç”¨åŒå…³è¯­è¯"><a href="#12-åˆ«ç”¨åŒå…³è¯­è¯" class="headerlink" title="12.åˆ«ç”¨åŒå…³è¯­è¯"></a>12.åˆ«ç”¨åŒå…³è¯­è¯</h3><p>é¿å…å°†åŒä¸€ä¸ªè¯ç”¨äºä¸åŒç›®çš„ï¼Œéµå¾ªä¸€è¯ä¸€ä¹‰çš„åŸåˆ™</p><h3 id="13-ä½¿ç”¨è§£å†³æ–¹æ¡ˆé¢†åŸŸå"><a href="#13-ä½¿ç”¨è§£å†³æ–¹æ¡ˆé¢†åŸŸå" class="headerlink" title="13.ä½¿ç”¨è§£å†³æ–¹æ¡ˆé¢†åŸŸå"></a>13.ä½¿ç”¨è§£å†³æ–¹æ¡ˆé¢†åŸŸå</h3><h3 id="14-ä½¿ç”¨æºè‡ªæ‰€æ¶‰é¢†åŸŸå"><a href="#14-ä½¿ç”¨æºè‡ªæ‰€æ¶‰é¢†åŸŸå" class="headerlink" title="14.ä½¿ç”¨æºè‡ªæ‰€æ¶‰é¢†åŸŸå"></a>14.ä½¿ç”¨æºè‡ªæ‰€æ¶‰é¢†åŸŸå</h3><h3 id="15-æ·»åŠ æœ‰æ„ä¹‰çš„è¯­å¢ƒ"><a href="#15-æ·»åŠ æœ‰æ„ä¹‰çš„è¯­å¢ƒ" class="headerlink" title="15.æ·»åŠ æœ‰æ„ä¹‰çš„è¯­å¢ƒ"></a>15.æ·»åŠ æœ‰æ„ä¹‰çš„è¯­å¢ƒ</h3><p>åœ¨ä¸€ä¸ªbeanä¸­å®šä¹‰å˜é‡åçš„æ—¶å€™ï¼Œå˜é‡åä¸€å®šæ˜¯åŸºäºå®é™…ä½¿ç”¨åœºæ™¯ã€‚</p><h3 id="16-ä¸è¦æ·»åŠ æ²¡ç”¨çš„è¯­å¢ƒ"><a href="#16-ä¸è¦æ·»åŠ æ²¡ç”¨çš„è¯­å¢ƒ" class="headerlink" title="16.ä¸è¦æ·»åŠ æ²¡ç”¨çš„è¯­å¢ƒ"></a>16.ä¸è¦æ·»åŠ æ²¡ç”¨çš„è¯­å¢ƒ</h3><h2 id="ä¸‰ã€ç¬¬ä¸‰ç« -å‡½æ•°"><a href="#ä¸‰ã€ç¬¬ä¸‰ç« -å‡½æ•°" class="headerlink" title="ä¸‰ã€ç¬¬ä¸‰ç«  å‡½æ•°"></a>ä¸‰ã€ç¬¬ä¸‰ç«  å‡½æ•°</h2><h3 id="1-çŸ­å°"><a href="#1-çŸ­å°" class="headerlink" title="1.çŸ­å°"></a>1.çŸ­å°</h3><p>å‡½æ•°ç¬¬ä¸€è§„åˆ™æ˜¯è¦çŸ­å°ã€‚ç¬¬äºŒæ¡è§„åˆ™æ˜¯è¿˜è¦æ›´çŸ­å°ã€‚</p><h3 id="2-åªåšä¸€ä»¶äº‹"><a href="#2-åªåšä¸€ä»¶äº‹" class="headerlink" title="2.åªåšä¸€ä»¶äº‹"></a>2.åªåšä¸€ä»¶äº‹</h3><ul><li>å‡½æ•°åº”è¯¥åšä¸€ä»¶äº‹ã€‚åšå¥½è¿™ä»¶äº‹ã€‚åªåšä¸€ä»¶äº‹ã€‚å¦‚æœå¯ä»¥ä»ä½ çš„å‡½æ•°ä¸­è¿˜èƒ½æ‹†åˆ†å‡ºä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¸ä»…åªæ˜¯å•çº¯åœ°é‡æ–°è¯ é‡Šå…¶å®ç°ï¼Œé‚£ä¹ˆä½ è®¾è®¡çš„å‡½æ•°å°±ä¸æ˜¯ä¸€ä¸ªå¥½çš„å‡½æ•°ã€‚</li><li>å‡½æ•°ä¸­çš„åŒºæ®µï¼Œå¦‚æœå‡½æ•°è¢«åˆ‡åˆ†äº†å¤šä¸ªåŒºæ®µï¼Œè¿™å°±è¯æ˜è¯¥å‡½æ•°åšçš„äº‹æƒ…å¤ªå¤šäº†ã€‚</li></ul><h3 id="3-æ¯ä¸ªå‡½æ•°ä¸€ä¸ªæŠ½è±¡å±‚çº§"><a href="#3-æ¯ä¸ªå‡½æ•°ä¸€ä¸ªæŠ½è±¡å±‚çº§" class="headerlink" title="3.æ¯ä¸ªå‡½æ•°ä¸€ä¸ªæŠ½è±¡å±‚çº§"></a>3.æ¯ä¸ªå‡½æ•°ä¸€ä¸ªæŠ½è±¡å±‚çº§</h3><h3 id="4-switchè¯­å¥"><a href="#4-switchè¯­å¥" class="headerlink" title="4.switchè¯­å¥"></a>4.switchè¯­å¥</h3><p>ç¡®ä¿æ¯ä¸ªswitchéƒ½åŸ‹è—åœ¨è¾ƒä½çš„æŠ½è±¡å±‚çº§ï¼Œè€Œä¸”æ°¸è¿œä¸é‡å¤ã€‚</p><h3 id="5-ä½¿ç”¨æè¿°æ€§çš„åç§°"><a href="#5-ä½¿ç”¨æè¿°æ€§çš„åç§°" class="headerlink" title="5.ä½¿ç”¨æè¿°æ€§çš„åç§°"></a>5.ä½¿ç”¨æè¿°æ€§çš„åç§°</h3><p>å‘½åæ–¹å¼è¦ä¿æŒä¸€è‡´ã€‚ä½¿ç”¨ä¸æ¨¡å—åä¸€è„‰ç›¸æ‰¿çš„çŸ­è¯­ã€åè¯å’ŒåŠ¨è¯ç»™å‡½æ•°å‘½åã€‚ä¾‹å¦‚ï¼šincludeSetupPagesã€‚</p><h3 id="6-å‡½æ•°å‚æ•°"><a href="#6-å‡½æ•°å‚æ•°" class="headerlink" title="6.å‡½æ•°å‚æ•°"></a>6.å‡½æ•°å‚æ•°</h3><ul><li>æœ€ç†æƒ³çš„å‡½æ•°å‚æ•°çš„æ•°é‡æ˜¯é›¶ä¸ªï¼Œå…¶æ¬¡æ˜¯ä¸€ï¼Œå†æ¬¡æ˜¯äºŒï¼Œåº”å°½é‡é¿å…ä¸‰ã€‚æœ‰è¶³å¤Ÿçš„ç†ç”±æ‰èƒ½ç”¨ä¸Šä¸‰ä¸ªä»¥ä¸Šçš„å‚æ•°ã€‚</li><li>å¦‚æœå‡½æ•°çœ‹æ¥éœ€è¦ä¸¤ä¸ªï¼Œä¸‰ä¸ªæˆ–è€…ä¸‰ä¸ªä»¥ä¸Šå‚æ•°ï¼Œå°±è¯´æ˜å…¶ä¸­ä¸€äº›å‚æ•°åº”è¯¥å°è£…ä¸ºç±»äº†ã€‚</li><li>å‡½æ•°å’Œå‡½æ•°çš„å‚æ•°å‘½åä¸€èˆ¬æ˜¯åŠ¨åè¯æ¯”è¾ƒå¥½ã€‚</li></ul><h3 id="7-æ— å‰¯ä½œç”¨"><a href="#7-æ— å‰¯ä½œç”¨" class="headerlink" title="7.æ— å‰¯ä½œç”¨"></a>7.æ— å‰¯ä½œç”¨</h3><h3 id="8-åˆ†å‰²æŒ‡ä»¤ä¸æŸ¥è¯¢"><a href="#8-åˆ†å‰²æŒ‡ä»¤ä¸æŸ¥è¯¢" class="headerlink" title="8.åˆ†å‰²æŒ‡ä»¤ä¸æŸ¥è¯¢"></a>8.åˆ†å‰²æŒ‡ä»¤ä¸æŸ¥è¯¢</h3><p>å‡½æ•°è¦ä¹ˆåšä»€ä¹ˆäº‹ï¼Œè¦ä¹ˆå›ç­”ä»€ä¹ˆäº‹ï¼Œä½†äºŒè€…ä¸å¯å…¼å¾—</p><h3 id="9-ä½¿ç”¨å¼‚å¸¸æ›¿ä»£è¿”å›é”™è¯¯ç "><a href="#9-ä½¿ç”¨å¼‚å¸¸æ›¿ä»£è¿”å›é”™è¯¯ç " class="headerlink" title="9.ä½¿ç”¨å¼‚å¸¸æ›¿ä»£è¿”å›é”™è¯¯ç "></a>9.ä½¿ç”¨å¼‚å¸¸æ›¿ä»£è¿”å›é”™è¯¯ç </h3><ul><li>è¿”å›é”™è¯¯ç çš„æ—¶å€™ï¼Œå°±æ˜¯åœ¨è¦æ±‚è°ƒç”¨è€…ç«‹åˆ»å¤„ç†é”™è¯¯ã€‚</li><li>å¦‚æœä½¿ç”¨å¼‚å¸¸æ›¿ä»£è¿”å›é”™è¯¯ç ï¼Œé”™è¯¯å¤„ç†ä»£ç å°±èƒ½ä»ä½è·¯å¾„ä»£ç ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œå¾—åˆ°ç®€åŒ–ã€‚</li><li>æŠ½ç¦»try/catchä»£ç å—</li></ul><h3 id="10-åˆ«é‡å¤è‡ªå·±"><a href="#10-åˆ«é‡å¤è‡ªå·±" class="headerlink" title="10.åˆ«é‡å¤è‡ªå·±"></a>10.åˆ«é‡å¤è‡ªå·±</h3><h3 id="11-ç»“æ„åŒ–ç¼–ç¨‹"><a href="#11-ç»“æ„åŒ–ç¼–ç¨‹" class="headerlink" title="11.ç»“æ„åŒ–ç¼–ç¨‹"></a>11.ç»“æ„åŒ–ç¼–ç¨‹</h3><h2 id="å››ã€ç¬¬å››ç« -æ³¨é‡Š"><a href="#å››ã€ç¬¬å››ç« -æ³¨é‡Š" class="headerlink" title="å››ã€ç¬¬å››ç«  æ³¨é‡Š"></a>å››ã€ç¬¬å››ç«  æ³¨é‡Š</h2><h3 id="1-å¦‚æœä½ ä»£ç å†™çš„è¶³å¤Ÿå¥½çš„è¯ï¼Œå¯ä»¥è®©äººä¸€çœ‹å°±æ‡‚ï¼Œé‚£ä¹ˆä½ å°±ä¸éœ€è¦å†å†™æ³¨é‡Šã€‚å¦‚æœä½ çš„ä»£ç éœ€è¦æ³¨é‡Šï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æƒ³æƒ³æ˜¯ä¸æ˜¯ä½ çš„è¡¨è¾¾æ°´å¹³æœ‰é—®é¢˜ã€‚"><a href="#1-å¦‚æœä½ ä»£ç å†™çš„è¶³å¤Ÿå¥½çš„è¯ï¼Œå¯ä»¥è®©äººä¸€çœ‹å°±æ‡‚ï¼Œé‚£ä¹ˆä½ å°±ä¸éœ€è¦å†å†™æ³¨é‡Šã€‚å¦‚æœä½ çš„ä»£ç éœ€è¦æ³¨é‡Šï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æƒ³æƒ³æ˜¯ä¸æ˜¯ä½ çš„è¡¨è¾¾æ°´å¹³æœ‰é—®é¢˜ã€‚" class="headerlink" title="1.å¦‚æœä½ ä»£ç å†™çš„è¶³å¤Ÿå¥½çš„è¯ï¼Œå¯ä»¥è®©äººä¸€çœ‹å°±æ‡‚ï¼Œé‚£ä¹ˆä½ å°±ä¸éœ€è¦å†å†™æ³¨é‡Šã€‚å¦‚æœä½ çš„ä»£ç éœ€è¦æ³¨é‡Šï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æƒ³æƒ³æ˜¯ä¸æ˜¯ä½ çš„è¡¨è¾¾æ°´å¹³æœ‰é—®é¢˜ã€‚"></a>1.å¦‚æœä½ ä»£ç å†™çš„è¶³å¤Ÿå¥½çš„è¯ï¼Œå¯ä»¥è®©äººä¸€çœ‹å°±æ‡‚ï¼Œé‚£ä¹ˆä½ å°±ä¸éœ€è¦å†å†™æ³¨é‡Šã€‚å¦‚æœä½ çš„ä»£ç éœ€è¦æ³¨é‡Šï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æƒ³æƒ³æ˜¯ä¸æ˜¯ä½ çš„è¡¨è¾¾æ°´å¹³æœ‰é—®é¢˜ã€‚</h3><h3 id="2-çœŸæ­£å¥½çš„æ³¨é‡Šæ˜¯æƒ³åŠæ³•ä¸ç”¨å†™æ³¨é‡Šï¼Œé‚£ä¹ˆä»€ä¹ˆæ ·çš„æ³¨é‡Šéœ€è¦å†™å‘¢ï¼Ÿ"><a href="#2-çœŸæ­£å¥½çš„æ³¨é‡Šæ˜¯æƒ³åŠæ³•ä¸ç”¨å†™æ³¨é‡Šï¼Œé‚£ä¹ˆä»€ä¹ˆæ ·çš„æ³¨é‡Šéœ€è¦å†™å‘¢ï¼Ÿ" class="headerlink" title="2.çœŸæ­£å¥½çš„æ³¨é‡Šæ˜¯æƒ³åŠæ³•ä¸ç”¨å†™æ³¨é‡Šï¼Œé‚£ä¹ˆä»€ä¹ˆæ ·çš„æ³¨é‡Šéœ€è¦å†™å‘¢ï¼Ÿ"></a>2.çœŸæ­£å¥½çš„æ³¨é‡Šæ˜¯æƒ³åŠæ³•ä¸ç”¨å†™æ³¨é‡Šï¼Œé‚£ä¹ˆä»€ä¹ˆæ ·çš„æ³¨é‡Šéœ€è¦å†™å‘¢ï¼Ÿ</h3><ul><li>æ³•å¾‹ä¿¡æ¯</li><li>æä¾›ä¿¡æ¯çš„æ³¨é‡Š</li><li>æä¾›æ„å›¾çš„è§£é‡Š</li><li>é˜é‡Š</li><li>è­¦å‘Š</li><li>TODOæ³¨é‡Š</li><li>TODOæ˜¯ä¸€ç§ç¨‹åºè¦è®¤ä¸ºåº”è¯¥è¦åšçš„ï¼Œä½†æ˜¯ç”±äºæŸç§åŸå› æ²¡æœ‰åšçš„</li><li>æ”¾å¤§,æ”¾å¤§æŸäº›çœ‹ä¼¼ä¸åˆç†çš„åœ°æ–¹</li></ul><h2 id="äº”ã€ç¬¬å…­ç« -å¯¹è±¡å’Œæ•°æ®ç»“æ„"><a href="#äº”ã€ç¬¬å…­ç« -å¯¹è±¡å’Œæ•°æ®ç»“æ„" class="headerlink" title="äº”ã€ç¬¬å…­ç«  å¯¹è±¡å’Œæ•°æ®ç»“æ„"></a>äº”ã€ç¬¬å…­ç«  å¯¹è±¡å’Œæ•°æ®ç»“æ„</h2><h3 id="1-å¾—å¢¨å¿’å®šå¾‹"><a href="#1-å¾—å¢¨å¿’å®šå¾‹" class="headerlink" title="1.å¾—å¢¨å¿’å®šå¾‹"></a>1.å¾—å¢¨å¿’å®šå¾‹</h3><p>æ¨¡å—ä¸åº”è¯¥äº†è§£ä»–æ‰€æ“ä½œå¯¹è±¡çš„å†…éƒ¨æƒ…å½¢ã€‚å¯¹è±¡éšè—æ•°æ®æ›éœ²æ“ä½œï¼Œè¿™å°±æ„å‘³ç€å¯¹è±¡ä¸åº”è¯¥é€šè¿‡å­˜å–å™¨æ›éœ²å…¶å†…éƒ¨ç»“æ„ã€‚</p><h2 id="å…­ã€ç¬¬ä¸ƒç« -é”™è¯¯å¤„ç†"><a href="#å…­ã€ç¬¬ä¸ƒç« -é”™è¯¯å¤„ç†" class="headerlink" title="å…­ã€ç¬¬ä¸ƒç«  é”™è¯¯å¤„ç†"></a>å…­ã€ç¬¬ä¸ƒç«  é”™è¯¯å¤„ç†</h2><h3 id="1-å°†ä¸šåŠ¡é€»è¾‘å’Œå‡ºé”™å¤„ç†ä¸€å®šè¦éš”ç¦»å¼€ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰çš„æƒ…å†µéƒ½è¯•ç”¨ï¼Œåœ¨ä¸é€‚ç”¨çš„æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªé…ç½®å¯¹è±¡å°†ç‰¹æ®Šæƒ…å†µç»™äºˆè¿”å›ã€‚"><a href="#1-å°†ä¸šåŠ¡é€»è¾‘å’Œå‡ºé”™å¤„ç†ä¸€å®šè¦éš”ç¦»å¼€ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰çš„æƒ…å†µéƒ½è¯•ç”¨ï¼Œåœ¨ä¸é€‚ç”¨çš„æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªé…ç½®å¯¹è±¡å°†ç‰¹æ®Šæƒ…å†µç»™äºˆè¿”å›ã€‚" class="headerlink" title="1.å°†ä¸šåŠ¡é€»è¾‘å’Œå‡ºé”™å¤„ç†ä¸€å®šè¦éš”ç¦»å¼€ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰çš„æƒ…å†µéƒ½è¯•ç”¨ï¼Œåœ¨ä¸é€‚ç”¨çš„æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªé…ç½®å¯¹è±¡å°†ç‰¹æ®Šæƒ…å†µç»™äºˆè¿”å›ã€‚"></a>1.å°†ä¸šåŠ¡é€»è¾‘å’Œå‡ºé”™å¤„ç†ä¸€å®šè¦éš”ç¦»å¼€ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰çš„æƒ…å†µéƒ½è¯•ç”¨ï¼Œåœ¨ä¸é€‚ç”¨çš„æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªé…ç½®å¯¹è±¡å°†ç‰¹æ®Šæƒ…å†µç»™äºˆè¿”å›ã€‚</h3><h3 id="2-å¼‚å¸¸å¤„ç†ä¸èƒ½è¿‡å¤šçš„æ›éœ²å®ç°ç»†èŠ‚ï¼Œä¸»è¦æç°åœ¨å¼‚å¸¸æŠ›å‡ºçš„æ ˆä¿¡æ¯ä¸Šã€‚"><a href="#2-å¼‚å¸¸å¤„ç†ä¸èƒ½è¿‡å¤šçš„æ›éœ²å®ç°ç»†èŠ‚ï¼Œä¸»è¦æç°åœ¨å¼‚å¸¸æŠ›å‡ºçš„æ ˆä¿¡æ¯ä¸Šã€‚" class="headerlink" title="2.å¼‚å¸¸å¤„ç†ä¸èƒ½è¿‡å¤šçš„æ›éœ²å®ç°ç»†èŠ‚ï¼Œä¸»è¦æç°åœ¨å¼‚å¸¸æŠ›å‡ºçš„æ ˆä¿¡æ¯ä¸Šã€‚"></a>2.å¼‚å¸¸å¤„ç†ä¸èƒ½è¿‡å¤šçš„æ›éœ²å®ç°ç»†èŠ‚ï¼Œä¸»è¦æç°åœ¨å¼‚å¸¸æŠ›å‡ºçš„æ ˆä¿¡æ¯ä¸Šã€‚</h3><h2 id="ä¸ƒã€ç¬¬å…«ç« -è¾¹ç•Œ"><a href="#ä¸ƒã€ç¬¬å…«ç« -è¾¹ç•Œ" class="headerlink" title="ä¸ƒã€ç¬¬å…«ç«  è¾¹ç•Œ"></a>ä¸ƒã€ç¬¬å…«ç«  è¾¹ç•Œ</h2><h3 id="1-æ•´æ´çš„è¾¹ç•Œï¼Œè¾¹ç•Œä¸Šçš„ä»£ç è¦æ¸…æ™°çš„åˆ†å‰²å’Œå®šä¹‰äº†æœŸæœ›çš„æµ‹è¯•ã€‚åº”è¯¥é¿å…æˆ‘ä»¬çš„ä»£ç è¿‡å¤šåœ°äº†è§£ç¬¬ä¸‰æ–¹ä»£ç ä¸­çš„ç‰¹å®šä¿¡æ¯ã€‚"><a href="#1-æ•´æ´çš„è¾¹ç•Œï¼Œè¾¹ç•Œä¸Šçš„ä»£ç è¦æ¸…æ™°çš„åˆ†å‰²å’Œå®šä¹‰äº†æœŸæœ›çš„æµ‹è¯•ã€‚åº”è¯¥é¿å…æˆ‘ä»¬çš„ä»£ç è¿‡å¤šåœ°äº†è§£ç¬¬ä¸‰æ–¹ä»£ç ä¸­çš„ç‰¹å®šä¿¡æ¯ã€‚" class="headerlink" title="1.æ•´æ´çš„è¾¹ç•Œï¼Œè¾¹ç•Œä¸Šçš„ä»£ç è¦æ¸…æ™°çš„åˆ†å‰²å’Œå®šä¹‰äº†æœŸæœ›çš„æµ‹è¯•ã€‚åº”è¯¥é¿å…æˆ‘ä»¬çš„ä»£ç è¿‡å¤šåœ°äº†è§£ç¬¬ä¸‰æ–¹ä»£ç ä¸­çš„ç‰¹å®šä¿¡æ¯ã€‚"></a>1.æ•´æ´çš„è¾¹ç•Œï¼Œè¾¹ç•Œä¸Šçš„ä»£ç è¦æ¸…æ™°çš„åˆ†å‰²å’Œå®šä¹‰äº†æœŸæœ›çš„æµ‹è¯•ã€‚åº”è¯¥é¿å…æˆ‘ä»¬çš„ä»£ç è¿‡å¤šåœ°äº†è§£ç¬¬ä¸‰æ–¹ä»£ç ä¸­çš„ç‰¹å®šä¿¡æ¯ã€‚</h3><h2 id="å…«ã€ç¬¬ä¹ç« -å•å…ƒæµ‹è¯•"><a href="#å…«ã€ç¬¬ä¹ç« -å•å…ƒæµ‹è¯•" class="headerlink" title="å…«ã€ç¬¬ä¹ç«  å•å…ƒæµ‹è¯•"></a>å…«ã€ç¬¬ä¹ç«  å•å…ƒæµ‹è¯•</h2><h3 id="1-TDDä¸‰å®šå¾‹"><a href="#1-TDDä¸‰å®šå¾‹" class="headerlink" title="1.TDDä¸‰å®šå¾‹"></a>1.TDDä¸‰å®šå¾‹</h3><ul><li>åœ¨ç¼–å†™ä¸èƒ½é€šè¿‡çš„å•å…ƒæµ‹è¯•å‰ï¼Œä¸å¯ç¼–å†™ç”Ÿäº§ä»£ç ã€‚</li><li>åªå¯ç¼–å†™åˆšå¥½æ— æ³•é€šè¿‡çš„å•å…ƒæµ‹è¯•ï¼Œä¸èƒ½ç¼–è¯‘ä¹Ÿç®—ä¸é€šè¿‡</li><li>åªå¯ç¼–å†™åˆšå¥½è¶³ä»¥é€šè¿‡å½“å‰å¤±è´¥æµ‹è¯•çš„ç”Ÿäº§ä»£ç </li></ul><h3 id="2-æ•´æ´æµ‹è¯•ä¸‰è¦ç´ "><a href="#2-æ•´æ´æµ‹è¯•ä¸‰è¦ç´ " class="headerlink" title="2.æ•´æ´æµ‹è¯•ä¸‰è¦ç´ "></a>2.æ•´æ´æµ‹è¯•ä¸‰è¦ç´ </h3><ul><li>å¯è¯»æ€§</li><li>å¯è¯»æ€§</li><li>å¯è¯»æ€§</li></ul><h3 id="3-æ•´æ´æµ‹è¯•çš„äº”æ¡åŸåˆ™ï¼š"><a href="#3-æ•´æ´æµ‹è¯•çš„äº”æ¡åŸåˆ™ï¼š" class="headerlink" title="3.æ•´æ´æµ‹è¯•çš„äº”æ¡åŸåˆ™ï¼š"></a>3.æ•´æ´æµ‹è¯•çš„äº”æ¡åŸåˆ™ï¼š</h3><ul><li>å¿«é€Ÿï¼Œæµ‹è¯•åº”è¯¥å¤Ÿå¿«</li><li>ç‹¬ç«‹ï¼Œæµ‹è¯•åº”è¯¥ç›¸äº’ç‹¬ç«‹</li><li>å¯é‡å¤ï¼Œæµ‹è¯•åº”å½“å¯åœ¨ä»»ä½•ç¯å¢ƒä¸­é‡å¤é€šè¿‡ã€‚</li><li>è‡ªè¶³éªŒè¯ï¼Œæµ‹è¯•åº”è¯¥æœ‰å¸ƒå°”å€¼è¾“å‡ºï¼Œæ— è®ºæµ‹è¯•æ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œä¸åº”è¯¥äººå·¥é€šè¿‡logæ¥ç¡®è®¤æµ‹è¯•æ˜¯å¦æˆåŠŸæˆ–è€…å¤±è´¥ã€‚</li><li>åŠæ—¶ï¼Œæµ‹è¯•åº”åŠæ—¶ç¼–å†™ã€‚å•å…ƒæµ‹è¯•åº”è¯¥æ°å¥½åœ¨ä½¿å…¶é€šè¿‡çš„ç”Ÿäº§ä»£ç ä¹‹å‰ç¼–å†™ã€‚å¦‚æœåœ¨ç¼–å†™ç”Ÿäº§ä»£ç ä¹‹åç¼–å†™æµ‹è¯•ï¼Œä½ ä¼šå‘ç°ç”Ÿäº§ä»£ç éš¾ä»¥æµ‹è¯•ã€‚ä½ å¯èƒ½ä¼šè®¤ä¸ºæŸäº›ç”Ÿäº§ä»£ç æœ¬èº«éš¾ä»¥æµ‹è¯•ã€‚ä½ å¯èƒ½ä¸ä¼šå»è®¾è®¡å¯æµ‹è¯•çš„ä»£ç ã€‚</li></ul><h2 id="ä¹ã€ç¬¬åç« -ç±»"><a href="#ä¹ã€ç¬¬åç« -ç±»" class="headerlink" title="ä¹ã€ç¬¬åç«  ç±»"></a>ä¹ã€ç¬¬åç«  ç±»</h2><h3 id="1-å•ä¸€æƒè´£åŸåˆ™ï¼Œç±»æˆ–è€…æ¨¡å—åº”æœ‰ä¸”åªæœ‰ä¸€æ¡åŠ ä»¥ä¿®æ”¹çš„ç†ç”±ã€‚"><a href="#1-å•ä¸€æƒè´£åŸåˆ™ï¼Œç±»æˆ–è€…æ¨¡å—åº”æœ‰ä¸”åªæœ‰ä¸€æ¡åŠ ä»¥ä¿®æ”¹çš„ç†ç”±ã€‚" class="headerlink" title="1.å•ä¸€æƒè´£åŸåˆ™ï¼Œç±»æˆ–è€…æ¨¡å—åº”æœ‰ä¸”åªæœ‰ä¸€æ¡åŠ ä»¥ä¿®æ”¹çš„ç†ç”±ã€‚"></a>1.å•ä¸€æƒè´£åŸåˆ™ï¼Œç±»æˆ–è€…æ¨¡å—åº”æœ‰ä¸”åªæœ‰ä¸€æ¡åŠ ä»¥ä¿®æ”¹çš„ç†ç”±ã€‚</h3><h3 id="2-å†…èšï¼Œå¦‚æœä¸€ä¸ªç±»ä¸­çš„æ¯ä¸ªå˜é‡éƒ½è¢«æ¯ä¸ªæ–¹æ³•æ‰€ä½¿ç”¨ï¼Œåˆ™è¯¥ç±»å…·æœ‰æœ€å¤§çš„å†…èšæ€§ã€‚å†…èšæ€§é«˜ï¼Œæ„å‘³ç€ç±»ä¸­çš„æ–¹æ³•å’Œå˜é‡ç›¸äº’ä¾èµ–ï¼Œç›¸äº’ç»“åˆæˆä¸€ä¸ªé€»è¾‘æ•´ä½“ã€‚"><a href="#2-å†…èšï¼Œå¦‚æœä¸€ä¸ªç±»ä¸­çš„æ¯ä¸ªå˜é‡éƒ½è¢«æ¯ä¸ªæ–¹æ³•æ‰€ä½¿ç”¨ï¼Œåˆ™è¯¥ç±»å…·æœ‰æœ€å¤§çš„å†…èšæ€§ã€‚å†…èšæ€§é«˜ï¼Œæ„å‘³ç€ç±»ä¸­çš„æ–¹æ³•å’Œå˜é‡ç›¸äº’ä¾èµ–ï¼Œç›¸äº’ç»“åˆæˆä¸€ä¸ªé€»è¾‘æ•´ä½“ã€‚" class="headerlink" title="2.å†…èšï¼Œå¦‚æœä¸€ä¸ªç±»ä¸­çš„æ¯ä¸ªå˜é‡éƒ½è¢«æ¯ä¸ªæ–¹æ³•æ‰€ä½¿ç”¨ï¼Œåˆ™è¯¥ç±»å…·æœ‰æœ€å¤§çš„å†…èšæ€§ã€‚å†…èšæ€§é«˜ï¼Œæ„å‘³ç€ç±»ä¸­çš„æ–¹æ³•å’Œå˜é‡ç›¸äº’ä¾èµ–ï¼Œç›¸äº’ç»“åˆæˆä¸€ä¸ªé€»è¾‘æ•´ä½“ã€‚"></a>2.å†…èšï¼Œå¦‚æœä¸€ä¸ªç±»ä¸­çš„æ¯ä¸ªå˜é‡éƒ½è¢«æ¯ä¸ªæ–¹æ³•æ‰€ä½¿ç”¨ï¼Œåˆ™è¯¥ç±»å…·æœ‰æœ€å¤§çš„å†…èšæ€§ã€‚å†…èšæ€§é«˜ï¼Œæ„å‘³ç€ç±»ä¸­çš„æ–¹æ³•å’Œå˜é‡ç›¸äº’ä¾èµ–ï¼Œç›¸äº’ç»“åˆæˆä¸€ä¸ªé€»è¾‘æ•´ä½“ã€‚</h3><h2 id="åã€ç¬¬åä¸€ç« -ç³»ç»Ÿ"><a href="#åã€ç¬¬åä¸€ç« -ç³»ç»Ÿ" class="headerlink" title="åã€ç¬¬åä¸€ç«  ç³»ç»Ÿ"></a>åã€ç¬¬åä¸€ç«  ç³»ç»Ÿ</h2><h3 id="1-å°†ç³»ç»Ÿçš„æ„é€ ä¸ä½¿ç”¨åˆ†å¼€"><a href="#1-å°†ç³»ç»Ÿçš„æ„é€ ä¸ä½¿ç”¨åˆ†å¼€" class="headerlink" title="1.å°†ç³»ç»Ÿçš„æ„é€ ä¸ä½¿ç”¨åˆ†å¼€"></a>1.å°†ç³»ç»Ÿçš„æ„é€ ä¸ä½¿ç”¨åˆ†å¼€</h3><p>è½¯ä»¶ç³»ç»Ÿåº”å°†èµ·å§‹è¿‡ç¨‹å’Œå¯å§‹è¿‡ç¨‹ä¹‹åçš„è¿è¡Œæ—¶é€»è¾‘åˆ†ç¦»å¼€ï¼Œåœ¨èµ·å§‹è¿‡ç¨‹ä¸­æ„å»ºåº”ç”¨å¯¹è±¡ï¼Œä¹Ÿä¼šå­˜åœ¨ç›¸äº’ç¼ ç»“çš„ä¾èµ–å…³ç³»ã€‚ï¼ˆå»¶è¿Ÿåˆå§‹åŒ–å¯ä»¥åŠ å¿«ç¨‹åºè¿è¡Œé€Ÿåº¦ï¼‰</p><h4 id="1-1åˆ†è§£main"><a href="#1-1åˆ†è§£main" class="headerlink" title="1.1åˆ†è§£main"></a>1.1åˆ†è§£main</h4><p>å°†ç¨‹åºçš„æ„é€ æ”¾åˆ°mainï¼Œå¹¶ä½¿å…¶ä¸è¿è¡Œæ—¶é€»è¾‘åˆ†å¼€ï¼Œmainåªç®¡æ„é€ å¹¶å°†æ„é€ åçš„æ•°æ®å¯¹è±¡å‘é€ç»™å„ä¸ªåº”ç”¨ï¼Œæˆ–è€…è¢«å„ä¸ªåº”ç”¨ä½¿ç”¨ã€‚ä½†æ˜¯ï¼Œä¸å‚ä¸è¿è¡Œæ—¶çš„ä»»ä½•é€»è¾‘æ§åˆ¶ã€‚</p><h4 id="1-2å·¥å‚æ¨¡å¼"><a href="#1-2å·¥å‚æ¨¡å¼" class="headerlink" title="1.2å·¥å‚æ¨¡å¼"></a>1.2å·¥å‚æ¨¡å¼</h4><p>ä½¿ç”¨è¯¥æ¨¡å¼å¯ä»¥å°†ç³»ç»Ÿæ„é€ å’Œç³»ç»Ÿè¿è¡Œæ—¶é€»è¾‘åˆ†å¼€ã€‚</p><h4 id="1-3ä¾èµ–æ³¨å…¥ï¼ˆéœ€è¦å¼ºåŒ–ç†è§£ï¼‰"><a href="#1-3ä¾èµ–æ³¨å…¥ï¼ˆéœ€è¦å¼ºåŒ–ç†è§£ï¼‰" class="headerlink" title="1.3ä¾èµ–æ³¨å…¥ï¼ˆéœ€è¦å¼ºåŒ–ç†è§£ï¼‰"></a>1.3ä¾èµ–æ³¨å…¥ï¼ˆéœ€è¦å¼ºåŒ–ç†è§£ï¼‰</h4><h4 id="1-4æ‰©å®¹"><a href="#1-4æ‰©å®¹" class="headerlink" title="1.4æ‰©å®¹"></a>1.4æ‰©å®¹</h4><p>â€œä¸€å¼€å§‹å°±åšå¯¹ç³»ç»Ÿâ€çº¯å±ç¥è¯ã€‚åä¹‹ï¼Œæˆ‘ä»¬åº”è¯¥åªå»å®ç°ä»Šå¤©çš„ç”¨æˆ·æ•…äº‹ï¼Œç„¶åé‡æ„ï¼Œæ˜å¤©å†æ‰©å±•ç³»ç»Ÿï¼Œå®ç°æ–°ç”¨æˆ·çš„æ•…äº‹ã€‚è¿™å°±æ˜¯è¿­ä»£å’Œå¢é‡æ•æ·çš„ç²¾é«“æ‰€åœ¨ã€‚æµ‹è¯•é©±åŠ¨å¼€å‘ï¼Œé‡æ„ä»¥åŠä»–ä»¬æ‰“é€ å‡ºçš„æ•´æ´çš„ä»£ç ã€‚</p><h4 id="1-5æµ‹è¯•é©±åŠ¨ç³»ç»Ÿæ¶æ„"><a href="#1-5æµ‹è¯•é©±åŠ¨ç³»ç»Ÿæ¶æ„" class="headerlink" title="1.5æµ‹è¯•é©±åŠ¨ç³»ç»Ÿæ¶æ„"></a>1.5æµ‹è¯•é©±åŠ¨ç³»ç»Ÿæ¶æ„</h4><p>æœ€ä½³çš„ç³»ç»Ÿæ¶æ„ç”±æ¨¡å—åŒ–çš„å…³æ³¨é¢é¢†åŸŸç»„æˆï¼Œæ¯ä¸ªå…³æ³¨é¢å‡ç”¨çº¯ç¼–ç¨‹è¯­è¨€å¯¹è±¡å®ç°ã€‚ä¸åŒçš„é¢†åŸŸä¹‹é—´ç”¨æœ€ä¸å…·æœ‰ä¾µå®³æ€§çš„æ–¹é¢æˆ–ç±»æ–¹é¢å·¥å…·ç»“åˆèµ·æ¥ã€‚è¿™ç§æ¶æ„å°±èƒ½æµ‹è¯•é©±åŠ¨ï¼Œå°±åƒä»£ç ä¸€æ ·ã€‚(éœ€è¦å…³æ³¨é¢å‘åˆ‡ç‰‡ç¼–ç¨‹(POJO))</p><h4 id="1-6ä¼˜åŒ–å†³ç­–"><a href="#1-6ä¼˜åŒ–å†³ç­–" class="headerlink" title="1.6ä¼˜åŒ–å†³ç­–"></a>1.6ä¼˜åŒ–å†³ç­–</h4><p>æ¨¡å—åŒ–å’Œå…³æ³¨é¢åˆ‡åˆ†æˆå°±äº†åˆ†æ•£åŒ–ç®¡ç†å’Œå†³ç­–ã€‚åœ¨å·¨å¤§çš„ç³»ç»Ÿä¸­ï¼Œä¸ç®¡æ˜¯ä¸€åº§åŸå¸‚æˆ–æ˜¯ä¸€ä¸ªè½¯ä»¶é¡¹ç›®ï¼Œæ— äººèƒ½åšæ‰€æœ‰çš„å†³ç­–ã€‚æœ€å¥½æ˜¯æˆæƒç»™æœ€æœ‰èµ„æ ¼çš„äººã€‚æ‹¥æœ‰æ¨¡å—åŒ–å…³æ³¨é¢çš„POJOç³»ç»Ÿæä¾›çš„æ•æ·èƒ½åŠ›ï¼Œå…è®¸æˆ‘ä»¬åŸºäºæœ€æ–°çš„çŸ¥è¯†åšå‡ºä¼˜åŒ–çš„ï¼Œæ—¶æœºåˆšå¥½çš„å†³ç­–ã€‚å†³ç­–çš„å¤æ‚æ€§é™ä½äº†ã€‚</p><h2 id="åä¸€ã€ç¬¬åäºŒç« -è¿­è¿›"><a href="#åä¸€ã€ç¬¬åäºŒç« -è¿­è¿›" class="headerlink" title="åä¸€ã€ç¬¬åäºŒç«  è¿­è¿›"></a>åä¸€ã€ç¬¬åäºŒç«  è¿­è¿›</h2><h3 id="1-é€šè¿‡è¿­è¿›è®¾è®¡è¾¾åˆ°ä»£ç æ•´æ´çš„ç›®çš„ï¼š"><a href="#1-é€šè¿‡è¿­è¿›è®¾è®¡è¾¾åˆ°ä»£ç æ•´æ´çš„ç›®çš„ï¼š" class="headerlink" title="1. é€šè¿‡è¿­è¿›è®¾è®¡è¾¾åˆ°ä»£ç æ•´æ´çš„ç›®çš„ï¼š"></a>1. é€šè¿‡è¿­è¿›è®¾è®¡è¾¾åˆ°ä»£ç æ•´æ´çš„ç›®çš„ï¼š</h3><p>é€šè¿‡è¿™å‡ ä¸ªåŸåˆ™å¯ä»¥è®©ä½ çš„è®¾è®¡å˜ç®€å•ï¼ˆDIPï¼ŒSRPï¼‰</p><ul><li>è¿è¡Œæ‰€æœ‰æµ‹è¯•</li><li>ä¸å¯é‡å¤ï¼Œ</li><li>è¡¨è¾¾äº†ç¨‹åºå‘˜çš„æ„å›¾</li><li>å°½å¯èƒ½å‡å°‘ç±»å’Œæ–¹æ³•çš„æ•°é‡</li><li>ä»¥ä¸Šè§„åˆ™æŒ‰å…¶é‡è¦ç¨‹åº¦æ’åº</li></ul><h3 id="2-ç®€å•è®¾è®¡è§„åˆ™1-è¿è¡Œæ‰€æœ‰æµ‹è¯•"><a href="#2-ç®€å•è®¾è®¡è§„åˆ™1-è¿è¡Œæ‰€æœ‰æµ‹è¯•" class="headerlink" title="2. ç®€å•è®¾è®¡è§„åˆ™1:è¿è¡Œæ‰€æœ‰æµ‹è¯•"></a>2. ç®€å•è®¾è®¡è§„åˆ™1:è¿è¡Œæ‰€æœ‰æµ‹è¯•</h3><p>ç¼–å†™çš„æµ‹è¯•è¶Šå¤šå°±è¶Šèƒ½æŒç»­èµ°å‘ç¼–å†™è¾ƒæ˜“æµ‹è¯•çš„ä»£ç ï¼Œç´§è€¦åˆçš„ä»£ç å¾ˆéš¾ç¼–å†™æµ‹è¯•ã€‚éµå¾ªæœ‰å…³ç¼–å†™æµ‹è¯•å¹¶æŒç»­è¿è¡Œæµ‹è¯•çš„ç®€å•ï¼Œæ˜ç¡®çš„è§„åˆ™ï¼Œç³»ç»Ÿå°±ä¼šæ›´è´´è¿‘OOä½è€¦åˆåº¦ï¼Œé«˜å†…èšåº¦çš„ç›®æ ‡ã€‚ç¼–å†™æµ‹è¯•å¼•è‡´æ›´å¥½çš„è®¾è®¡ã€‚</p><h3 id="3-ç®€å•è®¾è®¡è§„åˆ™2-4ï¼šé‡æ„"><a href="#3-ç®€å•è®¾è®¡è§„åˆ™2-4ï¼šé‡æ„" class="headerlink" title="3. ç®€å•è®¾è®¡è§„åˆ™2-4ï¼šé‡æ„"></a>3. ç®€å•è®¾è®¡è§„åˆ™2-4ï¼šé‡æ„</h3><p>åœ¨é‡æ„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥åº”ç”¨æœ‰å…³ä¼˜ç§€è½¯ä»¶è®¾è®¡çš„ä¸€åˆ‡çŸ¥è¯†ã€‚æå‡å†…èšæ€§ï¼Œé™ä½è€¦åˆåº¦ï¼Œåˆ‡åˆ†å…³æ³¨é¢ï¼Œæ¨¡å—åŒ–ç³»ç»Ÿæ€§å…³æ³¨é¢ï¼Œç¼©å°å‡½æ•°å’Œç±»çš„å°ºå¯¸ï¼Œé€‰ç”¨æ›´å¥½çš„åç§°ï¼Œå¦‚æ­¤ç­‰ç­‰ã€‚è¿™ä¹Ÿæ˜¯ç®€å•è®¾è®¡åŸåˆ™åä¸‰æ¡è§„åˆ™çš„åœ°æ–¹:æ¶ˆé™¤é‡å¤ï¼Œä¿è¯è¡¨è¾¾åŠ›ï¼Œå°½å¯èƒ½å‡å°‘ç±»å’Œæ–¹æ³•çš„æ•°é‡ã€‚</p><h3 id="4-ä¸å¯é‡å¤"><a href="#4-ä¸å¯é‡å¤" class="headerlink" title="4. ä¸å¯é‡å¤"></a>4. ä¸å¯é‡å¤</h3><h3 id="5-è¡¨è¾¾åŠ›"><a href="#5-è¡¨è¾¾åŠ›" class="headerlink" title="5. è¡¨è¾¾åŠ›"></a>5. è¡¨è¾¾åŠ›</h3><h3 id="6-å°½å¯èƒ½å°‘çš„ç±»å’Œæ–¹æ³•"><a href="#6-å°½å¯èƒ½å°‘çš„ç±»å’Œæ–¹æ³•" class="headerlink" title="6. å°½å¯èƒ½å°‘çš„ç±»å’Œæ–¹æ³•"></a>6. å°½å¯èƒ½å°‘çš„ç±»å’Œæ–¹æ³•</h3><h2 id="åäºŒã€ç¬¬åä¸‰ç« -å¹¶å‘ç¼–ç¨‹"><a href="#åäºŒã€ç¬¬åä¸‰ç« -å¹¶å‘ç¼–ç¨‹" class="headerlink" title="åäºŒã€ç¬¬åä¸‰ç«  å¹¶å‘ç¼–ç¨‹"></a>åäºŒã€ç¬¬åä¸‰ç«  å¹¶å‘ç¼–ç¨‹</h2><h3 id="1-ä¸ºä»€ä¹ˆè¦å¹¶å‘"><a href="#1-ä¸ºä»€ä¹ˆè¦å¹¶å‘" class="headerlink" title="1. ä¸ºä»€ä¹ˆè¦å¹¶å‘"></a>1. ä¸ºä»€ä¹ˆè¦å¹¶å‘</h3><p>å¹¶å‘æ˜¯ä¸€ç§è§£è€¦ç­–ç•¥ã€‚å®ƒå¸®æˆ‘ä»¬æŠŠåšä»€ä¹ˆå’Œä½•æ—¶åšåˆ†è§£å¼€ã€‚</p><h3 id="2-å¹¶å‘çš„é˜²å¾¡åŸåˆ™"><a href="#2-å¹¶å‘çš„é˜²å¾¡åŸåˆ™" class="headerlink" title="2. å¹¶å‘çš„é˜²å¾¡åŸåˆ™"></a>2. å¹¶å‘çš„é˜²å¾¡åŸåˆ™</h3><h3 id="13-1-å•ä¸€æƒè´£åŸåˆ™ï¼ˆSRPï¼‰"><a href="#13-1-å•ä¸€æƒè´£åŸåˆ™ï¼ˆSRPï¼‰" class="headerlink" title="13.1 å•ä¸€æƒè´£åŸåˆ™ï¼ˆSRPï¼‰"></a>13.1 å•ä¸€æƒè´£åŸåˆ™ï¼ˆSRPï¼‰</h3><p>å¹¶å‘ä»£ç åº”è¯¥ä»å…¶ä»–ä»£ç ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œå› ä¸ºï¼Œå¹¶å‘ä»£ç ç›¸æ¯”äºå…¶ä»–çš„ä»£ç æ˜¯å¾ˆå¤æ‚çš„å­˜åœ¨ã€‚ä½†æ˜¯ï¼Œå¹¶å‘å®ç°ç»†èŠ‚å¸¸å¸¸ç›´æ¥åµŒå…¥åˆ°å…¶ä»–ç”Ÿäº§ä»£ç ä¸­ã€‚é‚£ä¹ˆä¸‹é¢å‡ ä¸ªé—®é¢˜éœ€è¦è€ƒè™‘ï¼Œ</p><ul><li>å¹¶å‘ç›¸å…³ä»£ç ç”±è‡ªå·±çš„å¼€å‘ï¼Œä¿®æ”¹å’Œè°ƒä¼˜ç”Ÿå‘½å‘¨æœŸ</li><li>å¼€å‘ç›¸å…³ä»£ç ç”±è‡ªå·±è¦å¯¹ä»˜çš„æŒ‘æˆ˜ï¼Œå’Œéå¹¶å‘ç›¸å…³ä»£ç ä¸åŒï¼Œè€Œä¸”å¾€å¾€æ›´ä¸ºå›°éš¾</li><li>å³ä¾¿æ²¡æœ‰å‘¨è¾¹åº”ç”¨ç¨‹åºå¢åŠ è´Ÿæ‹…ï¼Œå†™å¾—ä¸å¥½çš„å¹¶å‘ä»£ç å¯èƒ½çš„å‡ºé”™æ–¹å¼æ•°é‡å·²ç»è¶³å…·æŒ‘æˆ˜æ€§ã€‚</li></ul><blockquote><p>å»ºè®®ï¼šåˆ†ç¦»å¹¶å‘ç›¸å…³ä»£ç ä¸å…¶ä»–ä»£ç ã€‚</p></blockquote><h3 id="13-2-é™åˆ¶æ•°æ®ä½œç”¨åŸŸ"><a href="#13-2-é™åˆ¶æ•°æ®ä½œç”¨åŸŸ" class="headerlink" title="13.2 é™åˆ¶æ•°æ®ä½œç”¨åŸŸ"></a>13.2 é™åˆ¶æ•°æ®ä½œç”¨åŸŸ</h3><p>ä¸¤ä¸ªçº¿ç¨‹ä¿®æ”¹å…±äº«å¯¹è±¡çš„åŒä¸€å­—æ®µæ—¶ï¼Œå¯èƒ½ç›¸äº’å¹²æ‰°ï¼Œå¯¼è‡´æœªé¢„æœŸçš„è¡Œä¸ºã€‚è§£å†³æ–¹æ¡ˆä¹‹ä¸€æ˜¯é‡‡ç”¨<code>synchronized</code>å…³é”®å­—åœ¨ä»£ç ä¸­ä¿æŠ¤ä¸€å—ä½¿ç”¨å…±äº«å¯¹è±¡çš„ä¸´ç•ŒåŒºã€‚é™åˆ¶ä¸´ç•ŒåŒºçš„æ•°é‡å¾ˆé‡è¦ã€‚æ›´æ–°å…±äº«æ•°æ®çš„åœ°æ–¹è¶Šå¤šï¼Œå°±è¶Šå¯èƒ½å‡ºé”™ã€‚</p><blockquote><p>å»ºè®®ï¼šè°¨è®°æ•°æ®å°è£…ï¼Œä¸¥æ ¼é™åˆ¶å¯¹å¯èƒ½è¢«å…±äº«çš„æ•°æ®çš„è®¿é—®ã€‚</p></blockquote><h3 id="13-3-ä½¿ç”¨æ•°æ®å‰¯æœ¬"><a href="#13-3-ä½¿ç”¨æ•°æ®å‰¯æœ¬" class="headerlink" title="13.3 ä½¿ç”¨æ•°æ®å‰¯æœ¬"></a>13.3 ä½¿ç”¨æ•°æ®å‰¯æœ¬</h3><p>é¿å…å…±äº«æ•°æ®çš„å¥½æ–¹æ³•ä¹‹ä¸€å°±æ˜¯ä¸€å¼€å§‹å°±é¿å…å…±äº«æ•°æ®ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæœ‰å¯èƒ½å¤åˆ¶å¯¹è±¡å¹¶ä»¥åªè¯»æ–¹å¼å¯¹å¾…ã€‚åœ¨å¦å¤–ä¸€ç§æƒ…å†µä¸‹ï¼Œæœ‰å¯èƒ½å¤åˆ¶å¯¹è±¡ï¼Œä»å¤šä¸ªçº¿ç¨‹æ”¶é›†æ‰€æœ‰å‰¯æœ¬çš„ç»“æœï¼Œå¹¶åœ¨å•ä¸ªçº¿ç¨‹ä¸­åˆå¹¶è¿™äº›ç»“æœã€‚</p><h3 id="13-4-çº¿ç¨‹å°½å¯èƒ½åœ°ç‹¬ç«‹"><a href="#13-4-çº¿ç¨‹å°½å¯èƒ½åœ°ç‹¬ç«‹" class="headerlink" title="13.4ã€€çº¿ç¨‹å°½å¯èƒ½åœ°ç‹¬ç«‹"></a>13.4ã€€çº¿ç¨‹å°½å¯èƒ½åœ°ç‹¬ç«‹</h3><p>è®©æ¯ä¸ªçº¿ç¨‹åœ¨è‡ªå·±çš„ä¸–ç•Œä¸­å­˜åœ¨ï¼Œä¸ä¸å…¶ä»–çº¿ç¨‹å…±äº«æ•°æ®ã€‚æ¯ä¸ªçº¿ç¨‹å¤„ç†ä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚ï¼Œä»ä¸å…±äº«çš„æºå¤´æ¥çº³æ‰€æœ‰è¯·æ±‚æ•°æ®ï¼Œå­˜å‚¨ä¸ºæœ¬åœ°å˜é‡ã€‚</p><p>å»ºè®®ï¼šå°è¯•å°†æ•°æ®åˆ†è§£åˆ°å¯è¢«ç‹¬ç«‹çº¿ç¨‹æ“ä½œçš„ç‹¬ç«‹å­é›†ã€‚</p><h3 id="13-5-äº†è§£æ‰§è¡Œæ¨¡å‹"><a href="#13-5-äº†è§£æ‰§è¡Œæ¨¡å‹" class="headerlink" title="13.5 äº†è§£æ‰§è¡Œæ¨¡å‹"></a>13.5 äº†è§£æ‰§è¡Œæ¨¡å‹</h3><h4 id="13-5-1-ç”Ÿäº§è€…ï¼ï¼ï¼æ¶ˆè´¹è€…æ¨¡å‹"><a href="#13-5-1-ç”Ÿäº§è€…ï¼ï¼ï¼æ¶ˆè´¹è€…æ¨¡å‹" class="headerlink" title="13.5.1 ç”Ÿäº§è€…ï¼ï¼ï¼æ¶ˆè´¹è€…æ¨¡å‹"></a>13.5.1 ç”Ÿäº§è€…ï¼ï¼ï¼æ¶ˆè´¹è€…æ¨¡å‹</h4><p>ä¸€ä¸ªæˆ–å¤šä¸ªç”Ÿäº§è€…çº¿ç¨‹åˆ›å»ºæŸäº›å·¥ä½œï¼Œå¹¶ç½®äºç¼“å­˜æˆ–é˜Ÿåˆ—ä¸­ã€‚ä¸€ä¸ªæˆ–å¤šä¸ªæ¶ˆè´¹è€…çº¿ç¨‹ä»é˜Ÿåˆ—ä¸­è·å–å¹¶å®Œæˆè¿™äº›å·¥ä½œã€‚ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„é˜Ÿåˆ—æ˜¯ä¸€ç§é™å®šèµ„æºã€‚</p><h4 id="13-5-2-è¯»è€…ï¼ï¼ï¼ä½œè€…æ¨¡å‹"><a href="#13-5-2-è¯»è€…ï¼ï¼ï¼ä½œè€…æ¨¡å‹" class="headerlink" title="13.5.2 è¯»è€…ï¼ï¼ï¼ä½œè€…æ¨¡å‹"></a>13.5.2 è¯»è€…ï¼ï¼ï¼ä½œè€…æ¨¡å‹</h4><p>å½“å­˜åœ¨ä¸€ä¸ªä¸»è¦ä¸ºè¯»è€…çº¿ç¨‹æä¾›ä¿¡æ¯æºï¼Œä½†åªå¶å°”è¢«ä½œè€…çº¿ç¨‹æ›´æ–°çš„å…±äº«èµ„æºï¼Œååé‡å°±ä¼šæ˜¯ä¸ªé—®é¢˜ã€‚å¢åŠ ååé‡ï¼Œä¼šå¯¼è‡´çº¿ç¨‹é¥¥é¥¿å’Œè¿‡æ—¶ä¿¡æ¯çš„ç§¯ç´¯ã€‚æ›´æ–°ä¼šå½±å“ååé‡ã€‚åè°ƒè¯»è€…çº¿ç¨‹ï¼Œä¸å»è¯»ä½œè€…çº¿ç¨‹æ­£åœ¨æ›´æ–°çš„æ¶ˆæ¯ï¼Œè¿™æ˜¯ä¸€ç§è¾›è‹¦çš„å¹³è¡¡å·¥ä½œã€‚ä½œè€…çº¿ç¨‹å€¾å‘äºé•¿æœŸé”å®šè®¸å¤šè¯»è€…çº¿ç¨‹ï¼Œä»è€Œå¯¼è‡´ååé‡é—®é¢˜ã€‚</p><p>æŒ‘æˆ˜ä¹‹å¤„åœ¨äºå¹³è¡¡è¯»è€…çº¿ç¨‹å’Œä½œè€…çº¿ç¨‹çš„éœ€æ±‚ï¼Œå®ç°æ­£ç¡®çš„æ“ä½œï¼Œæä¾›åˆç†çš„ååé‡ï¼Œé¿å…çº¿ç¨‹é¥¥é¥¿ã€‚</p><h4 id="13-5-3å“²å­¦å®¶é—®é¢˜ï¼ˆæ•…äº‹å†…å®¹ä¸åœ¨è¿™é‡Œæè¿°ï¼‰"><a href="#13-5-3å“²å­¦å®¶é—®é¢˜ï¼ˆæ•…äº‹å†…å®¹ä¸åœ¨è¿™é‡Œæè¿°ï¼‰" class="headerlink" title="13.5.3å“²å­¦å®¶é—®é¢˜ï¼ˆæ•…äº‹å†…å®¹ä¸åœ¨è¿™é‡Œæè¿°ï¼‰"></a>13.5.3å“²å­¦å®¶é—®é¢˜ï¼ˆæ•…äº‹å†…å®¹ä¸åœ¨è¿™é‡Œæè¿°ï¼‰</h4><p>ä»å“²å­¦å®¶é—®é¢˜å¯ä»¥åæ˜ å‡ºç¼–å†™å¹¶å‘ç»å¸¸é‡åˆ°çš„é—®é¢˜ï¼Œæ­»é”ï¼Œæ´»é”ï¼Œååé‡å’Œæ•ˆç‡é™ä½ç­‰é—®é¢˜ã€‚é‚£ä¹ˆå­¦ä¹ è¿™äº›åŸºç¡€é—®é¢˜çš„è§£å†³ç®—æ³•å¯ä»¥å¸®åŠ©ä½ è§£å†³å¤§å¤šæ•°çš„å¹¶å‘é—®é¢˜ï¼Œå› ä¸ºå¤§å¤šçš„å¹¶å‘é—®é¢˜éƒ½æ˜¯ä¸Šè¿°é—®é¢˜çš„å˜ç§ã€‚</p><h3 id="13-6-è­¦æƒ•åŒæ­¥æ–¹æ³•ä¹‹é—´çš„ä¾èµ–"><a href="#13-6-è­¦æƒ•åŒæ­¥æ–¹æ³•ä¹‹é—´çš„ä¾èµ–" class="headerlink" title="13.6 è­¦æƒ•åŒæ­¥æ–¹æ³•ä¹‹é—´çš„ä¾èµ–"></a>13.6 è­¦æƒ•åŒæ­¥æ–¹æ³•ä¹‹é—´çš„ä¾èµ–</h3><p>åŒæ­¥æ–¹æ³•ä¹‹é—´çš„ä¾èµ–ä¼šå¯¼è‡´å¹¶å‘ä»£ç ä¸­çš„ç‹¡çŒ¾ç¼ºé™·ã€‚Javaè¯­è¨€æœ‰synchronizedæ¦‚å¿µï¼Œå¯ä»¥ç”¨æ¥ä¿æŠ¤å•ä¸ªæ–¹æ³•ã€‚ç„¶è€Œï¼Œå¦‚æœåœ¨åŒä¸€å…±äº«ç±»ä¸­ç”±å¤šä¸ªåŒæ­¥æ–¹æ³•ï¼Œç³»ç»Ÿå°±å¯èƒ½å†™å¾—ä¸å¤ªæ­£ç¡®äº†ã€‚</p><blockquote><p>å»ºè®®ï¼šé¿å…ä½¿ç”¨ä¸€ä¸ªå…±äº«å¯¹è±¡çš„å¤šä¸ªæ–¹æ³•ã€‚å¦‚æœæœ‰æ—¶å¿…é¡»ä½¿ç”¨ä¸€ä¸ªå…±äº«å¯¹è±¡çš„å¤šä¸ªæ–¹æ³•ã€‚è¿™ç§æƒ…å†µå‘ç”Ÿæ—¶ï¼Œæœ‰ï¼“ä¸­å†™å¯¹ä»£ç çš„æ‰‹æ®µï¼š</p></blockquote><ul><li>åŸºäºå®¢æˆ·ç«¯çš„é”å®šï¼ï¼å®¢æˆ·ç«¯ä»£ç åœ¨è°ƒç”¨ç¬¬ä¸€ä¸ªæ–¹æ³•å‰é”å®šæœåŠ¡ç«¯ï¼Œç¡®ä¿é”çš„èŒƒå›´è¦†ç›–äº†è°ƒç”¨æœ€åä¸€ä¸ªæ–¹æ³•çš„ä»£ç ã€‚</li><li>åŸºäºæœåŠ¡ç«¯çš„é”å®šï¼ï¼åœ¨æœåŠ¡ç«¯å†…åˆ›å»ºé”å®šæœåŠ¡ç«¯çš„æ–¹æ³•ï¼Œè°ƒç”¨æ‰€æœ‰æ–¹æ³•ï¼Œç„¶åè§£é”ã€‚è®©å®¢æˆ·ç«¯ä»£ç è°ƒç”¨æ–°çš„æ–¹æ³•ã€‚</li><li>é€‚é…æœåŠ¡ç«¯ï¼ï¼åˆ›å»ºæ‰§è¡Œé”å®šçš„ä¸­é—´å±‚ã€‚è¿™æ˜¯ä¸€ç§åŸºäºæœåŠ¡ç«¯çš„é”å®šä¾‹å­ï¼Œä½†ä¸ä¿®æ”¹åŸå§‹æœåŠ¡ç«¯ä»£ç ã€‚</li></ul><h3 id="13-7ä¿æŒåŒæ­¥åŒºåŸŸå¾®å°"><a href="#13-7ä¿æŒåŒæ­¥åŒºåŸŸå¾®å°" class="headerlink" title="13.7ä¿æŒåŒæ­¥åŒºåŸŸå¾®å°"></a>13.7ä¿æŒåŒæ­¥åŒºåŸŸå¾®å°</h3><p>åº”è¯¥å°½å¯èƒ½å°‘åœ°è®¾è®¡ä¸´ç•ŒåŒºï¼Œå¦‚æœæœ‰è¯·å°½å¯èƒ½å‡å°åŒæ­¥åŒºåŸŸã€‚</p><h3 id="13-8-ç¼–å†™çº¿ç¨‹éœ€è¦æ³¨æ„çš„å‡ ç‚¹ï¼š"><a href="#13-8-ç¼–å†™çº¿ç¨‹éœ€è¦æ³¨æ„çš„å‡ ç‚¹ï¼š" class="headerlink" title="13.8ã€€ç¼–å†™çº¿ç¨‹éœ€è¦æ³¨æ„çš„å‡ ç‚¹ï¼š"></a>13.8ã€€ç¼–å†™çº¿ç¨‹éœ€è¦æ³¨æ„çš„å‡ ç‚¹ï¼š</h3><h4 id="1-å°†ä¼ªå¤±è´¥çœ‹ä½œå¯èƒ½çš„çº¿ç¨‹é—®é¢˜ã€‚çº¿ç¨‹ä»£ç ä¸­çš„ç¼ºé™·å¯èƒ½åœ¨ä¸€åƒæˆ–è€…ä¸€ç™¾ä¸‡æ¬¡æ‰§è¡Œä¸­æ‰ä¼šæ˜¾ç°ä¸€æ¬¡ã€‚æ‰€ä»¥ï¼Œä¸è¦å°†ç³»ç»Ÿé”™è¯¯å½’å’äºå¶å‘äº‹ä»¶ã€‚"><a href="#1-å°†ä¼ªå¤±è´¥çœ‹ä½œå¯èƒ½çš„çº¿ç¨‹é—®é¢˜ã€‚çº¿ç¨‹ä»£ç ä¸­çš„ç¼ºé™·å¯èƒ½åœ¨ä¸€åƒæˆ–è€…ä¸€ç™¾ä¸‡æ¬¡æ‰§è¡Œä¸­æ‰ä¼šæ˜¾ç°ä¸€æ¬¡ã€‚æ‰€ä»¥ï¼Œä¸è¦å°†ç³»ç»Ÿé”™è¯¯å½’å’äºå¶å‘äº‹ä»¶ã€‚" class="headerlink" title="(1). å°†ä¼ªå¤±è´¥çœ‹ä½œå¯èƒ½çš„çº¿ç¨‹é—®é¢˜ã€‚çº¿ç¨‹ä»£ç ä¸­çš„ç¼ºé™·å¯èƒ½åœ¨ä¸€åƒæˆ–è€…ä¸€ç™¾ä¸‡æ¬¡æ‰§è¡Œä¸­æ‰ä¼šæ˜¾ç°ä¸€æ¬¡ã€‚æ‰€ä»¥ï¼Œä¸è¦å°†ç³»ç»Ÿé”™è¯¯å½’å’äºå¶å‘äº‹ä»¶ã€‚"></a>(1). å°†ä¼ªå¤±è´¥çœ‹ä½œå¯èƒ½çš„çº¿ç¨‹é—®é¢˜ã€‚çº¿ç¨‹ä»£ç ä¸­çš„ç¼ºé™·å¯èƒ½åœ¨ä¸€åƒæˆ–è€…ä¸€ç™¾ä¸‡æ¬¡æ‰§è¡Œä¸­æ‰ä¼šæ˜¾ç°ä¸€æ¬¡ã€‚æ‰€ä»¥ï¼Œä¸è¦å°†ç³»ç»Ÿé”™è¯¯å½’å’äºå¶å‘äº‹ä»¶ã€‚</h4><h4 id="2-å…ˆä½¿éçº¿ç¨‹ä»£ç å¯å·¥ä½œã€‚ç¡®ä¿çº¿ç¨‹ä¹‹å¤–çš„ä»£ç å¯ä»¥å·¥ä½œã€‚ä¸è¦åŒæ—¶è¿½è¸ªéçº¿ç¨‹ç¼ºé™·å’Œçº¿ç¨‹ç¼ºé™·ã€‚ç¡®ä¿ä»£ç åœ¨çº¿ç¨‹ä¹‹å¤–å¯ä»¥å·¥ä½œã€‚"><a href="#2-å…ˆä½¿éçº¿ç¨‹ä»£ç å¯å·¥ä½œã€‚ç¡®ä¿çº¿ç¨‹ä¹‹å¤–çš„ä»£ç å¯ä»¥å·¥ä½œã€‚ä¸è¦åŒæ—¶è¿½è¸ªéçº¿ç¨‹ç¼ºé™·å’Œçº¿ç¨‹ç¼ºé™·ã€‚ç¡®ä¿ä»£ç åœ¨çº¿ç¨‹ä¹‹å¤–å¯ä»¥å·¥ä½œã€‚" class="headerlink" title="(2). å…ˆä½¿éçº¿ç¨‹ä»£ç å¯å·¥ä½œã€‚ç¡®ä¿çº¿ç¨‹ä¹‹å¤–çš„ä»£ç å¯ä»¥å·¥ä½œã€‚ä¸è¦åŒæ—¶è¿½è¸ªéçº¿ç¨‹ç¼ºé™·å’Œçº¿ç¨‹ç¼ºé™·ã€‚ç¡®ä¿ä»£ç åœ¨çº¿ç¨‹ä¹‹å¤–å¯ä»¥å·¥ä½œã€‚"></a>(2). å…ˆä½¿éçº¿ç¨‹ä»£ç å¯å·¥ä½œã€‚ç¡®ä¿çº¿ç¨‹ä¹‹å¤–çš„ä»£ç å¯ä»¥å·¥ä½œã€‚ä¸è¦åŒæ—¶è¿½è¸ªéçº¿ç¨‹ç¼ºé™·å’Œçº¿ç¨‹ç¼ºé™·ã€‚ç¡®ä¿ä»£ç åœ¨çº¿ç¨‹ä¹‹å¤–å¯ä»¥å·¥ä½œã€‚</h4><h4 id="3-ç¼–å†™å¯æ’æ‹”çš„çº¿ç¨‹ä»£ç ã€‚ç¼–å†™åœ¨æ•°ä¸ªç¯å¢ƒä¸‹è¿è¡Œçš„çº¿ç¨‹ä»£ç "><a href="#3-ç¼–å†™å¯æ’æ‹”çš„çº¿ç¨‹ä»£ç ã€‚ç¼–å†™åœ¨æ•°ä¸ªç¯å¢ƒä¸‹è¿è¡Œçš„çº¿ç¨‹ä»£ç " class="headerlink" title="(3). ç¼–å†™å¯æ’æ‹”çš„çº¿ç¨‹ä»£ç ã€‚ç¼–å†™åœ¨æ•°ä¸ªç¯å¢ƒä¸‹è¿è¡Œçš„çº¿ç¨‹ä»£ç "></a>(3). ç¼–å†™å¯æ’æ‹”çš„çº¿ç¨‹ä»£ç ã€‚ç¼–å†™åœ¨æ•°ä¸ªç¯å¢ƒä¸‹è¿è¡Œçš„çº¿ç¨‹ä»£ç </h4><ul><li>1.å•çº¿ç¨‹ä¸å¤šçº¿ç¨‹åœ¨æ‰§è¡Œæ—¶ä¸åŒçš„æƒ…å†µ</li><li>2.çº¿ç¨‹ä»£ç ä¸å®ç‰©æˆ–æµ‹è¯•æ›¿èº«äº’åŠ¨</li><li>3.ç”¨è¿è¡Œé€Ÿåº¦,ç¼“æ…¢å’Œæœ‰å˜åŠ¨çš„æµ‹è¯•æ›¿èº«æ‰§è¡Œ</li><li>4.å°†æµ‹è¯•é…ç½®ä¸ºèƒ½è¿è¡Œä¸€å®šæ•°é‡çš„è¿­ä»£</li></ul><blockquote><p>å»ºè®®ï¼šç¼–å†™å¯æ’æ‹”çš„çº¿ç¨‹ä»£ç ï¼Œè¿™æ ·å°±èƒ½åœ¨ä¸åŒçš„é…ç½®ç¯å¢ƒä¸‹è¿è¡Œã€‚</p></blockquote><h4 id="4-ç¼–å†™å¯è°ƒæ•´çš„çº¿ç¨‹ä»£ç "><a href="#4-ç¼–å†™å¯è°ƒæ•´çš„çº¿ç¨‹ä»£ç " class="headerlink" title="(4). ç¼–å†™å¯è°ƒæ•´çš„çº¿ç¨‹ä»£ç "></a>(4). ç¼–å†™å¯è°ƒæ•´çš„çº¿ç¨‹ä»£ç </h4><p>åœ¨ç³»ç»Ÿè¿è¡Œæ—¶å…è®¸çº¿ç¨‹å‘ç”Ÿå˜åŠ¨ã€‚å…è®¸çº¿ç¨‹ä¾æ®ååé‡å’Œä½¿ç”¨ç‡è‡ªæˆ‘è°ƒæ•´ã€‚</p><h4 id="5-è¿è¡Œå¤šä½™å¤„ç†å™¨æ•°é‡çš„çº¿ç¨‹"><a href="#5-è¿è¡Œå¤šä½™å¤„ç†å™¨æ•°é‡çš„çº¿ç¨‹" class="headerlink" title="(5). è¿è¡Œå¤šä½™å¤„ç†å™¨æ•°é‡çš„çº¿ç¨‹"></a>(5). è¿è¡Œå¤šä½™å¤„ç†å™¨æ•°é‡çš„çº¿ç¨‹</h4><p>ä»»åŠ¡äº¤æ¢è¶Šé¢‘ç¹ï¼Œè¶Šæœ‰å¯èƒ½æ‰¾åˆ°é”™è¿‡ä¸´ç•ŒåŒºæˆ–å¯¼è‡´æ­»é”çš„ä»£ç ã€‚</p><h4 id="6-åœ¨ä¸åŒå¹³å°ä¸Šè¿è¡Œ"><a href="#6-åœ¨ä¸åŒå¹³å°ä¸Šè¿è¡Œ" class="headerlink" title="(6). åœ¨ä¸åŒå¹³å°ä¸Šè¿è¡Œ"></a>(6). åœ¨ä¸åŒå¹³å°ä¸Šè¿è¡Œ</h4><h4 id="7-è°ƒæ•´ä»£ç å¹¶å¼ºè¿«é”™è¯¯å‘ç”Ÿ"><a href="#7-è°ƒæ•´ä»£ç å¹¶å¼ºè¿«é”™è¯¯å‘ç”Ÿ" class="headerlink" title="(7). è°ƒæ•´ä»£ç å¹¶å¼ºè¿«é”™è¯¯å‘ç”Ÿ"></a>(7). è°ƒæ•´ä»£ç å¹¶å¼ºè¿«é”™è¯¯å‘ç”Ÿ</h4><h2 id="åä¸‰ã€ç¬¬14ç« -é€æ­¥æ”¹è¿›"><a href="#åä¸‰ã€ç¬¬14ç« -é€æ­¥æ”¹è¿›" class="headerlink" title="åä¸‰ã€ç¬¬14ç«  é€æ­¥æ”¹è¿›"></a>åä¸‰ã€ç¬¬14ç«  é€æ­¥æ”¹è¿›</h2><p>ä»£ç å¹¶ä¸æ˜¯ä¸€æ¬¡å°±èƒ½å†™çš„å¾ˆå¹²å‡€çš„ï¼Œéœ€è¦æˆ‘ä»¬ä¸æ–­çš„è¿­ä»£å’Œä¼˜åŒ–ã€‚</p><h2 id="åå››ã€ç¬¬17ç« -å‘³é“ä¸å¯å‘"><a href="#åå››ã€ç¬¬17ç« -å‘³é“ä¸å¯å‘" class="headerlink" title="åå››ã€ç¬¬17ç«  å‘³é“ä¸å¯å‘"></a>åå››ã€ç¬¬17ç«  å‘³é“ä¸å¯å‘</h2><h3 id="1-æ³¨é‡Š"><a href="#1-æ³¨é‡Š" class="headerlink" title="1. æ³¨é‡Š"></a>1. æ³¨é‡Š</h3><h4 id="1-ä¸æ°å½“çš„æ³¨é‡Šä¿¡æ¯"><a href="#1-ä¸æ°å½“çš„æ³¨é‡Šä¿¡æ¯" class="headerlink" title="(1). ä¸æ°å½“çš„æ³¨é‡Šä¿¡æ¯"></a>(1). ä¸æ°å½“çš„æ³¨é‡Šä¿¡æ¯</h4><p>è®©æ³¨é‡Šä¼ è¾¾æœ¬è¯¥æ›´å¥½åœ°åœ¨æºä»£ç æ§åˆ¶ç³»ç»Ÿï¼Œé—®é¢˜è¿½è¸ªç³»ç»Ÿæˆ–ä»»ä½•å…¶ä»–è®°å½•ç³»ç»Ÿä¸­ä¿å­˜çš„ä¿¡æ¯ï¼Œæ˜¯ä¸æ°å½“çš„ã€‚ä¾‹å¦‚ï¼Œä¿®æ”¹å†å²è®°å½•åªä¼šç”¨å¤§é‡è¿‡æ—¶è€Œæ— è¶£çš„æ–‡æœ¬æä¹±æºä»£ç æ–‡ä»¶ã€‚æ³¨é‡Šåªåº”è¯¥æè¿°æœ‰å…³ä»£ç å’Œè®¾è®¡çš„æŠ€æœ¯æ€§ä¿¡æ¯ã€‚</p><h4 id="2-åºŸå¼ƒçš„æ³¨é‡Š"><a href="#2-åºŸå¼ƒçš„æ³¨é‡Š" class="headerlink" title="(2). åºŸå¼ƒçš„æ³¨é‡Š"></a>(2). åºŸå¼ƒçš„æ³¨é‡Š</h4><p>è¿‡æ—¶ï¼Œæ— å…³æˆ–ä¸æ­£ç¡®çš„æ³¨é‡Šå°±æ˜¯åºŸå¼ƒçš„æ³¨é‡Šã€‚</p><h4 id="3-å†—ä½™æ³¨é‡Š"><a href="#3-å†—ä½™æ³¨é‡Š" class="headerlink" title="(3). å†—ä½™æ³¨é‡Š"></a>(3). å†—ä½™æ³¨é‡Š</h4><p>å¦‚æœæ³¨é‡Šæè¿°çš„æ˜¯æŸç§å……åˆ†è‡ªæˆ‘æè¿°äº†çš„ä¸œè¥¿ï¼Œé‚£ä¹ˆæ³¨é‡Šå°±æ˜¯å¤šä½™çš„ã€‚æ³¨é‡Šåº”è¯¥è°ˆåŠä»£ç è‡ªèº«æ²¡æœ‰æåˆ°çš„ä¸œè¥¿ã€‚</p><h4 id="4-æ³¨é‡Šè¦å†™å°±è¦å†™æœ€å¥½çš„æ³¨é‡Šï¼Œåˆ«ç”»è›‡æ·»è¶³"><a href="#4-æ³¨é‡Šè¦å†™å°±è¦å†™æœ€å¥½çš„æ³¨é‡Šï¼Œåˆ«ç”»è›‡æ·»è¶³" class="headerlink" title="(4). æ³¨é‡Šè¦å†™å°±è¦å†™æœ€å¥½çš„æ³¨é‡Šï¼Œåˆ«ç”»è›‡æ·»è¶³"></a>(4). æ³¨é‡Šè¦å†™å°±è¦å†™æœ€å¥½çš„æ³¨é‡Šï¼Œåˆ«ç”»è›‡æ·»è¶³</h4><h4 id="5-æ³¨é‡Šæ‰çš„ä»£ç ï¼Œçœ‹åˆ°æ³¨é‡Šæ‰çš„ä»£ç å°±åˆ ã€‚"><a href="#5-æ³¨é‡Šæ‰çš„ä»£ç ï¼Œçœ‹åˆ°æ³¨é‡Šæ‰çš„ä»£ç å°±åˆ ã€‚" class="headerlink" title="(5). æ³¨é‡Šæ‰çš„ä»£ç ï¼Œçœ‹åˆ°æ³¨é‡Šæ‰çš„ä»£ç å°±åˆ ã€‚"></a>(5). æ³¨é‡Šæ‰çš„ä»£ç ï¼Œçœ‹åˆ°æ³¨é‡Šæ‰çš„ä»£ç å°±åˆ ã€‚</h4><h3 id="2-ç¯å¢ƒ"><a href="#2-ç¯å¢ƒ" class="headerlink" title="2. ç¯å¢ƒ"></a>2. ç¯å¢ƒ</h3><h4 id="1-éœ€è¦å¤šæ­¥æ‰èƒ½å®ç°çš„æ„å»º"><a href="#1-éœ€è¦å¤šæ­¥æ‰èƒ½å®ç°çš„æ„å»º" class="headerlink" title="(1). éœ€è¦å¤šæ­¥æ‰èƒ½å®ç°çš„æ„å»º"></a>(1). éœ€è¦å¤šæ­¥æ‰èƒ½å®ç°çš„æ„å»º</h4><p>æ„å»ºç³»ç»Ÿåº”è¯¥æ˜¯å•æ­¥çš„å°æ“ä½œã€‚ä¸åº”è¯¥ä»æºä»£ç æ§åˆ¶ç³»ç»Ÿä¸­ä¸€å°ç‚¹ä¸€å°ç‚¹ç­¾å‡ºä»£ç ã€‚ä¸åº”è¯¥éœ€è¦ä¸€ç³»åˆ—ç¥ç§˜æŒ‡ä»¤æˆ–ç¯å¢ƒä¾èµ–è„šæœ¬æ¥æ„å»ºå•ä¸ªå…ƒç´ ã€‚ä¸åº”è¯¥å››å‡ºå¯»æ‰¾é¢å¤–çš„å°jar,xmlæ–‡ä»¶å’Œå…¶ä»–ç³»ç»Ÿæ‰€éœ€çš„æ‚ç‰©ã€‚ä½ åº”è¯¥èƒ½å¤Ÿç”¨å•ä¸ªå‘½ä»¤ç­¾å‡ºç³»ç»Ÿï¼Œå¹¶å•ä¸ªæŒ‡ä»¤æ„å»ºå®ƒã€‚</p><h4 id="2-éœ€è¦å¤šæ­¥æ‰èƒ½åšåˆ°æµ‹è¯•"><a href="#2-éœ€è¦å¤šæ­¥æ‰èƒ½åšåˆ°æµ‹è¯•" class="headerlink" title="(2). éœ€è¦å¤šæ­¥æ‰èƒ½åšåˆ°æµ‹è¯•"></a>(2). éœ€è¦å¤šæ­¥æ‰èƒ½åšåˆ°æµ‹è¯•</h4><p>ä½ åº”è¯¥èƒ½å¤Ÿç”¨å•ä¸ªæŒ‡ä»¤å°±å¯ä»¥è¿è¡Œå…¨éƒ¨å•å…ƒæµ‹è¯•ã€‚èƒ½å¤Ÿè¿è¡Œå…¨éƒ¨æµ‹è¯•æ˜¯å¦‚æ­¤åŸºç¡€å’Œé‡è¦ï¼Œåº”è¯¥å¿«é€Ÿï¼Œè½»æ˜“å’Œç›´æ¥äº†å½“åœ°åšåˆ°ã€‚</p><h3 id="3-å‡½æ•°"><a href="#3-å‡½æ•°" class="headerlink" title="3. å‡½æ•°"></a>3. å‡½æ•°</h3><ul><li>å‡½æ•°çš„å‚æ•°åº”è¯¥å°‘ã€‚</li><li>è¾“å‡ºå‚æ•°è¿åç›´è§‰ã€‚å¦‚æœéè¦ä¿®æ”¹ï¼Œé‚£å°±ä¿®æ”¹å‡½æ•°æ‰€åœ¨å¯¹è±¡å¥½äº†ã€‚</li><li>æ ‡ç¤ºå‚æ•°ï¼Œå¸ƒå°”å€¼å‚æ•°å®£å‘Šå‡½æ•°åšäº†ä¸æ­¢ä¸€ä»¶äº‹ï¼Œåº”è¯¥æ¶ˆç­æ‰ï¼Œå³å‡½æ•°åªåšä¸€ä»¶äº‹ã€‚</li><li>æ°¸ä¸è¢«è°ƒç”¨çš„æ–¹æ³•åº”è¯¥ä¸¢å¼ƒã€‚</li></ul><h3 id="4-ä¸€èˆ¬æ€§é—®é¢˜"><a href="#4-ä¸€èˆ¬æ€§é—®é¢˜" class="headerlink" title="4. ä¸€èˆ¬æ€§é—®é¢˜"></a>4. ä¸€èˆ¬æ€§é—®é¢˜</h3><p>(1). å¦‚æœä»£ç éœ€è¦æœ‰å¤šç§è¯­è¨€ï¼Œé‚£ä¹ˆåº”è¯¥å°½åŠ›å‡å°‘æºæ–‡ä»¶ä¸­é¢å¤–è¯­è¨€çš„æ•°é‡å’ŒèŒƒå›´ã€‚</p><p>(2). æ˜æ˜¾çš„è¡Œä¸ºæœªè¢«å®ç°ï¼Œå¦‚æœæ˜æ˜¾çš„è¡Œä¸ºæœªè¢«å®ç°ï¼Œè¯»è€…å’Œç”¨æˆ·å°±ä¸èƒ½å†ä¾é ä»–ä»¬å¯¹å‡½æ•°åç§°çš„ç›´è§‰ã€‚ä»–ä»¬ä¸å†ä¿¡ä»»åŸä½œè€…ï¼Œä¸å¾—ä¸é˜…è¯»ä»£ç ç»†èŠ‚ã€‚</p><p>(3). ä¸æ­£ç¡®çš„è¾¹ç•Œè¡Œä¸ºï¼Œè¿½ç´¢æ¯ç§è¾¹ç•Œæ¡ä»¶ï¼Œç¼–å†™æµ‹è¯•ã€‚</p><p>(4). å¿½è§†å®‰å…¨</p><p>(5). é‡å¤ï¼Œå°½å¯èƒ½æ‰¾åˆ°å¹¶æ¶ˆé™¤é‡å¤ã€‚</p><p>(6). åœ¨é”™è¯¯çš„æŠ½è±¡å±‚çº§ä¸Šçš„ä»£ç ï¼Œåˆ›å»ºåˆ†ç¦»è¾ƒé«˜å±‚çº§ä¸€èˆ¬æ€§æ¦‚å¿µä¸è¾ƒä½å±‚çº§ç»†èŠ‚æ¦‚å¿µçš„æŠ½è±¡æ¨¡å‹ï¼Œè¿™å¾ˆé‡è¦ã€‚</p><p>(7). åŸºç±»ä¸å¯å¤šåº¦ä¾èµ–äºæ´¾ç”Ÿç±»ï¼ŒåŸºç±»åº”è¯¥å¯¹æ´¾ç”Ÿç±»ä¸€æ— æ‰€çŸ¥ã€‚</p><p>(8). ä¿¡æ¯è¿‡å¤šï¼Œè®¾è®¡è‰¯å¥½çš„æ¨¡å—æœ‰ç€éå¸¸å°çš„æ¥å£ï¼Œè®©ä½ äº‹åŠåŠŸå€ã€‚è®¾è®¡è‰¯å¥½çš„æ¥å£å¹¶ä¸æä¾›è®¸å¤šéœ€è¦ä¾é çš„å‡½æ•°ï¼Œæ‰€ä»¥è€¦åˆåº¦æ¯”è¾ƒä½ã€‚</p><p>ä¼˜ç§€çš„è½¯ä»¶å¼€å‘äººå‘˜å­¦ä¼šé™åˆ¶ç±»æˆ–æ¨¡å—ä¸­æš´éœ²çš„æ¥å£æ•°é‡ã€‚ç±»ä¸­çš„æ–¹æ³•è¶Šå°‘è¶Šå¥½ã€‚å‡½æ•°çŸ¥é“çš„å˜é‡è¶Šå°‘è¶Šå¥½ã€‚ç±»æ‹¥æœ‰çš„å®ä½“å˜é‡è¶Šå°‘è¶Šå¥½ã€‚éšè—ä½ çš„æ•°æ®ã€‚éšè—ä½ çš„å·¥å…·å‡½æ•°ã€‚éšè—ä½ çš„å¸¸é‡å’Œä½ çš„ä¸´æ—¶å˜é‡ã€‚ä¸è¦åˆ›å»ºæ‹¥æœ‰å¤§é‡æ–¹æ³•æˆ–å¤§é‡å®ä½“å˜é‡çš„ç±»ã€‚ä¸è¦ä¸ºå­ç±»åˆ›å»ºå¤§é‡å—ä¿æŠ¤å˜é‡å’Œå‡½æ•°ã€‚å°½åŠ›ä¿æŒæ¥å£ç´§å‡‘ã€‚é€šè¿‡é™åˆ¶ä¿¡æ¯æ¥æ§åˆ¶è€¦åˆåº¦ã€‚</p><p>(9). æ­»ä»£ç ä¸€å®šè¦åˆ é™¤ã€‚</p><p>(10). å‚ç›´åˆ†éš”ï¼Œå˜é‡å’Œå‡½æ•°åº”è¯¥åœ¨é è¿‘è¢«ä½¿ç”¨çš„åœ°æ–¹å®šä¹‰ã€‚ç§æœ‰å‡½æ•°åº”è¯¥åˆšå¥½åœ¨å…¶é¦–æ¬¡è¢«ä½¿ç”¨çš„ä½ç½®ä¸‹é¢å®šä¹‰ã€‚</p><p>(11). å‰åä¸ä¸€è‡´ï¼Œä»ä¸€è€Œç»ˆå³ä¸€æ—¦é€‰ä¸­ï¼Œå°±å°å¿ƒæŒç»­éµå¾ªã€‚å¦‚æœåœ¨ç‰¹å®šå‡½æ•°ä¸­ç”¨äº†responseçš„å˜é‡æ¥æŒæœ‰HttpServletResponseå¯¹è±¡ï¼Œåˆ™åœ¨å…¶ä»–ç”¨åˆ°HttpServletResponseå¯¹è±¡çš„å‡½æ•°ä¸­ä¹Ÿç”¨åŒæ ·çš„å˜é‡åã€‚è¿™æ ·ä¼šè®©ä½ çš„ä»£ç æ›´æ˜“é˜…è¯»ã€‚</p><p>(12). æ··æ·†è§†å¬ï¼Œæ²¡ç”¨çš„å˜é‡æˆ–è€…å‡½æ•°ç›´æ¥åˆ æ‰ï¼Œä»¥å…é€ æˆä¸å¿…è¦çš„å¹²æ‰°ã€‚</p><p>(13). äººä¸ºè€¦åˆï¼Œä¸äº’ç›¸ä¾èµ–çš„ä¸œè¥¿ä¸è¯¥è€¦åˆã€‚ä¸€èˆ¬æ¥è¯´ï¼Œäººä¸ºè€¦åˆæ˜¯æŒ‡ä¸¤ä¸ªæ²¡æœ‰ç›´æ¥ç›®çš„ä¹‹é—´çš„æ¨¡å—çš„è€¦åˆã€‚å…¶æ ¹æºæ˜¯å°†å˜é‡ï¼Œå¸¸é‡æˆ–å‡½æ•°ä¸æ°å½“åœ°æ”¾åœ¨ä¸´æ—¶æ–¹ä¾¿çš„ä½ç½®ã€‚</p><p>(14). ç‰¹æ€§ä¾æ‹ï¼Œç±»çš„æ–¹æ³•åªåº”å¯¹å…¶æ‰€å±ç±»ä¸­çš„å˜é‡å’Œå‡½æ•°æ„Ÿå…´è¶£ï¼Œä¸è¯¥å‚é’å…¶ä»–ç±»ä¸­çš„å˜é‡å’Œå‡½æ•°ã€‚å½“æ–¹æ³•é€šè¿‡æŸä¸ªå…¶ä»–å¯¹è±¡çš„è®¿é—®å™¨å’Œä¿®æ”¹å™¨æ¥æ“ä½œè¯¥å¯¹è±¡å†…éƒ¨æ•°æ®ï¼Œåˆ™å®ƒå°±ä¾æ‹äºè¯¥å¯¹è±¡æ‰€å±ç±»çš„èŒƒå›´ã€‚</p><p>(15). é€‰æ‹©ç®—å­å‚æ•°ï¼Œå°½é‡ä¸è¦æŠŠbooleanä½œä¸ºå‡½æ•°å‚æ•°</p><p>(16). æ™¦æ¶©æ„å›¾ï¼Œä»£ç è¦å°½å¯èƒ½å…·æœ‰è¡¨è¾¾åŠ›ã€‚</p><p>(17). ä½ç½®é”™è¯¯çš„æƒè´£ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨æœ€å°æƒŠå¼‚åŸåˆ™æ¥å¸®åŠ©æˆ‘ä»¬å³ä»£ç åº”è¯¥æ”¾åœ¨è¯»è€…è‡ªç„¶è€Œç„¶æœŸå¾…å®ƒæ‰€åœ¨çš„åœ°æ–¹ã€‚</p><p>(18). ä¸æ°å½“çš„é™æ€æ–¹æ³•ï¼Œå¯¹äºæ²¡æœ‰æœºä¼šæ‰“ç®—è®©å®ƒæœ‰å¤šæ€è¡Œä¸ºçš„å‡½æ•°å¯ä»¥ä½œä¸ºåŠ¨æ€å‡½æ•°ï¼Œå¦åˆ™å¯é€‰ç”¨é™æ€å‡½æ•°ã€‚</p><p>(19). ä½¿ç”¨è§£é‡Šæ€§å˜é‡ï¼Œå‘½åè¦æœ‰æ„ä¹‰ã€‚</p><p>(20). å‡½æ•°åç§°åº”è¯¥è¡¨è¾¾å…¶è¡Œä¸º</p><p>(21). ç†è§£ç®—æ³•</p><p>(22). æŠŠé€»è¾‘ä¾èµ–æ”¹ä¸ºç‰©ç†ä¾èµ–ï¼š</p><ul><li>1.é€»è¾‘ä¾èµ–ï¼šåŸå§‹æ•°æ®å’Œä¸šåŠ¡é€»è¾‘ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚ä¾‹å¦‚ï¼šå®šä¹‰çš„å¸¸é‡å’Œä¸šåŠ¡é€»è¾‘å­˜åœ¨ç€ä¾èµ–å…³ç³»æˆ–è€…è¯´è¢«æ†ç»‘åœ¨äº†ä¸€èµ·ï¼Œå³å½“ä¸šåŠ¡é€»è¾‘å‘ç”Ÿå˜åŒ–æˆ–è€…å­˜åœ¨å…¶ä»–å¯èƒ½æ€§çš„æ—¶å€™ä¸”å®šä¹‰çš„å¸¸é‡æ— æ³•æ»¡è¶³å¯¼è‡´å¸¸é‡éœ€è¦ä¿®æ”¹ã€‚</li><li>2.ç‰©ç†ä¾èµ–ï¼šå‡½æ•°æ–¹æ³•å’Œä¸šåŠ¡é€»è¾‘ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚ä¾‹å¦‚ï¼šä¸ºäº†è§£å†³é€»è¾‘ä¾èµ–çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ„é€ ä¸€ä¸ªæ–¹æ³•å°†æ•°æ®å’Œä¸šåŠ¡éš”ç¦»ã€‚</li></ul><p>(23). ç”¨å¤šæ€æ›¿ä»£<code>if/else</code> æˆ– <code>switch/case</code></p><p>(24). éµå¾ªæ ‡å‡†çº¦å®š</p><p>(25). ç”¨å‘½åå¸¸é‡æ›¿ä»£é­”æœ¯æ•°ï¼Œé­”æœ¯æ•°ä¸ä»…ä»…æŒ‡çš„æ˜¯æ•°å­—ï¼Œä¹Ÿæ³›æŒ‡ä»»ä½•ä¸èƒ½è‡ªæˆ‘æè¿°çš„ç¬¦å·ã€‚</p><p>(26). å‡†ç¡®ï¼Œåœ¨å¯ä»¥ç”¨Listçš„æ—¶å€™ï¼Œéè¦æŠŠå˜é‡å£°æ˜ä¸ºArrayListå°±è¿‡åˆ†æ‹˜æŸäº†ã€‚åœ¨ä»£ç ä¸­åšå†³å®šæ—¶ï¼Œç¡®è®¤è‡ªå·±è¶³å¤Ÿå‡†ç¡®ã€‚æ˜ç¡®è‡ªå·±ä¸ºä½•è¦è¿™ä¹ˆåšï¼Œå¦‚æœé‡åˆ°å¼‚å¸¸æƒ…å†µå¦‚ä½•å¤„ç†ã€‚åˆ«æ‡’å¾—ç†ä¼šå†³å®šçš„å‡†ç¡®æ€§ã€‚ä»£ç ä¸­çš„å«ç³Šå’Œä¸å‡†ç¡®æ€§è¦ä¹ˆæ˜¯æ„è§ä¸åŒçš„ç»“æœï¼Œè¦ä¹ˆæºäºæ‡’æƒ°ã€‚æ— è®ºåŸå› æ˜¯ä»€ä¹ˆï¼Œéƒ½è¦æ¶ˆé™¤ã€‚</p><p>(27). ç»“æ„ç”šäºçº¦å®šï¼Œåšå®ˆç»“æ„ç”šäºçº¦å®šçš„è®¾è®¡å†³ç­–ã€‚</p><p>(28). å°è£…æ¡ä»¶ï¼Œå¦‚æœæ²¡æœ‰ifæˆ–whileè¯­å¥çš„ä¸Šä¸‹æ–‡ï¼Œå¸ƒå°”é€»è¾‘å°±éš¾ä»¥ç†è§£ã€‚åº”è¯¥æŠŠè§£é‡Šäº†æ¡ä»¶æ„å›¾çš„å‡½æ•°æŠ½ç¦»å‡ºæ¥ã€‚</p><p>ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">shouldBeDeleted</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¦å¥½äº</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">if</span><span class="token punctuation">(</span>timer<span class="token punctuation">.</span><span class="token function">hasExpired</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>timer<span class="token punctuation">.</span><span class="token function">isRecurrent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>(29). é¿å…å¦å®šæ€§æ¡ä»¶ï¼Œå°½å¯èƒ½å°†æ¡ä»¶è¡¨ç¤ºä¸ºè‚¯å®šå½¢å¼ã€‚</p><p>(30). å‡½æ•°åªè¯¥åšä¸€ä»¶äº‹</p><p>(31). æ©è”½æ—¶åºè€¦åˆï¼Œæ’åˆ—å‡½æ•°å‚æ•°ï¼Œå¥½è®©å®ƒä»¬è¢«è°ƒç”¨çš„æ¬¡åºæ˜¾è€Œæ˜“è§ã€‚</p><p>(32). åˆ«éšæ„ï¼Œæ„å»ºä»£ç éœ€è¦ç†ç”±ï¼Œè€Œä¸”ç†ç”±åº”äºä»£ç ç»“æ„ç›¸å¥‘åˆã€‚</p><p>(33). å°è£…è¾¹ç•Œæ¡ä»¶ï¼ŒæŠŠå¤„ç†è¾¹ç•Œæ¡ä»¶çš„ä»£ç é›†ä¸­åˆ°ä¸€å¤„ï¼Œä¸è¦æ•£è½äºä»£ç ä¸­ã€‚</p><p>(34). å‡½æ•°åº”è¯¥åªåœ¨ä¸€ä¸ªæŠ½è±¡å±‚çº§ä¸Šï¼Œå‡½æ•°ä¸­çš„è¯­å¥åº”è¯¥åœ¨åŒæ„æŠ½è±¡çº§ä¸Šï¼Œè¯¥å±‚çº§åº”è¯¥æ˜¯å‡½æ•°åæ‰€ç¤ºæ“ä½œçš„ä¸‹ä¸€å±‚ã€‚</p><p>(35). åœ¨è¾ƒé«˜å±‚çº§æ”¾ç½®å¯é…ç½®æ•°æ®ï¼Œå¦‚æœä½ æœ‰ä¸ªå·²çŸ¥å¹¶åœ¨è¾ƒé«˜æŠ½è±¡å±‚çº§çš„é»˜è®¤å¸¸é‡æˆ–é…ç½®å€¼ï¼Œä¸è¦å°†å®ƒåŸ‹è—åˆ°è¾ƒä½å±‚çº§çš„å‡½æ•°ä¸­ã€‚æŠŠå®ƒä½œä¸ºè¾ƒé«˜å±‚çº§å‡½æ•°è°ƒç”¨è¾ƒä½å±‚çº§å‡½æ•°æ—¶çš„ä¸€ä¸ªå‚æ•°ã€‚ä½äºè¾ƒé«˜å±‚çº§çš„é…ç½®æ€§å¸¸é‡æ˜“äºä¿®æ”¹ã€‚å®ƒä»¬å‘ä¸‹è´¯ç©¿åº”ç”¨ç¨‹åºã€‚åº”ç”¨ç¨‹åºçš„è¾ƒä½å±‚çº§å¹¶ä¸æ‹¥æœ‰è¿™äº›å¸¸é‡çš„å€¼ã€‚</p><p>(36). é¿å…ä¼ é€’æµè§ˆï¼Œç¼–å†™å®³ç¾ä»£ç ã€‚</p><p>(37). ä¸è¦ç»§æ‰¿å¸¸é‡</p><h3 id="17-5-æµ‹è¯•"><a href="#17-5-æµ‹è¯•" class="headerlink" title="17.5 æµ‹è¯•"></a>17.5 æµ‹è¯•</h3><ol><li>ä½¿ç”¨è¦†ç›–ç‡å·¥å…·ï¼Œè¦†ç›–ç‡å·¥å…·èƒ½æ±‡æŠ¥ä½ æµ‹è¯•ç­–ç•¥ä¸­çš„ç¼ºå£ã€‚ä½¿ç”¨æµ‹è¯•è¦†ç›–ç‡å·¥å…·èƒ½æ›´å®¹æ˜“åœ°æ‰¾åˆ°ä¸è¶³çš„æ¨¡å—ï¼Œç±»å’Œå‡½æ•°ã€‚</li><li>åˆ«ç•¥è¿‡å°æµ‹è¯•</li><li>è¢«å¿½ç•¥çš„æµ‹è¯•å°±æ˜¯å¯¹ä¸ç¡®å®šäº‹ç‰©çš„ç–‘é—®ã€‚</li><li>æµ‹è¯•è¾¹ç•Œæ¡ä»¶</li><li>å…¨é¢æµ‹è¯•ç›¸è¿‘çš„ç¼ºé™·ï¼Œç¼ºé™·è¶‹å‘äºæ‰å †ã€‚</li><li>æµ‹è¯•å¤±è´¥çš„æ¨¡å¼æœ‰å¯å‘æ€§ã€‚</li><li>æµ‹è¯•è¦†ç›–ç‡çš„æ¨¡å¼æœ‰å¯å‘æ€§ï¼ŒæŸ¥çœ‹è¢«æˆ–æœªè¢«ä»¥é€šè¿‡çš„æµ‹è¯•æ‰§è¡Œçš„ä»£ç ï¼Œå¾€å¾€èƒ½å‘ç°å¤±è´¥çš„æµ‹è¯•ä¸ºä½•å¤±è´¥çš„çº¿ç´¢ã€‚</li><li>æµ‹è¯•åº”è¯¥å¿«é€Ÿã€‚</li></ol><p>æ¥è‡ªï¼š<a href="http://www.uml.org.cn/codeNorms/201701162.asp">ä»£ç æ•´æ´ä¹‹é“å†…å®¹æ¦‚è¦</a></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ä¹‹é“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•´æ´ä»£ç  </tag>
            
            <tag> é‡æ„ </tag>
            
            <tag> æµ‹è¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaé¢å‘å¯¹è±¡è®¾è®¡ä¹‹è§‚å¯Ÿè€…æ¨¡å¼</title>
      <link href="/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-guan-cha-zhe-mo-shi/"/>
      <url>/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-guan-cha-zhe-mo-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€æ¨¡å¼åŠ¨æœº"><a href="#ä¸€ã€æ¨¡å¼åŠ¨æœº" class="headerlink" title="ä¸€ã€æ¨¡å¼åŠ¨æœº"></a>ä¸€ã€æ¨¡å¼åŠ¨æœº</h2><p>å»ºç«‹ä¸€ç§å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œä¸€ä¸ªå¯¹è±¡å‘ç”Ÿæ”¹å˜æ—¶å°†è‡ªåŠ¨é€šçŸ¥å…¶ä»–å¯¹è±¡ï¼Œå…¶ä»–å¯¹è±¡å°†ç›¸åº”åšå‡ºååº”ã€‚åœ¨æ­¤ï¼Œå‘ç”Ÿæ”¹å˜çš„å¯¹è±¡ç§°ä¸ºè§‚å¯Ÿç›®æ ‡ï¼Œè€Œè¢«é€šçŸ¥çš„å¯¹è±¡ç§°ä¸ºè§‚å¯Ÿè€…ï¼Œä¸€ä¸ªè§‚å¯Ÿç›®æ ‡å¯ä»¥å¯¹åº”å¤šä¸ªè§‚å¯Ÿè€…ï¼Œè€Œä¸”è¿™äº›è§‚å¯Ÿè€…ä¹‹é—´æ²¡æœ‰ç›¸äº’è”ç³»ï¼Œå¯ä»¥æ ¹æ®éœ€è¦å¢åŠ å’Œåˆ é™¤è§‚å¯Ÿè€…ï¼Œä½¿å¾—ç³»ç»Ÿæ›´æ˜“äºæ‰©å±•ï¼Œè¿™å°±æ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„æ¨¡å¼åŠ¨æœºã€‚</p><h2 id="äºŒã€æ¨¡å¼å®šä¹‰"><a href="#äºŒã€æ¨¡å¼å®šä¹‰" class="headerlink" title="äºŒã€æ¨¡å¼å®šä¹‰"></a>äºŒã€æ¨¡å¼å®šä¹‰</h2><blockquote><p>è§‚å¯Ÿè€…æ¨¡å¼(<code>Observer Pattern</code>)ï¼šå®šä¹‰å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šä¾èµ–å…³ç³»ï¼Œä½¿å¾—æ¯å½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå…¶ç›¸å…³ä¾èµ–å¯¹è±¡çš†å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚è§‚å¯Ÿè€…æ¨¡å¼åˆå«åšå‘å¸ƒ-è®¢é˜…ï¼ˆ<code>Publish</code>/<code>Subscribe</code>ï¼‰æ¨¡å¼ã€æ¨¡å‹-è§†å›¾ï¼ˆ<code>Model</code>/<code>View</code>ï¼‰æ¨¡å¼ã€æº-ç›‘å¬å™¨ï¼ˆ<code>Source</code>/<code>Listener</code>ï¼‰æ¨¡å¼æˆ–ä»å±è€…ï¼ˆ<code>Dependents</code>ï¼‰æ¨¡å¼ã€‚</p></blockquote><p>è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§<strong>å¯¹è±¡è¡Œä¸ºå‹æ¨¡å¼</strong>ã€‚</p><h2 id="ä¸‰ã€æ¨¡å¼ç»“æ„"><a href="#ä¸‰ã€æ¨¡å¼ç»“æ„" class="headerlink" title="ä¸‰ã€æ¨¡å¼ç»“æ„"></a>ä¸‰ã€æ¨¡å¼ç»“æ„</h2><h3 id="1-è§’è‰²ç»„æˆï¼š"><a href="#1-è§’è‰²ç»„æˆï¼š" class="headerlink" title="1. è§’è‰²ç»„æˆï¼š"></a>1. è§’è‰²ç»„æˆï¼š</h3><p>è§‚å¯Ÿè€…æ¨¡å¼åŒ…å«å¦‚ä¸‹è§’è‰²ï¼š</p><ul><li><code>Subject</code>: ç›®æ ‡ï¼ˆæŠ½è±¡çš„è¢«è§‚å¯Ÿç€ï¼‰</li><li><code>ConcreteSubject</code>: å…·ä½“ç›®æ ‡ï¼ˆå…·ä½“çš„è¢«è§‚å¯Ÿè€…ï¼‰</li><li><code>Observer</code>: è§‚å¯Ÿè€…</li><li><code>ConcreteObserver</code>: å…·ä½“è§‚å¯Ÿè€…</li></ul><h3 id="2-ç»“æ„å›¾ï¼š"><a href="#2-ç»“æ„å›¾ï¼š" class="headerlink" title="2. ç»“æ„å›¾ï¼š"></a>2. ç»“æ„å›¾ï¼š</h3><p><img src="https://statics.sh1a.qingstor.com/2018/10/14/obeserver-structure.jpg" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/10/14/obeserver-structure.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="è§‚å¯Ÿè€…æ¨¡å¼ç»“æ„å›¾"></p><h3 id="3-æ—¶åºå›¾ï¼š"><a href="#3-æ—¶åºå›¾ï¼š" class="headerlink" title="3. æ—¶åºå›¾ï¼š"></a>3. æ—¶åºå›¾ï¼š</h3><p><img src="https://statics.sh1a.qingstor.com/2018/10/14/obeserver-seq.jpg" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/10/14/obeserver-seq.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="è§‚å¯Ÿè€…æ¨¡å¼æ—¶åºå›¾"></p><h2 id="å››ã€ç¤ºä¾‹ä»£ç "><a href="#å››ã€ç¤ºä¾‹ä»£ç " class="headerlink" title="å››ã€ç¤ºä¾‹ä»£ç "></a>å››ã€ç¤ºä¾‹ä»£ç </h2><p>é¦–å…ˆï¼Œæ˜¯è§‚å¯Ÿè€…æ¥å£ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * è§‚å¯Ÿè€…æ¥å£ * Created by blinkfox on 16/7/14. */</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Observer</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// æ›´æ–°çš„æ–¹æ³•</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥ï¼Œæ˜¯å…·ä½“çš„è§‚å¯Ÿè€…ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å…·ä½“çš„è§‚å¯Ÿè€…. * * Created by blinkfox on 16/7/15. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteObserver</span> <span class="token keyword">implements</span> <span class="token class-name">Observer</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * å®ç°æ›´æ–°æ–¹æ³•.     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ¥æ”¶åˆ°ä¿¡æ¯,å¹¶è¿›è¡Œå¤„ç†..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åï¼Œæ˜¯è¢«è§‚å¯Ÿè€…çš„æŠ½è±¡ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * è¢«è§‚å¯Ÿè€…çš„æŠ½è±¡ç±». * * Created by blinkfox on 16/7/14. */</span><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Subject</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/** å®šä¹‰ä¸€ä¸ªè§‚å¯Ÿè€…çš„é›†åˆ. */</span>    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Observer</span><span class="token punctuation">></span></span> observers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Observer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * å¢åŠ ä¸€ä¸ªè§‚å¯Ÿè€….     *     * @param o     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addObserver</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> o<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * åˆ é™¤ä¸€ä¸ªè§‚å¯Ÿè€….     *     * @param o     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delObserver</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> o<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€….     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notifyObservers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Observer</span> o<span class="token operator">:</span> observers<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            o<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…·ä½“çš„è¢«è§‚å¯Ÿè€…ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å…·ä½“çš„è¢«è§‚å¯Ÿè€…. * * Created by blinkfox on 16/7/15. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteSubject</span> <span class="token keyword">extends</span> <span class="token class-name">Subject</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * å…·ä½“çš„ä¸šåŠ¡.     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">notifyObservers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åï¼Œæ˜¯ç”¨äºæµ‹è¯•è§‚å¯Ÿè€…æ¨¡å¼çš„å®¢æˆ·ç«¯åœºæ™¯ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * è§‚å¯Ÿè€…æ¨¡å¼å®¢æˆ·ç«¯åœºæ™¯ç±». * * Created by blinkfox on 16/7/15. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ObserverClient</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// åˆ›å»ºä¸€ä¸ªè¢«è§‚å¯Ÿè€…å’Œè§‚å¯Ÿè€….</span>        <span class="token class-name">ConcreteSubject</span> sub <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Observer</span> obs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteObserver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è§‚å¯Ÿè€…è§‚å¯Ÿè¢«è§‚å¯Ÿè€….</span>        sub<span class="token punctuation">.</span><span class="token function">addObserver</span><span class="token punctuation">(</span>obs<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è§‚å¯Ÿè€…å¼€å§‹æ´»åŠ¨äº†.</span>        sub<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="äº”ã€æ¨¡å¼åˆ†æ"><a href="#äº”ã€æ¨¡å¼åˆ†æ" class="headerlink" title="äº”ã€æ¨¡å¼åˆ†æ"></a>äº”ã€æ¨¡å¼åˆ†æ</h2><ul><li>è§‚å¯Ÿè€…æ¨¡å¼æè¿°äº†å¦‚ä½•å»ºç«‹å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå¦‚ä½•æ„é€ æ»¡è¶³è¿™ç§éœ€æ±‚çš„ç³»ç»Ÿã€‚</li><li>è¿™ä¸€æ¨¡å¼ä¸­çš„å…³é”®å¯¹è±¡æ˜¯è§‚å¯Ÿç›®æ ‡å’Œè§‚å¯Ÿè€…ï¼Œä¸€ä¸ªç›®æ ‡å¯ä»¥æœ‰ä»»æ„æ•°ç›®çš„ä¸ä¹‹ç›¸ä¾èµ–çš„è§‚å¯Ÿè€…ï¼Œä¸€æ—¦ç›®æ ‡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œæ‰€æœ‰çš„è§‚å¯Ÿè€…éƒ½å°†å¾—åˆ°é€šçŸ¥ã€‚</li><li>ä½œä¸ºå¯¹è¿™ä¸ªé€šçŸ¥çš„å“åº”ï¼Œæ¯ä¸ªè§‚å¯Ÿè€…éƒ½å°†å³æ—¶æ›´æ–°è‡ªå·±çš„çŠ¶æ€ï¼Œä»¥ä¸ç›®æ ‡çŠ¶æ€åŒæ­¥ï¼Œè¿™ç§äº¤äº’ä¹Ÿç§°ä¸º<strong>å‘å¸ƒ-è®¢é˜…</strong>(<code>publish-subscribe</code>)ã€‚ç›®æ ‡æ˜¯é€šçŸ¥çš„å‘å¸ƒè€…ï¼Œå®ƒå‘å‡ºé€šçŸ¥æ—¶å¹¶ä¸éœ€è¦çŸ¥é“è°æ˜¯å®ƒçš„è§‚å¯Ÿè€…ï¼Œå¯ä»¥æœ‰ä»»æ„æ•°ç›®çš„è§‚å¯Ÿè€…è®¢é˜…å®ƒå¹¶æ¥æ”¶é€šã€‚</li></ul><h3 id="1-ä¼˜ç‚¹"><a href="#1-ä¼˜ç‚¹" class="headerlink" title="1. ä¼˜ç‚¹"></a>1. ä¼˜ç‚¹</h3><p>è§‚å¯Ÿè€…æ¨¡å¼çš„ä¼˜ç‚¹ï¼š</p><ul><li>è§‚å¯Ÿè€…æ¨¡å¼å¯ä»¥å®ç°è¡¨ç¤ºå±‚å’Œæ•°æ®é€»è¾‘å±‚çš„åˆ†ç¦»ï¼Œå¹¶å®šä¹‰äº†ç¨³å®šçš„æ¶ˆæ¯æ›´æ–°ä¼ é€’æœºåˆ¶ï¼ŒæŠ½è±¡äº†æ›´æ–°æ¥å£ï¼Œä½¿å¾—å¯ä»¥æœ‰å„ç§å„æ ·ä¸åŒçš„è¡¨ç¤ºå±‚ä½œä¸ºå…·ä½“è§‚å¯Ÿè€…è§’è‰²ã€‚</li><li>è§‚å¯Ÿè€…æ¨¡å¼åœ¨è§‚å¯Ÿç›®æ ‡å’Œè§‚å¯Ÿè€…ä¹‹é—´å»ºç«‹ä¸€ä¸ªæŠ½è±¡çš„è€¦åˆã€‚</li><li>è§‚å¯Ÿè€…æ¨¡å¼æ”¯æŒå¹¿æ’­é€šä¿¡ã€‚</li><li>è§‚å¯Ÿè€…æ¨¡å¼ç¬¦åˆâ€œå¼€é—­åŸåˆ™â€çš„è¦æ±‚ã€‚</li></ul><h3 id="2-ç¼ºç‚¹"><a href="#2-ç¼ºç‚¹" class="headerlink" title="2. ç¼ºç‚¹"></a>2. ç¼ºç‚¹</h3><p>è§‚å¯Ÿè€…æ¨¡å¼çš„ç¼ºç‚¹ï¼š</p><ul><li>å¦‚æœä¸€ä¸ªè§‚å¯Ÿç›®æ ‡å¯¹è±¡æœ‰å¾ˆå¤šç›´æ¥å’Œé—´æ¥çš„è§‚å¯Ÿè€…çš„è¯ï¼Œå°†æ‰€æœ‰çš„è§‚å¯Ÿè€…éƒ½é€šçŸ¥åˆ°ä¼šèŠ±è´¹å¾ˆå¤šæ—¶é—´ã€‚</li><li>å¦‚æœåœ¨è§‚å¯Ÿè€…å’Œè§‚å¯Ÿç›®æ ‡ä¹‹é—´æœ‰å¾ªç¯ä¾èµ–çš„è¯ï¼Œè§‚å¯Ÿç›®æ ‡ä¼šè§¦å‘å®ƒä»¬ä¹‹é—´è¿›è¡Œå¾ªç¯è°ƒç”¨ï¼Œå¯èƒ½å¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚</li><li>è§‚å¯Ÿè€…æ¨¡å¼æ²¡æœ‰ç›¸åº”çš„æœºåˆ¶è®©è§‚å¯Ÿè€…çŸ¥é“æ‰€è§‚å¯Ÿçš„ç›®æ ‡å¯¹è±¡æ˜¯æ€ä¹ˆå‘ç”Ÿå˜åŒ–çš„ï¼Œè€Œä»…ä»…åªæ˜¯çŸ¥é“è§‚å¯Ÿç›®æ ‡å‘ç”Ÿäº†å˜åŒ–ã€‚</li></ul><h3 id="3-é€‚ç”¨ç¯å¢ƒ"><a href="#3-é€‚ç”¨ç¯å¢ƒ" class="headerlink" title="3.é€‚ç”¨ç¯å¢ƒ"></a>3.é€‚ç”¨ç¯å¢ƒ</h3><p>åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼š</p><ul><li>ä¸€ä¸ªæŠ½è±¡æ¨¡å‹æœ‰ä¸¤ä¸ªæ–¹é¢ï¼Œå…¶ä¸­ä¸€ä¸ªæ–¹é¢ä¾èµ–äºå¦ä¸€ä¸ªæ–¹é¢ã€‚å°†è¿™äº›æ–¹é¢å°è£…åœ¨ç‹¬ç«‹çš„å¯¹è±¡ä¸­ä½¿å®ƒä»¬å¯ä»¥å„è‡ªç‹¬ç«‹åœ°æ”¹å˜å’Œå¤ç”¨ã€‚</li><li>ä¸€ä¸ªå¯¹è±¡çš„æ”¹å˜å°†å¯¼è‡´å…¶ä»–ä¸€ä¸ªæˆ–å¤šä¸ªå¯¹è±¡ä¹Ÿå‘ç”Ÿæ”¹å˜ï¼Œè€Œä¸çŸ¥é“å…·ä½“æœ‰å¤šå°‘å¯¹è±¡å°†å‘ç”Ÿæ”¹å˜ï¼Œå¯ä»¥é™ä½å¯¹è±¡ä¹‹é—´çš„è€¦åˆåº¦ã€‚</li><li>ä¸€ä¸ªå¯¹è±¡å¿…é¡»é€šçŸ¥å…¶ä»–å¯¹è±¡ï¼Œè€Œå¹¶ä¸çŸ¥é“è¿™äº›å¯¹è±¡æ˜¯è°ã€‚</li><li>éœ€è¦åœ¨ç³»ç»Ÿä¸­åˆ›å»ºä¸€ä¸ªè§¦å‘é“¾ï¼ŒAå¯¹è±¡çš„è¡Œä¸ºå°†å½±å“Bå¯¹è±¡ï¼ŒBå¯¹è±¡çš„è¡Œä¸ºå°†å½±å“Cå¯¹è±¡â€¦â€¦ï¼Œå¯ä»¥ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼åˆ›å»ºä¸€ç§é“¾å¼è§¦å‘æœºåˆ¶ã€‚</li></ul><blockquote><p>è§‚å¯Ÿè€…æ¨¡å¼åœ¨è½¯ä»¶å¼€å‘ä¸­åº”ç”¨éå¸¸å¹¿æ³›ï¼Œå¦‚æŸç”µå­å•†åŠ¡ç½‘ç«™å¯ä»¥åœ¨æ‰§è¡Œå‘é€æ“ä½œåç»™ç”¨æˆ·å¤šä¸ªå‘é€å•†å“æ‰“æŠ˜ä¿¡æ¯ï¼ŒæŸå›¢é˜Ÿæˆ˜æ–—æ¸¸æˆä¸­æŸé˜Ÿå‹ç‰ºç‰²å°†ç»™æ‰€æœ‰æˆå‘˜æç¤ºç­‰ç­‰ï¼Œå‡¡æ˜¯æ¶‰åŠåˆ°ä¸€å¯¹ä¸€æˆ–è€…ä¸€å¯¹å¤šçš„å¯¹è±¡äº¤äº’åœºæ™¯éƒ½å¯ä»¥ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ã€‚</p></blockquote><h2 id="å…­ã€æ€»ç»“"><a href="#å…­ã€æ€»ç»“" class="headerlink" title="å…­ã€æ€»ç»“"></a>å…­ã€æ€»ç»“</h2><ul><li>è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šä¾èµ–å…³ç³»ï¼Œä½¿å¾—æ¯å½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå…¶ç›¸å…³ä¾èµ–å¯¹è±¡çš†å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚è§‚å¯Ÿè€…æ¨¡å¼åˆå«åšå‘å¸ƒ-è®¢é˜…æ¨¡å¼ã€æ¨¡å‹-è§†å›¾æ¨¡å¼ã€æº-ç›‘å¬å™¨æ¨¡å¼æˆ–ä»å±è€…æ¨¡å¼ã€‚è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡è¡Œä¸ºå‹æ¨¡å¼ã€‚</li><li>è§‚å¯Ÿè€…æ¨¡å¼åŒ…å«å››ä¸ªè§’è‰²ï¼šç›®æ ‡åˆç§°ä¸ºä¸»é¢˜ï¼Œå®ƒæ˜¯æŒ‡è¢«è§‚å¯Ÿçš„å¯¹è±¡ï¼›å…·ä½“ç›®æ ‡æ˜¯ç›®æ ‡ç±»çš„å­ç±»ï¼Œé€šå¸¸å®ƒåŒ…å«æœ‰ç»å¸¸å‘ç”Ÿæ”¹å˜çš„æ•°æ®ï¼Œå½“å®ƒçš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå‘å®ƒçš„å„ä¸ªè§‚å¯Ÿè€…å‘å‡ºé€šçŸ¥ï¼›è§‚å¯Ÿè€…å°†å¯¹è§‚å¯Ÿç›®æ ‡çš„æ”¹å˜åšå‡ºååº”ï¼›åœ¨å…·ä½“è§‚å¯Ÿè€…ä¸­ç»´æŠ¤ä¸€ä¸ªæŒ‡å‘å…·ä½“ç›®æ ‡å¯¹è±¡çš„å¼•ç”¨ï¼Œå®ƒå­˜å‚¨å…·ä½“è§‚å¯Ÿè€…çš„æœ‰å…³çŠ¶æ€ï¼Œè¿™äº›çŠ¶æ€éœ€è¦å’Œå…·ä½“ç›®æ ‡çš„çŠ¶æ€ä¿æŒä¸€è‡´ã€‚</li><li>è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªç›®æ ‡å¯¹è±¡ï¼Œå½“è¿™ä¸ªç›®æ ‡å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°ã€‚</li><li>è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹åœ¨äºå¯ä»¥å®ç°è¡¨ç¤ºå±‚å’Œæ•°æ®é€»è¾‘å±‚çš„åˆ†ç¦»ï¼Œå¹¶åœ¨è§‚å¯Ÿç›®æ ‡å’Œè§‚å¯Ÿè€…ä¹‹é—´å»ºç«‹ä¸€ä¸ªæŠ½è±¡çš„è€¦åˆï¼Œæ”¯æŒå¹¿æ’­é€šä¿¡ï¼›å…¶ä¸»è¦ç¼ºç‚¹åœ¨äºå¦‚æœä¸€ä¸ªè§‚å¯Ÿç›®æ ‡å¯¹è±¡æœ‰å¾ˆå¤šç›´æ¥å’Œé—´æ¥çš„è§‚å¯Ÿè€…çš„è¯ï¼Œå°†æ‰€æœ‰çš„è§‚å¯Ÿè€…éƒ½é€šçŸ¥åˆ°ä¼šèŠ±è´¹å¾ˆå¤šæ—¶é—´ï¼Œè€Œä¸”å¦‚æœåœ¨è§‚å¯Ÿè€…å’Œè§‚å¯Ÿç›®æ ‡ä¹‹é—´æœ‰å¾ªç¯ä¾èµ–çš„è¯ï¼Œè§‚å¯Ÿç›®æ ‡ä¼šè§¦å‘å®ƒä»¬ä¹‹é—´è¿›è¡Œå¾ªç¯è°ƒç”¨ï¼Œå¯èƒ½å¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚</li><li>è§‚å¯Ÿè€…æ¨¡å¼é€‚ç”¨æƒ…å†µåŒ…æ‹¬ï¼šä¸€ä¸ªæŠ½è±¡æ¨¡å‹æœ‰ä¸¤ä¸ªæ–¹é¢ï¼Œå…¶ä¸­ä¸€ä¸ªæ–¹é¢ä¾èµ–äºå¦ä¸€ä¸ªæ–¹é¢ï¼›ä¸€ä¸ªå¯¹è±¡çš„æ”¹å˜å°†å¯¼è‡´å…¶ä»–ä¸€ä¸ªæˆ–å¤šä¸ªå¯¹è±¡ä¹Ÿå‘ç”Ÿæ”¹å˜ï¼Œè€Œä¸çŸ¥é“å…·ä½“æœ‰å¤šå°‘å¯¹è±¡å°†å‘ç”Ÿæ”¹å˜ï¼›ä¸€ä¸ªå¯¹è±¡å¿…é¡»é€šçŸ¥å…¶ä»–å¯¹è±¡ï¼Œè€Œå¹¶ä¸çŸ¥é“è¿™äº›å¯¹è±¡æ˜¯è°ï¼›éœ€è¦åœ¨ç³»ç»Ÿä¸­åˆ›å»ºä¸€ä¸ªè§¦å‘é“¾ã€‚</li><li>åœ¨JDKçš„<code>java.util</code>åŒ…ä¸­ï¼Œæä¾›äº†<code>Observable</code>ç±»ä»¥åŠ<code>Observer</code>æ¥å£ï¼Œå®ƒä»¬æ„æˆäº†Javaè¯­è¨€å¯¹è§‚å¯Ÿè€…æ¨¡å¼çš„æ”¯æŒã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶è®¾è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸ç”¨Bashå‘½ä»¤æ•´ç†ä¹‹å…¶ä»–å¸¸ç”¨å‘½ä»¤</title>
      <link href="/post/ruan-jian-gong-ju/linux/chang-yong-bash-ming-ling-zheng-li-zhi-qi-ta-chang-yong-ming-ling/"/>
      <url>/post/ruan-jian-gong-ju/linux/chang-yong-bash-ming-ling-zheng-li-zhi-qi-ta-chang-yong-ming-ling/</url>
      
        <content type="html"><![CDATA[<h2 id="1-hostname-æŸ¥çœ‹ä¸»æœºå"><a href="#1-hostname-æŸ¥çœ‹ä¸»æœºå" class="headerlink" title="1. hostname - æŸ¥çœ‹ä¸»æœºå"></a>1. hostname - æŸ¥çœ‹ä¸»æœºå</h2><p><code>hostname</code>å‘½ä»¤ç”¨äºæŸ¥çœ‹ç³»ç»Ÿçš„ä¸»æœºåï¼Œæˆ–æ˜¯ä¿®æ”¹ç³»ç»Ÿçš„ä¸»æœºåã€‚</p><p><code>hostname</code>çš„å¸¸ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ˜¾ç¤ºç³»ç»Ÿçš„å½“å‰ä¸»æœºå</span><span class="token function">hostname</span><span class="token comment"># ä¿®æ”¹ä½ ç³»ç»Ÿçš„ä¸»æœºå</span><span class="token function">hostname</span> blinkfox-system<span class="token comment"># ä½¿ç”¨ -F é€‰é¡¹ï¼Œä»æŒ‡å®šçš„æ–‡ä»¶ä¸­è¯»å–ä¸»æœºå</span><span class="token function">hostname</span> -F /root/hostname.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-uptime-æŸ¥çœ‹ç³»ç»Ÿè¿è¡Œæ—¶é—´"><a href="#2-uptime-æŸ¥çœ‹ç³»ç»Ÿè¿è¡Œæ—¶é—´" class="headerlink" title="2. uptime - æŸ¥çœ‹ç³»ç»Ÿè¿è¡Œæ—¶é—´"></a>2. uptime - æŸ¥çœ‹ç³»ç»Ÿè¿è¡Œæ—¶é—´</h2><p><code>uptime</code>å‘½ä»¤ç”¨äºæ‰“å°ç³»ç»Ÿçš„è¿è¡Œæ—¶é—´ç­‰ä¿¡æ¯ã€‚ä½¿ç”¨å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">uptime</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="3-wã€who-åˆ—å‡ºç™»å½•çš„ç”¨æˆ·"><a href="#3-wã€who-åˆ—å‡ºç™»å½•çš„ç”¨æˆ·" class="headerlink" title="3. wã€who - åˆ—å‡ºç™»å½•çš„ç”¨æˆ·"></a>3. wã€who - åˆ—å‡ºç™»å½•çš„ç”¨æˆ·</h2><p><code>w</code>å‘½ä»¤ç”¨äºæ˜¾ç¤ºç™»å½•ç”¨æˆ·åŠä»–ä»¬å½“å‰è¿è¡Œçš„è¿›ç¨‹ã€‚è¾“å…¥çš„å†…å®¹æ ¼å¼å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">w<span class="token comment"># æ‰“å°å¦‚ä¸‹</span><span class="token number">22</span>:42  up <span class="token number">18</span> days, <span class="token number">1</span> hr, <span class="token number">2</span> users, load averages: <span class="token number">1.23</span> <span class="token number">1.79</span> <span class="token number">1.75</span><span class="token environment constant">USER</span>     TTY      FROM              LOGIN@  IDLE WHATblinkfox console  -                æ—¥19   6days -blinkfox s000     -                äº”23       - w<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>who</code>å‘½ä»¤æœ‰ä¸<code>w</code>å‘½ä»¤ç±»ä¼¼çš„ç”¨é€”ï¼Œä½†å®ƒçš„åŠŸèƒ½æ¯”<code>w</code>å‘½ä»¤æ›´å¼ºå¤§ä¸€äº›ã€‚è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">who</span> <span class="token punctuation">[</span>OPTION<span class="token punctuation">]</span><span class="token punctuation">..</span>. <span class="token punctuation">[</span>FILE <span class="token operator">|</span> ARG1 ARG2<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>who</code>å¸¸ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ˜¾ç¤ºå½“å‰ç™»å½•çš„æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯</span><span class="token function">who</span><span class="token comment"># æ˜¾ç¤ºç³»ç»Ÿçš„å¯åŠ¨æ—¶é—´</span><span class="token function">who</span> -b<span class="token comment"># æ˜¾ç¤ºç³»ç»Ÿç™»å½•è¿›ç¨‹</span><span class="token function">who</span> -l<span class="token comment"># æ˜¾ç¤ºä¸å½“å‰æ ‡å‡†è¾“å…¥å…³è”çš„ç”¨æˆ·ä¿¡æ¯</span><span class="token function">who</span> -m<span class="token comment"># æ˜¾ç¤ºç³»ç»Ÿçš„è¿è¡Œçº§åˆ«</span><span class="token function">who</span> -r<span class="token comment"># æ˜¾ç¤ºæ‰€æœ‰ç™»å½•ç”¨æˆ·çš„ç”¨æˆ·åå’Œç™»å½•ç”¨æˆ·æ•°</span><span class="token function">who</span> -q<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-uname-æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯"><a href="#4-uname-æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯" class="headerlink" title="4. uname - æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯"></a>4. uname - æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯</h2><p><code>uname</code>å‘½ä»¤ç”¨äºæ‰“å°å†…æ ¸åç§°å’Œç‰ˆæœ¬ã€ä¸»æœºåç­‰ç³»ç»Ÿä¿¡æ¯ã€‚å‘½ä»¤çš„è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">uname</span> <span class="token punctuation">[</span>OPTION<span class="token punctuation">]</span><span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¸¸ç”¨ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åªæ‰“å°å†…æ ¸çš„åç§°</span><span class="token function">uname</span><span class="token comment"># ä½¿ç”¨ -n é€‰é¡¹ï¼Œåªæ‰“å°ç³»ç»Ÿçš„ä¸»æœºå</span><span class="token function">uname</span> -n<span class="token comment"># ä½¿ç”¨ -r é€‰é¡¹ï¼Œæ‰“å°å†…æ ¸ç‰ˆæœ¬ä¿¡æ¯</span><span class="token function">uname</span> -r<span class="token comment"># ä½¿ç”¨ -m é€‰é¡¹ï¼Œæ‰“å°ç³»ç»Ÿçš„ç¡¬ä»¶åç§°</span><span class="token function">uname</span> -m<span class="token comment"># ä½¿ç”¨ -p é€‰é¡¹ï¼Œæ‰“å°ç³»ç»Ÿçš„å¤„ç†å™¨ç±»å‹ä¿¡æ¯</span><span class="token function">uname</span> -p<span class="token comment"># ä½¿ç”¨ -i é€‰é¡¹ï¼Œæ‰“å°ç³»ç»Ÿçš„ç¡¬ä»¶å¹³å°ä¿¡æ¯</span><span class="token function">uname</span> -i<span class="token comment"># ä½¿ç”¨ -a é€‰é¡¹ï¼Œæ‰“å°ä¸Šè¿°æ‰€æœ‰ç¤ºä¾‹ä¸­çš„ä¿¡æ¯</span><span class="token function">uname</span> -a<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-date-æ˜¾ç¤ºå’Œè®¾ç½®ç³»ç»Ÿæ—¥æœŸå’Œæ—¶é—´"><a href="#5-date-æ˜¾ç¤ºå’Œè®¾ç½®ç³»ç»Ÿæ—¥æœŸå’Œæ—¶é—´" class="headerlink" title="5. date - æ˜¾ç¤ºå’Œè®¾ç½®ç³»ç»Ÿæ—¥æœŸå’Œæ—¶é—´"></a>5. date - æ˜¾ç¤ºå’Œè®¾ç½®ç³»ç»Ÿæ—¥æœŸå’Œæ—¶é—´</h2><p><code>date</code>å‘½ä»¤ç”¨äºä»¥å¤šç§æ ¼å¼æ˜¾ç¤ºæ—¥æœŸå’Œæ—¶é—´ï¼Œæˆ–è®¾ç½®ç³»ç»Ÿçš„æ—¥æœŸå’Œæ—¶é—´ã€‚<code>date</code>å‘½ä»¤çš„è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">date</span> <span class="token punctuation">[</span>OPTION<span class="token punctuation">]</span><span class="token punctuation">..</span>. <span class="token punctuation">[</span>+FORMAT<span class="token punctuation">]</span><span class="token function">date</span> <span class="token punctuation">[</span>-u<span class="token operator">|</span>--utc<span class="token operator">|</span>--universal<span class="token punctuation">]</span> <span class="token punctuation">[</span>MMDDhhmm<span class="token punctuation">[</span><span class="token punctuation">[</span>CC<span class="token punctuation">]</span>YY<span class="token punctuation">]</span><span class="token punctuation">[</span>.ss<span class="token punctuation">]</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¸¸ç”¨ä½¿ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ä»¥é»˜è®¤æ ¼å¼æ˜¾ç¤ºç³»ç»Ÿçš„å½“å‰æ—¥æœŸæ—¶é—´</span><span class="token function">date</span><span class="token comment"># æ ¼å¼åŒ–å½“å‰æ—¥æœŸ</span><span class="token function">date</span> +<span class="token string">"%Y-%m-%d"</span><span class="token comment"># æ ¼å¼åŒ–è¾“å‡ºæ˜¨å¤©çš„æ—¥æœŸ</span><span class="token function">date</span> -d <span class="token string">"1 day ago"</span> +<span class="token string">"%Y-%m-%d"</span><span class="token comment"># 2ç§’åæ ¼å¼åŒ–è¾“å‡º</span><span class="token function">date</span> -d <span class="token string">"2 second"</span> +<span class="token string">"%Y-%m-%d %H:%M.%S"</span><span class="token comment"># æ™®é€šæ ¼å¼åŒ–è½¬å‡º</span><span class="token function">date</span> -d <span class="token string">"2009-12-12"</span> +<span class="token string">"%Y/%m/%d %H:%M.%S"</span><span class="token comment"># apacheæ ¼å¼è½¬æ¢</span><span class="token function">date</span> -d <span class="token string">"Dec 5, 2009 12:00:37 AM"</span> +<span class="token string">"%Y-%m-%d %H:%M.%S"</span><span class="token comment"># æ—¥æœŸåŠ å‡æ“ä½œ</span><span class="token function">date</span> +%Y%m%d <span class="token comment">#æ˜¾ç¤ºå‰å¤©å¹´æœˆæ—¥</span><span class="token function">date</span> -d <span class="token string">"+1 day"</span> +%Y%m%d <span class="token comment">#æ˜¾ç¤ºå‰ä¸€å¤©çš„æ—¥æœŸ</span><span class="token function">date</span> -d <span class="token string">"-1 day"</span> +%Y%m%d <span class="token comment">#æ˜¾ç¤ºåä¸€å¤©çš„æ—¥æœŸ</span><span class="token function">date</span> -d <span class="token string">"-1 month"</span> +%Y%m%d <span class="token comment">#æ˜¾ç¤ºä¸Šä¸€æœˆçš„æ—¥æœŸ</span><span class="token function">date</span> -d <span class="token string">"+1 month"</span> +%Y%m%d <span class="token comment">#æ˜¾ç¤ºä¸‹ä¸€æœˆçš„æ—¥æœŸ</span><span class="token function">date</span> -d <span class="token string">"-1 year"</span> +%Y%m%d <span class="token comment">#æ˜¾ç¤ºå‰ä¸€å¹´çš„æ—¥æœŸ</span><span class="token function">date</span> -d <span class="token string">"+1 year"</span> +%Y%m%d <span class="token comment">#æ˜¾ç¤ºä¸‹ä¸€å¹´çš„æ—¥æœŸ</span><span class="token comment"># è®¾å®šæ—¶é—´</span><span class="token function">date</span> -s <span class="token comment"># è®¾ç½®å½“å‰æ—¶é—´ï¼Œåªæœ‰rootæƒé™æ‰èƒ½è®¾ç½®ï¼Œå…¶ä»–åªèƒ½æŸ¥çœ‹</span><span class="token function">date</span> -s <span class="token number">20160816</span> <span class="token comment"># è®¾ç½®æˆ20160816ï¼Œè¿™æ ·ä¼šæŠŠå…·ä½“æ—¶é—´è®¾ç½®æˆç©º00:00:00</span><span class="token function">date</span> -s 01:01:01 <span class="token comment"># è®¾ç½®å…·ä½“æ—¶é—´ï¼Œä¸ä¼šå¯¹æ—¥æœŸåšæ›´æ”¹</span><span class="token function">date</span> -s <span class="token string">"01:01:01 2012-05-23"</span> <span class="token comment"># è¿™æ ·å¯ä»¥è®¾ç½®å…¨éƒ¨æ—¶é—´ </span><span class="token function">date</span> -s <span class="token string">"01:01:01 20120523"</span> <span class="token comment"># è¿™æ ·å¯ä»¥è®¾ç½®å…¨éƒ¨æ—¶é—´</span><span class="token function">date</span> -s <span class="token string">"2012-05-23 01:01:01"</span> <span class="token comment"># è¿™æ ·å¯ä»¥è®¾ç½®å…¨éƒ¨æ—¶é—´ </span><span class="token function">date</span> -s <span class="token string">"20120523 01:01:01"</span> <span class="token comment"># è¿™æ ·å¯ä»¥è®¾ç½®å…¨éƒ¨æ—¶é—´</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="6-id-æ˜¾ç¤ºç”¨æˆ·å±æ€§"><a href="#6-id-æ˜¾ç¤ºç”¨æˆ·å±æ€§" class="headerlink" title="6. id - æ˜¾ç¤ºç”¨æˆ·å±æ€§"></a>6. id - æ˜¾ç¤ºç”¨æˆ·å±æ€§</h2><p><code>id</code>å‘½ä»¤ç”¨äºæ‰“å°è¾“å‡ºç”¨æˆ·<code>uid</code>ã€<code>gid</code>ã€ç”¨æˆ·åå’Œç»„åç­‰ç”¨æˆ·èº«ä»½ä¿¡æ¯ã€‚<code>id</code>å‘½ä»¤çš„è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">id</span> <span class="token punctuation">[</span>OPTION<span class="token punctuation">]</span><span class="token punctuation">..</span>. <span class="token punctuation">[</span>USERNAME<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¸¸è§ä½¿ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># è¾“å‡ºå½“å‰ç”¨æˆ·çš„uidã€ç”¨æˆ·åã€gidã€ç»„ååŠç”¨æˆ·å±äºçš„ç¾¤ç»„ä¿¡æ¯</span><span class="token function">id</span><span class="token comment"># ä½¿ç”¨ -u é€‰é¡¹ï¼Œè¾“å‡ºç”¨æˆ·çš„ uid</span><span class="token function">id</span> -u<span class="token comment">#-u é€‰é¡¹å’Œ -n é€‰é¡¹ç»“åˆä½¿ç”¨ï¼Œè¾“å‡ºè´¦æˆ·çš„ç”¨æˆ·å</span><span class="token function">id</span> -un<span class="token comment"># ä½¿ç”¨ -g é€‰é¡¹ï¼Œè¾“å‡ºå¸å·å½“å‰èµ·ä½œç”¨çš„gid</span><span class="token function">id</span> -g<span class="token comment"># -g ä¸ -n é€‰é¡¹ç»“åˆä½¿ç”¨ï¼Œè¾“å‡ºå¸å·å½“å‰èµ·ä½œç”¨çš„ç”¨æˆ·ç»„å</span><span class="token function">id</span> -gn<span class="token comment"># ä½¿ç”¨ -G é€‰é¡¹ï¼Œè¾“å‡ºå¸å·æ‰€å±çš„æ‰€æœ‰ç¾¤ç»„id</span><span class="token function">id</span> -G root<span class="token comment"># -G ä¸ -n é€‰é¡¹ç»“åˆä½¿ç”¨ï¼Œè¾“å‡ºè´¦å·æ‰€å±çš„æ‰€æœ‰ç¾¤ç»„çš„åç§°</span><span class="token function">id</span> -Gn root<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸ç”¨Bashå‘½ä»¤æ•´ç†ä¹‹æ–‡æœ¬å¤„ç†</title>
      <link href="/post/ruan-jian-gong-ju/linux/chang-yong-bash-ming-ling-zheng-li-zhi-wen-ben-chu-li/"/>
      <url>/post/ruan-jian-gong-ju/linux/chang-yong-bash-ming-ling-zheng-li-zhi-wen-ben-chu-li/</url>
      
        <content type="html"><![CDATA[<h2 id="1-sort-æ–‡æœ¬æ’åº"><a href="#1-sort-æ–‡æœ¬æ’åº" class="headerlink" title="1. sort - æ–‡æœ¬æ’åº"></a>1. sort - æ–‡æœ¬æ’åº</h2><p><code>sort</code>å‘½ä»¤ç”¨äºå°†æ–‡æœ¬æ–‡ä»¶çš„è¡Œæ’åºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>sort</code>å‘½ä»¤æ˜¯æŒ‰ç…§å­—ç¬¦ä¸²çš„å­—æ¯é¡ºåºæ’åºã€‚</p><p>sort çš„å¸¸ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å°†æ–‡æœ¬å†…å®¹æŒ‰å­—æ¯é¡ºåºæ’åº</span><span class="token function">sort</span> example.txt<span class="token comment"># ä½¿ç”¨ -u é€‰é¡¹ï¼Œç§»é™¤æ‰€æœ‰é‡å¤è¡Œåæ’åº</span><span class="token function">sort</span> -u example.txt<span class="token comment"># ä½¿ç”¨ -n é€‰é¡¹ï¼Œå°†ä»¤æ•°å­—æŒ‰æ•°å€¼çš„å¤§å°æ’åº</span><span class="token function">sort</span> -n example.txt<span class="token comment"># ä½¿ç”¨ -r é€‰é¡¹ï¼Œä»¥å€’åºæ–¹å¼æ’åº</span><span class="token function">sort</span> -n -r example.txt<span class="token comment"># åŒæ—¶å°† file1ã€file2 çš„å†…å®¹æ’åº</span><span class="token function">sort</span> file1 file2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-uniq-æ–‡æœ¬å»é‡"><a href="#2-uniq-æ–‡æœ¬å»é‡" class="headerlink" title="2.uniq - æ–‡æœ¬å»é‡"></a>2.uniq - æ–‡æœ¬å»é‡</h2><p><code>uniq</code>å‘½ä»¤ç”¨äºç§»é™¤æˆ–å‘ç°æ–‡ä»¶ä¸­é‡å¤çš„æ¡ç›®ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å®ƒå°†ç§»é™¤æ–‡ä»¶ä¸­é‡å¤çš„è¡Œå¹¶æ˜¾ç¤ºå•ä¸€è¡Œ</span><span class="token function">uniq</span> example.txt<span class="token comment"># å¯ä»¥ç»Ÿè®¡é‡å¤è¡Œå‡ºç°çš„æ¬¡æ•°</span><span class="token function">uniq</span> -c example.txt<span class="token comment"># ä½¿ç”¨ -d é€‰é¡¹ï¼Œåªæ˜¾ç¤ºæ–‡ä»¶ä¸­æœ‰é‡å¤çš„è¡Œå¹¶åªæ˜¾ç¤ºä¸€æ¬¡</span><span class="token function">uniq</span> -d example.txt<span class="token comment"># ä½¿ç”¨ -D é€‰é¡¹ï¼Œæ˜¾ç¤ºæ–‡ä»¶ä¸­æ‰€æœ‰é‡å¤çš„è¡Œ</span><span class="token function">uniq</span> -D example.txt<span class="token comment"># ä½¿ç”¨ -u é€‰é¡¹ï¼Œåªæ˜¾ç¤ºæ–‡ä»¶ä¸­ä¸é‡å¤çš„è¡Œ</span><span class="token function">uniq</span> -u example.txt<span class="token comment"># ä½¿ç”¨ -w é€‰é¡¹ï¼Œé™åˆ¶ uniq å‘½ä»¤åªæ¯”è¾ƒæ¯è¡Œçš„å‰ 3 ä¸ªå­—ç¬¦æ˜¯å¦é‡å¤</span><span class="token function">uniq</span> -w <span class="token number">3</span> example.txt<span class="token comment"># ä½¿ç”¨ -s é€‰é¡¹ï¼Œé¿å… uniq å‘½ä»¤æ¯”è¾ƒæ¯è¡Œçš„å‰ 3 ä¸ªå­—ç¬¦ï¼Œåªæ¯”è¾ƒåé¢çš„å­—ç¬¦æ˜¯å¦é‡å¤</span><span class="token function">uniq</span> -s <span class="token number">3</span> example.txt<span class="token comment"># ä½¿ç”¨ -f é€‰é¡¹ï¼Œé¿å… uniq å‘½ä»¤æ¯”è¾ƒç¬¬ä¸€åˆ—çš„å†…å®¹ï¼Œåªæ¯”è¾ƒåé¢çš„å­—ç¬¦æ˜¯å¦é‡å¤</span><span class="token function">uniq</span> -f <span class="token number">1</span> example.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-tr-æ›¿æ¢æˆ–åˆ é™¤å­—ç¬¦"><a href="#3-tr-æ›¿æ¢æˆ–åˆ é™¤å­—ç¬¦" class="headerlink" title="3.tr - æ›¿æ¢æˆ–åˆ é™¤å­—ç¬¦"></a>3.tr - æ›¿æ¢æˆ–åˆ é™¤å­—ç¬¦</h2><p><code>tr</code>å‘½ä»¤ä¸»è¦ç”¨äºåˆ é™¤æ–‡ä»¶ä¸­æ§åˆ¶å­—ç¬¦æˆ–è¿›è¡Œå­—ç¬¦è½¬æ¢ã€‚ä½¿ç”¨<code>tr</code>æ—¶è¦è½¬æ¢ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼šå­—ç¬¦ä¸² 1 ç”¨äºæŸ¥è¯¢ï¼Œå­—ç¬¦ä¸² 2 ç”¨äºå¤„ç†å„ç§è½¬æ¢ã€‚<code>tr</code>åˆšæ‰§è¡Œæ—¶ï¼Œå­—ç¬¦ä¸² 1 ä¸­çš„å­—ç¬¦è¢«æ˜ å°„åˆ°å­—ç¬¦ä¸² 2 ä¸­çš„å­—ç¬¦ï¼Œç„¶åè½¬æ¢æ“ä½œå¼€å§‹ã€‚</p><p><code>tr</code>å‘½ä»¤çš„è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">tr</span> <span class="token punctuation">[</span>OPTION<span class="token punctuation">]</span><span class="token punctuation">..</span>. SET1 <span class="token punctuation">[</span>SET2<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¸¸ç”¨å‘½ä»¤ç¤ºä¾‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># è‹¥è¦å°†å¤§æ‹¬å·è½¬æ¢ä¸ºå°æ‹¬å·</span><span class="token function">tr</span> <span class="token string">'&#123;&#125;'</span> <span class="token string">'()'</span> <span class="token operator">&lt;</span> textfile <span class="token operator">></span> newfile<span class="token comment"># è‹¥è¦å°†å¤§æ‹¬å·è½¬æ¢æˆæ–¹æ‹¬å·</span><span class="token function">tr</span> <span class="token string">'&#123;&#125;'</span> <span class="token string">'\[]'</span> <span class="token operator">&lt;</span> textfile <span class="token operator">></span> newfile<span class="token comment"># è‹¥è¦å°†å°å†™å­—ç¬¦è½¬æ¢æˆå¤§å†™ï¼Œè¯·è¾“å…¥ï¼š</span><span class="token function">tr</span> <span class="token string">'a-z'</span> <span class="token string">'A-Z'</span> <span class="token operator">&lt;</span> textfile <span class="token operator">></span> newfile<span class="token comment"># è‹¥è¦åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ä¸­çš„å•è¯åˆ—è¡¨</span><span class="token function">tr</span> -cs <span class="token string">'[:lower:][:upper:]'</span> <span class="token string">'[\n*]'</span> <span class="token operator">&lt;</span> textfile <span class="token operator">></span> newfile<span class="token comment"># è‹¥è¦ä»æŸä¸ªæ–‡ä»¶ä¸­åˆ é™¤æ‰€æœ‰ç©ºå­—ç¬¦</span><span class="token function">tr</span> -d <span class="token string">'\0'</span> <span class="token operator">&lt;</span> textfile <span class="token operator">></span> newfile<span class="token comment"># è‹¥è¦ç”¨å•ç‹¬çš„æ¢è¡Œæ›¿æ¢æ¯ä¸€åºåˆ—çš„ä¸€ä¸ªæˆ–å¤šä¸ªæ¢è¡Œï¼Œè¯·è¾“å…¥ï¼š</span><span class="token function">tr</span> -s <span class="token string">'\n'</span> <span class="token operator">&lt;</span> textfile <span class="token operator">></span> newfile<span class="token comment"># è¦ä»¥å•ä¸ªâ€œ#â€å­—ç¬¦æ›¿æ¢ &lt;space> å­—ç¬¦ç±»ä¸­çš„æ¯ä¸ªå­—ç¬¦åºåˆ—</span><span class="token function">tr</span> -s <span class="token string">'[:space:]'</span> <span class="token string">'[#*]'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-grep-æŸ¥æ‰¾å­—ç¬¦ä¸²"><a href="#4-grep-æŸ¥æ‰¾å­—ç¬¦ä¸²" class="headerlink" title="4.grep - æŸ¥æ‰¾å­—ç¬¦ä¸²"></a>4.grep - æŸ¥æ‰¾å­—ç¬¦ä¸²</h2><p><code>grep</code>å‘½ä»¤ç”¨äºæœç´¢æ–‡æœ¬æˆ–æŒ‡å®šçš„æ–‡ä»¶ä¸­ä¸æŒ‡å®šçš„å­—ç¬¦ä¸²æˆ–æ¨¡å¼ç›¸åŒ¹é…çš„è¡Œã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>grep</code>å‘½ä»¤åªæ˜¾ç¤ºåŒ¹é…çš„è¡Œã€‚</p><p><code>grep</code>å‘½ä»¤çš„è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">grep</span> <span class="token punctuation">[</span>OPTION<span class="token punctuation">]</span><span class="token punctuation">..</span>. PATTERN <span class="token punctuation">[</span>FILE<span class="token punctuation">]</span><span class="token punctuation">..</span>.<span class="token function">grep</span> <span class="token punctuation">[</span>OPTION<span class="token punctuation">]</span><span class="token punctuation">..</span>. <span class="token punctuation">[</span>-e PATTERN <span class="token operator">|</span> -f FILE<span class="token punctuation">]</span> <span class="token punctuation">[</span>FILE<span class="token punctuation">]</span><span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># `grep`å‘½ä»¤æŸ¥æ‰¾æ–‡ä»¶/etc/passwd ä¸­å¸å· blinkfox çš„ä¿¡æ¯</span><span class="token function">grep</span> blinkfox /etc/passwd<span class="token comment"># ä½¿ç”¨ -i é€‰é¡¹ï¼Œå¼ºåˆ¶ grep å‘½ä»¤å¿½ç•¥æœç´¢å…³é”®å­—çš„å¤§å°å†™</span><span class="token function">grep</span> -i blinkfox /etc/passwd<span class="token comment"># ä½¿ç”¨ -r é€‰é¡¹ï¼Œå¯ä»¥é€’å½’æœç´¢æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</span><span class="token function">grep</span> -r blinkfox /etc/<span class="token comment"># ä½¿ç”¨ -w é€‰é¡¹ï¼ŒåªåŒ¹é…åŒ…å«æŒ‡å®šå•è¯çš„è¡Œ</span><span class="token function">grep</span> -w blinkfox /etc/<span class="token comment"># ä½¿ç”¨ -c é€‰é¡¹ï¼ŒæŠ¥å‘Šæ–‡ä»¶æˆ–æ–‡æœ¬ä¸­æ¨¡å¼è¢«åŒ¹é…çš„æ¬¡æ•°</span><span class="token function">grep</span> -c blinkfox /etc/passwd<span class="token comment"># ä½¿ç”¨ -n é€‰é¡¹ï¼Œæ˜¾ç¤ºæ¯ä¸€ä¸ªåŒ¹é…çš„è¡Œçš„è¡Œå·</span><span class="token function">grep</span> -n blinkfox /etc/passwd<span class="token comment"># ä½¿ç”¨ -v é€‰é¡¹ï¼Œå¯ä»¥è¾“å‡ºé™¤åŒ¹é…æŒ‡å®šæ¨¡å¼çš„è¡Œä»¥å¤–çš„å…¶ä»–æ‰€æœ‰è¡Œ</span><span class="token function">grep</span> -v blinkfox /etc/passwd<span class="token comment"># ä½¿ç”¨ --color é€‰é¡¹ï¼Œåœ¨è¾“å‡ºä¸­å°†åŒ¹é…çš„å­—ç¬¦ä¸²ä»¥å½©è‰²çš„å½¢å¼æ ‡å‡º</span><span class="token function">grep</span> --color blinkfox /etc/passwd<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-diff-æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶"><a href="#5-diff-æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶" class="headerlink" title="5.diff - æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶"></a>5.diff - æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶</h2><p><code>diff</code>å‘½ä»¤ç”¨äºæ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶ï¼Œå¹¶æ‰¾å‡ºå®ƒä»¬ä¹‹é—´çš„ä¸åŒã€‚<code>diff</code>å‘½ä»¤çš„è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">diff</span> <span class="token punctuation">[</span>OPTION<span class="token punctuation">]</span><span class="token punctuation">..</span>. from-file to-file<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¸¸ç”¨ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶</span><span class="token function">diff</span> nsswitch.conf nsswitch.conf.org<span class="token comment"># ä½¿ç”¨ -w é€‰é¡¹ï¼Œæ¯”è¾ƒæ—¶å¿½ç•¥ç©ºæ ¼</span><span class="token function">diff</span> -w nsswitch.conf nsswitch.conf.org<span class="token comment"># ä½¿ç”¨ -y é€‰é¡¹ï¼Œä»¥å¹¶æ’çš„æ ¼å¼è¾“å‡ºä¸¤ä¸ªæ–‡ä»¶çš„æ¯”è¾ƒç»“æœ</span><span class="token function">diff</span> -y nsswitch.conf nsswitch.conf.orgä½¿ç”¨ -c é€‰é¡¹ï¼Œä»¥ä¸Šä¸‹å¯¹æ¯”çš„æ ¼å¼è¾“å‡ºä¸¤ä¸ªæ–‡ä»¶çš„æ¯”è¾ƒç»“æœ<span class="token function">diff</span> -c nsswitch.conf nsswitch.conf.org<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸ç”¨Bashå‘½ä»¤æ•´ç†ä¹‹æ“ä½œæ–‡ä»¶å’Œç›®å½•</title>
      <link href="/post/ruan-jian-gong-ju/linux/chang-yong-bash-ming-ling-zheng-li-zhi-cao-zuo-wen-jian-he-mu-lu/"/>
      <url>/post/ruan-jian-gong-ju/linux/chang-yong-bash-ming-ling-zheng-li-zhi-cao-zuo-wen-jian-he-mu-lu/</url>
      
        <content type="html"><![CDATA[<h2 id="1-touch-åˆ›å»ºæ–‡ä»¶"><a href="#1-touch-åˆ›å»ºæ–‡ä»¶" class="headerlink" title="1. touch - åˆ›å»ºæ–‡ä»¶"></a>1. touch - åˆ›å»ºæ–‡ä»¶</h2><p><code>touch</code>å‘½ä»¤å°±å¯ç”¨äºåˆ›å»ºã€å˜æ›´å’Œä¿®æ”¹æ–‡ä»¶çš„æ—¶é—´æˆ³ã€‚å®ƒæ˜¯ Linux æ“ä½œç³»ç»Ÿçš„æ ‡å‡†ç¨‹åºã€‚<code>touch</code>å‘½ä»¤åˆå¦‚ä¸‹é€‰é¡¹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">-a: åªæ”¹å˜è®¿é—®æ—¶é—´ -c: ä¸åˆ›å»ºä»»ä½•æ–‡ä»¶-m: åªæ”¹å˜ä¿®æ”¹æ—¶é—´-r: ä½¿ç”¨æŒ‡å®šæ–‡ä»¶çš„æ—¶é—´æ›¿ä»£å½“å‰æ—¶é—´-t: ä½¿ç”¨ <span class="token punctuation">[</span><span class="token punctuation">[</span>CC<span class="token punctuation">]</span>YY<span class="token punctuation">]</span>MMDDhhmm<span class="token punctuation">[</span>.ss<span class="token punctuation">]</span> æ›¿ä»£å½“å‰æ—¶é—´<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>touch å‘½ä»¤çš„å¸¸è§ç”¨æ³•å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åˆ›å»ºä¸€ä¸ªåä¸º effyl çš„æ–°ç©ºæ–‡ä»¶</span><span class="token function">touch</span> effyl<span class="token comment"># åŒæ—¶åˆ›å»ºåç§°åˆ†åˆ«ä¸º effyl myeffyl lueffyl çš„ä¸‰ä¸ªæ–‡ä»¶</span><span class="token function">touch</span> effyl myeffyl lueffyl<span class="token comment"># ä½¿ç”¨ -a é€‰é¡¹ï¼Œå¯ä»¥æ”¹å˜æˆ–æ›´æ–°æ–‡ä»¶çš„æœ€æ–°è®¿é—®æ—¶é—´ï¼Œå¦‚æœæ–‡ä»¶ effyl ä¸å­˜åœ¨ï¼Œåˆ™æ–°åˆ›å»ºä¸€ä¸ª</span><span class="token function">touch</span> -a effyl<span class="token comment"># ä½¿ç”¨ -c é€‰é¡¹ï¼Œå¯ä»¥é¿å…åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œå¹¶ç”¨å½“å‰æ—¶é—´æ›´æ–°æ–‡ä»¶çš„æ—¶é—´æˆ³</span><span class="token function">touch</span> -c effyl<span class="token comment"># ä½¿ç”¨ -m é€‰é¡¹ï¼Œå¯ä»¥åªæ”¹å˜æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ï¼Œè€Œè®¿é—®æ—¶é—´ä¸å˜</span><span class="token function">touch</span> -m effyl<span class="token comment"># ä½¿ç”¨ -c å’Œ -t é€‰é¡¹ï¼Œæ¥æ˜ç¡®è®¾ç½®æ–‡ä»¶çš„æ—¶é—´</span><span class="token function">touch</span> -c -t YYMMDDHHMM filename<span class="token comment"># å¦‚æœæƒ³ä½¿ç”¨æ–‡ä»¶ myeffyl çš„æ—¶é—´æˆ³æ›´æ–°æ–‡ä»¶ effyl çš„æ—¶é—´æˆ³ï¼Œå¯ä»¥ä½¿ç”¨ -r é€‰é¡¹</span><span class="token function">touch</span> -r myeffyl effyl<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-mkdir-åˆ›å»ºç›®å½•"><a href="#2-mkdir-åˆ›å»ºç›®å½•" class="headerlink" title="2.mkdir - åˆ›å»ºç›®å½•"></a>2.mkdir - åˆ›å»ºç›®å½•</h2><p><code>mkdir</code>å‘½ä»¤ç”¨äºåˆ›å»ºä¸€ä¸ªæ–°ç›®å½•ã€‚æœ€åŸºæœ¬çš„<code>mkdir</code>å‘½ä»¤çš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªç»™å®šçš„ç›®å½•å</span><span class="token function">mkdir</span> <span class="token operator">&lt;</span>dirname<span class="token operator">></span><span class="token comment"># åœ¨ backup ä¸­çš„ç›¸å¯¹è·¯å¾„åˆ›å»ºä¸€ä¸ªåä¸º old çš„ç›®å½•</span><span class="token function">mkdir</span> backup/old<span class="token comment"># åœ¨ backup ä¸­çš„ç»å¯¹è·¯å¾„ä¸­åˆ›å»ºä¸€ä¸ªåä¸º old çš„ç›®å½•</span><span class="token function">mkdir</span> /home/blinkfox/backup/old<span class="token comment"># ä½¿ç”¨ -p é€‰é¡¹ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºæ‰€æœ‰è¿˜ä¸å­˜åœ¨çš„çˆ¶ç›®å½•</span><span class="token function">mkdir</span> -p backup/old<span class="token comment"># ä½¿ç”¨ -m é€‰é¡¹ï¼Œå¯ä»¥è®¾ç½®å°†è¦åˆ›å»ºç›®å½•çš„æƒé™</span><span class="token comment"># å¦‚ï¼šåˆ›å»ºä¸€ä¸ªä»»ä½•äººéƒ½æœ‰è¯»å†™è®¿é—®æƒé™çš„ç›®å½•</span><span class="token function">mkdir</span> -p -m <span class="token number">777</span> backup/old<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-cp-å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•"><a href="#3-cp-å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•" class="headerlink" title="3.cp - å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•"></a>3.cp - å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•</h2><p><code>cp</code>å‘½ä»¤ç”¨äºå°†æ–‡ä»¶ä»ä¸€ä¸ªåœ°æ–¹å¤åˆ¶åˆ°å¦ä¸€ä¸ªåœ°æ–¹ã€‚åŸæ¥çš„æ–‡ä»¶ä¿æŒä¸å˜ï¼Œæ–°æ–‡ä»¶å¯èƒ½ä¿æŒåŸåæˆ–ç”¨ä¸€ä¸ªä¸åŒçš„åå­—ã€‚</p><p>ä½¿ç”¨ cp å‘½ä»¤å¤åˆ¶æ–‡ä»¶å’Œç›®å½•çš„è¯­æ³•æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å¤åˆ¶æºæ–‡ä»¶åˆ°ç›®æ ‡æ–‡ä»¶</span><span class="token function">cp</span> <span class="token punctuation">[</span>OPTION<span class="token punctuation">]</span> SOURCE DEST<span class="token comment"># å¤åˆ¶ä¸€ä¸ªæˆ–å¤šä¸ªæºæ–‡ä»¶åˆ°ä¸€ä¸ªç›®å½•</span><span class="token function">cp</span> <span class="token punctuation">[</span>OPTION<span class="token punctuation">]</span> SOURCE<span class="token punctuation">..</span>. DIRECTORY<span class="token comment"># åŒä¸Š</span><span class="token function">cp</span> <span class="token punctuation">[</span>OPTION<span class="token punctuation">]</span> -t DIRECTORY SOURCE<span class="token punctuation">..</span>. <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¸¸ç”¨ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åœ¨å½“å‰ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ file.txt çš„å‰¯æœ¬ï¼Œå–åä¸º newfile.txt</span><span class="token function">cp</span> file.txt newfile.txt<span class="token comment"># å¤åˆ¶å½“å‰ç›®å½•ä¸‹çš„ file.txt æ–‡ä»¶åˆ° /tmp ç›®å½•ä¸‹</span><span class="token function">cp</span> file.txt /tmp<span class="token comment"># å¤åˆ¶å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åˆ° /tmp ç›®å½•ä¸‹</span><span class="token function">cp</span> * /tmp<span class="token comment"># ä½¿ç”¨ -p é€‰é¡¹ï¼Œå¯ä»¥ä½¿å¤åˆ¶ä¸€ä¸ªæ–‡ä»¶åˆ°æ–°æ–‡ä»¶æ—¶ï¼Œä¿ç•™æºæ–‡ä»¶çš„æ‰€æœ‰è€…ã€æƒé™ç­‰ä¿¡æ¯</span><span class="token function">cp</span> -p filename /path/to/new/location/myfile<span class="token comment"># ä½¿ç”¨ -R æˆ– -r é€‰é¡¹ï¼Œæ¶æ„é€’å½’åœ°å¤åˆ¶ä¸€ä¸ªç›®å½•</span><span class="token comment"># å³å°†ä¸€ä¸ªç›®å½•åŠå…¶ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•éƒ½å¤åˆ¶åˆ°å¦ä¸€ä¸ªç›®å½•</span><span class="token function">cp</span> -R * /home/blinkfox/backup<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-ln-é“¾æ¥æ–‡ä»¶æˆ–ç›®å½•"><a href="#4-ln-é“¾æ¥æ–‡ä»¶æˆ–ç›®å½•" class="headerlink" title="4.ln - é“¾æ¥æ–‡ä»¶æˆ–ç›®å½•"></a>4.ln - é“¾æ¥æ–‡ä»¶æˆ–ç›®å½•</h2><p><code>ln</code>å‘½ä»¤ç”¨äºåˆ›å»ºè½¯é“¾æ¥æˆ–ç¡¬é“¾æ¥ã€‚ä½¿ç”¨ -s é€‰é¡¹ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åœ¨ç›®å½• lib ä¸‹åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥ library.soï¼Œé“¾æ¥åˆ° /home/blinkfox/src/library.so</span><span class="token function">ln</span> -s /home/blinkfox/src/library.so /home/blinkfox/lib<span class="token comment"># åˆ›å»ºç›®å½•çš„è½¯é“¾æ¥</span><span class="token function">ln</span> -s /home/blinkfox/src <span class="token builtin class-name">source</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-mv-ç§»åŠ¨æ–‡ä»¶æˆ–ç›®å½•"><a href="#5-mv-ç§»åŠ¨æ–‡ä»¶æˆ–ç›®å½•" class="headerlink" title="5. mv - ç§»åŠ¨æ–‡ä»¶æˆ–ç›®å½•"></a>5. mv - ç§»åŠ¨æ–‡ä»¶æˆ–ç›®å½•</h2><p><code>mv</code>å‘½ä»¤ç”¨äºå°†æ–‡ä»¶å’Œç›®å½•ä»ä¸€ä¸ªä½ç½®ç§»åˆ°å¦å¤–ä¸€ä¸ªä½ç½®ã€‚é™¤äº†ç§»åŠ¨æ–‡ä»¶ï¼Œ<code>mv</code>å‘½ä»¤è¿˜å¯ç”¨äºä¿®æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„åå­—ã€‚</p><p>mv å‘½ä»¤çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mv</span> SOURCE<span class="token punctuation">..</span>. DIRECTORY<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¸¸ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å°†å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶ source.txt ç§»åˆ°ç›®å½• /tmp ä¸‹</span><span class="token function">mv</span> source.txt /tmp<span class="token comment"># å°†ç›®å½• dir1ã€dir2 ç§»åˆ°ç›®å½• dir_dist ä¸‹</span><span class="token function">mv</span> dir1 dir2 dir_dist<span class="token comment"># å°†å½“å‰ç›®å½•ä¸‹çš„ old.txt æ–‡ä»¶æ›´åä¸º new.txt</span><span class="token function">mv</span> old.txt new.txt<span class="token comment"># ä½¿ç”¨ -i é€‰é¡¹ï¼Œåœ¨é‡å†™è¦†ç›–ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•ä¹‹å‰ç»™å‡ºæç¤ºä¿¡æ¯</span><span class="token function">mv</span> -i old.txt new.txt<span class="token comment"># å°†å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ç§»åŠ¨åˆ°ç›®å½• /tmp ä¸‹</span><span class="token function">mv</span> * /tmp/<span class="token comment"># ä½¿ç”¨ -i é€‰é¡¹ï¼Œä» dir1 ä¸­ç§»åŠ¨é‚£äº›åœ¨ç›®æ ‡ç›®å½•ä¸­ä¸å­˜åœ¨çš„æ–‡ä»¶åˆ°ç›®æ ‡ç›®å½•</span><span class="token function">mv</span> -u dir1/* dir2/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="6-rm-åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•"><a href="#6-rm-åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•" class="headerlink" title="6.rm - åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•"></a>6.rm - åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•</h2><p><code>rm</code>å‘½ä»¤ç”¨äºåˆ é™¤æŒ‡å®šçš„æ–‡ä»¶å’Œç›®å½•ã€‚å…¶è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">rm</span> <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span><span class="token punctuation">..</span>. FILE<span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>rm</code>çš„å¸¸ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åˆ é™¤å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶ file1.txtã€file2.txtã€file3.txt</span><span class="token function">rm</span> file1.txt file2.txt file3.txt<span class="token comment"># åˆ é™¤å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</span><span class="token function">rm</span> *<span class="token comment"># åˆ é™¤ä½ å½“å‰å¸å·ä¸»ç›®å½•ä¸‹çš„ temp ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶</span><span class="token function">rm</span> ~/temp/*<span class="token comment"># ä½¿ç”¨ -i é€‰é¡¹ï¼Œå¯ä»¥åœ¨åˆ é™¤æ¯ä¸ªæ–‡ä»¶æˆ–ç›®å½•å‰æç¤ºç”¨æˆ·ç¡®è®¤</span><span class="token function">rm</span> -i *<span class="token comment"># åˆ é™¤å½“å‰ç›®å½•ä¸‹æ‰€æœ‰ä»¥".doc"ç»“å°¾çš„æ–‡ä»¶</span><span class="token function">rm</span> *.doc<span class="token comment"># åˆ é™¤å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶åä¸­åŒ…å«"movie"å­—ç¬¦ä¸²çš„æ–‡ä»¶</span><span class="token function">rm</span> *movie*<span class="token comment"># åˆ é™¤å½“å‰ç›®å½•ä¸‹æ‰€æœ‰ä»¥"a"å¼€å¤´çš„æ–‡ä»¶</span><span class="token function">rm</span> a*<span class="token comment"># åˆ é™¤å½“å‰ç›®å½•ä¸‹æ•´ä¸ªæ–‡ä»¶åï¼ˆåŒ…æ‹¬æ‰©å±•åï¼‰åªæœ‰ 3 ä¸ªå­—ç¬¦çš„æ‰€æœ‰æ–‡ä»¶</span><span class="token function">rm</span> ???<span class="token comment"># åˆ é™¤å½“å‰ç›®å½•ä¸‹æ–‡ä»¶æ‰©å±•åæœ‰ä¸¤ä¸ªå­—ç¬¦çš„æ‰€æœ‰æ–‡ä»¶</span><span class="token function">rm</span> *.??<span class="token comment"># åˆ é™¤å½“å‰ç›®å½•ä¸‹æ–‡ä»¶åä¸­å«æœ‰å­—æ¯ a æˆ– b æˆ– c çš„æ‰€æœ‰æ–‡ä»¶</span><span class="token function">rm</span> *<span class="token punctuation">[</span>abc<span class="token punctuation">]</span>*<span class="token comment"># åˆ é™¤å½“å‰ç›®å½•ä¸‹æ–‡ä»¶åä¸­åŒ…å« 0~9 çš„æ‰€æœ‰æ–‡ä»¶</span><span class="token function">rm</span> *<span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span>*<span class="token comment"># åˆ é™¤å½“å‰ç›®å½•ä¸‹æ–‡ä»¶æ‰©å±•åæ˜¯å­—æ¯ c æˆ– h çš„æ‰€æœ‰æ–‡ä»¶</span><span class="token function">rm</span> *.<span class="token punctuation">[</span>ch<span class="token punctuation">]</span><span class="token comment"># åˆ é™¤ /tmp ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åŠå…¶å­ç›®å½•</span><span class="token function">rm</span> -rf /tmp/*<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>-f åˆ é™¤å‰ä¸æç¤ºç”¨æˆ·ç¡®è®¤ï¼Œå¹¶å¿½ç•¥ä¸å­˜åœ¨çš„æ–‡ä»¶</p></blockquote><blockquote><p>-r é€’å½’åœ°åˆ é™¤ç›®å½•åŠå…¶ä¸‹çš„å†…å®¹</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸ç”¨Bashå‘½ä»¤æ•´ç†ä¹‹æŸ¥çœ‹æ–‡ä»¶å’Œç›®å½•</title>
      <link href="/post/ruan-jian-gong-ju/linux/chang-yong-bash-ming-ling-zheng-li-zhi-cha-kan-wen-jian-he-mu-lu/"/>
      <url>/post/ruan-jian-gong-ju/linux/chang-yong-bash-ming-ling-zheng-li-zhi-cha-kan-wen-jian-he-mu-lu/</url>
      
        <content type="html"><![CDATA[<h2 id="1-ls-åˆ—å‡ºæ–‡ä»¶åå’Œç›®å½•"><a href="#1-ls-åˆ—å‡ºæ–‡ä»¶åå’Œç›®å½•" class="headerlink" title="1. ls - åˆ—å‡ºæ–‡ä»¶åå’Œç›®å½•"></a>1. ls - åˆ—å‡ºæ–‡ä»¶åå’Œç›®å½•</h2><p><code>ls</code>å‘½ä»¤æ˜¯<code>Linux</code>ä¸­æœ€å¸¸ç”¨çš„å‘½ä»¤ä¹‹ä¸€ï¼Œå…¶ä½œç”¨å°±æ˜¯åˆ—å‡ºæ–‡ä»¶åå’Œç›®å½•ã€‚åœ¨å‘½ä»¤è¡Œæç¤ºç¬¦ä¸‹ï¼Œç›´æ¥è¾“å…¥<code>ls</code>å‘½ä»¤ï¼Œä¸å¸¦ä»»ä½•é€‰é¡¹ï¼Œå°†åˆ—å‡ºå½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•ï¼Œä½†ä¸ä¼šæ˜¾ç¤ºè¯¦ç»†çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼Œæ–‡ä»¶ç±»å‹ã€å¤§å°ã€ä¿®æ”¹æ—¥æœŸå’Œæ—¶é—´ã€æƒé™ç­‰ã€‚</p><p>ä»¥ä¸‹ä¾¿æ˜¯<code>ls</code>å‘½ä»¤åŠå…¶é€‰é¡¹çš„ä½œç”¨è¯´æ˜ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ä»…åˆ—å‡ºå½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•</span><span class="token function">ls</span><span class="token comment"># æ¯è¡Œæ˜¾ç¤ºä¸€æ¡è®°å½•ï¼Œæ¯æ¡è®°å½•åŒ…æ‹¬æ–‡ä»¶ç±»å‹ã€å¤§å°ã€ä¿®æ”¹æ—¥æœŸå’Œæ—¶é—´ã€æƒé™ç­‰</span><span class="token function">ls</span> -l<span class="token comment"># å°†æ–‡ä»¶å¤§å°æ˜¾ç¤ºç¬¦åˆäººç±»é˜…è¯»ä¹ æƒ¯çš„æ ¼å¼</span><span class="token function">ls</span> -lh<span class="token comment"># å°†ä½¿ç”¨ä¸åŒçš„ç‰¹æ®Šå­—ç¬¦å½’ç±»ä¸åŒçš„æ–‡ä»¶ç±»å‹</span><span class="token function">ls</span> -F<span class="token comment"># ä»¥é•¿åˆ—è¡¨æ ¼å¼åˆ—å‡ºæŸä¸ªç›®å½•çš„ä¿¡æ¯</span><span class="token function">ls</span> -ld /var/log<span class="token comment"># å°†é€’å½’åœ°åˆ—å‡ºå­ç›®å½•çš„å†…å®¹</span><span class="token function">ls</span> -R /etc/sysconfig/<span class="token comment"># ä»¥é•¿åˆ—è¡¨æ ¼å¼æŒ‰æ–‡ä»¶æˆ–ç›®å½•çš„ä¿®æ”¹æ—¶é—´å€’åºåœ°åˆ—å‡ºæ–‡ä»¶å’Œç›®å½•</span><span class="token function">ls</span> -ltr<span class="token comment"># ä»¥é•¿åˆ—è¡¨æ ¼å¼æŒ‰æ–‡ä»¶å¤§å°é¡ºåºåˆ—å‡ºæ–‡ä»¶å’Œç›®å½•</span><span class="token function">ls</span> -ls<span class="token comment"># åˆ—å‡ºåŒ…æ‹¬éšè—æ–‡ä»¶æˆ–ç›®å½•åœ¨å†…çš„æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•ï¼ŒåŒ…æ‹¬â€œ.â€ï¼ˆå½“å‰ç›®å½•ï¼‰å’Œâ€œ..â€ï¼ˆçˆ¶ç›®å½•ï¼‰</span><span class="token function">ls</span> -a<span class="token comment"># åˆ—å‡ºåŒ…æ‹¬éšè—æ–‡ä»¶æˆ–ç›®å½•åœ¨å†…çš„æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•ï¼Œä¸åŒ…æ‹¬â€œ.â€ï¼ˆå½“å‰ç›®å½•ï¼‰å’Œâ€œ..â€ï¼ˆçˆ¶ç›®å½•ï¼‰</span><span class="token function">ls</span> -Aè¾“å‡ºçš„å†…å®¹ç±»ä¼¼äº-lé€‰é¡¹ï¼ŒæŒ‡ç¤ºæ˜¾ç¤ºuidå’Œgidï¼Œæ›¿ä»£æ˜¾ç¤ºæ‰€æœ‰è€…å’Œç”¨æˆ·ç»„<span class="token function">ls</span> -n<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-cat-è¿æ¥æ˜¾ç¤ºæ–‡ä»¶å†…å®¹"><a href="#2-cat-è¿æ¥æ˜¾ç¤ºæ–‡ä»¶å†…å®¹" class="headerlink" title="2. cat - è¿æ¥æ˜¾ç¤ºæ–‡ä»¶å†…å®¹"></a>2. cat - è¿æ¥æ˜¾ç¤ºæ–‡ä»¶å†…å®¹</h2><p><code>cat</code> å‘½ä»¤ä¹Ÿæ˜¯Linuxç³»ç»Ÿä¸­æœ€å¸¸ç”¨çš„å‘½ä»¤ä¹‹ä¸€ã€‚<code>cat</code>å‘½ä»¤è®©æˆ‘ä»¬å¯ä»¥çœ‹çœ‹æ–‡ä»¶çš„å†…å®¹ã€è¿æ¥æ–‡ä»¶ã€åˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶å’Œé‡å®šå‘è¾“å‡ºåˆ°ç»ˆç«¯æˆ–æ–‡ä»¶ã€‚</p><p><code>cat</code>å‘½ä»¤çš„è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cat</span> <span class="token punctuation">[</span>OPTION<span class="token punctuation">]</span> <span class="token punctuation">[</span>FILE<span class="token punctuation">]</span><span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>cat</code>å¸¸ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ä½¿ç”¨ cat å‘½ä»¤æŸ¥çœ‹æ–‡ä»¶ /etc/group çš„å†…å®¹</span><span class="token function">cat</span> /etc/group<span class="token comment"># æ˜¾ç¤ºå¤šä¸ªæ–‡ä»¶çš„å†…å®¹</span><span class="token function">cat</span> /etc/redhat-release /etc/issue<span class="token comment"># -n é€‰é¡¹ï¼Œå¯ä»¥æ˜¾ç¤ºæ–‡ä»¶å†…å®¹çš„è¡Œå·</span><span class="token function">cat</span> -n /etc/fstab<span class="token comment"># -b é€‰é¡¹å’Œ -n é€‰é¡¹ç±»ä¼¼ï¼Œä½†åªæ ‡è¯†éç©ºç™½è¡Œçš„è¡Œå·</span><span class="token function">cat</span> -b /etc/fstab<span class="token comment"># -e é€‰é¡¹ï¼Œå°†åœ¨æ¯ä¸€è¡Œçš„ç»“å°¾æ˜¾ç¤ºâ€œ$â€å­—ç¬¦</span><span class="token function">cat</span> -e /etc/fstab<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>å½“ä½ åªè¾“å…¥ cat å‘½ä»¤ï¼Œè€Œæ²¡æœ‰ä»»ä½•å‚æ•°æ—¶ï¼Œå®ƒåªæ˜¯æ¥æ”¶æ ‡å‡†è¾“å…¥çš„å†…å®¹å¹¶åœ¨æ ‡å‡†è¾“å‡ºä¸­æ˜¾ç¤ºã€‚æ‰€ä»¥ä½ åœ¨è¾“å…¥ä¸€è¡Œå†…å®¹å¹¶å›è½¦åï¼Œä¼šåœ¨æ¥ä¸‹æ¥çš„ä¸€è¡Œæ˜¾ç¤ºç›¸åŒçš„å†…å®¹ã€‚ä½ ä¹Ÿå¯ä»¥é‡å®šå‘æ ‡å‡†è¾“å‡ºåˆ°ä¸€ä¸ªæ–°æ–‡ä»¶ã€‚</p></blockquote><h2 id="3-lessã€more-åˆ†å±æ˜¾ç¤ºæ–‡ä»¶"><a href="#3-lessã€more-åˆ†å±æ˜¾ç¤ºæ–‡ä»¶" class="headerlink" title="3.lessã€more - åˆ†å±æ˜¾ç¤ºæ–‡ä»¶"></a>3.lessã€more - åˆ†å±æ˜¾ç¤ºæ–‡ä»¶</h2><p><code>more</code>å‘½ä»¤åœ¨ä½ ä½¿ç”¨å°çš„xtermçª—å£æ—¶ï¼Œæˆ–æ˜¯æƒ³ä¸ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨è€Œåªæ˜¯ç®€å•åœ°é˜…è¯»ä¸€ä¸ªæ–‡ä»¶æ—¶æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚moreå‘½ä»¤æ˜¯ä¸€ä¸ªç”¨äºä¸€æ¬¡ç¿»é˜…ä¸€æ•´å±æ–‡ä»¶çš„è¿‡æ»¤å™¨ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æŸ¥çœ‹ä¸€ä¸ªæ–‡ä»¶ï¼Œè‡ªåŠ¨æ¸…ç©ºå±å¹•å¹¶æ˜¾ç¤ºæ–‡ä»¶å¼€å¤´éƒ¨åˆ†</span><span class="token function">more</span> /etc/inittab<span class="token comment"># æŒ‡å®šä¸€æ¬¡æ˜¾ç¤ºnumè¡Œ</span><span class="token function">more</span> -num /etc/inittab<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸<code>more</code>å‘½ä»¤ç›¸æ¯”ï¼Œæˆ‘ä¸ªäººæ›´å–œæ¬¢<code>less</code>å‘½ä»¤æ¥æŸ¥çœ‹æ–‡ä»¶ã€‚<code>less</code>å‘½ä»¤ä¸<code>more</code>å‘½ä»¤ç±»ä¼¼ï¼Œä½†<code>less</code>å‘½ä»¤å‘å‰å’Œå‘åç¿»é¡µéƒ½æ”¯æŒï¼Œè€Œä¸”<code>less</code>å‘½ä»¤ä¸éœ€è¦åœ¨æŸ¥çœ‹å‰åŠ è½½æ•´ä¸ªæ–‡ä»¶ï¼Œå³<code>less</code>å‘½ä»¤æŸ¥çœ‹æ–‡ä»¶æ›´å¿«é€Ÿã€‚</p><p><code>less</code>å¸¸ç”¨å‘½ä»¤å‚æ•°å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">-b  <span class="token operator">&lt;</span>ç¼“å†²åŒºå¤§å°<span class="token operator">></span> è®¾ç½®ç¼“å†²åŒºçš„å¤§å°-e  å½“æ–‡ä»¶æ˜¾ç¤ºç»“æŸåï¼Œè‡ªåŠ¨ç¦»å¼€-f  å¼ºè¿«æ‰“å¼€ç‰¹æ®Šæ–‡ä»¶ï¼Œä¾‹å¦‚å¤–å›´è®¾å¤‡ä»£å·ã€ç›®å½•å’ŒäºŒè¿›åˆ¶æ–‡ä»¶-g  åªæ ‡å¿—æœ€åæœç´¢çš„å…³é”®è¯-i  å¿½ç•¥æœç´¢æ—¶çš„å¤§å°å†™-m  æ˜¾ç¤ºç±»ä¼¼moreå‘½ä»¤çš„ç™¾åˆ†æ¯”-N  æ˜¾ç¤ºæ¯è¡Œçš„è¡Œå·-o  <span class="token operator">&lt;</span>æ–‡ä»¶å<span class="token operator">></span> å°†less è¾“å‡ºçš„å†…å®¹åœ¨æŒ‡å®šæ–‡ä»¶ä¸­ä¿å­˜èµ·æ¥-Q  ä¸ä½¿ç”¨è­¦å‘ŠéŸ³-s  æ˜¾ç¤ºè¿ç»­ç©ºè¡Œä¸ºä¸€è¡Œ-S  è¡Œè¿‡é•¿æ—¶é—´å°†è¶…å‡ºéƒ¨åˆ†èˆå¼ƒ-x  <span class="token operator">&lt;</span>æ•°å­—<span class="token operator">></span> å°†â€œtabâ€é”®æ˜¾ç¤ºä¸ºè§„å®šçš„æ•°å­—ç©ºæ ¼/å­—ç¬¦ä¸²ï¼šå‘ä¸‹æœç´¢â€œå­—ç¬¦ä¸²â€çš„åŠŸèƒ½?å­—ç¬¦ä¸²ï¼šå‘ä¸Šæœç´¢â€œå­—ç¬¦ä¸²â€çš„åŠŸèƒ½nï¼š é‡å¤å‰ä¸€ä¸ªæœç´¢ï¼ˆä¸ / æˆ– ? æœ‰å…³ï¼‰Nï¼š åå‘é‡å¤å‰ä¸€ä¸ªæœç´¢ï¼ˆä¸ / æˆ– ? æœ‰å…³ï¼‰b  å‘åç¿»ä¸€é¡µd  å‘åç¿»åŠé¡µh  æ˜¾ç¤ºå¸®åŠ©ç•Œé¢Q  é€€å‡ºless å‘½ä»¤u  å‘å‰æ»šåŠ¨åŠé¡µy  å‘å‰æ»šåŠ¨ä¸€è¡Œç©ºæ ¼é”® æ»šåŠ¨ä¸€è¡Œå›è½¦é”® æ»šåŠ¨ä¸€é¡µ<span class="token punctuation">[</span>pagedown<span class="token punctuation">]</span>ï¼š å‘ä¸‹ç¿»åŠ¨ä¸€é¡µ<span class="token punctuation">[</span>pageup<span class="token punctuation">]</span>ï¼š   å‘ä¸Šç¿»åŠ¨ä¸€é¡µ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-head-æ˜¾ç¤ºæ–‡ä»¶å¤´éƒ¨"><a href="#4-head-æ˜¾ç¤ºæ–‡ä»¶å¤´éƒ¨" class="headerlink" title="4.head - æ˜¾ç¤ºæ–‡ä»¶å¤´éƒ¨"></a>4.head - æ˜¾ç¤ºæ–‡ä»¶å¤´éƒ¨</h2><p><code>head</code>å‘½ä»¤ç”¨äºæ‰“å°æŒ‡å®šè¾“å…¥çš„å¼€å¤´éƒ¨åˆ†å†…å®¹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰“å°æ¯ä¸ªæŒ‡å®šè¾“å…¥çš„å‰10è¡Œå†…å®¹ã€‚</p><p>ä½¿ç”¨<code>-n</code>é€‰é¡¹å¯ä»¥æŒ‡å®šæ‰“å°æ–‡ä»¶çš„å‰Nè¡Œï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æŒ‡å®šæ‰“å°æ–‡ä»¶çš„å‰5è¡Œ</span><span class="token function">head</span> -n <span class="token number">5</span> /etc/inittabï¼ˆæˆ–ï¼‰head -5 /etc/inittab<span class="token comment"># æ‰“å°æ–‡ä»¶çš„å‰Nä¸ªå­—èŠ‚çš„æ•°æ®</span><span class="token function">head</span> -c <span class="token number">10</span> /etc/inittab<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-tail-æ˜¾ç¤ºæ–‡ä»¶å°¾éƒ¨"><a href="#5-tail-æ˜¾ç¤ºæ–‡ä»¶å°¾éƒ¨" class="headerlink" title="5.tail - æ˜¾ç¤ºæ–‡ä»¶å°¾éƒ¨"></a>5.tail - æ˜¾ç¤ºæ–‡ä»¶å°¾éƒ¨</h2><p><code>tail</code>å‘½ä»¤å’Œ<code>head</code>å‘½ä»¤ç›¸åï¼Œå®ƒæ‰“å°æŒ‡å®šè¾“å…¥çš„ç»“å°¾éƒ¨åˆ†çš„å†…å®¹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒæ‰“å°æŒ‡å®šè¾“å…¥çš„æœ€å10è¡Œå†…å®¹ã€‚</p><p>ä½¿ç”¨<code>-n</code>é€‰é¡¹å¯ä»¥æŒ‡å®šæ‰“å°æ–‡ä»¶çš„æœ€åNè¡Œï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æŒ‡å®šæ‰“å°æ–‡ä»¶çš„å10è¡Œ</span><span class="token function">tail</span> -n <span class="token number">10</span> /etc/inittab<span class="token function">tail</span> -10 /etc/inittab<span class="token comment"># å³æ—¶æ‰“å°æ–‡ä»¶ä¸­æ–°å†™å…¥çš„è¡Œ</span><span class="token function">tail</span> -f /var/log/messages<span class="token comment"># --retryé€‰é¡¹è¡¨ç¤ºæŒç»­å°è¯•æ‰“å¼€æŸä¸ªæ–‡ä»¶ï¼Œå½“ä½ æƒ³æ‰“å¼€ä¸€ä¸ªç¨åæ‰ä¼šåˆ›å»ºæˆ–å³ä½¿ä¸å¯ç”¨çš„æ–‡ä»¶</span><span class="token function">tail</span> -f /tmp/debug.log --retry<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="6-file-æŸ¥çœ‹æ–‡ä»¶ç±»å‹"><a href="#6-file-æŸ¥çœ‹æ–‡ä»¶ç±»å‹" class="headerlink" title="6.file - æŸ¥çœ‹æ–‡ä»¶ç±»å‹"></a>6.file - æŸ¥çœ‹æ–‡ä»¶ç±»å‹</h2><p><code>file</code>å‘½ä»¤ç”¨äºæ¥æ”¶ä¸€ä¸ªæ–‡ä»¶ä½œä¸ºå‚æ•°å¹¶æ‰§è¡ŒæŸäº›æµ‹è¯•ï¼Œå·²ç¡®å®šæ­£ç¡®çš„æ–‡ä»¶ç±»å‹ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æŸ¥çœ‹æ–‡ä»¶ç±»å‹</span><span class="token function">file</span> /etc/inittab<span class="token comment"># å¯ä»¥MIMEç±»å‹çš„æ ¼å¼æ˜¾ç¤ºæ–‡ä»¶ç±»å‹çš„ä¿¡æ¯</span><span class="token function">file</span> -i  /etc/inittab<span class="token comment"># ä½¿ç”¨-N é€‰é¡¹ï¼Œè¾“å‡ºçš„é˜Ÿåˆ—å¯ä»¥ä»¥åœ¨æ–‡ä»¶åä¹‹åæ— ç©ºç™½å¡«å……çš„å½¢å¼æ˜¾ç¤º</span><span class="token function">file</span> -N *<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="7-wc-æŸ¥çœ‹æ–‡ä»¶ç»Ÿè®¡ä¿¡æ¯"><a href="#7-wc-æŸ¥çœ‹æ–‡ä»¶ç»Ÿè®¡ä¿¡æ¯" class="headerlink" title="7.wc - æŸ¥çœ‹æ–‡ä»¶ç»Ÿè®¡ä¿¡æ¯"></a>7.wc - æŸ¥çœ‹æ–‡ä»¶ç»Ÿè®¡ä¿¡æ¯</h2><p><code>wc</code>å‘½ä»¤ç”¨äºæŸ¥çœ‹æ–‡ä»¶çš„è¡Œæ•°ã€å•è¯æ•°å’Œå­—ç¬¦æ•°ç­‰ä¿¡æ¯ã€‚è¯­æ³•ç±»ä¼¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">wc</span> filenameX Y Z /etc/inittab<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å…¶ä¸­Xè¡¨ç¤ºè¡Œæ•°ï¼ŒYè¡¨ç¤ºå•è¯æ•°ï¼ŒZè¡¨ç¤ºå­—èŠ‚æ•°ï¼Œfilenameè¡¨ç¤ºæ–‡ä»¶åã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># -lé€‰é¡¹ï¼Œå¯ä»¥åªç»Ÿè®¡æ–‡ä»¶çš„è¡Œæ•°ä¿¡æ¯</span><span class="token function">wc</span> -l /etc/inittab<span class="token comment"># -wé€‰é¡¹ï¼Œå¯ä»¥åªç»Ÿè®¡æ–‡ä»¶çš„å•è¯æ•°ä¿¡æ¯</span><span class="token function">wc</span> -w /etc/inittab<span class="token comment"># -cé€‰é¡¹ï¼Œå¯ä»¥åªç»Ÿè®¡æ–‡ä»¶çš„å­—èŠ‚æ•°ä¿¡æ¯</span><span class="token function">wc</span> -c /etc/inittab<span class="token comment"># -Lé€‰é¡¹ï¼Œå¯ä»¥åªç»Ÿè®¡æ–‡ä»¶ä¸­æœ€é•¿çš„è¡Œçš„é•¿åº¦</span><span class="token function">wc</span> -L /etc/inittab<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="8-find-æŸ¥æ‰¾æ–‡ä»¶æˆ–ç›®å½•"><a href="#8-find-æŸ¥æ‰¾æ–‡ä»¶æˆ–ç›®å½•" class="headerlink" title="8.find - æŸ¥æ‰¾æ–‡ä»¶æˆ–ç›®å½•"></a>8.find - æŸ¥æ‰¾æ–‡ä»¶æˆ–ç›®å½•</h2><p><code>find</code>å‘½ä»¤ç”¨äºæ ¹æ®ä½ æŒ‡å®šçš„å‚æ•°æœç´¢å’Œå®šä½æ–‡ä»¶å’Œç›®å½•çš„åˆ—è¡¨ã€‚<code>find</code>å‘½ä»¤å¯ä»¥åœ¨å¤šç§æƒ…å†µä¸‹ä½¿ç”¨ï¼Œæ¯”å¦‚ä½ å¯ä»¥é€šè¿‡æƒé™ã€ç”¨æˆ·ã€ç”¨æˆ·ç»„ã€æ–‡ä»¶ç±»å‹ã€æ—¥æœŸã€å¤§å°å’Œå…¶ä»–å¯èƒ½çš„æ¡ä»¶æ¥æŸ¥æ‰¾æ–‡ä»¶ã€‚</p><p><code>find</code>å‘½ä»¤å¸¸ç”¨ä½¿ç”¨å’Œè¯´æ˜å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æŸ¥æ‰¾æŒ‡å®šç›®å½•ä¸‹çš„æŸä¸ªæ–‡ä»¶</span><span class="token function">find</span> /etc/ -name inittab<span class="token comment"># åœ¨å½“å‰ç›®å½•ä¸‹æŸ¥æ‰¾åç§°ä¸º inittab çš„æ–‡ä»¶</span><span class="token function">find</span> <span class="token builtin class-name">.</span> -name inittab<span class="token comment"># åœ¨å½“å‰ç›®å½•ä¸‹ï¼Œæ–‡ä»¶ä¸åŒºåˆ†å¤§å°å†™æ˜¯exampleçš„æ‰€æœ‰æ–‡ä»¶</span><span class="token function">find</span> <span class="token builtin class-name">.</span> -iname example<span class="token comment"># æ‰¾å‡ºå½“å‰ç›®å½•ä¸‹æ‰€æœ‰ä»¥ sh ç»“å°¾çš„æ–‡ä»¶</span><span class="token function">find</span> <span class="token builtin class-name">.</span> -type f -name <span class="token string">"*.sh"</span><span class="token comment"># æ‰¾å‡ºå½“å‰ç›®å½•ä¸‹ï¼Œæ–‡ä»¶æƒé™æ˜¯ 777 çš„æ‰€æœ‰æ–‡ä»¶</span><span class="token function">find</span> <span class="token builtin class-name">.</span> -type f -perm <span class="token number">777</span><span class="token comment"># æ‰¾å‡ºå½“å‰ç›®å½•ä¸‹ï¼Œæ–‡ä»¶æƒé™ä¸æ˜¯ 777 çš„æ‰€æœ‰æ–‡ä»¶</span><span class="token function">find</span> <span class="token builtin class-name">.</span> -type f <span class="token operator">!</span> -perm <span class="token number">777</span><span class="token comment"># æ‰¾å‡ºå½“å‰ç›®å½•ä¸‹æ‰€æœ‰åªè¯»æ–‡ä»¶</span><span class="token function">find</span> <span class="token builtin class-name">.</span> -type f <span class="token operator">!</span> -perm /a+w<span class="token comment"># æ‰¾å‡ºä½ å¸å·ä¸»ç›®å½•ä¸‹çš„æ‰€æœ‰å¯æ‰§è¡Œæ–‡ä»¶</span><span class="token function">find</span> ~ -type f -perm /a+w<span class="token comment"># æ‰¾å‡º /tmp ç›®å½•ä¸‹çš„.logæ–‡ä»¶å¹¶å°†å…¶åˆ é™¤ï¼š</span><span class="token function">find</span> /tmp/ -type f -name <span class="token string">"*.log"</span> -exec <span class="token function">rm</span> -f <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> <span class="token punctuation">\</span><span class="token punctuation">;</span><span class="token comment"># æ‰¾å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ç©ºæ–‡ä»¶</span><span class="token function">find</span> <span class="token builtin class-name">.</span> -type f -empty<span class="token comment"># æ‰¾å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ç©ºç›®å½•</span><span class="token function">find</span> <span class="token builtin class-name">.</span> -type d -empty<span class="token comment"># æ‰¾å‡º /tmp ç›®å½•ä¸‹çš„æ‰€æœ‰éšè—æ–‡ä»¶</span><span class="token function">find</span> /tmp/ -type f -name <span class="token string">".*"</span><span class="token comment"># æ‰¾å‡º /tmp ç›®å½•ä¸‹ï¼Œæ‰€æœ‰è€…æ˜¯ root çš„æ–‡ä»¶å’Œç›®å½•</span><span class="token function">find</span> /tmp/ -user root<span class="token comment"># æ‰¾å‡º /tmp ç›®å½•ä¸‹ï¼Œç”¨æˆ·ç»„æ˜¯ developer çš„æ–‡ä»¶å’Œç›®å½•</span><span class="token function">find</span> /tmp/ -group root<span class="token comment"># æ‰¾å‡ºä½ è´¦å·çš„ä¸»ç›®å½•ä¸‹ï¼Œ3 å¤©å‰ä¿®æ”¹çš„æ–‡ä»¶</span><span class="token function">find</span> ~ -type f -mtime <span class="token number">3</span><span class="token comment"># æ‰¾å‡ºä½ è´¦å·çš„ä¸»ç›®å½•ä¸‹ï¼Œ30 å¤©ä»¥å‰ä¿®æ”¹çš„æ‰€æœ‰æ–‡ä»¶</span><span class="token function">find</span> ~ -type f -mtime +30<span class="token comment"># æ‰¾å‡ºä½ è´¦å·çš„ä¸»ç›®å½•ä¸‹ï¼Œ3 å¤©ä»¥å†…ä¿®æ”¹çš„æ‰€æœ‰æ–‡ä»¶</span><span class="token function">find</span> ~ -type f -mtime -3<span class="token comment"># æ‰¾å‡ºä½ è´¦å·çš„ä¸»ç›®å½•ä¸‹ï¼Œ30 å¤©ä»¥å‰ï¼Œ60 å¤©ä»¥å†…ä¿®æ”¹çš„æ‰€æœ‰æ–‡ä»¶</span><span class="token function">find</span> ~ -type f -mtime +30 -mtime -60<span class="token comment"># æ‰¾å‡º /etc ç›®å½•ä¸‹ï¼Œä¸€å°æ—¶ä»¥å†…å˜æ›´è¿‡çš„æ–‡ä»¶</span><span class="token function">find</span> /etc -type f -cmin -60<span class="token comment"># æ‰¾å‡º /etc ç›®å½•ä¸‹ï¼Œä¸€å°æ—¶ä»¥å†…è®¿é—®è¿‡çš„æ–‡ä»¶</span><span class="token function">find</span> /etc -type f -amin -60<span class="token comment"># æ‰¾å‡ºä½ è´¦å·ä¸»ç›®å½•ä¸‹ï¼Œå¤§å°æ˜¯50MBçš„æ‰€æœ‰æ–‡ä»¶</span><span class="token function">find</span> ~ -type f -size 50MB<span class="token comment"># æ‰¾å‡ºä½ è´¦å·ä¸»ç›®å½•ä¸‹ï¼Œå¤§äº50MBå°äº100MBçš„æ‰€æœ‰æ–‡ä»¶</span><span class="token function">find</span> ~ -type f -size +50MB -size -100MB<span class="token comment"># æ‰¾å‡ºä½ è´¦å·ä¸»ç›®å½•ä¸‹ï¼Œå¤§äº100MBçš„æ–‡ä»¶å¹¶å°†å…¶åˆ é™¤</span><span class="token function">find</span> ~ -type f -size +100MB -exec <span class="token function">rm</span> -rf <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> <span class="token punctuation">\</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è½»é‡çº§æ»šåŠ¨åŠ¨ç”»JavaScriptåº“aos.js</title>
      <link href="/post/qian-duan/qing-liang-ji-gun-dong-dong-hua-javascript-ku-aos.js/"/>
      <url>/post/qian-duan/qing-liang-ji-gun-dong-dong-hua-javascript-ku-aos.js/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€ç®€ä»‹"><a href="#ä¸€ã€ç®€ä»‹" class="headerlink" title="ä¸€ã€ç®€ä»‹"></a>ä¸€ã€ç®€ä»‹</h2><p><a href="http://michalsnik.github.io/aos/">aos.js</a>æ˜¯ä¸€æ¬¾æ•ˆæœè¶…èµçš„é¡µé¢æ»šåŠ¨çš„ JavaScript åŠ¨ç”»åº“æ’ä»¶ã€‚è¯¥åŠ¨ç”»åº“å¯ä»¥åœ¨é¡µé¢æ»šåŠ¨æ—¶æä¾›28ç§ä¸åŒçš„å…ƒç´ åŠ¨ç”»æ•ˆæœï¼Œä»¥åŠå¤šç§<code>easing</code>æ•ˆæœã€‚åœ¨é¡µé¢å¾€å›æ»šåŠ¨æ—¶ï¼Œå…ƒç´ ä¼šæ¢å¤åˆ°åŸæ¥çš„çŠ¶æ€ã€‚</p><p><img src="https://statics.sh1a.qingstor.com/2018/10/08/aos.png" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/10/08/aos.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="AOS"></p><blockquote><p>æ³¨ï¼šä»<code>2.0.0</code>ç‰ˆæœ¬ä¹‹å,åªæ”¯æŒä½¿ç”¨<code>data-aos</code>å±æ€§ï¼Œä¸å†æ”¯æŒä½¿ç”¨<code>aos</code>å±æ€§ã€‚</p></blockquote><h2 id="äºŒã€å®‰è£…"><a href="#äºŒã€å®‰è£…" class="headerlink" title="äºŒã€å®‰è£…"></a>äºŒã€å®‰è£…</h2><h3 id="1-Bower-å®‰è£…"><a href="#1-Bower-å®‰è£…" class="headerlink" title="1. Bower å®‰è£…"></a>1. Bower å®‰è£…</h3><p>ä½ å¯ä»¥ä½¿ç”¨ <a href="https://bower.io/">Bower</a> åŒ…ç®¡ç†å·¥å…·å®‰è£…<code>aos</code>ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">bower <span class="token function">install</span> aos --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="2-npm"><a href="#2-npm" class="headerlink" title="2. npm"></a>2. npm</h3><p>ä½ ä¹Ÿèƒ½åœ¨ <a href="https://www.npmjs.com/">npm</a> ä¸Šæ‰¾åˆ° <code>aos</code>ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> aos --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="3-Github-ä¸‹è½½"><a href="#3-Github-ä¸‹è½½" class="headerlink" title="3. Github ä¸‹è½½"></a>3. Github ä¸‹è½½</h3><p>Github ä¸‹è½½ç‚¹å‡»<a href="https://github.com/michalsnik/aos/archive/master.zip">æ­¤å¤„</a></p><h2 id="ä¸‰ã€ä½¿ç”¨ç¤ºä¾‹"><a href="#ä¸‰ã€ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="ä¸‰ã€ä½¿ç”¨ç¤ºä¾‹"></a>ä¸‰ã€ä½¿ç”¨ç¤ºä¾‹</h2><h3 id="1-ä½¿ç”¨æ–¹æ³•"><a href="#1-ä½¿ç”¨æ–¹æ³•" class="headerlink" title="1. ä½¿ç”¨æ–¹æ³•"></a>1. ä½¿ç”¨æ–¹æ³•</h3><p>å¼•å…¥<code>CSS</code>æ ·å¼æ–‡ä»¶ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bower_components/aos/dist/aos.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ·»åŠ <code>JavaScript</code>è„šæœ¬æ–‡ä»¶ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bower_components/aos/dist/aos.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åˆå§‹åŒ–è½½å…¥<code>AOS</code>ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token constant">AOS</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="2-ç®€å•ç¤ºä¾‹"><a href="#2-ç®€å•ç¤ºä¾‹" class="headerlink" title="2. ç®€å•ç¤ºä¾‹"></a>2. ç®€å•ç¤ºä¾‹</h3><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">&#123;</span>    <span class="token property">font-family</span><span class="token punctuation">:</span> Helvetica<span class="token punctuation">,</span>Tahoma<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">*,*:before,*:after</span> <span class="token punctuation">&#123;</span>    <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.aos-all</span> <span class="token punctuation">&#123;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 1000px<span class="token punctuation">;</span>    <span class="token property">max-width</span><span class="token punctuation">:</span> 98%<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 10vh auto 0 auto<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.aos-item</span> <span class="token punctuation">&#123;</span>    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 33.3333%<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.aos-item__inner</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">background</span><span class="token punctuation">:</span> #1da4e2<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 260px<span class="token punctuation">;</span>    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token atrule"><span class="token rule">@media</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 800px<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>    <span class="token selector">.aos-item</span> <span class="token punctuation">&#123;</span>        <span class="token property">width</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>AOSçš„ç®€å•ç¤ºä¾‹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos/aos.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos_test.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token special-attr"><span class="token attr-name">onload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">initLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>transcroller<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-up<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-down<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zoom-out-down<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>flip-down<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>flip-up<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-down<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-down<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>9<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-down<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-up<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-down<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>13<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-up<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>14<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>15<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-up<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>16<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-down<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-up<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>18<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zoom-out<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>19<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-up<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>20<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zoom-out<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>21<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>22<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zoom-out-up<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>23<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zoom-out-down<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>24<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>25<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>26<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>27<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>28<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>29<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>30<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>31<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>32<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>33<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>34<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>35<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>36<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>37<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>38<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>39<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>40<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>41<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-item__inner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>42<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos/aos.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token keyword">function</span> <span class="token function">initLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token constant">AOS</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-å¼‚æ­¥ç¤ºä¾‹"><a href="#3-å¼‚æ­¥ç¤ºä¾‹" class="headerlink" title="3. å¼‚æ­¥ç¤ºä¾‹"></a>3. å¼‚æ­¥ç¤ºä¾‹</h3><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>AOS å¼‚æ­¥ä½¿ç”¨çš„ç¤ºä¾‹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos_test.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token special-attr"><span class="token attr-name">onload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">initLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos_async<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos-all<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aos.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token keyword">function</span> <span class="token function">initLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token constant">AOS</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 0.5ç§’æ‰§è¡Œä¸€æ¬¡</span>    <span class="token function">setInterval</span><span class="token punctuation">(</span>addItem<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> itemsCounter <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'aos_async'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * åŠ¨æ€ç”Ÿæˆçš„divå…ƒç´      */</span>    <span class="token keyword">function</span> <span class="token function">addItem</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>itemsCounter <span class="token operator">></span> <span class="token number">42</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> item <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        item<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'aos-item'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        item<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'data-aos'</span><span class="token punctuation">,</span> <span class="token string">'fade-up'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        item<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'&lt;div class="aos-item__inner">&lt;h3>'</span> <span class="token operator">+</span> itemsCounter <span class="token operator">+</span> <span class="token string">'&lt;/h3>&lt;/div>'</span><span class="token punctuation">;</span>        container<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>        itemsCounter<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å››ã€åŠ¨ç”»æ ·å¼"><a href="#å››ã€åŠ¨ç”»æ ·å¼" class="headerlink" title="å››ã€åŠ¨ç”»æ ·å¼"></a>å››ã€åŠ¨ç”»æ ·å¼</h2><p>ä»¥ä¸‹æ˜¯<code>AOS</code>å·²ç»æä¾›äº†çš„å¤šç§åŠ¨ç”»ï¼š</p><h3 id="1-Fade-animations"><a href="#1-Fade-animations" class="headerlink" title="1. Fade animations"></a>1. Fade animations</h3><ul><li>fade-up</li><li>fade-down</li><li>fade-left</li><li>fade-right</li><li>fade-up-right</li><li>fade-up-left</li><li>fade-down-right</li><li>fade-down-left</li></ul><h3 id="2-Flip-animations"><a href="#2-Flip-animations" class="headerlink" title="2. Flip animations"></a>2. Flip animations</h3><ul><li>flip-up</li><li>flip-down</li><li>flip-left</li><li>flip-right</li></ul><h3 id="3-Slide-animations"><a href="#3-Slide-animations" class="headerlink" title="3. Slide animations"></a>3. Slide animations</h3><ul><li>slide-up</li><li>slide-down</li><li>slide-left</li><li>slide-right</li></ul><h3 id="4-Zoom-animations"><a href="#4-Zoom-animations" class="headerlink" title="4. Zoom animations"></a>4. Zoom animations</h3><ul><li>zoom-in</li><li>zoom-in-up</li><li>zoom-in-down</li><li>zoom-in-left</li><li>zoom-in-right</li><li>zoom-out</li><li>zoom-out-up</li><li>zoom-out-down</li><li>zoom-out-left</li><li>zoom-out-right</li></ul><h3 id="5-Anchor-placement"><a href="#5-Anchor-placement" class="headerlink" title="5. Anchor placement"></a>5. Anchor placement</h3><ul><li>top-bottom</li><li>top-center</li><li>top-top</li><li>center-bottom</li><li>center-center</li><li>center-top</li><li>bottom-bottom</li><li>bottom-center</li><li>bottom-top</li></ul><h2 id="äº”ã€Easing-å‡½æ•°"><a href="#äº”ã€Easing-å‡½æ•°" class="headerlink" title="äº”ã€Easing å‡½æ•°"></a>äº”ã€Easing å‡½æ•°</h2><p>ä½ å¯ä»¥é€‰æ‹©ä»¥ä¸‹ä»»æ„ä¸€ä¸ªæ—¶é—´å‡½æ•°æ¥åšå‡ºå¾ˆå¥½çš„åšåŠ¨ç”»å…ƒç´ ï¼š</p><ul><li>linear</li><li>ease</li><li>ease-in</li><li>ease-out</li><li>ease-in-out</li><li>ease-in-back</li><li>ease-out-back</li><li>ease-in-out-back</li><li>ease-in-sine</li><li>ease-out-sine</li><li>ease-in-out-sine</li><li>ease-in-quad</li><li>ease-out-quad</li><li>ease-in-out-quad</li><li>ease-in-cubic</li><li>ease-out-cubic</li><li>ease-in-out-cubic</li><li>ease-in-quart</li><li>ease-out-quart</li><li>ease-in-out-quart</li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¨åŠŸèƒ½JavaScriptç¯ç®±ç”»å»Šæ’ä»¶lightgallery.js</title>
      <link href="/post/qian-duan/quan-gong-neng-javascript-deng-xiang-hua-lang-cha-jian-lightgallery.js/"/>
      <url>/post/qian-duan/quan-gong-neng-javascript-deng-xiang-hua-lang-cha-jian-lightgallery.js/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸€ã€ç®€ä»‹"><a href="#ä¸€ã€ç®€ä»‹" class="headerlink" title="ä¸€ã€ç®€ä»‹"></a>ä¸€ã€ç®€ä»‹</h3><blockquote><p><a href="https://sachinchoolur.github.io/lightgallery.js/">lightgallery.js</a> æ˜¯ä¸€ä¸ªå…¨åŠŸèƒ½ã€è½»é‡çº§ã€æ— ä¾èµ–çš„ç¯ç®±ç”»å»Šæ˜¾ç¤ºåº“ã€‚</p></blockquote><p><img src="https://statics.sh1a.qingstor.com/2018/10/06/lg.png" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/10/06/lg.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="lightgallery"></p><h3 id="äºŒã€ä¸»è¦ç‰¹æ€§"><a href="#äºŒã€ä¸»è¦ç‰¹æ€§" class="headerlink" title="äºŒã€ä¸»è¦ç‰¹æ€§"></a>äºŒã€ä¸»è¦ç‰¹æ€§</h3><ul><li>å…¨å“åº”å¼å…¼å®¹</li><li>æ¨¡å—åŒ–çš„æ¶æ„å’Œå†…ç½®æ’ä»¶</li><li>ç§»åŠ¨è®¾å¤‡å’Œè§¦æ‘¸æ”¯æŒ</li><li>æ¡Œé¢è®¾å¤‡æ‹–æ‹½æ”¯æŒ</li><li>åŒå‡»æŸ¥çœ‹å›¾åƒçš„å®é™…å¤§å°</li><li>åŠ¨ç”»ç¼©ç•¥å›¾</li><li>ç¤¾äº¤åª’ä½“åˆ†äº«</li><li>YouTubeï¼ŒVimeoï¼ŒDailyMotionï¼ŒVKå’Œ HTML5 è§†é¢‘æ”¯æŒ</li><li>20+ ç¡¬ä»¶åŠ é€ŸCSS3è¿‡æ¸¡</li><li>å…¨å±æ”¯æŒ</li><li>æ”¯æŒç¼©æ”¾</li><li>æµè§ˆå™¨å†å²è®°å½•</li><li>å“åº”å¼å›¾åƒ</li><li>HTML iframe æ”¯æŒ</li><li>æ”¯æŒiFrameæ¡†æ¶</li><li>å•é¡µå¤šå®ä¾‹</li><li>å¯èƒ½è¿‡CSS(SCSS)å®šåˆ¶æ ·å¼</li><li>æ™ºèƒ½å›¾åƒé¢„åŠ è½½ä¸ä»£ç ä¼˜åŒ–</li><li>æ¡Œé¢é”®ç›˜å¯¼èˆª</li><li>å­—ä½“å›¾æ ‡æ”¯æŒ</li><li>è¿˜æœ‰æ›´å¤š</li></ul><h3 id="ä¸‰ã€æµè§ˆå™¨æ”¯æŒ"><a href="#ä¸‰ã€æµè§ˆå™¨æ”¯æŒ" class="headerlink" title="ä¸‰ã€æµè§ˆå™¨æ”¯æŒ"></a>ä¸‰ã€æµè§ˆå™¨æ”¯æŒ</h3><p>lightgallery æ”¯æŒæ‰€æœ‰ä¸»è¦çš„æµè§ˆå™¨åŒ…æ‹¬IE 9åŠä»¥ä¸Šã€‚</p><h3 id="å››ã€å®‰è£…ä¸‹è½½"><a href="#å››ã€å®‰è£…ä¸‹è½½" class="headerlink" title="å››ã€å®‰è£…ä¸‹è½½"></a>å››ã€å®‰è£…ä¸‹è½½</h3><h4 id="1-Bower-å®‰è£…"><a href="#1-Bower-å®‰è£…" class="headerlink" title="1. Bower å®‰è£…"></a>1. Bower å®‰è£…</h4><p>ä½ å¯ä»¥ä½¿ç”¨ <a href="https://bower.io/">Bower</a> åŒ…ç®¡ç†å·¥å…·å®‰è£…<code>lightgallery</code>ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">bower <span class="token function">install</span> lightgallery.js --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="2-npm"><a href="#2-npm" class="headerlink" title="2. npm"></a>2. npm</h4><p>ä½ ä¹Ÿèƒ½åœ¨ <a href="https://www.npmjs.com/">npm</a> ä¸Šæ‰¾åˆ° <code>lightgallery</code>ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> lightgallery.js<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="3-Github-ä¸‹è½½"><a href="#3-Github-ä¸‹è½½" class="headerlink" title="3. Github ä¸‹è½½"></a>3. Github ä¸‹è½½</h4><p>ä½ ä¹Ÿå¯ä»¥ç›´æ¥ä» GitHub ä¸‹è½½<a href="https://github.com/sachinchoolur/lightgallery.js">lightgallery</a></p><h3 id="äº”ã€åŸºç¡€ç¤ºä¾‹"><a href="#äº”ã€åŸºç¡€ç¤ºä¾‹" class="headerlink" title="äº”ã€åŸºç¡€ç¤ºä¾‹"></a>äº”ã€åŸºç¡€ç¤ºä¾‹</h3><h4 id="1-ä½¿ç”¨æ–¹æ³•"><a href="#1-ä½¿ç”¨æ–¹æ³•" class="headerlink" title="1. ä½¿ç”¨æ–¹æ³•"></a>1. ä½¿ç”¨æ–¹æ³•</h4><p>é¦–å…ˆï¼Œåœ¨ html å¤´æ–‡ä»¶<code>&lt;head&gt;</code>ä¸­å¼•å…¥<code>lightgallery.css</code>ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>css/lightgallery.css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ç„¶åï¼Œåœ¨<code>&lt;body&gt;</code>æ ‡ç­¾ç»“å°¾å¼•å…¥<code>lightgallery.min.js</code>ï¼Œå¦‚æœä½ æƒ³å¼•å…¥å…¶ä»– lightgallery çš„åŠŸèƒ½æ’ä»¶ï¼Œä½ å¯ä»¥å°†è¿™äº›æ’ä»¶å¼•å…¥åˆ°<code>lightgallery.min.js</code>ä¹‹åï¼Œå¦‚ä¸‹ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    ...    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/lightgallery.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- lightgallery plugins --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/lg-thumbnail.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/lg-fullscreen.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»¥ä¸‹æ˜¯é¡µé¢æ ‡è®°çš„å›¾ç‰‡ç¤ºä¾‹ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lightgallery<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img/img1.jpg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img/thumb1.jpg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img/img2.jpg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img/thumb2.jpg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    ...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åï¼Œæ˜¯ JavaScript è°ƒç”¨æ’ä»¶çš„æ–¹å¼ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">></span>    <span class="token function">lightGallery</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'lightgallery'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="2-å®Œæ•´ç¤ºä¾‹"><a href="#2-å®Œæ•´ç¤ºä¾‹" class="headerlink" title="2. å®Œæ•´ç¤ºä¾‹"></a>2. å®Œæ•´ç¤ºä¾‹</h4><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>lightgallery.jsçš„ä½¿ç”¨ç¤ºä¾‹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/lightGallery/css/lightgallery.min.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">        <span class="token selector">ul</span> <span class="token punctuation">&#123;</span>            <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>            <span class="token property">list-style-type</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token selector">ul li</span> <span class="token punctuation">&#123;</span>            <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>            <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>            <span class="token property">margin</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token selector">.lgallery</span> <span class="token punctuation">&#123;</span>            <span class="token property">width</span><span class="token punctuation">:</span> 213px<span class="token punctuation">;</span>            <span class="token property">height</span><span class="token punctuation">:</span> 137px<span class="token punctuation">;</span>            <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token special-attr"><span class="token attr-name">onload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">initLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lightGallery<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/assets/images/a.jpg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lgallery<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/assets/images/a.jpg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/assets/images/b.jpg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lgallery<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/assets/images/b.jpg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/assets/images/c.jpg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lgallery<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/assets/images/c.jpg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/assets/images/d.jpg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lgallery<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/assets/images/d.jpg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/assets/images/e.jpg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lgallery<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/assets/images/e.jpg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/assets/images/f.jpg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lgallery<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/assets/images/f.jpg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/assets/images/g.jpg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lgallery<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/assets/images/g.jpg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/lightGallery/js/lightgallery.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/lightGallery/js/plugins/lg-fullscreen.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/lightGallery/js/plugins/lg-thumbnail.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/lightGallery/js/plugins/lg-autoplay.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/lightGallery/js/plugins/lg-hash.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/lightGallery/js/plugins/lg-pager.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/lightGallery/js/plugins/lg-share.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/lightGallery/js/plugins/lg-zoom.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><span class="token keyword">function</span> <span class="token function">initLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> lg <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'lightGallery'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">lightGallery</span><span class="token punctuation">(</span>lg<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>        mode<span class="token operator">:</span> <span class="token string">'lg-slide'</span><span class="token punctuation">,</span>        cssEasing<span class="token operator">:</span> <span class="token string">'ease'</span><span class="token punctuation">,</span>        speed<span class="token operator">:</span> <span class="token number">500</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å…­ã€å­¦ä¹ å’Œå‚è€ƒèµ„æº"><a href="#å…­ã€å­¦ä¹ å’Œå‚è€ƒèµ„æº" class="headerlink" title="å…­ã€å­¦ä¹ å’Œå‚è€ƒèµ„æº"></a>å…­ã€å­¦ä¹ å’Œå‚è€ƒèµ„æº</h3><ul><li><a href="https://sachinchoolur.github.io/lightgallery.js/docs/api.html">API Reference</a></li><li><a href="https://sachinchoolur.github.io/lightgallery.js/docs/api.html#events">Events</a></li><li><a href="https://sachinchoolur.github.io/lightgallery.js/docs/api.html#methods">Methods</a></li><li><a href="https://sachinchoolur.github.io/lightgallery.js/docs/api.html#attributes">Data Attributes</a></li><li><a href="https://sachinchoolur.github.io/lightgallery.js/docs/api.html#dynamic">Dynamic variables</a></li><li><a href="https://sachinchoolur.github.io/lightgallery.js/docs/api.html#sass">Sass variables</a></li><li><a href="https://sachinchoolur.github.io/lightgallery.js/docs/plugin-api.html">Module API</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Google Javaç¼–ç¨‹é£æ ¼æŒ‡å—</title>
      <link href="/post/bian-cheng-zhi-dao/google-java-bian-cheng-feng-ge-zhi-nan/"/>
      <url>/post/bian-cheng-zhi-dao/google-java-bian-cheng-feng-ge-zhi-nan/</url>
      
        <content type="html"><![CDATA[<h2 id="1-å‰è¨€"><a href="#1-å‰è¨€" class="headerlink" title="1 å‰è¨€"></a>1 å‰è¨€</h2><p>è¿™ä»½æ–‡æ¡£æ˜¯<code>Google Java</code>ç¼–ç¨‹é£æ ¼è§„èŒƒçš„å®Œæ•´å®šä¹‰ã€‚å½“ä¸”ä»…å½“ä¸€ä¸ª<code>Java</code>æºæ–‡ä»¶ç¬¦åˆæ­¤æ–‡æ¡£ä¸­çš„è§„åˆ™ï¼Œæˆ‘ä»¬æ‰è®¤ä¸ºå®ƒç¬¦åˆ<code>Google</code>çš„<code>Java</code>ç¼–ç¨‹é£æ ¼ã€‚</p><p>ä¸å…¶å®ƒçš„ç¼–ç¨‹é£æ ¼æŒ‡å—ä¸€æ ·ï¼Œè¿™é‡Œæ‰€è®¨è®ºçš„ä¸ä»…ä»…æ˜¯ç¼–ç æ ¼å¼ç¾ä¸ç¾è§‚çš„é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿè®¨è®ºä¸€äº›çº¦å®šåŠç¼–ç æ ‡å‡†ã€‚ç„¶è€Œï¼Œè¿™ä»½æ–‡æ¡£ä¸»è¦ä¾§é‡äºæˆ‘ä»¬æ‰€æ™®ééµå¾ªçš„è§„åˆ™ï¼Œå¯¹äºé‚£äº›ä¸æ˜¯æ˜ç¡®å¼ºåˆ¶è¦æ±‚çš„ï¼Œæˆ‘ä»¬å°½é‡é¿å…æä¾›æ„è§ã€‚</p><h3 id="1-1-æœ¯è¯­è¯´æ˜"><a href="#1-1-æœ¯è¯­è¯´æ˜" class="headerlink" title="1.1 æœ¯è¯­è¯´æ˜"></a>1.1 æœ¯è¯­è¯´æ˜</h3><p>æœ¬æ–‡æ¡£ä¸­é™¤éç‰¹æ®Šè¯´æ˜ï¼Œå¦åˆ™ï¼š</p><ul><li>æœ¯è¯­<code>class</code>å¯è¡¨ç¤ºä¸€ä¸ªæ™®é€šç±»ã€æšä¸¾ç±»ã€æ¥å£æˆ–è€…æ³¨è§£ã€‚</li><li>æœ¯è¯­<code>comment</code>åªç”¨æ¥æŒ‡ä»£å®ç°çš„æ³¨é‡Š(<code>implementation comments</code>)ï¼Œæˆ‘ä»¬ä¸ä½¿ç”¨æ–‡æ¡£æ³¨é‡Š(<code>documentation comments</code>)ä¸€è¯ï¼Œè€Œæ˜¯ç”¨<code>Javadoc</code>ã€‚</li></ul><p>å…¶ä»–æœ¯è¯­è¯´æ˜ï¼Œå°†åœ¨æ–‡æ¡£ä¸­éœ€è¦è¯´æ˜çš„åœ°æ–¹å•ç‹¬è¯´æ˜ã€‚</p><h3 id="1-2-æŒ‡å—è¯´æ˜"><a href="#1-2-æŒ‡å—è¯´æ˜" class="headerlink" title="1.2 æŒ‡å—è¯´æ˜"></a>1.2 æŒ‡å—è¯´æ˜</h3><p>æœ¬æ–‡æ¡£ä¸­çš„ç¤ºä¾‹ä»£ç å¹¶ä¸ä½œä¸ºè§„èŒƒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè™½ç„¶ç¤ºä¾‹ä»£ç æ˜¯éµå¾ªGoogleç¼–ç¨‹é£æ ¼ï¼Œä½†å¹¶ä¸æ„å‘³ç€è¿™æ˜¯å±•ç°è¿™äº›ä»£ç çš„å”¯ä¸€æ–¹å¼ã€‚ç¤ºä¾‹ä¸­çš„æ ¼å¼é€‰æ‹©ä¸åº”è¯¥è¢«å¼ºåˆ¶å®šä¸ºè§„åˆ™ã€‚</p><h2 id="2-æºæ–‡ä»¶åŸºç¡€"><a href="#2-æºæ–‡ä»¶åŸºç¡€" class="headerlink" title="2 æºæ–‡ä»¶åŸºç¡€"></a>2 æºæ–‡ä»¶åŸºç¡€</h2><h3 id="2-1-æ–‡ä»¶å"><a href="#2-1-æ–‡ä»¶å" class="headerlink" title="2.1 æ–‡ä»¶å"></a>2.1 æ–‡ä»¶å</h3><p>æºæ–‡ä»¶ä»¥å…¶æœ€é¡¶å±‚çš„ç±»åï¼ˆå…¶ä¸­åªæœ‰ä¸€ä¸ªï¼‰æ¥å‘½åï¼Œå¤§å°å†™æ•æ„Ÿï¼Œæ–‡ä»¶æ‰©å±•åä¸º<code>.java</code>ã€‚</p><h3 id="2-2-æ–‡ä»¶ç¼–ç ï¼šUTF-8"><a href="#2-2-æ–‡ä»¶ç¼–ç ï¼šUTF-8" class="headerlink" title="2.2 æ–‡ä»¶ç¼–ç ï¼šUTF-8"></a>2.2 æ–‡ä»¶ç¼–ç ï¼šUTF-8</h3><p>æºæ–‡ä»¶ç¼–ç æ ¼å¼ä½¿ç”¨<code>UTF-8</code>ã€‚</p><h3 id="2-3-ç‰¹æ®Šå­—ç¬¦"><a href="#2-3-ç‰¹æ®Šå­—ç¬¦" class="headerlink" title="2.3 ç‰¹æ®Šå­—ç¬¦"></a>2.3 ç‰¹æ®Šå­—ç¬¦</h3><h4 id="2-3-1-ç©ºæ ¼å­—ç¬¦"><a href="#2-3-1-ç©ºæ ¼å­—ç¬¦" class="headerlink" title="2.3.1 ç©ºæ ¼å­—ç¬¦"></a>2.3.1 ç©ºæ ¼å­—ç¬¦</h4><p>é™¤äº†æ¢è¡Œç¬¦å¤–ï¼Œ<code>ASCII</code>æ°´å¹³ç©ºç™½å­—ç¬¦ï¼ˆ0x20ï¼‰æ˜¯æºç æ–‡ä»¶ä¸­å”¯ä¸€æ”¯æŒçš„ç©ºæ ¼å­—ç¬¦ã€‚è¿™æ„å‘³ç€ï¼š</p><ul><li>æ‰€æœ‰å…¶ä»–ç©ºç™½å­—ç¬¦å°†è¢«è½¬ä¹‰ã€‚</li><li><code>Tab</code>å­—ç¬¦ä¸è¢«ç”¨ä½œç¼©è¿›æ§åˆ¶ã€‚</li></ul><h4 id="2-3-2-ç‰¹æ®Šè½¬ä¹‰å­—ç¬¦ä¸²"><a href="#2-3-2-ç‰¹æ®Šè½¬ä¹‰å­—ç¬¦ä¸²" class="headerlink" title="2.3.2 ç‰¹æ®Šè½¬ä¹‰å­—ç¬¦ä¸²"></a>2.3.2 ç‰¹æ®Šè½¬ä¹‰å­—ç¬¦ä¸²</h4><p>ä»»ä½•éœ€è¦è½¬ä¹‰å­—ç¬¦ä¸²è¡¨ç¤ºçš„å­—ç¬¦ï¼ˆä¾‹å¦‚ï¼š<code>\b</code>, <code>\t</code>, <code>\n</code>, <code>\f</code>, <code>\r</code>, <code>\&#39;</code>, <code>\\</code>ç­‰ï¼‰ï¼Œé‡‡ç”¨è¿™ç§è½¬ä¹‰å­—ç¬¦ä¸²çš„æ–¹å¼è¡¨ç¤ºï¼Œè€Œä¸é‡‡ç”¨å¯¹åº”å­—ç¬¦çš„å…«è¿›åˆ¶æ•°ï¼ˆä¾‹å¦‚ <code>\012</code>ï¼‰æˆ–<code>Unicode</code>ç ï¼ˆä¾‹å¦‚ï¼š<code>\u000a</code>ï¼‰è¡¨ç¤ºã€‚</p><h4 id="2-3-3-éASCIIå­—ç¬¦"><a href="#2-3-3-éASCIIå­—ç¬¦" class="headerlink" title="2.3.3 éASCIIå­—ç¬¦"></a>2.3.3 éASCIIå­—ç¬¦</h4><p>å¯¹äºå…¶ä½™é<code>ASCII</code>å­—ç¬¦ï¼Œç›´æ¥ä½¿ç”¨<code>Unicode</code>å­—ç¬¦ï¼ˆä¾‹å¦‚ <code>âˆ</code>ï¼‰ï¼Œæˆ–è€…ä½¿ç”¨å¯¹åº”çš„<code>Unicode</code>ç ï¼ˆä¾‹å¦‚ï¼š<code>\u221e</code>ï¼‰è½¬ä¹‰ï¼Œéƒ½æ˜¯å…è®¸çš„ã€‚<strong>å”¯ä¸€éœ€è¦è€ƒè™‘çš„æ˜¯ï¼Œä½•ç§æ–¹å¼æ›´èƒ½ä½¿ä»£ç å®¹æ˜“é˜…è¯»å’Œç†è§£</strong>ã€‚</p><blockquote><p><strong>æ³¨æ„</strong>ï¼šåœ¨ä½¿ç”¨<code>Unicode</code>ç è½¬ä¹‰ï¼Œæˆ–è€…ç”šè‡³æ˜¯æœ‰æ—¶ç›´æ¥ä½¿ç”¨<code>Unicode</code>å­—ç¬¦çš„æ—¶å€™ï¼Œå»ºè®®å¤šæ·»åŠ ä¸€äº›æ³¨é‡Šè¯´æ˜ï¼Œå°†å¯¹åˆ«äººè¯»æ‡‚ä»£ç å¾ˆæœ‰å¸®åŠ©ã€‚</p></blockquote><p>ä¾‹å­ï¼š</p><table><thead><tr><th>ç¤ºä¾‹</th><th>ç»“è®º</th></tr></thead><tbody><tr><td>String unitAbbrev = â€œÎ¼sâ€;</td><td>èµï¼šå³ä½¿æ²¡æœ‰æ³¨é‡Šä¹Ÿéå¸¸æ¸…æ™°ã€‚</td></tr><tr><td>String unitAbbrev = â€œ\u03bcsâ€; // â€œÎ¼sâ€</td><td>å…è®¸ï¼Œä½†æ²¡æœ‰ç†ç”±è¦è¿™æ ·åšã€‚</td></tr><tr><td>String unitAbbrev = â€œ\u03bcsâ€; // Greek letter mu, â€œsâ€</td><td>å…è®¸ï¼Œä½†è¿™æ ·åšæ˜¾å¾—ç¬¨æ‹™è¿˜å®¹æ˜“å‡ºé”™ã€‚</td></tr><tr><td>String unitAbbrev = â€œ\u03bcsâ€;</td><td>å¾ˆç³Ÿï¼šè¯»è€…æ ¹æœ¬çœ‹ä¸å‡ºè¿™æ˜¯ä»€ä¹ˆã€‚</td></tr><tr><td>return â€˜\ufeffâ€™ + content; // byte order mark</td><td>å¾ˆå¥½ï¼šå¯¹äºéæ‰“å°å­—ç¬¦ï¼Œä½¿ç”¨è½¬ä¹‰ï¼Œå¹¶åœ¨å¿…è¦æ—¶å†™ä¸Šæ³¨é‡Šã€‚</td></tr></tbody></table><blockquote><p><strong>æ³¨æ„</strong>ï¼šæ°¸è¿œä¸è¦ç”±äºå®³æ€•æŸäº›ç¨‹åºå¯èƒ½æ— æ³•æ­£ç¡®å¤„ç†é<code>ASCII</code>å­—ç¬¦è€Œè®©ä½ çš„ä»£ç å¯è¯»æ€§å˜å·®ã€‚å½“ç¨‹åºæ— æ³•æ­£ç¡®å¤„ç†é<code>ASCII</code>å­—ç¬¦æ—¶ï¼Œå®ƒè‡ªç„¶æ— æ³•æ­£ç¡®è¿è¡Œï¼Œä½ å°±ä¼šå»<code>fix</code>è¿™äº›é—®é¢˜çš„äº†ã€‚(è¨€ä¸‹ä¹‹æ„å°±æ˜¯å¤§èƒ†å»ç”¨é<code>ASCII</code>å­—ç¬¦ï¼Œå¦‚æœçœŸçš„æœ‰éœ€è¦çš„è¯)</p></blockquote><h2 id="3-æºæ–‡ä»¶ç»“æ„"><a href="#3-æºæ–‡ä»¶ç»“æ„" class="headerlink" title="3 æºæ–‡ä»¶ç»“æ„"></a>3 æºæ–‡ä»¶ç»“æ„</h2><p>æºæ–‡ä»¶æŒ‰ç…§å…ˆåé¡ºåºï¼Œç”±ä»¥ä¸‹å‡ éƒ¨åˆ†ç»„æˆï¼š</p><ul><li>è®¸å¯è¯(<code>License</code>)æˆ–ç‰ˆæƒä¿¡æ¯(<code>copyright</code>)ï¼ˆå¦‚æœéœ€è¦ï¼‰</li><li><code>package</code>è¯­å¥</li><li><code>import</code>è¯­å¥</li><li><code>class</code>ç±»å£°æ˜ï¼ˆæ¯ä¸ªæºç æ–‡ä»¶åªèƒ½æœ‰å”¯ä¸€ä¸€ä¸ªé¡¶çº§<code>class</code>ï¼‰ã€‚</li></ul><blockquote><p><strong>æ³¨æ„</strong>ï¼šä»¥ä¸Šæ¯ä¸ªéƒ¨åˆ†ä¹‹é—´åº”è¯¥åªæœ‰<strong>ä¸€ä¸ªç©ºè¡Œ</strong>ä½œä¸ºé—´éš”ã€‚</p></blockquote><h3 id="3-1-è®¸å¯è¯æˆ–ç‰ˆæƒä¿¡æ¯"><a href="#3-1-è®¸å¯è¯æˆ–ç‰ˆæƒä¿¡æ¯" class="headerlink" title="3.1 è®¸å¯è¯æˆ–ç‰ˆæƒä¿¡æ¯"></a>3.1 è®¸å¯è¯æˆ–ç‰ˆæƒä¿¡æ¯</h3><p>å¦‚æœä¸€ä¸ªæ–‡ä»¶åŒ…å«è®¸å¯è¯æˆ–ç‰ˆæƒä¿¡æ¯ï¼Œé‚£ä¹ˆå®ƒåº”å½“è¢«æ”¾åœ¨æ–‡ä»¶æœ€å‰é¢ã€‚</p><h3 id="3-2-packageè¯­å¥"><a href="#3-2-packageè¯­å¥" class="headerlink" title="3.2 packageè¯­å¥"></a>3.2 packageè¯­å¥</h3><p><code>package</code>è¯­å¥ä¸æ¢è¡Œï¼Œå•è¡Œé•¿åº¦é™åˆ¶(4.4èŠ‚)ä¸é€‚ç”¨äºpackageè¯­å¥ã€‚(å³packageè¯­å¥å†™åœ¨ä¸€è¡Œé‡Œ)</p><h3 id="3-3-importè¯­å¥"><a href="#3-3-importè¯­å¥" class="headerlink" title="3.3 importè¯­å¥"></a>3.3 importè¯­å¥</h3><h4 id="3-3-1-importä¸ä½¿ç”¨é€šé…ç¬¦"><a href="#3-3-1-importä¸ä½¿ç”¨é€šé…ç¬¦" class="headerlink" title="3.3.1 importä¸ä½¿ç”¨é€šé…ç¬¦"></a>3.3.1 importä¸ä½¿ç”¨é€šé…ç¬¦</h4><p><code>import</code>è¯­å¥ä¸­ä¸åº”è¯¥ä½¿ç”¨é€šé…ç¬¦ï¼Œä¸ç®¡æ˜¯å¦æ˜¯é™æ€å¯¼å…¥ã€‚</p><h4 id="3-3-2-importä¸æ¢è¡Œ"><a href="#3-3-2-importä¸æ¢è¡Œ" class="headerlink" title="3.3.2 importä¸æ¢è¡Œ"></a>3.3.2 importä¸æ¢è¡Œ</h4><p><code>import</code>è¯­å¥ä¸æ¢è¡Œï¼Œåˆ—é™åˆ¶(4.4èŠ‚)å¹¶ä¸é€‚ç”¨äº<code>import</code>è¯­å¥ã€‚(æ¯ä¸ª<code>import</code>è¯­å¥ç‹¬ç«‹æˆè¡Œ)</p><h4 id="3-3-3-é¡ºåºå’Œé—´è·"><a href="#3-3-3-é¡ºåºå’Œé—´è·" class="headerlink" title="3.3.3 é¡ºåºå’Œé—´è·"></a>3.3.3 é¡ºåºå’Œé—´è·</h4><p><code>import</code>è¯­å¥å¯åˆ†ä¸ºä»¥ä¸‹å‡ ç»„ï¼ŒæŒ‰ç…§é¡ºåºï¼Œæ¯ç»„ç”±<strong>ä¸€ä¸ªç©ºè¡Œ</strong>åˆ†éš”ï¼š</p><ul><li>æ‰€æœ‰çš„é™æ€å¯¼å…¥(static import)å½’ä¸ºä¸€ç»„</li><li><code>com.google</code>åŒ…çš„<code>import</code>å½’ä¸ºä¸€ç»„</li><li>ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åŒ…çš„å¯¼å…¥ï¼Œæ¯ä¸ªé¡¶çº§æŒ‰å­—å…¸é¡ºåºå½’ä¸ºä¸€ç»„ã€‚ä¾‹å¦‚ï¼š<code>android</code>, <code>com</code>, <code>junit</code>, <code>org</code>, <code>sun</code></li><li><code>java</code>åŒ…å½’ä¸ºä¸€ç»„</li><li><code>javax</code>åŒ…å½’ä¸ºä¸€ç»„</li></ul><blockquote><p><strong>æ³¨æ„</strong>ï¼šåŒä¸€ç»„å†…çš„<code>import</code>è¯­å¥ä¹‹é—´ä¸åº”ç”¨ç©ºè¡Œéš”å¼€ï¼ŒåŒä¸€ç»„ä¸­çš„<code>import</code>è¯­å¥æŒ‰å­—å…¸åºæ’åˆ—ã€‚</p></blockquote><h3 id="3-4-ç±»å£°æ˜"><a href="#3-4-ç±»å£°æ˜" class="headerlink" title="3.4 ç±»å£°æ˜"></a>3.4 ç±»å£°æ˜</h3><h4 id="3-4-1-åªå£°æ˜å”¯ä¸€ä¸€ä¸ªé¡¶çº§class"><a href="#3-4-1-åªå£°æ˜å”¯ä¸€ä¸€ä¸ªé¡¶çº§class" class="headerlink" title="3.4.1 åªå£°æ˜å”¯ä¸€ä¸€ä¸ªé¡¶çº§class"></a>3.4.1 åªå£°æ˜å”¯ä¸€ä¸€ä¸ªé¡¶çº§class</h4><p>æ¯ä¸ªæºæ–‡ä»¶ä¸­åªèƒ½æœ‰ä¸€ä¸ªé¡¶çº§classã€‚</p><h4 id="3-4-2-ç±»æˆå‘˜é¡ºåº"><a href="#3-4-2-ç±»æˆå‘˜é¡ºåº" class="headerlink" title="3.4.2 ç±»æˆå‘˜é¡ºåº"></a>3.4.2 ç±»æˆå‘˜é¡ºåº</h4><p>ç±»æˆå‘˜çš„é¡ºåºå¯¹ä»£ç çš„æ˜“è¯»æ€§æœ‰å¾ˆå¤§å½±å“ï¼Œä½†æ˜¯æ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€æ­£ç¡®çš„æ ‡å‡†ã€‚ä¸åŒçš„ç±»å¯èƒ½æœ‰ä¸åŒçš„æ’åºæ–¹å¼ã€‚</p><p>æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œ<strong>æ¯ä¸ªç±»åº”è¯¥ä»¥æŸç§é€»è¾‘å»æ’åºå®ƒçš„æˆå‘˜ï¼Œç»´æŠ¤è€…åº”è¯¥è¦èƒ½è§£é‡Šè¿™ç§æ’åºé€»è¾‘</strong>ã€‚æ¯”å¦‚ï¼Œæ–°çš„æ–¹æ³•ä¸èƒ½æ€»æ˜¯ä¹ æƒ¯æ€§åœ°æ·»åŠ åˆ°ç±»çš„ç»“å°¾ï¼Œå› ä¸ºè¿™æ ·å°±æ˜¯æŒ‰æ—¶é—´é¡ºåºè€ŒéæŸç§é€»è¾‘æ¥æ’åºçš„ã€‚</p><h5 id="3-4-2-1-é‡è½½ï¼šæ°¸ä¸åˆ†ç¦»"><a href="#3-4-2-1-é‡è½½ï¼šæ°¸ä¸åˆ†ç¦»" class="headerlink" title="3.4.2.1 é‡è½½ï¼šæ°¸ä¸åˆ†ç¦»"></a>3.4.2.1 é‡è½½ï¼šæ°¸ä¸åˆ†ç¦»</h5><p>å½“ä¸€ä¸ªç±»æœ‰å¤šä¸ªæ„é€ å‡½æ•°ï¼Œæˆ–æ˜¯å¤šä¸ªåŒåæ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•åº”è¯¥æŒ‰é¡ºåºå‡ºç°åœ¨ä¸€èµ·ï¼Œä¸­é—´ä¸è¦æ”¾è¿›å…¶å®ƒæ–¹æ³•ã€‚</p><h2 id="4-æ ¼å¼"><a href="#4-æ ¼å¼" class="headerlink" title="4 æ ¼å¼"></a>4 æ ¼å¼</h2><blockquote><p><strong>æœ¯è¯­è¯´æ˜</strong>ï¼šå—çŠ¶ç»“æ„(<code>block-Â­like construct</code>)æŒ‡çš„æ˜¯ä¸€ä¸ªç±»ï¼Œæ–¹æ³•æˆ–æ„é€ å‡½æ•°çš„ä¸»ä½“ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ•°ç»„åˆå§‹åŒ–ä¸­çš„åˆå§‹å€¼å¯è¢«é€‰æ‹©æ€§åœ°è§†ä¸ºå—çŠ¶ç»“æ„(4.8.3.1èŠ‚)ã€‚</p></blockquote><h3 id="4-1-å¤§æ‹¬å·"><a href="#4-1-å¤§æ‹¬å·" class="headerlink" title="4.1 å¤§æ‹¬å·"></a>4.1 å¤§æ‹¬å·</h3><h4 id="4-1-1-ä½¿ç”¨å¤§æ‹¬å·-å³ä½¿æ˜¯å¯é€‰çš„"><a href="#4-1-1-ä½¿ç”¨å¤§æ‹¬å·-å³ä½¿æ˜¯å¯é€‰çš„" class="headerlink" title="4.1.1 ä½¿ç”¨å¤§æ‹¬å·(å³ä½¿æ˜¯å¯é€‰çš„)"></a>4.1.1 ä½¿ç”¨å¤§æ‹¬å·(å³ä½¿æ˜¯å¯é€‰çš„)</h4><p>å¤§æ‹¬å·ä¸€èˆ¬ç”¨åœ¨<code>if</code>, <code>else</code>, <code>for</code>, <code>do</code>, <code>while</code>ç­‰è¯­å¥ï¼Œå³ä½¿åªæœ‰ä¸€æ¡è¯­å¥(æˆ–æ˜¯ç©º)ï¼Œä¹Ÿåº”è¯¥æŠŠå¤§æ‹¬å·å†™ä¸Šã€‚</p><h4 id="4-1-2-éç©ºè¯­å¥å—é‡‡ç”¨K-amp-Ré£æ ¼"><a href="#4-1-2-éç©ºè¯­å¥å—é‡‡ç”¨K-amp-Ré£æ ¼" class="headerlink" title="4.1.2 éç©ºè¯­å¥å—é‡‡ç”¨K&amp;Ré£æ ¼"></a>4.1.2 éç©ºè¯­å¥å—é‡‡ç”¨<code>K&amp;R</code>é£æ ¼</h4><p>å¯¹äºéç©ºè¯­å¥å—ï¼Œå¤§æ‹¬å·éµå¾ª<code>Kernighan</code>å’Œ<code>Ritchie</code>é£æ ¼ (<a href="https://blog.codinghorror.com/new-programming-jargon/">Egyptian brackets</a>):</p><ul><li>å·¦å¤§æ‹¬å·å‰ä¸æ¢è¡Œ</li><li>å·¦å¤§æ‹¬å·åæ¢è¡Œ</li><li>å³å¤§æ‹¬å·å‰æ¢è¡Œ</li><li>å¦‚æœå³å¤§æ‹¬å·ç»“æŸæ˜¯ä¸€ä¸ª<code>è¯­å¥å—</code>æˆ–è€…<code>æ–¹æ³•ä½“</code>ã€<code>æ„é€ å‡½æ•°ä½“</code>æˆ–è€…<code>æœ‰å‘½åçš„ç±»ä½“</code>ï¼Œåˆ™éœ€è¦æ¢è¡Œã€‚å½“å³æ‹¬å·åé¢æ¥<code>else</code>æˆ–è€…<code>é€—å·</code>æ—¶ï¼Œä¸åº”è¯¥æ¢è¡Œã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">condition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">condition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                <span class="token function">something</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ProblemException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">otherCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">somethingElse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token function">lastThing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸€äº›ä¾‹å¤–çš„æƒ…å†µï¼Œå°†åœ¨<code>4.8.1</code>èŠ‚è®²<code>æšä¸¾ç±»å‹</code>çš„æ—¶å€™è®²åˆ°ã€‚</p><h4 id="4-1-3-ç©ºè¯­å¥å—ï¼šä½¿ä»£ç æ›´ç®€æ´"><a href="#4-1-3-ç©ºè¯­å¥å—ï¼šä½¿ä»£ç æ›´ç®€æ´" class="headerlink" title="4.1.3 ç©ºè¯­å¥å—ï¼šä½¿ä»£ç æ›´ç®€æ´"></a>4.1.3 ç©ºè¯­å¥å—ï¼šä½¿ä»£ç æ›´ç®€æ´</h4><p>ä¸€ä¸ªç©ºçš„è¯­å¥å—ï¼Œå¯ä»¥åœ¨å·¦å¤§æ‹¬å·ä¹‹åç›´æ¥æ¥å³å¤§æ‹¬å·ï¼Œä¸­é—´ä¸éœ€è¦ç©ºæ ¼æˆ–æ¢è¡Œã€‚ä½†æ˜¯å½“ä¸€ä¸ªç”±å‡ ä¸ªè¯­å¥å—è”åˆç»„æˆçš„è¯­å¥å—æ—¶ï¼Œåˆ™éœ€è¦æ¢è¡Œã€‚ï¼ˆä¾‹å¦‚ï¼š<code>if/else</code> æˆ–è€…<code>try/catch/finally</code>ï¼‰.</p><p>ç¤ºä¾‹ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// è¿™æ˜¯å¯æ¥å—çš„</span><span class="token keyword">void</span> <span class="token function">doNothing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token comment">// è¿™åŒæ ·æ˜¯å¯æ¥å—çš„</span><span class="token keyword">void</span> <span class="token function">doNothingElse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// è¿™æ˜¯ä¸å¯æ¥å—çš„ï¼šå¤šå—è¯­å¥ä¸­æ²¡æœ‰ç®€æ´çš„ç©ºè¯­å¥å—</span><span class="token keyword">try</span> <span class="token punctuation">&#123;</span>    <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-2å—ç¼©è¿›ï¼š2ä¸ªç©ºæ ¼"><a href="#4-2å—ç¼©è¿›ï¼š2ä¸ªç©ºæ ¼" class="headerlink" title="4.2å—ç¼©è¿›ï¼š2ä¸ªç©ºæ ¼"></a>4.2å—ç¼©è¿›ï¼š2ä¸ªç©ºæ ¼</h3><p>æ¯å½“ä¸€ä¸ªæ–°çš„è¯­å¥å—äº§ç”Ÿï¼Œç¼©è¿›å°±å¢åŠ ä¸¤ä¸ªç©ºæ ¼ã€‚å½“è¿™ä¸ªè¯­å¥å—ç»“æŸæ—¶ï¼Œç¼©è¿›æ¢å¤åˆ°ä¸Šä¸€å±‚çº§çš„ç¼©è¿›æ ¼æ•°ã€‚ç¼©è¿›è¦æ±‚å¯¹æ•´ä¸ªè¯­å¥å—ä¸­çš„ä»£ç å’Œæ³¨é‡Šéƒ½é€‚ç”¨ã€‚ï¼ˆä¾‹å­å¯å‚è€ƒä¹‹å‰4.1.2èŠ‚ä¸­çš„ä¾‹å­ï¼‰ã€‚</p><blockquote><p><strong>æ³¨æ„</strong>ï¼šæ ¹æ®å®é™…çš„ç¼–ç¨‹ç»éªŒï¼Œ<code>2</code>ä¸ªç©ºæ ¼ç¼©è¿›çš„ä»£ç åœ¨å½“å‰å¤§å±çš„è®¡ç®—æœºä¸Šä¼šæ˜¾å¾—ååˆ†æ‹¥æŒ¤ï¼Œåè€Œä½¿å¾—ä»£ç <code>è‡ƒè‚¿</code>ä¸å¤Ÿç¾è§‚ã€‚æ‰€ä»¥ï¼Œæˆ‘è¿™é‡Œå»ºè®®ä½¿ç”¨<code>4</code>ä¸ªç©ºæ ¼æ¥ç¼©è¿›ï¼Œä¼šä½¿å¾—æ›´åŠ ç¾è§‚ï¼Œè€Œä¸”èƒ½ä¾§é¢ç£ä¿ƒå¼€å‘äººå‘˜å‡å°‘ä»£ç çš„åµŒå¥—å±‚æ•°ã€‚</p></blockquote><h3 id="4-3-ä¸€è¡Œä¸€ä¸ªè¯­å¥"><a href="#4-3-ä¸€è¡Œä¸€ä¸ªè¯­å¥" class="headerlink" title="4.3 ä¸€è¡Œä¸€ä¸ªè¯­å¥"></a>4.3 ä¸€è¡Œä¸€ä¸ªè¯­å¥</h3><p>æ¯æ¡è¯­å¥ç»“æŸéƒ½éœ€è¦æ¢è¡Œã€‚</p><h3 id="4-4-åˆ—é•¿åº¦é™åˆ¶ï¼š100"><a href="#4-4-åˆ—é•¿åº¦é™åˆ¶ï¼š100" class="headerlink" title="4.4 åˆ—é•¿åº¦é™åˆ¶ï¼š100"></a>4.4 åˆ—é•¿åº¦é™åˆ¶ï¼š100</h3><p>Javaä»£ç çš„åˆ—é•¿åº¦é™åˆ¶ä¸º<code>100ä¸ª</code>å­—ç¬¦ã€‚ é™¤äº†å¦‚ä¸‹æ‰€è¿°ï¼Œä»»ä½•è¶…è¿‡æ­¤é™åˆ¶çš„è¡Œéƒ½å¿…é¡»è·³è¡Œã€‚è¿™åœ¨4.5èŠ‚ä¼šæœ‰è¯¦ç»†è§£é‡Šã€‚</p><p>ä¾‹å¤–ï¼š</p><ul><li>ä¸å¯èƒ½æ»¡è¶³è¡Œé•¿åº¦é™åˆ¶çš„è¡Œ(ä¾‹å¦‚ï¼ŒJavadocä¸­çš„ä¸€ä¸ªé•¿URLï¼Œæˆ–æ˜¯ä¸€ä¸ªé•¿çš„JSNIæ–¹æ³•å‚è€ƒ)</li><li><code>package</code>å’Œ<code>import</code>è¯­å¥(è§3.2èŠ‚å’Œ3.3èŠ‚)</li><li>æ³¨é‡Šä¸­é‚£äº›å¯èƒ½è¢«å‰ªåˆ‡å¹¶ç²˜è´´åˆ°shellä¸­çš„å‘½ä»¤è¡Œ</li></ul><blockquote><p><strong>æ³¨æ„</strong>ï¼šå½“å‰çš„è®¡ç®—æœºå±å¹•éƒ½å·²ç»æ¯”å¾ˆå®½äº†ï¼Œè€Œä¸”å˜é‡åŠæ–¹æ³•å‘½åéƒ½è¾ƒé•¿ï¼Œ<code>100</code>ä¸ªå­—ç¬¦çš„é•¿åº¦åè€Œä¼šå‡ºç°å¾ˆå¤šä¸å¿…è¦çš„è·³è¡Œï¼Œå·²ç»ä¸é€‚åº”å½“ä»Šçš„æƒ…å†µäº†ï¼Œæ ¹æ®å®é™…ç¼–ç¨‹ç»éªŒï¼Œæˆ‘è¿™é‡Œå»ºè®®ä½¿ç”¨<code>120</code>ä¸ªå­—ç¬¦çš„å®½åº¦æ›´ä¸ºåˆé€‚ã€‚</p></blockquote><h3 id="4-5-æ¢è¡Œ"><a href="#4-5-æ¢è¡Œ" class="headerlink" title="4.5 æ¢è¡Œ"></a>4.5 æ¢è¡Œ</h3><p><strong>æœ¯è¯­è¯´æ˜</strong>ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸€è¡Œé•¿ä»£ç ä¸ºäº†é¿å…è¶…å‡ºåˆ—é™åˆ¶(<code>100</code>ä¸ªå­—ç¬¦)è€Œè¢«åˆ†ä¸ºå¤šè¡Œï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºæ–­è¡Œ(<code>lineÂ­-wrapping</code>)ã€‚</p><p>æˆ‘ä»¬å¹¶æ²¡æœ‰å…¨é¢ï¼Œç¡®å®šæ€§çš„å‡†åˆ™æ¥å†³å®šåœ¨æ¯ä¸€ç§æƒ…å†µä¸‹å¦‚ä½•æ–­è¡Œã€‚å¾ˆå¤šæ—¶å€™ï¼Œå¯¹äºåŒä¸€æ®µä»£ç ä¼šæœ‰å¥½å‡ ç§æœ‰æ•ˆçš„æ¢æ–­è¡Œæ–¹å¼ã€‚</p><blockquote><p><strong>æ³¨æ„</strong>: æå–<code>æ–¹æ³•</code>æˆ–<code>å±€éƒ¨å˜é‡</code>å¯ä»¥è§£å†³é—®é¢˜ï¼Œè€Œä¸ä¸éœ€è¦è¿›è¡Œæ–­è¡Œã€‚</p></blockquote><h4 id="4-5-1-åœ¨ä½•å¤„æ–­è¡Œ"><a href="#4-5-1-åœ¨ä½•å¤„æ–­è¡Œ" class="headerlink" title="4.5.1 åœ¨ä½•å¤„æ–­è¡Œ"></a>4.5.1 åœ¨ä½•å¤„æ–­è¡Œ</h4><p>æ–­è¡Œçš„ä¸»è¦åŸåˆ™æ˜¯ï¼š<strong>é€‰æ‹©åœ¨æ›´é«˜çº§çš„è¯­æ³•é€»è¾‘å¤„æ–­è¡Œ</strong>ã€‚å…¶ä»–ä¸€äº›åŸåˆ™å¦‚ä¸‹ï¼š</p><ul><li>å½“ä¸€ä¸ªéèµ‹å€¼è¿ç®—çš„è¯­å¥æ–­è¡Œæ—¶ï¼Œåœ¨è¿ç®—ç¬¦å·ä¹‹å‰æ–­è¡Œã€‚ï¼ˆè¿™ä¸Googleçš„C++è§„èŒƒå’ŒJavaScripè§„èŒƒç­‰å…¶ä»–è§„èŒƒä¸åŒï¼‰ã€‚</li><li>å¦‚æœè¦åœ¨éèµ‹å€¼è¿ç®—ç¬¦å¤„æ–­è¡Œï¼Œé‚£ä¹ˆåœ¨è¯¥ç¬¦å·å‰æ–­å¼€(æ¯”å¦‚<code>+</code>æ“ä½œç¬¦ï¼Œå®ƒå°†ä½äºä¸‹ä¸€è¡Œ)ã€‚ä»¥ä¸‹çš„<code>ç±»è¿ç®—ç¬¦</code>ä¹Ÿå¯ä½œä¸ºå‚è€ƒï¼š<ul><li>ç‚¹æ“ä½œç¬¦<code>.</code></li><li>ç±»å‹ç•Œé™ä¸­çš„<code>&amp;</code>ã€<code>||</code>ç­‰ï¼ˆä¾‹å¦‚ï¼š<code>&lt;T extends Foo &amp; Bar&gt;</code>)</li></ul></li><li>å½“è¦åœ¨ä¸€ä¸ªèµ‹å€¼è¿ç®—è¯­å¥å¤„æ–­è¡Œæ—¶ï¼Œä¸€èˆ¬åœ¨èµ‹å€¼ç¬¦å·ä¹‹åæ–­è¡Œã€‚ä½†æ˜¯ä¹Ÿå¯ä»¥åœ¨ä¹‹å‰æ–­è¡Œã€‚(ä¾‹å¦‚ï¼š<code>=</code>ï¼Œå®ƒä¸å‰é¢çš„å†…å®¹ç•™åœ¨åŒä¸€è¡Œ)ã€‚<ul><li>è¿™æ¡è§„åˆ™ä¹Ÿé€‚ç”¨äº<code>foreach</code>è¯­å¥ä¸­çš„å†’å·ã€‚</li></ul></li><li>æ–¹æ³•åæˆ–æ„é€ å‡½æ•°åä¸å·¦æ‹¬å·ç•™åœ¨åŒä¸€è¡Œã€‚</li><li>é€—å·(<code>,</code>)ä¸å…¶å‰é¢çš„å†…å®¹ç•™åœ¨åŒä¸€è¡Œã€‚ä¹Ÿå°±æ˜¯åœ¨é€—å·ä¹‹åæ–­è¡Œã€‚</li><li><code>Lambda</code>è¡¨è¾¾å¼åœ¨ç®­å¤´ç¬¦å·(<code>-&gt;</code>)åæ–­è¡Œã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">MyLambda</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> lambda <span class="token operator">=</span>    <span class="token punctuation">(</span><span class="token class-name">String</span> label<span class="token punctuation">,</span> <span class="token class-name">Long</span> value<span class="token punctuation">,</span> <span class="token class-name">Object</span> obj<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> predicate <span class="token operator">=</span> str <span class="token operator">-></span>    <span class="token function">longExpressionInvolving</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>æ³¨æ„</strong>ï¼šæ¢è¡Œçš„ä¸»è¦ç›®æ ‡æ˜¯ä½¿ä»£ç æ›´æ¸…æ™°æ˜“è¯»ã€‚</p></blockquote><h4 id="4-5-2-æ–­è¡Œçš„ç¼©è¿›ï¼šè‡³å°‘-4ä¸ªç©ºæ ¼"><a href="#4-5-2-æ–­è¡Œçš„ç¼©è¿›ï¼šè‡³å°‘-4ä¸ªç©ºæ ¼" class="headerlink" title="4.5.2 æ–­è¡Œçš„ç¼©è¿›ï¼šè‡³å°‘+4ä¸ªç©ºæ ¼"></a>4.5.2 æ–­è¡Œçš„ç¼©è¿›ï¼šè‡³å°‘+4ä¸ªç©ºæ ¼</h4><p>è‡ªåŠ¨æ¢è¡Œæ—¶ï¼Œç¬¬ä¸€è¡Œåçš„æ¯ä¸€è¡Œè‡³å°‘æ¯”ç¬¬ä¸€è¡Œå¤šç¼©è¿›<code>4</code>ä¸ªç©ºæ ¼(æ³¨æ„ï¼šåˆ¶è¡¨ç¬¦ä¸ç”¨äºç¼©è¿›ã€‚è§2.3.1èŠ‚)ã€‚</p><p>å½“å­˜åœ¨è¿ç»­è‡ªåŠ¨æ¢è¡Œæ—¶ï¼Œç¼©è¿›å¯èƒ½ä¼šå¤šç¼©è¿›ä¸åª<code>4</code>ä¸ªç©ºæ ¼(è¯­æ³•å…ƒç´ å­˜åœ¨å¤šçº§æ—¶)ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œä¸¤ä¸ªè¿ç»­è¡Œä½¿ç”¨ç›¸åŒçš„ç¼©è¿›å½“ä¸”ä»…å½“å®ƒä»¬å¼€å§‹äºåŒçº§è¯­æ³•å…ƒç´ ã€‚</p><p>ç¬¬4.6.3æ°´å¹³å¯¹é½ä¸€èŠ‚ä¸­æŒ‡å‡ºï¼Œä¸é¼“åŠ±ä½¿ç”¨å¯å˜æ•°ç›®çš„ç©ºæ ¼æ¥å¯¹é½å‰é¢è¡Œçš„ç¬¦å·ã€‚</p><h3 id="4-6-ç©ºç™½"><a href="#4-6-ç©ºç™½" class="headerlink" title="4.6 ç©ºç™½"></a>4.6 ç©ºç™½</h3><h4 id="4-6-1-å‚ç›´ç©ºç™½"><a href="#4-6-1-å‚ç›´ç©ºç™½" class="headerlink" title="4.6.1 å‚ç›´ç©ºç™½"></a>4.6.1 å‚ç›´ç©ºç™½</h4><p>ä»¥ä¸‹æƒ…å†µéœ€è¦ä½¿ç”¨å•è¡Œç©ºè¡Œï¼š</p><ul><li>ç±»æˆå‘˜ä¹‹é—´éœ€è¦å•ä¸ªç©ºè¡Œéš”å¼€ï¼šä¾‹å¦‚ï¼š<code>å­—æ®µ</code>ï¼Œ<code>æ„é€ å‡½æ•°</code>ï¼Œ<code>æ–¹æ³•</code>ï¼Œ<code>åµŒå¥—ç±»</code>ï¼Œ<code>é™æ€åˆå§‹åŒ–å—</code>ï¼Œ<code>å®ä¾‹åˆå§‹åŒ–å—</code>ã€‚ä½†ä¹Ÿæœ‰ä»¥ä¸‹ä¸¤ç§ä¾‹å¤–æƒ…å†µï¼š<ul><li>ä¸¤ä¸ªè¿ç»­å­—æ®µä¹‹é—´çš„ç©ºè¡Œæ˜¯å¯é€‰çš„ï¼Œæ ¹æ®éœ€è¦ä½¿ç”¨ç©ºè¡Œæ¥åˆ›å»ºå­—æ®µé—´çš„é€»è¾‘åˆ†ç»„ã€‚</li><li>æšä¸¾å¸¸é‡ä¹‹é—´çš„çš„ç©ºè¡Œä¹Ÿæ˜¯å¯é€‰çš„ï¼Œæ ¹æ®éœ€è¦ä½¿ç”¨ç©ºè¡Œæ¥åˆ›å»ºæšä¸¾å¸¸é‡é—´çš„é€»è¾‘åˆ†ç»„ã€‚</li></ul></li><li>åœ¨æ–¹æ³•ä½“å†…ï¼Œæ ¹æ®ä»£ç çš„é€»è¾‘åˆ†ç»„çš„éœ€è¦ï¼Œè®¾ç½®ç©ºç™½è¡Œä½œä¸ºé—´éš”ã€‚</li><li>ç±»çš„ç¬¬ä¸€ä¸ªæˆå‘˜ä¹‹å‰æˆ–æœ€åä¸€ä¸ªæˆå‘˜ä¹‹åï¼Œä½¿ç”¨ç©ºè¡Œ(å¯é€‰)ã€‚</li><li>æœ¬æ–‡æ¡£æ‰€ä»‹ç»çš„å…¶ä»–ç« èŠ‚çš„ç©ºè¡Œè¦æ±‚(æ¯”å¦‚3.3èŠ‚ï¼š<code>import</code>è¯­å¥)ã€‚</li></ul><h4 id="4-6-2-æ°´å¹³ç©ºç™½"><a href="#4-6-2-æ°´å¹³ç©ºç™½" class="headerlink" title="4.6.2 æ°´å¹³ç©ºç™½"></a>4.6.2 æ°´å¹³ç©ºç™½</h4><p>é™¤äº†è¯­æ³•ã€å…¶ä»–è§„åˆ™ã€è¯è¯­åˆ†éš”ã€æ³¨é‡Šå’Œjavadocå¤–ï¼Œæ°´å¹³çš„ASCIIç©ºæ ¼åªåœ¨ä»¥ä¸‹æƒ…å†µå‡ºç°ï¼š</p><ul><li>æ‰€æœ‰ä¿ç•™çš„å…³é”®å­—ä¸ç´§æ¥å®ƒä¹‹åçš„ä½äºåŒä¸€è¡Œçš„å·¦å¤§æ‹¬å·ä¹‹é—´éœ€è¦ç”¨ç©ºæ ¼éš”å¼€ã€‚(ä¾‹å¦‚ï¼š<code>if</code>, <code>for</code> <code>catch</code>ç­‰)</li><li>æ‰€æœ‰ä¿ç•™çš„å…³é”®å­—ä¸åœ¨å®ƒä¹‹å‰çš„å³å¤§æ‹¬å·ä¹‹é—´éœ€è¦ç©ºæ ¼éš”å¼€ã€‚ï¼ˆä¾‹å¦‚ï¼š<code>else</code>ã€<code>catch</code>ï¼‰</li><li>åœ¨å·¦å¤§æ‹¬å·ä¹‹å‰éƒ½éœ€è¦ç©ºæ ¼éš”å¼€ã€‚åªæœ‰ä¸¤ç§ä¾‹å¤–ï¼š<ul><li><code>@SomeAnnotation(&#123;a, b&#125;)</code></li><li><code>String[][] x = &#123;&#123;"foo"&#125;&#125;;</code></li></ul></li><li>æ‰€æœ‰çš„äºŒå…ƒè¿ç®—ç¬¦å’Œä¸‰å…ƒè¿ç®—ç¬¦çš„ä¸¤è¾¹ï¼Œéƒ½éœ€è¦ç©ºæ ¼éš”å¼€ã€‚(ä¾‹å¦‚ï¼š<code>a + b</code>ã€<code>b = a &lt; 0 ? 0 : a</code>)</li><li>é€—å·(<code>,</code>)ã€å†’å·(<code>:</code>)ã€åˆ†å·(<code>;</code>)å’Œå³å°æ‹¬å·(<code>)</code>)ã€Lambdaç®­å¤´ç¬¦å·(<code>-&gt;</code>)ä¹‹åï¼Œéœ€è¦ç©ºæ ¼éš”å¼€ã€‚</li><li><code>//</code>åŒæ–œçº¿å¼€å§‹ä¸€è¡Œæ³¨é‡Šæ—¶ï¼ŒåŒæ–œçº¿ä¸¤è¾¹éƒ½åº”è¯¥ç”¨ç©ºæ ¼éš”å¼€ã€‚å¹¶ä¸”å¯ä½¿ç”¨å¤šä¸ªç©ºæ ¼ã€‚ï¼ˆå¯é€‰ï¼Œä¾‹å¦‚ï¼š<code>a = 0; // èµ‹å€¼ä¸º0</code>ï¼‰</li><li>å˜é‡å£°æ˜æ—¶ï¼Œå˜é‡ç±»å‹å’Œå˜é‡åä¹‹é—´éœ€è¦ç”¨ç©ºæ ¼éš”å¼€ã€‚ï¼ˆä¾‹å¦‚ï¼š<code>List&lt;String&gt; list</code>ï¼‰</li><li>åˆå§‹åŒ–ä¸€ä¸ªæ•°ç»„æ—¶ï¼ŒèŠ±æ‹¬å·ä¹‹é—´å¯ä»¥ç”¨ç©ºæ ¼éš”å¼€ï¼Œä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ã€‚ï¼ˆå¯é€‰ï¼Œä¾‹å¦‚ï¼š<code>new int[] &#123;5, 6&#125;</code>å’Œ<code>new int[] &#123; 5, 6 &#125;</code>ï¼‰</li></ul><blockquote><p><strong>æ³¨æ„</strong>ï¼šè¿™ä¸ªè§„åˆ™å¹¶ä¸è¦æ±‚æˆ–ç¦æ­¢ä¸€è¡Œçš„å¼€å…³æˆ–ç»“å°¾éœ€è¦é¢å¤–çš„ç©ºæ ¼ï¼Œåªå¯¹å†…éƒ¨ç©ºæ ¼åšè¦æ±‚ã€‚</p></blockquote><h4 id="4-6-3-æ°´å¹³å¯¹é½ï¼šä¸åšè¦æ±‚"><a href="#4-6-3-æ°´å¹³å¯¹é½ï¼šä¸åšè¦æ±‚" class="headerlink" title="4.6.3 æ°´å¹³å¯¹é½ï¼šä¸åšè¦æ±‚"></a>4.6.3 æ°´å¹³å¯¹é½ï¼šä¸åšè¦æ±‚</h4><blockquote><p><strong>æœ¯è¯­è¯´æ˜</strong>ï¼šæ°´å¹³å¯¹é½ï¼Œæ˜¯æŒ‡é€šè¿‡æ·»åŠ å¤šä¸ªç©ºæ ¼ï¼Œä½¿æœ¬è¡Œçš„æŸä¸€ç¬¦å·ä¸ä¸Šä¸€è¡Œçš„æŸä¸€ç¬¦å·ä¸Šä¸‹å¯¹é½ã€‚</p></blockquote><p>è¿™ç§å¯¹é½æ˜¯è¢«å…è®¸çš„ï¼Œä½†æ˜¯ä¸ä¼šåšå¼ºåˆ¶è¦æ±‚ã€‚</p><p>ä»¥ä¸‹æ˜¯æ²¡æœ‰æ°´å¹³å¯¹é½å’Œæ°´å¹³å¯¹é½çš„ä¾‹å­ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">int</span> x<span class="token punctuation">;</span>   <span class="token comment">// è¿™ç§æŒºå¥½</span><span class="token keyword">private</span> <span class="token class-name">Color</span> color<span class="token punctuation">;</span>   <span class="token comment">// åŒä¸Š</span><span class="token keyword">private</span> <span class="token keyword">int</span>   x<span class="token punctuation">;</span>      <span class="token comment">// å…è®¸ï¼Œä½†æ˜¯æœªæ¥ä¼šç»§ç»­ç¼–è¾‘</span><span class="token keyword">private</span> <span class="token class-name">Color</span> color<span class="token punctuation">;</span>  <span class="token comment">// å¯èƒ½ä¼šä½¿å®ƒå¯¹ä¸é½</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>æ³¨æ„</strong>ï¼šæ°´å¹³å¯¹é½èƒ½å¤Ÿå¢åŠ ä»£ç çš„å¯è¯»æ€§ï¼Œä½†æ˜¯å¢åŠ äº†æœªæ¥ç»´æŠ¤ä»£ç çš„éš¾åº¦ã€‚è€ƒè™‘åˆ°ç»´æŠ¤æ—¶åªéœ€è¦æ”¹å˜ä¸€è¡Œä»£ç ï¼Œä¹‹å‰çš„å¯¹é½å¯ä»¥ä¸éœ€è¦æ”¹åŠ¨ã€‚ä¸ºäº†å¯¹é½ï¼Œä½ æ›´æœ‰å¯èƒ½æ”¹äº†ä¸€è¡Œä»£ç ï¼ŒåŒæ—¶éœ€è¦æ›´æ”¹é™„è¿‘çš„å¥½å‡ è¡Œä»£ç ï¼Œè€Œè¿™å‡ è¡Œä»£ç çš„æ”¹åŠ¨ï¼Œå¯èƒ½åˆä¼šå¼•èµ·ä¸€äº›ä¸ºäº†ä¿æŒå¯¹é½çš„ä»£ç æ”¹åŠ¨ã€‚é‚£åŸæœ¬è¿™è¡Œæ”¹åŠ¨ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º<strong>çˆ†ç‚¸åŠå¾„</strong>ã€‚è¿™ç§æ”¹åŠ¨ï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹å¯èƒ½ä¼šå¯¼è‡´å¤§é‡çš„æ— æ„ä¹‰çš„å·¥ä½œï¼Œå³ä½¿åœ¨æœ€å¥½çš„æƒ…å†µä¸‹ï¼Œä¹Ÿä¼šå½±å“ç‰ˆæœ¬å†å²ä¿¡æ¯ï¼Œå‡æ…¢ä»£ç <code>review</code>çš„é€Ÿåº¦ï¼Œå¼•èµ·æ›´å¤š<code>merge</code>ä»£ç å†²çªçš„æƒ…å†µã€‚</p></blockquote><h3 id="4-7-åˆ†ç»„å°æ‹¬å·ï¼šæ¨èä½¿ç”¨"><a href="#4-7-åˆ†ç»„å°æ‹¬å·ï¼šæ¨èä½¿ç”¨" class="headerlink" title="4.7 åˆ†ç»„å°æ‹¬å·ï¼šæ¨èä½¿ç”¨"></a>4.7 åˆ†ç»„å°æ‹¬å·ï¼šæ¨èä½¿ç”¨</h3><p>é™¤éä½œè€…å’Œ<code>reviewer</code>éƒ½è®¤ä¸ºå»æ‰å°æ‹¬å·ä¹Ÿä¸ä¼šä½¿ä»£ç è¢«è¯¯è§£ï¼Œæˆ–æ˜¯å»æ‰å°æ‹¬å·èƒ½è®©ä»£ç æ›´æ˜“äºé˜…è¯»ï¼Œå¦åˆ™æˆ‘ä»¬ä¸åº”è¯¥å»æ‰å°æ‹¬å·ã€‚æˆ‘ä»¬æ²¡æœ‰ç†ç”±å‡è®¾è¯»è€…èƒ½è®°ä½æ•´ä¸ªJavaè¿ç®—ç¬¦ä¼˜å…ˆçº§è¡¨ã€‚</p><h3 id="4-8-ç‰¹æ®Šç»“æ„"><a href="#4-8-ç‰¹æ®Šç»“æ„" class="headerlink" title="4.8 ç‰¹æ®Šç»“æ„"></a>4.8 ç‰¹æ®Šç»“æ„</h3><h4 id="4-8-1-æšä¸¾ç±»å‹"><a href="#4-8-1-æšä¸¾ç±»å‹" class="headerlink" title="4.8.1 æšä¸¾ç±»å‹"></a>4.8.1 æšä¸¾ç±»å‹</h4><p>æšä¸¾å¸¸é‡é—´ç”¨é€—å·éš”å¼€ï¼Œæ¢è¡Œæ˜¯å¯é€‰çš„ã€‚è€Œä¸”è¿˜å…è®¸é™„åŠ çš„ç©ºè¡Œï¼ˆé€šå¸¸åªæœ‰ä¸€ä¸ªï¼‰ã€‚ä»¥ä¸‹å°±æ˜¯ä¸€ç§å¯èƒ½æ€§çš„ç¤ºä¾‹ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">enum</span> <span class="token class-name">Answer</span> <span class="token punctuation">&#123;</span>    YES <span class="token punctuation">&#123;</span>        <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token string">"yes"</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    NO<span class="token punctuation">,</span>    MAYBE<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ²¡æœ‰æ–¹æ³•å’ŒJavadocçš„æšä¸¾ç±»å¯å†™æˆæ•°ç»„åˆå§‹åŒ–çš„æ ¼å¼ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">enum</span> <span class="token class-name">Suit</span> <span class="token punctuation">&#123;</span> CLUBS<span class="token punctuation">,</span> HEARTS<span class="token punctuation">,</span> SPADES<span class="token punctuation">,</span> DIAMONDS <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç”±äºæšä¸¾ç±»ä¹Ÿæ˜¯ä¸€ä¸ªç±»ï¼Œå› æ­¤æ‰€æœ‰é€‚ç”¨äºå…¶å®ƒç±»çš„æ ¼å¼è§„åˆ™ä¹Ÿé€‚ç”¨äºæšä¸¾ç±»ã€‚</p><h4 id="4-8-2-å˜é‡å£°æ˜"><a href="#4-8-2-å˜é‡å£°æ˜" class="headerlink" title="4.8.2 å˜é‡å£°æ˜"></a>4.8.2 å˜é‡å£°æ˜</h4><h5 id="4-8-2-1-æ¯æ¬¡å£°æ˜ä¸€ä¸ªå˜é‡"><a href="#4-8-2-1-æ¯æ¬¡å£°æ˜ä¸€ä¸ªå˜é‡" class="headerlink" title="4.8.2.1 æ¯æ¬¡å£°æ˜ä¸€ä¸ªå˜é‡"></a>4.8.2.1 æ¯æ¬¡å£°æ˜ä¸€ä¸ªå˜é‡</h5><p>ä¸è¦ä½¿ç”¨ç»„åˆå£°æ˜ã€‚ä¾‹å¦‚ï¼š<code>int a, b;</code>æ˜¯ä¸å…è®¸çš„ã€‚</p><h5 id="4-8-2-2-éœ€è¦æ—¶æ‰å£°æ˜ï¼Œå°½å¿«è¿›è¡Œåˆå§‹åŒ–"><a href="#4-8-2-2-éœ€è¦æ—¶æ‰å£°æ˜ï¼Œå°½å¿«è¿›è¡Œåˆå§‹åŒ–" class="headerlink" title="4.8.2.2 éœ€è¦æ—¶æ‰å£°æ˜ï¼Œå°½å¿«è¿›è¡Œåˆå§‹åŒ–"></a>4.8.2.2 éœ€è¦æ—¶æ‰å£°æ˜ï¼Œå°½å¿«è¿›è¡Œåˆå§‹åŒ–</h5><p>ä¸è¦åœ¨ä¸€ä¸ªä»£ç å—çš„å¼€å¤´æŠŠå±€éƒ¨å˜é‡ä¸€æ¬¡æ€§éƒ½å£°æ˜äº†(è¿™æ˜¯cè¯­è¨€çš„åšæ³•)ï¼Œè€Œæ˜¯åœ¨ç¬¬ä¸€æ¬¡éœ€è¦ä½¿ç”¨å®ƒæ—¶æ‰å£°æ˜ã€‚å±€éƒ¨å˜é‡åœ¨å£°æ˜æ—¶æœ€å¥½å°±è¿›è¡Œåˆå§‹åŒ–ï¼Œæˆ–è€…å£°æ˜åå°½å¿«è¿›è¡Œåˆå§‹åŒ–ã€‚</p><h4 id="4-8-3-æ•°ç»„"><a href="#4-8-3-æ•°ç»„" class="headerlink" title="4.8.3 æ•°ç»„"></a>4.8.3 æ•°ç»„</h4><h5 id="4-8-3-1-æ•°ç»„åˆå§‹åŒ–ï¼šå¯å†™æˆå—çŠ¶ç»“æ„"><a href="#4-8-3-1-æ•°ç»„åˆå§‹åŒ–ï¼šå¯å†™æˆå—çŠ¶ç»“æ„" class="headerlink" title="4.8.3.1 æ•°ç»„åˆå§‹åŒ–ï¼šå¯å†™æˆå—çŠ¶ç»“æ„"></a>4.8.3.1 æ•°ç»„åˆå§‹åŒ–ï¼šå¯å†™æˆå—çŠ¶ç»“æ„</h5><p>æ•°ç»„åˆå§‹åŒ–å¯ä»¥å†™æˆå—çŠ¶ç»“æ„ï¼Œä¾‹å¦‚ä»¥ä¸‹æ ¼å¼çš„å†™æ³•éƒ½æ˜¯å…è®¸çš„ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#123;</span>           <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#123;</span>  <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span>            <span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span>                       <span class="token number">1</span><span class="token punctuation">,</span>                        <span class="token number">2</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#123;</span>             <span class="token number">3</span><span class="token punctuation">,</span>  <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span>               <span class="token punctuation">&#125;</span>  <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">&#125;</span>                     <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span>                          <span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="4-8-3-2-éCé£æ ¼çš„æ•°ç»„å£°æ˜"><a href="#4-8-3-2-éCé£æ ¼çš„æ•°ç»„å£°æ˜" class="headerlink" title="4.8.3.2 éCé£æ ¼çš„æ•°ç»„å£°æ˜"></a>4.8.3.2 éCé£æ ¼çš„æ•°ç»„å£°æ˜</h5><p>ä¸­æ‹¬å·æ˜¯ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼š<code>String[] args</code>ï¼Œ è€Œé<code>String args[]</code>ã€‚</p><h4 id="4-8-4-switchè¯­å¥"><a href="#4-8-4-switchè¯­å¥" class="headerlink" title="4.8.4 switchè¯­å¥"></a>4.8.4 switchè¯­å¥</h4><p><strong>æœ¯è¯­è¯´æ˜</strong>ï¼š<code>switch</code>å—çš„å¤§æ‹¬å·å†…æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªè¯­å¥ç»„ã€‚æ¯ä¸ªè¯­å¥ç»„åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ª<code>switch</code>æ ‡ç­¾(<code>case FOO: </code>æˆ–<code>default:</code>)ï¼Œåé¢è·Ÿç€ä¸€æ¡æˆ–å¤šæ¡è¯­å¥ã€‚</p><h5 id="4-8-4-1-ç¼©è¿›"><a href="#4-8-4-1-ç¼©è¿›" class="headerlink" title="4.8.4.1 ç¼©è¿›"></a>4.8.4.1 ç¼©è¿›</h5><p>å’Œå…¶ä»–è¯­å¥å—ä¸€æ ·ï¼Œ<code>switch</code>å¤§æ‹¬å·ä¹‹åç¼©è¿›ä¸¤ä¸ªå­—ç¬¦ã€‚æ¯ä¸ª<code>switch</code>æ ‡ç­¾ä¹‹åï¼Œåé¢ç´§æ¥çš„éæ ‡ç­¾çš„æ–°è¡Œï¼ŒæŒ‰ç…§å¤§æ‹¬å·ç›¸åŒçš„å¤„ç†æ–¹å¼ç¼©è¿›ä¸¤ä¸ªå­—ç¬¦ã€‚åœ¨æ ‡ç­¾ç»“æŸåï¼Œæ¢å¤åˆ°ä¹‹å‰çš„ç¼©è¿›ï¼Œç±»ä¼¼å¤§æ‹¬å·ç»“æŸã€‚</p><h5 id="4-8-4-2-ç»§ç»­å‘ä¸‹æ‰§è¡Œçš„æ³¨é‡Š"><a href="#4-8-4-2-ç»§ç»­å‘ä¸‹æ‰§è¡Œçš„æ³¨é‡Š" class="headerlink" title="4.8.4.2 ç»§ç»­å‘ä¸‹æ‰§è¡Œçš„æ³¨é‡Š"></a>4.8.4.2 ç»§ç»­å‘ä¸‹æ‰§è¡Œçš„æ³¨é‡Š</h5><p>åœ¨ä¸€ä¸ª<code>switch</code>å—å†…ï¼Œæ¯ä¸ªè¯­å¥ç»„è¦ä¹ˆé€šè¿‡<code>break</code>ã€<code>continue</code>ã€<code>return</code>æˆ–<code>æŠ›å‡ºå¼‚å¸¸</code>æ¥ç»ˆæ­¢ï¼Œè¦ä¹ˆé€šè¿‡ä¸€æ¡æ³¨é‡Šæ¥è¯´æ˜ç¨‹åºå°†ç»§ç»­æ‰§è¡Œåˆ°ä¸‹ä¸€ä¸ªè¯­å¥ç»„ï¼Œä»»ä½•èƒ½è¡¨è¾¾è¿™ä¸ªæ„æ€çš„æ³¨é‡Šéƒ½æ˜¯å¯ä»¥çš„(å…¸å‹çš„æ˜¯ç”¨<code>// fall through</code>)ã€‚è¿™ä¸ªç‰¹æ®Šçš„æ³¨é‡Šå¹¶ä¸éœ€è¦åœ¨æœ€åä¸€ä¸ªè¯­å¥ç»„(ä¸€èˆ¬æ˜¯<code>default</code>)ä¸­å‡ºç°ã€‚ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">switch</span> <span class="token punctuation">(</span>input<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>    <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>        <span class="token function">prepareOneOrTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// fall through</span>    <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>        <span class="token function">handleOneTwoOrThree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token keyword">default</span><span class="token operator">:</span>        <span class="token function">handleLargeNumber</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>æ³¨æ„</strong>ï¼šåœ¨<code>case 1</code>ä¹‹åä¸éœ€è¦è¯¥æ³¨é‡Šï¼Œä»…åœ¨è¯­å¥ç»„çš„æœ«å°¾ã€‚</p></blockquote><h5 id="4-8-4-3-defaultæ ‡ç­¾éœ€è¦æ˜¾å¼å£°æ˜"><a href="#4-8-4-3-defaultæ ‡ç­¾éœ€è¦æ˜¾å¼å£°æ˜" class="headerlink" title="4.8.4.3 defaultæ ‡ç­¾éœ€è¦æ˜¾å¼å£°æ˜"></a>4.8.4.3 defaultæ ‡ç­¾éœ€è¦æ˜¾å¼å£°æ˜</h5><p>æ¯ä¸ª<code>switch</code>è¯­å¥ä¸­ï¼Œéƒ½éœ€è¦æ˜¾å¼å£°æ˜<code>default</code>æ ‡ç­¾ã€‚å³ä½¿æ²¡æœ‰ä»»ä½•ä»£ç ä¹Ÿéœ€è¦æ˜¾ç¤ºå£°æ˜ã€‚</p><blockquote><p><strong>æ³¨æ„</strong>ï¼šæšä¸¾ç±»å‹çš„<code>switch</code>è¯­å¥å¯ä»¥çœç•¥<code>default</code>è¯­å¥ç»„ï¼Œå¦‚æœå®ƒåŒ…å«è¦†ç›–è¯¥ç±»å‹çš„æ‰€æœ‰å¯èƒ½å€¼çš„æ˜¾å¼æƒ…å†µã€‚è¿™ä½¿å¾—IDEæˆ–å…¶ä»–é™æ€åˆ†æå·¥å…·èƒ½å¤Ÿåœ¨ä¸¢å¤±ä»»ä½•æƒ…å†µæ—¶å‘å‡ºè­¦å‘Šã€‚</p></blockquote><h4 id="4-8-5-æ³¨è§£"><a href="#4-8-5-æ³¨è§£" class="headerlink" title="4.8.5 æ³¨è§£"></a>4.8.5 æ³¨è§£</h4><p>æ³¨è§£åº”ç”¨åˆ°ç±»ã€æ–¹æ³•æˆ–è€…æ„é€ æ–¹æ³•æ—¶ï¼Œåº”ç´§æ¥<code>Javadoc</code>ä¹‹åã€‚æ¯ä¸€è¡Œåªæœ‰ä¸€ä¸ªæ³¨è§£ã€‚æ³¨è§£æ‰€åœ¨è¡Œä¸å—åˆ—é•¿åº¦é™åˆ¶ï¼Œä¹Ÿä¸éœ€è¦å¢åŠ ç¼©è¿›ã€‚ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token annotation punctuation">@Nullable</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getNameIfPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>ä¾‹å¤–</strong>ï¼šå¦‚æœæ³¨è§£åªæœ‰ä¸€ä¸ªï¼Œå¹¶ä¸”ä¸å¸¦å‚æ•°ã€‚åˆ™å®ƒå¯ä»¥å’Œç±»æˆ–æ–¹æ³•åæ”¾åœ¨åŒä¸€è¡Œã€‚ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ³¨è§£åº”ç”¨åˆ°æˆå‘˜å˜é‡æ—¶ï¼Œä¹Ÿæ˜¯ç´§æ¥<code>Javadoc</code>ä¹‹åã€‚ä¸åŒçš„æ˜¯ï¼Œå¤šä¸ªæ³¨è§£å¯ä»¥æ”¾åœ¨åŒä¸€è¡Œã€‚ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Partial</span> <span class="token annotation punctuation">@Mock</span> <span class="token class-name">DataLoader</span> loader<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¯¹äºå‚æ•°æˆ–è€…å±€éƒ¨å˜é‡ä½¿ç”¨æ³¨è§£çš„æƒ…å†µï¼Œæ²¡æœ‰ç‰¹å®šçš„è§„èŒƒã€‚</p><h4 id="4-8-6-æ³¨é‡Š"><a href="#4-8-6-æ³¨é‡Š" class="headerlink" title="4.8.6 æ³¨é‡Š"></a>4.8.6 æ³¨é‡Š</h4><h5 id="4-8-6-1-å—æ³¨é‡Šé£æ ¼"><a href="#4-8-6-1-å—æ³¨é‡Šé£æ ¼" class="headerlink" title="4.8.6.1 å—æ³¨é‡Šé£æ ¼"></a>4.8.6.1 å—æ³¨é‡Šé£æ ¼</h5><p>æ³¨é‡Šçš„ç¼©è¿›ä¸å®ƒæ‰€æ³¨é‡Šçš„ä»£ç ç¼©è¿›ç›¸åŒã€‚å¯ä»¥é‡‡ç”¨<code>/* */</code>è¿›è¡Œæ³¨é‡Šï¼Œä¹Ÿå¯ä»¥ç”¨<code>//</code>è¿›è¡Œæ³¨é‡Šã€‚å½“ä½¿ç”¨<code>/* */</code>è¿›è¡Œå¤šè¡Œæ³¨é‡Šæ—¶ï¼Œæ¯ä¸€è¡Œéƒ½åº”è¯¥ä»¥<code>*</code>å¼€å§‹ï¼Œå¹¶ä¸”<code>*</code>åº”è¯¥ä¸Šä¸‹å¯¹é½ã€‚</p><p>ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/* * This is * okay. */</span><span class="token comment">// And so</span><span class="token comment">// is this.</span><span class="token comment">/* Or you can * even do this. */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>æ³¨æ„</strong>ï¼šå¤šè¡Œæ³¨é‡Šæ—¶ï¼Œå¦‚æœä½ å¸Œæœ›é›†æˆå¼€å‘ç¯å¢ƒèƒ½è‡ªåŠ¨å¯¹é½æ³¨é‡Šï¼Œä½ åº”è¯¥ä½¿ç”¨<code>/* */</code>ï¼Œ<code>//</code>ä¸€èˆ¬ä¸ä¼šè‡ªåŠ¨å¯¹é½ã€‚</p></blockquote><h4 id="4-8-7-ä¿®é¥°ç¬¦"><a href="#4-8-7-ä¿®é¥°ç¬¦" class="headerlink" title="4.8.7 ä¿®é¥°ç¬¦"></a>4.8.7 ä¿®é¥°ç¬¦</h4><p>ç±»å’Œæˆå‘˜å˜é‡çš„ä¿®é¥°ç¬¦ï¼ŒæŒ‰<code>Java Lauguage Specification</code>ä¸­ä»‹ç»çš„å…ˆåé¡ºåºæ’åºã€‚å…·ä½“æ˜¯ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">protected</span> <span class="token keyword">private</span> <span class="token keyword">abstract</span> <span class="token keyword">default</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">transient</span> <span class="token keyword">volatile</span> <span class="token keyword">synchronized</span> <span class="token keyword">native</span> <span class="token keyword">strictfp</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="4-8-8-æ•°å­—å­—é¢é‡"><a href="#4-8-8-æ•°å­—å­—é¢é‡" class="headerlink" title="4.8.8 æ•°å­—å­—é¢é‡"></a>4.8.8 æ•°å­—å­—é¢é‡</h4><p>é•¿æ•´å‹çš„æ•°å­—å­—é¢é‡ä½¿ç”¨å¤§å†™çš„<code>L</code>ä½œä¸ºåç¼€ï¼Œä¸å¾—ä½¿ç”¨å°å†™ï¼ˆä»¥å…ä¸æ•°å­—1æ··æ·†ï¼‰ã€‚ä¾‹å¦‚ï¼šä½¿ç”¨<code>3000000000L</code>ï¼Œè€Œä¸æ˜¯<code>3000000000l</code>ã€‚</p><h2 id="5-å‘½åçº¦å®š"><a href="#5-å‘½åçº¦å®š" class="headerlink" title="5 å‘½åçº¦å®š"></a>5 å‘½åçº¦å®š</h2><h3 id="5-1-å¯¹æ‰€æœ‰æ ‡è¯†ç¬¦éƒ½é€šç”¨çš„è§„åˆ™"><a href="#5-1-å¯¹æ‰€æœ‰æ ‡è¯†ç¬¦éƒ½é€šç”¨çš„è§„åˆ™" class="headerlink" title="5.1 å¯¹æ‰€æœ‰æ ‡è¯†ç¬¦éƒ½é€šç”¨çš„è§„åˆ™"></a>5.1 å¯¹æ‰€æœ‰æ ‡è¯†ç¬¦éƒ½é€šç”¨çš„è§„åˆ™</h3><p>æ ‡è¯†ç¬¦åªèƒ½ä½¿ç”¨<code>ASCII</code>å­—æ¯å’Œæ•°å­—ï¼Œå› æ­¤æ¯ä¸ªæœ‰æ•ˆçš„æ ‡è¯†ç¬¦åç§°éƒ½èƒ½åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼<code>\w+</code>ã€‚</p><p>åœ¨Googleå…¶å®ƒç¼–ç¨‹è¯­è¨€é£æ ¼ä¸­ä½¿ç”¨çš„ç‰¹æ®Šå‰ç¼€æˆ–åç¼€ï¼Œå¦‚<code>name_</code>, <code>mName</code>, <code>s_name</code>å’Œ<code>kName</code>ï¼Œåœ¨Javaç¼–ç¨‹é£æ ¼ä¸­éƒ½ä¸å†ä½¿ç”¨ã€‚</p><h3 id="5-2-æ ‡è¯†ç¬¦ç±»å‹çš„è§„åˆ™"><a href="#5-2-æ ‡è¯†ç¬¦ç±»å‹çš„è§„åˆ™" class="headerlink" title="5.2 æ ‡è¯†ç¬¦ç±»å‹çš„è§„åˆ™"></a>5.2 æ ‡è¯†ç¬¦ç±»å‹çš„è§„åˆ™</h3><h4 id="5-2-1-åŒ…å"><a href="#5-2-1-åŒ…å" class="headerlink" title="5.2.1 åŒ…å"></a>5.2.1 åŒ…å</h4><p>åŒ…åå…¨éƒ¨å°å†™ï¼Œè¿ç»­çš„å•è¯åªæ˜¯ç®€å•åœ°è¿æ¥èµ·æ¥ï¼Œä¸ä½¿ç”¨ä¸‹åˆ’çº¿ã€‚ä¾‹å¦‚ï¼šä½¿ç”¨<code>com.example.deepspace</code>ï¼Œè€Œä¸æ˜¯<code>com.example.deepSpace</code>æˆ–è€…<code>com.example.deep_space</code>ã€‚</p><h4 id="5-2-2-ç±»å"><a href="#5-2-2-ç±»å" class="headerlink" title="5.2.2 ç±»å"></a>5.2.2 ç±»å</h4><p>ç±»åéƒ½ä»¥<code>UpperCamelCase</code>é£æ ¼ç¼–å†™ã€‚</p><p>ç±»åé€šå¸¸æ˜¯åè¯æˆ–åè¯çŸ­è¯­ã€‚ä¾‹å¦‚ï¼š<code>Character</code>æˆ–è€…<code>ImmutableList</code>ã€‚æ¥å£åç§°ä¹Ÿå¯ä»¥æ˜¯åè¯æˆ–åè¯çŸ­è¯­ï¼ˆä¾‹å¦‚ï¼š<code>List</code>ï¼‰ï¼Œä½†æœ‰æ—¶å¯èƒ½æ˜¯å½¢å®¹è¯æˆ–å½¢å®¹è¯çŸ­è¯­ï¼ˆä¾‹å¦‚ï¼š<code>Readable</code>ï¼‰ã€‚ç°åœ¨è¿˜æ²¡æœ‰ç‰¹å®šçš„è§„åˆ™æˆ–è¡Œä¹‹æœ‰æ•ˆçš„çº¦å®šæ¥å‘½åæ³¨è§£ç±»å‹ã€‚</p><p>æµ‹è¯•ç±»çš„å‘½åä»¥å®ƒè¦æµ‹è¯•çš„ç±»çš„åç§°å¼€å§‹ï¼Œä»¥<code>Test</code>ç»“æŸã€‚ä¾‹å¦‚ï¼š<code>HashTest</code>æˆ–<code>HashIntegrationTest</code>ã€‚</p><h4 id="5-2-3-æ–¹æ³•å"><a href="#5-2-3-æ–¹æ³•å" class="headerlink" title="5.2.3 æ–¹æ³•å"></a>5.2.3 æ–¹æ³•å</h4><p>æ–¹æ³•åéƒ½ä»¥<code>lowerCamelCase</code>é£æ ¼ç¼–å†™ã€‚</p><p>æ–¹æ³•åé€šå¸¸æ˜¯åŠ¨è¯æˆ–åŠ¨è¯çŸ­è¯­ã€‚ä¾‹å¦‚ï¼š<code>sendMessage</code>æˆ–è€…<code>stop</code>ã€‚</p><p>ä¸‹åˆ’çº¿å¯èƒ½å‡ºç°åœ¨JUnitæµ‹è¯•æ–¹æ³•åç§°ä¸­ç”¨ä»¥åˆ†éš”åç§°çš„é€»è¾‘ç»„ä»¶ã€‚ä¸€ä¸ªå…¸å‹çš„æ¨¡å¼æ˜¯ï¼š<code>test&lt;MethodUnderTest&gt;_&lt;state&gt;</code>ï¼Œä¾‹å¦‚ï¼š<code>testPop_emptyStack</code>ã€‚ å¹¶ä¸å­˜åœ¨å”¯ä¸€æ­£ç¡®çš„æ–¹å¼æ¥å‘½åæµ‹è¯•æ–¹æ³•ã€‚</p><h4 id="5-2-4-å¸¸é‡å"><a href="#5-2-4-å¸¸é‡å" class="headerlink" title="5.2.4 å¸¸é‡å"></a>5.2.4 å¸¸é‡å</h4><p>å¸¸é‡åå‘½åæ¨¡å¼ä¸º<code>CONSTANT_CASE</code>ï¼Œå…¨éƒ¨å­—æ¯å¤§å†™ï¼Œç”¨ä¸‹åˆ’çº¿åˆ†éš”å•è¯ã€‚é‚£åˆ°åº•ä»€ä¹ˆç®—æ˜¯ä¸€ä¸ªå¸¸é‡å‘¢ï¼Ÿ</p><p>æ¯ä¸ªå¸¸é‡éƒ½æ˜¯ä¸€ä¸ªé™æ€<code>final</code>å­—æ®µï¼Œå…¶å†…å®¹æ˜¯ä¸å¯å˜çš„ï¼Œä¸”æ²¡æœ‰å¯æ£€æµ‹çš„å‰¯ä½œç”¨ã€‚è¿™åŒ…æ‹¬åŸå§‹ç±»å‹ã€å­—ç¬¦ä¸²ã€ä¸å¯å˜ç±»å‹å’Œä¸å¯å˜ç±»å‹çš„ä¸å¯å˜é›†åˆã€‚å¦‚æœä»»ä½•ä¸€ä¸ªå®ä¾‹çš„è§‚æµ‹çŠ¶æ€æ˜¯å¯å˜çš„ï¼Œåˆ™å®ƒè‚¯å®šä¸ä¼šæ˜¯ä¸€ä¸ªå¸¸é‡ã€‚åªæ˜¯æ°¸è¿œä¸æ‰“ç®—æ”¹å˜å¯¹è±¡ä¹Ÿæ˜¯ä¸å¤Ÿçš„ã€‚ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// å¸¸é‡</span><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> NUMBER <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">ImmutableList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> NAMES <span class="token operator">=</span> <span class="token class-name">ImmutableList</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"Ed"</span><span class="token punctuation">,</span> <span class="token string">"Ann"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">ImmutableMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span> AGES <span class="token operator">=</span> <span class="token class-name">ImmutableMap</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"Ed"</span><span class="token punctuation">,</span> <span class="token number">35</span><span class="token punctuation">,</span> <span class="token string">"Ann"</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Joiner</span> COMMA_JOINER <span class="token operator">=</span> <span class="token class-name">Joiner</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å› ä¸ºJoineræ˜¯ä¸å¯å˜çš„</span><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">SomeMutableType</span><span class="token punctuation">[</span><span class="token punctuation">]</span> EMPTY_ARRAY <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">enum</span> <span class="token class-name">SomeEnum</span> <span class="token punctuation">&#123;</span> ENUM_CONSTANT <span class="token punctuation">&#125;</span><span class="token comment">// éå¸¸é‡</span><span class="token keyword">static</span> <span class="token class-name">String</span> nonFinal <span class="token operator">=</span> <span class="token string">"non-final"</span><span class="token punctuation">;</span><span class="token keyword">final</span> <span class="token class-name">String</span> nonStatic <span class="token operator">=</span> <span class="token string">"non-static"</span><span class="token punctuation">;</span><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> mutableCollection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">ImmutableSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SomeMutableType</span><span class="token punctuation">></span></span> mutableElements <span class="token operator">=</span> <span class="token class-name">ImmutableSet</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>mutable<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">ImmutableMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">SomeMutableType</span><span class="token punctuation">></span></span> mutableValues <span class="token operator">=</span>    <span class="token class-name">ImmutableMap</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"Ed"</span><span class="token punctuation">,</span> mutableInstance<span class="token punctuation">,</span> <span class="token string">"Ann"</span><span class="token punctuation">,</span> mutableInstance2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">MyClass</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nonEmptyArray <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"these"</span><span class="token punctuation">,</span> <span class="token string">"can"</span><span class="token punctuation">,</span> <span class="token string">"change"</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™äº›å¸¸é‡çš„åå­—é€šå¸¸æ˜¯åè¯æˆ–åè¯çŸ­è¯­ã€‚</p><h4 id="5-2-5-éå¸¸é‡å­—æ®µå"><a href="#5-2-5-éå¸¸é‡å­—æ®µå" class="headerlink" title="5.2.5 éå¸¸é‡å­—æ®µå"></a>5.2.5 éå¸¸é‡å­—æ®µå</h4><p>éå¸¸é‡å­—æ®µåä»¥<code>lowerCamelCase</code>é£æ ¼ç¼–å†™ã€‚</p><p>è¿™äº›åå­—é€šå¸¸æ˜¯åè¯æˆ–åè¯çŸ­è¯­ã€‚ä¾‹å¦‚ï¼š<code>computedValues</code>æˆ–è€…<code>index</code>ã€‚</p><h4 id="5-2-6-å‚æ•°å"><a href="#5-2-6-å‚æ•°å" class="headerlink" title="5.2.6 å‚æ•°å"></a>5.2.6 å‚æ•°å</h4><p>å‚æ•°åä»¥<code>lowerCamelCase</code>é£æ ¼ç¼–å†™ã€‚</p><p>å‚æ•°åº”è¯¥é¿å…ç”¨å•ä¸ªå­—ç¬¦å‘½åã€‚</p><h4 id="5-2-7-å±€éƒ¨å˜é‡å"><a href="#5-2-7-å±€éƒ¨å˜é‡å" class="headerlink" title="5.2.7 å±€éƒ¨å˜é‡å"></a>5.2.7 å±€éƒ¨å˜é‡å</h4><p>å±€éƒ¨å˜é‡åä»¥<code>lowerCamelCase</code>é£æ ¼ç¼–å†™ã€‚</p><p>å³ä½¿å±€éƒ¨å˜é‡æ˜¯<code>final</code>å’Œ<code>ä¸å¯æ”¹å˜</code>çš„ï¼Œä¹Ÿä¸åº”è¯¥æŠŠå®ƒç¤ºä¸ºå¸¸é‡ï¼Œå½“ç„¶ä¹Ÿå°±ä¸èƒ½ç”¨å¸¸é‡çš„è§„åˆ™å»å‘½åå®ƒã€‚</p><h4 id="5-2-8-ç±»å‹å˜é‡å"><a href="#5-2-8-ç±»å‹å˜é‡å" class="headerlink" title="5.2.8 ç±»å‹å˜é‡å"></a>5.2.8 ç±»å‹å˜é‡å</h4><p>ç±»å‹å˜é‡å¯ç”¨ä»¥ä¸‹ä¸¤ç§é£æ ¼ä¹‹ä¸€è¿›è¡Œå‘½åï¼š</p><ul><li>å•ä¸ªçš„å¤§å†™å­—æ¯ï¼Œåé¢å¯ä»¥è§†å…·ä½“æƒ…å†µè·Ÿä¸€ä¸ªæ•°å­—(å¦‚ï¼š<code>E</code>, <code>T</code>, <code>X</code>, <code>T2</code>)ã€‚</li><li>ä»¥ç±»å‘½åæ–¹å¼(5.2.2èŠ‚)ï¼Œåé¢åŠ ä¸ªå¤§å†™çš„T(å¦‚ï¼š<code>RequestT</code>, <code>FooBarT</code>)ã€‚</li></ul><h3 id="5-3-é©¼å³°å¼å‘½åæ³•-CamelCase"><a href="#5-3-é©¼å³°å¼å‘½åæ³•-CamelCase" class="headerlink" title="5.3 é©¼å³°å¼å‘½åæ³•(CamelCase)"></a>5.3 é©¼å³°å¼å‘½åæ³•(CamelCase)</h3><p><strong>é©¼å³°å¼å‘½åæ³•</strong>åˆ†å¤§é©¼å³°å¼å‘½åæ³•(<code>UpperCamelCase</code>)å’Œå°é©¼å³°å¼å‘½åæ³•(<code>lowerCamelCase</code>)ã€‚æœ‰æ—¶ï¼Œæˆ‘ä»¬æœ‰ä¸åªä¸€ç§åˆç†çš„æ–¹å¼å°†ä¸€ä¸ªè‹±è¯­è¯ç»„è½¬æ¢æˆé©¼å³°å½¢å¼ï¼Œå¦‚ç¼©ç•¥è¯­æˆ–ä¸å¯»å¸¸çš„ç»“æ„(ä¾‹å¦‚ï¼š<code>IPv6</code>æˆ–<code>iOS</code>)ã€‚GoogleæŒ‡å®šäº†ä»¥ä¸‹çš„è½¬æ¢æ–¹æ¡ˆã€‚</p><p>åå­—ä»æ•£æ–‡å½¢å¼(prose form)å¼€å§‹:</p><ul><li>æŠŠçŸ­è¯­è½¬æ¢ä¸ºçº¯<code>ASCII</code>ç ï¼Œå¹¶ä¸”ç§»é™¤ä»»ä½•å•å¼•å·ã€‚ä¾‹å¦‚ï¼š<code>MÃ¼llerâ€™s algorithm</code>å°†å˜æˆ<code>Muellers algorithm</code>ã€‚</li><li>æŠŠè¿™ä¸ªç»“æœåˆ‡åˆ†æˆå•è¯ï¼Œåœ¨ç©ºæ ¼æˆ–å…¶å®ƒæ ‡ç‚¹ç¬¦å·(é€šå¸¸æ˜¯è¿å­—ç¬¦)å¤„åˆ†å‰²å¼€ã€‚<ul><li><strong>æ¨è</strong>ï¼šå¦‚æœæŸä¸ªå•è¯å·²ç»æœ‰äº†å¸¸ç”¨çš„é©¼å³°è¡¨ç¤ºå½¢å¼ï¼ŒæŒ‰å®ƒçš„ç»„æˆå°†å®ƒåˆ†å‰²å¼€(å¦‚<code>AdWords</code>å°†åˆ†å‰²æˆ<code>ad words</code>)ã€‚ </li><li>éœ€è¦æ³¨æ„çš„æ˜¯iOSå¹¶ä¸æ˜¯ä¸€ä¸ªçœŸæ­£çš„é©¼å³°è¡¨ç¤ºå½¢å¼ï¼Œå› æ­¤è¯¥æ¨èå¯¹å®ƒå¹¶ä¸é€‚ç”¨ã€‚</li></ul></li><li>ç°åœ¨å°†æ‰€æœ‰å­—æ¯éƒ½å°å†™(åŒ…æ‹¬ç¼©å†™)ï¼Œç„¶åå°†å•è¯çš„ç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™ï¼š<ul><li>æ¯ä¸ªå•è¯çš„ç¬¬ä¸€ä¸ªå­—æ¯éƒ½å¤§å†™ï¼Œæ¥å¾—åˆ°å¤§é©¼å³°å¼å‘½åã€‚</li><li>é™¤äº†ç¬¬ä¸€ä¸ªå•è¯ï¼Œæ¯ä¸ªå•è¯çš„ç¬¬ä¸€ä¸ªå­—æ¯éƒ½å¤§å†™ï¼Œæ¥å¾—åˆ°å°é©¼å³°å¼å‘½åã€‚</li></ul></li><li>æœ€åå°†æ‰€æœ‰çš„å•è¯è¿æ¥èµ·æ¥å¾—åˆ°ä¸€ä¸ªæ ‡è¯†ç¬¦ã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><table><thead><tr><th>æ•£æ–‡å½¢å¼</th><th>æ­£ç¡®</th><th>ä¸æ­£ç¡®</th></tr></thead><tbody><tr><td>â€œXML HTTP requestâ€</td><td>XmlHttpRequest</td><td>XMLHTTPRequest</td></tr><tr><td>â€œnew customer IDâ€</td><td>newCustomerId</td><td>newCustomerID</td></tr><tr><td>â€œinner stopwatchâ€</td><td>innerStopwatch</td><td>innerStopWatch</td></tr><tr><td>â€œsupports IPv6 on iOS?â€</td><td>supportsIpv6OnIos</td><td>supportsIPv6OnIOS</td></tr><tr><td>â€œYouTube importerâ€</td><td>YouTubeImporter YoutubeImporter^</td><td>æ— </td></tr></tbody></table><p>åŠ <code>^</code>å·å¤„è¡¨ç¤ºå¯ä»¥ï¼Œä½†ä¸æ¨èã€‚</p><blockquote><p><strong>æ³¨æ„</strong>ï¼šåœ¨è‹±è¯­ä¸­ï¼ŒæŸäº›å¸¦æœ‰è¿å­—ç¬¦çš„å•è¯å½¢å¼ä¸å”¯ä¸€ã€‚ä¾‹å¦‚ï¼š<code>nonempty</code>å’Œ<code>non-empty</code>éƒ½æ˜¯æ­£ç¡®çš„ï¼Œå› æ­¤æ–¹æ³•å<code>checkNonempty</code>å’Œ<code>checkNonEmpty</code>ä¹Ÿéƒ½æ˜¯æ­£ç¡®çš„ã€‚</p></blockquote><h2 id="6-ç¼–ç¨‹å®è·µ"><a href="#6-ç¼–ç¨‹å®è·µ" class="headerlink" title="6 ç¼–ç¨‹å®è·µ"></a>6 ç¼–ç¨‹å®è·µ</h2><h3 id="6-1-Overrideï¼šæ€»æ˜¯ä½¿ç”¨"><a href="#6-1-Overrideï¼šæ€»æ˜¯ä½¿ç”¨" class="headerlink" title="6.1 @Overrideï¼šæ€»æ˜¯ä½¿ç”¨"></a>6.1 <code>@Override</code>ï¼šæ€»æ˜¯ä½¿ç”¨</h3><p>åªè¦æ˜¯åˆæ³•çš„æ–¹æ³•ï¼Œå°±æŠŠ<code>@Override</code>æ³¨è§£åŠ ä¸Šã€‚è¿™åŒ…æ‹¬è¦†ç›–è¶…ç±»æ–¹æ³•çš„ç±»æ–¹æ³•ï¼Œå®ç°æ¥å£æ–¹æ³•çš„ç±»æ–¹æ³•ã€‚</p><p><strong>ä¾‹å¤–</strong>ï¼šå½“çˆ¶æ–¹æ³•ä¸º<code>@Deprecated</code>æ—¶ï¼Œå¯ä»¥çœç•¥<code>@Override</code>ã€‚</p><h3 id="6-2-æ•è·çš„å¼‚å¸¸ï¼šä¸èƒ½å¿½è§†"><a href="#6-2-æ•è·çš„å¼‚å¸¸ï¼šä¸èƒ½å¿½è§†" class="headerlink" title="6.2 æ•è·çš„å¼‚å¸¸ï¼šä¸èƒ½å¿½è§†"></a>6.2 æ•è·çš„å¼‚å¸¸ï¼šä¸èƒ½å¿½è§†</h3><p>é™¤äº†ä¸‹é¢çš„ä¾‹å­ï¼Œå¯¹æ•è·çš„å¼‚å¸¸ä¸åšä»»ä½•å“åº”æ˜¯æå°‘çš„ã€‚(å…¸å‹çš„å“åº”æ–¹å¼æ˜¯æ‰“å°æ—¥å¿—ï¼Œæˆ–è€…å¦‚æœå®ƒè¢«è®¤ä¸ºæ˜¯ä¸å¯èƒ½çš„ï¼Œåˆ™æŠŠå®ƒå½“ä½œä¸€ä¸ª<code>AssertionError</code>é‡æ–°æŠ›å‡ºã€‚)</p><p>å¦‚æœå®ƒç¡®å®æ˜¯ä¸éœ€è¦åœ¨<code>catch</code>å—ä¸­åšä»»ä½•å“åº”ï¼Œéœ€è¦åšæ³¨é‡ŠåŠ ä»¥è¯´æ˜(å¦‚ä¸‹é¢çš„ä¾‹å­)ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">try</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">handleNumericResponse</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NumberFormatException</span> ok<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// å®ƒä¸æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œä¸è¿‡æ²¡å…³ç³»ï¼Œç»§ç»­</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token function">handleTextResponse</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¾‹å¤–ï¼šåœ¨æµ‹è¯•ä¸­ï¼Œå¦‚æœä¸€ä¸ªæ•è·çš„å¼‚å¸¸è¢«å‘½åä¸º<code>expected</code>ï¼Œåˆ™å®ƒå¯ä»¥è¢«ä¸åŠ æ³¨é‡Šåœ°å¿½ç•¥ã€‚ä¸‹é¢æ˜¯ä¸€ç§éå¸¸å¸¸è§çš„æƒ…å½¢ï¼Œç”¨ä»¥ç¡®ä¿æ‰€æµ‹è¯•çš„æ–¹æ³•ä¼šæŠ›å‡ºä¸€ä¸ªæœŸæœ›ä¸­çš„å¼‚å¸¸ï¼Œ å› æ­¤åœ¨è¿™é‡Œå°±æ²¡æœ‰å¿…è¦åŠ æ³¨é‡Šã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">try</span> <span class="token punctuation">&#123;</span>    emptyStack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NoSuchElementException</span> expected<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>6.3 é™æ€æˆå‘˜ï¼šä½¿ç”¨ç±»æ¥è°ƒç”¨</p><p>ä½¿ç”¨ç±»åè°ƒç”¨é™æ€çš„ç±»æˆå‘˜ï¼Œè€Œä¸æ˜¯å…·ä½“æŸä¸ªå¯¹è±¡æˆ–è¡¨è¾¾å¼ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Foo</span> aFoo <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span><span class="token class-name">Foo</span><span class="token punctuation">.</span><span class="token function">aStaticMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¥½</span>aFoo<span class="token punctuation">.</span><span class="token function">aStaticMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç³Ÿ</span><span class="token function">somethingThatYieldsAFoo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">aStaticMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¾ˆç³Ÿ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>6.4 <code>Finalizers</code>: ç¦ç”¨</p><p>æå°‘ä¼šå»é‡è½½<code>Object.finalize</code>ã€‚</p><blockquote><p><strong>æ³¨æ„</strong>ï¼šä¸è¦ä½¿ç”¨<code>finalize</code>ã€‚å¦‚æœä½ éè¦ä½¿ç”¨å®ƒï¼Œè¯·å…ˆä»”ç»†é˜…è¯»å’Œç†è§£<code>Effective Javaç¬¬7æ¡æ¬¾</code>ï¼šâ€œAvoid Finalizersâ€ï¼Œç„¶åä¸è¦ä½¿ç”¨å®ƒã€‚</p></blockquote><h2 id="7-Javadoc"><a href="#7-Javadoc" class="headerlink" title="7 Javadoc"></a>7 Javadoc</h2><h3 id="7-1-æ ¼å¼"><a href="#7-1-æ ¼å¼" class="headerlink" title="7.1 æ ¼å¼"></a>7.1 æ ¼å¼</h3><h4 id="7-1-1-ä¸€èˆ¬å½¢å¼"><a href="#7-1-1-ä¸€èˆ¬å½¢å¼" class="headerlink" title="7.1.1 ä¸€èˆ¬å½¢å¼"></a>7.1.1 ä¸€èˆ¬å½¢å¼</h4><p><code>Javadoc</code>å—çš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * Multiple lines of Javadoc text are written here, * wrapped normally... */</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token class-name">String</span> p1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ–è€…æ˜¯ä»¥ä¸‹å•è¡Œå½¢å¼ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** An especially short bit of Javadoc. */</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åŸºæœ¬æ ¼å¼æ€»æ˜¯å¯ä»¥æ¥å—çš„ã€‚å½“æ•´ä¸ª<code>Javadoc</code>å—èƒ½å®¹çº³äºä¸€è¡Œæ—¶(ä¸”æ²¡æœ‰æ ‡è®°<code>@XXX</code>)ï¼Œå°±å¯ä»¥ä½¿ç”¨å•è¡Œå½¢å¼ã€‚</p><h4 id="7-1-2-æ®µè½"><a href="#7-1-2-æ®µè½" class="headerlink" title="7.1.2 æ®µè½"></a>7.1.2 æ®µè½</h4><p>ç©ºè¡Œ(åªåŒ…å«æœ€å·¦ä¾§æ˜Ÿå·çš„è¡Œ)ä¼šå‡ºç°åœ¨æ®µè½ä¹‹é—´å’Œ<code>Javadoc</code>æ ‡è®°(<code>@XXX</code>)ä¹‹å‰(å¦‚æœæœ‰çš„è¯)ã€‚ é™¤äº†ç¬¬ä¸€ä¸ªæ®µè½ï¼Œæ¯ä¸ªæ®µè½ç¬¬ä¸€ä¸ªå•è¯å‰éƒ½æœ‰æ ‡ç­¾<code>&lt;p&gt;</code>ï¼Œå¹¶ä¸”å®ƒå’Œç¬¬ä¸€ä¸ªå•è¯é—´æ²¡æœ‰ç©ºæ ¼ã€‚</p><h4 id="7-1-3-Javadocæ ‡è®°"><a href="#7-1-3-Javadocæ ‡è®°" class="headerlink" title="7.1.3 Javadocæ ‡è®°"></a>7.1.3 Javadocæ ‡è®°</h4><p>æ ‡å‡†çš„<code>Javadoc</code>æ ‡è®°æŒ‰ä»¥ä¸‹é¡ºåºå‡ºç°ï¼š<code>@param</code>, <code>@return</code>, <code>@throws</code>, <code>@deprecated</code>, å‰é¢è¿™4ç§æ ‡è®°å¦‚æœå‡ºç°ï¼Œæè¿°éƒ½ä¸èƒ½ä¸ºç©ºã€‚ å½“æè¿°æ— æ³•åœ¨ä¸€è¡Œä¸­å®¹çº³ï¼Œè¿ç»­è¡Œéœ€è¦è‡³å°‘å†ç¼©è¿›<code>4</code>ä¸ªç©ºæ ¼(<strong>æ³¨</strong>ï¼šå¦‚æœä½ çš„ç¼©è¿›ç»Ÿä¸€é‡‡ç”¨é‡‡ç”¨<code>4</code>ä¸ªç©ºæ ¼ï¼Œé‚£ä¹ˆè¿™é‡Œå°±åº”è¯¥æ˜¯<code>8</code>ä¸ªç©ºæ ¼)ã€‚</p><h4 id="7-2-æ‘˜è¦ç‰‡æ®µ"><a href="#7-2-æ‘˜è¦ç‰‡æ®µ" class="headerlink" title="7.2 æ‘˜è¦ç‰‡æ®µ"></a>7.2 æ‘˜è¦ç‰‡æ®µ</h4><p>æ¯ä¸ªç±»æˆ–æˆå‘˜çš„<code>Javadoc</code>ä»¥ä¸€ä¸ªç®€çŸ­çš„æ‘˜è¦ç‰‡æ®µå¼€å§‹ã€‚è¿™ä¸ªç‰‡æ®µæ˜¯éå¸¸é‡è¦çš„ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯å”¯ä¸€å‡ºç°çš„æ–‡æœ¬ï¼Œæ¯”å¦‚åœ¨ç±»å’Œæ–¹æ³•ç´¢å¼•ä¸­ã€‚</p><p>è¿™åªæ˜¯ä¸€ä¸ªå°ç‰‡æ®µï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªåè¯çŸ­è¯­æˆ–åŠ¨è¯çŸ­è¯­ï¼Œä½†ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¥å­ã€‚å®ƒä¸ä¼šä»¥<code>A &#123;@code Foo&#125; is a...</code>æˆ–è€…<code>This method returns...</code>å¼€å¤´, å®ƒä¹Ÿä¸ä¼šæ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¥ˆä½¿å¥ï¼Œå¦‚<code>Save the record.</code>ã€‚ç„¶è€Œï¼Œç”±äºå¼€å¤´å¤§å†™åŠè¢«åŠ äº†æ ‡ç‚¹ï¼Œå®ƒçœ‹èµ·æ¥å°±åƒæ˜¯ä¸ªå®Œæ•´çš„å¥å­ã€‚</p><blockquote><p><strong>æ³¨æ„</strong>ï¼šä¸€ä¸ªå¸¸è§çš„é”™è¯¯æ˜¯æŠŠç®€å•çš„Javadocå†™æˆ<code>/** @return the customer ID */</code>ï¼Œè¿™æ˜¯ä¸æ­£ç¡®çš„ã€‚å®ƒåº”è¯¥å†™æˆ<code>/** Returns the customer ID. */</code>ã€‚</p></blockquote><h3 id="7-3-åœ¨å“ªé‡Œä½¿ç”¨Javadoc"><a href="#7-3-åœ¨å“ªé‡Œä½¿ç”¨Javadoc" class="headerlink" title="7.3 åœ¨å“ªé‡Œä½¿ç”¨Javadoc"></a>7.3 åœ¨å“ªé‡Œä½¿ç”¨Javadoc</h3><p>è‡³å°‘åœ¨æ¯ä¸ª<code>public</code>ç±»åŠå®ƒçš„æ¯ä¸ª<code>public</code>å’Œ<code>protected</code>æˆå‘˜å¤„ä½¿ç”¨<code>Javadoc</code>ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›ä¾‹å¤–ï¼š</p><h4 id="7-3-1-ä¾‹å¤–ï¼šä¸è¨€è‡ªæ˜çš„æ–¹æ³•"><a href="#7-3-1-ä¾‹å¤–ï¼šä¸è¨€è‡ªæ˜çš„æ–¹æ³•" class="headerlink" title="7.3.1 ä¾‹å¤–ï¼šä¸è¨€è‡ªæ˜çš„æ–¹æ³•"></a>7.3.1 ä¾‹å¤–ï¼šä¸è¨€è‡ªæ˜çš„æ–¹æ³•</h4><p>å¯¹äºç®€å•æ˜æ˜¾çš„æ–¹æ³•å¦‚<code>getFoo</code>ï¼Œ<code>Javadoc</code>æ˜¯å¯é€‰çš„(å¯ä»¥ä¸å†™)ã€‚è¿™ç§æƒ…å†µä¸‹é™¤äº†å†™<code>Returns the foo</code>ï¼Œç¡®å®ä¹Ÿæ²¡æœ‰ä»€ä¹ˆå€¼å¾—å†™äº†ã€‚</p><p>å•å…ƒæµ‹è¯•ç±»ä¸­çš„æµ‹è¯•æ–¹æ³•å¯èƒ½æ˜¯ä¸è¨€è‡ªæ˜çš„æœ€å¸¸è§ä¾‹å­äº†ï¼Œæˆ‘ä»¬é€šå¸¸å¯ä»¥ä»è¿™äº›æ–¹æ³•çš„æè¿°æ€§å‘½åä¸­çŸ¥é“å®ƒæ˜¯å¹²ä»€ä¹ˆçš„ï¼Œå› æ­¤ä¸éœ€è¦é¢å¤–çš„æ–‡æ¡£è¯´æ˜ã€‚</p><blockquote><p><strong>æ³¨æ„</strong>ï¼šå¦‚æœæœ‰ä¸€äº›ç›¸å…³ä¿¡æ¯æ˜¯éœ€è¦è¯»è€…äº†è§£çš„ï¼Œé‚£ä¹ˆä»¥ä¸Šçš„ä¾‹å¤–ä¸åº”ä½œä¸ºå¿½è§†è¿™äº›ä¿¡æ¯çš„ç†ç”±ã€‚ä¾‹å¦‚ï¼Œå¯¹äºæ–¹æ³•å<code>getCanonicalName</code>ï¼Œå°±ä¸åº”è¯¥å¿½è§†æ–‡æ¡£è¯´æ˜ï¼Œå› ä¸ºè¯»è€…å¾ˆå¯èƒ½ä¸çŸ¥é“è¯è¯­<code>canonical name</code>æŒ‡çš„æ˜¯ä»€ä¹ˆã€‚</p></blockquote><h4 id="7-3-2-ä¾‹å¤–ï¼šé‡è½½"><a href="#7-3-2-ä¾‹å¤–ï¼šé‡è½½" class="headerlink" title="7.3.2 ä¾‹å¤–ï¼šé‡è½½"></a>7.3.2 ä¾‹å¤–ï¼šé‡è½½</h4><p>å¦‚æœä¸€ä¸ªæ–¹æ³•é‡è½½äº†è¶…ç±»ä¸­çš„æ–¹æ³•ï¼Œé‚£ä¹ˆ<code>Javadoc</code>å¹¶éå¿…éœ€çš„ã€‚</p><h4 id="7-3-3-å¯é€‰çš„Javadoc"><a href="#7-3-3-å¯é€‰çš„Javadoc" class="headerlink" title="7.3.3 å¯é€‰çš„Javadoc"></a>7.3.3 å¯é€‰çš„Javadoc</h4><p>å¯¹äºåŒ…å¤–ä¸å¯è§çš„ç±»å’Œæ–¹æ³•ï¼Œå¦‚æœ‰éœ€è¦ï¼Œä¹Ÿæ˜¯è¦ä½¿ç”¨<code>Javadoc</code>çš„ã€‚å¦‚æœä¸€ä¸ªæ³¨é‡Šæ˜¯ç”¨æ¥å®šä¹‰ä¸€ä¸ªç±»ï¼Œæ–¹æ³•ï¼Œå­—æ®µçš„æ•´ä½“ç›®çš„æˆ–è¡Œä¸ºï¼Œ é‚£ä¹ˆè¿™ä¸ªæ³¨é‡Šåº”è¯¥å†™æˆ<code>Javadoc</code>ï¼Œè¿™æ ·æ›´ç»Ÿä¸€æ›´å‹å¥½ã€‚</p><p>åŸæ–‡åœ°å€: <a href="http://checkstyle.sourceforge.net/reports/google-java-style-20170228.html">Google Java Style Guide</a></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ä¹‹é“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Google </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PostgreSQLåŸºç¡€çŸ¥è¯†æ•´ç†</title>
      <link href="/post/shu-ju-ku/postgresql-ji-chu-zhi-shi-zheng-li/"/>
      <url>/post/shu-ju-ku/postgresql-ji-chu-zhi-shi-zheng-li/</url>
      
        <content type="html"><![CDATA[<h2 id="æ•°æ®åº“æ“ä½œDML"><a href="#æ•°æ®åº“æ“ä½œDML" class="headerlink" title="æ•°æ®åº“æ“ä½œDML"></a>æ•°æ®åº“æ“ä½œDML</h2><h3 id="CREATE-TABLE"><a href="#CREATE-TABLE" class="headerlink" title="CREATE TABLE"></a>CREATE TABLE</h3><p><code>CREATE TABLE</code>è¯­å¥ç”¨äºåˆ›å»ºæ•°æ®åº“ä¸­çš„è¡¨ã€‚è¯­æ³•æ˜¯ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> è¡¨åç§° <span class="token punctuation">(</span>åˆ—å<span class="token number">1</span> æ•°æ®ç±»å‹<span class="token punctuation">,</span>åˆ—å<span class="token number">2</span> æ•°æ®ç±»å‹<span class="token punctuation">,</span>åˆ—å<span class="token number">3</span> æ•°æ®ç±»å‹<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¾‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>id <span class="token keyword">integer</span><span class="token punctuation">,</span>user_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>email <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>age <span class="token keyword">integer</span><span class="token punctuation">,</span>address <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ³¨æ„</strong>ï¼šå­—æ®µç±»å‹<code>char</code>å’Œ<code>varchar</code>åŒºåˆ«ï¼š</p><ul><li>å®¹çº³å›ºå®šé•¿åº¦çš„å­—ç¬¦ä¸²ã€‚</li><li>å®¹çº³å¯å˜é•¿åº¦çš„å­—ç¬¦ä¸²ã€‚</li></ul><h3 id="CONSTRAINT"><a href="#CONSTRAINT" class="headerlink" title="CONSTRAINT"></a>CONSTRAINT</h3><p>çº¦æŸã€é™åˆ¶ï¼Œå¸¸è§çš„çº¦æŸå¦‚ä¸‹ï¼š</p><ul><li><code>CHECK</code>(æ£€æŸ¥çº¦æŸ)</li><li><code>NOT NULL</code>(éç©ºçº¦æŸ)</li><li><code>UNIQUE</code>(å”¯ä¸€çº¦æŸ)</li><li><code>Primary Key</code>(ä¸»é”®)</li><li><code>Foreign Key</code>(å¤–é”®)</li></ul><p>ä¾‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- å„ç§çº¦æŸçš„ä½¿ç”¨ç¤ºä¾‹</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>    id <span class="token keyword">integer</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>    corp_id <span class="token keyword">integer</span> <span class="token keyword">REFERENCES</span> corp <span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>    user_name <span class="token keyword">text</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">,</span>    age <span class="token keyword">numeric</span> <span class="token keyword">CHECK</span> <span class="token punctuation">(</span>age <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ALTER-TABLE"><a href="#ALTER-TABLE" class="headerlink" title="ALTER TABLE"></a>ALTER TABLE</h3><p><code>ALTER TABLE</code>ç”¨æ¥æ·»åŠ ï¼Œåˆ é™¤æˆ–ä¿®æ”¹ç°æœ‰è¡¨ä¸­çš„åˆ—ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥æ·»åŠ å’Œåˆ é™¤ç°æœ‰è¡¨ä¸Šçš„å„ç§åˆ¶çº¦å› ç´ ã€‚è¯­æ³•å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- ç°æœ‰è¡¨ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„åˆ—</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token keyword">table</span> <span class="token keyword">ADD</span> <span class="token keyword">column</span> datatype<span class="token punctuation">;</span><span class="token comment">-- ç°æœ‰è¡¨ä¸­åˆ é™¤ä¸€ä¸ªæ–°çš„åˆ—</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token keyword">table</span> <span class="token keyword">DROP</span> <span class="token keyword">COLUMN</span> <span class="token keyword">column</span><span class="token punctuation">;</span><span class="token comment">-- ç°æœ‰è¡¨ä¸­æ›´æ”¹æ•°æ®ç±»å‹çš„åˆ—</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token keyword">table</span> <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> <span class="token keyword">column</span> datatype<span class="token punctuation">;</span><span class="token comment">-- ç°æœ‰è¡¨ä¸­ä¸€åˆ—æ·»åŠ NOT NULLçº¦æŸ</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token keyword">table</span> <span class="token keyword">MODIFY</span> <span class="token keyword">column</span> datatype <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span><span class="token comment">-- ç°æœ‰è¡¨ä¸­æ·»åŠ å”¯ä¸€çº¦æŸ</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token keyword">table</span> <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> MyUniqueConstraint <span class="token keyword">UNIQUE</span><span class="token punctuation">(</span>column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- ç°æœ‰è¡¨ä¸­æ·»åŠ CHECKçº¦æŸ</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token keyword">table</span> <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> MyUniqueConstraint <span class="token keyword">CHECK</span> <span class="token punctuation">(</span>CONDITION<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- ç°æœ‰è¡¨ä¸­æ·»åŠ PRIMARY KEYçº¦æŸ</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token keyword">table</span> <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> MyPrimaryKey <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- ç°æœ‰è¡¨ä¸­åˆ é™¤çº¦æŸ</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token keyword">table</span> <span class="token keyword">DROP</span> <span class="token keyword">CONSTRAINT</span> MyUniqueConstraint<span class="token punctuation">;</span><span class="token comment">-- ç°æœ‰è¡¨ä¸­åˆ é™¤ä¸»é”®</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token keyword">table</span> <span class="token keyword">DROP</span> <span class="token keyword">CONSTRAINT</span> MyPrimaryKey<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="DROP-TABLE"><a href="#DROP-TABLE" class="headerlink" title="DROP TABLE"></a>DROP TABLE</h3><p><code>DROP TABLE</code>è¯­å¥æ˜¯ç”¨æ¥åˆ é™¤è¡¨å®šä¹‰åŠå…¶æ‰€æœ‰ç›¸å…³çš„æ•°æ®è¡¨çš„ç´¢å¼•ï¼Œè§„åˆ™ï¼Œè§¦å‘å™¨å’Œçº¦æŸã€‚è¯­æ³•å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">table</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="TRUNCATE-TABLE"><a href="#TRUNCATE-TABLE" class="headerlink" title="TRUNCATE TABLE"></a>TRUNCATE TABLE</h3><p><code>TRUNCATE TABLE</code>å‘½ä»¤ç”¨äºä»ç°æœ‰çš„è¡¨åˆ é™¤å®Œæ•´çš„æ•°æ®ã€‚åœ¨æ¯ä¸ªè¡¨ä¸Šçš„DELETEï¼ˆåˆ é™¤ï¼‰å…·æœ‰ç›¸åŒçš„æ•ˆæœï¼Œä½†æ˜¯ï¼Œå› ä¸ºå®ƒæ²¡æœ‰å®é™…æ‰«æçš„è¡¨ï¼Œå®ƒçš„é€Ÿåº¦å¿«ã€‚è¯­æ³•å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">TRUNCATE</span> <span class="token keyword">TABLE</span>  <span class="token keyword">table</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="DELETE-FROM"><a href="#DELETE-FROM" class="headerlink" title="DELETE FROM"></a>DELETE FROM</h3><p><code>DELETE FROM</code>ç”¨æ¥ä»ä¸€ä¸ªè¡¨ä¸­åˆ é™¤ç°æœ‰çš„è®°å½•ã€‚å¯ä»¥ä½¿ç”¨WHEREå­å¥DELETEæŸ¥è¯¢åˆ é™¤æ‰€é€‰è¡Œï¼Œå¦åˆ™æ‰€æœ‰çš„è®°å½•ä¼šè¢«åˆ é™¤ã€‚è¯­æ³•å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token keyword">WHERE</span> <span class="token punctuation">[</span>condition<span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="INSERT-INTO"><a href="#INSERT-INTO" class="headerlink" title="INSERT INTO"></a>INSERT INTO</h3><p><code>INSERT INTO</code>è¯­å¥å…è®¸ä¸€ä¸ªåˆ°ä¸€ä¸ªè¡¨ä¸­æ’å…¥æ–°è¡Œã€‚ä¸€ä¸ªå¯ä»¥ä½œä¸ºä¸€ä¸ªæŸ¥è¯¢çš„ç»“æœï¼Œåœ¨ä¸€ä¸ªæ—¶é—´æˆ–å‡ è¡Œæ’å…¥ä¸€è¡Œã€‚åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token keyword">table</span> <span class="token punctuation">(</span>column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> column3<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token keyword">VALUES</span> <span class="token punctuation">(</span>value1<span class="token punctuation">,</span> value2<span class="token punctuation">,</span> value3<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>valueN<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p><strong>æ³¨</strong>ï¼š<br>1.è¿™é‡Œ column1, column2,â€¦columnNæ˜¯è¦æ’å…¥æ•°æ®çš„è¡¨ä¸­çš„åˆ—åã€‚<br>2. å¯ä»¥ä»¥ä»»ä½•é¡ºåºåˆ—å‡ºç›®æ ‡åˆ—åã€‚ VALUESå­å¥æˆ–æŸ¥è¯¢çš„å€¼éƒ½ä¸æ˜¾å¼æˆ–éšå¼çš„åˆ—åˆ—è¡¨ä»å·¦åˆ°å³ã€‚</p></blockquote><p>å¦‚æœè¦æ·»åŠ è¡¨ä¸­çš„æ‰€æœ‰åˆ—çš„å€¼ï¼Œå¯èƒ½ä¸éœ€è¦åœ¨SQLæŸ¥è¯¢ä¸­æŒ‡å®šåˆ—ï¼ˆæ¬¡ï¼‰åç§°ã€‚ä½†è¦ç¡®ä¿è¡¨ä¸­æ˜¯åœ¨ç›¸åŒçš„é¡ºåºçš„åˆ—å€¼çš„é¡ºåºã€‚INSERT INTOè¯­æ³•å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token keyword">table</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>value1<span class="token punctuation">,</span>value2<span class="token punctuation">,</span>value3<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>valueN<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="UPDATE"><a href="#UPDATE" class="headerlink" title="UPDATE"></a>UPDATE</h3><p><code>UPDATE</code>è¢«ç”¨æ¥ä¿®æ”¹ç°æœ‰çš„è¡¨ä¸­çš„è®°å½•ã€‚å¯ä»¥ä½¿ç”¨<code>UPDATE</code>æŸ¥è¯¢çš„<code>WHERE</code>å­å¥æ›´æ–°é€‰å®šè¡Œï¼Œå¦åˆ™ä¼šè¢«æ›´æ–°çš„æ‰€æœ‰è¡Œã€‚åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-none"><code class="language-none">UPDATE table SET column1 &#x3D; value1, column2 &#x3D; value2...., columnN &#x3D; valueN WHERE [condition];<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="SQLåŸºç¡€"><a href="#SQLåŸºç¡€" class="headerlink" title="SQLåŸºç¡€"></a>SQLåŸºç¡€</h2><h3 id="SELECT"><a href="#SELECT" class="headerlink" title="SELECT"></a>SELECT</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">column</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="DISTINCT"><a href="#DISTINCT" class="headerlink" title="DISTINCT"></a>DISTINCT</h3><p>æ‰¾å‡ºè¡¨å†…çš„ä¸åŒå€¼çš„æƒ…å†µã€‚</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> <span class="token keyword">column</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¾‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> id<span class="token punctuation">,</span> email <span class="token keyword">FROM</span> <span class="token keyword">user</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="WHERE"><a href="#WHERE" class="headerlink" title="WHERE"></a>WHERE</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">column</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token keyword">WHERE</span> <span class="token punctuation">[</span>condition<span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="AND-OR"><a href="#AND-OR" class="headerlink" title="AND / OR"></a>AND / OR</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">column</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token keyword">WHERE</span> <span class="token punctuation">[</span>condition1<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">AND</span><span class="token operator">|</span><span class="token operator">OR</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>condition2<span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="IN-NOT-IN"><a href="#IN-NOT-IN" class="headerlink" title="IN / NOT IN"></a>IN / NOT IN</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">column</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token keyword">WHERE</span> <span class="token keyword">column</span> <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">'value1'</span><span class="token punctuation">,</span> <span class="token string">'value2'</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¾‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">user</span> <span class="token keyword">WHERE</span> user_name <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">'å¼ ä¸‰'</span><span class="token punctuation">,</span> <span class="token string">'æå››'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="BETWEEN-â€¦-AND-â€¦"><a href="#BETWEEN-â€¦-AND-â€¦" class="headerlink" title="BETWEEN â€¦ AND â€¦"></a>BETWEEN â€¦ AND â€¦</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">column</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token keyword">WHERE</span> <span class="token keyword">column</span> <span class="token operator">BETWEEN</span> <span class="token string">'value1'</span> <span class="token operator">AND</span> <span class="token string">'value2'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¾‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">user</span> <span class="token keyword">WHERE</span> age <span class="token operator">BETWEEN</span> <span class="token number">18</span> <span class="token operator">AND</span> <span class="token number">25</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="LIKE"><a href="#LIKE" class="headerlink" title="LIKE"></a>LIKE</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">column</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token keyword">WHERE</span> <span class="token keyword">column</span> <span class="token operator">LIKE</span> &#123;æ¨¡å¼&#125;<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¾‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">user</span> <span class="token keyword">WHERE</span> user_name <span class="token operator">LIKE</span> <span class="token string">'%å¼ %'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="ORDER-BY"><a href="#ORDER-BY" class="headerlink" title="ORDER BY"></a>ORDER BY</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">column</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token punctuation">[</span><span class="token keyword">WHERE</span> condition<span class="token punctuation">]</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token keyword">column</span> <span class="token punctuation">[</span><span class="token keyword">ASC</span><span class="token punctuation">,</span> <span class="token keyword">DESC</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><strong>æ³¨</strong>ï¼šASCï¼ˆé»˜è®¤ï¼‰ä»£è¡¨ç»“æœä¼šä»¥ç”±å°å¾€å¤§çš„é¡ºåºåˆ—å‡ºï¼Œè€ŒDESCä»£è¡¨ç»“æœä¼šä»¥ç”±å¤§å¾€å°çš„é¡ºåºåˆ—å‡ºã€‚</p></blockquote><p>ä¾‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> user_name<span class="token punctuation">,</span> email<span class="token punctuation">,</span> age <span class="token keyword">FROM</span> <span class="token keyword">user</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> age <span class="token keyword">DESC</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="GROUP-BY"><a href="#GROUP-BY" class="headerlink" title="GROUP BY"></a>GROUP BY</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>column2<span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> column1<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¾‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> user_name<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token keyword">user</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> user_name<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="HAVING"><a href="#HAVING" class="headerlink" title="HAVING"></a>HAVING</h3><p>å¯¹å‡½æ•°äº§ç”Ÿçš„å€¼æ¥è®¾å®šæ¡ä»¶ã€‚</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>column2<span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> column1 <span class="token keyword">HAVING</span> <span class="token punctuation">[</span>condition<span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¾‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> user_name<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>ages<span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token keyword">user</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> user_name <span class="token keyword">HAVING</span> <span class="token function">SUM</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">1500</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="ALIAS"><a href="#ALIAS" class="headerlink" title="ALIAS"></a>ALIAS</h3><blockquote><p>SELECT â€˜è¡¨åˆ«åâ€™.â€™åˆ—åâ€™ AS â€˜åˆ—åˆ«åâ€™ FROM table AS â€˜è¡¨åˆ«åâ€™;</p></blockquote><p>ä¾‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> u<span class="token punctuation">.</span>user_name <span class="token keyword">AS</span> name<span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> ages <span class="token keyword">FROM</span> <span class="token keyword">user</span> <span class="token keyword">AS</span> u <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> u<span class="token punctuation">.</span>store_name<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h3><ul><li><code>AVG</code> (å¹³å‡)</li><li><code>COUNT</code> (è®¡æ•°)</li><li><code>MAX</code> (æœ€å¤§å€¼)</li><li><code>MIN</code> (æœ€å°å€¼)</li><li><code>SUM</code> (æ€»åˆ)</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> fun_name<span class="token punctuation">(</span><span class="token keyword">column</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¾‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">count</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token keyword">AS</span> user_count <span class="token keyword">FROM</span> <span class="token keyword">user</span> <span class="token keyword">AS</span> u<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="è¡¨è¿æ¥"><a href="#è¡¨è¿æ¥" class="headerlink" title="è¡¨è¿æ¥"></a>è¡¨è¿æ¥</h3><p>INNER JOIN: å¦‚æœè¡¨ä¸­æœ‰è‡³å°‘ä¸€ä¸ªåŒ¹é…ï¼Œåˆ™è¿”å›è¡Œï¼›<br>LEFT JOIN: å³ä½¿å³è¡¨ä¸­æ²¡æœ‰åŒ¹é…ï¼Œä¹Ÿä»å·¦è¡¨è¿”å›æ‰€æœ‰çš„è¡Œï¼›<br>RIGHT JOIN: å³ä½¿å·¦è¡¨ä¸­æ²¡æœ‰åŒ¹é…ï¼Œä¹Ÿä»å³è¡¨è¿”å›æ‰€æœ‰çš„è¡Œï¼›<br>FULL JOIN: åªè¦å…¶ä¸­ä¸€ä¸ªè¡¨ä¸­å­˜åœ¨åŒ¹é…ï¼Œå°±è¿”å›è¡Œã€‚</p><p>ä¾‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> u<span class="token punctuation">.</span>uesr_name<span class="token punctuation">,</span> c<span class="token punctuation">.</span>corp_name <span class="token keyword">FROM</span> <span class="token keyword">user</span> <span class="token keyword">AS</span> u <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> corp <span class="token keyword">AS</span> c <span class="token keyword">ON</span> c<span class="token punctuation">.</span>id <span class="token operator">=</span> u<span class="token punctuation">.</span>corp_id<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="SQLè¿›é˜¶"><a href="#SQLè¿›é˜¶" class="headerlink" title="SQLè¿›é˜¶"></a>SQLè¿›é˜¶</h2><h3 id="UNION-UNION-ALL"><a href="#UNION-UNION-ALL" class="headerlink" title="UNION / UNION ALL"></a>UNION / UNION ALL</h3><p><code>UNION</code>ç”¨äºåˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ªSELECTè¯­å¥çš„ç»“æœï¼Œä¸è¿”å›ä»»ä½•é‡å¤çš„è¡Œã€‚<code>UNION ALL</code>è¿ç®—ç¬¦è¯­å¥ï¼Œåˆ™åŒ…æ‹¬é‡å¤è¡Œçš„ç»“æœã€‚ä½¿ç”¨UNIONï¼Œæ¯ä¸ªSELECTé€‰æ‹©çš„åˆ—æ•°å¿…é¡»å…·æœ‰ç›¸åŒçš„ï¼Œç›¸åŒæ•°ç›®çš„åˆ—è¡¨è¾¾å¼ç›¸åŒçš„æ•°æ®ç±»å‹ï¼Œå¹¶è®©å®ƒä»¬åœ¨ç›¸åŒçš„é¡ºåºï¼Œä½†å®ƒä»¬ä¸å¿…æ˜¯ç›¸åŒçš„é•¿åº¦ã€‚è¯­æ³•å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1 <span class="token punctuation">[</span><span class="token punctuation">,</span> column2 <span class="token punctuation">]</span><span class="token keyword">FROM</span> table1 <span class="token punctuation">[</span><span class="token punctuation">,</span> table2 <span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">WHERE</span> condition<span class="token punctuation">]</span><span class="token keyword">UNION</span> <span class="token punctuation">[</span><span class="token keyword">UNION</span> <span class="token keyword">ALL</span><span class="token punctuation">]</span><span class="token keyword">SELECT</span> column1 <span class="token punctuation">[</span><span class="token punctuation">,</span> column2 <span class="token punctuation">]</span><span class="token keyword">FROM</span> table1 <span class="token punctuation">[</span><span class="token punctuation">,</span> table2 <span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">WHERE</span> condition<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="INTERSECT-INTERSECT-ALL"><a href="#INTERSECT-INTERSECT-ALL" class="headerlink" title="INTERSECT / INTERSECT ALL"></a>INTERSECT / INTERSECT ALL</h3><p>å’Œ<code>UNION</code>æŒ‡ä»¤ç±»ä¼¼ï¼Œ<code>INTERSECT</code>ä¹Ÿæ˜¯å¯¹ä¸¤ä¸ªSQLè¯­å¥æ‰€äº§ç”Ÿçš„ç»“æœåšå¤„ç†çš„ã€‚ä¸åŒçš„åœ°æ–¹æ˜¯ï¼Œ<code>UNION</code>åŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ª<code>OR</code>(å¦‚æœè¿™ä¸ªå€¼å­˜åœ¨äºç¬¬ä¸€å¥æˆ–æ˜¯ç¬¬äºŒå¥ï¼Œå®ƒå°±ä¼šè¢«é€‰å‡º)ï¼Œè€Œ<code>INTERSECT</code>åˆ™æ¯”è¾ƒåƒ<code>AND</code>(è¿™ä¸ªå€¼è¦å­˜åœ¨äºç¬¬ä¸€å¥å’Œç¬¬äºŒå¥æ‰ä¼šè¢«é€‰å‡º)ã€‚<code>UNION</code>æ˜¯å¹¶é›†ï¼Œè€Œ<code>INTERSECT</code>æ˜¯äº¤é›†ã€‚<code>INTERSECT ALL</code>åˆ™åŒ…å«äº¤é›†åçš„é‡å¤æ•°æ®ã€‚è¯­æ³•å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1 <span class="token punctuation">[</span><span class="token punctuation">,</span> column2 <span class="token punctuation">]</span><span class="token keyword">FROM</span> table1 <span class="token punctuation">[</span><span class="token punctuation">,</span> table2 <span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">WHERE</span> condition<span class="token punctuation">]</span><span class="token keyword">INTERSECT</span> <span class="token punctuation">[</span><span class="token keyword">INTERSECT</span> <span class="token keyword">ALL</span><span class="token punctuation">]</span><span class="token keyword">SELECT</span> column1 <span class="token punctuation">[</span><span class="token punctuation">,</span> column2 <span class="token punctuation">]</span><span class="token keyword">FROM</span> table1 <span class="token punctuation">[</span><span class="token punctuation">,</span> table2 <span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">WHERE</span> condition<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="EXCEPT-EXCEPT-ALL"><a href="#EXCEPT-EXCEPT-ALL" class="headerlink" title="EXCEPT / EXCEPT ALL"></a>EXCEPT / EXCEPT ALL</h3><p><code>EXCEPT</code>ç”¨äºæ±‚å·®é›†ï¼Œå…¶å°†æŸ¥è¯¢åœ¨å‰ä¸€ä¸ªç»“æœé›†ä¸­ä½†æ˜¯ä¸å†åé¢ä¸€ä¸ªç»“æœé›†ä¸­çš„è®°å½•ã€‚<code>EXCEPT ALL</code>åˆ™åŒ…å«äº¤é›†åçš„é‡å¤æ•°æ®ã€‚è¯­æ³•å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1 <span class="token punctuation">[</span><span class="token punctuation">,</span> column2 <span class="token punctuation">]</span><span class="token keyword">FROM</span> table1 <span class="token punctuation">[</span><span class="token punctuation">,</span> table2 <span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">WHERE</span> condition<span class="token punctuation">]</span><span class="token keyword">EXCEPT</span> <span class="token punctuation">[</span><span class="token keyword">EXCEPT</span> <span class="token keyword">ALL</span><span class="token punctuation">]</span><span class="token keyword">SELECT</span> column1 <span class="token punctuation">[</span><span class="token punctuation">,</span> column2 <span class="token punctuation">]</span><span class="token keyword">FROM</span> table1 <span class="token punctuation">[</span><span class="token punctuation">,</span> table2 <span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">WHERE</span> condition<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>æ³¨</strong>ï¼šåœ¨å…¶ä»–æ•°æ®åº“æ±‚å·®é›†çš„å…³é”®å­—æ˜¯ï¼š<code>MINUS</code>ã€‚</p></blockquote><h3 id="SUBQUERY"><a href="#SUBQUERY" class="headerlink" title="SUBQUERY"></a>SUBQUERY</h3><p><code>SUBQUERY</code>å³å­æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢ä¹Ÿæ˜¯ä¸€ä¸ªæ™®é€šæŸ¥è¯¢ï¼Œç›®çš„æ˜¯å°†ç”¨å­æŸ¥è¯¢è¿”å›çš„æ•°æ®å°†è¢«ç”¨æ¥åœ¨ä¸»æŸ¥è¯¢ä¸­ä½œä¸ºæ¡ä»¶ï¼Œä»¥è¿›ä¸€æ­¥é™åˆ¶è¦æ£€ç´¢çš„æ•°æ®ã€‚å¯ä»¥ä½¿ç”¨å­æŸ¥è¯¢çš„æœ‰SELECTï¼ŒINSERTï¼ŒUPDATEå’ŒDELETEè¯­å¥ï¼Œä¸è¿ç®—ç¬¦å¦‚=ï¼Œ&lt;ï¼Œ&gt;ï¼Œ&gt;=ï¼Œ&lt;=ï¼ŒINç­‰ä¸€èµ·ä½¿ç”¨ã€‚æœ‰å‡ ä¸ªå­æŸ¥è¯¢å¿…é¡»éµå¾ªçš„è§„åˆ™ï¼š</p><ul><li>å¿…é¡»ç”¨æ‹¬å·æ‹¬èµ·æ¥çš„å­æŸ¥è¯¢ã€‚</li><li>å­æŸ¥è¯¢åªèƒ½æœ‰ä¸€ä¸ªåœ¨SELECTå­å¥ä¸­çš„åˆ—ï¼Œé™¤éå¤šåˆ—åœ¨ä¸»æŸ¥è¯¢çš„æŸ¥è¯¢æ¥æ¯”è¾ƒå…¶é€‰å®šçš„åˆ—ã€‚</li><li>ORDER BYä¸èƒ½ä½¿ç”¨åœ¨å­æŸ¥è¯¢ä¸­ï¼Œè™½ç„¶ä¸»æŸ¥è¯¢å°±å¯ä»¥ä½¿ç”¨ORDER BYã€‚GROUP BYå¯ä»¥ç”¨æ¥æ‰§è¡Œç›¸åŒçš„åŠŸèƒ½åœ¨å­æŸ¥è¯¢ä¸­çš„ORDER BYã€‚</li><li>å­æŸ¥è¯¢è¿”å›å¤šäºä¸€è¡Œåªèƒ½ç”¨äºä½¿ç”¨å¤šå€¼çš„è¿ç®—ç¬¦ï¼Œå¦‚ä¸ºINï¼ŒEXISTSï¼ŒINï¼ŒANY / SOMEï¼ŒALLè¿ç®—ç¬¦ã€‚</li></ul><p>ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- SELECTè¯­å¥ä¸­çš„å­æŸ¥è¯¢</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> COMPANY <span class="token keyword">WHERE</span> ID <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> ID <span class="token keyword">FROM</span> COMPANY <span class="token keyword">WHERE</span> SALARY <span class="token operator">></span> <span class="token number">45000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- INSERTè¯­å¥çš„å­æŸ¥è¯¢</span><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> COMPANY_BKP <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> COMPANY <span class="token keyword">WHERE</span> ID <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> ID <span class="token keyword">FROM</span> COMPANY<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- UPDATEè¯­å¥çš„å­æŸ¥è¯¢</span><span class="token keyword">UPDATE</span> COMPANY <span class="token keyword">SET</span> SALARY <span class="token operator">=</span> SALARY <span class="token operator">*</span> <span class="token number">0.50</span> <span class="token keyword">WHERE</span> AGE <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> AGE <span class="token keyword">FROM</span> COMPANY_BKP <span class="token keyword">WHERE</span> AGE <span class="token operator">>=</span> <span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- UPDATEè¯­å¥çš„å­æŸ¥è¯¢</span><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> COMPANY <span class="token keyword">WHERE</span> AGE <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> AGE <span class="token keyword">FROM</span> COMPANY_BKP <span class="token keyword">WHERE</span> AGE <span class="token operator">></span> <span class="token number">27</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="EXISTS-NOT-EXISTS"><a href="#EXISTS-NOT-EXISTS" class="headerlink" title="EXISTS / NOT EXISTS"></a>EXISTS / NOT EXISTS</h3><p><code>EXISTS</code>ç”¨äºæ£€æŸ¥å­æŸ¥è¯¢æ˜¯å¦è‡³å°‘ä¼šè¿”å›ä¸€è¡Œæ•°æ®ï¼Œè¯¥å­æŸ¥è¯¢å®é™…ä¸Šå¹¶ä¸è¿”å›ä»»ä½•æ•°æ®ï¼Œè€Œæ˜¯è¿”å›å€¼Trueæˆ–Falseã€‚EXISTSæŒ‡å®šä¸€ä¸ªå­æŸ¥è¯¢ï¼Œæ£€æµ‹è¡Œçš„å­˜åœ¨ã€‚<code>NOT EXISTS</code>çš„ä½œç”¨ä¸<code>EXISTS</code>æ­£å¥½ç›¸åã€‚å¦‚æœå­æŸ¥è¯¢æ²¡æœ‰è¿”å›è¡Œï¼Œåˆ™æ»¡è¶³äº†<code>NOT EXISTS</code>ä¸­çš„<code>WHERE</code>å­å¥ã€‚è¯­æ³•å¦‚ä¸‹ï¼š </p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">EXISTS</span> subquery<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>EXISTS å’Œ IN çš„æ¯”è¾ƒï¼š</p><ul><li>EXISTS(åŒ…æ‹¬ NOT EXISTS )å­å¥çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªBOOLEANå€¼ã€‚EXISTSå†…éƒ¨æœ‰ä¸€ä¸ªå­æŸ¥è¯¢è¯­å¥(SELECT â€¦ FROMâ€¦)ï¼Œæˆ‘å°†å…¶ç§°ä¸ºEXISTçš„å†…æŸ¥è¯¢è¯­å¥ã€‚å…¶å†…æŸ¥è¯¢è¯­å¥è¿”å›ä¸€ä¸ªç»“æœé›†ã€‚EXISTSå­å¥æ ¹æ®å…¶å†…æŸ¥è¯¢è¯­å¥çš„ç»“æœé›†ç©ºæˆ–è€…éç©ºï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚è€ŒINå¼•å¯¼çš„å­æŸ¥è¯¢åªèƒ½è¿”å›ä¸€ä¸ªå­—æ®µ</li><li>EXISTS : å¼ºè°ƒçš„æ˜¯æ˜¯å¦è¿”å›ç»“æœé›†ï¼Œä¸è¦æ±‚çŸ¥é“è¿”å›ä»€ä¹ˆï¼ŒINåˆ™éœ€è¦çŸ¥é“è¿”å›çš„å­—æ®µå€¼ã€‚</li><li>EXISTSä¸INçš„ä½¿ç”¨æ•ˆç‡çš„é—®é¢˜ï¼Œé€šå¸¸æƒ…å†µä¸‹é‡‡ç”¨existsè¦æ¯”inæ•ˆç‡é«˜ï¼Œå› ä¸ºINä¸èµ°ç´¢å¼•ï¼Œä½†è¦çœ‹å®é™…æƒ…å†µå…·ä½“ä½¿ç”¨ï¼šINé€‚åˆäºå¤–è¡¨å¤§è€Œå†…è¡¨å°çš„æƒ…å†µï¼›EXISTSé€‚åˆäºå¤–è¡¨å°è€Œå†…è¡¨å¤§çš„æƒ…å†µã€‚</li></ul><h3 id="CONCATENATE"><a href="#CONCATENATE" class="headerlink" title="CONCATENATE"></a>CONCATENATE</h3><p>è¿æ¥å­—ç¬¦ä¸²ã€‚æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬æœ‰éœ€è¦å°†ç”±ä¸åŒåˆ—è·å¾—çš„èµ„æ–™ä¸²è¿åœ¨ä¸€èµ·ã€‚æ¯ä¸€ç§æ•°æ®åº“éƒ½æœ‰æä¾›æ–¹æ³•æ¥è¾¾åˆ°è¿™ä¸ªç›®çš„ã€‚</p><ul><li>Oracle: CONCAT(), || </li><li>SQL Server: + </li><li>MySQL: CONCAT() </li><li>PostgreSQL: CONCAT(), || </li></ul><p>PostgreSQLçš„<code>CONCAT()</code>çš„è¯­æ³•å¦‚ä¸‹ï¼š</p><blockquote><p>concat(str â€œanyâ€ [, str â€œanyâ€ [, â€¦] ])</p></blockquote><p>PostgreSQLçš„<code>||</code>çš„è¯­æ³•å¦‚ä¸‹ï¼š</p><blockquote><p>string || string<br>string || non-string æˆ– non-string || string</p></blockquote><p>ä¾‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> u<span class="token punctuation">.</span>user_name <span class="token operator">||</span> <span class="token string">' '</span> <span class="token operator">||</span> u<span class="token punctuation">.</span>age <span class="token keyword">FROM</span> <span class="token keyword">user</span> <span class="token keyword">AS</span> u<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="SUBSTRING"><a href="#SUBSTRING" class="headerlink" title="SUBSTRING"></a>SUBSTRING</h3><p>æˆªå–å­—ç¬¦ä¸²ã€‚</p><ul><li>Oracle: SUBSTR()</li><li>SQL Server: SUBSTRING()</li><li>MySQL: SUBSTR(), SUBSTRING()</li><li>PostgreSQL: SUBSTRING()</li></ul><p>PostgreSQLçš„SUBSTRING()è¯­æ³•å¦‚ä¸‹ï¼š</p><ul><li>substring(string [from int] [for int]) æˆªå–å­å­—ç¬¦ä¸²ã€‚</li><li>substring(string from pattern) æˆªå–åŒ¹é…POSIXæ­£åˆ™è¡¨è¾¾å¼çš„å­å­—ç¬¦ä¸²ã€‚</li><li>substring(string from pattern for escape) æˆªå–åŒ¹é…SQLæ­£åˆ™è¡¨è¾¾å¼çš„å­å­—ç¬¦ä¸²ã€‚</li></ul><p>ä¾‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- å¾—åˆ°hom</span>substring<span class="token punctuation">(</span><span class="token string">'Thomas'</span> <span class="token keyword">from</span> <span class="token number">2</span> <span class="token keyword">for</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- å¾—åˆ°mas</span>substring<span class="token punctuation">(</span><span class="token string">'Thomas'</span> <span class="token keyword">from</span> <span class="token string">'...$'</span><span class="token punctuation">)</span><span class="token comment">-- å¾—åˆ°oma</span>substring<span class="token punctuation">(</span><span class="token string">'Thomas'</span> <span class="token keyword">from</span> <span class="token string">'%#"o_a#"_'</span> <span class="token keyword">for</span> <span class="token string">'#'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="TRIM"><a href="#TRIM" class="headerlink" title="TRIM"></a>TRIM</h3><p>SQLä¸­çš„<code>TRIM</code>å‡½æ•°æ˜¯ç”¨æ¥ç§»é™¤æ‰ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„å­—å¤´æˆ–å­—å°¾ã€‚æœ€å¸¸è§çš„ç”¨é€”æ˜¯ç§»é™¤å­—é¦–æˆ–å­—å°¾çš„ç©ºç™½ã€‚è¿™ä¸ªå‡½æ•°åœ¨ä¸åŒçš„æ•°æ®åº“ä¸­æœ‰ä¸åŒçš„åç§°ï¼š </p><ul><li>Oracle: LTRIM(), RTRIM()</li><li>SQL Server: LTRIM(), RTRIM()</li><li>MySQL: TRIM(), LTRIM(), RTRIM()</li><li>PostgreSQL: TRIM(), BTRIM(), LTRIM(), RTRIM()</li></ul><p>PostgreSQLçš„TRIM()è¯­æ³•å¦‚ä¸‹ï¼š</p><ul><li>trim([leading | trailing | both] [characters] from string) ä»å­—ç¬¦ä¸²stringçš„å¼€å¤´/ç»“å°¾/ä¸¤è¾¹åˆ é™¤åªåŒ…å«charactersä¸­å­—ç¬¦(ç¼ºçœæ˜¯ç©ºç™½)çš„æœ€é•¿çš„å­—ç¬¦ä¸²ã€‚</li><li>btrim(string text [, characters text]) ä»stringå¼€å¤´å’Œç»“å°¾åˆ é™¤åªåŒ…å« charactersä¸­å­—ç¬¦(ç¼ºçœæ˜¯ç©ºç™½)çš„æœ€é•¿å­—ç¬¦ä¸²ã€‚</li><li>ltrim(string text [, characters text]) ä»å­—ç¬¦ä¸²stringçš„å¼€å¤´åˆ é™¤åªåŒ…å«characters ä¸­å­—ç¬¦(ç¼ºçœæ˜¯ä¸€ä¸ªç©ºç™½)çš„æœ€é•¿çš„å­—ç¬¦ä¸²ã€‚</li><li>rtrim(string text [, characters text]) ä»å­—ç¬¦ä¸²stringçš„ç»“å°¾åˆ é™¤åªåŒ…å«charactersä¸­å­—ç¬¦(ç¼ºçœæ˜¯ä¸ªç©ºç™½)çš„æœ€é•¿çš„å­—ç¬¦ä¸²ã€‚</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- å¾—åˆ°Tom</span>trim<span class="token punctuation">(</span>both <span class="token string">'x'</span> <span class="token keyword">from</span> <span class="token string">'xTomxx'</span><span class="token punctuation">)</span><span class="token comment">-- å¾—åˆ°trim</span>btrim<span class="token punctuation">(</span><span class="token string">'xyxtrimyyx'</span><span class="token punctuation">,</span> <span class="token string">'xy'</span><span class="token punctuation">)</span><span class="token comment">-- å¾—åˆ°trim</span>ltrim<span class="token punctuation">(</span><span class="token string">'zzzytrim'</span><span class="token punctuation">,</span> <span class="token string">'xyz'</span><span class="token punctuation">)</span><span class="token comment">-- å¾—åˆ°trim</span>rtrim<span class="token punctuation">(</span><span class="token string">'trimxxxx'</span><span class="token punctuation">,</span> <span class="token string">'x'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="CASE"><a href="#CASE" class="headerlink" title="CASE"></a>CASE</h3><p><code>CASE</code>è¡¨è¾¾å¼æ˜¯ä¸€ç§é€šç”¨çš„æ¡ä»¶è¡¨è¾¾å¼ï¼Œç±»ä¼¼äºå…¶å®ƒç¼–ç¨‹è¯­è¨€ä¸­çš„<code>if/else</code>è¯­å¥ã€‚</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> <span class="token punctuation">[</span>condition<span class="token punctuation">]</span> <span class="token keyword">THEN</span> result     <span class="token punctuation">[</span><span class="token keyword">WHEN</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>     <span class="token punctuation">[</span><span class="token keyword">ELSE</span> result<span class="token punctuation">]</span><span class="token keyword">END</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> sex<span class="token punctuation">,</span>     <span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> sex <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">THEN</span> <span class="token string">'å¥³'</span>          <span class="token keyword">WHEN</span> sex <span class="token operator">=</span> <span class="token number">1</span> <span class="token keyword">THEN</span> <span class="token string">'ç”·'</span>          <span class="token keyword">ELSE</span> <span class="token string">'æœªçŸ¥'</span>     <span class="token keyword">END</span> <span class="token keyword">FROM</span> <span class="token keyword">user</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="COALESCE"><a href="#COALESCE" class="headerlink" title="COALESCE"></a>COALESCE</h3><p><code>COALESCE</code>è¿”å›å®ƒçš„ç¬¬ä¸€ä¸ªé<code>NULL</code>çš„å‚æ•°å€¼ã€‚å¦‚æœæ‰€æœ‰å‚æ•°éƒ½æ˜¯NULLé‚£ä¹ˆè¿”å›NULLã€‚å®ƒå¸¸ç”¨äºåœ¨æ˜¾ç¤ºæ•°æ®æ—¶ç”¨ç¼ºçœå€¼æ›¿æ¢NULLã€‚è¯­æ³•å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">COALESCE</span><span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">COALESCE</span><span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> GETDATE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="NULLIF"><a href="#NULLIF" class="headerlink" title="NULLIF"></a>NULLIF</h3><p>å½“ä¸”ä»…å½“value1ç­‰äºvalue2æ—¶ï¼Œ<code>NULLIF</code>æ‰è¿”å›nullã€‚å¦åˆ™å®ƒè¿”å›value1ã€‚è¿™äº›å¯ä»¥ç”¨äºæ‰§è¡Œä¸Šé¢ç»™å‡ºçš„<code>COALESCE</code>ä¾‹å­çš„åä¾‹ã€‚è¯­æ³•å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">NULLIF</span><span class="token punctuation">(</span>value1<span class="token punctuation">,</span> value2<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="GREATEST-LEAST"><a href="#GREATEST-LEAST" class="headerlink" title="GREATEST / LEAST"></a>GREATEST / LEAST</h3><p>GREATESTå’ŒLEASTå‡½æ•°ä»ä¸€ä¸ªä»»æ„æ•°å­—è¡¨è¾¾å¼çš„åˆ—è¡¨é‡Œé€‰å–æœ€å¤§æˆ–è€…æœ€å°çš„æ•°å€¼ã€‚ è¿™äº›è¡¨è¾¾å¼å¿…é¡»éƒ½å¯ä»¥è½¬æ¢æˆä¸€ä¸ªæ™®é€šçš„æ•°æ®ç±»å‹ï¼Œå®ƒå°†ä¼šæ˜¯ç»“æœç±»å‹ã€‚åˆ—è¡¨ä¸­çš„NULLå€¼å°†è¢«å¿½ç•¥ã€‚åªæœ‰æ‰€æœ‰è¡¨è¾¾å¼çš„ç»“æœéƒ½æ˜¯ NULL çš„æ—¶å€™ï¼Œç»“æœæ‰ä¼šæ˜¯ NULLã€‚è¯­æ³•å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">GREATEST<span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">)</span>LEAST<span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p><strong>æ³¨æ„</strong>ï¼šGREATESTå’ŒLEASTéƒ½ä¸æ˜¯ SQL æ ‡å‡†ï¼Œä½†å´æ˜¯å¾ˆå¸¸è§çš„æ‰©å±•ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GitçŸ¥è¯†ç‚¹æ•´ç†</title>
      <link href="/post/ruan-jian-gong-ju/git/git-zhi-shi-dian-zheng-li/"/>
      <url>/post/ruan-jian-gong-ju/git/git-zhi-shi-dian-zheng-li/</url>
      
        <content type="html"><![CDATA[<h2 id="1-GitåŸºæœ¬æ¦‚å¿µã€‚"><a href="#1-GitåŸºæœ¬æ¦‚å¿µã€‚" class="headerlink" title="1. GitåŸºæœ¬æ¦‚å¿µã€‚"></a>1. GitåŸºæœ¬æ¦‚å¿µã€‚</h2><ul><li><code>repository</code></li><li><code>config</code></li><li><code>init</code></li><li><code>clone</code></li><li><code>fetch</code></li><li><code>pull</code></li><li><code>commit</code></li><li><code>push</code></li><li><code>branch</code></li><li><code>head</code></li><li><code>tag</code></li><li><code>merge</code></li><li><code>conflict</code></li><li><code>diff</code></li><li><code>log</code></li><li><code>show</code></li><li><code>status</code></li></ul><h2 id="2-Gitå·¥ä½œç©ºé—´å’Œæ–‡ä»¶çŠ¶æ€"><a href="#2-Gitå·¥ä½œç©ºé—´å’Œæ–‡ä»¶çŠ¶æ€" class="headerlink" title="2. Gitå·¥ä½œç©ºé—´å’Œæ–‡ä»¶çŠ¶æ€"></a>2. Gitå·¥ä½œç©ºé—´å’Œæ–‡ä»¶çŠ¶æ€</h2><h3 id="1-å·¥ä½œç©ºé—´"><a href="#1-å·¥ä½œç©ºé—´" class="headerlink" title="(1).å·¥ä½œç©ºé—´"></a>(1).å·¥ä½œç©ºé—´</h3><p><img src="http://blog.chinaunix.net/attachment/201402/19/10415985_139279770639pM.jpg" class="lazyload placeholder" data-srcset="http://blog.chinaunix.net/attachment/201402/19/10415985_139279770639pM.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="Gitå·¥ä½œç©ºé—´"></p><p>å·¦ä¾§ä¸ºå·¥ä½œåŒºï¼Œå³ä¾§ä¸ºç‰ˆæœ¬åº“ã€‚</p><ul><li>å·¥ä½œåŒºï¼ˆ<code>Working Directory</code>ï¼‰ å°±æ˜¯åœ¨ç”µè„‘é‡Œèƒ½çœ‹åˆ°çš„ç›®å½•ï¼Œæ¯”å¦‚learngitæ–‡ä»¶å¤¹å°±æ˜¯ä¸€ä¸ªå·¥ä½œåŒºã€‚</li><li>ç‰ˆæœ¬åº“ï¼ˆ<code>Repository</code>ï¼‰å·¥ä½œåŒºæœ‰ä¸€ä¸ªéšè—ç›®å½•<code>.git</code>ï¼Œæ˜¯Gitçš„ç‰ˆæœ¬åº“ã€‚</li></ul><p>åœ¨ç‰ˆæœ¬åº“ä¸­æ ‡è®°ä¸º<code>index</code>çš„åŒºåŸŸä¸ºæš‚å­˜åŒºï¼Œæ ‡è®°ä¸º<code>master</code>çš„æ˜¯Gitä¸ºæˆ‘ä»¬è‡ªåŠ¨åˆ›å»ºçš„ç¬¬ä¸€ä¸ªåˆ†æ”¯ï¼Œä»£è¡¨çš„æ˜¯ç›®å½•æ ‘ã€‚æ­¤æ—¶<code>HEAD</code>å®é™…æ˜¯æŒ‡å‘<code>master</code>åˆ†æ”¯çš„ä¸€ä¸ªâ€œæ¸¸æ ‡â€ï¼Œæ‰€ä»¥å›¾ç¤ºçš„å‘½ä»¤ä¸­å‡ºç°HEADçš„åœ°æ–¹å¯ä»¥ç”¨<code>master</code>æ¥æ›¿æ¢ã€‚å›¾ä¸­çš„objectsæ ‡è¯†çš„åŒºåŸŸä¸ºgitçš„å¯¹è±¡åº“ï¼Œå®é™…ä½äº<code>.git/objects</code>ç›®å½•ä¸‹ã€‚</p><ul><li>å½“å¯¹å·¥ä½œåŒºä¿®æ”¹ï¼ˆæˆ–æ–°å¢ï¼‰çš„æ–‡ä»¶æ‰§è¡Œ<code>git add</code>å‘½ä»¤æ—¶ï¼Œæš‚å­˜åŒºçš„ç›®å½•æ ‘ä¼šè¢«æ›´æ–°ï¼ŒåŒæ—¶å·¥ä½œåŒºä¿®æ”¹ï¼ˆæˆ–æ–°å¢ï¼‰çš„æ–‡ä»¶å†…å®¹ä¼šè¢«å†™å…¥åˆ°å¯¹è±¡åº“ä¸­çš„ä¸€ä¸ªæ–°çš„å¯¹è±¡ä¸­ï¼Œè€Œè¯¥å¯¹è±¡çš„idè¢«è®°å½•åœ¨æš‚å­˜åŒºçš„æ–‡ä»¶ç´¢å¼•ä¸­ã€‚</li><li>å½“æ‰§è¡Œæäº¤æ“ä½œ<code>git commit</code>æ—¶ï¼Œæš‚å­˜åŒºçš„ç›®å½•æ ‘ä¼šå†™åˆ°ç‰ˆæœ¬åº“ï¼ˆå¯¹è±¡åº“ï¼‰ä¸­ï¼Œmasteråˆ†æ”¯ä¼šåšç›¸åº”çš„æ›´æ–°ï¼Œå³masteræœ€æ–°æŒ‡å‘çš„ç›®å½•æ ‘å°±æ˜¯æäº¤æ—¶åŸæš‚å­˜åŒºçš„ç›®å½•æ ‘ã€‚</li><li>å½“æ‰§è¡Œ<code>git reset HEAD</code>å‘½ä»¤æ—¶ï¼Œæš‚å­˜åŒºçš„ç›®å½•æ ‘ä¼šè¢«é‡å†™ï¼Œä¼šè¢«masteråˆ†æ”¯æŒ‡å‘çš„ç›®å½•æ ‘æ‰€æ›¿æ¢ï¼Œä½†æ˜¯å·¥ä½œåŒºä¸å—å½±å“ã€‚</li><li>å½“æ‰§è¡Œ<code>git rm --cached</code>å‘½ä»¤æ—¶ï¼Œä¼šç›´æ¥ä»æš‚å­˜åŒºåˆ é™¤æ–‡ä»¶ï¼Œå·¥ä½œåŒºåˆ™ä¸åšå‡ºæ”¹å˜ã€‚</li><li>å½“æ‰§è¡Œ<code>git checkout .</code>æˆ–<code>git checkout --</code> å‘½ä»¤æ—¶ï¼Œä¼šç”¨æš‚å­˜åŒºå…¨éƒ¨çš„æ–‡ä»¶æˆ–æŒ‡å®šçš„æ–‡ä»¶æ›¿æ¢å·¥ä½œåŒºçš„æ–‡ä»¶ã€‚è¿™ä¸ªæ“ä½œå¾ˆå±é™©ï¼Œä¼šæ¸…æ¥šå·¥ä½œåŒºä¸­æœªæ·»åŠ åˆ°æš‚å­˜åŒºçš„æ”¹åŠ¨ã€‚</li><li>å½“æ‰§è¡Œ<code>git checkout HEAD .</code>æˆ–<code>git checkout HEAD</code>å‘½ä»¤æ—¶ï¼Œä¼šç”¨HEADæŒ‡å‘çš„masteråˆ†æ”¯ä¸­çš„å…¨éƒ¨æˆ–éƒ¨åˆ†æ–‡ä»¶æ›¿æ¢æš‚å­˜åŒºå’Œå·¥ä½œåŒºä¸­çš„æ–‡ä»¶ã€‚è¿™ä¸ªå‘½ä»¤ä¹Ÿæ˜¯æåº¦å±é™©çš„ã€‚å› ä¸ºä¸ä½†ä¼šæ¸…æ¥šå·¥ä½œåŒºä¸­æœªæäº¤çš„æ”¹åŠ¨ï¼Œä¹Ÿä¼šæ¸…æ¥šæš‚å­˜åŒºä¸­æœªæäº¤çš„æ”¹åŠ¨ã€‚</li></ul><h3 id="1-æ–‡ä»¶çŠ¶æ€"><a href="#1-æ–‡ä»¶çŠ¶æ€" class="headerlink" title="(1).æ–‡ä»¶çŠ¶æ€"></a>(1).æ–‡ä»¶çŠ¶æ€</h3><p>Git æœ‰ä¸‰ç§çŠ¶æ€ï¼Œä½ çš„æ–‡ä»¶å¯èƒ½å¤„äºå…¶ä¸­ä¹‹ä¸€ï¼š**å·²æäº¤(<code>committed</code>)<strong>ã€</strong>å·²ä¿®æ”¹(<code>modified</code>)<strong>å’Œ</strong>å·²æš‚å­˜(<code>staged</code>)**ã€‚</p><h2 id="3-Gité…ç½®ç³»ç»Ÿçº§ã€å…¨å±€ã€å½“å‰ä»“åº“ç”¨æˆ·åã€é‚®ç®±çš„å‘½ä»¤"><a href="#3-Gité…ç½®ç³»ç»Ÿçº§ã€å…¨å±€ã€å½“å‰ä»“åº“ç”¨æˆ·åã€é‚®ç®±çš„å‘½ä»¤" class="headerlink" title="3. Gité…ç½®ç³»ç»Ÿçº§ã€å…¨å±€ã€å½“å‰ä»“åº“ç”¨æˆ·åã€é‚®ç®±çš„å‘½ä»¤"></a>3. Gité…ç½®ç³»ç»Ÿçº§ã€å…¨å±€ã€å½“å‰ä»“åº“ç”¨æˆ·åã€é‚®ç®±çš„å‘½ä»¤</h2><p>ç³»ç»Ÿçº§ã€å…¨å±€ã€å½“å‰ä»“åº“é€‰é¡¹åˆ†åˆ«æ˜¯:ä»“åº“-systemã€-globalã€-local(æˆ–é»˜è®¤ä¸å¡«)</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config --global user.name <span class="token string">"Jerry Mouse"</span><span class="token function">git</span> config --global user.email <span class="token string">"jerry@yiibai.com"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>åˆ—å‡ºGitè®¾ç½®</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config --list<span class="token function">git</span> config -l<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="4-Git-fetchå’Œpullçš„åŒºåˆ«"><a href="#4-Git-fetchå’Œpullçš„åŒºåˆ«" class="headerlink" title="4. Git fetchå’Œpullçš„åŒºåˆ«"></a>4. Git fetchå’Œpullçš„åŒºåˆ«</h2><ul><li><code>git fetch</code>ï¼šç›¸å½“äºæ˜¯ä»è¿œç¨‹è·å–æœ€æ–°ç‰ˆæœ¬åˆ°æœ¬åœ°ï¼Œä¸ä¼šè‡ªåŠ¨merge.</li><li><code>git pull</code>ï¼šç›¸å½“äºæ˜¯ä»è¿œç¨‹è·å–æœ€æ–°ç‰ˆæœ¬å¹¶mergeåˆ°æœ¬åœ°.</li></ul><h3 id="1-git-fetchç¤ºä¾‹ï¼š"><a href="#1-git-fetchç¤ºä¾‹ï¼š" class="headerlink" title="(1). git fetchç¤ºä¾‹ï¼š"></a>(1). git fetchç¤ºä¾‹ï¼š</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Git fetch origin master<span class="token function">git</span> log -p master<span class="token punctuation">..</span>origin/master<span class="token function">git</span> merge origin/master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä»¥ä¸Šå‘½ä»¤çš„å«ä¹‰ï¼š</p><ul><li>é¦–å…ˆä»è¿œç¨‹çš„<code>origin</code>çš„<code>master</code>ä¸»åˆ†æ”¯ä¸‹è½½æœ€æ–°çš„ç‰ˆæœ¬åˆ°<code>origin/master</code>åˆ†æ”¯ä¸Š</li><li>ç„¶åæ¯”è¾ƒæœ¬åœ°çš„<code>master</code>åˆ†æ”¯å’Œ<code>origin/master</code>åˆ†æ”¯çš„å·®åˆ«</li><li>æœ€åè¿›è¡Œåˆå¹¶</li><li>ä¸Šè¿°è¿‡ç¨‹å…¶å®å¯ä»¥ç”¨ä»¥ä¸‹æ›´æ¸…æ™°çš„æ–¹å¼æ¥è¿›è¡Œï¼š</li></ul><h3 id="1-git-pullç¤ºä¾‹ï¼š"><a href="#1-git-pullç¤ºä¾‹ï¼š" class="headerlink" title="(1). git pullç¤ºä¾‹ï¼š"></a>(1). git pullç¤ºä¾‹ï¼š</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> pull origin master<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¸Šè¿°å‘½ä»¤å…¶å®ç›¸å½“äº<code>git fetch</code>å’Œ<code>git merge</code>ã€‚åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œ<code>git fetch</code>æ›´å®‰å…¨ä¸€äº›ï¼Œå› ä¸ºåœ¨mergeå‰ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ›´æ–°æƒ…å†µï¼Œç„¶åå†å†³å®šæ˜¯å¦åˆå¹¶ã€‚</p><h2 id="5-Git-resetå’Œrevertçš„å´åˆ«"><a href="#5-Git-resetå’Œrevertçš„å´åˆ«" class="headerlink" title="5. Git resetå’Œrevertçš„å´åˆ«"></a>5. Git resetå’Œrevertçš„å´åˆ«</h2><ul><li><code>git revert</code>æ˜¯ç”¨ä¸€æ¬¡æ–°çš„commitæ¥å›æ»šä¹‹å‰çš„commitï¼Œ<code>git reset</code>æ˜¯ç›´æ¥åˆ é™¤æŒ‡å®šçš„commitã€‚ </li><li>åœ¨å›æ»šè¿™ä¸€æ“ä½œä¸Šçœ‹ï¼Œæ•ˆæœå·®ä¸å¤šã€‚ä½†æ˜¯åœ¨æ—¥åç»§ç»­mergeä»¥å‰çš„è€ç‰ˆæœ¬æ—¶æœ‰åŒºåˆ«ã€‚å› ä¸º<code>git revert</code>æ˜¯ç”¨ä¸€æ¬¡é€†å‘çš„commitâ€œä¸­å’Œâ€ä¹‹å‰çš„æäº¤ï¼Œå› æ­¤æ—¥ååˆå¹¶è€çš„branchæ—¶ï¼Œå¯¼è‡´è¿™éƒ¨åˆ†æ”¹å˜ä¸ä¼šå†æ¬¡å‡ºç°ï¼Œä½†æ˜¯<code>git reset</code>æ˜¯ä¹‹é—´æŠŠæŸäº›commitåœ¨æŸä¸ªbranchä¸Šåˆ é™¤ï¼Œå› è€Œå’Œè€çš„branchå†æ¬¡mergeæ—¶ï¼Œè¿™äº›è¢«å›æ»šçš„commitåº”è¯¥è¿˜ä¼šè¢«å¼•å…¥ã€‚</li><li><code>git reset</code>æ˜¯æŠŠHEADå‘åç§»åŠ¨äº†ä¸€ä¸‹ï¼Œè€Œ<code>git revert</code>æ˜¯HEADç»§ç»­å‰è¿›ï¼Œåªæ˜¯æ–°çš„commitçš„å†…å®¹å’Œè¦revertçš„å†…å®¹æ­£å¥½ç›¸åï¼Œèƒ½å¤ŸæŠµæ¶ˆè¦è¢«revertçš„å†…å®¹ã€‚</li><li>git revertä¸git resetæœ€å¤§çš„ä¸åŒæ˜¯ï¼Œgit revert ä»…ä»…æ˜¯æ’¤é”€æŸæ¬¡æäº¤ã€‚</li></ul><p>å¦å¤–ï¼Œè¯´ä¸€ä¸‹<code>git revert</code>ï¼Œ <code>git reset â€“hard</code>å’Œ <code>â€“soft</code>çš„åŒºåˆ«</p><ul><li><code>git reset â€“mixed id</code>: æ˜¯å°†gitçš„HEADå˜äº†ï¼ˆä¹Ÿå°±æ˜¯æäº¤è®°å½•å˜äº†ï¼‰ï¼Œä½†æ–‡ä»¶å¹¶æ²¡æœ‰æ”¹å˜ï¼Œï¼ˆä¹Ÿå°±æ˜¯working treeå¹¶æ²¡æœ‰æ”¹å˜ï¼‰ã€‚</li><li><code>git reset â€“soft id</code>: å®é™…ä¸Šï¼Œæ˜¯<code>git reset â€“mixed id</code>åï¼Œåˆåšäº†ä¸€æ¬¡<code>git add</code>ã€‚</li><li><code>git reset â€“herd id</code>: æ˜¯å°†gitçš„HEADå˜äº†ï¼Œæ–‡ä»¶ä¹Ÿå˜äº†ã€‚</li></ul><h2 id="6-Git-mergeå’Œreabseçš„ç›¸åŒç‚¹å’Œä¸åŒç‚¹"><a href="#6-Git-mergeå’Œreabseçš„ç›¸åŒç‚¹å’Œä¸åŒç‚¹" class="headerlink" title="6. Git mergeå’Œreabseçš„ç›¸åŒç‚¹å’Œä¸åŒç‚¹"></a>6. Git mergeå’Œreabseçš„ç›¸åŒç‚¹å’Œä¸åŒç‚¹</h2><p><code>merge</code>æ˜¯åˆå¹¶çš„æ„æ€ï¼Œ<code>rebase</code>æ˜¯å¤ä½åŸºåº•çš„æ„æ€ï¼Œç›¸åŒç‚¹éƒ½æ˜¯ç”¨æ¥åˆå¹¶åˆ†æ”¯çš„ã€‚</p><p><img src="http://images2015.cnblogs.com/blog/759200/201608/759200-20160806092734215-279978821.png" class="lazyload placeholder" data-srcset="http://images2015.cnblogs.com/blog/759200/201608/759200-20160806092734215-279978821.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="mergeå’Œrebase"></p><p>ä¸åŒç‚¹:</p><ul><li><code>merge</code>æ“ä½œä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œä¹‹å‰çš„æäº¤åˆ†å¼€æ˜¾ç¤ºã€‚è€Œ<code>rebase</code>æ“ä½œä¸ä¼šç”Ÿæˆæ–°çš„èŠ‚ç‚¹ï¼Œæ˜¯å°†ä¸¤ä¸ªåˆ†æ”¯èåˆæˆä¸€ä¸ªçº¿æ€§çš„æäº¤ã€‚</li><li>è§£å†³å†²çªæ—¶ã€‚mergeæ“ä½œé‡åˆ°å†²çªçš„æ—¶å€™ï¼Œå½“å‰mergeä¸èƒ½ç»§ç»­è¿›è¡Œä¸‹å»ã€‚æ‰‹åŠ¨ä¿®æ”¹å†²çªå†…å®¹åï¼Œadd ä¿®æ”¹ï¼Œcommitå°±å¯ä»¥äº†ã€‚è€Œ<code>rebase</code>æ“ä½œçš„è¯ï¼Œä¼šä¸­æ–­rebase,åŒæ—¶ä¼šæç¤ºå»è§£å†³å†²çªã€‚è§£å†³å†²çªå,å°†ä¿®æ”¹addåæ‰§è¡Œ<code>git rebase â€“continue</code>ç»§ç»­æ“ä½œï¼Œæˆ–è€…<code>git rebase â€“skip</code>å¿½ç•¥å†²çªã€‚</li><li><code>git pull</code>å’Œ<code>git pull --rebase</code>åŒºåˆ«ï¼š<code>git pull</code>åšäº†ä¸¤ä¸ªæ“ä½œåˆ†åˆ«æ˜¯â€è·å–â€å’Œâ€åˆå¹¶â€ã€‚æ‰€ä»¥åŠ äº†rebaseå°±æ˜¯ä»¥rebaseçš„æ–¹å¼è¿›è¡Œåˆå¹¶åˆ†æ”¯ï¼Œé»˜è®¤ä¸ºmergeã€‚</li></ul><p><strong>æ€»ç»“</strong>ï¼šé€‰æ‹© merge è¿˜æ˜¯ rebaseï¼Ÿ</p><ul><li>merge æ˜¯ä¸€ä¸ªåˆå¹¶æ“ä½œï¼Œä¼šå°†ä¸¤ä¸ªåˆ†æ”¯çš„ä¿®æ”¹åˆå¹¶åœ¨ä¸€èµ·ï¼Œé»˜è®¤æ“ä½œçš„æƒ…å†µä¸‹ä¼šæäº¤åˆå¹¶ä¸­ä¿®æ”¹çš„å†…å®¹</li><li>merge çš„æäº¤å†å²å¿ å®åœ°è®°å½•äº†å®é™…å‘ç”Ÿè¿‡ä»€ä¹ˆï¼Œå…³æ³¨ç‚¹åœ¨çœŸå®çš„æäº¤å†å²ä¸Šé¢</li><li>rebase å¹¶æ²¡æœ‰è¿›è¡Œåˆå¹¶æ“ä½œï¼Œåªæ˜¯æå–äº†å½“å‰åˆ†æ”¯çš„ä¿®æ”¹ï¼Œå°†å…¶å¤åˆ¶åœ¨äº†ç›®æ ‡åˆ†æ”¯çš„æœ€æ–°æäº¤åé¢</li><li>rebase çš„æäº¤å†å²åæ˜ äº†é¡¹ç›®è¿‡ç¨‹ä¸­å‘ç”Ÿäº†ä»€ä¹ˆï¼Œå…³æ³¨ç‚¹åœ¨å¼€å‘è¿‡ç¨‹ä¸Šé¢</li><li>merge ä¸ rebase éƒ½æ˜¯éå¸¸å¼ºå¤§çš„åˆ†æ”¯æ•´åˆå‘½ä»¤ï¼Œæ²¡æœ‰ä¼˜åŠ£ä¹‹åˆ†ï¼Œä½¿ç”¨å“ªä¸€ä¸ªåº”ç”±é¡¹ç›®å’Œå›¢é˜Ÿçš„å¼€å‘éœ€æ±‚å†³å®š</li><li>merge å’Œ rebase è¿˜æœ‰å¾ˆå¤šå¼ºå¤§çš„é€‰é¡¹ï¼Œå¯ä»¥ä½¿ç”¨ git help <command> æŸ¥çœ‹</li></ul><h2 id="7-Git-stashæ˜¯ä»€ä¹ˆï¼Ÿå®ƒçš„ç›¸å…³ä½¿ç”¨æ–¹å¼å‘½ä»¤"><a href="#7-Git-stashæ˜¯ä»€ä¹ˆï¼Ÿå®ƒçš„ç›¸å…³ä½¿ç”¨æ–¹å¼å‘½ä»¤" class="headerlink" title="7. Git stashæ˜¯ä»€ä¹ˆï¼Ÿå®ƒçš„ç›¸å…³ä½¿ç”¨æ–¹å¼å‘½ä»¤"></a>7. Git stashæ˜¯ä»€ä¹ˆï¼Ÿå®ƒçš„ç›¸å…³ä½¿ç”¨æ–¹å¼å‘½ä»¤</h2><ul><li>git stash: å¤‡ä»½å½“å‰çš„å·¥ä½œåŒºçš„å†…å®¹ï¼Œä»æœ€è¿‘çš„ä¸€æ¬¡æäº¤ä¸­è¯»å–ç›¸å…³å†…å®¹ï¼Œè®©å·¥ä½œåŒºä¿è¯å’Œä¸Šæ¬¡æäº¤çš„å†…å®¹ä¸€è‡´ã€‚åŒæ—¶ï¼Œå°†å½“å‰çš„å·¥ä½œåŒºå†…å®¹ä¿å­˜åˆ°Gitæ ˆä¸­ã€‚</li><li>git stash pop: ä»Gitæ ˆä¸­è¯»å–æœ€è¿‘ä¸€æ¬¡ä¿å­˜çš„å†…å®¹ï¼Œæ¢å¤å·¥ä½œåŒºçš„ç›¸å…³å†…å®¹ã€‚ç”±äºå¯èƒ½å­˜åœ¨å¤šä¸ªStashçš„å†…å®¹ï¼Œæ‰€ä»¥ç”¨æ ˆæ¥ç®¡ç†ï¼Œpopä¼šä»æœ€è¿‘çš„ä¸€ä¸ªstashä¸­è¯»å–å†…å®¹å¹¶æ¢å¤ã€‚</li><li>git stash pop â€“index stash@{0}: æ¢å¤ç¼–å·ä¸º0çš„è¿›åº¦çš„å·¥ä½œåŒºå’Œæš‚å­˜åŒºã€‚</li><li>git stash apply stash@{1} ä»¥å°†ä½ æŒ‡å®šç‰ˆæœ¬å·ä¸ºstash@{1}çš„å·¥ä½œå–å‡ºæ¥</li><li>git stash drop[<stash>] åˆ é™¤æŸä¸€ä¸ªè¿›åº¦ï¼Œé»˜è®¤åˆ é™¤æœ€æ–°è¿›åº¦</li><li>git stash list: æ˜¾ç¤ºGitæ ˆå†…çš„æ‰€æœ‰å¤‡ä»½ï¼Œå¯ä»¥åˆ©ç”¨è¿™ä¸ªåˆ—è¡¨æ¥å†³å®šä»é‚£ä¸ªåœ°æ–¹æ¢å¤ã€‚</li><li>git stash clear: æ¸…ç©ºGitæ ˆã€‚æ­¤æ—¶ä½¿ç”¨gitgç­‰å›¾å½¢åŒ–å·¥å…·ä¼šå‘ç°ï¼ŒåŸæ¥stashçš„å“ªäº›èŠ‚ç‚¹éƒ½æ¶ˆå¤±äº†</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ¢å¤å·¥ä½œè¿›åº¦</span><span class="token function">git</span> stash pop <span class="token punctuation">[</span>--index<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>stash<span class="token operator">></span><span class="token punctuation">]</span>--index å‚æ•°ï¼šä¸ä»…æ¢å¤å·¥ä½œåŒºï¼Œè¿˜æ¢å¤æš‚å­˜åŒº<span class="token operator">&lt;</span>stash<span class="token operator">></span> æŒ‡å®šæ¢å¤æŸä¸€ä¸ªå…·ä½“è¿›åº¦ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ªå‚æ•°ï¼Œé»˜è®¤æ¢å¤æœ€æ–°è¿›åº¦<span class="token comment"># è¿™æ˜¯git stashä¿å­˜è¿›åº¦çš„å®Œæ•´å‘½ä»¤å½¢å¼</span><span class="token function">git</span> stash <span class="token punctuation">[</span>save message<span class="token punctuation">]</span> <span class="token punctuation">[</span>-k<span class="token operator">|</span>--no-keep-index<span class="token punctuation">]</span> <span class="token punctuation">[</span>--patch<span class="token punctuation">]</span>-kå’Œ--no-keep-indexæŒ‡å®šä¿å­˜è¿›åº¦åï¼Œæ˜¯å¦é‡ç½®æš‚å­˜åŒº--patch ä¼šæ˜¾ç¤ºå·¥ä½œåŒºå’ŒHEADçš„å·®å¼‚,é€šè¿‡ç¼–è¾‘å·®å¼‚æ–‡ä»¶ï¼Œæ’é™¤ä¸éœ€è¦ä¿å­˜çš„å†…å®¹ã€‚å’Œgit <span class="token function">add</span> -på‘½ä»¤ç±»ä¼¼ä½¿ç”¨saveå¯ä»¥å¯¹è¿›åº¦æ·»åŠ å¤‡æ³¨<span class="token comment"># git stash save "è¿™æ˜¯ä¿å­˜çš„è¿›åº¦"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="8-Gitåªä»æš‚å­˜åŒºåˆ é™¤ï¼Œä»å·¥ä½œç©ºé—´åˆ é™¤çš„å‘½ä»¤åˆ†åˆ«æ˜¯ä»€ä¹ˆ"><a href="#8-Gitåªä»æš‚å­˜åŒºåˆ é™¤ï¼Œä»å·¥ä½œç©ºé—´åˆ é™¤çš„å‘½ä»¤åˆ†åˆ«æ˜¯ä»€ä¹ˆ" class="headerlink" title="8. Gitåªä»æš‚å­˜åŒºåˆ é™¤ï¼Œä»å·¥ä½œç©ºé—´åˆ é™¤çš„å‘½ä»¤åˆ†åˆ«æ˜¯ä»€ä¹ˆ?"></a>8. Gitåªä»æš‚å­˜åŒºåˆ é™¤ï¼Œä»å·¥ä½œç©ºé—´åˆ é™¤çš„å‘½ä»¤åˆ†åˆ«æ˜¯ä»€ä¹ˆ?</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> <span class="token function">rm</span> --cached<span class="token function">git</span> <span class="token function">rm</span><span class="token function">git</span> commit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="9-Gitæ ‡ç­¾çš„ä½¿ç”¨"><a href="#9-Gitæ ‡ç­¾çš„ä½¿ç”¨" class="headerlink" title="9. Gitæ ‡ç­¾çš„ä½¿ç”¨"></a>9. Gitæ ‡ç­¾çš„ä½¿ç”¨</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åˆ—å‡ºç°æœ‰çš„æ ‡ç­¾</span><span class="token function">git</span> tag<span class="token comment"># æ‰“æ ‡ç­¾</span><span class="token function">git</span> tag -a v1.01 -m <span class="token string">"Relase version 1.01"</span><span class="token comment"># æŸ¥çœ‹ç›¸åº”æ ‡ç­¾çš„ç‰ˆæœ¬ä¿¡æ¯</span><span class="token function">git</span> show v1.4<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>-a é€‰é¡¹,åˆ›å»ºä¸€ä¸ªå«é™„æ³¨ç±»å‹çš„æ ‡ç­¾</li><li>-m é€‰é¡¹,æŒ‡å®šäº†å¯¹åº”çš„æ ‡ç­¾è¯´æ˜</li></ul><h2 id="9-Gitåˆ†æ”¯çš„ä½¿ç”¨"><a href="#9-Gitåˆ†æ”¯çš„ä½¿ç”¨" class="headerlink" title="9. Gitåˆ†æ”¯çš„ä½¿ç”¨"></a>9. Gitåˆ†æ”¯çš„ä½¿ç”¨</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯</span><span class="token function">git</span> branch<span class="token comment"># æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯</span><span class="token function">git</span> branch -r<span class="token comment"># åˆ›å»ºæœ¬åœ°åˆ†æ”¯(æ³¨æ„æ–°åˆ†æ”¯åˆ›å»ºåä¸ä¼šè‡ªåŠ¨åˆ‡æ¢ä¸ºå½“å‰åˆ†æ”¯)</span><span class="token function">git</span> branch <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token comment"># åˆ‡æ¢åˆ†æ”¯</span><span class="token function">git</span> checkout <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token comment"># åˆ›å»ºæ–°åˆ†æ”¯å¹¶ç«‹å³åˆ‡æ¢åˆ°æ–°åˆ†æ”¯</span><span class="token function">git</span> checkout -b <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token comment"># å¼ºåˆ¶åˆ é™¤ä¸€ä¸ªåˆ†æ”¯</span><span class="token function">git</span> branch -D <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token comment"># åˆå¹¶åˆ†æ”¯(å°†åç§°ä¸º[name]çš„åˆ†æ”¯ä¸å½“å‰åˆ†æ”¯åˆå¹¶)</span><span class="token function">git</span> merge <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token comment"># æŸ¥çœ‹å„ä¸ªåˆ†æ”¯æœ€åæäº¤ä¿¡æ¯</span><span class="token function">git</span> br -v<span class="token comment"># æŸ¥çœ‹å·²ç»è¢«åˆå¹¶åˆ°å½“å‰åˆ†æ”¯çš„åˆ†æ”¯</span><span class="token function">git</span> br --merged<span class="token comment"># æŸ¥çœ‹å°šæœªè¢«åˆå¹¶åˆ°å½“å‰åˆ†æ”¯çš„åˆ†æ”¯</span><span class="token function">git</span> br --no-merged<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="10-ä»‹ç»Gitå†²çªå¤„ç†ç»éªŒï¼Œä»¥åŠmergeå’Œrebaseä¸­çš„ourså’Œtheirsçš„å·®åˆ«ã€‚"><a href="#10-ä»‹ç»Gitå†²çªå¤„ç†ç»éªŒï¼Œä»¥åŠmergeå’Œrebaseä¸­çš„ourså’Œtheirsçš„å·®åˆ«ã€‚" class="headerlink" title="10. ä»‹ç»Gitå†²çªå¤„ç†ç»éªŒï¼Œä»¥åŠmergeå’Œrebaseä¸­çš„ourså’Œtheirsçš„å·®åˆ«ã€‚"></a>10. ä»‹ç»Gitå†²çªå¤„ç†ç»éªŒï¼Œä»¥åŠmergeå’Œrebaseä¸­çš„ourså’Œtheirsçš„å·®åˆ«ã€‚</h2><p>mergeå’Œrebaseå¯¹äºourså’Œtheirsçš„å®šä¹‰æ˜¯å®Œå…¨ç›¸åçš„ã€‚åœ¨mergeæ—¶ï¼ŒoursæŒ‡ä»£çš„æ˜¯å½“å‰åˆ†æ”¯ï¼Œtheirsä»£è¡¨éœ€è¦è¢«åˆå¹¶çš„åˆ†æ”¯ã€‚è€Œåœ¨rebaseè¿‡ç¨‹ä¸­ï¼ŒoursæŒ‡å‘äº†ä¿®æ”¹å‚è€ƒåˆ†æ”¯ï¼Œtheirså´æ˜¯å½“å‰åˆ†æ”¯ã€‚å› ä¸ºrebase éšå«äº†ä¸€ä¸ª<code>git checkout upstream</code>çš„è¿‡ç¨‹ï¼Œå°†<code>HEAD</code>ä»localåˆ†æ”¯å˜æˆäº†upstreamåˆ†æ”¯ã€‚gitä¼šåœ¨rebaseç»“æŸåæ’¤é”€è¿™ä¸ªæ”¹å˜ï¼Œä½†å®ƒå·²ç»ä¸å¯é¿å…åœ°å½±å“äº†å†²çªçš„çŠ¶æ€ï¼Œä½¿rebaseä¸­ourså’Œtheirsçš„å®šä¹‰ä¸merge æˆªç„¶ç›¸åã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨oursä¸theirsæ—¶è¯·æ ¼å¤–å°å¿ƒã€‚</p><h2 id="11-Gitè¿œç¨‹æ“ä½œç›¸å…³"><a href="#11-Gitè¿œç¨‹æ“ä½œç›¸å…³" class="headerlink" title="11. Gitè¿œç¨‹æ“ä½œç›¸å…³"></a>11. Gitè¿œç¨‹æ“ä½œç›¸å…³</h2><h3 id="1-clone"><a href="#1-clone" class="headerlink" title="(1). clone"></a>(1). clone</h3><blockquote><p>git clone &lt;ç‰ˆæœ¬åº“çš„ç½‘å€&gt;<br>git clone &lt;ç‰ˆæœ¬åº“çš„ç½‘å€&gt; &lt;æœ¬åœ°ç›®å½•å&gt;</p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å…‹éš†jQueryçš„ç‰ˆæœ¬åº“</span> <span class="token function">git</span> clone https://github.com/jquery/jquery.git  <span class="token function">git</span> clone -o jQuery https://github.com/jquery/jquery.git<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-remote"><a href="#2-remote" class="headerlink" title="(2). remote"></a>(2). remote</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åˆ—å‡ºæ‰€æœ‰è¿œç¨‹ä¸»æœº</span><span class="token function">git</span> remote<span class="token comment"># ä½¿ç”¨-vé€‰é¡¹ï¼Œå¯ä»¥å‚çœ‹è¿œç¨‹ä¸»æœºçš„ç½‘å€</span><span class="token function">git</span> remote -v <span class="token comment"># å¯ä»¥æŸ¥çœ‹è¯¥ä¸»æœºçš„è¯¦ç»†ä¿¡æ¯</span><span class="token function">git</span> remote show <span class="token operator">&lt;</span>ä¸»æœºå<span class="token operator">></span> <span class="token comment"># æ·»åŠ è¿œç¨‹ä¸»æœº</span><span class="token function">git</span> remote <span class="token function">add</span> <span class="token operator">&lt;</span>ä¸»æœºå<span class="token operator">></span> <span class="token operator">&lt;</span>ç½‘å€<span class="token operator">></span><span class="token comment"># åˆ é™¤è¿œç¨‹ä¸»æœº</span><span class="token function">git</span> remote <span class="token function">rm</span> <span class="token operator">&lt;</span>ä¸»æœºå<span class="token operator">></span><span class="token comment"># ä¿®æ”¹è¿œç¨‹ä¸»æœºåç§°</span><span class="token function">git</span> remote <span class="token function">rename</span> <span class="token operator">&lt;</span>åŸä¸»æœºå<span class="token operator">></span> <span class="token operator">&lt;</span>æ–°ä¸»æœºå<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-fetch"><a href="#3-fetch" class="headerlink" title="(3). fetch"></a>(3). fetch</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å–å›æ‰€æœ‰åˆ†æ”¯(branch)çš„æ›´æ–°åˆ°æœ¬åœ°</span><span class="token function">git</span> fetch <span class="token operator">&lt;</span>è¿œç¨‹ä¸»æœºå<span class="token operator">></span><span class="token comment"># å–å›æŸçš„ç‰¹å®šåˆ†æ”¯çš„æ›´æ–°</span><span class="token function">git</span> fetch <span class="token operator">&lt;</span>è¿œç¨‹ä¸»æœºå<span class="token operator">></span> <span class="token operator">&lt;</span>åˆ†æ”¯å<span class="token operator">></span><span class="token comment"># å–å›originä¸»æœºçš„masteråˆ†æ”¯çš„æ›´æ–°</span><span class="token function">git</span> fetch origin master<span class="token comment"># æ‰€å–å›çš„æ›´æ–°ï¼Œåœ¨æœ¬åœ°ä¸»æœºä¸Šè¦ç”¨â€è¿œç¨‹ä¸»æœºå/åˆ†æ”¯åâ€çš„å½¢å¼è¯»å–ã€‚æ¯”å¦‚originä¸»æœºçš„masterï¼Œå°±è¦ç”¨origin/masterè¯»å–ã€‚å¯ä»¥ä½¿ç”¨git mergeå‘½ä»¤æˆ–è€…git rebaseå‘½ä»¤ï¼Œåœ¨æœ¬åœ°åˆ†æ”¯ä¸Šåˆå¹¶è¿œç¨‹åˆ†æ”¯</span><span class="token function">git</span> merge origin/master<span class="token function">git</span> rebase origin/master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-pull"><a href="#4-pull" class="headerlink" title="(4). pull"></a>(4). pull</h3><blockquote><p>git pull &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;è¿œç¨‹åˆ†æ”¯å&gt;:&lt;æœ¬åœ°åˆ†æ”¯å&gt;</p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å–å›originä¸»æœºçš„nextåˆ†æ”¯ï¼Œä¸æœ¬åœ°çš„masteråˆ†æ”¯åˆå¹¶</span><span class="token function">git</span> pull origin next:master<span class="token comment"># å¦‚æœè¿œç¨‹åˆ†æ”¯æ˜¯ä¸å½“å‰åˆ†æ”¯åˆå¹¶ï¼Œåˆ™å†’å·åé¢çš„éƒ¨åˆ†å¯ä»¥çœç•¥ã€‚</span><span class="token function">git</span> pull origin next<span class="token comment"># ä¸Šé¢çš„å‘½ä»¤å®è´¨ä¸Šç­‰åŒäºå…ˆåšgit fetchï¼Œå†åšgit mergeã€‚</span><span class="token function">git</span> fetch origin<span class="token function">git</span> merge origin/next<span class="token comment"># åˆå¹¶éœ€è¦é‡‡ç”¨rebaseæ¨¡å¼</span><span class="token function">git</span> pull --rebase <span class="token operator">&lt;</span>è¿œç¨‹ä¸»æœºå<span class="token operator">></span> <span class="token operator">&lt;</span>è¿œç¨‹åˆ†æ”¯å<span class="token operator">></span>:<span class="token operator">&lt;</span>æœ¬åœ°åˆ†æ”¯å<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-push"><a href="#5-push" class="headerlink" title="(5). push"></a>(5). push</h3><blockquote><p>git push &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;æœ¬åœ°åˆ†æ”¯å&gt;:&lt;è¿œç¨‹åˆ†æ”¯å&gt;</p></blockquote><p><strong>æ³¨æ„</strong>:åˆ†æ”¯æ¨é€é¡ºåºçš„å†™æ³•æ˜¯â€&lt;æ¥æºåœ°&gt;:&lt;ç›®çš„åœ°&gt;â€ï¼Œæ‰€ä»¥git pullæ˜¯â€&lt;è¿œç¨‹åˆ†æ”¯&gt;:&lt;æœ¬åœ°åˆ†æ”¯&gt;â€ï¼Œè€Œgit pushæ˜¯â€&lt;æœ¬åœ°åˆ†æ”¯&gt;:&lt;è¿œç¨‹åˆ†æ”¯&gt;â€ã€‚</p><ul><li>å¦‚æœçœç•¥è¿œç¨‹åˆ†æ”¯åï¼Œåˆ™è¡¨ç¤ºå°†æœ¬åœ°åˆ†æ”¯æ¨é€ä¸ä¹‹å­˜åœ¨â€è¿½è¸ªå…³ç³»â€çš„è¿œç¨‹åˆ†æ”¯(é€šå¸¸ä¸¤è€…åŒå)ï¼Œå¦‚æœè¯¥è¿œç¨‹åˆ†æ”¯ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè¢«æ–°å»ºã€‚</li><li>å¦‚æœçœç•¥æœ¬åœ°åˆ†æ”¯åï¼Œåˆ™è¡¨ç¤ºåˆ é™¤æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯ï¼Œå› ä¸ºè¿™ç­‰åŒäºæ¨é€ä¸€ä¸ªç©ºçš„æœ¬åœ°åˆ†æ”¯åˆ°è¿œç¨‹åˆ†æ”¯ã€‚</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å°†æœ¬åœ°çš„masteråˆ†æ”¯æ¨é€åˆ°originä¸»æœºçš„masteråˆ†æ”¯ã€‚å¦‚æœåè€…ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè¢«æ–°å»º</span><span class="token function">git</span> push origin master<span class="token comment"># çœç•¥äº†æœ¬åœ°åˆ†æ”¯ï¼Œä»¥ä¸‹ç­‰åŒï¼Œåˆ é™¤originä¸»æœºçš„masteråˆ†æ”¯</span><span class="token function">git</span> push origin :master<span class="token function">git</span> push origin --delete master<span class="token comment"># å¦‚æœå½“å‰åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯ä¹‹é—´å­˜åœ¨è¿½è¸ªå…³ç³»ï¼Œåˆ™æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯éƒ½å¯ä»¥çœç•¥</span><span class="token function">git</span> push origin<span class="token comment"># å¦‚æœå½“å‰åˆ†æ”¯åªæœ‰ä¸€ä¸ªè¿½è¸ªåˆ†æ”¯ï¼Œé‚£ä¹ˆä¸»æœºåéƒ½å¯ä»¥çœç•¥ã€‚</span><span class="token function">git</span> push<span class="token comment"># å¦‚æœå½“å‰åˆ†æ”¯ä¸å¤šä¸ªä¸»æœºå­˜åœ¨è¿½è¸ªå…³ç³»ï¼Œåˆ™å¯ä»¥ä½¿ç”¨-ué€‰é¡¹æŒ‡å®šä¸€ä¸ªé»˜è®¤ä¸»æœºï¼Œè¿™æ ·åé¢å°±å¯ä»¥ä¸åŠ ä»»ä½•å‚æ•°ä½¿ç”¨git push</span><span class="token function">git</span> push -u origin master<span class="token comment"># ä¸ç®¡æ˜¯å¦å­˜åœ¨å¯¹åº”çš„è¿œç¨‹åˆ†æ”¯ï¼Œå°†æœ¬åœ°çš„æ‰€æœ‰åˆ†æ”¯éƒ½æ¨é€åˆ°è¿œç¨‹ä¸»æœº</span><span class="token function">git</span> push --all origin<span class="token comment"># å¼ºåˆ¶æ¨é€</span><span class="token function">git</span> push --force origin<span class="token comment"># git pushä¸ä¼šæ¨é€æ ‡ç­¾(tag)ï¼Œé™¤éä½¿ç”¨â€“tagsé€‰é¡¹</span><span class="token function">git</span> push origin --tags<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="12-Git-Flowä½¿ç”¨ç®€ä»‹"><a href="#12-Git-Flowä½¿ç”¨ç®€ä»‹" class="headerlink" title="12. Git Flowä½¿ç”¨ç®€ä»‹"></a>12. Git Flowä½¿ç”¨ç®€ä»‹</h2><p>å°±åƒä»£ç éœ€è¦ä»£ç è§„èŒƒä¸€æ ·ï¼Œä»£ç ç®¡ç†åŒæ ·éœ€è¦ä¸€ä¸ªæ¸…æ™°çš„æµç¨‹å’Œè§„èŒƒã€‚ä¸‰ç§å¹¿æ³›ä½¿ç”¨çš„å·¥ä½œæµç¨‹ï¼š</p><ul><li>Git flow</li><li>Github flow</li><li>Gitlab flow</li></ul><p>ä¸‰ç§å·¥ä½œæµç¨‹ï¼Œæœ‰ä¸€ä¸ªå…±åŒç‚¹ï¼šéƒ½é‡‡ç”¨â€åŠŸèƒ½é©±åŠ¨å¼å¼€å‘â€ï¼ˆFeature-driven developmentï¼Œç®€ç§°FDDï¼‰ã€‚å®ƒæŒ‡çš„æ˜¯ï¼Œéœ€æ±‚æ˜¯å¼€å‘çš„èµ·ç‚¹ï¼Œå…ˆæœ‰éœ€æ±‚å†æœ‰åŠŸèƒ½åˆ†æ”¯ï¼ˆfeature branchï¼‰æˆ–è€…è¡¥ä¸åˆ†æ”¯ï¼ˆhotfix branchï¼‰ã€‚å®Œæˆå¼€å‘åï¼Œè¯¥åˆ†æ”¯å°±åˆå¹¶åˆ°ä¸»åˆ†æ”¯ï¼Œç„¶åè¢«åˆ é™¤ã€‚æœ€æ—©è¯ç”Ÿã€å¹¶å¾—åˆ°å¹¿æ³›é‡‡ç”¨çš„ä¸€ç§å·¥ä½œæµç¨‹ï¼Œå°±æ˜¯<a href="http://nvie.com/posts/a-successful-git-branching-model/">Git flow</a>ã€‚</p><p>å®ƒæœ€ä¸»è¦çš„ç‰¹ç‚¹æœ‰ä¸¤ä¸ªã€‚é¦–å…ˆï¼Œé¡¹ç›®å­˜åœ¨ä¸¤ä¸ªé•¿æœŸåˆ†æ”¯ï¼Œåˆ†åˆ«æ˜¯ï¼šä¸»åˆ†æ”¯masterã€å¼€å‘åˆ†æ”¯developã€‚å…¶æ¬¡ï¼Œé¡¹ç›®å­˜åœ¨ä¸‰ç§çŸ­æœŸåˆ†æ”¯ï¼Œåˆ†åˆ«æ˜¯ï¼šåŠŸèƒ½åˆ†æ”¯ï¼ˆfeature branchï¼‰ã€è¡¥ä¸åˆ†æ”¯ï¼ˆhotfix branchï¼‰ã€é¢„å‘åˆ†æ”¯ï¼ˆrelease branchï¼‰ï¼Œä¸€æ—¦å®Œæˆå¼€å‘ï¼Œå®ƒä»¬å°±ä¼šè¢«åˆå¹¶è¿›developæˆ–masterï¼Œç„¶åè¢«åˆ é™¤ã€‚</p><h3 id="1-Git-Flowæµç¨‹å›¾"><a href="#1-Git-Flowæµç¨‹å›¾" class="headerlink" title="(1). Git Flowæµç¨‹å›¾"></a>(1). Git Flowæµç¨‹å›¾</h3><p><img src="https://statics.sh1a.qingstor.com/2018/09/24/imagegit-flow.png" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/09/24/imagegit-flow.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="Git Flowæµç¨‹å›¾"></p><h3 id="2-Git-Flowå¸¸ç”¨çš„åˆ†æ”¯"><a href="#2-Git-Flowå¸¸ç”¨çš„åˆ†æ”¯" class="headerlink" title="(2). Git Flowå¸¸ç”¨çš„åˆ†æ”¯"></a>(2). Git Flowå¸¸ç”¨çš„åˆ†æ”¯</h3><ul><li><code>Production</code>åˆ†æ”¯ã€‚ä¹Ÿå°±æ˜¯æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„Masteråˆ†æ”¯ï¼Œè¿™ä¸ªåˆ†æ”¯æœ€è¿‘å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒçš„ä»£ç ï¼Œæœ€è¿‘å‘å¸ƒçš„Releaseï¼Œ è¿™ä¸ªåˆ†æ”¯åªèƒ½ä»å…¶ä»–åˆ†æ”¯åˆå¹¶ï¼Œä¸èƒ½åœ¨è¿™ä¸ªåˆ†æ”¯ç›´æ¥ä¿®æ”¹ã€‚</li><li><code>Develop</code>åˆ†æ”¯ã€‚è¿™ä¸ªåˆ†æ”¯æ˜¯æˆ‘ä»¬æ˜¯æˆ‘ä»¬çš„ä¸»å¼€å‘åˆ†æ”¯ï¼ŒåŒ…å«æ‰€æœ‰è¦å‘å¸ƒåˆ°ä¸‹ä¸€ä¸ªReleaseçš„ä»£ç ï¼Œè¿™ä¸ªä¸»è¦åˆå¹¶ä¸å…¶ä»–åˆ†æ”¯ï¼Œæ¯”å¦‚Featureåˆ†æ”¯ã€‚</li><li><code>Feature</code>åˆ†æ”¯ã€‚è¿™ä¸ªåˆ†æ”¯ä¸»è¦æ˜¯ç”¨æ¥å¼€å‘ä¸€ä¸ªæ–°çš„åŠŸèƒ½ï¼Œä¸€æ—¦å¼€å‘å®Œæˆï¼Œæˆ‘ä»¬åˆå¹¶å›Developåˆ†æ”¯è¿›å…¥ä¸‹ä¸€ä¸ªReleaseã€‚</li><li><code>Release</code>åˆ†æ”¯ã€‚å½“ä½ éœ€è¦ä¸€ä¸ªå‘å¸ƒä¸€ä¸ªæ–°Releaseçš„æ—¶å€™ï¼Œæˆ‘ä»¬åŸºäºDevelopåˆ†æ”¯åˆ›å»ºä¸€ä¸ªReleaseåˆ†æ”¯ï¼Œå®ŒæˆReleaseåï¼Œæˆ‘ä»¬åˆå¹¶åˆ°Masterå’ŒDevelopåˆ†æ”¯ã€‚</li><li><code>Hotfix</code>åˆ†æ”¯ã€‚å½“æˆ‘ä»¬åœ¨Productionå‘ç°æ–°çš„Bugæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªHotfix, å®ŒæˆHotfixåï¼Œæˆ‘ä»¬åˆå¹¶å›Masterå’ŒDevelopåˆ†æ”¯ï¼Œæ‰€ä»¥Hotfixçš„æ”¹åŠ¨ä¼šè¿›å…¥ä¸‹ä¸€ä¸ªReleaseã€‚</li></ul><h3 id="3-Git-Flowä»£ç ç¤ºä¾‹"><a href="#3-Git-Flowä»£ç ç¤ºä¾‹" class="headerlink" title="(3). Git Flowä»£ç ç¤ºä¾‹"></a>(3). Git Flowä»£ç ç¤ºä¾‹</h3><h4 id="a-åˆ›å»ºdevelopåˆ†æ”¯"><a href="#a-åˆ›å»ºdevelopåˆ†æ”¯" class="headerlink" title="a. åˆ›å»ºdevelopåˆ†æ”¯"></a>a. åˆ›å»ºdevelopåˆ†æ”¯</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> branch develop<span class="token function">git</span> push -u origin develop<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="b-å¼€å§‹æ–°Featureå¼€å‘"><a href="#b-å¼€å§‹æ–°Featureå¼€å‘" class="headerlink" title="b. å¼€å§‹æ–°Featureå¼€å‘"></a>b. å¼€å§‹æ–°Featureå¼€å‘</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> checkout -b some-feature develop<span class="token comment"># Optionally, push branch to origin:</span><span class="token function">git</span> push -u origin some-feature<span class="token comment"># åšä¸€äº›æ”¹åŠ¨</span><span class="token function">git</span> status<span class="token function">git</span> <span class="token function">add</span> some-file<span class="token function">git</span> commit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="c-å®ŒæˆFeature"><a href="#c-å®ŒæˆFeature" class="headerlink" title="c. å®ŒæˆFeature"></a>c. å®ŒæˆFeature</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> pull origin develop<span class="token function">git</span> checkout develop<span class="token function">git</span> merge --no-ff some-feature<span class="token function">git</span> push origin develop<span class="token function">git</span> branch -d some-feature<span class="token comment"># If you pushed branch to origin:</span><span class="token function">git</span> push origin --delete some-feature<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="d-å¼€å§‹Relase"><a href="#d-å¼€å§‹Relase" class="headerlink" title="d. å¼€å§‹Relase"></a>d. å¼€å§‹Relase</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> checkout -b release-0.1.0 develop<span class="token comment"># Optional: Bump version number, commit</span><span class="token comment"># Prepare release, commit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="e-å®ŒæˆRelease"><a href="#e-å®ŒæˆRelease" class="headerlink" title="e. å®ŒæˆRelease"></a>e. å®ŒæˆRelease</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> checkout master<span class="token function">git</span> merge --no-ff release-0.1.0<span class="token function">git</span> push<span class="token function">git</span> checkout develop<span class="token function">git</span> merge --no-ff release-0.1.0<span class="token function">git</span> push<span class="token function">git</span> branch -d release-0.1.0<span class="token comment"># If you pushed branch to origin:</span><span class="token function">git</span> push origin --delete release-0.1.0   <span class="token function">git</span> tag -a v0.1.0 master<span class="token function">git</span> push --tags<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="f-å¼€å§‹Hotfix"><a href="#f-å¼€å§‹Hotfix" class="headerlink" title="f. å¼€å§‹Hotfix"></a>f. å¼€å§‹Hotfix</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> checkout -b hotfix-0.1.1 master<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="g-å®ŒæˆHotfix"><a href="#g-å®ŒæˆHotfix" class="headerlink" title="g. å®ŒæˆHotfix"></a>g. å®ŒæˆHotfix</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> checkout master<span class="token function">git</span> merge --no-ff hotfix-0.1.1<span class="token function">git</span> push<span class="token function">git</span> checkout develop<span class="token function">git</span> merge --no-ff hotfix-0.1.1<span class="token function">git</span> push<span class="token function">git</span> branch -d hotfix-0.1.1<span class="token function">git</span> tag -a v0.1.1 master<span class="token function">git</span> push --tags<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaé¢å‘å¯¹è±¡è®¾è®¡ä¹‹çŠ¶æ€æ¨¡å¼</title>
      <link href="/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-zhuang-tai-mo-shi/"/>
      <url>/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-zhuang-tai-mo-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€æ¨¡å¼åŠ¨æœº"><a href="#ä¸€ã€æ¨¡å¼åŠ¨æœº" class="headerlink" title="ä¸€ã€æ¨¡å¼åŠ¨æœº"></a>ä¸€ã€æ¨¡å¼åŠ¨æœº</h2><p>åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºå–å†³äºä¸€ä¸ªæˆ–å¤šä¸ªåŠ¨æ€å˜åŒ–çš„å±æ€§ï¼Œè¿™æ ·çš„å±æ€§å«åšçŠ¶æ€ï¼Œè¿™æ ·çš„å¯¹è±¡å«åšæœ‰çŠ¶æ€çš„(<code>stateful</code>)å¯¹è±¡ï¼Œè¿™æ ·çš„å¯¹è±¡çŠ¶æ€æ˜¯ä»äº‹å…ˆå®šä¹‰å¥½çš„ä¸€ç³»åˆ—å€¼ä¸­å–å‡ºçš„ã€‚å½“ä¸€ä¸ªè¿™æ ·çš„å¯¹è±¡ä¸å¤–éƒ¨äº‹ä»¶äº§ç”Ÿäº’åŠ¨æ—¶ï¼Œå…¶å†…éƒ¨çŠ¶æ€å°±ä¼šæ”¹å˜ï¼Œä»è€Œä½¿å¾—ç³»ç»Ÿçš„è¡Œä¸ºä¹Ÿéšä¹‹å‘ç”Ÿå˜åŒ–ã€‚</p><h2 id="äºŒã€æ¨¡å¼å®šä¹‰"><a href="#äºŒã€æ¨¡å¼å®šä¹‰" class="headerlink" title="äºŒã€æ¨¡å¼å®šä¹‰"></a>äºŒã€æ¨¡å¼å®šä¹‰</h2><blockquote><p>**çŠ¶æ€æ¨¡å¼(<code>State Pattern</code>)**ï¼šå…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºï¼Œå¯¹è±¡çœ‹èµ·æ¥ä¼¼ä¹ä¿®æ”¹äº†å®ƒçš„ç±»ã€‚å…¶åˆ«åä¸ºçŠ¶æ€å¯¹è±¡(<code>Objects for States</code>)ï¼ŒçŠ¶æ€æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡è¡Œä¸ºå‹æ¨¡å¼ã€‚</p></blockquote><h2 id="ä¸‰ã€æ¨¡å¼ç»“æ„"><a href="#ä¸‰ã€æ¨¡å¼ç»“æ„" class="headerlink" title="ä¸‰ã€æ¨¡å¼ç»“æ„"></a>ä¸‰ã€æ¨¡å¼ç»“æ„</h2><h3 id="1-è§’è‰²ç»„æˆï¼š"><a href="#1-è§’è‰²ç»„æˆï¼š" class="headerlink" title="1. è§’è‰²ç»„æˆï¼š"></a>1. è§’è‰²ç»„æˆï¼š</h3><p>çŠ¶æ€æ¨¡å¼åŒ…å«å¦‚ä¸‹è§’è‰²ï¼š</p><ul><li><code>Context</code>: ç¯å¢ƒç±»</li><li><code>State</code>: æŠ½è±¡çŠ¶æ€è§’è‰²</li><li><code>ConcreteState</code>: å…·ä½“çŠ¶æ€è§’è‰²ç±»</li></ul><h3 id="2-ç»“æ„å›¾ï¼š"><a href="#2-ç»“æ„å›¾ï¼š" class="headerlink" title="2. ç»“æ„å›¾ï¼š"></a>2. ç»“æ„å›¾ï¼š</h3><p><img src="https://statics.sh1a.qingstor.com/2018/09/21/state-structure.jpg" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/09/21/state-structure.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="çŠ¶æ€æ¨¡å¼ç»“æ„å›¾"></p><h3 id="3-æ—¶åºå›¾ï¼š"><a href="#3-æ—¶åºå›¾ï¼š" class="headerlink" title="3. æ—¶åºå›¾ï¼š"></a>3. æ—¶åºå›¾ï¼š</h3><p><img src="https://statics.sh1a.qingstor.com/2018/09/21/state-seq.jpg" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/09/21/state-seq.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="çŠ¶æ€æ¨¡å¼æ—¶åºå›¾"></p><h2 id="å››ã€ç¤ºä¾‹ä»£ç "><a href="#å››ã€ç¤ºä¾‹ä»£ç " class="headerlink" title="å››ã€ç¤ºä¾‹ä»£ç "></a>å››ã€ç¤ºä¾‹ä»£ç </h2><p>é¦–å…ˆï¼Œæ˜¯æŠ½è±¡çš„çŠ¶æ€è§’è‰²æ¥å£ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * æŠ½è±¡çŠ¶æ€è§’è‰² * Created by blinkfox on 16/7/12. */</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IState</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * æŠ½è±¡æ–¹æ³•1     */</span>    <span class="token keyword">void</span> <span class="token function">handle1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * æŠ½è±¡æ–¹æ³•2     */</span>    <span class="token keyword">void</span> <span class="token function">handle2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥ï¼Œæ˜¯å¤šä¸ªå…·ä½“çš„çŠ¶æ€è§’è‰²ç±»ï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å…·ä½“çŠ¶æ€è§’è‰²ç±»1 * Created by blinkfox on 16/7/12. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteState1</span> <span class="token keyword">implements</span> <span class="token class-name">IState</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * å…·ä½“çŠ¶æ€è§’è‰²ç±»1ä¸­çš„æ–¹æ³•1     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handle1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ‰§è¡Œäº†å…·ä½“çŠ¶æ€è§’è‰²ç±»1ä¸­çš„æ–¹æ³•1..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * å…·ä½“çŠ¶æ€è§’è‰²ç±»1ä¸­çš„æ–¹æ³•2     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handle2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ‰§è¡Œäº†å…·ä½“çŠ¶æ€è§’è‰²ç±»1ä¸­çš„æ–¹æ³•2..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å…·ä½“çŠ¶æ€è§’è‰²ç±»2 * Created by blinkfox on 16/7/12. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteState2</span> <span class="token keyword">implements</span> <span class="token class-name">IState</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * å…·ä½“çŠ¶æ€è§’è‰²ç±»2ä¸­çš„æ–¹æ³•1     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handle1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ‰§è¡Œäº†å…·ä½“çŠ¶æ€è§’è‰²ç±»2ä¸­çš„æ–¹æ³•1..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * å…·ä½“çŠ¶æ€è§’è‰²ç±»2ä¸­çš„æ–¹æ³•2     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handle2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ‰§è¡Œäº†å…·ä½“çŠ¶æ€è§’è‰²ç±»2ä¸­çš„æ–¹æ³•2..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åï¼Œæ˜¯ç¯å¢ƒç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * ç¯å¢ƒè§’è‰²ç±» * Created by blinkfox on 16/7/12. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Context</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// å½“å‰çŠ¶æ€</span>    <span class="token keyword">private</span> <span class="token class-name">IState</span> state<span class="token punctuation">;</span>    <span class="token comment">/**     * æ„é€ æ–¹æ³•     * @param state     */</span>    <span class="token keyword">public</span> <span class="token class-name">Context</span><span class="token punctuation">(</span><span class="token class-name">IState</span> state<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> state<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * æ–¹æ³•1     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handle1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span><span class="token function">handle1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * æ–¹æ³•2     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handle2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span><span class="token function">handle2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åï¼Œæ˜¯ç”¨äºæµ‹è¯•çŠ¶æ€æ¨¡å¼çš„å®¢æˆ·ç«¯åœºæ™¯ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * çŠ¶æ€æ¨¡å¼çš„å®¢æˆ·ç«¯åœºæ™¯ç´¯ * Created by blinkfox on 16/7/12. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StateClient</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Context</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ConcreteState1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        context<span class="token punctuation">.</span><span class="token function">handle1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        context<span class="token punctuation">.</span><span class="token function">handle2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="äº”ã€æ¨¡å¼åˆ†æ"><a href="#äº”ã€æ¨¡å¼åˆ†æ" class="headerlink" title="äº”ã€æ¨¡å¼åˆ†æ"></a>äº”ã€æ¨¡å¼åˆ†æ</h2><ul><li>çŠ¶æ€æ¨¡å¼æè¿°äº†å¯¹è±¡çŠ¶æ€çš„å˜åŒ–ä»¥åŠå¯¹è±¡å¦‚ä½•åœ¨æ¯ä¸€ç§çŠ¶æ€ä¸‹è¡¨ç°å‡ºä¸åŒçš„è¡Œä¸ºã€‚</li><li>çŠ¶æ€æ¨¡å¼çš„å…³é”®æ˜¯å¼•å…¥äº†ä¸€ä¸ªæŠ½è±¡æ¥å£æ¥ä¸“é—¨è¡¨ç¤ºå¯¹è±¡çš„çŠ¶æ€ï¼Œè¿™ä¸ªç±»æˆ‘ä»¬å«åšæŠ½è±¡çŠ¶æ€æ¥å£ï¼Œè€Œå¯¹è±¡çš„æ¯ä¸€ç§å…·ä½“çŠ¶æ€ç±»éƒ½å®ç°äº†è¯¥ç±»ï¼Œå¹¶åœ¨ä¸åŒå…·ä½“çŠ¶æ€ç±»ä¸­å®ç°äº†ä¸åŒçŠ¶æ€çš„è¡Œä¸ºï¼ŒåŒ…æ‹¬å„ç§çŠ¶æ€ä¹‹é—´çš„è½¬æ¢ã€‚</li></ul><p>åœ¨çŠ¶æ€æ¨¡å¼ç»“æ„ä¸­éœ€è¦ç†è§£ç¯å¢ƒç±»ä¸æŠ½è±¡çŠ¶æ€ç±»çš„ä½œç”¨ï¼š</p><ul><li>ç¯å¢ƒç±»å®é™…ä¸Šå°±æ˜¯æ‹¥æœ‰çŠ¶æ€çš„å¯¹è±¡ï¼Œç¯å¢ƒç±»æœ‰æ—¶å€™å¯ä»¥å……å½“çŠ¶æ€ç®¡ç†å™¨(State Manager)çš„è§’è‰²ï¼Œå¯ä»¥åœ¨ç¯å¢ƒç±»ä¸­å¯¹çŠ¶æ€è¿›è¡Œåˆ‡æ¢æ“ä½œã€‚</li><li>æŠ½è±¡çŠ¶æ€ç±»å¯ä»¥æ˜¯æŠ½è±¡ç±»ï¼Œä¹Ÿå¯ä»¥æ˜¯æ¥å£ï¼Œä¸åŒçŠ¶æ€ç±»å°±æ˜¯ç»§æ‰¿è¿™ä¸ªçˆ¶ç±»çš„ä¸åŒå­ç±»ï¼ŒçŠ¶æ€ç±»çš„äº§ç”Ÿæ˜¯ç”±äºç¯å¢ƒç±»å­˜åœ¨å¤šä¸ªçŠ¶æ€ï¼ŒåŒæ—¶è¿˜æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š è¿™äº›çŠ¶æ€ç»å¸¸éœ€è¦åˆ‡æ¢ï¼Œåœ¨ä¸åŒçš„çŠ¶æ€ä¸‹å¯¹è±¡çš„è¡Œä¸ºä¸åŒã€‚å› æ­¤å¯ä»¥å°†ä¸åŒå¯¹è±¡ä¸‹çš„è¡Œä¸ºå•ç‹¬æå–å‡ºæ¥å°è£…åœ¨å…·ä½“çš„çŠ¶æ€ç±»ä¸­ï¼Œä½¿å¾—ç¯å¢ƒç±»å¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶å¯ä»¥æ”¹å˜å®ƒçš„è¡Œä¸ºï¼Œå¯¹è±¡çœ‹èµ·æ¥ä¼¼ä¹ä¿®æ”¹äº†å®ƒçš„ç±»ï¼Œè€Œå®é™…ä¸Šæ˜¯ç”±äºåˆ‡æ¢åˆ°ä¸åŒçš„å…·ä½“çŠ¶æ€ç±»å®ç°çš„ã€‚ç”±äºç¯å¢ƒç±»å¯ä»¥è®¾ç½®ä¸ºä»»ä¸€å…·ä½“çŠ¶æ€ç±»ï¼Œå› æ­¤å®ƒé’ˆå¯¹æŠ½è±¡çŠ¶æ€ç±»è¿›è¡Œç¼–ç¨‹ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶å¯ä»¥å°†ä»»ä¸€å…·ä½“çŠ¶æ€ç±»çš„å¯¹è±¡è®¾ç½®åˆ°ç¯å¢ƒç±»ä¸­ï¼Œä»è€Œä½¿å¾—ç¯å¢ƒç±»å¯ä»¥æ”¹å˜å†…éƒ¨çŠ¶æ€ï¼Œå¹¶ä¸”æ”¹å˜è¡Œä¸ºã€‚</li></ul><h3 id="1-ä¼˜ç‚¹"><a href="#1-ä¼˜ç‚¹" class="headerlink" title="1. ä¼˜ç‚¹"></a>1. ä¼˜ç‚¹</h3><p>çŠ¶æ€æ¨¡å¼çš„ä¼˜ç‚¹ï¼š</p><ul><li>å°è£…äº†è½¬æ¢è§„åˆ™ã€‚</li><li>æšä¸¾å¯èƒ½çš„çŠ¶æ€ï¼Œåœ¨æšä¸¾çŠ¶æ€ä¹‹å‰éœ€è¦ç¡®å®šçŠ¶æ€ç§ç±»ã€‚</li><li>å°†æ‰€æœ‰ä¸æŸä¸ªçŠ¶æ€æœ‰å…³çš„è¡Œä¸ºæ”¾åˆ°ä¸€ä¸ªç±»ä¸­ï¼Œå¹¶ä¸”å¯ä»¥æ–¹ä¾¿åœ°å¢åŠ æ–°çš„çŠ¶æ€ï¼Œåªéœ€è¦æ”¹å˜å¯¹è±¡çŠ¶æ€å³å¯æ”¹å˜å¯¹è±¡çš„è¡Œä¸ºã€‚</li><li>å…è®¸çŠ¶æ€è½¬æ¢é€»è¾‘ä¸çŠ¶æ€å¯¹è±¡åˆæˆä¸€ä½“ï¼Œè€Œä¸æ˜¯æŸä¸€ä¸ªå·¨å¤§çš„æ¡ä»¶è¯­å¥å—ã€‚</li><li>å¯ä»¥è®©å¤šä¸ªç¯å¢ƒå¯¹è±¡å…±äº«ä¸€ä¸ªçŠ¶æ€å¯¹è±¡ï¼Œä»è€Œå‡å°‘ç³»ç»Ÿä¸­å¯¹è±¡çš„ä¸ªæ•°ã€‚</li></ul><h3 id="2-ç¼ºç‚¹"><a href="#2-ç¼ºç‚¹" class="headerlink" title="2. ç¼ºç‚¹"></a>2. ç¼ºç‚¹</h3><p>çŠ¶æ€æ¨¡å¼çš„ç¼ºç‚¹ï¼š</p><ul><li>çŠ¶æ€æ¨¡å¼çš„ä½¿ç”¨å¿…ç„¶ä¼šå¢åŠ ç³»ç»Ÿç±»å’Œå¯¹è±¡çš„ä¸ªæ•°ã€‚</li><li>çŠ¶æ€æ¨¡å¼çš„ç»“æ„ä¸å®ç°éƒ½è¾ƒä¸ºå¤æ‚ï¼Œå¦‚æœä½¿ç”¨ä¸å½“å°†å¯¼è‡´ç¨‹åºç»“æ„å’Œä»£ç çš„æ··ä¹±ã€‚</li><li>çŠ¶æ€æ¨¡å¼å¯¹â€œå¼€é—­åŸåˆ™â€çš„æ”¯æŒå¹¶ä¸å¤ªå¥½ï¼Œå¯¹äºå¯ä»¥åˆ‡æ¢çŠ¶æ€çš„çŠ¶æ€æ¨¡å¼ï¼Œå¢åŠ æ–°çš„çŠ¶æ€ç±»éœ€è¦ä¿®æ”¹é‚£äº›è´Ÿè´£çŠ¶æ€è½¬æ¢çš„æºä»£ç ï¼Œå¦åˆ™æ— æ³•åˆ‡æ¢åˆ°æ–°å¢çŠ¶æ€ï¼›è€Œä¸”ä¿®æ”¹æŸä¸ªçŠ¶æ€ç±»çš„è¡Œä¸ºä¹Ÿéœ€ä¿®æ”¹å¯¹åº”ç±»çš„æºä»£ç ã€‚</li></ul><h3 id="3-é€‚ç”¨ç¯å¢ƒ"><a href="#3-é€‚ç”¨ç¯å¢ƒ" class="headerlink" title="3.é€‚ç”¨ç¯å¢ƒ"></a>3.é€‚ç”¨ç¯å¢ƒ</h3><p>åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨çŠ¶æ€æ¨¡å¼ï¼š</p><ul><li>å¯¹è±¡çš„è¡Œä¸ºä¾èµ–äºå®ƒçš„çŠ¶æ€ï¼ˆå±æ€§ï¼‰å¹¶ä¸”å¯ä»¥æ ¹æ®å®ƒçš„çŠ¶æ€æ”¹å˜è€Œæ”¹å˜å®ƒçš„ç›¸å…³è¡Œä¸ºã€‚</li><li>ä»£ç ä¸­åŒ…å«å¤§é‡ä¸å¯¹è±¡çŠ¶æ€æœ‰å…³çš„æ¡ä»¶è¯­å¥ï¼Œè¿™äº›æ¡ä»¶è¯­å¥çš„å‡ºç°ï¼Œä¼šå¯¼è‡´ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œçµæ´»æ€§å˜å·®ï¼Œä¸èƒ½æ–¹ä¾¿åœ°å¢åŠ å’Œåˆ é™¤çŠ¶æ€ï¼Œä½¿å®¢æˆ·ç±»ä¸ç±»åº“ä¹‹é—´çš„è€¦åˆå¢å¼ºã€‚åœ¨è¿™äº›æ¡ä»¶è¯­å¥ä¸­åŒ…å«äº†å¯¹è±¡çš„è¡Œä¸ºï¼Œè€Œä¸”è¿™äº›æ¡ä»¶å¯¹åº”äºå¯¹è±¡çš„å„ç§çŠ¶æ€ã€‚</li></ul><blockquote><p>çŠ¶æ€æ¨¡å¼åœ¨å·¥ä½œæµæˆ–æ¸¸æˆç­‰ç±»å‹çš„è½¯ä»¶ä¸­å¾—ä»¥å¹¿æ³›ä½¿ç”¨ï¼Œç”šè‡³å¯ä»¥ç”¨äºè¿™äº›ç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½è®¾è®¡ï¼Œå¦‚åœ¨æ”¿åºœOAåŠå…¬ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªæ‰¹æ–‡çš„çŠ¶æ€æœ‰å¤šç§ï¼šå°šæœªåŠç†ï¼›æ­£åœ¨åŠç†ï¼›æ­£åœ¨æ‰¹ç¤ºï¼›æ­£åœ¨å®¡æ ¸ï¼›å·²ç»å®Œæˆç­‰å„ç§çŠ¶æ€ï¼Œè€Œä¸”æ‰¹æ–‡çŠ¶æ€ä¸åŒæ—¶å¯¹æ‰¹æ–‡çš„æ“ä½œä¹Ÿæœ‰æ‰€å·®å¼‚ã€‚ä½¿ç”¨çŠ¶æ€æ¨¡å¼å¯ä»¥æè¿°å·¥ä½œæµå¯¹è±¡ï¼ˆå¦‚æ‰¹æ–‡ï¼‰çš„çŠ¶æ€è½¬æ¢ä»¥åŠä¸åŒçŠ¶æ€ä¸‹å®ƒæ‰€å…·æœ‰çš„è¡Œä¸ºã€‚</p></blockquote><h2 id="å…­ã€æ€»ç»“"><a href="#å…­ã€æ€»ç»“" class="headerlink" title="å…­ã€æ€»ç»“"></a>å…­ã€æ€»ç»“</h2><ul><li>çŠ¶æ€æ¨¡å¼å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºï¼Œå¯¹è±¡çœ‹èµ·æ¥ä¼¼ä¹ä¿®æ”¹äº†å®ƒçš„ç±»ã€‚å…¶åˆ«åä¸ºçŠ¶æ€å¯¹è±¡ï¼ŒçŠ¶æ€æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡è¡Œä¸ºå‹æ¨¡å¼ã€‚</li><li>çŠ¶æ€æ¨¡å¼åŒ…å«ä¸‰ä¸ªè§’è‰²ï¼šç¯å¢ƒç±»åˆç§°ä¸ºä¸Šä¸‹æ–‡ç±»ï¼Œå®ƒæ˜¯æ‹¥æœ‰çŠ¶æ€çš„å¯¹è±¡ï¼Œåœ¨ç¯å¢ƒç±»ä¸­ç»´æŠ¤ä¸€ä¸ªæŠ½è±¡çŠ¶æ€ç±»Stateçš„å®ä¾‹ï¼Œè¿™ä¸ªå®ä¾‹å®šä¹‰å½“å‰çŠ¶æ€ï¼Œåœ¨å…·ä½“å®ç°æ—¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªStateå­ç±»çš„å¯¹è±¡ï¼Œå¯ä»¥å®šä¹‰åˆå§‹çŠ¶æ€ï¼›æŠ½è±¡çŠ¶æ€ç±»ç”¨äºå®šä¹‰ä¸€ä¸ªæ¥å£ä»¥å°è£…ä¸ç¯å¢ƒç±»çš„ä¸€ä¸ªç‰¹å®šçŠ¶æ€ç›¸å…³çš„è¡Œä¸ºï¼›å…·ä½“çŠ¶æ€ç±»æ˜¯æŠ½è±¡çŠ¶æ€ç±»çš„å­ç±»ï¼Œæ¯ä¸€ä¸ªå­ç±»å®ç°ä¸€ä¸ªä¸ç¯å¢ƒç±»çš„ä¸€ä¸ªçŠ¶æ€ç›¸å…³çš„è¡Œä¸ºï¼Œæ¯ä¸€ä¸ªå…·ä½“çŠ¶æ€ç±»å¯¹åº”ç¯å¢ƒçš„ä¸€ä¸ªå…·ä½“çŠ¶æ€ï¼Œä¸åŒçš„å…·ä½“çŠ¶æ€ç±»å…¶è¡Œä¸ºæœ‰æ‰€ä¸åŒã€‚</li><li>çŠ¶æ€æ¨¡å¼æè¿°äº†å¯¹è±¡çŠ¶æ€çš„å˜åŒ–ä»¥åŠå¯¹è±¡å¦‚ä½•åœ¨æ¯ä¸€ç§çŠ¶æ€ä¸‹è¡¨ç°å‡ºä¸åŒçš„è¡Œä¸ºã€‚</li><li>çŠ¶æ€æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹åœ¨äºå°è£…äº†è½¬æ¢è§„åˆ™ï¼Œå¹¶æšä¸¾å¯èƒ½çš„çŠ¶æ€ï¼Œå®ƒå°†æ‰€æœ‰ä¸æŸä¸ªçŠ¶æ€æœ‰å…³çš„è¡Œä¸ºæ”¾åˆ°ä¸€ä¸ªç±»ä¸­ï¼Œå¹¶ä¸”å¯ä»¥æ–¹ä¾¿åœ°å¢åŠ æ–°çš„çŠ¶æ€ï¼Œåªéœ€è¦æ”¹å˜å¯¹è±¡çŠ¶æ€å³å¯æ”¹å˜å¯¹è±¡çš„è¡Œä¸ºï¼Œè¿˜å¯ä»¥è®©å¤šä¸ªç¯å¢ƒå¯¹è±¡å…±äº«ä¸€ä¸ªçŠ¶æ€å¯¹è±¡ï¼Œä»è€Œå‡å°‘ç³»ç»Ÿä¸­å¯¹è±¡çš„ä¸ªæ•°ï¼›å…¶ç¼ºç‚¹åœ¨äºä½¿ç”¨çŠ¶æ€æ¨¡å¼ä¼šå¢åŠ ç³»ç»Ÿç±»å’Œå¯¹è±¡çš„ä¸ªæ•°ï¼Œä¸”çŠ¶æ€æ¨¡å¼çš„ç»“æ„ä¸å®ç°éƒ½è¾ƒä¸ºå¤æ‚ï¼Œå¦‚æœä½¿ç”¨ä¸å½“å°†å¯¼è‡´ç¨‹åºç»“æ„å’Œä»£ç çš„æ··ä¹±ï¼Œå¯¹äºå¯ä»¥åˆ‡æ¢çŠ¶æ€çš„çŠ¶æ€æ¨¡å¼ä¸æ»¡è¶³â€œå¼€é—­åŸåˆ™â€çš„è¦æ±‚ã€‚</li><li>çŠ¶æ€æ¨¡å¼é€‚ç”¨æƒ…å†µåŒ…æ‹¬ï¼šå¯¹è±¡çš„è¡Œä¸ºä¾èµ–äºå®ƒçš„çŠ¶æ€ï¼ˆå±æ€§ï¼‰å¹¶ä¸”å¯ä»¥æ ¹æ®å®ƒçš„çŠ¶æ€æ”¹å˜è€Œæ”¹å˜å®ƒçš„ç›¸å…³è¡Œä¸ºï¼›ä»£ç ä¸­åŒ…å«å¤§é‡ä¸å¯¹è±¡çŠ¶æ€æœ‰å…³çš„æ¡ä»¶è¯­å¥ï¼Œè¿™äº›æ¡ä»¶è¯­å¥çš„å‡ºç°ï¼Œä¼šå¯¼è‡´ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œçµæ´»æ€§å˜å·®ï¼Œä¸èƒ½æ–¹ä¾¿åœ°å¢åŠ å’Œåˆ é™¤çŠ¶æ€ï¼Œä½¿å®¢æˆ·ç±»ä¸ç±»åº“ä¹‹é—´çš„è€¦åˆå¢å¼ºã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶è®¾è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaé¢å‘å¯¹è±¡è®¾è®¡ä¹‹ä»£ç†æ¨¡å¼</title>
      <link href="/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-dai-li-mo-shi/"/>
      <url>/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-dai-li-mo-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€æ¨¡å¼åŠ¨æœº"><a href="#ä¸€ã€æ¨¡å¼åŠ¨æœº" class="headerlink" title="ä¸€ã€æ¨¡å¼åŠ¨æœº"></a>ä¸€ã€æ¨¡å¼åŠ¨æœº</h2><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå®¢æˆ·ä¸æƒ³æˆ–è€…ä¸èƒ½ç›´æ¥å¼•ç”¨ä¸€ä¸ªå¯¹è±¡ï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡ä¸€ä¸ªç§°ä¹‹ä¸ºâ€œä»£ç†â€çš„ç¬¬ä¸‰è€…æ¥å®ç°é—´æ¥å¼•ç”¨ã€‚ä»£ç†å¯¹è±¡å¯ä»¥åœ¨å®¢æˆ·ç«¯å’Œç›®æ ‡å¯¹è±¡ä¹‹é—´èµ·åˆ°ä¸­ä»‹çš„ä½œç”¨ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ä»£ç†å¯¹è±¡å»æ‰å®¢æˆ·ä¸èƒ½çœ‹åˆ° çš„å†…å®¹å’ŒæœåŠ¡æˆ–è€…æ·»åŠ å®¢æˆ·éœ€è¦çš„é¢å¤–æœåŠ¡ã€‚</p><p>é€šè¿‡å¼•å…¥ä¸€ä¸ªæ–°çš„å¯¹è±¡æ¥å®ç°å¯¹çœŸå®å¯¹è±¡çš„æ“ä½œæˆ–è€…å°†æ–°çš„å¯¹è±¡ä½œä¸ºçœŸå®å¯¹è±¡çš„ä¸€ä¸ªæ›¿èº«ï¼Œè¿™ç§å®ç°æœºåˆ¶å³ä¸ºä»£ç†æ¨¡å¼ï¼Œé€šè¿‡å¼•å…¥ä»£ç†å¯¹è±¡æ¥é—´æ¥è®¿é—®ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™å°±æ˜¯ä»£ç†æ¨¡å¼çš„æ¨¡å¼åŠ¨æœºã€‚</p><h2 id="äºŒã€æ¨¡å¼å®šä¹‰"><a href="#äºŒã€æ¨¡å¼å®šä¹‰" class="headerlink" title="äºŒã€æ¨¡å¼å®šä¹‰"></a>äºŒã€æ¨¡å¼å®šä¹‰</h2><blockquote><p>**ä»£ç†æ¨¡å¼(<code>Proxy Pattern</code>)**ï¼šç»™æŸä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†ï¼Œå¹¶ç”±ä»£ç†å¯¹è±¡æ§åˆ¶å¯¹åŸå¯¹è±¡çš„å¼•ç”¨ã€‚ä»£ç†æ¨¡å¼çš„è‹±æ–‡å«åš<code>Proxy</code>æˆ–<code>Surrogate</code>ï¼Œå®ƒæ˜¯ä¸€ç§å¯¹è±¡ç»“æ„å‹æ¨¡å¼ã€‚</p></blockquote><h2 id="ä¸‰ã€æ¨¡å¼ç»“æ„"><a href="#ä¸‰ã€æ¨¡å¼ç»“æ„" class="headerlink" title="ä¸‰ã€æ¨¡å¼ç»“æ„"></a>ä¸‰ã€æ¨¡å¼ç»“æ„</h2><h3 id="1-è§’è‰²ç»„æˆ"><a href="#1-è§’è‰²ç»„æˆ" class="headerlink" title="1. è§’è‰²ç»„æˆ"></a>1. è§’è‰²ç»„æˆ</h3><p>ä»£ç†æ¨¡å¼åŒ…å«å¦‚ä¸‹è§’è‰²ï¼š</p><ul><li><code>Subject</code>: æŠ½è±¡ä¸»é¢˜è§’è‰²</li><li><code>RealSubject</code>: çœŸå®ä¸»é¢˜è§’è‰²</li><li><code>Proxy</code>: ä»£ç†ä¸»é¢˜è§’è‰²</li></ul><h3 id="2-ç»“æ„å›¾"><a href="#2-ç»“æ„å›¾" class="headerlink" title="2. ç»“æ„å›¾"></a>2. ç»“æ„å›¾</h3><p><img src="https://statics.sh1a.qingstor.com/2018/09/20/proxy-structure.jpg" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/09/20/proxy-structure.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="ä»£ç†æ¨¡å¼ç»“æ„å›¾"></p><h2 id="å››ã€ç¤ºä¾‹ä»£ç "><a href="#å››ã€ç¤ºä¾‹ä»£ç " class="headerlink" title="å››ã€ç¤ºä¾‹ä»£ç "></a>å››ã€ç¤ºä¾‹ä»£ç </h2><p>é¦–å…ˆï¼Œæ˜¯æŠ½è±¡çš„ä¸»é¢˜æ¥å£å’ŒçœŸå®ä¸»é¢˜ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>blinkfox<span class="token punctuation">.</span>patterns<span class="token punctuation">.</span>proxy</span><span class="token punctuation">;</span><span class="token comment">/** * æŠ½è±¡ä¸»é¢˜ç±» * Created by blinkfox on 2017/1/1. */</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ISubject</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * å®šä¹‰ä¸€ä¸ªæ–¹æ³•     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>blinkfox<span class="token punctuation">.</span>patterns<span class="token punctuation">.</span>proxy</span><span class="token punctuation">;</span><span class="token comment">/** * çœŸå®ä¸»é¢˜ç±» * Created by blinkfox on 2017/1/1. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RealSubject</span> <span class="token keyword">implements</span> <span class="token class-name">ISubject</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * å®ç°æ–¹æ³•     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"çœŸå®ä¸»é¢˜ç±»è¯·æ±‚æ–¹æ³•..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åï¼Œæ˜¯ä»£ç†ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>blinkfox<span class="token punctuation">.</span>patterns<span class="token punctuation">.</span>proxy</span><span class="token punctuation">;</span><span class="token comment">/** * ä»£ç†ç±» * Created by blinkfox on 2017/1/1. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Proxy</span> <span class="token keyword">implements</span> <span class="token class-name">ISubject</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">ISubject</span> subject<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token class-name">ISubject</span> subject<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>subject <span class="token operator">=</span> subject<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>subject<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * é¢„å¤„ç†     */</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ‰§è¡Œå‰(before)çš„å¤„ç†..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * å–„åå¤„ç†     */</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ‰§è¡Œå(after)çš„å¤„ç†..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åï¼Œæ˜¯å®¢æˆ·ç«¯åœºæ™¯æµ‹è¯•ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>blinkfox<span class="token punctuation">.</span>patterns<span class="token punctuation">.</span>proxy</span><span class="token punctuation">;</span><span class="token comment">/** * ä»£ç†æ¨¡å¼å®¢æˆ·ç«¯åœºæ™¯ç±» * Created by blinkfox on 2017/1/1. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyClient</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ISubject</span> subject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RealSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Proxy</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>subject<span class="token punctuation">)</span><span class="token punctuation">;</span>        proxy<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="äº”ã€æ¨¡å¼åˆ†æ"><a href="#äº”ã€æ¨¡å¼åˆ†æ" class="headerlink" title="äº”ã€æ¨¡å¼åˆ†æ"></a>äº”ã€æ¨¡å¼åˆ†æ</h2><h3 id="1-ä¼˜ç‚¹"><a href="#1-ä¼˜ç‚¹" class="headerlink" title="1. ä¼˜ç‚¹"></a>1. ä¼˜ç‚¹</h3><p>ä»£ç†æ¨¡å¼çš„ä¼˜ç‚¹ï¼š</p><ul><li>ä»£ç†æ¨¡å¼èƒ½å¤Ÿåè°ƒè°ƒç”¨è€…å’Œè¢«è°ƒç”¨è€…ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šé™ä½äº†ç³» ç»Ÿçš„è€¦åˆåº¦ã€‚</li><li>è¿œç¨‹ä»£ç†ä½¿å¾—å®¢æˆ·ç«¯å¯ä»¥è®¿é—®åœ¨è¿œç¨‹æœºå™¨ä¸Šçš„å¯¹è±¡ï¼Œè¿œç¨‹æœºå™¨å¯èƒ½å…·æœ‰æ›´å¥½çš„è®¡ç®—æ€§èƒ½ä¸å¤„ç†é€Ÿåº¦ï¼Œå¯ä»¥å¿«é€Ÿå“åº”å¹¶å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ã€‚</li><li>è™šæ‹Ÿä»£ç†é€šè¿‡ä½¿ç”¨ä¸€ä¸ªå°å¯¹è±¡æ¥ä»£è¡¨ä¸€ä¸ªå¤§å¯¹è±¡ï¼Œå¯ä»¥å‡å°‘ç³»ç»Ÿèµ„æºçš„æ¶ˆè€—ï¼Œå¯¹ç³»ç»Ÿè¿›è¡Œä¼˜åŒ–å¹¶æé«˜è¿è¡Œé€Ÿåº¦ã€‚</li><li>ä¿æŠ¤ä»£ç†å¯ä»¥æ§åˆ¶å¯¹çœŸå®å¯¹è±¡çš„ä½¿ç”¨æƒé™ã€‚</li></ul><h3 id="2-ç¼ºç‚¹"><a href="#2-ç¼ºç‚¹" class="headerlink" title="2. ç¼ºç‚¹"></a>2. ç¼ºç‚¹</h3><p>ä»£ç†æ¨¡å¼çš„ç¼ºç‚¹ï¼š</p><ul><li>ç”±äºåœ¨å®¢æˆ·ç«¯å’ŒçœŸå®ä¸»é¢˜ä¹‹é—´å¢åŠ äº†ä»£ç†å¯¹è±¡ï¼Œå› æ­¤æœ‰äº›ç±»å‹çš„ä»£ç†æ¨¡å¼å¯èƒ½ä¼šé€ æˆè¯·æ±‚çš„å¤„ç†é€Ÿåº¦å˜æ…¢ã€‚</li><li>å®ç°ä»£ç†æ¨¡å¼éœ€è¦é¢å¤–çš„å·¥ä½œï¼Œæœ‰äº›ä»£ç†æ¨¡å¼çš„å®ç°éå¸¸å¤æ‚ã€‚</li></ul><h3 id="3-é€‚ç”¨ç¯å¢ƒ"><a href="#3-é€‚ç”¨ç¯å¢ƒ" class="headerlink" title="3. é€‚ç”¨ç¯å¢ƒ"></a>3. é€‚ç”¨ç¯å¢ƒ</h3><p>æ ¹æ®ä»£ç†æ¨¡å¼çš„ä½¿ç”¨ç›®çš„ï¼Œå¸¸è§çš„ä»£ç†æ¨¡å¼æœ‰ä»¥ä¸‹å‡ ç§ç±»å‹ï¼š</p><ul><li><strong>è¿œç¨‹(Remote)ä»£ç†</strong>ï¼šä¸ºä¸€ä¸ªä½äºä¸åŒçš„åœ°å€ç©ºé—´çš„å¯¹è±¡æä¾›ä¸€ä¸ªæœ¬åœ°çš„ä»£ç†å¯¹è±¡ï¼Œè¿™ä¸ªä¸åŒçš„åœ°å€ç©ºé—´å¯ä»¥æ˜¯åœ¨åŒä¸€å°ä¸»æœºä¸­ï¼Œä¹Ÿå¯æ˜¯åœ¨å¦ä¸€å°ä¸»æœºä¸­ï¼Œè¿œç¨‹ä»£ç†åˆå«åšå¤§ä½¿(Ambassador)ã€‚</li><li><strong>è™šæ‹Ÿ(Virtual)ä»£ç†</strong>ï¼šå¦‚æœéœ€è¦åˆ›å»ºä¸€ä¸ªèµ„æºæ¶ˆè€—è¾ƒå¤§çš„å¯¹è±¡ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªæ¶ˆè€—ç›¸å¯¹è¾ƒå°çš„å¯¹è±¡æ¥è¡¨ç¤ºï¼ŒçœŸå®å¯¹è±¡åªåœ¨éœ€è¦æ—¶æ‰ä¼šè¢«çœŸæ­£åˆ›å»ºã€‚</li><li><strong>Copy-on-Writeä»£ç†</strong>ï¼šå®ƒæ˜¯è™šæ‹Ÿä»£ç†çš„ä¸€ç§ï¼ŒæŠŠå¤åˆ¶ï¼ˆå…‹éš†ï¼‰æ“ä½œå»¶è¿Ÿ åˆ°åªæœ‰åœ¨å®¢æˆ·ç«¯çœŸæ­£éœ€è¦æ—¶æ‰æ‰§è¡Œã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¯¹è±¡çš„æ·±å…‹éš†æ˜¯ä¸€ä¸ªå¼€é”€è¾ƒå¤§çš„æ“ä½œï¼ŒCopy-on-Writeä»£ç†å¯ä»¥è®©è¿™ä¸ªæ“ä½œå»¶è¿Ÿï¼Œåªæœ‰å¯¹è±¡è¢«ç”¨åˆ°çš„æ—¶å€™æ‰è¢«å…‹éš†ã€‚</li><li><strong>ä¿æŠ¤(Protect or Access)ä»£ç†</strong>ï¼šæ§åˆ¶å¯¹ä¸€ä¸ªå¯¹è±¡çš„è®¿é—®ï¼Œå¯ä»¥ç»™ä¸åŒçš„ç”¨æˆ·æä¾›ä¸åŒçº§åˆ«çš„ä½¿ç”¨æƒé™ã€‚</li><li><strong>ç¼“å†²(Cache)ä»£ç†</strong>ï¼šä¸ºæŸä¸€ä¸ªç›®æ ‡æ“ä½œçš„ç»“æœæä¾›ä¸´æ—¶çš„å­˜å‚¨ç©ºé—´ï¼Œä»¥ä¾¿å¤šä¸ªå®¢æˆ·ç«¯å¯ä»¥å…±äº«è¿™äº›ç»“æœã€‚</li><li><strong>é˜²ç«å¢™(Firewall)ä»£ç†</strong>ï¼šä¿æŠ¤ç›®æ ‡ä¸è®©æ¶æ„ç”¨æˆ·æ¥è¿‘ã€‚</li><li><strong>åŒæ­¥åŒ–(Synchronization)ä»£ç†</strong>ï¼šä½¿å‡ ä¸ªç”¨æˆ·èƒ½å¤ŸåŒæ—¶ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡è€Œæ²¡æœ‰å†²çªã€‚</li><li><strong>æ™ºèƒ½å¼•ç”¨(Smart Reference)ä»£ç†</strong>ï¼šå½“ä¸€ä¸ªå¯¹è±¡è¢«å¼•ç”¨æ—¶ï¼Œæä¾›ä¸€äº›é¢å¤–çš„æ“ä½œï¼Œå¦‚å°†æ­¤å¯¹è±¡è¢«è°ƒç”¨çš„æ¬¡æ•°è®°å½•ä¸‹æ¥ç­‰ã€‚</li></ul><h2 id="æ¨¡å¼æ€»ç»“"><a href="#æ¨¡å¼æ€»ç»“" class="headerlink" title="æ¨¡å¼æ€»ç»“"></a>æ¨¡å¼æ€»ç»“</h2><ul><li>åœ¨ä»£ç†æ¨¡å¼ä¸­ï¼Œè¦æ±‚ç»™æŸä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†ï¼Œå¹¶ç”±ä»£ç†å¯¹è±¡æ§åˆ¶å¯¹åŸå¯¹è±¡çš„å¼•ç”¨ã€‚ä»£ç†æ¨¡å¼çš„è‹±æ–‡å«åšProxyæˆ–Surrogateï¼Œå®ƒæ˜¯ä¸€ç§å¯¹è±¡ç»“æ„å‹æ¨¡å¼ã€‚</li><li>ä»£ç†æ¨¡å¼åŒ…å«ä¸‰ä¸ªè§’è‰²ï¼šæŠ½è±¡ä¸»é¢˜è§’è‰²å£°æ˜äº†çœŸå®ä¸»é¢˜å’Œä»£ç†ä¸»é¢˜çš„å…±åŒæ¥å£ï¼›ä»£ç†ä¸»é¢˜è§’è‰²å†…éƒ¨åŒ…å«å¯¹çœŸå®ä¸»é¢˜çš„å¼•ç”¨ï¼Œä»è€Œå¯ä»¥åœ¨ä»»ä½•æ—¶å€™æ“ä½œçœŸå®ä¸»é¢˜å¯¹è±¡ï¼›çœŸå®ä¸»é¢˜è§’è‰²å®šä¹‰äº†ä»£ç†è§’è‰²æ‰€ä»£è¡¨çš„çœŸå®å¯¹è±¡ï¼Œåœ¨çœŸå®ä¸»é¢˜è§’è‰²ä¸­å®ç°äº†çœŸå®çš„ä¸šåŠ¡æ“ä½œï¼Œå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ä»£ç†ä¸»é¢˜è§’è‰²é—´æ¥è°ƒç”¨çœŸå®ä¸»é¢˜è§’è‰²ä¸­å®šä¹‰çš„æ–¹æ³•ã€‚</li><li>ä»£ç†æ¨¡å¼çš„ä¼˜ç‚¹åœ¨äºèƒ½å¤Ÿåè°ƒè°ƒç”¨è€…å’Œè¢«è°ƒç”¨è€…ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šé™ä½äº†ç³»ç»Ÿçš„è€¦åˆåº¦ï¼›å…¶ç¼ºç‚¹åœ¨äºç”±äºåœ¨å®¢æˆ·ç«¯å’ŒçœŸå®ä¸»é¢˜ä¹‹é—´å¢åŠ äº†ä»£ç†å¯¹è±¡ï¼Œå› æ­¤æœ‰äº›ç±»å‹çš„ä»£ç†æ¨¡å¼å¯èƒ½ä¼šé€ æˆè¯·æ±‚çš„å¤„ç†é€Ÿåº¦å˜æ…¢ï¼Œå¹¶ä¸”å®ç°ä»£ç†æ¨¡å¼éœ€è¦é¢å¤–çš„å·¥ä½œï¼Œæœ‰äº›ä»£ç†æ¨¡å¼çš„å®ç°éå¸¸å¤æ‚ã€‚è¿œç¨‹ä»£ç†ä¸ºä¸€ä¸ªä½äºä¸åŒçš„åœ°å€ç©ºé—´çš„å¯¹è±¡æä¾›ä¸€ä¸ªæœ¬åœ°çš„ä»£è¡¨å¯¹è±¡ï¼Œå®ƒä½¿å¾—å®¢æˆ·ç«¯å¯ä»¥è®¿é—®åœ¨è¿œç¨‹æœºå™¨ä¸Šçš„å¯¹è±¡ï¼Œè¿œç¨‹æœºå™¨å¯èƒ½å…·æœ‰æ›´å¥½çš„è®¡ç®—æ€§èƒ½ä¸å¤„ç†é€Ÿåº¦ï¼Œå¯ä»¥å¿«é€Ÿå“åº”å¹¶å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ã€‚</li><li>å¦‚æœéœ€è¦åˆ›å»ºä¸€ä¸ªèµ„æºæ¶ˆè€—è¾ƒå¤§çš„å¯¹è±¡ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªæ¶ˆè€—ç›¸å¯¹è¾ƒå°çš„å¯¹è±¡æ¥è¡¨ç¤ºï¼ŒçœŸå®å¯¹è±¡åªåœ¨éœ€è¦æ—¶æ‰ä¼šè¢«çœŸæ­£åˆ›å»ºï¼Œè¿™ä¸ªå°å¯¹è±¡ç§°ä¸ºè™šæ‹Ÿä»£ç†ã€‚è™šæ‹Ÿä»£ç†é€šè¿‡ä½¿ç”¨ä¸€ä¸ªå°å¯¹è±¡æ¥ä»£è¡¨ä¸€ä¸ªå¤§å¯¹è±¡ï¼Œå¯ä»¥å‡å°‘ç³»ç»Ÿèµ„æºçš„æ¶ˆè€—ï¼Œå¯¹ç³»ç»Ÿè¿›è¡Œä¼˜åŒ–å¹¶æé«˜è¿è¡Œé€Ÿåº¦ã€‚</li><li>ä¿æŠ¤ä»£ç†å¯ä»¥æ§åˆ¶å¯¹ä¸€ä¸ªå¯¹è±¡çš„è®¿é—®ï¼Œå¯ä»¥ç»™ä¸åŒçš„ç”¨æˆ·æä¾›ä¸åŒçº§åˆ«çš„ä½¿ç”¨æƒé™ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶è®¾è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaé¢å‘å¯¹è±¡è®¾è®¡ä¹‹å·¥å‚æ–¹æ³•æ¨¡å¼</title>
      <link href="/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-gong-han-fang-fa-mo-shi/"/>
      <url>/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-gong-han-fang-fa-mo-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€æ¨¡å¼å®šä¹‰"><a href="#ä¸€ã€æ¨¡å¼å®šä¹‰" class="headerlink" title="ä¸€ã€æ¨¡å¼å®šä¹‰"></a>ä¸€ã€æ¨¡å¼å®šä¹‰</h2><p>å·¥å‚æ–¹æ³•æ¨¡å¼(<code>Factory Method Pattern</code>)åˆç§°ä¸ºå·¥å‚æ¨¡å¼ï¼Œä¹Ÿå«è™šæ‹Ÿæ„é€ å™¨(Virtual Constructor)æ¨¡å¼æˆ–è€…å¤šæ€å·¥å‚(Polymorphic Factory)æ¨¡å¼ï¼Œå®ƒå±äºç±»åˆ›å»ºå‹æ¨¡å¼ã€‚åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œå·¥å‚çˆ¶ç±»è´Ÿè´£å®šä¹‰åˆ›å»ºäº§å“å¯¹è±¡çš„å…¬å…±æ¥å£ï¼Œè€Œå·¥å‚å­ç±»åˆ™è´Ÿè´£ç”Ÿæˆå…·ä½“çš„äº§å“å¯¹è±¡ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯å°†äº§å“ç±»çš„å®ä¾‹åŒ–æ“ä½œå»¶è¿Ÿåˆ°å·¥å‚å­ç±»ä¸­å®Œæˆï¼Œå³é€šè¿‡å·¥å‚å­ç±»æ¥ç¡®å®šç©¶ç«Ÿåº”è¯¥å®ä¾‹åŒ–å“ªä¸€ä¸ªå…·ä½“äº§å“ç±»ã€‚</p><h2 id="äºŒã€æ¨¡å¼ç»“æ„"><a href="#äºŒã€æ¨¡å¼ç»“æ„" class="headerlink" title="äºŒã€æ¨¡å¼ç»“æ„"></a>äºŒã€æ¨¡å¼ç»“æ„</h2><h3 id="1-è§’è‰²ç»„æˆ"><a href="#1-è§’è‰²ç»„æˆ" class="headerlink" title="1. è§’è‰²ç»„æˆ"></a>1. è§’è‰²ç»„æˆ</h3><p>å·¥å‚æ–¹æ³•æ¨¡å¼åŒ…å«å¦‚ä¸‹è§’è‰²ï¼š</p><ul><li><code>Product</code>ï¼šæŠ½è±¡äº§å“</li><li><code>ConcreteProduct</code>ï¼šå…·ä½“äº§å“</li><li><code>Factory</code>ï¼šæŠ½è±¡å·¥å‚</li><li><code>ConcreteFactory</code>ï¼šå…·ä½“å·¥å‚</li></ul><h3 id="2-ç»“æ„å›¾"><a href="#2-ç»“æ„å›¾" class="headerlink" title="2. ç»“æ„å›¾"></a>2. ç»“æ„å›¾</h3><p><img src="https://statics.sh1a.qingstor.com/2018/09/14/factory-method.jpg" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/09/14/factory-method.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å·¥å‚æ–¹æ³•æ¨¡å¼ç»“æ„å›¾"></p><h3 id="3-æ—¶åºå›¾"><a href="#3-æ—¶åºå›¾" class="headerlink" title="3. æ—¶åºå›¾"></a>3. æ—¶åºå›¾</h3><p><img src="https://statics.sh1a.qingstor.com/2018/09/14/seq-factory-method.jpg" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/09/14/seq-factory-method.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="å·¥å‚æ–¹æ³•æ¨¡å¼æ—¶åºå›¾"></p><h2 id="ä¸‰ã€ç¤ºä¾‹ä»£ç "><a href="#ä¸‰ã€ç¤ºä¾‹ä»£ç " class="headerlink" title="ä¸‰ã€ç¤ºä¾‹ä»£ç "></a>ä¸‰ã€ç¤ºä¾‹ä»£ç </h2><p>é¦–å…ˆï¼Œæ˜¯æŠ½è±¡çš„äº§å“ç±»å’Œå…·ä½“çš„äº§å“ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * æŠ½è±¡äº§å“ç±» * Created by blinkfox on 16-6-29. */</span><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Product</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * äº§å“ç±»çš„å…¬å…±æ–¹æ³•     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">method1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¿™æ˜¯äº§å“ç±»çš„å…¬å…±æ–¹æ³•"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * æŠ½è±¡æ–¹æ³•     */</span>    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å…·ä½“äº§å“ç±»1 * Created by blinkfox on 16-6-29. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteProduct1</span> <span class="token keyword">extends</span> <span class="token class-name">Product</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ConcreteProduct1çš„method2æ–¹æ³•"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å…·ä½“äº§å“ç±»2 * Created by blinkfox on 16-6-29. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteProduct2</span> <span class="token keyword">extends</span> <span class="token class-name">Product</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ConcreteProduct2çš„method2æ–¹æ³•"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åï¼Œæ˜¯æŠ½è±¡çš„å·¥å‚ç±»å’Œå…·ä½“çš„å·¥å‚ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * æŠ½è±¡çš„å·¥å‚ç±» * Created by blinkfox on 16-6-29. */</span><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Factory</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * è¿ç”¨äº†Javaä¸­çš„æ³›å‹å’Œåå°„æŠ€æœ¯,ç”ŸæˆæŸç§å…·ä½“çš„äº§å“     * å…¶è¾“å…¥ç±»å‹å¯ä»¥è‡ªè¡Œè®¾ç½®     * @param c     * @param &lt;T>     * @return     */</span>    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">Product</span><span class="token punctuation">></span></span> <span class="token class-name">T</span> <span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å…·ä½“ç”Ÿäº§äº§å“çš„å·¥å‚ç±» * Created by blinkfox on 16-6-29. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteFactory</span> <span class="token keyword">extends</span> <span class="token class-name">Factory</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * è¿ç”¨äº†Javaä¸­çš„æ³›å‹å’Œåå°„æŠ€æœ¯,ç”ŸæˆæŸç§å…·ä½“çš„äº§å“     * å…¶è¾“å…¥ç±»å‹å¯ä»¥è‡ªè¡Œè®¾ç½®     * @param c     * @param &lt;T>     * @return     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">Product</span><span class="token punctuation">></span></span> <span class="token class-name">T</span> <span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> c<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Product</span> product <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            product <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Product</span><span class="token punctuation">)</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç”Ÿäº§äº§å“å‡ºé”™"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">)</span> product<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åï¼Œæ˜¯å®¢æˆ·ç«¯åœºæ™¯ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å·¥å‚æ–¹æ³•æ¨¡å¼å®¢æˆ·ç«¯åœºæ™¯ç±» * Created by blinkfox on 16-6-29. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Factory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Product</span> product1 <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token class-name">ConcreteProduct1</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        product1<span class="token punctuation">.</span><span class="token function">method1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        product1<span class="token punctuation">.</span><span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Product</span> product2 <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token class-name">ConcreteProduct2</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        product2<span class="token punctuation">.</span><span class="token function">method1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        product2<span class="token punctuation">.</span><span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å››ã€æ¨¡å¼åˆ†æ"><a href="#å››ã€æ¨¡å¼åˆ†æ" class="headerlink" title="å››ã€æ¨¡å¼åˆ†æ"></a>å››ã€æ¨¡å¼åˆ†æ</h2><p>åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œæ ¸å¿ƒçš„å·¥å‚ç±»ä¸å†è´Ÿè´£æ‰€æœ‰äº§å“çš„åˆ›å»ºï¼Œè€Œæ˜¯å°†å…·ä½“åˆ›å»ºå·¥ä½œäº¤ç»™å­ç±»å»åšã€‚è¿™ä¸ªæ ¸å¿ƒç±»ä»…ä»…è´Ÿè´£ç»™å‡ºå…·ä½“å·¥å‚å¿…é¡»å®ç°çš„æ¥å£ï¼Œè€Œä¸è´Ÿè´£å“ªä¸€ä¸ªäº§å“ç±»è¢«å®ä¾‹åŒ–è¿™ç§ç»†èŠ‚ï¼Œè¿™ä½¿å¾—å·¥å‚æ–¹æ³•æ¨¡å¼å¯ä»¥å…è®¸ç³»ç»Ÿåœ¨ä¸ä¿®æ”¹å·¥å‚è§’è‰²çš„æƒ…å†µä¸‹å¼•è¿›æ–°äº§å“ã€‚</p><h3 id="1-ä¼˜ç‚¹"><a href="#1-ä¼˜ç‚¹" class="headerlink" title="1. ä¼˜ç‚¹"></a>1. ä¼˜ç‚¹</h3><p>å·¥å‚æ–¹æ³•æ¨¡å¼çš„ä¼˜ç‚¹ï¼š</p><ul><li>åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œå·¥å‚æ–¹æ³•ç”¨æ¥åˆ›å»ºå®¢æˆ·æ‰€éœ€è¦çš„äº§å“ï¼ŒåŒæ—¶è¿˜å‘å®¢æˆ·éšè—äº†å“ªç§å…·ä½“äº§å“ç±»å°†è¢«å®ä¾‹åŒ–è¿™ä¸€ç»†èŠ‚ï¼Œç”¨æˆ·åªéœ€è¦å…³å¿ƒæ‰€éœ€äº§å“å¯¹åº”çš„å·¥å‚ï¼Œæ— é¡»å…³å¿ƒåˆ›å»ºç»†èŠ‚ï¼Œç”šè‡³æ— é¡»çŸ¥é“å…·ä½“äº§å“ç±»çš„ç±»åã€‚</li><li>åŸºäºå·¥å‚è§’è‰²å’Œäº§å“è§’è‰²çš„å¤šæ€æ€§è®¾è®¡æ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„å…³é”®ã€‚å®ƒèƒ½å¤Ÿä½¿å·¥å‚å¯ä»¥è‡ªä¸»ç¡®å®šåˆ›å»ºä½•ç§äº§å“å¯¹è±¡ï¼Œè€Œå¦‚ä½•åˆ›å»ºè¿™ä¸ªå¯¹è±¡çš„ç»†èŠ‚åˆ™å®Œå…¨å°è£…åœ¨å…·ä½“å·¥å‚å†…éƒ¨ã€‚å·¥å‚æ–¹æ³•æ¨¡å¼ä¹‹æ‰€ä»¥åˆè¢«ç§°ä¸ºå¤šæ€å·¥å‚æ¨¡å¼ï¼Œæ˜¯å› ä¸ºæ‰€æœ‰çš„å…·ä½“å·¥å‚ç±»éƒ½å…·æœ‰åŒä¸€æŠ½è±¡çˆ¶ç±»ã€‚</li><li>ä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼çš„å¦ä¸€ä¸ªä¼˜ç‚¹æ˜¯åœ¨ç³»ç»Ÿä¸­åŠ å…¥æ–°äº§å“æ—¶ï¼Œæ— é¡»ä¿®æ”¹æŠ½è±¡å·¥å‚å’ŒæŠ½è±¡äº§å“æä¾›çš„æ¥å£ï¼Œæ— é¡»ä¿®æ”¹å®¢æˆ·ç«¯ï¼Œä¹Ÿæ— é¡»ä¿®æ”¹å…¶ä»–çš„å…·ä½“å·¥å‚å’Œå…·ä½“äº§å“ï¼Œè€Œåªè¦æ·»åŠ ä¸€ä¸ªå…·ä½“å·¥å‚å’Œå…·ä½“äº§å“å°±å¯ä»¥äº†ã€‚è¿™æ ·ï¼Œç³»ç»Ÿçš„å¯æ‰©å±•æ€§ä¹Ÿå°±å˜å¾—éå¸¸å¥½ï¼Œå®Œå…¨ç¬¦åˆâ€œå¼€é—­åŸåˆ™â€ã€‚</li></ul><h3 id="2-ç¼ºç‚¹"><a href="#2-ç¼ºç‚¹" class="headerlink" title="2. ç¼ºç‚¹"></a>2. ç¼ºç‚¹</h3><p>å·¥å‚æ–¹æ³•æ¨¡å¼çš„ç¼ºç‚¹ï¼š</p><ul><li>åœ¨æ·»åŠ æ–°äº§å“æ—¶ï¼Œéœ€è¦ç¼–å†™æ–°çš„å…·ä½“äº§å“ç±»ï¼Œè€Œä¸”è¿˜è¦æä¾›ä¸ä¹‹å¯¹åº”çš„å…·ä½“å·¥å‚ç±»ï¼Œç³»ç»Ÿä¸­ç±»çš„ä¸ªæ•°å°†æˆå¯¹å¢åŠ ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼Œæœ‰æ›´å¤šçš„ç±»éœ€è¦ç¼–è¯‘å’Œè¿è¡Œï¼Œä¼šç»™ç³»ç»Ÿå¸¦æ¥ä¸€äº›é¢å¤–çš„å¼€é”€ã€‚</li><li>ç”±äºè€ƒè™‘åˆ°ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ï¼Œéœ€è¦å¼•å…¥æŠ½è±¡å±‚ï¼Œåœ¨å®¢æˆ·ç«¯ä»£ç ä¸­å‡ä½¿ç”¨æŠ½è±¡å±‚è¿›è¡Œå®šä¹‰ï¼Œå¢åŠ äº†ç³»ç»Ÿçš„æŠ½è±¡æ€§å’Œç†è§£éš¾åº¦ï¼Œä¸”åœ¨å®ç°æ—¶å¯èƒ½éœ€è¦ç”¨åˆ°DOMã€åå°„ç­‰æŠ€æœ¯ï¼Œå¢åŠ äº†ç³»ç»Ÿçš„å®ç°éš¾åº¦ã€‚</li></ul><h3 id="3-é€‚ç”¨ç¯å¢ƒ"><a href="#3-é€‚ç”¨ç¯å¢ƒ" class="headerlink" title="3. é€‚ç”¨ç¯å¢ƒ"></a>3. é€‚ç”¨ç¯å¢ƒ</h3><p>åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼ï¼š</p><ul><li>ä¸€ä¸ªç±»ä¸çŸ¥é“å®ƒæ‰€éœ€è¦çš„å¯¹è±¡çš„ç±»ï¼šåœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œå®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“å…·ä½“äº§å“ç±»çš„ç±»åï¼Œåªéœ€è¦çŸ¥é“æ‰€å¯¹åº”çš„å·¥å‚å³å¯ï¼Œå…·ä½“çš„äº§å“å¯¹è±¡ç”±å…·ä½“å·¥å‚ç±»åˆ›å»ºï¼›å®¢æˆ·ç«¯éœ€è¦çŸ¥é“åˆ›å»ºå…·ä½“äº§å“çš„å·¥å‚ç±»ã€‚</li><li>ä¸€ä¸ªç±»é€šè¿‡å…¶å­ç±»æ¥æŒ‡å®šåˆ›å»ºå“ªä¸ªå¯¹è±¡ï¼šåœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œå¯¹äºæŠ½è±¡å·¥å‚ç±»åªéœ€è¦æä¾›ä¸€ä¸ªåˆ›å»ºäº§å“çš„æ¥å£ï¼Œè€Œç”±å…¶å­ç±»æ¥ç¡®å®šå…·ä½“è¦åˆ›å»ºçš„å¯¹è±¡ï¼Œåˆ©ç”¨é¢å‘å¯¹è±¡çš„å¤šæ€æ€§å’Œé‡Œæ°ä»£æ¢åŸåˆ™ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œå­ç±»å¯¹è±¡å°†è¦†ç›–çˆ¶ç±»å¯¹è±¡ï¼Œä»è€Œä½¿å¾—ç³»ç»Ÿæ›´å®¹æ˜“æ‰©å±•ã€‚</li><li>å°†åˆ›å»ºå¯¹è±¡çš„ä»»åŠ¡å§”æ‰˜ç»™å¤šä¸ªå·¥å‚å­ç±»ä¸­çš„æŸä¸€ä¸ªï¼Œå®¢æˆ·ç«¯åœ¨ä½¿ç”¨æ—¶å¯ä»¥æ— é¡»å…³å¿ƒæ˜¯å“ªä¸€ä¸ªå·¥å‚å­ç±»åˆ›å»ºäº§å“å­ç±»ï¼Œéœ€è¦æ—¶å†åŠ¨æ€æŒ‡å®šï¼Œå¯å°†å…·ä½“å·¥å‚ç±»çš„ç±»åå­˜å‚¨åœ¨é…ç½®æ–‡ä»¶æˆ–æ•°æ®åº“ä¸­ã€‚</li></ul><h2 id="äº”ã€æ¨¡å¼æ‰©å±•"><a href="#äº”ã€æ¨¡å¼æ‰©å±•" class="headerlink" title="äº”ã€æ¨¡å¼æ‰©å±•"></a>äº”ã€æ¨¡å¼æ‰©å±•</h2><p>å·¥å‚æ–¹æ³•æ¨¡å¼æœ‰å¾ˆå¤šæ‰©å±•ï¼Œè€Œä¸”ä¸å…¶ä»–æ¨¡å¼ç»“åˆä½¿ç”¨å¨åŠ›æ›´å¤§ï¼Œä¸‹é¢ä»‹ç»4ç§å¸¸ç”¨æ‰©å±•ã€‚</p><h3 id="1-ç®€å•å·¥å‚æ¨¡å¼"><a href="#1-ç®€å•å·¥å‚æ¨¡å¼" class="headerlink" title="1. ç®€å•å·¥å‚æ¨¡å¼"></a>1. ç®€å•å·¥å‚æ¨¡å¼</h3><p>æˆ‘ä»¬è¿™æ ·è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼šä¸€ä¸ªæ¨¡å—ä»…éœ€è¦ä¸€ä¸ªå·¥å‚ç±»ï¼Œæ²¡æœ‰å¿…è¦æŠŠå®ƒäº§ç”Ÿå‡ºæ¥ï¼Œä½¿ç”¨é™æ€çš„æ–¹æ³•å°±å¯ä»¥äº†ã€‚å› æ­¤å»æ‰å·¥å‚ç±»ä¸­ç»§æ‰¿çš„æŠ½è±¡ç±»ï¼ŒæŠŠæ–¹æ³•æ”¹æˆé™æ€å³å¯ã€‚é€šç”¨ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * ç®€å•å·¥å‚æ¨¡å¼ä¸­çš„å·¥å‚ç±» * Created by blinkfox on 16-6-29. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleFactory</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * è¿ç”¨äº†Javaä¸­çš„æ³›å‹å’Œåå°„æŠ€æœ¯,ç”ŸæˆæŸç§å…·ä½“çš„äº§å“     * å…¶è¾“å…¥ç±»å‹å¯ä»¥è‡ªè¡Œè®¾ç½®     * @param c     * @param &lt;T>     * @return     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span>  <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">Product</span><span class="token punctuation">></span></span> <span class="token class-name">T</span> <span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> c<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Product</span> product <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            product <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Product</span><span class="token punctuation">)</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç”Ÿäº§äº§å“å‡ºé”™"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">)</span> product<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * ç®€å•å·¥å‚æ¨¡å¼å®¢æˆ·ç«¯åœºæ™¯ç±» * Created by blinkfox on 16-6-29. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleClient</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Product</span> product1 <span class="token operator">=</span> <span class="token class-name">SimpleFactory</span><span class="token punctuation">.</span><span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token class-name">ConcreteProduct1</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        product1<span class="token punctuation">.</span><span class="token function">method1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        product1<span class="token punctuation">.</span><span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Product</span> product2 <span class="token operator">=</span> <span class="token class-name">SimpleFactory</span><span class="token punctuation">.</span><span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token class-name">ConcreteProduct2</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        product2<span class="token punctuation">.</span><span class="token function">method1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        product2<span class="token punctuation">.</span><span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œç»“æœæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œä½†æ˜¯ç±»å›¾ç®€å•äº†ï¼Œè°ƒç”¨è€…ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œç®€å•å·¥å‚æ¨¡å¼æ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„å¼±åŒ–ï¼Œä¹Ÿå«åšé™æ€å·¥å‚æ¨¡å¼ã€‚å…¶ç¼ºç‚¹æ˜¯å·¥å‚ç±»çš„æ‰©å±•æ¯”è¾ƒå›°éš¾ï¼Œä¸ç¬¦åˆâ€œå¼€é—­åŸåˆ™â€ï¼Œä½†å®ƒä»ç„¶æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„è®¾è®¡æ¨¡å¼ã€‚</p><h3 id="2-å¤šå·¥å‚ç±»å·¥å‚æ–¹æ³•æ¨¡å¼"><a href="#2-å¤šå·¥å‚ç±»å·¥å‚æ–¹æ³•æ¨¡å¼" class="headerlink" title="2. å¤šå·¥å‚ç±»å·¥å‚æ–¹æ³•æ¨¡å¼"></a>2. å¤šå·¥å‚ç±»å·¥å‚æ–¹æ³•æ¨¡å¼</h3><p>å½“æˆ‘ä»¬åœ¨ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„é¡¹ç›®æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ°åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡å¾ˆè€—è´¹ç²¾åŠ›çš„æƒ…å†µï¼Œæ‰€æœ‰çš„äº§å“ç±»éƒ½æ”¾åˆ°ä¸€ä¸ªå·¥å‚æ–¹æ³•ä¸­è¿›è¡Œåˆå§‹åŒ–ä¼šä½¿ä»£ç ç»“æ„ä¸æ¸…æ™°ã€‚ä¸ºäº†è®©ç»“æ„æ¸…æ™°ï¼Œæˆ‘ä»¬å°±ä¸ºæ¯ç±»äº§å“å®šä¹‰ä¸€ä¸ªåˆ›é€ è€…ï¼Œç„¶åç”±è°ƒç”¨è€…è‡ªå·±å»é€‰æ‹©ä¸å“ªä¸ªå·¥å‚æ–¹æ³•å…³è”ã€‚å¤šå·¥å‚æ¨¡å¼çš„é€šç”¨ä»£ç å¦‚ä¸‹ï¼š</p><p>å¤šå·¥å‚æ¨¡å¼çš„æŠ½è±¡å·¥å‚ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * ç”Ÿæˆå¤šä¸ªäº§å“çš„æŠ½è±¡å·¥å‚ç±» * Created by blinkfox on 16-7-2. */</span><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">MultiFactory</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * ç”ŸæˆæŸç§äº§å“çš„æ–¹æ³•     * @return     */</span>    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Product</span> <span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¬¬ä¸€ç§äº§å“çš„åˆ›å»ºå·¥å‚å®ç°ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * ç”Ÿæˆäº§å“1çš„å…·ä½“å·¥å‚ç±»1 * Created by blinkfox on 16-7-2. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteFactory1</span> <span class="token keyword">extends</span> <span class="token class-name">MultiFactory</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * ç”Ÿæˆäº§å“1çš„æ–¹æ³•     * @return     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Product</span> <span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteProduct1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¬¬äºŒç§äº§å“çš„åˆ›å»ºå·¥å‚å®ç°ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * ç”Ÿæˆäº§å“2çš„å…·ä½“å·¥å‚ç±»2 * Created by blinkfox on 16-7-2. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteFactory2</span> <span class="token keyword">extends</span> <span class="token class-name">MultiFactory</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * ç”Ÿæˆäº§å“2çš„æ–¹æ³•     * @return     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Product</span> <span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteProduct2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¤šå·¥å‚æ¨¡å¼çš„å®¢æˆ·ç«¯åœºæ™¯ç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å¤šå·¥å‚æ–¹æ³•æ¨¡å¼å®¢æˆ·ç«¯åœºæ™¯ç±» * Created by blinkfox on 16-7-2. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MultiClient</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Product</span> concreteProduct1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ConcreteFactory1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        concreteProduct1<span class="token punctuation">.</span><span class="token function">method1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        concreteProduct1<span class="token punctuation">.</span><span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Product</span> concreteProduct2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ConcreteFactory2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        concreteProduct1<span class="token punctuation">.</span><span class="token function">method1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        concreteProduct1<span class="token punctuation">.</span><span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-å·¥å‚æ–¹æ³•çš„å•ä¾‹æ¨¡å¼"><a href="#3-å·¥å‚æ–¹æ³•çš„å•ä¾‹æ¨¡å¼" class="headerlink" title="3. å·¥å‚æ–¹æ³•çš„å•ä¾‹æ¨¡å¼"></a>3. å·¥å‚æ–¹æ³•çš„å•ä¾‹æ¨¡å¼</h3><p>å•ä¾‹æ¨¡å¼çš„æ ¸å¿ƒè¦æ±‚å°±æ˜¯åœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œé€šè¿‡å·¥å‚æ–¹æ³•æ¨¡å¼ä¹Ÿå¯ä»¥åªåœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œå®ç°å•ä¾‹çš„åŠŸèƒ½ã€‚</p><p>ä¸‹é¢æ˜¯å•ä¾‹ç±»ï¼Œå…¶ä¸­å®šä¹‰äº†ä¸€ä¸ªprivateçš„æ— å‚æ„é€ å‡½æ•°ï¼Œç›®çš„æ˜¯ä¸å…è®¸é€šè¿‡newçš„æ–¹å¼åˆ›å»ºå¯¹è±¡ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­çš„å•ä¾‹ç±» * Created by blinkfox on 16-7-4. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * ç§æœ‰åŒ–æ„é€ æ–¹æ³•ï¼Œä¸å…è®¸newäº§ç”Ÿä¸€ä¸ªå¯¹è±¡     */</span>    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token comment">/**     * å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­çš„å•ä¾‹æ¨¡å¼ä¸šåŠ¡æ–¹æ³•     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­çš„å•ä¾‹æ¨¡å¼æ–¹æ³•ã€‚ã€‚ã€‚"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»¥ä¸Šå•ä¾‹ç±»ä¸­ä¸èƒ½é€šè¿‡æ­£å¸¸çš„æ¸ é“å»ºç«‹ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£å•ä¾‹çš„å·¥å‚ç±»ä¸­å¦‚ä½•å»ºç«‹ä¸€ä¸ªå•ä¾‹å¯¹è±¡å‘¢ï¼Ÿç­”æ¡ˆæ˜¯é€šè¿‡åå°„æ–¹å¼åˆ›å»ºï¼Œå•ä¾‹å·¥å‚ç±»çš„ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * ç”Ÿæˆå•ä¾‹çš„å·¥å‚ç±» * Created by blinkfox on 16-7-4. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SingletonFactory</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> singleton<span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Class</span> c <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// è·å¾—æ— å‚æ„é€ </span>            <span class="token class-name">Constructor</span> constructor <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// è®¾ç½®æ— å‚æ„é€ æ˜¯å¯è®¿é—®çš„</span>            constructor<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// äº§ç”Ÿä¸€ä¸ªå®ä¾‹å¯¹è±¡</span>            singleton <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">)</span> constructor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç”Ÿæˆå•ä¾‹çš„å·¥å‚ç±»æ–¹æ³•ä¸­ç”Ÿæˆå•ä¾‹å‡ºé”™"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>zuihou        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> singleton<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åæ˜¯å·¥å‚æ–¹æ³•å•ä¾‹æ¨¡å¼çš„å®¢æˆ·ç«¯åœºæ™¯ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å·¥å‚æ–¹æ³•å•ä¾‹æ¨¡å¼å®¢æˆ·ç«¯åœºæ™¯ç±» * Created by blinkfox on 16-7-4. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SingleClient</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Singleton</span> singleton <span class="token operator">=</span> <span class="token class-name">SingletonFactory</span><span class="token punctuation">.</span><span class="token function">getSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        singleton<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-å·¥å‚æ–¹æ³•çš„å»¶è¿Ÿåˆå§‹åŒ–"><a href="#4-å·¥å‚æ–¹æ³•çš„å»¶è¿Ÿåˆå§‹åŒ–" class="headerlink" title="4. å·¥å‚æ–¹æ³•çš„å»¶è¿Ÿåˆå§‹åŒ–"></a>4. å·¥å‚æ–¹æ³•çš„å»¶è¿Ÿåˆå§‹åŒ–</h3><p>ä½•ä¸ºå»¶è¿Ÿåˆå§‹åŒ–ï¼Ÿä¸€ä¸ªå¯¹è±¡è¢«æ¶ˆè´¹å®Œæ¯•åï¼Œå¹¶ä¸ç«‹å³é‡Šæ”¾ï¼Œå·¥å‚ç±»ä¿æŒå…¶åˆå§‹çŠ¶æ€ï¼Œç­‰å¾…å†æ¬¡ä½¿ç”¨ã€‚å»¶è¿Ÿåˆå§‹åŒ–æ˜¯å·¥å‚æ¨¡å¼çš„ä¸€ä¸ªæ‰©å±•åº”ç”¨ï¼Œå…¶é€šç”¨ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å»¶è¿ŸåŠ è½½çš„å·¥å‚ç±» * Created by blinkfox on 16-7-4. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LazyFactory</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Product</span><span class="token punctuation">></span></span> lazyMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Product</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">synchronized</span> <span class="token class-name">Product</span> <span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Product</span> product <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token comment">// å¦‚æœmapä¸­å·²ç»æœ‰è¿™ä¸ªå¯¹è±¡ï¼Œåˆ™ç›´æ¥å–å‡ºè¯¥å¯¹è±¡å³å¯ï¼Œå¦åˆ™åˆ›å»ºå¹¶æ”¾åœ¨ç¼“å­˜å®¹å™¨ä¸­</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>lazyMap<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> lazyMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// æ ¹æ®ç±»å‹åˆ›å»ºå…·ä½“çš„äº§å“å¯¹è±¡</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"product1"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            product <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteProduct1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            product <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteProduct2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// åŒæ—¶æŠŠå¯¹è±¡æ”¾åˆ°ç¼“å­˜å®¹å™¨ä¸­</span>        lazyMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">,</span> product<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> product<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢å³ä¸ºå»¶è¿ŸåŠ è½½çš„å·¥å‚ç±»ã€‚ä»£ç æ¯”è¾ƒç®€å•ï¼Œé€šè¿‡å®šä¹‰ä¸€ä¸ª<code>map</code>å®¹å™¨æ¥å®¹çº³æ‰€æœ‰äº§ç”Ÿçš„å¯¹è±¡ï¼Œå¦‚æœåœ¨<code>map</code>å®¹å™¨ä¸­å·²ç»æœ‰çš„å¯¹è±¡ï¼Œåˆ™ç›´æ¥å–å‡ºè¿”å›ï¼›å¦‚æœæ²¡æœ‰ï¼Œåˆ™æ ¹æ®éœ€è¦çš„ç±»å‹äº§ç”Ÿä¸€ä¸ªå¯¹è±¡å¹¶æ”¾å…¥åˆ°<code>map</code>å®¹å™¨ä¸­ï¼Œä»¥ä¾¿ä¸‹æ¬¡è°ƒç”¨ã€‚</p><p>å»¶è¿ŸåŠ è½½çš„å·¥å‚æ¨¡å¼å®¢æˆ·ç«¯åœºæ™¯ç±»ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å»¶è¿ŸåŠ è½½çš„å·¥å‚æ¨¡å¼å®¢æˆ·ç«¯åœºæ™¯ç±» * Created by blinkfox on 16-7-4. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LazyClient</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Product</span> product1 <span class="token operator">=</span> <span class="token class-name">LazyFactory</span><span class="token punctuation">.</span><span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token string">"product1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Product</span> product11 <span class="token operator">=</span> <span class="token class-name">LazyFactory</span><span class="token punctuation">.</span><span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token string">"product1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å…­ã€æ€»ç»“"><a href="#å…­ã€æ€»ç»“" class="headerlink" title="å…­ã€æ€»ç»“"></a>å…­ã€æ€»ç»“</h2><ul><li>å·¥å‚æ–¹æ³•æ¨¡å¼åˆç§°ä¸ºå·¥å‚æ¨¡å¼ï¼Œå®ƒå±äºç±»åˆ›å»ºå‹æ¨¡å¼ã€‚åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œå·¥å‚çˆ¶ç±»è´Ÿè´£å®šä¹‰åˆ›å»ºäº§å“å¯¹è±¡çš„å…¬å…±æ¥å£ï¼Œè€Œå·¥å‚å­ç±»åˆ™è´Ÿè´£ç”Ÿæˆå…·ä½“çš„äº§å“å¯¹è±¡ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯å°†äº§å“ç±»çš„å®ä¾‹åŒ–æ“ä½œå»¶è¿Ÿåˆ°å·¥å‚å­ç±»ä¸­å®Œæˆï¼Œå³é€šè¿‡å·¥å‚å­ç±»æ¥ç¡®å®šç©¶ç«Ÿåº”è¯¥å®ä¾‹åŒ–å“ªä¸€ä¸ªå…·ä½“äº§å“ç±»ã€‚</li><li>å·¥å‚æ–¹æ³•æ¨¡å¼åŒ…å«å››ä¸ªè§’è‰²ï¼šæŠ½è±¡äº§å“æ˜¯å®šä¹‰äº§å“çš„æ¥å£ï¼Œæ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼æ‰€åˆ›å»ºå¯¹è±¡çš„è¶…ç±»å‹ï¼Œå³äº§å“å¯¹è±¡çš„å…±åŒçˆ¶ç±»æˆ–æ¥å£ï¼›å…·ä½“äº§å“å®ç°äº†æŠ½è±¡äº§å“æ¥å£ï¼ŒæŸç§ç±»å‹çš„å…·ä½“äº§å“ç”±ä¸“é—¨çš„å…·ä½“å·¥å‚åˆ›å»ºï¼Œå®ƒä»¬ä¹‹é—´å¾€å¾€ä¸€ä¸€å¯¹åº”ï¼›æŠ½è±¡å·¥å‚ä¸­å£°æ˜äº†å·¥å‚æ–¹æ³•ï¼Œç”¨äºè¿”å›ä¸€ä¸ªäº§å“ï¼Œå®ƒæ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„æ ¸å¿ƒï¼Œä»»ä½•åœ¨æ¨¡å¼ä¸­åˆ›å»ºå¯¹è±¡çš„å·¥å‚ç±»éƒ½å¿…é¡»å®ç°è¯¥æ¥å£ï¼›å…·ä½“å·¥å‚æ˜¯æŠ½è±¡å·¥å‚ç±»çš„å­ç±»ï¼Œå®ç°äº†æŠ½è±¡å·¥å‚ä¸­å®šä¹‰çš„å·¥å‚æ–¹æ³•ï¼Œå¹¶å¯ç”±å®¢æˆ·è°ƒç”¨ï¼Œè¿”å›ä¸€ä¸ªå…·ä½“äº§å“ç±»çš„å®ä¾‹ã€‚</li><li>å·¥å‚æ–¹æ³•æ¨¡å¼æ˜¯ç®€å•å·¥å‚æ¨¡å¼çš„è¿›ä¸€æ­¥æŠ½è±¡å’Œæ¨å¹¿ã€‚ç”±äºä½¿ç”¨äº†é¢å‘å¯¹è±¡çš„å¤šæ€æ€§ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼ä¿æŒäº†ç®€å•å·¥å‚æ¨¡å¼çš„ä¼˜ç‚¹ï¼Œè€Œä¸”å…‹æœäº†å®ƒçš„ç¼ºç‚¹ã€‚åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œæ ¸å¿ƒçš„å·¥å‚ç±»ä¸å†è´Ÿè´£æ‰€æœ‰äº§å“çš„åˆ›å»ºï¼Œè€Œæ˜¯å°†å…·ä½“åˆ›å»ºå·¥ä½œäº¤ç»™å­ç±»å»åšã€‚è¿™ä¸ªæ ¸å¿ƒç±»ä»…ä»…è´Ÿè´£ç»™å‡ºå…·ä½“å·¥å‚å¿…é¡»å®ç°çš„æ¥å£ï¼Œè€Œä¸è´Ÿè´£äº§å“ç±»è¢«å®ä¾‹åŒ–è¿™ç§ç»†èŠ‚ï¼Œè¿™ä½¿å¾—å·¥å‚æ–¹æ³•æ¨¡å¼å¯ä»¥å…è®¸ç³»ç»Ÿåœ¨ä¸ä¿®æ”¹å·¥å‚è§’è‰²çš„æƒ…å†µä¸‹å¼•è¿›æ–°äº§å“ã€‚</li><li>å·¥å‚æ–¹æ³•æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹æ˜¯å¢åŠ æ–°çš„äº§å“ç±»æ—¶æ— é¡»ä¿®æ”¹ç°æœ‰ç³»ç»Ÿï¼Œå¹¶å°è£…äº†äº§å“å¯¹è±¡çš„åˆ›å»ºç»†èŠ‚ï¼Œç³»ç»Ÿå…·æœ‰è‰¯å¥½çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ï¼›å…¶ç¼ºç‚¹åœ¨äºå¢åŠ æ–°äº§å“çš„åŒæ—¶éœ€è¦å¢åŠ æ–°çš„å·¥å‚ï¼Œå¯¼è‡´ç³»ç»Ÿç±»çš„ä¸ªæ•°æˆå¯¹å¢åŠ ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚</li><li>å·¥å‚æ–¹æ³•æ¨¡å¼é€‚ç”¨æƒ…å†µåŒ…æ‹¬ï¼šä¸€ä¸ªç±»ä¸çŸ¥é“å®ƒæ‰€éœ€è¦çš„å¯¹è±¡çš„ç±»ï¼›ä¸€ä¸ªç±»é€šè¿‡å…¶å­ç±»æ¥æŒ‡å®šåˆ›å»ºå“ªä¸ªå¯¹è±¡ï¼›å°†åˆ›å»ºå¯¹è±¡çš„ä»»åŠ¡å§”æ‰˜ç»™å¤šä¸ªå·¥å‚å­ç±»ä¸­çš„æŸä¸€ä¸ªï¼Œå®¢æˆ·ç«¯åœ¨ä½¿ç”¨æ—¶å¯ä»¥æ— é¡»å…³å¿ƒæ˜¯å“ªä¸€ä¸ªå·¥å‚å­ç±»åˆ›å»ºäº§å“å­ç±»ï¼Œéœ€è¦æ—¶å†åŠ¨æ€æŒ‡å®šã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶è®¾è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaé¢å‘å¯¹è±¡è®¾è®¡ä¹‹è£…é¥°æ¨¡å¼</title>
      <link href="/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-zhuang-shi-mo-shi/"/>
      <url>/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-zhuang-shi-mo-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€æ¨¡å¼åŠ¨æœº"><a href="#ä¸€ã€æ¨¡å¼åŠ¨æœº" class="headerlink" title="ä¸€ã€æ¨¡å¼åŠ¨æœº"></a>ä¸€ã€æ¨¡å¼åŠ¨æœº</h2><p>ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®ç°ç»™ä¸€ä¸ªç±»æˆ–å¯¹è±¡å¢åŠ è¡Œä¸ºï¼š</p><ul><li><strong>ç»§æ‰¿æœºåˆ¶</strong>ï¼Œä½¿ç”¨ç»§æ‰¿æœºåˆ¶æ˜¯ç»™ç°æœ‰ç±»æ·»åŠ åŠŸèƒ½çš„ä¸€ç§æœ‰æ•ˆé€”å¾„ï¼Œé€šè¿‡ç»§æ‰¿ä¸€ä¸ªç°æœ‰ç±»å¯ä»¥ä½¿å¾—å­ç±»åœ¨æ‹¥æœ‰è‡ªèº«æ–¹æ³•çš„åŒæ—¶è¿˜æ‹¥æœ‰çˆ¶ç±»çš„æ–¹æ³•ã€‚ä½†æ˜¯è¿™ç§æ–¹æ³•æ˜¯é™æ€çš„ï¼Œç”¨æˆ·ä¸èƒ½æ§åˆ¶å¢åŠ è¡Œä¸ºçš„æ–¹å¼å’Œæ—¶æœºã€‚</li><li><strong>å…³è”æœºåˆ¶</strong>ï¼Œå³å°†ä¸€ä¸ªç±»çš„å¯¹è±¡åµŒå…¥å¦ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œç”±å¦ä¸€ä¸ªå¯¹è±¡æ¥å†³å®šæ˜¯å¦è°ƒç”¨åµŒå…¥å¯¹è±¡çš„è¡Œä¸ºä»¥ä¾¿æ‰©å±•è‡ªå·±çš„è¡Œä¸ºï¼Œæˆ‘ä»¬ç§°è¿™ä¸ªåµŒå…¥çš„å¯¹è±¡ä¸ºè£…é¥°å™¨(Decorator)</li></ul><p><strong>è£…é¥°æ¨¡å¼ä»¥å¯¹å®¢æˆ·é€æ˜çš„æ–¹å¼åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡é™„åŠ ä¸Šæ›´å¤šçš„è´£ä»»</strong>ï¼Œæ¢è¨€ä¹‹ï¼Œå®¢æˆ·ç«¯å¹¶ä¸ä¼šè§‰å¾—å¯¹è±¡åœ¨è£…é¥°å‰å’Œè£…é¥°åæœ‰ä»€ä¹ˆä¸åŒã€‚<strong>è£…é¥°æ¨¡å¼å¯ä»¥åœ¨ä¸éœ€è¦åˆ›é€ æ›´å¤šå­ç±»çš„æƒ…å†µä¸‹ï¼Œå°†å¯¹è±¡çš„åŠŸèƒ½åŠ ä»¥æ‰©å±•</strong>ã€‚è¿™å°±æ˜¯è£…é¥°æ¨¡å¼çš„æ¨¡å¼åŠ¨æœºã€‚</p><h2 id="äºŒã€æ¨¡å¼å®šä¹‰"><a href="#äºŒã€æ¨¡å¼å®šä¹‰" class="headerlink" title="äºŒã€æ¨¡å¼å®šä¹‰"></a>äºŒã€æ¨¡å¼å®šä¹‰</h2><blockquote><p>**è£…é¥°æ¨¡å¼(Decorator Pattern) ï¼šåŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡å¢åŠ ä¸€äº›é¢å¤–çš„èŒè´£(Responsibility)**ï¼Œå°±å¢åŠ å¯¹è±¡åŠŸèƒ½æ¥è¯´ï¼Œè£…é¥°æ¨¡å¼æ¯”ç”Ÿæˆå­ç±»å®ç°æ›´ä¸ºçµæ´»ã€‚å…¶åˆ«åä¹Ÿå¯ä»¥ç§°ä¸ºåŒ…è£…å™¨(Wrapper)ï¼Œä¸é€‚é…å™¨æ¨¡å¼çš„åˆ«åç›¸åŒï¼Œä½†å®ƒä»¬é€‚ç”¨äºä¸åŒçš„åœºåˆã€‚æ ¹æ®ç¿»è¯‘çš„ä¸åŒï¼Œè£…é¥°æ¨¡å¼ä¹Ÿæœ‰äººç§°ä¹‹ä¸ºâ€œæ²¹æ¼†å·¥æ¨¡å¼â€ã€‚</p></blockquote><p>ç­–ç•¥æ¨¡å¼æ˜¯ä¸€ç§<strong>å¯¹è±¡ç»“æ„å‹</strong>æ¨¡å¼ã€‚</p><h2 id="ä¸‰ã€-æ¨¡å¼ç»“æ„"><a href="#ä¸‰ã€-æ¨¡å¼ç»“æ„" class="headerlink" title="ä¸‰ã€ æ¨¡å¼ç»“æ„"></a>ä¸‰ã€ æ¨¡å¼ç»“æ„</h2><p>è£…é¥°æ¨¡å¼åŒ…å«å¦‚ä¸‹è§’è‰²ï¼š</p><ul><li><code>Component</code>: æŠ½è±¡æ„ä»¶</li><li><code>ConcreteComponent</code>: å…·ä½“æ„ä»¶</li><li><code>Decorator</code>: æŠ½è±¡è£…é¥°ç±»</li><li><code>ConcreteDecorator</code>: å…·ä½“è£…é¥°ç±»</li></ul><h3 id="ç»“æ„å›¾"><a href="#ç»“æ„å›¾" class="headerlink" title="ç»“æ„å›¾"></a>ç»“æ„å›¾</h3><p><img src="https://statics.sh1a.qingstor.com/2018/09/14/decorator-structure.jpg" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/09/14/decorator-structure.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="è£…é¥°æ¨¡å¼ç»“æ„å›¾"></p><h3 id="æ—¶åºå›¾"><a href="#æ—¶åºå›¾" class="headerlink" title="æ—¶åºå›¾"></a>æ—¶åºå›¾</h3><p><img src="https://statics.sh1a.qingstor.com/2018/09/14/decorator-seq.jpg" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/09/14/decorator-seq.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="è£…é¥°æ¨¡å¼æ—¶åºå›¾"></p><h2 id="å››ã€ç¤ºä¾‹ä»£ç "><a href="#å››ã€ç¤ºä¾‹ä»£ç " class="headerlink" title="å››ã€ç¤ºä¾‹ä»£ç "></a>å››ã€ç¤ºä¾‹ä»£ç </h2><p>é¦–å…ˆå®šä¹‰ä¸€ä¸ªæŠ½è±¡æ„ä»¶æ¥å£ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * æŠ½è±¡æ„ä»¶ * Created by blinkfox on 16-6-26. */</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Component</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// æ¥å£æ–¹æ³•</span>    <span class="token keyword">void</span> <span class="token function">operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åæ˜¯å…·ä½“æ„ä»¶å®ç°ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å…·ä½“æ„ä»¶ * Created by blinkfox on 16-6-26. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteComponent</span> <span class="token keyword">implements</span> <span class="token class-name">Component</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * å…·ä½“å®ç°æ–¹æ³•     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"do Something..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ç€æ˜¯è£…é¥°è§’è‰²ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * è£…é¥°è§’è‰² * ç»´æŒä¸€ä¸ªæŒ‡å‘Componentå¯¹è±¡çš„å¼•ç”¨ï¼Œå¹¶å®šä¹‰ä¸€ä¸ªä¸ Componentæ¥å£ä¸€è‡´çš„æ¥å£ã€‚ * Created by blinkfox on 16-6-26. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Decorator</span> <span class="token keyword">implements</span> <span class="token class-name">Component</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Component</span> component<span class="token punctuation">;</span>    <span class="token comment">/**     * é€šè¿‡æ„é€ å‡½æ•°ä¼ é€’è¢«ä¿®é¥°è€…     * @param component     */</span>    <span class="token keyword">public</span> <span class="token class-name">Decorator</span><span class="token punctuation">(</span><span class="token class-name">Component</span> component<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>component <span class="token operator">=</span> component<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * å§”æ‰˜ç»™è¢«ä¿®é¥°è€…æ‰§è¡Œ     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>component<span class="token punctuation">.</span><span class="token function">operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸‹é¢æ˜¯å…·ä½“çš„è£…é¥°ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å…·ä½“çš„è£…é¥°ç±»1 * Created by blinkfox on 16-6-26. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteDecorator1</span> <span class="token keyword">extends</span> <span class="token class-name">Decorator</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * é€šè¿‡æ„é€ å‡½æ•°ä¼ é€’è¢«ä¿®é¥°è€…     * @param component     */</span>    <span class="token keyword">public</span> <span class="token class-name">ConcreteDecorator1</span><span class="token punctuation">(</span><span class="token class-name">Component</span> component<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * å®šä¹‰è‡ªå·±çš„ä¿®é¥°æ–¹æ³•1     */</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">method1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"method1ä¿®é¥°..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * é‡å†™çˆ¶ç±»çš„operateæ–¹æ³•     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">method1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å…·ä½“çš„è£…é¥°ç±»2 * Created by blinkfox on 16-6-26. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteDecorator2</span> <span class="token keyword">extends</span> <span class="token class-name">Decorator</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * é€šè¿‡æ„é€ å‡½æ•°ä¼ é€’è¢«ä¿®é¥°è€…     * @param component     */</span>    <span class="token keyword">public</span> <span class="token class-name">ConcreteDecorator2</span><span class="token punctuation">(</span><span class="token class-name">Component</span> component<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * å®šä¹‰è‡ªå·±çš„ä¿®é¥°æ–¹æ³•2     */</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"method2ä¿®é¥°..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * é‡å†™çˆ¶ç±»çš„operateæ–¹æ³•     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åæ˜¯å®¢æˆ·ç«¯çš„åœºæ™¯ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * è£…é¥°æ¨¡å¼çš„å®¢æˆ·ç«¯åœºæ™¯ç±» * Created by blinkfox on 16-6-26. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Component</span> component <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ç¬¬ä¸€ä¿®é¥°</span>        component <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteDecorator1</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ç¬¬äºŒä¿®é¥°</span>        component <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteDecorator2</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä¿®é¥°åè¿è¡Œ</span>        component<span class="token punctuation">.</span><span class="token function">operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="äº”ã€æ¨¡å¼åˆ†æ"><a href="#äº”ã€æ¨¡å¼åˆ†æ" class="headerlink" title="äº”ã€æ¨¡å¼åˆ†æ"></a>äº”ã€æ¨¡å¼åˆ†æ</h2><h3 id="æ€»ä½“åˆ†æ"><a href="#æ€»ä½“åˆ†æ" class="headerlink" title="æ€»ä½“åˆ†æ"></a>æ€»ä½“åˆ†æ</h3><ul><li><strong>ä¸ç»§æ‰¿å…³ç³»ç›¸æ¯”ï¼Œå…³è”å…³ç³»çš„ä¸»è¦ä¼˜åŠ¿åœ¨äºä¸ä¼šç ´åç±»çš„å°è£…æ€§ï¼Œè€Œä¸”ç»§æ‰¿æ˜¯ä¸€ç§è€¦åˆåº¦è¾ƒå¤§çš„é™æ€å…³ç³»ï¼Œæ— æ³•åœ¨ç¨‹åºè¿è¡Œæ—¶åŠ¨æ€æ‰©å±•</strong>ã€‚åœ¨è½¯ä»¶å¼€å‘é˜¶æ®µï¼Œå…³è”å…³ç³»è™½ç„¶ä¸ä¼šæ¯”ç»§æ‰¿å…³ç³»å‡å°‘ç¼–ç é‡ï¼Œä½†æ˜¯åˆ°äº†è½¯ä»¶ç»´æŠ¤é˜¶æ®µï¼Œç”±äºå…³è”å…³ç³»ä½¿ç³»ç»Ÿå…·æœ‰è¾ƒå¥½çš„æ¾è€¦åˆæ€§ï¼Œå› æ­¤ä½¿å¾—ç³»ç»Ÿæ›´åŠ å®¹æ˜“ç»´æŠ¤ã€‚å½“ç„¶ï¼Œ<em>å…³è”å…³ç³»çš„ç¼ºç‚¹æ˜¯æ¯”ç»§æ‰¿å…³ç³»è¦åˆ›å»ºæ›´å¤šçš„å¯¹è±¡</em>ã€‚</li><li><strong>ä½¿ç”¨è£…é¥°æ¨¡å¼æ¥å®ç°æ‰©å±•æ¯”ç»§æ‰¿æ›´åŠ çµæ´»ï¼Œå®ƒä»¥å¯¹å®¢æˆ·é€æ˜çš„æ–¹å¼åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡é™„åŠ æ›´å¤šçš„è´£ä»»</strong>ã€‚è£…é¥°æ¨¡å¼å¯ä»¥åœ¨ä¸éœ€è¦åˆ›é€ æ›´å¤šå­ç±»çš„æƒ…å†µä¸‹ï¼Œå°†å¯¹è±¡çš„åŠŸèƒ½åŠ ä»¥æ‰©å±•ã€‚</li></ul><h3 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h3><p>è£…é¥°æ¨¡å¼çš„ä¼˜ç‚¹ï¼š</p><ul><li>è£…é¥°æ¨¡å¼ä¸ç»§æ‰¿å…³ç³»çš„ç›®çš„éƒ½æ˜¯è¦æ‰©å±•å¯¹è±¡çš„åŠŸèƒ½ï¼Œä½†æ˜¯è£…é¥°æ¨¡å¼å¯ä»¥æä¾›æ¯”ç»§æ‰¿æ›´å¤šçš„çµæ´»æ€§ã€‚</li><li>å¯ä»¥é€šè¿‡ä¸€ç§åŠ¨æ€çš„æ–¹å¼æ¥æ‰©å±•ä¸€ä¸ªå¯¹è±¡çš„åŠŸèƒ½ï¼Œé€šè¿‡é…ç½®æ–‡ä»¶å¯ä»¥åœ¨è¿è¡Œæ—¶é€‰æ‹©ä¸åŒçš„è£…é¥°å™¨ï¼Œä»è€Œå®ç°ä¸åŒçš„è¡Œä¸ºã€‚</li><li>é€šè¿‡ä½¿ç”¨ä¸åŒçš„å…·ä½“è£…é¥°ç±»ä»¥åŠè¿™äº›è£…é¥°ç±»çš„æ’åˆ—ç»„åˆï¼Œå¯ä»¥åˆ›é€ å‡ºå¾ˆå¤šä¸åŒè¡Œä¸ºçš„ç»„åˆã€‚å¯ä»¥ä½¿ç”¨å¤šä¸ªå…·ä½“è£…é¥°ç±»æ¥è£…é¥°åŒä¸€å¯¹è±¡ï¼Œå¾—åˆ°åŠŸèƒ½æ›´ä¸ºå¼ºå¤§çš„å¯¹è±¡ã€‚</li><li>å…·ä½“æ„ä»¶ç±»ä¸å…·ä½“è£…é¥°ç±»å¯ä»¥ç‹¬ç«‹å˜åŒ–ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦å¢åŠ æ–°çš„å…·ä½“æ„ä»¶ç±»å’Œå…·ä½“è£…é¥°ç±»ï¼Œåœ¨ä½¿ç”¨æ—¶å†å¯¹å…¶è¿›è¡Œç»„åˆï¼ŒåŸæœ‰ä»£ç æ— é¡»æ”¹å˜ï¼Œç¬¦åˆâ€œå¼€é—­åŸåˆ™â€ã€‚</li></ul><h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h3><p>è£…é¥°æ¨¡å¼çš„ç¼ºç‚¹ï¼š</p><ul><li>ä½¿ç”¨è£…é¥°æ¨¡å¼è¿›è¡Œç³»ç»Ÿè®¾è®¡æ—¶å°†äº§ç”Ÿå¾ˆå¤šå°å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡çš„åŒºåˆ«åœ¨äºå®ƒä»¬ä¹‹é—´ç›¸äº’è¿æ¥çš„æ–¹å¼æœ‰æ‰€ä¸åŒï¼Œè€Œä¸æ˜¯å®ƒä»¬çš„ç±»æˆ–è€…å±æ€§å€¼æœ‰æ‰€ä¸åŒï¼ŒåŒæ—¶è¿˜å°†äº§ç”Ÿå¾ˆå¤šå…·ä½“è£…é¥°ç±»ã€‚è¿™äº›è£…é¥°ç±»å’Œå°å¯¹è±¡çš„äº§ç”Ÿå°†å¢åŠ ç³»ç»Ÿçš„å¤æ‚åº¦ï¼ŒåŠ å¤§å­¦ä¹ ä¸ç†è§£çš„éš¾åº¦ã€‚</li><li>è¿™ç§æ¯”ç»§æ‰¿æ›´åŠ çµæ´»æœºåŠ¨çš„ç‰¹æ€§ï¼Œä¹ŸåŒæ—¶æ„å‘³ç€è£…é¥°æ¨¡å¼æ¯”ç»§æ‰¿æ›´åŠ æ˜“äºå‡ºé”™ï¼Œæ’é”™ä¹Ÿå¾ˆå›°éš¾ï¼Œå¯¹äºå¤šæ¬¡è£…é¥°çš„å¯¹è±¡ï¼Œè°ƒè¯•æ—¶å¯»æ‰¾é”™è¯¯å¯èƒ½éœ€è¦é€çº§æ’æŸ¥ï¼Œè¾ƒä¸ºçƒ¦çã€‚</li></ul><h3 id="é€‚ç”¨ç¯å¢ƒ"><a href="#é€‚ç”¨ç¯å¢ƒ" class="headerlink" title="é€‚ç”¨ç¯å¢ƒ"></a>é€‚ç”¨ç¯å¢ƒ</h3><p>åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨è£…é¥°æ¨¡å¼ï¼š</p><ul><li>åœ¨ä¸å½±å“å…¶ä»–å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œä»¥åŠ¨æ€ã€é€æ˜çš„æ–¹å¼ç»™å•ä¸ªå¯¹è±¡æ·»åŠ èŒè´£ã€‚</li><li>éœ€è¦åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡å¢åŠ åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½ä¹Ÿå¯ä»¥åŠ¨æ€åœ°è¢«æ’¤é”€ã€‚</li><li>å½“ä¸èƒ½é‡‡ç”¨ç»§æ‰¿çš„æ–¹å¼å¯¹ç³»ç»Ÿè¿›è¡Œæ‰©å……æˆ–è€…é‡‡ç”¨ç»§æ‰¿ä¸åˆ©äºç³»ç»Ÿæ‰©å±•å’Œç»´æŠ¤æ—¶ã€‚ä¸èƒ½é‡‡ç”¨ç»§æ‰¿çš„æƒ…å†µä¸»è¦æœ‰ä¸¤ç±»ï¼šç¬¬ä¸€ç±»æ˜¯ç³»ç»Ÿä¸­å­˜åœ¨å¤§é‡ç‹¬ç«‹çš„æ‰©å±•ï¼Œä¸ºæ”¯æŒæ¯ä¸€ç§ç»„åˆå°†äº§ç”Ÿå¤§é‡çš„å­ç±»ï¼Œä½¿å¾—å­ç±»æ•°ç›®å‘ˆçˆ†ç‚¸æ€§å¢é•¿ï¼›ç¬¬äºŒç±»æ˜¯å› ä¸ºç±»å®šä¹‰ä¸èƒ½ç»§æ‰¿ï¼ˆå¦‚finalç±»ï¼‰ã€‚</li></ul><h3 id="æ¨¡å¼æ‰©å±•"><a href="#æ¨¡å¼æ‰©å±•" class="headerlink" title="æ¨¡å¼æ‰©å±•"></a>æ¨¡å¼æ‰©å±•</h3><p>è£…é¥°æ¨¡å¼çš„ç®€åŒ–-éœ€è¦æ³¨æ„çš„é—®é¢˜:</p><ul><li>ä¸€ä¸ªè£…é¥°ç±»çš„æ¥å£å¿…é¡»ä¸è¢«è£…é¥°ç±»çš„æ¥å£ä¿æŒç›¸åŒï¼Œå¯¹äºå®¢æˆ·ç«¯æ¥è¯´æ— è®ºæ˜¯è£…é¥°ä¹‹å‰çš„å¯¹è±¡è¿˜æ˜¯è£…é¥°ä¹‹åçš„å¯¹è±¡éƒ½å¯ä»¥ä¸€è‡´å¯¹å¾…ã€‚</li><li>å°½é‡ä¿æŒå…·ä½“æ„ä»¶ç±»Componentä½œä¸ºä¸€ä¸ªâ€œè½»â€ç±»ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸è¦æŠŠå¤ªå¤šçš„é€»è¾‘å’ŒçŠ¶æ€æ”¾åœ¨å…·ä½“æ„ä»¶ç±»ä¸­ï¼Œå¯ä»¥é€šè¿‡è£…é¥°ç±»ã€‚</li><li>å¦‚æœåªæœ‰ä¸€ä¸ªå…·ä½“æ„ä»¶ç±»è€Œæ²¡æœ‰æŠ½è±¡æ„ä»¶ç±»ï¼Œé‚£ä¹ˆæŠ½è±¡è£…é¥°ç±»å¯ä»¥ä½œä¸ºå…·ä½“æ„ä»¶ç±»çš„ç›´æ¥å­ç±»ã€‚</li></ul><h2 id="å…­ã€æ€»ç»“"><a href="#å…­ã€æ€»ç»“" class="headerlink" title="å…­ã€æ€»ç»“"></a>å…­ã€æ€»ç»“</h2><ul><li>è£…é¥°æ¨¡å¼ç”¨äºåŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡å¢åŠ ä¸€äº›é¢å¤–çš„èŒè´£ï¼Œå°±å¢åŠ å¯¹è±¡åŠŸ èƒ½æ¥è¯´ï¼Œè£…é¥°æ¨¡å¼æ¯”ç”Ÿæˆå­ç±»å®ç°æ›´ä¸ºçµæ´»ã€‚å®ƒæ˜¯ä¸€ç§å¯¹è±¡ç»“æ„å‹æ¨¡å¼ã€‚</li><li>è£…é¥°æ¨¡å¼åŒ…å«å››ä¸ªè§’è‰²ï¼šæŠ½è±¡æ„ä»¶å®šä¹‰äº†å¯¹è±¡çš„æ¥å£ï¼Œå¯ä»¥ç»™è¿™äº›å¯¹ è±¡åŠ¨æ€å¢åŠ èŒè´£ï¼ˆæ–¹æ³•ï¼‰ï¼›å…·ä½“æ„ä»¶å®šä¹‰äº†å…·ä½“çš„æ„ä»¶å¯¹è±¡ï¼Œå®ç°äº† åœ¨æŠ½è±¡æ„ä»¶ä¸­å£°æ˜çš„æ–¹æ³•ï¼Œè£…é¥°å™¨å¯ä»¥ç»™å®ƒå¢åŠ é¢å¤–çš„èŒè´£ï¼ˆæ–¹æ³•ï¼‰ï¼› æŠ½è±¡è£…é¥°ç±»æ˜¯æŠ½è±¡æ„ä»¶ç±»çš„å­ç±»ï¼Œç”¨äºç»™å…·ä½“æ„ä»¶å¢åŠ èŒè´£ï¼Œä½†æ˜¯å…· ä½“èŒè´£åœ¨å…¶å­ç±»ä¸­å®ç°ï¼›å…·ä½“è£…é¥°ç±»æ˜¯æŠ½è±¡è£…é¥°ç±»çš„å­ç±»ï¼Œè´Ÿè´£å‘æ„ ä»¶æ·»åŠ æ–°çš„èŒè´£ã€‚</li><li>ä½¿ç”¨è£…é¥°æ¨¡å¼æ¥å®ç°æ‰©å±•æ¯”ç»§æ‰¿æ›´åŠ çµæ´»ï¼Œå®ƒä»¥å¯¹å®¢æˆ·é€æ˜çš„æ–¹å¼åŠ¨ æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡é™„åŠ æ›´å¤šçš„è´£ä»»ã€‚è£…é¥°æ¨¡å¼å¯ä»¥åœ¨ä¸éœ€è¦åˆ›é€ æ›´å¤šå­ ç±»çš„æƒ…å†µä¸‹ï¼Œå°†å¯¹è±¡çš„åŠŸèƒ½åŠ ä»¥æ‰©å±•ã€‚</li><li>è£…é¥°æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹åœ¨äºå¯ä»¥æä¾›æ¯”ç»§æ‰¿æ›´å¤šçš„çµæ´»æ€§ï¼Œå¯ä»¥é€šè¿‡ä¸€ç§åŠ¨æ€çš„æ–¹å¼æ¥æ‰©å±•ä¸€ä¸ªå¯¹è±¡çš„åŠŸèƒ½ï¼Œå¹¶é€šè¿‡ä½¿ç”¨ä¸åŒçš„å…·ä½“è£…é¥°ç±»ä»¥åŠè¿™äº›è£…é¥°ç±»çš„æ’åˆ—ç»„åˆï¼Œå¯ä»¥åˆ›é€ å‡ºå¾ˆå¤šä¸åŒè¡Œä¸ºçš„ç»„åˆï¼Œè€Œä¸”å…·ä½“æ„ä»¶ç±»ä¸å…·ä½“è£…é¥°ç±»å¯ä»¥ç‹¬ç«‹å˜åŒ–ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦å¢åŠ æ–°çš„å…·ä½“æ„ä»¶ç±»å’Œå…·ä½“è£…é¥°ç±»ï¼›å…¶ä¸»è¦ç¼ºç‚¹åœ¨äºä½¿ç”¨è£…é¥°æ¨¡å¼è¿›è¡Œç³»ç»Ÿè®¾è®¡æ—¶å°†äº§ç”Ÿå¾ˆå¤šå°å¯¹è±¡ï¼Œè€Œä¸”è£…é¥°æ¨¡å¼æ¯”ç»§æ‰¿æ›´åŠ æ˜“äºå‡ºé”™ï¼Œæ’é”™ä¹Ÿå¾ˆå›°éš¾ï¼Œå¯¹äºå¤šæ¬¡è£…é¥°çš„å¯¹è±¡ï¼Œè°ƒè¯•æ—¶å¯»æ‰¾é”™è¯¯å¯èƒ½éœ€è¦é€çº§æ’æŸ¥ï¼Œè¾ƒä¸ºçƒ¦çã€‚</li><li>è£…é¥°æ¨¡å¼é€‚ç”¨æƒ…å†µåŒ…æ‹¬ï¼šåœ¨ä¸å½±å“å…¶ä»–å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œä»¥åŠ¨æ€ã€é€æ˜çš„æ–¹å¼ç»™å•ä¸ªå¯¹è±¡æ·»åŠ èŒè´£ï¼›éœ€è¦åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡å¢åŠ åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½ä¹Ÿå¯ä»¥åŠ¨æ€åœ°è¢«æ’¤é”€ï¼›å½“ä¸èƒ½é‡‡ç”¨ç»§æ‰¿çš„æ–¹å¼å¯¹ç³»ç»Ÿè¿›è¡Œæ‰©å……æˆ–è€…é‡‡ç”¨ç»§æ‰¿ä¸åˆ©äºç³»ç»Ÿæ‰©å±• å’Œç»´æŠ¤æ—¶ã€‚</li><li>è£…é¥°æ¨¡å¼å¯åˆ†ä¸ºé€æ˜è£…é¥°æ¨¡å¼å’ŒåŠé€æ˜è£…é¥°æ¨¡å¼ï¼šåœ¨é€æ˜è£…é¥°æ¨¡å¼ä¸­ï¼Œè¦æ±‚å®¢æˆ·ç«¯å®Œå…¨é’ˆå¯¹æŠ½è±¡ç¼–ç¨‹ï¼Œè£…é¥°æ¨¡å¼çš„é€æ˜æ€§è¦æ±‚å®¢æˆ·ç«¯ç¨‹åºä¸åº”è¯¥å£°æ˜å…·ä½“æ„ä»¶ç±»å‹å’Œå…·ä½“è£…é¥°ç±»å‹ï¼Œè€Œåº”è¯¥å…¨éƒ¨å£°æ˜ä¸ºæŠ½è±¡æ„ä»¶ç±»å‹ï¼›åŠé€æ˜è£…é¥°æ¨¡å¼å…è®¸ç”¨æˆ·åœ¨å®¢æˆ·ç«¯å£°æ˜å…·ä½“è£…é¥°è€…ç±»å‹çš„å¯¹è±¡ï¼Œè°ƒç”¨åœ¨å…·ä½“è£…é¥°è€…ä¸­æ–°å¢çš„æ–¹æ³•ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶è®¾è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaé¢å‘å¯¹è±¡è®¾è®¡ä¹‹ç­–ç•¥æ¨¡å¼</title>
      <link href="/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-ce-lue-mo-shi/"/>
      <url>/post/ruan-jian-she-ji/she-ji-mo-shi/java-mian-xiang-dui-xiang-she-ji-zhi-ce-lue-mo-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€æ¨¡å¼åŠ¨æœº"><a href="#ä¸€ã€æ¨¡å¼åŠ¨æœº" class="headerlink" title="ä¸€ã€æ¨¡å¼åŠ¨æœº"></a>ä¸€ã€æ¨¡å¼åŠ¨æœº</h2><p>å®Œæˆä¸€é¡¹ä»»åŠ¡ï¼Œå¾€å¾€å¯ä»¥æœ‰å¤šç§ä¸åŒçš„æ–¹å¼ï¼Œæ¯ä¸€ç§æ–¹å¼ç§°ä¸ºä¸€ä¸ªç­–ç•¥ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ç¯å¢ƒæˆ–è€…æ¡ä»¶çš„ä¸åŒé€‰æ‹©ä¸åŒçš„ç­–ç•¥æ¥å®Œæˆè¯¥é¡¹ä»»åŠ¡ã€‚åœ¨è½¯ä»¶å¼€å‘ä¸­ä¹Ÿå¸¸å¸¸é‡åˆ°ç±»ä¼¼çš„æƒ…å†µï¼Œå®ç°æŸä¸€ä¸ªåŠŸèƒ½æœ‰å¤šä¸ªé€”å¾„ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨ä¸€ç§è®¾è®¡æ¨¡å¼æ¥ä½¿å¾—ç³»ç»Ÿå¯ä»¥çµæ´»åœ°é€‰æ‹©è§£å†³é€”å¾„ï¼Œä¹Ÿèƒ½å¤Ÿæ–¹ä¾¿åœ°å¢åŠ æ–°çš„è§£å†³é€”å¾„ã€‚</p><p>åœ¨è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œæœ‰è®¸å¤šç®—æ³•å¯ä»¥å®ç°æŸä¸€åŠŸèƒ½ï¼Œå¦‚æŸ¥æ‰¾ã€æ’åºç­‰ï¼Œä¸€ç§å¸¸ç”¨çš„æ–¹æ³•æ˜¯ç¡¬ç¼–ç (<code>Hard Coding</code>)åœ¨ä¸€ä¸ªç±»ä¸­ï¼Œå¦‚éœ€è¦æä¾›å¤šç§æŸ¥æ‰¾ç®—æ³•ï¼Œå¯ä»¥å°†è¿™äº›ç®—æ³•å†™åˆ°ä¸€ä¸ªç±»ä¸­ï¼Œåœ¨è¯¥ç±»ä¸­æä¾›å¤šä¸ªæ–¹æ³•ï¼Œæ¯ä¸€ä¸ªæ–¹æ³•å¯¹åº”ä¸€ä¸ªå…·ä½“çš„æŸ¥æ‰¾ç®—æ³•ï¼›å½“ç„¶ä¹Ÿå¯ä»¥å°†è¿™äº›æŸ¥æ‰¾ç®—æ³•å°è£…åœ¨ä¸€ä¸ªç»Ÿä¸€çš„æ–¹æ³•ä¸­ï¼Œé€šè¿‡ifâ€¦elseâ€¦ç­‰æ¡ä»¶åˆ¤æ–­è¯­å¥æ¥è¿›è¡Œé€‰æ‹©ã€‚è¿™ä¸¤ç§å®ç°æ–¹æ³•æˆ‘ä»¬éƒ½å¯ä»¥ç§°ä¹‹ä¸ºç¡¬ç¼–ç ï¼Œå¦‚æœéœ€è¦å¢åŠ ä¸€ç§æ–°çš„æŸ¥æ‰¾ç®—æ³•ï¼Œéœ€è¦ä¿®æ”¹å°è£…ç®—æ³•ç±»çš„æºä»£ç ï¼›æ›´æ¢æŸ¥æ‰¾ç®—æ³•ï¼Œä¹Ÿéœ€è¦ä¿®æ”¹å®¢æˆ·ç«¯è°ƒç”¨ä»£ç ã€‚åœ¨è¿™ä¸ªç®—æ³•ç±»ä¸­å°è£…äº†å¤§é‡æŸ¥æ‰¾ç®—æ³•ï¼Œè¯¥ç±»ä»£ç å°†è¾ƒå¤æ‚ï¼Œç»´æŠ¤è¾ƒä¸ºå›°éš¾ã€‚</p><p>é™¤äº†æä¾›ä¸“é—¨çš„æŸ¥æ‰¾ç®—æ³•ç±»ä¹‹å¤–ï¼Œè¿˜å¯ä»¥åœ¨å®¢æˆ·ç«¯ç¨‹åºä¸­ç›´æ¥åŒ…å«ç®—æ³•ä»£ç ï¼Œè¿™ç§åšæ³•æ›´ä¸å¯å–ï¼Œå°†å¯¼è‡´å®¢æˆ·ç«¯ç¨‹åºåºå¤§è€Œä¸”éš¾ä»¥ç»´æŠ¤ï¼Œå¦‚æœå­˜åœ¨å¤§é‡å¯ä¾›é€‰æ‹©çš„ç®—æ³•æ—¶é—®é¢˜å°†å˜å¾—æ›´åŠ ä¸¥é‡ã€‚</p><p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œå¯ä»¥<strong>å®šä¹‰ä¸€äº›ç‹¬ç«‹çš„ç±»æ¥å°è£…ä¸åŒçš„ç®—æ³•ï¼Œæ¯ä¸€ä¸ªç±»å°è£…ä¸€ä¸ªå…·ä½“çš„ç®—æ³•ï¼Œåœ¨è¿™é‡Œï¼Œæ¯ä¸€ä¸ªå°è£…ç®—æ³•çš„ç±»æˆ‘ä»¬éƒ½å¯ä»¥ç§°ä¹‹ä¸ºç­–ç•¥(Strategy)ï¼Œä¸ºäº†ä¿è¯è¿™äº›ç­–ç•¥çš„ä¸€è‡´æ€§ï¼Œä¸€èˆ¬ä¼šç”¨ä¸€ä¸ªæŠ½è±¡çš„ç­–ç•¥ç±»æ¥åšç®—æ³•çš„å®šä¹‰ï¼Œè€Œå…·ä½“æ¯ç§ç®—æ³•åˆ™å¯¹åº”äºä¸€ä¸ªå…·ä½“ç­–ç•¥ç±»</strong>ã€‚</p><h2 id="äºŒã€æ¨¡å¼å®šä¹‰"><a href="#äºŒã€æ¨¡å¼å®šä¹‰" class="headerlink" title="äºŒã€æ¨¡å¼å®šä¹‰"></a>äºŒã€æ¨¡å¼å®šä¹‰</h2><blockquote><p>**ç­–ç•¥æ¨¡å¼(Strategy Pattern)ï¼šå®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼Œå°†æ¯ä¸€ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œå¹¶è®©å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚ç­–ç•¥æ¨¡å¼è®©ç®—æ³•ç‹¬ç«‹äºä½¿ç”¨å®ƒçš„å®¢æˆ·è€Œå˜åŒ–ï¼Œä¹Ÿç§°ä¸ºæ”¿ç­–æ¨¡å¼(Policy)**ã€‚</p></blockquote><p>ç­–ç•¥æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡è¡Œä¸ºå‹æ¨¡å¼ã€‚</p><h2 id="ä¸‰ã€-æ¨¡å¼ç»“æ„"><a href="#ä¸‰ã€-æ¨¡å¼ç»“æ„" class="headerlink" title="ä¸‰ã€ æ¨¡å¼ç»“æ„"></a>ä¸‰ã€ æ¨¡å¼ç»“æ„</h2><p>ç­–ç•¥æ¨¡å¼åŒ…å«å¦‚ä¸‹è§’è‰²ï¼š</p><ul><li>Context: ç¯å¢ƒç±»</li><li>Strategy: æŠ½è±¡ç­–ç•¥ç±»</li><li>ConcreteStrategy: å…·ä½“ç­–ç•¥ç±»</li></ul><h3 id="ç»“æ„å›¾"><a href="#ç»“æ„å›¾" class="headerlink" title="ç»“æ„å›¾"></a>ç»“æ„å›¾</h3><p><img src="https://statics.sh1a.qingstor.com/2018/09/14/strategy-structure.jpg" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/09/14/strategy-structure.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="ç­–ç•¥æ¨¡å¼ç»“æ„å›¾"></p><h3 id="æ—¶åºå›¾"><a href="#æ—¶åºå›¾" class="headerlink" title="æ—¶åºå›¾"></a>æ—¶åºå›¾</h3><p><img src="https://statics.sh1a.qingstor.com/2018/09/14/strategy-seq.jpg" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2018/09/14/strategy-seq.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="ç­–ç•¥æ¨¡å¼æ—¶åºå›¾"></p><h2 id="å››ã€ç¤ºä¾‹ä»£ç "><a href="#å››ã€ç¤ºä¾‹ä»£ç " class="headerlink" title="å››ã€ç¤ºä¾‹ä»£ç "></a>å››ã€ç¤ºä¾‹ä»£ç </h2><p>é¦–å…ˆå®šä¹‰ä¸€ä¸ªç­–ç•¥æ¥å£ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IStrategy</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * ç­–ç•¥æ¨¡å¼çš„è¿ç®—æ³•åˆ™     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åæ˜¯å…·ä½“çš„ç­–ç•¥å®ç°ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteStrategy1</span> <span class="token keyword">implements</span> <span class="token class-name">IStrategy</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å…·ä½“ç­–ç•¥çš„ç­–ç•¥æ–¹æ³•1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteStrategy2</span> <span class="token keyword">implements</span> <span class="token class-name">IStrategy</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å…·ä½“ç­–ç•¥çš„ç­–ç•¥æ–¹æ³•2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ç€æ˜¯å°è£…è§’è‰²çš„ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Context</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// æŠ½è±¡ç­–ç•¥</span>    <span class="token keyword">private</span> <span class="token class-name">IStrategy</span> strategy<span class="token punctuation">;</span>    <span class="token comment">/**     * æ„é€ å‡½æ•°è®¾ç½®å…·ä½“ç­–ç•¥     * @param strategy     */</span>    <span class="token keyword">public</span> <span class="token class-name">Context</span><span class="token punctuation">(</span><span class="token class-name">IStrategy</span> strategy<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>strategy <span class="token operator">=</span> strategy<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * å°è£…åçš„ç­–ç•¥æ–¹æ³•     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doAnything</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>strategy<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åæ˜¯å®¢æˆ·ç«¯çš„è°ƒç”¨ç­–ç•¥ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// å£°æ˜ä¸€ä¸ªå…·ä½“çš„ç­–ç•¥</span>        <span class="token class-name">IStrategy</span> strategy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteStrategy1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å£°æ˜ä¸Šä¸‹æ–‡å¯¹è±¡</span>        <span class="token class-name">Context</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token punctuation">(</span>strategy<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ‰§è¡Œå°è£…åçš„æ–¹æ³•</span>        context<span class="token punctuation">.</span><span class="token function">doAnything</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="äº”ã€æ¨¡å¼åˆ†æ"><a href="#äº”ã€æ¨¡å¼åˆ†æ" class="headerlink" title="äº”ã€æ¨¡å¼åˆ†æ"></a>äº”ã€æ¨¡å¼åˆ†æ</h2><h3 id="æ€»ä½“åˆ†æ"><a href="#æ€»ä½“åˆ†æ" class="headerlink" title="æ€»ä½“åˆ†æ"></a>æ€»ä½“åˆ†æ</h3><ul><li>ç­–ç•¥æ¨¡å¼æ˜¯ä¸€ä¸ªæ¯”è¾ƒå®¹æ˜“ç†è§£å’Œä½¿ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œç­–ç•¥æ¨¡å¼æ˜¯å¯¹ç®—æ³•çš„å°è£…ï¼Œå®ƒæŠŠç®—æ³•çš„è´£ä»»å’Œç®—æ³•æœ¬èº«åˆ†å‰²å¼€ï¼Œå§”æ´¾ç»™ä¸åŒçš„å¯¹è±¡ç®¡ç†ã€‚ç­–ç•¥æ¨¡å¼é€šå¸¸æŠŠä¸€ä¸ªç³»åˆ—çš„ç®—æ³•å°è£…åˆ°ä¸€ç³»åˆ—çš„ç­–ç•¥ç±»é‡Œé¢ï¼Œä½œä¸ºä¸€ä¸ªæŠ½è±¡ç­–ç•¥ç±»çš„å­ç±»ã€‚ç”¨ä¸€å¥è¯æ¥è¯´ï¼Œå°±æ˜¯â€œ<strong>å‡†å¤‡ä¸€ç»„ç®—æ³•ï¼Œå¹¶å°†æ¯ä¸€ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œä½¿å¾—å®ƒä»¬å¯ä»¥äº’æ¢</strong>â€ã€‚</li><li>åœ¨ç­–ç•¥æ¨¡å¼ä¸­ï¼Œåº”å½“ç”±å®¢æˆ·ç«¯è‡ªå·±å†³å®šåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨ä»€ä¹ˆå…·ä½“ç­–ç•¥è§’è‰²ã€‚</li><li>ç­–ç•¥æ¨¡å¼ä»…ä»…å°è£…ç®—æ³•ï¼Œæä¾›æ–°ç®—æ³•æ’å…¥åˆ°å·²æœ‰ç³»ç»Ÿä¸­ï¼Œä»¥åŠè€ç®—æ³•ä»ç³»ç»Ÿä¸­â€œé€€ä¼‘â€çš„æ–¹ä¾¿ï¼Œç­–ç•¥æ¨¡å¼å¹¶ä¸å†³å®šåœ¨ä½•æ—¶ä½¿ç”¨ä½•ç§ç®—æ³•ï¼Œç®—æ³•çš„é€‰æ‹©ç”±å®¢æˆ·ç«¯æ¥å†³å®šã€‚è¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜äº†ç³»ç»Ÿçš„çµæ´»æ€§ï¼Œä½†æ˜¯å®¢æˆ·ç«¯éœ€è¦ç†è§£æ‰€æœ‰å…·ä½“ç­–ç•¥ç±»ä¹‹é—´çš„åŒºåˆ«ï¼Œä»¥ä¾¿é€‰æ‹©åˆé€‚çš„ç®—æ³•ï¼Œè¿™ä¹Ÿæ˜¯ç­–ç•¥æ¨¡å¼çš„ç¼ºç‚¹ä¹‹ä¸€ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†å®¢æˆ·ç«¯çš„ä½¿ç”¨éš¾åº¦ã€‚</li></ul><h3 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h3><p>ç­–ç•¥æ¨¡å¼çš„ä¼˜ç‚¹ï¼š</p><ul><li>ç­–ç•¥æ¨¡å¼æä¾›äº†å¯¹â€œå¼€é—­åŸåˆ™â€çš„å®Œç¾æ”¯æŒï¼Œç”¨æˆ·å¯ä»¥åœ¨ä¸ä¿®æ”¹åŸæœ‰ç³»ç»Ÿçš„åŸº- ç¡€ä¸Šé€‰æ‹©ç®—æ³•æˆ–è¡Œä¸ºï¼Œä¹Ÿå¯ä»¥çµæ´»åœ°å¢åŠ æ–°çš„ç®—æ³•æˆ–è¡Œä¸ºã€‚</li><li>ç­–ç•¥æ¨¡å¼æä¾›äº†ç®¡ç†ç›¸å…³çš„ç®—æ³•æ—çš„åŠæ³•ã€‚</li><li>ç­–ç•¥æ¨¡å¼æä¾›äº†å¯ä»¥æ›¿æ¢ç»§æ‰¿å…³ç³»çš„åŠæ³•ã€‚</li><li>ä½¿ç”¨ç­–ç•¥æ¨¡å¼å¯ä»¥é¿å…ä½¿ç”¨å¤šé‡æ¡ä»¶è½¬ç§»è¯­å¥ã€‚</li></ul><h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h3><p>ç­–ç•¥æ¨¡å¼çš„ç¼ºç‚¹ï¼š</p><ul><li>å®¢æˆ·ç«¯å¿…é¡»çŸ¥é“æ‰€æœ‰çš„ç­–ç•¥ç±»ï¼Œå¹¶è‡ªè¡Œå†³å®šä½¿ç”¨å“ªä¸€ä¸ªç­–ç•¥ç±»ã€‚</li><li>ç­–ç•¥æ¨¡å¼å°†é€ æˆäº§ç”Ÿå¾ˆå¤šç­–ç•¥ç±»ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨äº«å…ƒæ¨¡å¼åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡å°‘å¯¹è±¡çš„æ•°é‡ã€‚</li></ul><h3 id="é€‚ç”¨ç¯å¢ƒ"><a href="#é€‚ç”¨ç¯å¢ƒ" class="headerlink" title="é€‚ç”¨ç¯å¢ƒ"></a>é€‚ç”¨ç¯å¢ƒ</h3><p>åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼ï¼š</p><ul><li>å¦‚æœåœ¨ä¸€ä¸ªç³»ç»Ÿé‡Œé¢æœ‰è®¸å¤šç±»ï¼Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ä»…åœ¨äºå®ƒä»¬çš„è¡Œä¸ºï¼Œé‚£ä¹ˆä½¿ç”¨ç­–ç•¥æ¨¡å¼å¯ä»¥åŠ¨æ€åœ°è®©ä¸€ä¸ªå¯¹è±¡åœ¨è®¸å¤šè¡Œä¸ºä¸­é€‰æ‹©ä¸€ç§è¡Œä¸ºã€‚</li><li>ä¸€ä¸ªç³»ç»Ÿéœ€è¦åŠ¨æ€åœ°åœ¨å‡ ç§ç®—æ³•ä¸­é€‰æ‹©ä¸€ç§ã€‚</li><li>å¦‚æœä¸€ä¸ªå¯¹è±¡æœ‰å¾ˆå¤šçš„è¡Œä¸ºï¼Œå¦‚æœä¸ç”¨æ°å½“çš„æ¨¡å¼ï¼Œè¿™äº›è¡Œä¸ºå°±åªå¥½ä½¿ç”¨å¤šé‡çš„æ¡ä»¶é€‰æ‹©è¯­å¥æ¥å®ç°ã€‚</li><li>ä¸å¸Œæœ›å®¢æˆ·ç«¯çŸ¥é“å¤æ‚çš„ã€ä¸ç®—æ³•ç›¸å…³çš„æ•°æ®ç»“æ„ï¼Œåœ¨å…·ä½“ç­–ç•¥ç±»ä¸­å°è£…ç®—æ³•å’Œç›¸å…³çš„æ•°æ®ç»“æ„ï¼Œæé«˜ç®—æ³•çš„ä¿å¯†æ€§ä¸å®‰å…¨æ€§ã€‚</li></ul><h3 id="æ¨¡å¼æ‰©å±•"><a href="#æ¨¡å¼æ‰©å±•" class="headerlink" title="æ¨¡å¼æ‰©å±•"></a>æ¨¡å¼æ‰©å±•</h3><p>ç­–ç•¥æ¨¡å¼ä¸çŠ¶æ€æ¨¡å¼ï¼š</p><ul><li>å¯ä»¥é€šè¿‡ç¯å¢ƒç±»çŠ¶æ€çš„ä¸ªæ•°æ¥å†³å®šæ˜¯ä½¿ç”¨ç­–ç•¥æ¨¡å¼è¿˜æ˜¯çŠ¶æ€æ¨¡å¼ã€‚</li><li>ç­–ç•¥æ¨¡å¼çš„ç¯å¢ƒç±»è‡ªå·±é€‰æ‹©ä¸€ä¸ªå…·ä½“ç­–ç•¥ç±»ï¼Œå…·ä½“ç­–ç•¥ç±»æ— é¡»å…³å¿ƒç¯å¢ƒç±»ï¼›è€ŒçŠ¶æ€æ¨¡å¼çš„ç¯å¢ƒç±»ç”±äºå¤–åœ¨å› ç´ éœ€è¦æ”¾è¿›ä¸€ä¸ªå…·ä½“çŠ¶æ€ä¸­ï¼Œä»¥ä¾¿é€šè¿‡å…¶æ–¹æ³•å®ç°çŠ¶æ€çš„åˆ‡æ¢ï¼Œå› æ­¤ç¯å¢ƒç±»å’ŒçŠ¶æ€ç±»ä¹‹é—´å­˜åœ¨ä¸€ç§åŒå‘çš„å…³è”å…³ç³»ã€‚</li><li>ä½¿ç”¨ç­–ç•¥æ¨¡å¼æ—¶ï¼Œå®¢æˆ·ç«¯éœ€è¦çŸ¥é“æ‰€é€‰çš„å…·ä½“ç­–ç•¥æ˜¯å“ªä¸€ä¸ªï¼Œè€Œä½¿ç”¨çŠ¶æ€æ¨¡å¼æ—¶ï¼Œå®¢æˆ·ç«¯æ— é¡»å…³å¿ƒå…·ä½“çŠ¶æ€ï¼Œç¯å¢ƒç±»çš„çŠ¶æ€ä¼šæ ¹æ®ç”¨æˆ·çš„æ“ä½œè‡ªåŠ¨è½¬æ¢ã€‚</li><li>å¦‚æœç³»ç»Ÿä¸­æŸä¸ªç±»çš„å¯¹è±¡å­˜åœ¨å¤šç§çŠ¶æ€ï¼Œä¸åŒçŠ¶æ€ä¸‹è¡Œä¸ºæœ‰å·®å¼‚ï¼Œè€Œä¸”è¿™äº›çŠ¶æ€ä¹‹é—´å¯ä»¥å‘ç”Ÿè½¬æ¢æ—¶ä½¿ç”¨çŠ¶æ€æ¨¡å¼ï¼›å¦‚æœç³»ç»Ÿä¸­æŸä¸ªç±»çš„æŸä¸€è¡Œä¸ºå­˜åœ¨å¤šç§å®ç°æ–¹å¼ï¼Œè€Œä¸”è¿™äº›å®ç°æ–¹å¼å¯ä»¥äº’æ¢æ—¶ä½¿ç”¨ç­–ç•¥æ¨¡å¼ã€‚</li></ul><h2 id="å…­ã€æ€»ç»“"><a href="#å…­ã€æ€»ç»“" class="headerlink" title="å…­ã€æ€»ç»“"></a>å…­ã€æ€»ç»“</h2><ul><li>åœ¨ç­–ç•¥æ¨¡å¼ä¸­å®šä¹‰äº†ä¸€ç³»åˆ—ç®—æ³•ï¼Œå°†æ¯ä¸€ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œå¹¶è®©å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚ç­–ç•¥æ¨¡å¼è®©ç®—æ³•ç‹¬ç«‹äºä½¿ç”¨å®ƒçš„å®¢æˆ·è€Œå˜åŒ–ï¼Œä¹Ÿç§°ä¸ºæ”¿ç­–æ¨¡å¼ã€‚ç­–ç•¥æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡è¡Œä¸ºå‹æ¨¡å¼ã€‚</li><li>ç­–ç•¥æ¨¡å¼åŒ…å«ä¸‰ä¸ªè§’è‰²ï¼šç¯å¢ƒç±»åœ¨è§£å†³æŸä¸ªé—®é¢˜æ—¶å¯ä»¥é‡‡ç”¨å¤šç§ç­–ç•¥ï¼Œåœ¨ç¯å¢ƒç±»ä¸­ç»´æŠ¤ä¸€ä¸ªå¯¹æŠ½è±¡ç­–ç•¥ç±»çš„å¼•ç”¨å®ä¾‹ï¼›æŠ½è±¡ç­–ç•¥ç±»ä¸ºæ‰€æ”¯æŒçš„ç®—æ³•å£°æ˜äº†æŠ½è±¡æ–¹æ³•ï¼Œæ˜¯æ‰€æœ‰ç­–ç•¥ç±»çš„çˆ¶ç±»ï¼›å…·ä½“ç­–ç•¥ç±»å®ç°äº†åœ¨æŠ½è±¡ç­–ç•¥ç±»ä¸­å®šä¹‰çš„ç®—æ³•ã€‚</li><li>ç­–ç•¥æ¨¡å¼æ˜¯å¯¹ç®—æ³•çš„å°è£…ï¼Œå®ƒæŠŠç®—æ³•çš„è´£ä»»å’Œç®—æ³•æœ¬èº«åˆ†å‰²å¼€ï¼Œå§”æ´¾ç»™ä¸åŒçš„å¯¹è±¡ç®¡ç†ã€‚ç­–ç•¥æ¨¡å¼é€šå¸¸æŠŠä¸€ä¸ªç³»åˆ—çš„ç®—æ³•å°è£…åˆ°ä¸€ç³»åˆ—çš„ç­–ç•¥ç±»é‡Œé¢ï¼Œä½œä¸ºä¸€ä¸ªæŠ½è±¡ç­–ç•¥ç±»çš„å­ç±»ã€‚</li><li>ç­–ç•¥æ¨¡å¼ä¸»è¦ä¼˜ç‚¹åœ¨äºå¯¹â€œå¼€é—­åŸåˆ™â€çš„å®Œç¾æ”¯æŒï¼Œåœ¨ä¸ä¿®æ”¹åŸæœ‰ç³»ç»Ÿçš„åŸºç¡€ä¸Šå¯ä»¥æ›´æ¢ç®—æ³•æˆ–è€…å¢åŠ æ–°çš„ç®—æ³•ï¼Œå®ƒå¾ˆå¥½åœ°ç®¡ç†ç®—æ³•æ—ï¼Œæé«˜äº†ä»£ç çš„å¤ç”¨æ€§ï¼Œæ˜¯ä¸€ç§æ›¿æ¢ç»§æ‰¿ï¼Œé¿å…å¤šé‡æ¡ä»¶è½¬ç§»è¯­å¥çš„å®ç°æ–¹å¼ï¼›å…¶ç¼ºç‚¹åœ¨äºå®¢æˆ·ç«¯å¿…é¡»çŸ¥é“æ‰€æœ‰çš„ç­–ç•¥ç±»ï¼Œå¹¶ç†è§£å…¶åŒºåˆ«ï¼ŒåŒæ—¶åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†ç³»ç»Ÿä¸­ç±»çš„ä¸ªæ•°ï¼Œå¯èƒ½ä¼šå­˜åœ¨å¾ˆå¤šç­–ç•¥ç±»ã€‚</li><li>ç­–ç•¥æ¨¡å¼é€‚ç”¨æƒ…å†µåŒ…æ‹¬ï¼šåœ¨ä¸€ä¸ªç³»ç»Ÿé‡Œé¢æœ‰è®¸å¤šç±»ï¼Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ä»…åœ¨äºå®ƒä»¬çš„è¡Œä¸ºï¼Œä½¿ç”¨ç­–ç•¥æ¨¡å¼å¯ä»¥åŠ¨æ€åœ°è®©ä¸€ä¸ªå¯¹è±¡åœ¨è®¸å¤šè¡Œä¸ºä¸­é€‰æ‹©ä¸€ç§è¡Œä¸ºï¼›ä¸€ä¸ªç³»ç»Ÿéœ€è¦åŠ¨æ€åœ°åœ¨å‡ ç§ç®—æ³•ä¸­é€‰æ‹©ä¸€ç§ï¼›é¿å…ä½¿ç”¨éš¾ä»¥ç»´æŠ¤çš„å¤šé‡æ¡ä»¶é€‰æ‹©è¯­å¥ï¼›å¸Œæœ›åœ¨å…·ä½“ç­–ç•¥ç±»ä¸­å°è£…ç®—æ³•å’Œä¸ç›¸å…³çš„æ•°æ®ç»“æ„ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶è®¾è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScriptåŸºç¡€æ•™ç¨‹</title>
      <link href="/post/qian-duan/javascript-ji-chu-jiao-cheng/"/>
      <url>/post/qian-duan/javascript-ji-chu-jiao-cheng/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€JavaScriptä»‹ç»"><a href="#ä¸€ã€JavaScriptä»‹ç»" class="headerlink" title="ä¸€ã€JavaScriptä»‹ç»"></a>ä¸€ã€JavaScriptä»‹ç»</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript">JavaScript</a>æ˜¯ç›®å‰æ‰€æœ‰ä¸»æµæµè§ˆå™¨ä¸Šå”¯ä¸€æ”¯æŒçš„è„šæœ¬è¯­è¨€ï¼Œè¿™ä¹Ÿæ˜¯æ—©æœŸ<code>JavaScript</code>çš„å”¯ä¸€ç”¨é€”ã€‚å…¶ä¸»è¦ä½œç”¨æ˜¯åœ¨ä¸ä¸æœåŠ¡å™¨äº¤äº’çš„æƒ…å†µä¸‹ä¿®æ”¹<code>HTML</code>é¡µé¢å†…å®¹ï¼Œå› æ­¤å…¶æœ€å…³é”®çš„éƒ¨åˆ†æ˜¯<code>DOM</code>ï¼ˆæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼‰ï¼Œä¹Ÿå°±æ˜¯<code>HTML</code>å…ƒç´ çš„ç»“æ„ã€‚é€šè¿‡<code>Ajax</code>å¯ä»¥ä½¿<code>HTML</code>é¡µé¢é€šè¿‡<code>JavaScript</code>ï¼Œåœ¨ä¸é‡æ–°åŠ è½½é¡µé¢çš„æƒ…å†µä¸‹ä»æœåŠ¡å™¨ä¸Šè·å–æ•°æ®å¹¶æ˜¾ç¤ºï¼Œå¤§å¹…æé«˜ç”¨æˆ·ä½“éªŒã€‚é€šè¿‡<code>JavaScript</code>ï¼Œä½¿<code>Web</code>é¡µé¢å‘å±•æˆèƒ–å®¢æˆ·ç«¯æˆä¸ºå¯èƒ½ã€‚</p><h3 id="è¯­è¨€çš„æ€§è´¨"><a href="#è¯­è¨€çš„æ€§è´¨" class="headerlink" title="è¯­è¨€çš„æ€§è´¨"></a>è¯­è¨€çš„æ€§è´¨</h3><p>æœ¬èŠ‚å¯¹<code>JavaScript</code>çš„æ€§è´¨åšç®€è¦ä»‹ç»ï¼Œä»¥å¸®ä½ ç†è§£ä¸€äº›ç–‘é—®ã€‚</p><p><code>JavaScript</code>å’Œ<code>ECMAScript</code>ï¼ˆJavaScript versus ECMAScriptï¼‰<br>ç¼–ç¨‹è¯­è¨€ç§°ä¸º<code>JavaScript</code>ï¼Œè¯­è¨€æ ‡å‡†è¢«ç§°ä¸º<code>ECMAScript</code>ã€‚ä»–ä»¬æœ‰ä¸åŒåå­—çš„åŸå› æ˜¯å› ä¸ºâ€œJavaâ€å·²ç»è¢«æ³¨å†Œä¸ºå•†æ ‡ï¼ˆå±äºOracleï¼‰ã€‚ç›®å‰ï¼Œåªæœ‰<code>Mozilla</code>è¢«æ­£å¼å…è®¸ä½¿ç”¨â€œJavaScriptâ€åç§°ï¼Œå› ä¸ºå¾ˆä¹…ä»¥å‰ä»–ä»¬å¾—åˆ°ä¸€ä»½è®¸å¯ã€‚å› æ­¤ï¼Œå¼€æ”¾çš„è¯­è¨€æ ‡å‡†æ‹¥æœ‰ä¸åŒçš„åå­—ã€‚å½“å‰çš„<code>JavaScript</code>ç‰ˆæœ¬æ˜¯<code>ECMAScript 6</code>ï¼Œ<code>ECMAScript 7</code>å½“å‰æ˜¯å¼€å‘ç‰ˆã€‚</p><p><code>JavaScript</code>ä¹‹çˆ¶ï¼Œ<code>Brendan Eich</code><a href="http://yanhaijing.com/javascript/2013/06/22/javascript-designing-a-language-in-10-days/">è¿…é€Ÿäº†åˆ›å»ºä¸€é—¨ç¼–ç¨‹è¯­è¨€</a>ã€‚ï¼ˆå¦åˆ™ï¼ŒNetscapeå°†ä½¿ç”¨å…¶ä»–æŠ€æœ¯ï¼‰ã€‚ä»–å€Ÿé‰´äº†å‡ é—¨å…¶ä»–è¯­è¨€çš„ä¸€äº›ç‰¹æ€§ï¼š</p><ul><li>JavaScriptå€Ÿé‰´äº†Javaçš„è¯­æ³•å’Œå¦‚ä½•åŒºåˆ†åŸå§‹å€¼å’Œå¯¹è±¡ã€‚</li><li>JavaScriptçš„å‡½æ•°è®¾è®¡å—Schemeå’ŒAWKçš„å¯å‘â€”â€”ä»–ä»¬ï¼ˆçš„å‡½æ•°ï¼‰éƒ½æ˜¯ç¬¬ä¸€ç±»ï¼ˆfirst-classï¼‰å¯¹è±¡ï¼Œå¹¶ä¸”åœ¨è¯­è¨€ä¸­å¹¿æ³›ä½¿ç”¨ã€‚é—­åŒ…ä½¿ä»–ä»¬ï¼ˆå‡½æ•°ï¼‰å˜æˆå¼ºå¤§çš„å·¥å…·ã€‚</li><li>Selfå½±å“äº†JavaScriptç‹¬ä¸€æ— äºŒçš„é¢å‘å¯¹è±¡ç¼–ç¨‹(OOP)é£æ ¼ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³ï¼ˆåœ¨è¿™é‡Œæˆ‘ä»¬æ²¡æœ‰æåˆ°ï¼‰éå¸¸ä¼˜é›…ï¼ŒåŸºäºæ­¤åˆ›å»ºçš„è¯­è¨€éå¸¸å°‘ã€‚ä½†åé¢ä¼šæåˆ°ä¸€ä¸ªç®€å•çš„æ¨¡å¼ç…§é¡¾å¤§éƒ¨åˆ†ç”¨ä¾‹ã€‚JavaScripté¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ€æ‰‹çº§ç‰¹æ€§æ˜¯ä½ å¯ä»¥ç›´æ¥åˆ›å»ºå¯¹è±¡ã€‚ä¸éœ€è¦å…ˆåˆ›å»ºç±»æˆ–å…¶ä»–ç±»ä¼¼çš„ä¸œè¥¿ã€‚</li><li>Perlå’ŒPythonå½±å“äº†JavaScriptå­—ç¬¦ä¸²ï¼Œæ•°ç»„å’Œæ­£åˆ™è¡¨è¾¾å¼çš„æ“ä½œã€‚</li></ul><p><code>JavaScript</code>åœ¨æœ€åˆçš„æ—¶å€™å¹¶ä¸æ˜¯ä¸€ä¸ªå®Œå–„çš„è¯­è¨€ï¼Œå› æ­¤ä¹Ÿå¯¼è‡´<code>JavaScript</code>é—ç•™äº†å¾ˆå¤šä»¤äººè¯Ÿç—…çš„é—®é¢˜ã€‚åœ¨å¼€å‘ç¨å¤§è§„æ¨¡çš„åº”ç”¨æ—¶ä¼šæ˜¾å¾—åŠ›ä¸ä»å¿ƒï¼Œä½†æ˜¯ç”±äº<code>JavaScript</code>æœ¬èº«æ˜¯ä¸€ç§éå¸¸çµæ´»çš„è¯­è¨€ï¼Œå› æ­¤åœ¨å®ƒçš„åŸºç¡€ä¸Šå¼€å‘ç¨‹åºåº“æ¯”è¾ƒå®¹æ˜“ï¼Œå› æ­¤å‡ºç°äº†ä¸€å¤§æ‰¹éå¸¸ä¼˜ç§€çš„ç¬¬ä¸‰æ–¹åº“ï¼Œå¦‚<a href="http://jquery.com/">jQuery</a>ï¼Œ<a href="http://extjs.org.cn/">ExtJS</a>ï¼Œ<a href="http://underscorejs.org/">underscorejs</a>ï¼Œ<a href="http://backbonejs.org/">backbone</a>ç­‰ç­‰ï¼Œç”±äºè¿™äº›ç¬¬ä¸‰æ–¹åº“ï¼Œ<code>JavaScript</code>å˜å¾—éå¸¸ç®€å•ã€‚å…¶ä¸­<code>jQuery</code>çš„ä½¿ç”¨éå¸¸å¹¿æ³›ï¼Œå®ƒå¤§å¹…ç®€åŒ–äº†<code>DOM</code>å’Œ<code>Ajax</code>ï¼Œå·²ç»æˆä¸ºäº†å¾ˆå¤šç½‘ç«™çš„æ ‡é…ã€‚<code>jQuery</code>è™½ç„¶åŸºäº<code>JavaScript</code>ï¼Œä½†å®ƒæä¾›äº†å¦å¤–ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œä¹Ÿå°±æ˜¯é€»è¾‘å¼ç¼–ç¨‹ï¼Œä¸<code>SQL</code>å’Œæ­£åˆ™è¡¨è¾¾å¼ç±»ä¼¼ã€‚</p><h3 id="JavaScriptèƒ½åšä»€ä¹ˆ"><a href="#JavaScriptèƒ½åšä»€ä¹ˆ" class="headerlink" title="JavaScriptèƒ½åšä»€ä¹ˆ"></a>JavaScriptèƒ½åšä»€ä¹ˆ</h3><p><img src="https://statics.sh1a.qingstor.com/2020/11/29/js.png" class="lazyload placeholder" data-srcset="https://statics.sh1a.qingstor.com/2020/11/29/js.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="JavaScripté¡¹ç›®åœ¨Githubæ‰€å æ¯”ä¾‹"></p><p>å¦‚ä¸Šå›¾ï¼Œ<code>JavaScript</code>ä½œä¸º<a href="https://github.com/">Github</a>ä¸Šæœ€æµè¡Œã€æœ€ç«çš„ç¼–ç¨‹è¯­è¨€ï¼Œå‡ ä¹æ— æ‰€ä¸èƒ½ã€‚è¿™é‡Œæ˜¯<a href="https://segmentfault.com/u/puyart">PuYart</a>çš„å…³äº<a href="https://segmentfault.com/a/1190000003767058"><code>JavaScript</code>å°±è¦ç»Ÿæ²»ä¸–ç•Œäº†</a>çš„æ–‡ç« ï¼Œå¯ä»¥è®©æˆ‘ä»¬äº†è§£<code>JavaScript</code>åˆ°åº•èƒ½åšä»€ä¹ˆçš„ä¸€äº›ä»‹ç»ã€‚</p><ol><li>Webå‰ç«¯(å„ç§å‰ç«¯å·¥å…·ç±»åº“ã€å‰ç«¯æ¡†æ¶ã€åŠ¨ç”»æ•ˆæœã€æ•°æ®å¯è§†åŒ–ç­‰)</li><li>æœåŠ¡ç«¯å¼€å‘(<a href="https://nodejs.org/">Node.js</a>)</li><li>ç§»åŠ¨åº”ç”¨æˆ–è€…<code>Hybrid App</code>(Cordova)</li><li>æ¡Œé¢åº”ç”¨(<a href="http://nwjs.io/">NW.js</a>ã€<a href="http://electron.atom.io/">Electron</a>)</li><li>æ¸¸æˆ(<a href="http://unity3d.com/cn/">Unity3D</a>ã€<a href="http://www.cocos.com/doc/article/index?type=cocos2d-x&url=/doc/cocos-docs-master/manual/framework/cocos2d-js/catalog/../1-about-cocos2d-js/1-1-a-brief-history/zh.md">Cocos2d-js</a>ã€<a href="http://pomelo.netease.com/">Pomelo</a>)</li><li>VR(<a href="https://www.phodal.com/blog/why-javascript-will-use-vr-world/">JavaScriptåœ¨VRä¸–ç•Œçš„åº”ç”¨</a>)</li><li>ç¡¬ä»¶ã€åµŒå…¥å¼ç‰©è”ç½‘ç­‰(<a href="http://blog.jobbole.com/46055/">Tesselï¼šç”¨JavaScriptåšåµŒå…¥å¼å¼€å‘</a>)</li><li>æ“ä½œç³»ç»Ÿ(<a href="http://node-os.com/">NodeOS</a>)</li></ol><blockquote><p>Atwoodâ€™s Law: any application that can be written in JavaScript, will eventually be written in JavaScript.(Atwoodå®šå¾‹ï¼šå‡¡æ˜¯èƒ½ç”¨JavaScriptå†™å‡ºæ¥çš„ï¼Œæœ€ç»ˆéƒ½ä¼šç”¨JavaScriptå†™å‡ºæ¥ã€‚)</p></blockquote><h2 id="äºŒã€-JavaScriptè¯­æ³•"><a href="#äºŒã€-JavaScriptè¯­æ³•" class="headerlink" title="äºŒã€ JavaScriptè¯­æ³•"></a>äºŒã€ JavaScriptè¯­æ³•</h2><h3 id="è¯­å¥å’Œè¡¨è¾¾å¼"><a href="#è¯­å¥å’Œè¡¨è¾¾å¼" class="headerlink" title="è¯­å¥å’Œè¡¨è¾¾å¼"></a>è¯­å¥å’Œè¡¨è¾¾å¼</h3><p>äº†è§£<code>JavaScript</code>çš„è¯­æ³•ï¼Œå…ˆæ¥äº†è§£ä¸¤ä¸ªä¸»è¦çš„è¯­æ³•ç±»å‹ï¼šè¯­å¥å’Œè¡¨è¾¾å¼ã€‚</p><ul><li>è¯­å¥é€šå¸¸æ˜¯â€œåšæŸäº›äº‹æƒ…â€ã€‚ç¨‹åºæ˜¯ä¸€ç»„è¯­å¥çš„åºåˆ—ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¸‹é¢å£°æ˜ï¼ˆåˆ›å»ºï¼‰ä¸€ä¸ªå˜é‡ <code>foo</code>ï¼š </li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> foo<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>è¡¨è¾¾å¼æ˜¯äº§ç”Ÿâ€œå€¼â€ã€‚ä»–ä»¬é€šå¸¸ä½äºèµ‹å€¼æ“ä½œçš„å³è¾¹ã€å‡½æ•°å‚æ•°ç­‰ã€‚ä¸¾ä¸ªä¾‹å­ï¼š </li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token number">3</span> <span class="token operator">*</span> <span class="token number">7</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¯­å¥å’Œè¡¨è¾¾å¼ä¹‹é—´çš„åŒºåˆ«æœ€å¥½é€šè¿‡å®ä¾‹è¯´æ˜ï¼Œ<code>JavaScript</code>ï¼ˆåƒJavaï¼‰æœ‰ä¸¤ç§ä¸åŒçš„æ–¹å¼å®ç°<code>if-then-else</code>ã€‚ä¸€ç§æ˜¯ç”¨è¯­å¥ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> x<span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>y <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    x <span class="token operator">=</span> y<span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    x <span class="token operator">=</span> <span class="token operator">-</span>y<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦ä¸€ç§æ˜¯è¡¨è¾¾å¼ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> x <span class="token operator">=</span> y <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">?</span> y <span class="token operator">:</span> <span class="token operator">-</span>y<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä½ å¯ä»¥å°†åè€…ä½œä¸ºå‡½æ•°å‚æ•°ï¼ˆä½†å‰è€…ä¸è¡Œï¼‰ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">myFunction</span><span class="token punctuation">(</span>y <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">?</span> y <span class="token operator">:</span> <span class="token operator">-</span>y<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æœ€åï¼Œæ¯å½“<code>JavaScript</code>æœŸå¾…ä¸€ä¸ªè¯­å¥ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨ä¸€ä¸ªè¡¨è¾¾å¼ä»£æ›¿ã€‚ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">foo</span><span class="token punctuation">(</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>foo(...);</code>æ˜¯ä¸€ä¸ªè¯­å¥ï¼ˆä¹Ÿå«åšè¡¨è¾¾å¼è¯­å¥ï¼‰ï¼Œ<code>bar(7, 1)</code>åˆ™æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ã€‚ä»–ä»¬éƒ½å®ç°å‡½æ•°è°ƒç”¨ã€‚</p><h3 id="æµç¨‹æ§åˆ¶è¯­å¥å’Œè¯­å¥å—"><a href="#æµç¨‹æ§åˆ¶è¯­å¥å’Œè¯­å¥å—" class="headerlink" title="æµç¨‹æ§åˆ¶è¯­å¥å’Œè¯­å¥å—"></a>æµç¨‹æ§åˆ¶è¯­å¥å’Œè¯­å¥å—</h3><p>æµç¨‹æ§åˆ¶è¯­å¥ï¼Œå…¶è¯­å¥ä½“å¯ä»¥æ˜¯å•æ¡è¯­å¥ã€‚ä¸¾ä¸¤ä¸ªä¾‹å­ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>x <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> x<span class="token operator">--</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ç„¶è€Œï¼Œä»»ä½•è¯­å¥æ€»èƒ½è¢«è¯­å¥å—ä»£æ›¿ï¼ŒèŠ±æ‹¬å·åŒ…å«é›¶æˆ–å¤šæ¡è¯­å¥ã€‚å› æ­¤ï¼Œä½ ä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>x <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    x<span class="token operator">--</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸ºä¾¿äºç¨‹åºçš„é˜…è¯»å’Œç»´æŠ¤ï¼Œæ¨èä½¿ç”¨åä¸€ç§æ–¹å¼ï¼Œå³è¯­å¥å—æ–¹å¼ã€‚</p><h3 id="åˆ†å·"><a href="#åˆ†å·" class="headerlink" title="åˆ†å·"></a>åˆ†å·</h3><p><code>JavaScript</code>ä¸­çš„åˆ†å·æ˜¯<a href="http://www.2ality.com/2011/05/semicolon-insertion.html">å¯é€‰çš„</a>ã€‚ä½†çœç•¥ï¼ˆåˆ†å·ï¼‰å¯èƒ½ä¼šå¸¦æ¥æ„æƒ³ä¸åˆ°çš„ç»“æœï¼Œæ‰€ä»¥æˆ‘å»ºè®®è¿˜æ˜¯å†™ä¸Šåˆ†å·ã€‚</p><p>æ­£å¦‚ä¸Šé¢æ‰€çœ‹åˆ°çš„ï¼Œåˆ†å·ä½œä¸ºè¯­å¥çš„ç»“å°¾ï¼Œä½†è¯­å¥å—ä¸éœ€è¦ã€‚ä»…æœ‰ä¸€ç§æƒ…å†µä¸‹ä½ èƒ½çœ‹åˆ°è¯­å¥å—åé¢æœ‰åˆ†å·â€”â€”<strong>å‡½æ•°è¡¨è¾¾å¼åé¢çš„å‡½æ•°ä½“å—</strong>ã€‚<strong>è¡¨è¾¾å¼ä½œä¸ºè¯­å¥çš„ç»“å°¾ï¼Œåé¢æ˜¯åˆ†å·</strong>ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">var</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h3><p><code>JavaScript</code>çš„æ³¨é‡Šæœ‰ä¸¤ç§å½¢å¼ï¼šå•è¡Œæ³¨é‡Šå’Œå¤šè¡Œæ³¨é‡Šã€‚å•è¡Œæ³¨é‡Šä»¥<code>//</code>å¼€å¤´ï¼Œä»¥æ¢è¡Œç¬¦ç»“å°¾ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">x<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// å•è¡Œï¼ˆsingle-lineï¼‰æ³¨é‡Š</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¤šè¡Œæ³¨é‡Šç”¨<code>/**/</code>åŒ…è£¹</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/*  è¿™æ˜¯å¤šè¡Œæ³¨é‡Š å¤šè¡Œå“¦ */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¸‰ã€å˜é‡å’Œèµ‹å€¼"><a href="#ä¸‰ã€å˜é‡å’Œèµ‹å€¼" class="headerlink" title="ä¸‰ã€å˜é‡å’Œèµ‹å€¼"></a>ä¸‰ã€å˜é‡å’Œèµ‹å€¼</h2><p><code>JavaScript</code>ä¸­çš„å˜é‡åœ¨ä½¿ç”¨å‰å¿…é¡»å…ˆå£°æ˜ï¼Œå¦åˆ™ä¼šæŠ¥é”™å¼•ç”¨é”™è¯¯ï¼ˆReference Errorï¼‰ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> foo<span class="token punctuation">;</span>  <span class="token comment">// å£°æ˜å˜é‡â€œfooâ€</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="èµ‹å€¼"><a href="#èµ‹å€¼" class="headerlink" title="èµ‹å€¼"></a>èµ‹å€¼</h3><p>ä½ å¯ä»¥åœ¨å£°æ˜å˜é‡çš„åŒæ—¶ä¸ºå…¶èµ‹å€¼ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä½ ä¹Ÿå¯ä»¥ç»™å·²ç»å­˜åœ¨çš„å˜é‡é‡æ–°èµ‹å€¼ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">foo <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>  <span class="token comment">// æ›´æ”¹å˜é‡çš„å€¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="å¤åˆèµ‹å€¼æ“ä½œç¬¦"><a href="#å¤åˆèµ‹å€¼æ“ä½œç¬¦" class="headerlink" title="å¤åˆèµ‹å€¼æ“ä½œç¬¦"></a>å¤åˆèµ‹å€¼æ“ä½œç¬¦</h3><p>æœ‰å¾ˆå¤šå¤åˆèµ‹å€¼æ“ä½œç¬¦ï¼Œä¾‹å¦‚+=ã€‚ä¸‹é¢çš„ä¸¤ä¸ªèµ‹å€¼æ“ä½œç­‰ä»·ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">x <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>x <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="æ ‡è¯†ç¬¦å’Œå˜é‡å"><a href="#æ ‡è¯†ç¬¦å’Œå˜é‡å" class="headerlink" title="æ ‡è¯†ç¬¦å’Œå˜é‡å"></a>æ ‡è¯†ç¬¦å’Œå˜é‡å</h3><p>æ ‡è¯†ç¬¦å°±æ˜¯äº‹ç‰©çš„åå­—ï¼Œåœ¨<code>JavaScript</code>ä¸­ä»–ä»¬æ‰®æ¼”ä¸åŒçš„è¯­æ³•è§’è‰²ã€‚ä¾‹å¦‚ï¼Œå˜é‡çš„åç§°æ˜¯ä¸€ä¸ªæ ‡è¯†ç¬¦ã€‚</p><p>å¤§ä½“ä¸Šï¼Œæ ‡è¯†ç¬¦çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å¯ä»¥æ˜¯ä»»ä½•<code>Unicode</code>å­—ç¬¦ã€ç¾å…ƒæ ‡å¿—ç¬¦ï¼ˆ$ï¼‰æˆ–ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰ã€‚åé¢å¯ä»¥æ˜¯ä»»æ„å­—ç¬¦å’Œæ•°å­—ã€‚å› æ­¤ï¼Œä¸‹é¢å…¨æ˜¯åˆæ³•çš„æ ‡è¯†ç¬¦ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">arg0_tmp$elemÏ€<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>æ³¨æ„</strong>ï¼šé¦–å­—ç¬¦ä¸èƒ½æ˜¯æ•°å­—ï¼Œå¦‚æœæ˜¯æ•°å­—çš„è¯ï¼Œè¯¥å¦‚ä½•åŒºåˆ†æ˜¯æ•°å­—è¿˜æ˜¯å˜é‡å‘¢ï¼Ÿ</p></blockquote><p>ä¸€äº›æ ‡è¯†ç¬¦æ˜¯â€œä¿ç•™å…³é”®å­—â€â€”â€”ä»–ä»¬æ˜¯è¯­æ³•çš„ä¸€éƒ¨åˆ†ï¼Œä¸èƒ½ç”¨ä½œå˜é‡åã€‚ä»æŠ€æœ¯ä¸Šè®²ï¼Œä¸‹é¢ä¸‰ä¸ªæ ‡è¯†ç¬¦ä¸æ˜¯ä¿ç•™å­—ï¼Œä½†ä¹Ÿä¸åº”è¯¥ä½œä¸ºå˜é‡åï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token number">Infinity</span> <span class="token number">NaN</span> <span class="token keyword">undefined</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="å››ã€å€¼"><a href="#å››ã€å€¼" class="headerlink" title="å››ã€å€¼"></a>å››ã€å€¼</h2><p><code>JavaScript</code>æœ‰æ‰€æœ‰æˆ‘ä»¬æœŸå¾…çš„ç¼–ç¨‹è¯­è¨€å€¼ç±»å‹ï¼šå¸ƒå°”ï¼Œæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œæ•°ç»„ç­‰ã€‚<code>JavaScript</code>ä¸­çš„æ‰€æœ‰å€¼éƒ½æœ‰å±æ€§ã€‚æ¯ä¸ªå±æ€§æœ‰ä¸€ä¸ªé”®ï¼ˆæˆ–åå­—ï¼‰å’Œä¸€ä¸ªå€¼ã€‚ä½ å¯ä»¥ä½¿ç”¨ç‚¹ï¼ˆ.ï¼‰æ“ä½œç¬¦è¯»å–å±æ€§ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">value<span class="token punctuation">.</span>propKey<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¸¾ä¸ªä¾‹å­ï¼šå­—ç¬¦ä¸²<code>abc</code>æœ‰å±æ€§<code>lenght</code>ï¼ˆé•¿åº¦ï¼‰</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">'abc'</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¾—åˆ°3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä¸Šé¢çš„ä»£ç ä¹Ÿå¯ä»¥å†™æˆä¸‹é¢è¿™æ ·ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token string">'abc'</span><span class="token punctuation">.</span>length <span class="token comment">// å¾—åˆ°3</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç‚¹æ“ä½œç¬¦ä¹Ÿå¯ä»¥ç”¨æ¥ç»™å±æ€§èµ‹å€¼ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token comment">// ç©ºå¯¹è±¡</span>obj<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span> <span class="token comment">// åˆ›å»ºå±æ€§â€œfooâ€ï¼Œè®¾ç½®å®ƒä¸º123</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¾—åˆ°123</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä½ ä¹Ÿå¯ä»¥é€šè¿‡å®ƒï¼ˆ.ï¼‰è°ƒç”¨æ–¹æ³•ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token string">'hello'</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¾—åˆ°HELLO</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¸Šé¢ï¼Œæˆ‘ä»¬åœ¨å€¼<code>hello</code>ä¸Šé¢è°ƒç”¨æ–¹æ³•<code>toUpperCase()</code>ã€‚</p><h3 id="åŸå§‹ç±»å‹å€¼å’Œå¯¹è±¡"><a href="#åŸå§‹ç±»å‹å€¼å’Œå¯¹è±¡" class="headerlink" title="åŸå§‹ç±»å‹å€¼å’Œå¯¹è±¡"></a>åŸå§‹ç±»å‹å€¼å’Œå¯¹è±¡</h3><p>JavaScriptå®šä¹‰äº†ä¸åŒå€¼ä¹‹é—´çš„åŒºåˆ«ï¼š</p><ul><li>åŸå§‹å€¼åŒ…æ‹¬ï¼š<code>boolean</code>ï¼Œ<code>number</code>ï¼Œ<code>string</code>ï¼Œ<code>null</code>å’Œ<code>undefined</code>ã€‚</li><li>æ‰€æœ‰å…¶ä»–çš„å€¼éƒ½æ˜¯å¯¹è±¡ã€‚å®é™…ä¸Šå¯¹è±¡è¢«å®šä¹‰ä¸ºâ€”â€”æ‰€æœ‰ä¸ä¸ºåŸå§‹å€¼çš„å€¼ã€‚</li></ul><p>ä¸¤è€…ä¹‹é—´çš„ä¸»è¦åŒºåˆ«åœ¨äºä»–ä»¬æ˜¯å¦‚ä½•è¢«æ¯”è¾ƒçš„ï¼šæ¯ä¸€ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„æ ‡å¿—ï¼Œå¹¶ä¸”ä»…å’Œè‡ªå·±ç›¸ç­‰ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token comment">// ä¸€ä¸ªç©ºå¯¹è±¡</span><span class="token keyword">var</span> obj2 <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token comment">// å¦ä¸€ä¸ªç©ºå¯¹è±¡</span>obj1 <span class="token operator">===</span> obj2   <span class="token comment">// false</span>obj1 <span class="token operator">===</span> obj1   <span class="token comment">// true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç›¸åï¼Œæ‰€æœ‰åŸå§‹å€¼åªè¦ç¼–ç å€¼ç›¸åŒå°±è¢«è®¤ä¸ºæ˜¯ç›¸åŒçš„ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> prim1 <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span><span class="token keyword">var</span> prim2 <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>prim1 <span class="token operator">===</span> prim2 <span class="token comment">// true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="åŸå§‹ç±»å‹å€¼"><a href="#åŸå§‹ç±»å‹å€¼" class="headerlink" title="åŸå§‹ç±»å‹å€¼"></a>åŸå§‹ç±»å‹å€¼</h3><p>ä¸‹é¢å…¨æ˜¯åŸå§‹ç±»å‹å€¼ï¼ˆç®€ç§°ï¼šåŸå§‹å€¼ï¼‰ï¼š</p><ul><li><p>å¸ƒå°”ç±»å‹ï¼štrueï¼Œfalse</p></li><li><p>æ•°å­—ç±»å‹ï¼š1736ï¼Œ1.351</p></li><li><p>å­—ç¬¦ä¸²ç±»å‹: â€˜abcâ€™ï¼Œâ€abcâ€</p></li><li><p>ä¸¤ä¸ªâ€œæ— å€¼ï¼ˆnon-valuesï¼‰â€ï¼šundefinedï¼Œnull<br>åŸå§‹å€¼çš„ç‰¹å¾ï¼š</p></li><li><p><strong>å€¼åšæ¯”è¾ƒæ—¶,â€œå†…å®¹â€åšæ¯”è¾ƒ</strong>ã€‚</p></li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token number">3</span> <span class="token operator">===</span> <span class="token number">3</span> <span class="token comment">// true</span><span class="token string">'abc'</span> <span class="token operator">===</span> <span class="token string">'abc'</span> <span class="token comment">// true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li><strong>æ— æ³•æ›´æ”¹</strong>ï¼šå€¼çš„å±æ€§æ— æ³•æ›´æ”¹ï¼Œæ— æ³•æ·»åŠ å’Œç§»é™¤å±æ€§ï¼Œè·å–æœªçŸ¥å±æ€§æ€»è¿”å›undefinedã€‚</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">'abc'</span><span class="token punctuation">;</span>str<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// try to create property `foo` â‡’ no effect</span>str<span class="token punctuation">.</span>foo  <span class="token comment">// unknown property â‡’  undefined</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h3><h4 id="å¯¹è±¡çš„ç±»å‹"><a href="#å¯¹è±¡çš„ç±»å‹" class="headerlink" title="å¯¹è±¡çš„ç±»å‹"></a>å¯¹è±¡çš„ç±»å‹</h4><p>æ‰€æœ‰éåŸå§‹å€¼çš„å€¼éƒ½æ˜¯å¯¹è±¡ã€‚æœ€å¸¸è§çš„å‡ ç§å¯¹è±¡ç±»å‹æ˜¯ï¼š</p><ul><li>ç®€å•å¯¹è±¡ï¼ˆç±»å‹æ˜¯<code>Object</code>ï¼‰èƒ½é€šè¿‡å¯¹è±¡å­—é¢é‡åˆ›å»ºï¼š</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">&#123;</span>    firstName<span class="token operator">:</span> â€˜Janeâ€™<span class="token punctuation">,</span>     lastName<span class="token operator">:</span> â€˜Doeâ€™<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢çš„å¯¹è±¡æœ‰ä¸¤ä¸ªå±æ€§ï¼š<code>firstName</code>å±æ€§çš„å€¼æ˜¯â€œJaneâ€ï¼Œ<code>lastName</code>å±æ€§çš„å€¼æ˜¯â€œDoeâ€ã€‚</p><ul><li>æ•°ç»„ï¼ˆç±»å‹æ˜¯<code>Array</code>ï¼‰èƒ½é€šè¿‡æ•°ç»„å­—é¢é‡åˆ›å»ºï¼š</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">[</span> â€˜appleâ€™<span class="token punctuation">,</span> â€˜bananaâ€™<span class="token punctuation">,</span> â€˜cherryâ€™ <span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¸Šé¢çš„æ•°ç»„æœ‰ä¸‰ä¸ªå…ƒç´ ï¼Œå¯ä»¥é€šè¿‡æ•°å­—ç´¢å¼•è®¿é—®ã€‚ä¾‹å¦‚â€œappleâ€çš„ç´¢å¼•æ˜¯0ã€‚</p><ul><li>æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼ˆç±»å‹æ˜¯<code>RegExp</code>ï¼‰èƒ½é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼å­—é¢é‡åˆ›å»ºã€‚</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^a+b+$</span><span class="token regex-delimiter">/</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="å¯¹è±¡çš„ç‰¹å¾"><a href="#å¯¹è±¡çš„ç‰¹å¾" class="headerlink" title="å¯¹è±¡çš„ç‰¹å¾"></a>å¯¹è±¡çš„ç‰¹å¾</h4><ul><li><strong>æ¯”è¾ƒçš„æ˜¯å¼•ç”¨</strong>ï¼šæ¯”è¾ƒçš„æ˜¯æ ‡è¯†ç¬¦ï¼Œæ¯ä¸ªå€¼æœ‰è‡ªå·±çš„æ ‡è¯†ç¬¦ã€‚</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> <span class="token operator">===</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>  <span class="token comment">// ä¸¤ä¸ªä¸åŒçš„ç©ºå¯¹è±¡, false</span><span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">var</span> obj2 <span class="token operator">=</span> obj1<span class="token punctuation">;</span>obj1 <span class="token operator">===</span> obj2   <span class="token comment">// true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li><strong>é»˜è®¤å¯ä»¥æ›´æ”¹</strong>ã€‚</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>obj<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>obj<span class="token punctuation">.</span>foo <span class="token comment">//123</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ‰€æœ‰çš„æ•°æ®ç»“æ„ï¼ˆå¦‚æ•°ç»„ï¼‰éƒ½æ˜¯å¯¹è±¡ï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„å¯¹è±¡éƒ½æ˜¯æ•°æ®ç»“æ„ã€‚ä¾‹å¦‚ï¼šæ­£åˆ™è¡¨è¾¾å¼æ˜¯å¯¹è±¡ï¼Œä½†ä¸æ˜¯æ•°æ®ç»“æ„ã€‚</p><h3 id="undefined-å’Œ-null"><a href="#undefined-å’Œ-null" class="headerlink" title="undefined å’Œ null"></a>undefined å’Œ null</h3><p><code>JavaScript</code>æœ‰ä¸¤ä¸ªâ€œæ— å€¼ï¼‰â€ï¼š<code>undefined</code>å’Œ<code>null</code>ã€‚</p><p><code>undefined</code>çš„æ„æ€æ˜¯â€œæ²¡æœ‰å€¼â€ã€‚æœªåˆå§‹åŒ–çš„å˜é‡æ˜¯<code>undefined</code>ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> foo<span class="token punctuation">;</span>foo <span class="token comment">// undefined</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¯»å–ä¸å­˜åœ¨çš„å±æ€§æ—¶ï¼Œå°†è¿”å›<code>undefined</code>ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">></span> <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token comment">// ç©ºå¯¹è±¡</span><span class="token operator">></span> obj<span class="token punctuation">.</span>foo <span class="token comment">// undefined</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç¼ºçœçš„å‚æ•°ä¹Ÿæ˜¯<code>undefined</code>ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> x<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//undefined</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><code>null</code>çš„æ„æ€æ˜¯â€œæ²¡æœ‰å¯¹è±¡â€ã€‚å®ƒè¢«ç”¨æ¥è¡¨ç¤ºå¯¹è±¡çš„æ— å€¼ï¼ˆå‚æ•°ï¼Œé“¾ä¸Šçš„å¯¹è±¡ç­‰ï¼‰ã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹ä½ åº”è¯¥æŠŠ<code>undefined</code>å’Œ<code>null</code>çœ‹æˆæ˜¯ç­‰ä»·çš„ï¼Œå¦‚æœä»–ä»¬ä»£è¡¨ç›¸åŒæ„ä¹‰çš„æ— å€¼çš„è¯ã€‚æ£€æŸ¥ä»–ä»¬çš„ä¸€ç§æ–¹å¼æ˜¯é€šè¿‡ä¸¥æ ¼æ¯”è¾ƒï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> x <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token operator">...</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å¦ä¸€ç§åœ¨å®é™…ä¸­ä½¿ç”¨çš„æ–¹æ³•æ˜¯è®¤ä¸ºundefined å’Œ null éƒ½æ˜¯falseï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>x<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token operator">...</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>è­¦å‘Š</strong>ï¼šfalseï¼Œ0ï¼ŒNaN å’Œ â€œâ€ éƒ½è¢«å½“ä½œfalseã€‚</p></blockquote><h3 id="åŒ…è£…ç±»å‹"><a href="#åŒ…è£…ç±»å‹" class="headerlink" title="åŒ…è£…ç±»å‹"></a>åŒ…è£…ç±»å‹</h3><p>å¯¹è±¡ç±»å‹çš„å®ä¾‹<code>Foo</code>ï¼ˆåŒ…æ‹¬å†…å»ºç±»å‹ï¼Œä¾‹å¦‚Arrayå’Œå…¶ä»–è‡ªå®šä¹‰ç±»å‹ï¼‰ä»å¯¹è±¡<code>Foo.prototype</code>ä¸Šè·å–æ–¹æ³•ã€‚ä½ å¯ä»¥é€šè¿‡è¯»å–è¿™ä¸ªæ–¹æ³•çš„æ–¹å¼ï¼ˆä¸æ˜¯è°ƒç”¨ï¼‰éªŒè¯è¿™ç‚¹ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span>push <span class="token operator">===</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>push  <span class="token comment">// true</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç›¸åï¼Œ<strong>åŸå§‹ç±»å‹æ˜¯æ²¡æœ‰ç±»å‹çš„ï¼Œæ‰€ä»¥æ¯ä¸ªåŸå§‹ç±»å‹æœ‰ä¸€ä¸ªå…³è”ç±»å‹ï¼Œç§°ä¹‹ä¸ºåŒ…è£…ç±»å‹</strong>ï¼š</p><ul><li>å¸ƒå°”å€¼çš„åŒ…è£…ç±»å‹æ˜¯ Booleanã€‚å¸ƒå°”å€¼ä»Boolean.prototypeä¸Šè·å–æ–¹æ³•ï¼š</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">></span> <span class="token boolean">true</span><span class="token punctuation">.</span>toString <span class="token operator">===</span> <span class="token class-name">Boolean</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString    <span class="token comment">//true</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>æ³¨æ„ï¼šåŒ…è£…ç±»å‹åå­—çš„é¦–å­—æ¯æ˜¯å¤§å†™çš„Bã€‚å¦‚æœåœ¨JavaScriptä¸­å¸ƒå°”å€¼çš„ç±»å‹å¯ä»¥è®¿é—®ï¼Œé‚£ä¹ˆå®ƒå¯èƒ½ä¼šè¢«è½¬æ¢ä¸ºå¸ƒå°”å¯¹è±¡ã€‚</p></blockquote><ul><li>æ•°å­—å€¼çš„åŒ…è£…ç±»å‹æ˜¯<code>Number</code>ã€‚</li><li>å­—ç¬¦ä¸²å€¼çš„åŒ…è£…ç±»å‹æ˜¯<code>String</code>ã€‚</li></ul><p>åŒ…è£…ç±»å‹ä¹Ÿæœ‰å®ä¾‹ï¼ˆä»–ä»¬çš„å®ä¾‹æ˜¯å¯¹è±¡ï¼‰ï¼Œä½†ä¸å¸¸ç”¨ã€‚ç›¸åï¼ŒåŒ…è£…ç±»å‹æœ‰å…¶ä»–ç”¨å¤„ï¼š<strong>å¦‚æœä½ å°†ä»–ä»¬ä½œä¸ºå‡½æ•°è°ƒç”¨ï¼Œä»–ä»¬å¯ä»¥å°†å€¼è½¬æ¢ä¸ºåŸå§‹ç±»å‹</strong>ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">)</span> <span class="token comment">//123</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>  <span class="token comment">//'true'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="é€šè¿‡typeofå’Œinstanceofå°†å€¼åˆ†ç±»"><a href="#é€šè¿‡typeofå’Œinstanceofå°†å€¼åˆ†ç±»" class="headerlink" title="é€šè¿‡typeofå’Œinstanceofå°†å€¼åˆ†ç±»"></a>é€šè¿‡typeofå’Œinstanceofå°†å€¼åˆ†ç±»</h3><p>æœ‰ä¸¤ä¸ªæ“ä½œç¬¦å¯ä»¥ç”¨æ¥å°†å€¼åˆ†ç±»ï¼š<code>typeof</code>ä¸»è¦ç”¨äºåŸå§‹å€¼ï¼Œ<code>instanceof</code>ä¸»è¦ç”¨äºå¯¹è±¡ã€‚</p><h4 id="typeof-ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š"><a href="#typeof-ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š" class="headerlink" title="typeof ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š"></a>typeof ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</h4><p><code>typeof Â«valueÂ»</code></p><p><code>typeof</code>è¿”å›æè¿°<code>value</code>â€œç±»å‹â€çš„ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">typeof</span> <span class="token boolean">true</span> <span class="token comment">//'boolean'</span><span class="token keyword">typeof</span> <span class="token string">'abc'</span> <span class="token comment">//'string'</span><span class="token keyword">typeof</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> <span class="token comment">// ç©ºå¯¹è±¡å­—é¢é‡,'object'</span><span class="token keyword">typeof</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// ç©ºæ•°ç»„å­—é¢é‡,'object'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸‹é¢åˆ—å‡ºäº†<code>typeof</code>æ“ä½œçš„æ‰€æœ‰ç»“æœï¼š</p><pre class="line-numbers language-none"><code class="language-none">æ“ä½œæ•° ç»“æœundefined&#39;undefined&#39;null&#39;object&#39;Boolean value&#39;boolean&#39;Number value&#39;number&#39;String value&#39;string&#39;Function&#39;function&#39;All other values&#39;object&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ‰ä¸¤ä¸ªç»“æœå’Œæˆ‘ä»¬ä¸Šé¢è¯´çš„çš„åŸå§‹å€¼ä¸å¯¹è±¡æ˜¯çŸ›ç›¾çš„ï¼š</p><ul><li>å‡½æ•°çš„ç±»å‹æ˜¯<code>function</code>è€Œä¸æ˜¯<code>object</code>ã€‚å› ä¸ºå‡½æ•°ï¼ˆç±»å‹ä¸ºâ€œfunctionâ€ï¼‰æ˜¯å¯¹è±¡ï¼ˆç±»å‹æ˜¯å¯¹è±¡ï¼‰çš„å­ç±»å‹ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªé”™è¯¯ã€‚</li><li><code>null</code>çš„ç±»å‹æ˜¯<code>object</code>ã€‚è¿™æ˜¯ä¸€ä¸ªbugï¼Œä½†ä»æ²¡è¢«ä¿®å¤ï¼Œå› ä¸ºä¿®å¤åä¼šç ´åç°æœ‰çš„ä»£ç ã€‚</li></ul><h4 id="instanceofä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š"><a href="#instanceofä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š" class="headerlink" title="instanceofä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š"></a>instanceofä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</h4><p><code>Â«valueÂ» instanceof Â«ConstrÂ»</code></p><p>å¦‚æœ<code>value</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”<code>value</code> æ˜¯ç”±æ„é€ å‡½æ•°<code>Constr</code>åˆ›å»ºçš„ï¼ˆå‚è€ƒï¼šç±»ï¼‰ã€‚ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// é€šè¿‡æ„é€ å‡½æ•°Baråˆ›å»ºå¯¹è±¡</span>b <span class="token keyword">instanceof</span> <span class="token class-name">Bar</span>    <span class="token comment">//true</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> <span class="token keyword">instanceof</span> <span class="token class-name">Object</span>    <span class="token comment">//true</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span> <span class="token comment">//true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ·±å…¥é˜…è¯»"><a href="#æ·±å…¥é˜…è¯»" class="headerlink" title="æ·±å…¥é˜…è¯»"></a>æ·±å…¥é˜…è¯»</h3><ul><li><a href="http://yanhaijing.com/javascript/2014/01/05/exploring-the-abyss-of-null-and-undefined-in-javascript/">æ¢ç´¢JavaScriptä¸­Nullå’ŒUndefinedçš„æ·±æ¸Š</a></li></ul><h2 id="äº”ã€å¸ƒå°”"><a href="#äº”ã€å¸ƒå°”" class="headerlink" title="äº”ã€å¸ƒå°”"></a>äº”ã€å¸ƒå°”</h2><p>å¸ƒå°”ç±»å‹åŸå§‹å€¼åŒ…æ‹¬<code>true</code>å’Œ<code>false</code>ã€‚ä¸‹é¢çš„æ“ä½œç¬¦ä¼šå¾—åˆ°å¸ƒå°”å€¼ï¼š</p><ul><li>äºŒå…ƒé€»è¾‘è¿ç®—ç¬¦ï¼š&amp;&amp;ï¼ˆä¸ï¼‰ï¼Œ||ï¼ˆæˆ–ï¼‰</li><li>å‰ç¼€é€»è¾‘è¿ç®—ç¬¦ï¼š!ï¼ˆéï¼‰</li><li>ç­‰å€¼è¿ç®—ç¬¦ï¼š=== !== == !=</li><li>æ¯”è¾ƒè¿ç®—ç¬¦ï¼ˆå­—ç¬¦ä¸²æˆ–æ•°å­—ï¼‰ï¼š&gt; &gt;= &lt; &lt;=</li></ul><h3 id="çœŸå€¼å’Œå‡å€¼"><a href="#çœŸå€¼å’Œå‡å€¼" class="headerlink" title="çœŸå€¼å’Œå‡å€¼"></a>çœŸå€¼å’Œå‡å€¼</h3><p>æ¯å½“<code>JavaScript</code>å¸Œæœ›ä¸€ä¸ªå¸ƒå°”å€¼æ—¶ï¼ˆä¾‹å¦‚ï¼šifè¯­å¥çš„æ¡ä»¶ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ä»»ä½•å€¼ã€‚å®ƒå°†è¢«ç†è§£ï¼ˆè½¬æ¢ï¼‰ä¸º<code>true</code>æˆ–<code>false</code>ã€‚ä¸‹é¢çš„å€¼è¢«ç†è§£ä¸º<code>false</code>ï¼š</p><ul><li>undefined, null</li><li>å¸ƒå°”: false</li><li>æ•°å­—: 0, NaN</li><li>å­—ç¬¦ä¸²: â€˜â€™</li></ul><p>æ‰€æœ‰å…¶ä»–å€¼è¢«è®¤ä¸º<code>true</code>ã€‚è¢«ç†è§£ä¸º<code>false</code>çš„å€¼ç§°ä¸ºå‡å€¼ï¼Œè¢«ç†è§£ä¸º<code>true</code>çš„å€¼ç§°ä¸ºçœŸå€¼ã€‚å¯ä»¥ä½¿ç”¨<code>Boolean</code>ä½œä¸ºå‡½æ•°ï¼Œæµ‹è¯•å€¼è¢«ç†è§£ä¸ºä»€ä¹ˆã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span>  <span class="token comment">//false</span><span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token comment">//false</span><span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    <span class="token comment">//true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="äºŒå…ƒé€»è¾‘è¿ç®—ç¬¦"><a href="#äºŒå…ƒé€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="äºŒå…ƒé€»è¾‘è¿ç®—ç¬¦"></a>äºŒå…ƒé€»è¾‘è¿ç®—ç¬¦</h3><p><code>JavaScript</code>ä¸­çš„<strong>äºŒå…ƒé€»è¾‘è¿ç®—ç¬¦æ˜¯çŸ­è·¯è¿ç®—</strong>â€”â€”å¦‚æœç¬¬ä¸€ä¸ªæ“ä½œæ•°å¯ä»¥ç¡®å®šç»“æœï¼Œç¬¬äºŒä¸ªæ“ä½œæ•°å°†ä¸è¢«éªŒè¯ï¼ˆè¿ç®—ï¼‰ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œå‡½æ•°<code>foo()</code>æ°¸è¿œä¸ä¼šè¢«è°ƒç”¨ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token boolean">true</span> <span class="token operator">||</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æ­¤å¤–ï¼Œ<strong>äºŒå…ƒé€»è¾‘è¿ç®—ç¬¦ä¼šè¿”å›æ“ä½œæ•°ä¸­çš„ä¸€ä¸ª</strong>ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œä¹Ÿå¯èƒ½ä¸æ˜¯ã€‚</p><ul><li><strong>ä¸</strong>ï¼šå¦‚æœç¬¬ä¸€ä¸ªæ“ä½œæ•°æ˜¯å‡å€¼ï¼Œè¿”å›ç¬¬ä¸€ä¸ªã€‚å¦åˆ™è¿”å›ç¬¬äºŒä¸ªæ“ä½œæ•°ã€‚</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token number">NaN</span> <span class="token operator">&amp;&amp;</span> <span class="token string">'abc'</span>    <span class="token comment">//NaN</span><span class="token number">123</span> <span class="token operator">&amp;&amp;</span> <span class="token string">'abc'</span>    <span class="token comment">//'abc'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li><strong>æˆ–</strong>ï¼šå¦‚æœç¬¬ä¸€ä¸ªæ“ä½œæ•°æ˜¯çœŸå€¼ï¼Œè¿”å›ç¬¬ä¸€ä¸ªã€‚å¦åˆ™ï¼Œè¿”å›ç¬¬äºŒä¸ªæ“ä½œæ•°ã€‚</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token string">'abc'</span> <span class="token operator">||</span> <span class="token number">123</span>    <span class="token comment">//'abc'</span><span class="token string">''</span> <span class="token operator">||</span> <span class="token number">123</span>   <span class="token comment">//123</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="ç­‰å€¼è¿ç®—ç¬¦"><a href="#ç­‰å€¼è¿ç®—ç¬¦" class="headerlink" title="ç­‰å€¼è¿ç®—ç¬¦"></a>ç­‰å€¼è¿ç®—ç¬¦</h3><p>åœ¨<code>JavaScript</code>ä¸­æ£€æµ‹ç›¸ç­‰ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰ï¼ˆ<code>===</code>ï¼‰å’Œä¸¥æ ¼ä¸ç­‰ï¼ˆ<code>!==</code>ï¼‰ã€‚æˆ–è€…ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨éä¸¥æ ¼ç›¸ç­‰ï¼ˆ<code>==</code>ï¼‰å’Œéä¸¥æ ¼ä¸ç­‰ï¼ˆ<code>!=</code>ï¼‰ã€‚</p><blockquote><p><strong>ç»éªŒè§„åˆ™ï¼šæ€»æ˜¯ç”¨ä¸¥æ ¼è¿ç®—ç¬¦ï¼Œå‡è£…éä¸¥æ ¼è¿ç®—ç¬¦ä¸å­˜åœ¨ã€‚ä¸¥æ ¼ç›¸ç­‰æ›´å®‰å…¨ã€‚</strong></p></blockquote><h3 id="æ·±å…¥é˜…è¯»-1"><a href="#æ·±å…¥é˜…è¯»-1" class="headerlink" title="æ·±å…¥é˜…è¯»"></a>æ·±å…¥é˜…è¯»</h3><ul><li><a href="http://yanhaijing.com/javascript/2014/04/25/strict-equality-exemptions/">åœ¨JavaScriptä¸­ä»€ä¹ˆæ—¶å€™ä½¿ç”¨==æ˜¯æ­£ç¡®çš„ï¼Ÿ</a></li></ul><h2 id="å…­ã€æ•°å­—"><a href="#å…­ã€æ•°å­—" class="headerlink" title="å…­ã€æ•°å­—"></a>å…­ã€æ•°å­—</h2><p><code>JavaScript</code>ä¸­çš„<strong>æ‰€æœ‰æ•°å­—éƒ½æ˜¯æµ®ç‚¹å‹</strong>ï¼ˆè™½ç„¶å¤§éƒ¨åˆ†çš„JavaScriptå¼•æ“å†…éƒ¨ä¹Ÿä½¿ç”¨æ•´æ•°ï¼‰ã€‚è‡³äºä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼ŒæŸ¥çœ‹è¿™é‡Œï¼ˆ<a href="http://yanhaijing.com/javascript/2014/03/14/what-every-javascript-developer-should-know-about-floating-points">æ¯ä¸€ä¸ªJavaScriptå¼€å‘è€…åº”è¯¥äº†è§£çš„æµ®ç‚¹çŸ¥è¯†</a>ï¼‰ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token number">1</span> <span class="token operator">===</span> <span class="token number">1.0</span>   <span class="token comment">//true</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç‰¹æ®Šæ•°å­—ï¼š</p><ul><li><code>NaN</code> (â€œä¸æ˜¯ä¸€ä¸ªæ•°å­— not a numberâ€): é”™è¯¯å€¼ã€‚</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">'xyz'</span><span class="token punctuation">)</span>  <span class="token comment">// 'xyz' ä¸èƒ½è¢«è½¬æ¢ä¸ºæ•°å­—å¾—åˆ°:NaN</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><code>Infinity</code>ï¼šä¹Ÿæ˜¯æœ€å¤§é”™è¯¯å€¼ï¼ˆæ— ç©·å¤§ï¼‰</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token number">3</span> <span class="token operator">/</span> <span class="token number">0</span>   <span class="token comment">//Infinity</span>Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span>  <span class="token comment">// æ•°å­—å¤ªå¤§äº†,å¾—åˆ°Infinity</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>Infinity</code>æœ‰æ—¶å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå®ƒæ¯”ä»»ä½•å…¶ä»–æ•°å­—éƒ½å¤§ã€‚åŒæ ·ï¼Œ<code>-Infinity</code> æ¯”å…¶ä»–ä»»ä½•æ•°å­—éƒ½å°ã€‚</p><ul><li><code>JavaScript</code>æœ‰ä¸¤ä¸ªé›¶ï¼Œ<code>+0</code>å’Œ<code>-0</code>ã€‚å®ƒï¼ˆjså¼•æ“ï¼‰é€šå¸¸ä¸è®©ä½ çœ‹åˆ°ï¼Œå¹¶ç®€å•å°†ä¸¤ä¸ªé›¶éƒ½æ˜¾ç¤ºä¸º0ï¼š</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">+</span><span class="token number">0</span>  <span class="token comment">//0</span><span class="token operator">-</span><span class="token number">0</span>  <span class="token comment">//0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å› æ­¤æœ€å¥½å‡è£…åªæœ‰ä¸€ä¸ªé›¶ï¼ˆæ­£å¦‚æˆ‘ä»¬çœ‹åˆ°å‡å€¼æ—¶æ‰€åšçš„é‚£æ ·ï¼š**-0 å’Œ +0 éƒ½æ˜¯å‡å€¼**ï¼‰ã€‚</p><h3 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h3><p><code>JavaScript</code>ä¸­æœ‰ä¸‹åˆ—ç®—æ•°è¿ç®—ç¬¦ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">åŠ <span class="token operator">:</span> number1 <span class="token operator">+</span> number2å‡<span class="token operator">:</span> number1 <span class="token operator">-</span> number2ä¹˜<span class="token operator">:</span> number1 <span class="token operator">*</span> number2é™¤<span class="token operator">:</span> number1 <span class="token operator">/</span> number2æ¨¡<span class="token operator">:</span> number1 <span class="token operator">%</span> number2è‡ªå¢<span class="token operator">:</span> <span class="token operator">++</span>variable<span class="token punctuation">,</span> variable<span class="token operator">++</span>è‡ªå‡<span class="token operator">:</span> â€“variable<span class="token punctuation">,</span> variableâ€“è´Ÿå€¼<span class="token operator">:</span> <span class="token operator">-</span>valueæ­£å€¼ï¼ˆè½¬æ¢ä¸ºæ•°å­—ï¼‰<span class="token operator">:</span> <span class="token operator">+</span>value<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¨å±€å¯¹è±¡<code>Math</code>é€šè¿‡å‡½æ•°æä¾›æ›´å¤šç®—æ•°è¿ç®—æ“ä½œã€‚</p><p><code>JavaScript</code>ä¸­ä¹Ÿæœ‰ä½è¿ç®—ç¬¦ï¼ˆä¾‹å¦‚ï¼š&amp;ï¼‰ã€‚</p><h2 id="ä¸ƒã€å­—ç¬¦ä¸²"><a href="#ä¸ƒã€å­—ç¬¦ä¸²" class="headerlink" title="ä¸ƒã€å­—ç¬¦ä¸²"></a>ä¸ƒã€å­—ç¬¦ä¸²</h2><p>å­—ç¬¦ä¸²å¯ä»¥ç›´æ¥é€šè¿‡å­—ç¬¦ä¸²å­—é¢é‡åˆ›å»ºã€‚è¿™äº›å­—é¢é‡è¢«å•å¼•å·æˆ–åŒå¼•å·åŒ…è£¹ã€‚åæ–œçº¿ï¼ˆ\ï¼‰è½¬ä¹‰å­—ç¬¦å¹¶ä¸”äº§ç”Ÿä¸€äº›æ§åˆ¶å­—ç¬¦ã€‚ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token string">'abc'</span><span class="token string">"abc"</span><span class="token string">'Did she say "Hello"?'</span><span class="token string">"Did she say \"Hello\"?"</span><span class="token string">'That\'s nice!'</span><span class="token string">"That's nice!"</span><span class="token string">'Line 1\nLine 2'</span>  <span class="token comment">// æ¢è¡Œ</span><span class="token string">'Backlash: \\'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥é€šè¿‡æ–¹æ‹¬å·è®¿é—®å•ä¸ªå­—ç¬¦ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">'abc'</span><span class="token punctuation">;</span>str<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token comment">//'b'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>length</code>å±æ€§æ˜¯å­—ç¬¦ä¸²çš„å­—ç¬¦æ•°é‡ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token string">'abc'</span><span class="token punctuation">.</span>length  <span class="token comment">//3</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><strong>æé†’</strong>ï¼šå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼Œå¦‚æœä½ æƒ³æ”¹å˜ç°æœ‰å­—ç¬¦ä¸²ï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚</p></blockquote><h3 id="å­—ç¬¦ä¸²è¿ç®—ç¬¦"><a href="#å­—ç¬¦ä¸²è¿ç®—ç¬¦" class="headerlink" title="å­—ç¬¦ä¸²è¿ç®—ç¬¦"></a>å­—ç¬¦ä¸²è¿ç®—ç¬¦</h3><p>å­—ç¬¦ä¸²å¯ä»¥é€šè¿‡åŠ å·æ“ä½œç¬¦ï¼ˆ+ï¼‰æ‹¼æ¥ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªæ“ä½œæ•°ä¸ºå­—ç¬¦ä¸²ï¼Œä¼šå°†å¦ä¸€ä¸ªæ“ä½œæ•°ä¹Ÿè½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> msgCount <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span><span class="token string">'You have '</span><span class="token operator">+</span> msgCount <span class="token operator">+</span> <span class="token string">' messages'</span> <span class="token comment">//'You have 3 messages'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿ç»­æ‰§è¡Œæ‹¼æ¥æ“ä½œå¯ä»¥ä½¿ç”¨<code>+=</code>æ“ä½œç¬¦ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>str <span class="token operator">+=</span> <span class="token string">'Multiple '</span><span class="token punctuation">;</span>str <span class="token operator">+=</span> <span class="token string">'pieces '</span><span class="token punctuation">;</span>str <span class="token operator">+=</span> <span class="token string">'are concatenated.'</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//'Multiple pieces are concatenated.'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å­—ç¬¦ä¸²æ–¹æ³•"><a href="#å­—ç¬¦ä¸²æ–¹æ³•" class="headerlink" title="å­—ç¬¦ä¸²æ–¹æ³•"></a>å­—ç¬¦ä¸²æ–¹æ³•</h3><p>å­—ç¬¦ä¸²æœ‰è®¸å¤šæœ‰ç”¨çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token string">'abc'</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment">// å¤åˆ¶å­å­—ç¬¦ä¸²,å¾—åˆ°ç´¢å¼•1åŠå…¶ä¹‹åçš„å­—ç¬¦ä¸²ï¼Œå³ï¼š'bc'</span><span class="token string">'abc'</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>   <span class="token comment">//å¾—åˆ°ç´¢å¼•1å’Œ2ä¹‹é—´çš„å­—ç¬¦ä¸²ï¼Œå³ï¼š'b'</span><span class="token string">'\t xyz  '</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// ç§»é™¤ç©ºç™½å­—ç¬¦ï¼Œå³ï¼š'xyz'</span><span class="token string">'mjÃ¶lnir'</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">//è½¬æˆå¤§å†™ï¼Œå³ï¼š'MJÃ–LNIR'</span><span class="token string">'abc'</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span>  <span class="token comment">// æŸ¥æ‰¾ç¬¬ä¸€ä¸ªbçš„ç´¢å¼•ï¼Œå³ï¼š1</span><span class="token string">'abc'</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">)</span>    <span class="token comment">//æ²¡æœ‰è¿”å›-1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å…«ã€è¯­å¥"><a href="#å…«ã€è¯­å¥" class="headerlink" title="å…«ã€è¯­å¥"></a>å…«ã€è¯­å¥</h2><h3 id="æ¡ä»¶ï¼ˆConditionalsï¼‰"><a href="#æ¡ä»¶ï¼ˆConditionalsï¼‰" class="headerlink" title="æ¡ä»¶ï¼ˆConditionalsï¼‰"></a>æ¡ä»¶ï¼ˆConditionalsï¼‰</h3><p><code>if</code>è¯­å¥é€šè¿‡å¸ƒå°”æ¡ä»¶å†³å®šæ‰§è¡Œé‚£ä¸ªåˆ†æ”¯ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span>myvar <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// then</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>myvar <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// then</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// else</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>myvar <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// then</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>myvar <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// else-if</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>myvar <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// else-if</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// else</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸‹é¢çš„<code>switch</code>è¯­å¥ï¼Œfuritçš„å€¼å†³å®šé‚£ä¸ªåˆ†æ”¯è¢«æ‰§è¡Œã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">switch</span> <span class="token punctuation">(</span>fruit<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">case</span> <span class="token string">'banana'</span><span class="token operator">:</span>        <span class="token comment">// ...</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token keyword">case</span> <span class="token string">'apple'</span><span class="token operator">:</span>        <span class="token comment">// ...</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token keyword">default</span><span class="token operator">:</span>  <span class="token comment">// æ‰€æœ‰å…¶ä»–æƒ…å†µ</span>        <span class="token comment">// ...</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å¾ªç¯ï¼ˆLoopsï¼‰"><a href="#å¾ªç¯ï¼ˆLoopsï¼‰" class="headerlink" title="å¾ªç¯ï¼ˆLoopsï¼‰"></a>å¾ªç¯ï¼ˆLoopsï¼‰</h3><p>for å¾ªç¯çš„æ ¼å¼å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">for</span><span class="token punctuation">(</span>åˆå§‹åŒ–<span class="token punctuation">;</span> å½“æ¡ä»¶æˆç«‹æ—¶å¾ªç¯<span class="token punctuation">;</span> ä¸‹ä¸€æ­¥æ“ä½œ<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¾‹å­ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å½“æ¡ä»¶æˆç«‹æ—¶<code>while</code>å¾ªç¯ç»§ç»­å¾ªç¯å®ƒçš„å¾ªç¯ä½“ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// å’Œä¸Šé¢çš„forå¾ªç¯ç›¸ç­‰</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    i<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½“æ¡ä»¶æˆç«‹æ—¶ï¼Œ<code>do-while</code>å¾ªç¯ç»§ç»­å¾ªç¯ã€‚ç”±äºæ¡ä»¶ä½äºå¾ªç¯ä½“ä¹‹åï¼Œæ‰€ä»¥å¾ªç¯ä½“æ€»æ˜¯è¢«è‡³å°‘è‡³å°‘æ‰§è¡Œä¸€æ¬¡ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">do</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ...</span><span class="token punctuation">&#125;</span> <span class="token keyword">while</span><span class="token punctuation">(</span>æ¡ä»¶<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>åœ¨æ‰€æœ‰çš„å¾ªç¯ä¸­ï¼š</p><ul><li>breakä¸­æ–­å¾ªç¯</li><li>continueå¼€å§‹ä¸€ä¸ªæ–°çš„å¾ªç¯è¿­ä»£</li></ul><h2 id="ä¹ã€å‡½æ•°"><a href="#ä¹ã€å‡½æ•°" class="headerlink" title="ä¹ã€å‡½æ•°"></a>ä¹ã€å‡½æ•°</h2><p>å®šä¹‰å‡½æ•°çš„ä¸€ç§æ–¹æ³•æ˜¯é€šè¿‡å‡½æ•°å£°æ˜ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">param1<span class="token punctuation">,</span> param2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> param1 <span class="token operator">+</span> param2<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢çš„ä»£ç å®šä¹‰ä¸€ä¸ªåç§°å«åš<code>add</code>çš„å‡½æ•°ï¼Œæœ‰ä¸¤ä¸ªå‚æ•°<code>param1</code>å’Œ<code>param2</code>ï¼Œå¹¶ä¸”è¿”å›å‚æ•°çš„å’Œã€‚ä¸‹é¢æ˜¯å¦‚ä½•è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>   <span class="token comment">//7</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span>   <span class="token comment">//'ab'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¦ä¸€ç§å®šä¹‰<code>add()</code>å‡½æ•°çš„æ–¹æ³•æ˜¯é€šè¿‡å‡½æ•°è¡¨è¾¾å¼ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">param1<span class="token punctuation">,</span> param2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> param1 <span class="token operator">+</span> param2<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å‡½æ•°è¡¨è¾¾å¼äº§ç”Ÿä¸€ä¸ªå€¼ï¼Œå› æ­¤å¯ä»¥ç›´æ¥å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">someOtherFunction</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">p1<span class="token punctuation">,</span> p2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token operator">...</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="å‡½æ•°å£°æ˜æå‡"><a href="#å‡½æ•°å£°æ˜æå‡" class="headerlink" title="å‡½æ•°å£°æ˜æå‡"></a>å‡½æ•°å£°æ˜æå‡</h3><p>å‡½æ•°å£°æ˜ä¼šè¢«æå‡ï¼Œä»–ä»¬å…¨è¢«ç§»åŠ¨åˆ°å½“å‰ä½œç”¨åŸŸå¼€å§‹ä¹‹å¤„ã€‚è¿™å…è®¸ä½ åœ¨å‡½æ•°å£°æ˜ä¹‹å‰è°ƒç”¨å®ƒä»¬ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// æ²¡é—®é¢˜ï¼Œbarè¢«æå‡</span>    <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token operator">...</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>æ³¨æ„</strong>ï¼šè™½ç„¶å˜é‡å£°æ˜ä¹Ÿä¼šè¢«æå‡ï¼Œä½†èµ‹å€¼çš„è¿‡ç¨‹ä¸ä¼šè¢«æå‡ï¼š</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// æœ‰é—®é¢˜ï¼Œbaræ˜¯undefined</span>    <span class="token keyword">var</span> <span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// ...</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ç‰¹æ®Šå˜é‡å‚æ•°"><a href="#ç‰¹æ®Šå˜é‡å‚æ•°" class="headerlink" title="ç‰¹æ®Šå˜é‡å‚æ•°"></a>ç‰¹æ®Šå˜é‡å‚æ•°</h3><p><strong>åœ¨<code>JavaScript</code>ä¸­ä½ å¯ä»¥è°ƒç”¨ä»»æ„å‡½æ•°å¹¶ä¼ é€’ä»»æ„æ•°é‡çš„å‚æ•°</strong>â€”â€”è¯­è¨€ç»ä¸ä¼šâ€œæŠ±æ€¨â€ï¼ˆå‚æ•°æ£€æµ‹ï¼‰ã€‚éƒ½å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œç„¶è€Œï¼Œä½¿æ‰€æœ‰å‚æ•°å¯è®¿é—®éœ€è¦é€šè¿‡ç‰¹æ®Šå˜é‡<code>arguments</code>ã€‚<code>arguments</code>çœ‹èµ·æ¥åƒæ•°ç»„ï¼Œä½†å®ƒæ²¡æœ‰æ•°ç»„çš„æ–¹æ³•ï¼ˆç§°ä¸ºç±»æ•°ç»„ array-likeï¼‰ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> arguments <span class="token punctuation">&#125;</span><span class="token keyword">var</span> args <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>args<span class="token punctuation">.</span>length <span class="token comment">//3</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token comment">// è·å–ç´¢å¼•ä¸º0çš„å…ƒç´ ,'a'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å¤ªå¤šæˆ–å¤ªå°‘å‚æ•°"><a href="#å¤ªå¤šæˆ–å¤ªå°‘å‚æ•°" class="headerlink" title="å¤ªå¤šæˆ–å¤ªå°‘å‚æ•°"></a>å¤ªå¤šæˆ–å¤ªå°‘å‚æ•°</h3><p>è®©æˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„å‡½æ•°æ¢ç´¢<code>JavaScript</code>ä¸­ä¼ é€’å¤ªå¤šæˆ–å¤ªå°‘å‚æ•°æ—¶å¦‚ä½•å¤„ç†</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å¤šå‡ºçš„å‚æ•°å°†è¢«å¿½ç•¥ï¼ˆå¯ä»¥é€šè¿‡<code>arguments</code>è®¿é—®ï¼‰ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">f</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">)</span>    <span class="token comment">//a b</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç¼ºå°‘çš„å‚æ•°å°†ä¼šæ˜¯<code>undefined</code>ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">f</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>    <span class="token comment">//a undefined</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//undefined undefined</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="å¯é€‰å‚æ•°"><a href="#å¯é€‰å‚æ•°" class="headerlink" title="å¯é€‰å‚æ•°"></a>å¯é€‰å‚æ•°</h3><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¸¸è§æ¨¡å¼ï¼Œç»™å‚æ•°è®¾ç½®é»˜è®¤å€¼ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">pair</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    x <span class="token operator">=</span> x <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment">// (*)</span>    y <span class="token operator">=</span> y <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">[</span> x<span class="token punctuation">,</span> y <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨<code>ï¼ˆ*ï¼‰</code>è¿™è¡Œï¼Œå¦‚æœxæ˜¯çœŸå€¼ï¼ˆé™¤äº†ï¼š<code>null</code>ï¼Œ<code>undefined</code> ç­‰ï¼‰ï¼Œ         æ“ä½œç¬¦è¿”å›xã€‚å¦åˆ™ï¼Œå®ƒè¿”å›ç¬¬äºŒä¸ªæ“ä½œæ•°ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">pair</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//[ 0, 0 ]</span><span class="token function">pair</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">//[ 3, 0 ]</span><span class="token function">pair</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>  <span class="token comment">//[ 3, 5 ]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="å¼ºåˆ¶æ•°é‡"><a href="#å¼ºåˆ¶æ•°é‡" class="headerlink" title="å¼ºåˆ¶æ•°é‡"></a>å¼ºåˆ¶æ•°é‡</h3><p>å¦‚æœä½ æƒ³å¼ºåˆ¶å‚æ•°çš„æ•°é‡ï¼Œä½ å¯ä»¥æ£€æµ‹<code>arguments.length</code>ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">pair</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Need exactly 2 arguments'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token operator">...</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å°†arguments-è½¬æ¢ä¸ºæ•°ç»„"><a href="#å°†arguments-è½¬æ¢ä¸ºæ•°ç»„" class="headerlink" title="å°†arguments è½¬æ¢ä¸ºæ•°ç»„"></a>å°†arguments è½¬æ¢ä¸ºæ•°ç»„</h3><p><code>arguments</code>ä¸æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒä»…ä»…æ˜¯ç±»æ•°ç»„ï¼ˆarray-likeï¼‰ï¼šå®ƒæœ‰ä¸€ä¸ª<code>length</code>å±æ€§ï¼Œå¹¶ä¸”ä½ å¯ä»¥é€šè¿‡æ–¹æ‹¬å·ç´¢å¼•æ–¹å¼è®¿é—®å®ƒçš„å…ƒç´ ã€‚ç„¶è€Œï¼Œä½ ä¸èƒ½ç§»é™¤å…ƒç´ ï¼Œæˆ–åœ¨å®ƒä¸Šé¢è°ƒç”¨ä»»ä½•æ•°ç»„æ–¹æ³•ã€‚å› æ­¤ï¼Œæœ‰æ—¶ä½ éœ€è¦å°†å…¶è½¬æ¢ä¸ºæ•°ç»„ã€‚è¿™å°±æ˜¯ä¸‹é¢å‡½æ•°çš„ä½œç”¨ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">toArray</span><span class="token punctuation">(</span><span class="token parameter">arrayLikeObject</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arrayLikeObject<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="åã€å¼‚å¸¸å¤„ç†"><a href="#åã€å¼‚å¸¸å¤„ç†" class="headerlink" title="åã€å¼‚å¸¸å¤„ç†"></a>åã€å¼‚å¸¸å¤„ç†</h2><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/try...catch">å¼‚å¸¸å¤„ç†</a>æœ€å¸¸è§çš„æ–¹å¼åƒä¸‹é¢è¿™æ ·ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">throwException</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Problem!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">try</span> <span class="token punctuation">&#123;</span>    <span class="token function">throwException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// é”™è¯¯ï¼šä¿¡æ¯</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>stack<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// éæ ‡å‡†ï¼Œä½†å¤§éƒ¨åˆ†æµè§ˆå™¨æ”¯æŒ</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>tryåˆ†æ”¯åŒ…è£¹æ˜“å‡ºé”™çš„ä»£ç ï¼Œå¦‚æœtryåˆ†æ”¯å†…éƒ¨æŠ›å‡ºå¼‚å¸¸ï¼Œcatchåˆ†æ”¯å°†ä¼šæ‰§è¡Œã€‚</p><h2 id="åä¸€ã€ä¸¥æ ¼æ¨¡å¼"><a href="#åä¸€ã€ä¸¥æ ¼æ¨¡å¼" class="headerlink" title="åä¸€ã€ä¸¥æ ¼æ¨¡å¼"></a>åä¸€ã€ä¸¥æ ¼æ¨¡å¼</h2><p>ä¸¥æ ¼æ¨¡å¼å¼€å¯æ£€æµ‹å’Œä¸€äº›å…¶ä»–æªæ–½ï¼Œä½¿<code>JavaScript</code>å˜æˆæ›´æ•´æ´çš„è¯­è¨€ã€‚æ¨èä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ã€‚ä¸ºäº†å¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼Œåªéœ€åœ¨<code>JavaScript</code>æ–‡ä»¶æˆ–<code>script</code>æ ‡ç­¾ç¬¬ä¸€è¡Œæ·»åŠ å¦‚ä¸‹è¯­å¥ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token string">'use strict'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä½ ä¹Ÿå¯ä»¥åœ¨æ¯ä¸ªå‡½æ•°ä¸Šé€‰æ‹©æ€§å¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼Œåªéœ€å°†ä¸Šé¢çš„ä»£ç æ”¾åœ¨å‡½æ•°çš„å¼€å¤´ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">functionInStrictMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token string">'use strict'</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä¸‹é¢çš„ä¸¤å°èŠ‚çœ‹ä¸‹ä¸¥æ ¼æ¨¡å¼çš„ä¸‰å¤§å¥½å¤„ã€‚</p><h3 id="æ˜ç¡®é”™è¯¯"><a href="#æ˜ç¡®é”™è¯¯" class="headerlink" title="æ˜ç¡®é”™è¯¯"></a>æ˜ç¡®é”™è¯¯</h3><p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼Œä¸¥æ ¼æ¨¡å¼ç»™æˆ‘ä»¬æ˜ç¡®çš„é”™è¯¯ï¼Œå¦åˆ™<code>JavaScript</code>æ€»æ˜¯é™é»˜å¤±è´¥ï¼šä¸‹é¢çš„å‡½æ•°<code>f()</code> æ‰§è¡Œä¸€äº›éæ³•æ“ä½œï¼Œå®ƒè¯•å›¾æ›´æ”¹æ‰€æœ‰å­—ç¬¦ä¸²éƒ½æœ‰çš„åªè¯»å±æ€§â€”â€”<code>length</code>ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token string">'abc'</span><span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å½“ä½ è°ƒç”¨ä¸Šé¢çš„å‡½æ•°ï¼Œå®ƒé™é»˜å¤±è´¥ï¼Œèµ‹å€¼æ“ä½œè¢«ç®€å•å¿½ç•¥ã€‚è®©æˆ‘ä»¬å°†<code>f()</code>åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹è¿è¡Œï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">f_strict</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token string">'use strict'</span><span class="token punctuation">;</span>    <span class="token string">'abc'</span><span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç°åœ¨æµè§ˆå™¨æŠ¥ç»™æˆ‘ä»¬ä¸€äº›é”™è¯¯ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">f_strict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// TypeError: Cannot assign to read only property 'length' of abc</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="ä¸æ˜¯æ–¹æ³•çš„å‡½æ•°ä¸­çš„this"><a href="#ä¸æ˜¯æ–¹æ³•çš„å‡½æ•°ä¸­çš„this" class="headerlink" title="ä¸æ˜¯æ–¹æ³•çš„å‡½æ•°ä¸­çš„this"></a>ä¸æ˜¯æ–¹æ³•çš„å‡½æ•°ä¸­çš„this</h3><p>åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¸ä½œä¸ºæ–¹æ³•çš„å‡½æ•°ä¸­çš„<code>this</code>å€¼æ˜¯<code>undefined</code>ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">f_strict</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token string">'use strict'</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">f_strict</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œ<code>this</code>çš„å€¼æ˜¯è¢«ç§°ä½œå…¨å±€å¯¹è±¡ï¼ˆ<code>global object</code>ï¼‰ï¼ˆåœ¨æµè§ˆå™¨é‡Œæ˜¯<code>window</code>ï¼‰ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> window<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ä¸å†è‡ªåŠ¨åˆ›å»ºå…¨å±€å˜é‡"><a href="#ä¸å†è‡ªåŠ¨åˆ›å»ºå…¨å±€å˜é‡" class="headerlink" title="ä¸å†è‡ªåŠ¨åˆ›å»ºå…¨å±€å˜é‡"></a>ä¸å†è‡ªåŠ¨åˆ›å»ºå…¨å±€å˜é‡</h3><p>åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå¦‚æœä½ ç»™ä¸å­˜åœ¨çš„å˜é‡èµ‹å€¼ï¼Œ<code>JavaScript</code>ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªå…¨å±€å˜é‡ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> foo <span class="token operator">=</span> <span class="token number">5</span> <span class="token punctuation">&#125;</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// ä¸ä¼šæŠ¥é”™</span>foo <span class="token comment">// 5</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œè¿™ä¼šäº§ç”Ÿä¸€ä¸ªé”™è¯¯ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">f_strict</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token string">'use strict'</span><span class="token punctuation">;</span> foo2 <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token function">f_strict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// ReferenceError: foo2 is not defined</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="æ·±å…¥é˜…è¯»-2"><a href="#æ·±å…¥é˜…è¯»-2" class="headerlink" title="æ·±å…¥é˜…è¯»"></a>æ·±å…¥é˜…è¯»</h3><ul><li><a href="http://yanhaijing.com/javascript/2013/12/28/demystifying-this-in-javascript">æ­ç§˜javascriptä¸­è°œä¸€æ ·çš„this</a></li><li><a href="http://yanhaijing.com/javascript/2014/04/30/javascript-this-keyword">JavaScriptä¸­çš„thiså…³é”®å­—</a></li></ul><h2 id="åäºŒã€å˜é‡ä½œç”¨åŸŸå’Œé—­åŒ…"><a href="#åäºŒã€å˜é‡ä½œç”¨åŸŸå’Œé—­åŒ…" class="headerlink" title="åäºŒã€å˜é‡ä½œç”¨åŸŸå’Œé—­åŒ…"></a>åäºŒã€å˜é‡ä½œç”¨åŸŸå’Œé—­åŒ…</h2><p>åœ¨<code>JavaScript</code>ä¸­ï¼Œä½ å¿…é¡»ä½¿ç”¨å˜é‡ä¹‹å‰ï¼Œé€šè¿‡<code>var</code>å£°æ˜å˜é‡ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> x<span class="token punctuation">;</span>x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>y <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>  <span class="token comment">// ReferenceError: y is not defined</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä½ å¯ä»¥ç”¨ä¸€æ¡<code>var</code>è¯­å¥å£°æ˜å’Œåˆå§‹åŒ–å¤šä¸ªå˜é‡ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> z <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä½†æˆ‘å»ºè®®æ¯ä¸ªå˜é‡ä½¿ç”¨ä¸€æ¡è¯­å¥ã€‚å› æ­¤ï¼Œæˆ‘å°†ä¸Šé¢çš„è¯­å¥é‡å†™ä¸ºï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token keyword">var</span> z <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ç”±äºæå‡ï¼ˆè§ä¸‹æ–‡ï¼‰ï¼Œæœ€å¥½åœ¨å‡½æ•°é¡¶éƒ¨å£°æ˜å˜é‡ã€‚</p><h3 id="å˜é‡å’Œå‡½æ•°ä½œç”¨åŸŸ"><a href="#å˜é‡å’Œå‡½æ•°ä½œç”¨åŸŸ" class="headerlink" title="å˜é‡å’Œå‡½æ•°ä½œç”¨åŸŸ"></a>å˜é‡å’Œå‡½æ•°ä½œç”¨åŸŸ</h3><p>å˜é‡çš„ä½œç”¨åŸŸæ€»æ˜¯æ•´ä¸ªå‡½æ•°ï¼ˆæ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼‰ã€‚ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// (*)</span>        <span class="token keyword">var</span> tmp <span class="token operator">=</span> <span class="token operator">-</span>x<span class="token punctuation">;</span>        <span class="token operator">...</span>    <span class="token punctuation">&#125;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 3</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°tmpå˜é‡ä¸ä»…åœ¨ï¼ˆ*ï¼‰æ‰€åœ¨è¡Œçš„è¯­å¥å—å­˜åœ¨ï¼Œå®ƒåœ¨æ•´ä¸ªå‡½æ•°å†…éƒ½å­˜åœ¨ã€‚</p><h3 id="å˜é‡æå‡"><a href="#å˜é‡æå‡" class="headerlink" title="å˜é‡æå‡"></a>å˜é‡æå‡</h3><p>å˜é‡å£°æ˜ä¼šè¢«æå‡ï¼šå£°æ˜ä¼šè¢«ç§»åˆ°å‡½æ•°çš„é¡¶éƒ¨ï¼Œä½†èµ‹å€¼è¿‡ç¨‹ä¸ä¼šã€‚ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ä¸‹é¢çš„å‡½æ•°ä¸­<code>ï¼ˆ*ï¼‰</code>è¡Œä½ç½®å£°æ˜äº†ä¸€ä¸ªå˜é‡ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> tmp <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>  <span class="token comment">// (*)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨å†…éƒ¨ï¼Œä¸Šé¢çš„å‡½æ•°è¢«æ‰§è¡Œåƒä¸‹é¢è¿™æ ·ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> tmp<span class="token punctuation">;</span>  <span class="token comment">// declaration is hoisted</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        tmp <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>  <span class="token comment">// assignment stays put</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h3><p>æ¯ä¸ªå‡½æ•°ä¿æŒå’Œå‡½æ•°ä½“å†…éƒ¨å˜é‡çš„è¿æ¥ï¼Œç”šè‡³ç¦»å¼€åˆ›å»ºå®ƒçš„ä½œç”¨åŸŸä¹‹åã€‚ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">createIncrementor</span><span class="token punctuation">(</span><span class="token parameter">start</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// (*)</span>        <span class="token keyword">return</span> start<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨<code>ï¼ˆ*ï¼‰</code>è¡Œå¼€å§‹çš„å‡½æ•°åœ¨å®ƒåˆ›å»ºæ—¶ä¿ç•™ä¸Šä¸‹æ–‡ï¼Œå¹¶åœ¨å†…éƒ¨ä¿å­˜ä¸€ä¸ª<code>start</code>æ´»åŠ¨å€¼ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> inc <span class="token operator">=</span> <span class="token function">createIncrementor</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">inc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">// 5</span><span class="token function">inc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 6</span><span class="token function">inc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">// 7</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>é—­åŒ…æ˜¯ä¸€ä¸ªå‡½æ•°åŠ ä¸Šå’Œå…¶ä½œç”¨åŸŸé“¾çš„é“¾æ¥ã€‚å› æ­¤ï¼Œ<code>createIncrementor()</code>è¿”å›çš„æ˜¯ä¸€ä¸ªé—­åŒ…ã€‚</p><h3 id="IIFEï¼šæ¨¡æ‹Ÿå—çº§ä½œç”¨åŸŸ"><a href="#IIFEï¼šæ¨¡æ‹Ÿå—çº§ä½œç”¨åŸŸ" class="headerlink" title="IIFEï¼šæ¨¡æ‹Ÿå—çº§ä½œç”¨åŸŸ"></a>IIFEï¼šæ¨¡æ‹Ÿå—çº§ä½œç”¨åŸŸ</h3><p>æœ‰æ—¶ä½ æƒ³æ¨¡æ‹Ÿä¸€ä¸ªå—ï¼Œä¾‹å¦‚ä½ æƒ³å°†å˜é‡ä»å…¨å±€ä½œç”¨åŸŸéš”ç¦»ã€‚å®Œæˆè¿™ä¸ªå·¥ä½œçš„æ¨¡å¼å«åš <code>IIFE</code>(ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼(<code>Immediately Invoked Function Expression</code>))ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// å—å¼€å§‹</span>    <span class="token keyword">var</span> tmp <span class="token operator">=</span> <span class="token operator">...</span><span class="token punctuation">;</span>  <span class="token comment">// éå…¨å±€å˜é‡</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å—ç»“æŸ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢ä½ ä¼šçœ‹åˆ°å‡½æ•°è¡¨è¾¾å¼è¢«ç«‹å³æ‰§è¡Œã€‚å¤–é¢çš„æ‹¬å·ç”¨æ¥é˜»æ­¢å®ƒè¢«è§£ææˆå‡½æ•°å£°æ˜ï¼›åªæœ‰å‡½æ•°è¡¨è¾¾å¼èƒ½è¢«ç«‹å³è°ƒç”¨ã€‚å‡½æ•°ä½“äº§ç”Ÿä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸå¹¶ä½¿<code>tmp</code>å˜ä¸ºå±€éƒ¨å˜é‡ã€‚</p><h3 id="é—­åŒ…å®ç°å˜é‡å…±äº«"><a href="#é—­åŒ…å®ç°å˜é‡å…±äº«" class="headerlink" title="é—­åŒ…å®ç°å˜é‡å…±äº«"></a>é—­åŒ…å®ç°å˜é‡å…±äº«</h3><p>ä¸‹é¢æ˜¯ä¸ªç»å…¸é—®é¢˜ï¼Œå¦‚æœä½ ä¸çŸ¥é“ï¼Œä¼šè®©ä½ è´¹å°½æ€é‡ã€‚å› æ­¤ï¼Œå…ˆæµè§ˆä¸‹ï¼Œå¯¹é—®é¢˜æœ‰ä¸ªå¤§æ¦‚çš„äº†è§£ã€‚</p><p>é—­åŒ…ä¿æŒå’Œå¤–éƒ¨å˜é‡çš„è¿æ¥ï¼Œæœ‰æ—¶å¯èƒ½å’Œä½ æƒ³åƒçš„è¡Œä¸ºä¸ä¸€è‡´ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> i <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// (*)</span><span class="token punctuation">&#125;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5 (ä¸æ˜¯ 1)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5 (ä¸æ˜¯ 3)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>(*)</code>è¡Œçš„è¿”å›å€¼æ€»æ˜¯å½“å‰çš„iå€¼ï¼Œè€Œä¸æ˜¯å½“å‡½æ•°è¢«åˆ›å»ºæ—¶çš„iå€¼ã€‚å½“å¾ªç¯ç»“æŸåï¼Œiçš„å€¼æ˜¯5ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆæ•°ç»„ä¸­çš„æ‰€æœ‰å‡½æ•°çš„è¿”å›å€¼æ€»æ˜¯ä¸€æ ·çš„ã€‚å¦‚æœä½ æƒ³æ•è·å½“å‰å˜é‡çš„å¿«ç…§ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>IIFE</code>ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> i2 <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å¤åˆ¶å½“å‰çš„i</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ·±å…¥é˜…è¯»</p><ul><li><a href="http://yanhaijing.com/javascript/2013/08/30/understanding-scope-and-context-in-javascript">è®¤è¯†javascriptä¸­çš„ä½œç”¨åŸŸå’Œä¸Šä¸‹æ–‡</a></li><li><a href="http://yanhaijing.com/javascript/2014/04/30/JavaScript-Scoping-and-Hoisting">JavaScriptçš„ä½œç”¨åŸŸå’Œæå‡æœºåˆ¶</a></li><li><a href="http://yanhaijing.com/javascript/2014/04/29/what-is-the-execution-context-in-javascript">äº†è§£JavaScriptçš„æ‰§è¡Œä¸Šä¸‹æ–‡</a></li></ul><h2 id="åä¸‰ã€å¯¹è±¡å’Œç»§æ‰¿"><a href="#åä¸‰ã€å¯¹è±¡å’Œç»§æ‰¿" class="headerlink" title="åä¸‰ã€å¯¹è±¡å’Œç»§æ‰¿"></a>åä¸‰ã€å¯¹è±¡å’Œç»§æ‰¿</h2><p>å’Œæ‰€æœ‰çš„å€¼ç±»å‹ä¸€æ ·ï¼Œå¯¹è±¡æœ‰å±æ€§ã€‚äº‹å®ä¸Šï¼Œä½ å¯ä»¥å°†å¯¹è±¡å½“ä½œä¸€ç»„å±æ€§çš„é›†åˆï¼Œæ¯ä¸ªå±æ€§éƒ½æ˜¯ä¸€å¯¹ï¼ˆé”®å’Œå€¼ï¼‰ã€‚é”®æ˜¯å­—ç¬¦ä¸²ï¼Œå€¼å¯ä»¥æ˜¯ä»»æ„<code>JavaScript</code>å€¼ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä»…ä»…è§è¿‡é”®æ˜¯æ ‡è¯†ç¬¦çš„å±æ€§ï¼Œå› ä¸ºç‚¹æ“ä½œç¬¦å¤„ç†çš„é”®å¿…é¡»ä¸ºæ ‡è¯†ç¬¦ã€‚åœ¨è¿™èŠ‚ï¼Œä½ è®²è§åˆ°å¦ä¸€ç§è®¿é—®å±æ€§çš„æ–¹æ³•ï¼Œèƒ½å°†ä»»æ„å­—ç¬¦ä¸²ä½œä¸ºé”®ã€‚</p><h3 id="å•ä¸ªå¯¹è±¡"><a href="#å•ä¸ªå¯¹è±¡" class="headerlink" title="å•ä¸ªå¯¹è±¡"></a>å•ä¸ªå¯¹è±¡</h3><p>åœ¨<code>JavaScript</code>ä¸­ï¼Œä½ å¯ä»¥ç›´æ¥åˆ›å»ºå¯¹è±¡ï¼Œé€šè¿‡å¯¹è±¡å­—é¢é‡ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> jane <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    name<span class="token operator">:</span> <span class="token string">'Jane'</span><span class="token punctuation">,</span>    <span class="token function-variable function">describe</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token string">'use strict'</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">'Person named '</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢çš„å¯¹è±¡æœ‰ä¸¤ä¸ªå±æ€§ï¼š<code>name</code>å’Œ<code>describe</code>ã€‚ä½ èƒ½è¯»ï¼ˆâ€œgetâ€ï¼‰å’Œ å†™ï¼ˆâ€œsetâ€ï¼‰å±æ€§ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">jane<span class="token punctuation">.</span>name  <span class="token comment">// getï¼Œ'Jane'</span>jane<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'John'</span><span class="token punctuation">;</span>  <span class="token comment">// set</span>jane<span class="token punctuation">.</span>newProperty <span class="token operator">=</span> <span class="token string">'abc'</span><span class="token punctuation">;</span>  <span class="token comment">// è‡ªåŠ¨åˆ›å»º</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å±æ€§æ˜¯å‡½æ•°å¦‚<code>describe</code>å¯ä»¥è¢«å½“ä½œæ–¹æ³•è°ƒç”¨ã€‚å½“è°ƒç”¨ä»–ä»¬æ—¶å¯ä»¥åœ¨å®ƒä»¬å†…éƒ¨é€šè¿‡thiså¼•ç”¨å¯¹è±¡ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">jane<span class="token punctuation">.</span><span class="token function">describe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// è°ƒç”¨æ–¹æ³•,'Person named John'</span>jane<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Jane'</span><span class="token punctuation">;</span>jane<span class="token punctuation">.</span><span class="token function">describe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'Person named Jane'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><code>in</code>æ“ä½œç¬¦ç”¨æ¥æ£€æµ‹ä¸€ä¸ªå±æ€§æ˜¯å¦å­˜åœ¨ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token string">'newProperty'</span> <span class="token keyword">in</span> jane   <span class="token comment">// true</span><span class="token string">'foo'</span> <span class="token keyword">in</span> jane   <span class="token comment">// false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è‹¥è¯»å–ä¸€ä¸ªä¸å­˜åœ¨çš„å±æ€§ï¼Œå°†ä¼šå¾—åˆ°<code>undefined</code>å€¼ã€‚å› æ­¤ä¸Šé¢çš„ä¸¤ä¸ªæ£€æŸ¥ä¹Ÿå¯ä»¥åƒä¸‹é¢è¿™æ ·ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">jane<span class="token punctuation">.</span>newProperty <span class="token operator">!==</span> <span class="token keyword">undefined</span>  <span class="token comment">// true</span>jane<span class="token punctuation">.</span>foo <span class="token operator">!==</span> <span class="token keyword">undefined</span>  <span class="token comment">// false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>delete</code>æ“ä½œç¬¦ç”¨æ¥åˆ é™¤ä¸€ä¸ªå±æ€§ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">delete</span> jane<span class="token punctuation">.</span>newProperty <span class="token comment">//true</span><span class="token string">'newProperty'</span> <span class="token keyword">in</span> jane   <span class="token comment">//false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="ä»»æ„é”®å±æ€§"><a href="#ä»»æ„é”®å±æ€§" class="headerlink" title="ä»»æ„é”®å±æ€§"></a>ä»»æ„é”®å±æ€§</h3><p>å±æ€§çš„é”®å¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ä¸²ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬çœ‹åˆ°çš„å¯¹è±¡å­—é¢é‡ä¸­çš„å’Œç‚¹æ“ä½œç¬¦åçš„å±æ€§å…³é”®å­—ã€‚æŒ‰è¿™ç§æ–¹æ³•ä½ åªèƒ½ä½¿ç”¨æ ‡è¯†ç¬¦ã€‚å¦‚æœä½ æƒ³ç”¨å…¶ä»–ä»»æ„å­—ç¬¦ä¸²ä½œä¸ºé”®åï¼Œä½ å¿…é¡»åœ¨å¯¹è±¡å­—é¢é‡é‡ŒåŠ ä¸Šå¼•å·ï¼Œå¹¶ä½¿ç”¨æ–¹æ‹¬å·è·å–å’Œè®¾ç½®å±æ€§ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token string">'not an identifier'</span><span class="token operator">:</span> <span class="token number">123</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>obj<span class="token punctuation">[</span><span class="token string">'not an identifier'</span><span class="token punctuation">]</span>    <span class="token comment">//123</span>obj<span class="token punctuation">[</span><span class="token string">'not an identifier'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">456</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ–¹æ‹¬å·å…è®¸ä½ åŠ¨æ€è®¡ç®—å±æ€§å…³é”®å­—ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token string">'name'</span><span class="token punctuation">;</span>jane<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 'Jane'</span>jane<span class="token punctuation">[</span><span class="token string">'na'</span><span class="token operator">+</span><span class="token string">'me'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 'Jane'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="å¼•ç”¨æ–¹æ³•"><a href="#å¼•ç”¨æ–¹æ³•" class="headerlink" title="å¼•ç”¨æ–¹æ³•"></a>å¼•ç”¨æ–¹æ³•</h3><p>å¦‚æœä½ å¼•ç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒå°†å¤±å»å’Œå¯¹è±¡çš„è¿æ¥ã€‚å°±å…¶æœ¬èº«è€Œè¨€ï¼Œå‡½æ•°ä¸æ˜¯æ–¹æ³•ï¼Œå…¶ä¸­çš„<code>this</code>å€¼ä¸º<code>undefined</code>ï¼ˆä¸¥æ ¼æ¨¡å¼ä¸‹ï¼‰ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> func <span class="token operator">=</span> jane<span class="token punctuation">.</span>describe<span class="token punctuation">;</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// TypeError: Cannot read property 'name' of undefined</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è§£å†³åŠæ³•æ˜¯ä½¿ç”¨å‡½æ•°å†…ç½®çš„<code>bind()</code>æ–¹æ³•ã€‚å®ƒåˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ï¼Œå…¶<code>this</code>å€¼å›ºå®šä¸ºç»™å®šçš„å€¼ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> func2 <span class="token operator">=</span> jane<span class="token punctuation">.</span><span class="token function">describe</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>jane<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">func2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'Person named Jane'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="æ–¹æ³•å†…éƒ¨çš„å‡½æ•°"><a href="#æ–¹æ³•å†…éƒ¨çš„å‡½æ•°" class="headerlink" title="æ–¹æ³•å†…éƒ¨çš„å‡½æ•°"></a>æ–¹æ³•å†…éƒ¨çš„å‡½æ•°</h3><p>æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªç‰¹æ®Šå˜é‡<code>this</code>ã€‚å¦‚æœä½ åœ¨æ–¹æ³•å†…éƒ¨åµŒå…¥å‡½æ•°æ˜¯å¾ˆä¸æ–¹ä¾¿çš„ï¼Œå› ä¸ºä½ ä¸èƒ½ä»å‡½æ•°ä¸­è®¿é—®æ–¹æ³•çš„<code>this</code>ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬è°ƒç”¨<code>forEach</code>å¾ªç¯ä¸€ä¸ªæ•°ç»„ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> jane <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    name<span class="token operator">:</span> <span class="token string">'Jane'</span><span class="token punctuation">,</span>    friends<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">'Tarzan'</span><span class="token punctuation">,</span> <span class="token string">'Cheeta'</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token function-variable function">logHiToFriends</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token string">'use strict'</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">friend</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// è¿™é‡Œçš„â€œthisâ€æ˜¯undefined</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' says hi to '</span> <span class="token operator">+</span> friend<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è°ƒç”¨<code>logHiToFriends</code>ä¼šäº§ç”Ÿé”™è¯¯ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">jane<span class="token punctuation">.</span><span class="token function">logHiToFriends</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">// TypeError: Cannot read property 'name' of undefined</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æœ‰ä¸¤ç§æ–¹æ³•ä¿®å¤è¿™é—®é¢˜ã€‚</p><ul><li>å°†<code>this</code>å­˜å‚¨åœ¨ä¸åŒçš„å˜é‡ã€‚</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function-variable function">logHiToFriends</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token string">'use strict'</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">friend</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>that<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' says hi to '</span> <span class="token operator">+</span> friend<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>forEachçš„ç¬¬äºŒä¸ªå‚æ•°å…è®¸æä¾›<code>this</code>å€¼ã€‚</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function-variable function">logHiToFriends</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token string">'use strict'</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">friend</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' says hi to '</span> <span class="token operator">+</span> friend<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨<code>JavaScript</code>ä¸­å‡½æ•°è¡¨è¾¾å¼ç»å¸¸è¢«ç”¨ä½œå‡½æ•°å‚æ•°ã€‚æ—¶åˆ»å°å¿ƒå‡½æ•°è¡¨è¾¾å¼ä¸­çš„<code>this</code>ã€‚</p><h3 id="æ„é€ å‡½æ•°ï¼šå¯¹è±¡å·¥å‚"><a href="#æ„é€ å‡½æ•°ï¼šå¯¹è±¡å·¥å‚" class="headerlink" title="æ„é€ å‡½æ•°ï¼šå¯¹è±¡å·¥å‚"></a>æ„é€ å‡½æ•°ï¼šå¯¹è±¡å·¥å‚</h3><p>é™¤äº†ä½œä¸ºâ€œçœŸæ­£â€çš„å‡½æ•°å’Œæ–¹æ³•ï¼Œå‡½æ•°è¿˜åœ¨JavaScriptä¸­æ‰®æ¼”ç¬¬ä¸‰ç§è§’è‰²ï¼š<strong>å¦‚æœé€šè¿‡newæ“ä½œç¬¦è°ƒç”¨ï¼Œä»–ä»¬ä¼šå˜ä¸ºæ„é€ å‡½æ•°ï¼Œå¯¹è±¡çš„å·¥å‚</strong>ã€‚æ„é€ å‡½æ•°æ˜¯å¯¹å…¶ä»–è¯­è¨€ä¸­çš„ç±»çš„ç²—ç•¥æ¨¡æ‹Ÿã€‚çº¦å®šä¿—æˆï¼Œæ„é€ å‡½æ•°çš„ç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™ã€‚ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// è®¾ç½®å®ä¾‹æ•°æ®</span><span class="token keyword">function</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// æ–¹æ³•</span><span class="token class-name">Point</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">dist</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬çœ‹åˆ°æ„é€ å‡½æ•°åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šé¦–å…ˆï¼Œ<code>Point</code>å‡½æ•°è®¾ç½®å®ä¾‹æ•°æ®ã€‚å…¶æ¬¡ï¼Œ<code>Point.prototype</code>å±æ€§åŒ…å«å¯¹è±¡çš„æ–¹æ³•ã€‚å‰è€…çš„æ•°æ®æ˜¯æ¯ä¸ªå®ä¾‹ç§æœ‰çš„ï¼Œåé¢çš„æ•°æ®æ˜¯æ‰€æœ‰å®ä¾‹å…±äº«çš„ã€‚</p><p>æˆ‘ä»¬é€šè¿‡newæ“ä½œç¬¦è°ƒç”¨<code>Point</code>ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>p<span class="token punctuation">.</span>x <span class="token comment">//3</span>p<span class="token punctuation">.</span><span class="token function">dist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//5.830951894845301</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>pæ˜¯<code>Point</code>çš„ä¸€ä¸ªå®ä¾‹ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">p <span class="token keyword">instanceof</span> <span class="token class-name">Point</span>  <span class="token comment">//true</span><span class="token keyword">typeof</span> p    <span class="token comment">//'object'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="æ·±å…¥é˜…è¯»-3"><a href="#æ·±å…¥é˜…è¯»-3" class="headerlink" title="æ·±å…¥é˜…è¯»"></a>æ·±å…¥é˜…è¯»</h3><ul><li><a href="http://yanhaijing.com/javascript/2013/08/23/javascript-inheritance-how-to-shoot-yourself-in-the-foot-with-prototypes">Javascriptç»§æ‰¿ åŸå‹çš„é™·é˜±</a></li><li><a href="http://yanhaijing.com/javascript/2013/08/30/encapsulation-of-javascript">Javascript å°è£…é—®é¢˜</a></li></ul><h2 id="åå››ã€æ•°ç»„"><a href="#åå››ã€æ•°ç»„" class="headerlink" title="åå››ã€æ•°ç»„"></a>åå››ã€æ•°ç»„</h2><p>æ•°ç»„æ˜¯æ•°ç»„å…ƒç´ çš„åºåˆ—ï¼Œèƒ½é€šè¿‡æ•´æ•°ç´¢å¼•æ–¹æ³•æ•°ç»„å…ƒç´ ï¼Œæ•°ç»„ç´¢å¼•ä»0å¼€å§‹ã€‚</p><h3 id="æ•°ç»„å­—é¢é‡"><a href="#æ•°ç»„å­—é¢é‡" class="headerlink" title="æ•°ç»„å­—é¢é‡"></a>æ•°ç»„å­—é¢é‡</h3><p>æ•°ç»„å­—é¢é‡åˆ›å»ºæ•°ç»„å¾ˆæ–¹ä¾¿ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">></span> <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¸Šé¢çš„æ•°ç»„æœ‰ä¸‰ä¸ªå…ƒç´ ï¼šåˆ†åˆ«æ˜¯å­—ç¬¦ä¸²â€œaâ€ï¼Œâ€œbâ€ï¼Œ â€œcâ€ã€‚ä½ å¯ä»¥é€šè¿‡æ•´æ•°ç´¢å¼•è®¿é—®å®ƒä»¬ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token comment">//'a'</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'x'</span><span class="token punctuation">;</span>arr<span class="token comment">// [ 'x', 'b', 'c' ]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><code>length</code>å±æ€§æ€»è¡¨ç¤ºä¸€ä¸ªæ•°ç»„æœ‰å¤šå°‘é¡¹å…ƒç´ ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">arr<span class="token punctuation">.</span>length    <span class="token comment">//3</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>é™¤æ­¤ä¹‹å¤–å®ƒä¹Ÿå¯ä»¥ç”¨æ¥ä»æ•°ç»„ä¸Šç§»é™¤å°¾éƒ¨å…ƒç´ ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">arr<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> arr <span class="token comment">// [ 'x', 'b' ]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>in</code>æ“ä½œç¬¦ä¹Ÿå¯ä»¥åœ¨æ•°ç»„ä¸Šå·¥ä½œã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token number">1</span> <span class="token keyword">in</span> arr <span class="token comment">// arråœ¨ç´¢å¼•ä¸º1å¤„æ˜¯å¦æœ‰å…ƒç´ ï¼Ÿ,true</span><span class="token number">5</span> <span class="token keyword">in</span> arr <span class="token comment">// arråœ¨ç´¢å¼•ä¸º5å¤„æ˜¯å¦æœ‰å…ƒç´ ï¼Ÿfalse</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å€¼å¾—æ³¨æ„çš„æ˜¯æ•°ç»„æ˜¯å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥æœ‰å¯¹è±¡å±æ€§ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">arr<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>arr<span class="token punctuation">.</span>foo   <span class="token comment">// 123</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="æ•°ç»„æ–¹æ³•"><a href="#æ•°ç»„æ–¹æ³•" class="headerlink" title="æ•°ç»„æ–¹æ³•"></a>æ•°ç»„æ–¹æ³•</h3><p>æ•°ç»„æœ‰è®¸å¤šæ–¹æ³•ã€‚ä¸¾äº›ä¾‹å­ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment">// å¤åˆ¶å…ƒç´ ï¼Œ[ 'b' ]</span>arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token comment">// [ 'b', 'c' ]</span>arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">)</span>  <span class="token comment">// åœ¨æœ«å°¾æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œ4</span>arr <span class="token comment">// [ 'a', 'b', 'c', 'x' ]</span>arr<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// ç§»é™¤æœ€åä¸€ä¸ªå…ƒç´ ï¼Œ'x'</span>arr   <span class="token comment">// [ 'a', 'b', 'c' ]</span>arr<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// ç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œ'a'</span>arr <span class="token comment">// [ 'b', 'c' ]</span>arr<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">)</span>  <span class="token comment">// åœ¨å‰é¢æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œ3</span>arr <span class="token comment">// [ 'x', 'b', 'c' ]</span>arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span>  <span class="token comment">// æŸ¥æ‰¾ç»™å®šé¡¹åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•ï¼Œè‹¥ä¸å­˜åœ¨è¿”å›-1ï¼Œ</span><span class="token comment">// 1</span>arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">)</span>  <span class="token comment">// -1</span>arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span>  <span class="token comment">// å°†å…ƒç´ æ‹¼æ¥ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ'x-b-c'</span>arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>    <span class="token comment">// 'xbc'</span>arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 'x,b,c'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="éå†æ•°ç»„"><a href="#éå†æ•°ç»„" class="headerlink" title="éå†æ•°ç»„"></a>éå†æ•°ç»„</h3><p>æœ‰å‡ ç§æ–¹æ³•å¯ä»¥éå†æ•°ç»„å…ƒç´ ã€‚å…¶ä¸­ä¸¤ä¸ªæœ€é‡è¦çš„æ˜¯<code>forEach</code>å’Œ<code>map</code>ã€‚</p><p><code>forEach</code>éå†æ•´ä¸ªæ•°ç»„ï¼Œå¹¶å°†å½“å‰å…ƒç´ å’Œå®ƒçš„ç´¢å¼•ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">[</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span> <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// (*)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index <span class="token operator">+</span> <span class="token string">'. '</span> <span class="token operator">+</span> elem<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢ä»£ç çš„è¾“å‡º</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token number">0.</span> a<span class="token number">1.</span> b<span class="token number">2.</span> c<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„<code>ï¼ˆ*ï¼‰</code>è¡Œçš„å‡½æ•°å‚æ•°æ˜¯å¯çœç•¥çš„ã€‚ä¾‹å¦‚ï¼šå®ƒå¯ä»¥åªæœ‰ä¸€ä¸ªå‚æ•°<code>elem</code>ã€‚</p><p><code>map</code>åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œé€šè¿‡ç»™æ¯ä¸ªå­˜åœ¨æ•°ç»„å…ƒç´ åº”ç”¨ä¸€ä¸ªå‡½æ•°ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     <span class="token keyword">return</span> x<span class="token operator">*</span>x <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// [ 1, 4, 9 ]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ·±å…¥é˜…è¯»-4"><a href="#æ·±å…¥é˜…è¯»-4" class="headerlink" title="æ·±å…¥é˜…è¯»"></a>æ·±å…¥é˜…è¯»</h3><ul><li><a href="http://yanhaijing.com/javascript/2014/01/17/fun-with-javascript-native-array-functions">æœ‰è¶£çš„javascriptåŸç”Ÿæ•°ç»„å‡½æ•°</a></li></ul><h2 id="åäº”ã€æ­£åˆ™è¡¨è¾¾å¼"><a href="#åäº”ã€æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="åäº”ã€æ­£åˆ™è¡¨è¾¾å¼"></a>åäº”ã€æ­£åˆ™è¡¨è¾¾å¼</h2><p><code>JavaScript</code>å†…å»ºæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ã€‚ä»–ä»¬è¢«åŒæ–œçº¿åˆ†éš”ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^abc$</span><span class="token regex-delimiter">/</span></span><span class="token operator">/</span><span class="token punctuation">[</span><span class="token constant">A</span><span class="token operator">-</span>Za<span class="token operator">-</span>z0<span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token operator">/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="æ–¹æ³•-test-ï¼šæµ‹è¯•æ˜¯å¦åŒ¹é…"><a href="#æ–¹æ³•-test-ï¼šæµ‹è¯•æ˜¯å¦åŒ¹é…" class="headerlink" title="æ–¹æ³• test()ï¼šæµ‹è¯•æ˜¯å¦åŒ¹é…"></a>æ–¹æ³• test()ï¼šæµ‹è¯•æ˜¯å¦åŒ¹é…</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^a+b+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'aaab'</span><span class="token punctuation">)</span>   <span class="token comment">// true</span><span class="token operator">/</span><span class="token operator">^</span>a<span class="token operator">+</span>b<span class="token operator">+</span>$<span class="token operator">/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">)</span>    <span class="token comment">// false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="æ–¹æ³•-exec-ï¼šåŒ¹é…å’Œæ•è·ç»„"><a href="#æ–¹æ³•-exec-ï¼šåŒ¹é…å’Œæ•è·ç»„" class="headerlink" title="æ–¹æ³• exec()ï¼šåŒ¹é…å’Œæ•è·ç»„"></a>æ–¹æ³• exec()ï¼šåŒ¹é…å’Œæ•è·ç»„</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">a(b+)a</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'_abbba_aba_'</span><span class="token punctuation">)</span>    <span class="token comment">// [ 'abbba', 'bbb' ]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿”å›çš„æ•°ç»„ç¬¬ä¸€é¡¹ï¼ˆç´¢å¼•ä¸º0ï¼‰æ˜¯å®Œæ•´åŒ¹é…ï¼Œæ•è·çš„ç¬¬ä¸€ä¸ªåˆ†ç»„åœ¨ç¬¬äºŒé¡¹ï¼ˆç´¢å¼•ä¸º1ï¼‰ï¼Œç­‰ã€‚æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥åå¤è°ƒç”¨è·å–æ‰€æœ‰åŒ¹é…ã€‚</p><h3 id="æ–¹æ³•-replace-ï¼šæœç´¢å¹¶æ›¿æ¢"><a href="#æ–¹æ³•-replace-ï¼šæœç´¢å¹¶æ›¿æ¢" class="headerlink" title="æ–¹æ³• replace()ï¼šæœç´¢å¹¶æ›¿æ¢"></a>æ–¹æ³• replace()ï¼šæœç´¢å¹¶æ›¿æ¢</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token string">'&lt;a> &lt;bbb>'</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;(.*?)></span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'[$1]'</span><span class="token punctuation">)</span> <span class="token comment">// '[a] [bbb]'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>replace</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¹¶ä¸”å¼€å¯å…¨å±€æœç´¢ï¼ˆ<code>/g</code>æ ‡è®°ï¼‰ï¼Œå¦åˆ™ä»…ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ä¼šè¢«æ›¿æ¢ã€‚æœ‰ä¸€ç§æ–¹æ³•ä½¿ç”¨ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—æ›¿æ¢é¡¹ã€‚</p><h2 id="åå…­ã€æ•°å­¦"><a href="#åå…­ã€æ•°å­¦" class="headerlink" title="åå…­ã€æ•°å­¦"></a>åå…­ã€æ•°å­¦</h2><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math">Math</a>æ˜¯ä¸€ä¸ªæœ‰ç®—æ•°åŠŸèƒ½çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 3^2 = 9</span>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment">//5</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">1.9</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span>  <span class="token comment">// é¢„å®šä¹‰å¸¸é‡Ï€ï¼Œ-1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åä¸ƒã€æ ‡å‡†åº“çš„å…¶ä»–åŠŸèƒ½"><a href="#åä¸ƒã€æ ‡å‡†åº“çš„å…¶ä»–åŠŸèƒ½" class="headerlink" title="åä¸ƒã€æ ‡å‡†åº“çš„å…¶ä»–åŠŸèƒ½"></a>åä¸ƒã€æ ‡å‡†åº“çš„å…¶ä»–åŠŸèƒ½</h2><p><code>JavaScript</code>æ ‡å‡†åº“ç›¸å¯¹ç®€å•ï¼Œä½†æœ‰å¾ˆå¤šå…¶ä»–ä¸œè¥¿ä½ å¯ä»¥ä½¿ç”¨ï¼š</p><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date">Date</a>ï¼šæ—¥æœŸæ„é€ å‡½æ•°ï¼Œä¸»è¦åŠŸèƒ½æœ‰è½¬æ¢å’Œåˆ›å»ºæ—¥æœŸå­—ç¬¦ä¸²ï¼Œè®¿é—®æ—¥æœŸç»„æˆéƒ¨åˆ†ï¼ˆå¹´ï¼Œå°æ—¶ç­‰ï¼‰ã€‚<br><a href="http://www.2ality.com/2011/08/json-api.html">JSON</a>ï¼šä¸€ä¸ªå¯¹è±¡ï¼ŒåŠŸèƒ½æ˜¯è½¬æ¢å’Œç”Ÿæˆ<code>JSON</code>æ•°æ®ã€‚<br><a href="https://developer.mozilla.org/en-US/docs/Web/API/console">console.*</a>æ–¹æ³•ï¼šæµè§ˆå™¨çš„å…·ä½“æ–¹æ³•ï¼Œä¸æ˜¯è¯­è¨€æˆåˆ†çš„éƒ¨åˆ†ï¼Œä½†ä»–ä»¬ä¹Ÿå¯ä»¥åœ¨<a href="https://nodejs.org/">Node.js</a>ä¸­å·¥ä½œã€‚</p><h2 id="åå…«ã€ä¸‹ä¸€æ­¥å­¦ä»€ä¹ˆï¼Ÿ"><a href="#åå…«ã€ä¸‹ä¸€æ­¥å­¦ä»€ä¹ˆï¼Ÿ" class="headerlink" title="åå…«ã€ä¸‹ä¸€æ­¥å­¦ä»€ä¹ˆï¼Ÿ"></a>åå…«ã€ä¸‹ä¸€æ­¥å­¦ä»€ä¹ˆï¼Ÿ</h2><p>åœ¨ä½ å­¦ä¼šäº†è¿™ç¯‡æ–‡ç« çš„åŸºç¡€æ•™ç¨‹åï¼Œä½ å¯ä»¥è½¬åˆ°å¤§éƒ¨åˆ†ç« èŠ‚æœ«å°¾æåˆ°çš„é«˜çº§æ•™ç¨‹ã€‚æ­¤å¤–ï¼Œæˆ‘å»ºè®®ä½ çœ‹ä¸‹é¢çš„èµ„æºï¼š</p><ul><li>Style guides: I have written <a href="http://www.2ality.com/2013/07/meta-style-guide.html">a guide to style guides</a></li><li><a href="http://underscorejs.org/">Underscore.js</a>: ä¸€ä¸ªå¼¥è¡¥JavaScriptæ ‡å‡†åº“ç¼ºå°‘çš„åŠŸèƒ½çš„åº“</li><li><a href="http://jsbooks.revolunet.com/">JSbooks â€“ free JavaScript books</a></li><li><a href="http://uptodate.frontendrescue.org/">Frontend rescue: how to keep up to date on frontend technologies</a></li><li><a href="http://yanhaijing.com/">http://yanhaijing.com</a> å½“ç„¶è¿˜æœ‰æˆ‘çš„åšå®¢ä¹Ÿéå¸¸ä¸é”™å“¦</li><li><a href="http://yanhaijing.com/es5">http://yanhaijing.com/es5</a> å¦‚æœä½ æƒ³æˆä¸ºé«˜æ‰‹ï¼Œæˆ‘å»ºè®®é˜…è¯»<code>ecmascript</code>è§„èŒƒ</li><li><a href="http://yanhaijing.com/javascript/2013/12/11/24-JavaScript-best-practices-for-beginners">ç»™javascriptåˆå­¦è€…çš„24æ¡æœ€ä½³å®è·µ</a></li><li><a href="http://yanhaijing.com/javascript/2014/04/23/seven-javascript-quirks-i-wish-id-known-about">æˆ‘å¸Œæœ›æˆ‘çŸ¥é“çš„ä¸ƒä¸ªJavaScriptæŠ€å·§</a></li></ul><p>å‚è€ƒè‡ªåŸæ–‡ï¼š<a href="http://www.2ality.com/2013/06/basic-javascript.html">http://www.2ality.com/2013/06/basic-javascript.html</a><br>å‚è€ƒè‡ªè¯‘æ–‡ï¼š<a href="http://yanhaijing.com/basejs/">http://yanhaijing.com/basejs/</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
