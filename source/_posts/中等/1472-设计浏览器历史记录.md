---
title: 1472-è®¾è®¡æµè§ˆå™¨å†å²è®°å½•(Design Browser History)
date: 2021-12-03 22:07:52
categories:
  - ä¸­ç­‰
tags:
  - æ ˆ
  - è®¾è®¡
  - æ•°ç»„
  - é“¾è¡¨
  - æ•°æ®æµ
  - åŒå‘é“¾è¡¨
---

> åŸæ–‡é“¾æ¥: https://leetcode-cn.com/problems/design-browser-history


## è‹±æ–‡åŸæ–‡
<div><p>You have a <strong>browser</strong> of one tab where you start on the <code>homepage</code> and you can visit another <code>url</code>, get back in the history number of <code>steps</code> or move forward in the history number of <code>steps</code>.</p>

<p>Implement the <code>BrowserHistory</code> class:</p>

<ul>
	<li><code>BrowserHistory(string homepage)</code> Initializes the object with the <code>homepage</code>&nbsp;of the browser.</li>
	<li><code>void visit(string url)</code>&nbsp;Visits&nbsp;<code>url</code> from the current page. It clears up all the forward history.</li>
	<li><code>string back(int steps)</code>&nbsp;Move <code>steps</code> back in history. If you can only return <code>x</code> steps in the history and <code>steps &gt; x</code>, you will&nbsp;return only <code>x</code> steps. Return the current <code>url</code>&nbsp;after moving back in history <strong>at most</strong> <code>steps</code>.</li>
	<li><code>string forward(int steps)</code>&nbsp;Move <code>steps</code> forward in history. If you can only forward <code>x</code> steps in the history and <code>steps &gt; x</code>, you will&nbsp;forward only&nbsp;<code>x</code> steps. Return the current <code>url</code>&nbsp;after forwarding in history <strong>at most</strong> <code>steps</code>.</li>
</ul>

<p>&nbsp;</p>
<p><strong>Example:</strong></p>

<pre>
<b>Input:</b>
[&quot;BrowserHistory&quot;,&quot;visit&quot;,&quot;visit&quot;,&quot;visit&quot;,&quot;back&quot;,&quot;back&quot;,&quot;forward&quot;,&quot;visit&quot;,&quot;forward&quot;,&quot;back&quot;,&quot;back&quot;]
[[&quot;leetcode.com&quot;],[&quot;google.com&quot;],[&quot;facebook.com&quot;],[&quot;youtube.com&quot;],[1],[1],[1],[&quot;linkedin.com&quot;],[2],[2],[7]]
<b>Output:</b>
[null,null,null,null,&quot;facebook.com&quot;,&quot;google.com&quot;,&quot;facebook.com&quot;,null,&quot;linkedin.com&quot;,&quot;google.com&quot;,&quot;leetcode.com&quot;]

<b>Explanation:</b>
BrowserHistory browserHistory = new BrowserHistory(&quot;leetcode.com&quot;);
browserHistory.visit(&quot;google.com&quot;);       // You are in &quot;leetcode.com&quot;. Visit &quot;google.com&quot;
browserHistory.visit(&quot;facebook.com&quot;);     // You are in &quot;google.com&quot;. Visit &quot;facebook.com&quot;
browserHistory.visit(&quot;youtube.com&quot;);      // You are in &quot;facebook.com&quot;. Visit &quot;youtube.com&quot;
browserHistory.back(1);                   // You are in &quot;youtube.com&quot;, move back to &quot;facebook.com&quot; return &quot;facebook.com&quot;
browserHistory.back(1);                   // You are in &quot;facebook.com&quot;, move back to &quot;google.com&quot; return &quot;google.com&quot;
browserHistory.forward(1);                // You are in &quot;google.com&quot;, move forward to &quot;facebook.com&quot; return &quot;facebook.com&quot;
browserHistory.visit(&quot;linkedin.com&quot;);     // You are in &quot;facebook.com&quot;. Visit &quot;linkedin.com&quot;
browserHistory.forward(2);                // You are in &quot;linkedin.com&quot;, you cannot move forward any steps.
browserHistory.back(2);                   // You are in &quot;linkedin.com&quot;, move back two steps to &quot;facebook.com&quot; then to &quot;google.com&quot;. return &quot;google.com&quot;
browserHistory.back(7);                   // You are in &quot;google.com&quot;, you can move back only one step to &quot;leetcode.com&quot;. return &quot;leetcode.com&quot;
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= homepage.length &lt;= 20</code></li>
	<li><code>1 &lt;= url.length &lt;= 20</code></li>
	<li><code>1 &lt;= steps &lt;= 100</code></li>
	<li><code>homepage</code> and <code>url</code> consist of&nbsp; &#39;.&#39; or lower case English letters.</li>
	<li>At most <code>5000</code>&nbsp;calls will be made to <code>visit</code>, <code>back</code>, and <code>forward</code>.</li>
</ul>
</div>

## ä¸­æ–‡é¢˜ç›®
<div><p>ä½ æœ‰ä¸€ä¸ªåªæ”¯æŒå•ä¸ªæ ‡ç­¾é¡µçš„ <strong>æµè§ˆå™¨</strong>&nbsp;ï¼Œæœ€å¼€å§‹ä½ æµè§ˆçš„ç½‘é¡µæ˜¯&nbsp;<code>homepage</code>&nbsp;ï¼Œä½ å¯ä»¥è®¿é—®å…¶ä»–çš„ç½‘ç«™&nbsp;<code>url</code>&nbsp;ï¼Œä¹Ÿå¯ä»¥åœ¨æµè§ˆå†å²ä¸­åé€€&nbsp;<code>steps</code>&nbsp;æ­¥æˆ–å‰è¿›&nbsp;<code>steps</code>&nbsp;æ­¥ã€‚</p>

<p>è¯·ä½ å®ç°&nbsp;<code>BrowserHistory</code> ç±»ï¼š</p>

<ul>
	<li><code>BrowserHistory(string homepage)</code>&nbsp;ï¼Œç”¨&nbsp;<code>homepage</code>&nbsp;åˆå§‹åŒ–æµè§ˆå™¨ç±»ã€‚</li>
	<li><code>void visit(string url)</code>&nbsp;ä»å½“å‰é¡µè·³è½¬è®¿é—® <code>url</code> å¯¹åº”çš„é¡µé¢&nbsp;&nbsp;ã€‚æ‰§è¡Œæ­¤æ“ä½œä¼šæŠŠæµè§ˆå†å²å‰è¿›çš„è®°å½•å…¨éƒ¨åˆ é™¤ã€‚</li>
	<li><code>string back(int steps)</code>&nbsp;åœ¨æµè§ˆå†å²ä¸­åé€€&nbsp;<code>steps</code>&nbsp;æ­¥ã€‚å¦‚æœä½ åªèƒ½åœ¨æµè§ˆå†å²ä¸­åé€€è‡³å¤š&nbsp;<code>x</code> æ­¥ä¸”&nbsp;<code>steps &gt; x</code>&nbsp;ï¼Œé‚£ä¹ˆä½ åªåé€€&nbsp;<code>x</code>&nbsp;æ­¥ã€‚è¯·è¿”å›åé€€ <strong>è‡³å¤š</strong> <code>steps</code>&nbsp;æ­¥ä»¥åçš„&nbsp;<code>url</code>&nbsp;ã€‚</li>
	<li><code>string forward(int steps)</code>&nbsp;åœ¨æµè§ˆå†å²ä¸­å‰è¿›&nbsp;<code>steps</code>&nbsp;æ­¥ã€‚å¦‚æœä½ åªèƒ½åœ¨æµè§ˆå†å²ä¸­å‰è¿›è‡³å¤š&nbsp;<code>x</code>&nbsp;æ­¥ä¸”&nbsp;<code>steps &gt; x</code>&nbsp;ï¼Œé‚£ä¹ˆä½ åªå‰è¿› <code>x</code>&nbsp;æ­¥ã€‚è¯·è¿”å›å‰è¿›&nbsp;<strong>è‡³å¤š</strong>&nbsp;<code>steps</code>æ­¥ä»¥åçš„ <code>url</code>&nbsp;ã€‚</li>
</ul>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ï¼š</strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>
[&quot;BrowserHistory&quot;,&quot;visit&quot;,&quot;visit&quot;,&quot;visit&quot;,&quot;back&quot;,&quot;back&quot;,&quot;forward&quot;,&quot;visit&quot;,&quot;forward&quot;,&quot;back&quot;,&quot;back&quot;]
[[&quot;leetcode.com&quot;],[&quot;google.com&quot;],[&quot;facebook.com&quot;],[&quot;youtube.com&quot;],[1],[1],[1],[&quot;linkedin.com&quot;],[2],[2],[7]]
<strong>è¾“å‡ºï¼š</strong>
[null,null,null,null,&quot;facebook.com&quot;,&quot;google.com&quot;,&quot;facebook.com&quot;,null,&quot;linkedin.com&quot;,&quot;google.com&quot;,&quot;leetcode.com&quot;]

<strong>è§£é‡Šï¼š</strong>
BrowserHistory browserHistory = new BrowserHistory(&quot;leetcode.com&quot;);
browserHistory.visit(&quot;google.com&quot;);       // ä½ åŸæœ¬åœ¨æµè§ˆ &quot;leetcode.com&quot; ã€‚è®¿é—® &quot;google.com&quot;
browserHistory.visit(&quot;facebook.com&quot;);     // ä½ åŸæœ¬åœ¨æµè§ˆ &quot;google.com&quot; ã€‚è®¿é—® &quot;facebook.com&quot;
browserHistory.visit(&quot;youtube.com&quot;);      // ä½ åŸæœ¬åœ¨æµè§ˆ &quot;facebook.com&quot; ã€‚è®¿é—® &quot;youtube.com&quot;
browserHistory.back(1);                   // ä½ åŸæœ¬åœ¨æµè§ˆ &quot;youtube.com&quot; ï¼Œåé€€åˆ° &quot;facebook.com&quot; å¹¶è¿”å› &quot;facebook.com&quot;
browserHistory.back(1);                   // ä½ åŸæœ¬åœ¨æµè§ˆ &quot;facebook.com&quot; ï¼Œåé€€åˆ° &quot;google.com&quot; å¹¶è¿”å› &quot;google.com&quot;
browserHistory.forward(1);                // ä½ åŸæœ¬åœ¨æµè§ˆ &quot;google.com&quot; ï¼Œå‰è¿›åˆ° &quot;facebook.com&quot; å¹¶è¿”å› &quot;facebook.com&quot;
browserHistory.visit(&quot;linkedin.com&quot;);     // ä½ åŸæœ¬åœ¨æµè§ˆ &quot;facebook.com&quot; ã€‚ è®¿é—® &quot;linkedin.com&quot;
browserHistory.forward(2);                // ä½ åŸæœ¬åœ¨æµè§ˆ &quot;linkedin.com&quot; ï¼Œä½ æ— æ³•å‰è¿›ä»»ä½•æ­¥æ•°ã€‚
browserHistory.back(2);                   // ä½ åŸæœ¬åœ¨æµè§ˆ &quot;linkedin.com&quot; ï¼Œåé€€ä¸¤æ­¥ä¾æ¬¡å…ˆåˆ° &quot;facebook.com&quot; ï¼Œç„¶ååˆ° &quot;google.com&quot; ï¼Œå¹¶è¿”å› &quot;google.com&quot;
browserHistory.back(7);                   // ä½ åŸæœ¬åœ¨æµè§ˆ &quot;google.com&quot;ï¼Œ ä½ åªèƒ½åé€€ä¸€æ­¥åˆ° &quot;leetcode.com&quot; ï¼Œå¹¶è¿”å› &quot;leetcode.com&quot;
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>1 &lt;= homepage.length &lt;= 20</code></li>
	<li><code>1 &lt;= url.length &lt;= 20</code></li>
	<li><code>1 &lt;= steps &lt;= 100</code></li>
	<li><code>homepage</code> å’Œ&nbsp;<code>url</code>&nbsp;éƒ½åªåŒ…å«&nbsp;&#39;.&#39; æˆ–è€…å°å†™è‹±æ–‡å­—æ¯ã€‚</li>
	<li>æœ€å¤šè°ƒç”¨&nbsp;<code>5000</code>&nbsp;æ¬¡&nbsp;<code>visit</code>ï¼Œ&nbsp;<code>back</code>&nbsp;å’Œ&nbsp;<code>forward</code>&nbsp;å‡½æ•°ã€‚</li>
</ul>
</div>

## é€šè¿‡ä»£ç 
<RecoDemo>
</RecoDemo>


## é«˜èµé¢˜è§£
* çŸ¥è¯†ç‚¹ï¼šæ ˆ
* æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œn ä¸ºæ“ä½œæ¬¡æ•°

ä½¿ç”¨ä¸€ä¸ªæ ˆè®°å½•æµè§ˆå†å²ï¼Œä½¿ç”¨ä¸€ä¸ª pos è®°å½•å½“å‰ç½‘é¡µåœ¨æ ˆä¸­çš„ä½ç½®ã€‚æ¯æ¬¡ back å’Œ forward æ“ä½œéƒ½åªæ›´æ–° pos ã€‚å› ä¸ºvisitæ“ä½œä¼šæŠŠæµè§ˆå†å²å‰è¿›çš„è®°å½•å…¨éƒ¨åˆ é™¤ï¼Œæ‰€ä»¥æ¯æ¬¡ visit å…ˆæ ¹æ® pos æ›´æ–°ä¸‹æ ˆé¡¶æŒ‡é’ˆï¼Œç„¶åå†å°† url å…¥æ ˆã€‚
å¯ä»¥å…ˆçœ‹å›¾åœ¨çœ‹ä»£ç ~
![](../images/design-browser-history-0.gif)
![](../images/design-browser-history-1.gif)
![visit.gif](../images/design-browser-history-2.gif)


```cpp
class BrowserHistory {
public:
    int pos;
    int top;
    string history[5001];
    BrowserHistory(string homepage) : pos(-1), top(0) {
        visit(homepage);
    }
    
    void visit(string url) {
        pos ++;
        top = pos;
        history[top++] = url;
    }
    
    string back(int steps) {
        if(steps > pos) {
            steps = pos;
        }
        pos -= steps;
        return history[pos];
    }
    
    string forward(int steps) {
        steps = min(steps, top - pos - 1);
        pos += steps;
        return history[pos];
    }
};
```
# å¦‚æœæ„Ÿè§‰æœ‰ç‚¹æ„æ€ï¼Œå¯ä»¥å…³æ³¨ğŸ‘[HelloNebula](../images/design-browser-history-3.jpg)ğŸ‘
* **åˆ†äº«å‘¨èµ›é¢˜è§£**
* **åˆ†äº«è®¡ç®—æœºä¸“ä¸šè¯¾çŸ¥è¯†**
* **åˆ†äº«C++ç›¸å…³å²—ä½é¢è¯•é¢˜**
* **åˆ†äº«ä¸“ä¸šä¹¦ç±PDF**

## ç»Ÿè®¡ä¿¡æ¯
| é€šè¿‡æ¬¡æ•° | æäº¤æ¬¡æ•° | ACæ¯”ç‡ |
| :------: | :------: | :------: |
|    9093    |    14677    |   62.0%   |

## æäº¤å†å²
| æäº¤æ—¶é—´ | æäº¤ç»“æœ | æ‰§è¡Œæ—¶é—´ |  å†…å­˜æ¶ˆè€—  | è¯­è¨€ |
| :------: | :------: | :------: | :--------: | :--------: |
