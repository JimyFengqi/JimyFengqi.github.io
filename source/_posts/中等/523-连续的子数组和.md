---
title: 523-è¿ç»­çš„å­æ•°ç»„å’Œ(Continuous Subarray Sum)
categories:
  - ä¸­ç­‰
tags:
  - æ•°ç»„
  - å“ˆå¸Œè¡¨
  - æ•°å­¦
  - å‰ç¼€å’Œ
abbrlink: 3911231942
date: 2021-12-03 22:43:29
---

> åŸæ–‡é“¾æ¥: https://leetcode-cn.com/problems/continuous-subarray-sum


## è‹±æ–‡åŸæ–‡
<div><p>Given an integer array <code>nums</code> and an integer <code>k</code>, return <code>true</code> <em>if </em><code>nums</code><em> has a continuous subarray of size <strong>at least two</strong> whose elements sum up to a multiple of</em> <code>k</code><em>, or </em><code>false</code><em> otherwise</em>.</p>

<p>An integer <code>x</code> is a multiple of <code>k</code> if there exists an integer <code>n</code> such that <code>x = n * k</code>. <code>0</code> is <strong>always</strong> a multiple of <code>k</code>.</p>

<p>&nbsp;</p>
<p><strong>Example 1:</strong></p>

<pre>
<strong>Input:</strong> nums = [23,<u>2,4</u>,6,7], k = 6
<strong>Output:</strong> true
<strong>Explanation:</strong> [2, 4] is a continuous subarray of size 2 whose elements sum up to 6.
</pre>

<p><strong>Example 2:</strong></p>

<pre>
<strong>Input:</strong> nums = [<u>23,2,6,4,7</u>], k = 6
<strong>Output:</strong> true
<strong>Explanation:</strong> [23, 2, 6, 4, 7] is an continuous subarray of size 5 whose elements sum up to 42.
42 is a multiple of 6 because 42 = 7 * 6 and 7 is an integer.
</pre>

<p><strong>Example 3:</strong></p>

<pre>
<strong>Input:</strong> nums = [23,2,6,4,7], k = 13
<strong>Output:</strong> false
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= nums.length &lt;= 10<sup>5</sup></code></li>
	<li><code>0 &lt;= nums[i] &lt;= 10<sup>9</sup></code></li>
	<li><code>0 &lt;= sum(nums[i]) &lt;= 2<sup>31</sup> - 1</code></li>
	<li><code>1 &lt;= k &lt;= 2<sup>31</sup> - 1</code></li>
</ul>
</div>

## ä¸­æ–‡é¢˜ç›®
<div><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> å’Œä¸€ä¸ªæ•´æ•°Â <code>k</code> ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­è¯¥æ•°ç»„æ˜¯å¦å«æœ‰åŒæ—¶æ»¡è¶³ä¸‹è¿°æ¡ä»¶çš„è¿ç»­å­æ•°ç»„ï¼š</p>

<ul>
	<li>å­æ•°ç»„å¤§å° <strong>è‡³å°‘ä¸º 2</strong> ï¼Œä¸”</li>
	<li>å­æ•°ç»„å…ƒç´ æ€»å’Œä¸º <code>k</code> çš„å€æ•°ã€‚</li>
</ul>

<p>å¦‚æœå­˜åœ¨ï¼Œè¿”å› <code>true</code> ï¼›å¦åˆ™ï¼Œè¿”å› <code>false</code> ã€‚</p>

<p>å¦‚æœå­˜åœ¨ä¸€ä¸ªæ•´æ•° <code>n</code> ï¼Œä»¤æ•´æ•° <code>x</code> ç¬¦åˆ <code>x = n * k</code> ï¼Œåˆ™ç§° <code>x</code> æ˜¯ <code>k</code> çš„ä¸€ä¸ªå€æ•°ã€‚<code>0</code> å§‹ç»ˆè§†ä¸º <code>k</code> çš„ä¸€ä¸ªå€æ•°ã€‚</p>

<p>Â </p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>nums = [23<u>,2,4</u>,6,7], k = 6
<strong>è¾“å‡ºï¼š</strong>true
<strong>è§£é‡Šï¼š</strong>[2,4] æ˜¯ä¸€ä¸ªå¤§å°ä¸º 2 çš„å­æ•°ç»„ï¼Œå¹¶ä¸”å’Œä¸º 6 ã€‚</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>nums = [<u>23,2,6,4,7</u>], k = 6
<strong>è¾“å‡ºï¼š</strong>true
<strong>è§£é‡Šï¼š</strong>[23, 2, 6, 4, 7] æ˜¯å¤§å°ä¸º 5 çš„å­æ•°ç»„ï¼Œå¹¶ä¸”å’Œä¸º 42 ã€‚ 
42 æ˜¯ 6 çš„å€æ•°ï¼Œå› ä¸º 42 = 7 * 6 ä¸” 7 æ˜¯ä¸€ä¸ªæ•´æ•°ã€‚
</pre>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>nums = [23,2,6,4,7], k = 13
<strong>è¾“å‡ºï¼š</strong>false
</pre>

<p>Â </p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>1 <= nums.length <= 10<sup>5</sup></code></li>
	<li><code>0 <= nums[i] <= 10<sup>9</sup></code></li>
	<li><code>0 <= sum(nums[i]) <= 2<sup>31</sup> - 1</code></li>
	<li><code>1 <= k <= 2<sup>31</sup> - 1</code></li>
</ul>
</div>

## é€šè¿‡ä»£ç 
<RecoDemo>
</RecoDemo>


## é«˜èµé¢˜è§£
## åŸºæœ¬åˆ†æ

è¿™æ˜¯ä¸€é“å¾ˆç»å…¸çš„å‰ç¼€å’Œé¢˜ç›®ï¼Œç±»ä¼¼çš„åŸé¢˜ä¹Ÿåœ¨è“æ¡¥æ¯å‡ºç°è¿‡ï¼Œåæ ‡åœ¨ [K å€åŒºé—´](http://lx.lanqiao.cn/problem.page?gpid=T444)ã€‚

æœ¬é¢˜ä¸é‚£é“é¢˜ä¸åŒåœ¨äºï¼š

* [K å€åŒºé—´] éœ€è¦æ±‚å¾—æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„åŒºé—´æ•°é‡ï¼›æœ¬é¢˜éœ€è¦åˆ¤æ–­æ˜¯å¦å­˜åœ¨ã€‚
* [K å€åŒºé—´] åºåˆ—å…¨æ˜¯æ­£æ•´æ•°ï¼Œä¸éœ€è¦è€ƒè™‘ $0$ å€¼é—®é¢˜ï¼›æœ¬é¢˜éœ€è¦è€ƒè™‘ $0$ å€¼é—®é¢˜ã€‚
* [K å€åŒºé—´] åºåˆ—å…è®¸å­æ•°ç»„é•¿åº¦ä¸º $1$ï¼›æœ¬é¢˜å›ºå®šå­æ•°ç»„é•¿åº¦è‡³å°‘ä¸º $2$ã€‚

æ•°æ®èŒƒå›´ä¸º $10^4$ï¼Œå› æ­¤æ— è®ºæ˜¯çº¯æœ´ç´ çš„åšæ³• ($O(n^3)$)è¿˜æ˜¯ç®€å•ä½¿ç”¨å‰ç¼€å’Œä¼˜åŒ–çš„åšæ³• ($O(n^2)$) éƒ½ä¸èƒ½æ»¡è¶³è¦æ±‚ã€‚

æˆ‘ä»¬éœ€è¦ä» $k$ çš„å€æ•°ä½œä¸ºåˆ‡å…¥ç‚¹æ¥åšã€‚

é¢„å¤„ç†å‰ç¼€å’Œæ•°ç»„ $sum$ï¼Œæ–¹ä¾¿å¿«é€Ÿæ±‚å¾—æŸä¸€æ®µåŒºé—´çš„å’Œã€‚ç„¶åå‡å®š $[i, j]$ æ˜¯æˆ‘ä»¬çš„ç›®æ ‡åŒºé—´ï¼Œé‚£ä¹ˆæœ‰ï¼š

$$
sum[j] - sum[i - 1] = n * k
$$

ç»è¿‡ç®€å•çš„å˜å½¢å¯å¾—ï¼š

$$
\frac{sum[j]}{k} - \frac{sum[i - 1]}{k} = n
$$

**è¦ä½¿å¾—ä¸¤è€…é™¤ $k$ ç›¸å‡ä¸ºæ•´æ•°ï¼Œéœ€è¦æ»¡è¶³ $sum[j]$ å’Œ $sum[i - 1]$ å¯¹ $k$ å–ä½™ç›¸åŒã€‚**

ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åªéœ€è¦æšä¸¾å³ç«¯ç‚¹ $j$ï¼Œç„¶ååœ¨æšä¸¾å³ç«¯ç‚¹ $j$ çš„æ—¶å€™æ£€æŸ¥ä¹‹å‰æ˜¯å¦å‡ºç°è¿‡å·¦ç«¯ç‚¹ $i$ï¼Œä½¿å¾— $sum[j]$ å’Œ $sum[i - 1]$ å¯¹ $k$ å–ä½™ç›¸åŒã€‚

---

## å‰ç¼€å’Œ + HashSet

å…·ä½“çš„ï¼Œä½¿ç”¨ `HashSet` æ¥ä¿å­˜å‡ºç°è¿‡çš„å€¼ã€‚

è®©å¾ªç¯ä» $2$ å¼€å§‹æšä¸¾å³ç«¯ç‚¹ï¼ˆæ ¹æ®é¢˜ç›®è¦æ±‚ï¼Œå­æ•°ç»„é•¿åº¦è‡³å°‘ä¸º $2$ï¼‰ï¼Œæ¯æ¬¡å°†ç¬¦åˆé•¿åº¦è¦æ±‚çš„ä½ç½®çš„å–ä½™ç»“æœå­˜å…¥ `HashSet`ã€‚

å¦‚æœæšä¸¾æŸä¸ªå³ç«¯ç‚¹ $j$ æ—¶å‘ç°å­˜åœ¨æŸä¸ªå·¦ç«¯ç‚¹ $i$ ç¬¦åˆè¦æ±‚ï¼Œåˆ™è¿”å› `True`ã€‚

ä»£ç ï¼š
```Java []
class Solution {
    public boolean checkSubarraySum(int[] nums, int k) {
        int n = nums.length;
        int[] sum = new int[n + 1];
        for (int i = 1; i <= n; i++) sum[i] = sum[i - 1] + nums[i - 1];
        Set<Integer> set = new HashSet<>();
        for (int i = 2; i <= n; i++) {
            set.add(sum[i - 2] % k);
            if (set.contains(sum[i] % k)) return true;
        }
        return false;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

---

## æ‹“å±•ï¼ˆæ±‚æ–¹æ¡ˆæ•°ï¼‰

è“æ¡¥æ¯å®˜ç½‘ç™»å½•ç»å¸¸æ€§ç½¢å·¥ï¼Œæˆ‘ç™»å½•åå‡ æ¬¡éƒ½æ²¡ç™»å½•ä¸Šå»ï¼Œè¿™é‡Œç›´æ¥æˆªå›¾äº† [K å€åŒºé—´] çš„é¢˜ç›®ç»™å¤§å®¶ã€‚

![image.png](../images/continuous-subarray-sum-0.png)

å†™äº†ä»£ç ï¼Œä½†å¾ˆå¯æƒœæ²¡ OJ å¯ä»¥æµ‹è¯• ğŸ¤£ 

æ¯”è¾ƒç®€å•ï¼Œåº”è¯¥æ²¡å•¥é—®é¢˜ï¼Œå¯ä»¥ç›´æ¥å‚è€ƒ ğŸ¤£


ä»£ç ï¼š
```Java []
import java.util.*;
class Main {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int n = sc.nextInt(), k = sc.nextInt();
        long[] s  = new long[n + 1];
        for (int i = 1; i <= n; i++) s[i] = s[i - 1] + sc.nextLong();
        long ans = 0;
        Map<Long, Integer> map = new HashMap<>();
        map.put(0L, 1);
        for (int i = 1 ; i <= n; i++) {
            long u = s[i] % k;
            if (map.containsKey(u)) ans += map.get(u);
            map.put(u, map.getOrDefault(u, 0) + 1);
        }
        System.out.println(ans);
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

---

## ç­”ç–‘

çœ‹äº†è¯„è®ºåŒºï¼Œè¿˜æ˜¯æœ‰ä¸å°‘åŒå­¦å¯¹ã€ŒåŒä½™æ€§è´¨ã€æœ‰ç–‘é—®ï¼Œè¿™é‡Œé›†ä¸­ç­”ç–‘ä¸€ä¸‹ã€‚

å…¶å®è¯„è®ºåŒºçš„ [@Meteordream](/u/meteordream/) å°å§å§ä¹Ÿå·²ç»ç»™å‡ºäº†å¾ˆæ£’çš„è§£ç­”äº†ã€‚

* ä¸ºä»€ä¹ˆæƒ³è¦ $b - a$ ä¸º $k$ çš„å€æ•°ï¼Œåªéœ€è¦ç¡®ä¿ $b$ å’Œ $a$ æ¨¡ $k$ ç›¸åŒå³å¯ï¼Ÿ

æˆ‘ä»¬ä»¤ $b = x * k + r1$ï¼Œ$a = y * k + r2$ï¼Œé‚£ä¹ˆ $r1$ å’Œ $r2$ åˆ†åˆ«ä¸º $b$ å’Œ $a$ æ¨¡ $k$ çš„å€¼ã€‚

å³æœ‰ï¼š $b - a = (x * k + r1) - (y * k + r2) =(x - y) * k + (r1 - r2)$ã€‚

ç”± $b - a$ ä¸º $k$ çš„å€æ•°ï¼Œå¯ä»¥æ¨å¯¼å‡º $r1 = r2$ï¼Œå³ $b$ å’Œ $a$ æ¨¡ $k$ ç›¸åŒã€‚

åè¿‡æ¥ç”±ã€Œ$b$ å’Œ $a$ æ¨¡ $k$ ç›¸åŒã€å¯æ¨å¯¼å‡ºã€Œ$b - a$ ä¸º $k$ çš„å€æ•°ã€ã€‚

## ç»Ÿè®¡ä¿¡æ¯
| é€šè¿‡æ¬¡æ•° | æäº¤æ¬¡æ•° | ACæ¯”ç‡ |
| :------: | :------: | :------: |
|    71405    |    259153    |   27.6%   |

## æäº¤å†å²
| æäº¤æ—¶é—´ | æäº¤ç»“æœ | æ‰§è¡Œæ—¶é—´ |  å†…å­˜æ¶ˆè€—  | è¯­è¨€ |
| :------: | :------: | :------: | :--------: | :--------: |


## ç›¸ä¼¼é¢˜ç›®
|                             é¢˜ç›®                             | éš¾åº¦ |
| :----------------------------------------------------------: | :---------: |
| [å’Œä¸º K çš„å­æ•°ç»„](https://leetcode-cn.com/problems/subarray-sum-equals-k/) | ä¸­ç­‰|
