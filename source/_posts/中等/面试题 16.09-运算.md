---
title: é¢è¯•é¢˜ 16.09-è¿ç®—(Operations LCCI)
categories:
  - ä¸­ç­‰
tags:
  - è®¾è®¡
  - æ•°å­¦
abbrlink: 1982387689
date: 2021-12-03 21:36:10
---

> åŸæ–‡é“¾æ¥: https://leetcode-cn.com/problems/operations-lcci


## è‹±æ–‡åŸæ–‡
<div><p>Write methods to implement the multiply, subtract, and divide operations for integers. The results of all of these are integers. Use only the add operator.</p>

<p>You should implement following methods:</p>

<ul>
	<li><code>Operations()</code>&nbsp; constructor</li>
	<li><code>minus(a, b)</code>&nbsp; Subtraction, returns&nbsp;<code>a - b</code></li>
	<li><code>multiply(a, b)</code>&nbsp; Multiplication, returns&nbsp;<code>a * b</code></li>
	<li><code>divide(a, b)</code>&nbsp; Division, returns&nbsp;<code>a / b</code></li>
</ul>

<p><strong>Example: </strong></p>

<pre>
Operations operations = new Operations();
operations.minus(1, 2); //returns -1
operations.multiply(3, 4); //returns 12
operations.divide(5, -2); //returns -2
</pre>

<p><strong>Note: </strong></p>

<ul>
	<li>You can assume inputs are always valid, that is, e.g., denominator will not be 0 in division.</li>
	<li>The number of calls will not exceed 1000.</li>
</ul>
</div>

## ä¸­æ–‡é¢˜ç›®
<div><p>è¯·å®ç°æ•´æ•°æ•°å­—çš„ä¹˜æ³•ã€å‡æ³•å’Œé™¤æ³•è¿ç®—ï¼Œè¿ç®—ç»“æœå‡ä¸ºæ•´æ•°æ•°å­—ï¼Œç¨‹åºä¸­åªå…è®¸ä½¿ç”¨åŠ æ³•è¿ç®—ç¬¦å’Œé€»è¾‘è¿ç®—ç¬¦ï¼Œå…è®¸ç¨‹åºä¸­å‡ºç°æ­£è´Ÿå¸¸æ•°ï¼Œä¸å…è®¸ä½¿ç”¨ä½è¿ç®—ã€‚</p>
<p>ä½ çš„å®ç°åº”è¯¥æ”¯æŒå¦‚ä¸‹æ“ä½œï¼š</p>
<ul>
<li><code>Operations()</code> æ„é€ å‡½æ•°</li>
<li><code>minus(a, b)</code> å‡æ³•ï¼Œè¿”å›<code>a - b</code></li>
<li><code>multiply(a, b)</code> ä¹˜æ³•ï¼Œè¿”å›<code>a * b</code></li>
<li><code>divide(a, b)</code> é™¤æ³•ï¼Œè¿”å›<code>a / b</code></li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre>Operations operations = new Operations();
operations.minus(1, 2); //è¿”å›-1
operations.multiply(3, 4); //è¿”å›12
operations.divide(5, -2); //è¿”å›-2
</pre>
<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li>ä½ å¯ä»¥å‡è®¾å‡½æ•°è¾“å…¥ä¸€å®šæ˜¯æœ‰æ•ˆçš„ï¼Œä¾‹å¦‚ä¸ä¼šå‡ºç°é™¤æ³•åˆ†æ¯ä¸º0çš„æƒ…å†µ</li>
<li>å•ä¸ªç”¨ä¾‹çš„å‡½æ•°è°ƒç”¨æ¬¡æ•°ä¸ä¼šè¶…è¿‡1000æ¬¡</li>
</ul>
</div>

## é€šè¿‡ä»£ç 
<RecoDemo>
</RecoDemo>


## é«˜èµé¢˜è§£
è¿™é“é¢˜å®åœ¨æ˜¯ä»»åŠ¡é‡å¤ªå¤§äº†ï¼Œä¸­é—´å¥½å‡ åº¦æƒ³è¦æ”¾å¼ƒã€‚å…¶å®åªæ˜¯é‡å¤§è€Œå·²ï¼Œå°±æŠŠå®ƒå½“æˆä¸‰é“é¢˜æ¥åšï¼ŒæŒ‰éƒ¨å°±ç­ä¸€ä¸ªä¸€ä¸ªè¿ç®—æ¥å†™ï¼Œæ€»æ˜¯èƒ½å†™å‡ºæ¥çš„ğŸ‘ğŸ»

### åŸºæœ¬æ€è·¯

å…¶å®æœ€éš¾çš„æ˜¯å–åè¿ç®—ï¼Œè¿™é‡Œå‚è€ƒäº†[@sskbskdrin](/u/sskbskdrin/)å¤§ç¥çš„javaä»£ç ã€‚
æœ‰äº†å–åè¿ç®—ä»¥åï¼Œå‡æ³•è‡ªç„¶å°±å®ç°äº†ã€‚ä¹˜é™¤æ³•ä¸»è¦æ˜¯äºŒåˆ†çš„æ€æƒ³ï¼ˆå¿«é€Ÿä¹˜ï¼‰ï¼Œå†åŠ ä¸Šä¸€äº›è¾¹ç•Œæµ‹è¯•ç”¨ä¾‹é˜²æ­¢æº¢å‡ºçš„è¯­å¥ã€‚

ç»™æƒ³è¦çœŸæ­£ä¸æŠ–æœºçµå†™ä¸‹æ¥è¿™é“é¢˜çš„åŒå­¦ä»¬ä¸€ç‚¹æ­¥éª¤çš„å»ºè®®ï¼š
1. å®ç°å–åï¼Œæµ‹è¯•é€šè¿‡å‡æ³•
2. å®ç°å¿«é€Ÿä¹˜é™¤ï¼Œæµ‹è¯•é€šè¿‡ä¹˜é™¤æ³•
3. æ ¹æ®æµ‹è¯•ç”¨ä¾‹ï¼Œæ·»åŠ é˜²æº¢å‡ºåˆ¤æ–­

è¿™æ ·æŠŠä¸€ä¸ªåºå¤§çš„ä»»åŠ¡åˆ†è§£æˆå‡ ä¸ªæ­¥éª¤æ¥å®ç°ï¼Œå°±ä¸ä¼šé‚£ä¹ˆæƒ³è¦æ”¾å¼ƒäº†ğŸ‘ğŸ»

### ä»£ç 
```
class Operations {
private:
    vector<int> negs, poss; // å­˜çš„æ˜¯[-1, -2, -4...]ã€[1, 2, 4...]ï¼Œå–åå’Œåˆ¤æ–­æº¢å‡ºæ—¶ç”¨
    
    int neg(int a) {
        if(!a) return 0;
        
        int result = 0;
        
        if(a > 0) {
            // ä»ç»å¯¹å€¼æœ€å¤§çš„éƒ¨åˆ†å¼€å§‹å¡«å……
            for(auto p = negs.rbegin(); p != negs.rend(); p++) {   
                if(*p + a < 0) continue;
                
                a += *p;
                result += *p;
            }
        } else {
            for(auto p = poss.rbegin(); p != poss.rend(); p++) {
                if(*p + a > 0) continue;
                
                a += *p;
                result += *p;
            }
        }
        return result;
    }
public:
    Operations() {
        // æ„é€ posså’Œnegs
        int p = 1, n = -1;
        poss.push_back(p);
        negs.push_back(n);
        
        for(int i = 0; i < 30; i++) {
            p += p;
            n += n;
            
            poss.push_back(p);
            negs.push_back(n);
        }
    }
    
    int minus(int a, int b) {
        return a + neg(b);
    }
    
    int multiply(int a, int b) {
        if(!a || !b) return 0;
        if(a == 1) return b;        // è¿™ä¸€æ­¥æ˜¯é’ˆå¯¹b = INT_MINçš„æƒ…å†µï¼Œé˜²æ­¢ä¸‹ä¸€æ­¥å–negæ—¶æº¢å‡º
        if(b < 0) return neg(multiply(a, neg(b))); 
        
        int result = a;
        int times = 1;              // timesè¡¨ç¤ºå½“å‰ç»“æœé‡Œå·²ç»ç´¯åŠ äº†å‡ ä¸ªaäº†
        
        // times < poss[30]æ˜¯ä¸ºäº†é˜²æ­¢æº¢å‡º
        while(times < poss[30] && times + times <= b) {   
            result += result;
            times += times;
        }
        result += multiply(a, minus(b, times));
        
        return result;
    }
    
    int divide(int a, int b) {
        if(!a) return 0;
        
        int result = 1;
        // åªå†™åŒå·çš„æƒ…å†µï¼ŒéåŒå·æ—¶ç”¨negè½¬åŒ–æˆåŒå·ï¼Œä½†æ˜¯è¦æ³¨æ„æº¢å‡º
        if(a > 0) {
            if(b == INT_MIN) return 0;          // é˜²æ­¢ä¸‹ä¸€å¥å–negçš„æ—¶å€™æº¢å‡º
            if(b < 0) return neg(divide(a, neg(b)));
            if(a < b) return 0;
            
            int acc = b;                        // ä¸æ–­å¾€accé‡Œå¡«å……bï¼Œç›´åˆ°accè¾¾åˆ°a
            while(acc < poss[30] && a >= acc + acc) {
                result += result;               // resultè¡¨ç¤ºå·²ç»å¡«å……äº†å‡ ä¸ªbäº†
                acc += acc;
            }
            result += divide(minus(a, acc), b);
        } else {
            if(b == 1) return a;                // é˜²æ­¢è‹¥a=INT_MINé€ æˆä¸‹ä¸€å¥è¿ç®—æ—¶æº¢å‡º
            if(b > 0) return neg(divide(a, neg(b)));
            if(a > b) return 0;
            
            int acc = b;
            while(acc >= negs[30] && a <= acc + acc) {
                result += result;
                acc += acc;
            }
            result += divide(minus(a, acc), b);
        }
        return result;
    }
};

/**
 * Your Operations object will be instantiated and called as such:
 * Operations* obj = new Operations();
 * int param_1 = obj->minus(a,b);
 * int param_2 = obj->multiply(a,b);
 * int param_3 = obj->divide(a,b);
 */
```


## ç»Ÿè®¡ä¿¡æ¯
| é€šè¿‡æ¬¡æ•° | æäº¤æ¬¡æ•° | ACæ¯”ç‡ |
| :------: | :------: | :------: |
|    2318    |    4227    |   54.8%   |

## æäº¤å†å²
| æäº¤æ—¶é—´ | æäº¤ç»“æœ | æ‰§è¡Œæ—¶é—´ |  å†…å­˜æ¶ˆè€—  | è¯­è¨€ |
| :------: | :------: | :------: | :--------: | :--------: |
