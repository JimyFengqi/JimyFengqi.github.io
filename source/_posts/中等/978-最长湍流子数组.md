---
title: 978-æœ€é•¿æ¹æµå­æ•°ç»„(Longest Turbulent Subarray)
categories:
  - ä¸­ç­‰
tags:
  - æ•°ç»„
  - åŠ¨æ€è§„åˆ’
  - æ»‘åŠ¨çª—å£
abbrlink: 257208235
date: 2021-12-03 22:27:39
---

> åŸæ–‡é“¾æ¥: https://leetcode-cn.com/problems/longest-turbulent-subarray


## è‹±æ–‡åŸæ–‡
<div><p>Given an integer array <code>arr</code>, return <em>the length of a maximum size turbulent subarray of</em> <code>arr</code>.</p>

<p>A subarray is <strong>turbulent</strong> if the comparison sign flips between each adjacent pair of elements in the subarray.</p>

<p>More formally, a subarray <code>[arr[i], arr[i + 1], ..., arr[j]]</code> of <code>arr</code> is said to be turbulent if and only if:</p>

<ul>
	<li>For <code>i &lt;= k &lt; j</code>:

	<ul>
		<li><code>arr[k] &gt; arr[k + 1]</code> when <code>k</code> is odd, and</li>
		<li><code>arr[k] &lt; arr[k + 1]</code> when <code>k</code> is even.</li>
	</ul>
	</li>
	<li>Or, for <code>i &lt;= k &lt; j</code>:
	<ul>
		<li><code>arr[k] &gt; arr[k + 1]</code> when <code>k</code> is even, and</li>
		<li><code>arr[k] &lt; arr[k + 1]</code> when <code>k</code> is odd.</li>
	</ul>
	</li>
</ul>

<p>&nbsp;</p>
<p><strong>Example 1:</strong></p>

<pre>
<strong>Input:</strong> arr = [9,4,2,10,7,8,8,1,9]
<strong>Output:</strong> 5
<strong>Explanation:</strong> arr[1] &gt; arr[2] &lt; arr[3] &gt; arr[4] &lt; arr[5]
</pre>

<p><strong>Example 2:</strong></p>

<pre>
<strong>Input:</strong> arr = [4,8,12,16]
<strong>Output:</strong> 2
</pre>

<p><strong>Example 3:</strong></p>

<pre>
<strong>Input:</strong> arr = [100]
<strong>Output:</strong> 1
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= arr.length &lt;= 4 * 10<sup>4</sup></code></li>
	<li><code>0 &lt;= arr[i] &lt;= 10<sup>9</sup></code></li>
</ul>
</div>

## ä¸­æ–‡é¢˜ç›®
<div><p>å½“ <code>A</code>&nbsp;çš„å­æ•°ç»„&nbsp;<code>A[i], A[i+1], ..., A[j]</code>&nbsp;æ»¡è¶³ä¸‹åˆ—æ¡ä»¶æ—¶ï¼Œæˆ‘ä»¬ç§°å…¶ä¸º<em>æ¹æµå­æ•°ç»„</em>ï¼š</p>

<ul>
	<li>è‹¥&nbsp;<code>i &lt;= k &lt; j</code>ï¼Œå½“ <code>k</code>&nbsp;ä¸ºå¥‡æ•°æ—¶ï¼Œ&nbsp;<code>A[k] &gt; A[k+1]</code>ï¼Œä¸”å½“ <code>k</code> ä¸ºå¶æ•°æ—¶ï¼Œ<code>A[k] &lt; A[k+1]</code>ï¼›</li>
	<li><strong>æˆ– </strong>è‹¥&nbsp;<code>i &lt;= k &lt; j</code>ï¼Œå½“ <code>k</code> ä¸ºå¶æ•°æ—¶ï¼Œ<code>A[k] &gt; A[k+1]</code>&nbsp;ï¼Œä¸”å½“ <code>k</code>&nbsp;ä¸ºå¥‡æ•°æ—¶ï¼Œ&nbsp;<code>A[k] &lt; A[k+1]</code>ã€‚</li>
</ul>

<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ¯”è¾ƒç¬¦å·åœ¨å­æ•°ç»„ä¸­çš„æ¯ä¸ªç›¸é‚»å…ƒç´ å¯¹ä¹‹é—´ç¿»è½¬ï¼Œåˆ™è¯¥å­æ•°ç»„æ˜¯æ¹æµå­æ•°ç»„ã€‚</p>

<p>è¿”å› <code>A</code> çš„æœ€å¤§æ¹æµå­æ•°ç»„çš„<strong>é•¿åº¦</strong>ã€‚</p>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>[9,4,2,10,7,8,8,1,9]
<strong>è¾“å‡ºï¼š</strong>5
<strong>è§£é‡Šï¼š</strong>(A[1] &gt; A[2] &lt; A[3] &gt; A[4] &lt; A[5])
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>[4,8,12,16]
<strong>è¾“å‡ºï¼š</strong>2
</pre>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>[100]
<strong>è¾“å‡ºï¼š</strong>1
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ol>
	<li><code>1 &lt;= A.length &lt;= 40000</code></li>
	<li><code>0 &lt;= A[i] &lt;= 10^9</code></li>
</ol>
</div>

## é€šè¿‡ä»£ç 
<RecoDemo>
</RecoDemo>


## é«˜èµé¢˜è§£
å„ä½é¢˜å‹å¤§å®¶å¥½ï¼Œä»Šå¤©æ˜¯è´Ÿé›ªæ˜çƒ›åšæŒæ—¥æ›´çš„ç¬¬ **15** å¤©ã€‚ä»Šå¤©åŠ›æ‰£ä¸Šçš„æ¯æ—¥ä¸€é¢˜æ˜¯ç¬¬ 978 é¢˜ã€Œæœ€é•¿æ¹æµå­æ•°ç»„ã€ã€‚

# è§£é¢˜æ€è·¯
é¦–å…ˆæˆ‘ä»¬ä¸€å®šè¦è¯»æ‡‚é¢˜æ„ï¼Œæœ¬é¢˜ä¸­æ¹æµå­æ•°ç»„çš„æ„æ€æ˜¯ï¼šä¸€ä¸ªå¢é•¿å’Œé™ä½äº’ç›¸äº¤æ›¿çš„å­æ•°ç»„ï¼Œå¦‚æœåœ¨åæ ‡è½´ä¸Šç”»å‡ºæ¥å°±æ˜¯ä¸ªæ³¢æµªçŠ¶æ•°ç»„ï¼Œ`â†— â†˜ â†— â†˜`ï¼Œå³è¿™ä¸ªå½¢çŠ¶ã€‚
æ¯”å¦‚ï¼Œé¢˜ç›®ç»™çš„ç¤ºä¾‹ 1 ä¸­çš„æœ€é•¿æ¹æµå­æ•°ç»„ä¸º `[4,2,10,7,8]`ï¼Œä»–å°±æ˜¯å¢é•¿å’Œé™ä½ç›¸äº’äº¤æ›¿çš„ï¼Œå½¢çŠ¶æ˜¯`â†˜ â†— â†˜ â†—`ã€‚

## åŠ¨æ€è§„åˆ’

ä»Šå¤©è¿™ä¸ªé¢˜ç›®æœ€åˆé€‚çš„åšæ³•æ˜¯åŠ¨æ€è§„åˆ’ã€‚ä¸‹é¢çš„è§£é‡Šä¸éš¾ï¼Œç›¸ä¿¡ä½ å¯ä»¥çœ‹æ‡‚ï¼›å¦‚æœæœ‰ç–‘é—®å°±åœ¨è¯„è®ºåŒºæé—®ï¼Œæˆ‘ä¼šåŠæ—¶è§£ç­”ã€‚

åŠ¨æ€è§„åˆ’é¦–å…ˆéœ€è¦æˆ‘ä»¬å®šä¹‰çŠ¶æ€æ˜¯ä»€ä¹ˆï¼Œç„¶åæ ¹æ®é¢˜æ„ï¼Œå†™å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚

å¯¹äº**æœ€é•¿è¿ç»­å­æ•°ç»„**é—®é¢˜ï¼Œä½¿ç”¨åŠ¨æ€è§„åˆ’æ±‚è§£æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸å®šä¹‰çŠ¶æ€ `dp[i]` ä¸ºï¼šä»¥ `i` ä½ç½®ç»“å°¾çš„æœ€é•¿è¿ç»­å­æ•°ç»„çš„é•¿åº¦ï¼Œå› ä¸ºè¿™ä¸ªçŠ¶æ€å¯ä»¥åæ˜  `i` ä½ç½®åŠå…¶å‰é¢åŒºé—´çš„æƒ…å†µã€‚ä¸‹ä¸€ä¸ªä½ç½® `i + 1` å¯ä»¥æ ¹æ® `dp[i]` å°±çŸ¥é“äº†å‰é¢çš„æƒ…å†µï¼Œå†æ ¹æ® `arr[i + 1]` å’Œ `arr[i]` çš„å¤§å°å…³ç³»ï¼Œèƒ½æ›´æ–°çŠ¶æ€ `dp[i + 1]`ã€‚

å¯¹äºæœ¬é¢˜ï¼Œå¦‚æœåªå®šä¸€ä¸ªçŠ¶æ€æ•°ç»„æ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºæˆ‘ä»¬åªæœ‰åŒºåˆ†äº† `i` ä½ç½®æ˜¯åœ¨å¢é•¿è¿˜æ˜¯åœ¨é™ä½ï¼Œæ‰èƒ½åˆ¤æ–­ `i + 1` ä½ç½®æ˜¯å¦èƒ½ç»­ä¸Šå‰é¢çš„æ³¢æµªã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸¤ä¸ªçŠ¶æ€æ•°ç»„ï¼Œåˆ†åˆ«è¡¨ç¤ºä»¥ `i` ç»“å°¾çš„åœ¨å¢é•¿å’Œé™ä½çš„æœ€é•¿æ¹æµå­æ•°ç»„é•¿åº¦ã€‚

### çŠ¶æ€çš„å®šä¹‰ï¼š

- å®šä¹‰ `up[i]` è¡¨ç¤ºä»¥ä½ç½® `i` ç»“å°¾çš„ï¼Œå¹¶ä¸” `arr[i - 1] < arr[i]` çš„æœ€é•¿æ¹æµå­æ•°ç»„é•¿åº¦ã€‚
- å®šä¹‰ `down[i]` è¡¨ç¤ºä»¥ä½ç½® `i` ç»“å°¾çš„ï¼Œå¹¶ä¸” `arr[i - 1] > arr[i]` çš„æœ€é•¿æ¹æµå­æ•°ç»„é•¿åº¦ã€‚

`up[i]` å’Œ `down[i]` åˆå§‹åŒ–éƒ½æ˜¯ 1ï¼Œå› ä¸ºæ¯ä¸ªæ•°å­—æœ¬èº«éƒ½æ˜¯ä¸€ä¸ªæœ€å°çš„æ¹æµå­æ•°ç»„ã€‚

### çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š

- `up[i] = down[i - 1] + 1`ï¼Œå½“ `arr[i - 1] < arr[i]`ï¼›
- `down[i] = up[i - 1] + 1`ï¼Œå½“ `arr[i - 1] > arr[i]`ï¼›

è§£é‡Šï¼šæ¹æµå­æ•°ç»„çš„å¢é•¿å’Œé™ä½æ˜¯äº¤æ›¿çš„ã€‚

æ–‡å­—çš„è§£é‡Šä¼šæ˜¾å¾—è‹ç™½å’Œå•°å—¦ï¼Œå¤§å®¶ç›´æ¥çœ‹å›¾å§ã€‚

![978.gif](../images/longest-turbulent-subarray-0.gif)


æ ¹æ®è¯„è®ºåŒºçš„å¤§å®¶åé¦ˆï¼Œç‰¹æŠŠæ¯ä¸ªæ“ä½œè¿‡ç¨‹æ”¾åœ¨è¿™é‡Œï¼Œè‡ªå·±ç‚¹å‡»è§‚çœ‹ï¼š

<![978_img.001.jpeg](../images/longest-turbulent-subarray-1.jpeg),![978_img.002.jpeg](../images/longest-turbulent-subarray-2.jpeg),![978_img.003.jpeg](../images/longest-turbulent-subarray-3.jpeg),![978_img.004.jpeg](../images/longest-turbulent-subarray-4.jpeg),![978_img.005.jpeg](../images/longest-turbulent-subarray-5.jpeg),![978_img.006.jpeg](../images/longest-turbulent-subarray-6.jpeg),![978_img.007.jpeg](../images/longest-turbulent-subarray-7.jpeg),![978_img.008.jpeg](../images/longest-turbulent-subarray-8.jpeg),![978_img.009.jpeg](../images/longest-turbulent-subarray-9.jpeg),![978_img.010.jpeg](../images/longest-turbulent-subarray-10.jpeg),![978_img.011.jpeg](../images/longest-turbulent-subarray-11.jpeg),![978_img.012.jpeg](../images/longest-turbulent-subarray-12.jpeg),![978_img.013.jpeg](../images/longest-turbulent-subarray-13.jpeg),![978_img.014.jpeg](../images/longest-turbulent-subarray-14.jpeg),![978_img.015.jpeg](../images/longest-turbulent-subarray-15.jpeg),![978_img.016.jpeg](../images/longest-turbulent-subarray-16.jpeg),![978_img.017.jpeg](../images/longest-turbulent-subarray-17.jpeg),![978_img.018.jpeg](../images/longest-turbulent-subarray-18.jpeg),![978_img.019.jpeg](../images/longest-turbulent-subarray-19.jpeg),![978_img.020.jpeg](../images/longest-turbulent-subarray-20.jpeg),![978_img.021.jpeg](../images/longest-turbulent-subarray-21.jpeg),![978_img.022.jpeg](../images/longest-turbulent-subarray-22.jpeg),![978_img.023.jpeg](../images/longest-turbulent-subarray-23.jpeg)>



é™¤äº†åŠ¨æ€è§„åˆ’ä¹‹å¤–ï¼Œæœ¬é¢˜è¿˜å¯ä»¥ç”¨åŒæŒ‡é’ˆæ±‚è§£ã€‚å¤§å®¶å¯ä»¥å‚è€ƒå®˜æ–¹é¢˜è§£ã€‚

## ä»£ç 

ä½¿ç”¨ Python2 å†™çš„ä»£ç å¦‚ä¸‹ã€‚


```python
class Solution(object):
    def maxTurbulenceSize(self, arr):
        """
        :type arr: List[int]
        :rtype: int
        """
        N = len(arr)
        up = [1] * N
        down = [1] * N
        res = 1
        for i in range(1, N):
            if arr[i - 1] < arr[i]:
                up[i] = down[i - 1] + 1
                down[i] = 1
            elif arr[i - 1] > arr[i]:
                up[i] = 1
                down[i] = up[i - 1] + 1
            else:
                up[i] = 1
                down[i] = 1
            res = max(res, max(up[i], down[i]))
        return res
```

ä¸Šé¢çš„ä»£ç å¯ä»¥ç¼©çŸ­æˆä¸‹é¢è¿™æ ·ï¼š

```python
class Solution(object):
    def maxTurbulenceSize(self, arr):
        """
        :type arr: List[int]
        :rtype: int
        """
        N = len(arr)
        up = [1] * N
        down = [1] * N
        res = 1
        for i in range(1, N):
            if arr[i - 1] < arr[i]:
                up[i] = down[i - 1] + 1
            elif arr[i - 1] > arr[i]:
                down[i] = up[i - 1] + 1
            res = max(res, max(up[i], down[i]))
        return res
```

# åˆ·é¢˜å¿ƒå¾—

1. è¿ç»­æœ€é•¿å­æ•°ç»„é—®é¢˜å¯ä»¥ç”¨åŒæŒ‡é’ˆå’ŒåŠ¨æ€è§„åˆ’æ±‚è§£ã€‚
2. æœ¬é¢˜çš„åŠ¨æ€è§„åˆ’è§£æ³•æ˜¯ä¸ªç»å…¸è§£æ³•ï¼Œå­¦ä¹ ä¹‹åå¯ä»¥è¿ç”¨åˆ°å…¶ä»–é¢˜ç›®ã€‚


å‚è€ƒèµ„æ–™ï¼š
1. [æœ€é•¿æ¹æµå­æ•°ç»„](https://leetcode-cn.com/problems/longest-turbulent-subarray/solution/zui-chang-tuan-liu-zi-shu-zu-by-leetcode-t4d8/)
2. [ğŸ¦ æœ€é•¿æ¹æµå­æ•°ç»„](https://leetcode-cn.com/problems/longest-turbulent-subarray/solution/zui-chang-tuan-liu-zi-shu-zu-by-leetcode-zqoq/)
3. [èŠ±èŠ±é…±](https://zxi.mytechroad.com/blog/dynamic-programming/leetcode-978-longest-turbulent-subarray/)


OKï¼Œä»¥ä¸Šå°±æ˜¯ [@è´Ÿé›ªæ˜çƒ›](/u/fuxuemingzhu/) å†™çš„ä»Šå¤©é¢˜è§£çš„å…¨éƒ¨å†…å®¹äº†ï¼Œå¦‚æœä½ è§‰å¾—æœ‰å¸®åŠ©çš„è¯ï¼Œ**æ±‚èµã€æ±‚å…³æ³¨ã€æ±‚æ”¶è—**ã€‚æˆ‘ä»¬æ˜å¤©å†è§ï¼

## ç»Ÿè®¡ä¿¡æ¯
| é€šè¿‡æ¬¡æ•° | æäº¤æ¬¡æ•° | ACæ¯”ç‡ |
| :------: | :------: | :------: |
|    44011    |    92969    |   47.3%   |

## æäº¤å†å²
| æäº¤æ—¶é—´ | æäº¤ç»“æœ | æ‰§è¡Œæ—¶é—´ |  å†…å­˜æ¶ˆè€—  | è¯­è¨€ |
| :------: | :------: | :------: | :--------: | :--------: |


## ç›¸ä¼¼é¢˜ç›®
|                             é¢˜ç›®                             | éš¾åº¦ |
| :----------------------------------------------------------: | :---------: |
| [æœ€å¤§å­æ•°ç»„å’Œ](https://leetcode-cn.com/problems/maximum-subarray/) | ç®€å•|
