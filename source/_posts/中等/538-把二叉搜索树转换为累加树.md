---
title: 538-æŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘(Convert BST to Greater Tree)
categories:
  - ä¸­ç­‰
tags:
  - æ ‘
  - æ·±åº¦ä¼˜å…ˆæœç´¢
  - äºŒå‰æœç´¢æ ‘
  - äºŒå‰æ ‘
abbrlink: 3833848755
date: 2021-12-03 22:43:06
---

> åŸæ–‡é“¾æ¥: https://leetcode-cn.com/problems/convert-bst-to-greater-tree


## è‹±æ–‡åŸæ–‡
<div><p>Given the <code>root</code> of a Binary Search Tree (BST), convert it to a Greater Tree such that every key of the original BST is changed to the original key plus the sum of all keys greater than the original key in BST.</p>

<p>As a reminder, a <em>binary search tree</em> is a tree that satisfies these constraints:</p>

<ul>
	<li>The left subtree of a node contains only nodes with keys <strong>less than</strong> the node&#39;s key.</li>
	<li>The right subtree of a node contains only nodes with keys <strong>greater than</strong> the node&#39;s key.</li>
	<li>Both the left and right subtrees must also be binary search trees.</li>
</ul>

<p>&nbsp;</p>
<p><strong>Example 1:</strong></p>
<img alt="" src="https://assets.leetcode.com/uploads/2019/05/02/tree.png" style="width: 550px; height: 375px;" />
<pre>
<strong>Input:</strong> root = [4,1,6,0,2,5,7,null,null,null,3,null,null,null,8]
<strong>Output:</strong> [30,36,21,36,35,26,15,null,null,null,33,null,null,null,8]
</pre>

<p><strong>Example 2:</strong></p>

<pre>
<strong>Input:</strong> root = [0,null,1]
<strong>Output:</strong> [1,null,1]
</pre>

<p><strong>Example 3:</strong></p>

<pre>
<strong>Input:</strong> root = [1,0,2]
<strong>Output:</strong> [3,3,2]
</pre>

<p><strong>Example 4:</strong></p>

<pre>
<strong>Input:</strong> root = [3,2,4,1]
<strong>Output:</strong> [7,9,4,10]
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li>The number of nodes in the tree is in the range <code>[0, 10<sup>4</sup>]</code>.</li>
	<li><code>-10<sup>4</sup> &lt;= Node.val &lt;= 10<sup>4</sup></code></li>
	<li>All the values in the tree are <strong>unique</strong>.</li>
	<li><code>root</code> is guaranteed to be a valid binary search tree.</li>
</ul>

<p>&nbsp;</p>
<p><strong>Note:</strong> This question is the same as 1038: <a href="https://leetcode.com/problems/binary-search-tree-to-greater-sum-tree/" target="_blank">https://leetcode.com/problems/binary-search-tree-to-greater-sum-tree/</a></p>
</div>

## ä¸­æ–‡é¢˜ç›®
<div><p>ç»™å‡ºäºŒå‰<strong> æœç´¢ </strong>æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œè¯¥æ ‘çš„èŠ‚ç‚¹å€¼å„ä¸ç›¸åŒï¼Œè¯·ä½ å°†å…¶è½¬æ¢ä¸ºç´¯åŠ æ ‘ï¼ˆGreater Sum Treeï¼‰ï¼Œä½¿æ¯ä¸ªèŠ‚ç‚¹ <code>node</code>&nbsp;çš„æ–°å€¼ç­‰äºåŸæ ‘ä¸­å¤§äºæˆ–ç­‰äº&nbsp;<code>node.val</code>&nbsp;çš„å€¼ä¹‹å’Œã€‚</p>

<p>æé†’ä¸€ä¸‹ï¼ŒäºŒå‰æœç´¢æ ‘æ»¡è¶³ä¸‹åˆ—çº¦æŸæ¡ä»¶ï¼š</p>

<ul>
	<li>èŠ‚ç‚¹çš„å·¦å­æ ‘ä»…åŒ…å«é”®<strong> å°äº </strong>èŠ‚ç‚¹é”®çš„èŠ‚ç‚¹ã€‚</li>
	<li>èŠ‚ç‚¹çš„å³å­æ ‘ä»…åŒ…å«é”®<strong> å¤§äº</strong> èŠ‚ç‚¹é”®çš„èŠ‚ç‚¹ã€‚</li>
	<li>å·¦å³å­æ ‘ä¹Ÿå¿…é¡»æ˜¯äºŒå‰æœç´¢æ ‘ã€‚</li>
</ul>

<p><strong>æ³¨æ„ï¼š</strong>æœ¬é¢˜å’Œ 1038:&nbsp;<a href="https://leetcode-cn.com/problems/binary-search-tree-to-greater-sum-tree/">https://leetcode-cn.com/problems/binary-search-tree-to-greater-sum-tree/</a> ç›¸åŒ</p>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<p><strong><img alt="" src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2019/05/03/tree.png" style="height: 364px; width: 534px;"></strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>[4,1,6,0,2,5,7,null,null,null,3,null,null,null,8]
<strong>è¾“å‡ºï¼š</strong>[30,36,21,36,35,26,15,null,null,null,33,null,null,null,8]
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>root = [0,null,1]
<strong>è¾“å‡ºï¼š</strong>[1,null,1]
</pre>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>root = [1,0,2]
<strong>è¾“å‡ºï¼š</strong>[3,3,2]
</pre>

<p><strong>ç¤ºä¾‹ 4ï¼š</strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>root = [3,2,4,1]
<strong>è¾“å‡ºï¼š</strong>[7,9,4,10]
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li>æ ‘ä¸­çš„èŠ‚ç‚¹æ•°ä»‹äº <code>0</code>&nbsp;å’Œ <code>10<sup>4</sup></code><sup>&nbsp;</sup>ä¹‹é—´ã€‚</li>
	<li>æ¯ä¸ªèŠ‚ç‚¹çš„å€¼ä»‹äº <code>-10<sup>4</sup></code>&nbsp;å’Œ&nbsp;<code>10<sup>4</sup></code>&nbsp;ä¹‹é—´ã€‚</li>
	<li>æ ‘ä¸­çš„æ‰€æœ‰å€¼ <strong>äº’ä¸ç›¸åŒ</strong> ã€‚</li>
	<li>ç»™å®šçš„æ ‘ä¸ºäºŒå‰æœç´¢æ ‘ã€‚</li>
</ul>
</div>

## é€šè¿‡ä»£ç 
<RecoDemo>
</RecoDemo>


## é«˜èµé¢˜è§£

> æœ¬æ–‡å°†å¸¦ä½ ç”¨æ ‘çš„ä¸€ç§éå†ç®—æ³•è§£å†³Nä¸ª`leetcode`ç›¸å…³ç®—æ³•é¢˜(ç®—æ³•å°æ¸£æ¸£è‡´æ•¬å¶å¸ˆå‚…)
![](../images/convert-bst-to-greater-tree-0.png)

> æˆ‘ä¸å®³æ€•æ›¾ç¶“ç·´éä¸€è¬ç¨®è¸¢æ³•çš„äººï¼Œä½†æˆ‘å®³æ€•ä¸€ç¨®è¸¢æ³•ç·´éä¸€è¬æ¬¡çš„äºº(by å¶å¸ˆå‚…çš„å¾’å¼ŸBruce Lee)
![](../images/convert-bst-to-greater-tree-1.png)

# æ ‘çš„éå†(Traversal)
å¦‚ä¸‹å›¾, ä¸‰ç§éå†æ–¹å¼, å¯ç”¨åŒä¸€ç§é€’å½’æ€æƒ³å®ç°
![](../images/convert-bst-to-greater-tree-2.png)

## å…ˆåºéå†(PreOrder, æŒ‰ç…§å…ˆè®¿é—®æ ¹èŠ‚ç‚¹çš„é¡ºåº)

```JavaScript
var preorderTraversal = function(root) {
  const res = []
  function traversal (root) {
    if (root !== null) {
      res.push(root.val) // è®¿é—®æ ¹èŠ‚ç‚¹çš„å€¼
      traversal(root.left) // é€’å½’éå†å·¦å­æ ‘
      traversal(root.right) // é€’å½’éå†å³å­æ ‘
    }
  }
  traversal(root)
  return res
}
```

## 94 ä¸­åºéå†(InOrder, æŒ‰ç…§æ ¹èŠ‚ç‚¹åœ¨ä¸­é—´è®¿é—®çš„é¡ºåº)


![](../images/convert-bst-to-greater-tree-3.png)

```JavaScript
var inorderTraversal = function(root) {
  const res = []
  function traversal (root) {
    if (root !== null) {
      traversal(root.left)
      res.push(root.val)
      traversal(root.right)
    }
  }
  traversal(root)
  return res
}
```

## 145 åç»­éå†(PosterOrder, æŒ‰ç…§æ ¹èŠ‚ç‚¹åœ¨åé¢è®¿é—®çš„é¡ºåº)


![](../images/convert-bst-to-greater-tree-4.png)

```JavaScript
var postorderTraversal = function(root) {
  const res = []
  function traversal (root) {
    if (root !== null) {
      traversal(root.left)
      traversal(root.right)
      res.push(root.val)
    }
  }
  traversal(root)
  return res
}
```

## 100 ç›¸åŒçš„æ ‘

![](../images/convert-bst-to-greater-tree-5.png)

å¯ä»¥åˆ©ç”¨è¿™ç§é€’å½’æ€æƒ³å¹¶å‘åŒæ—¶çˆ¬ä¸¤æ£µæ ‘

```JavaScript
var isSameTree = function(p, q) {
  function traversal (root1, root2) {
    if (root1 === null && root2 !== null) {
      return false
    } else if (root1 !== null && root2 === null) {
      return false
    } else if (root1 === null && root2 === null) {
      return true
    } else {
      return  root1.val === root2.val && traversal(root1.left, root2.left) && traversal(root1.right, root2.right)
    }
  }
  return traversal(p, q)
}
```

## 226 ç¿»è½¬äºŒå‰æ ‘


![](../images/convert-bst-to-greater-tree-6.png)

è¿™ç§ç®—æ³•å¯ä»¥å¸®åŠ©`Homebrew`ä½œè€…`Max Howell`è§£å¼€`Google`çš„ç®—æ³•é¢è¯•é¢˜

![](../images/convert-bst-to-greater-tree-7.png)

```JavaScript
var invertTree = function(root) {
  function traversal (root) {
    if (root === null) {
      return null
    } else {
      [root.left, root.right] = [traversal(root.right), traversal(root.left)]
      return root
    }
  }
  return  traversal(root)
}
```

## 590 Nå‰æ ‘çš„ååºéå†

![](../images/convert-bst-to-greater-tree-8.png)

æˆ‘ä»¬è¿˜å¯ä»¥ç”¨æ­¤ç§ç®—æ³•è§£å†³Nå‰æ ‘çš„é—®é¢˜
```JavaScript
var postorder = function(root) {
  const res = []
  function traversal (root) {
    if (root !== null) {
      root.children.forEach(child => {
        traversal(child)
      })
      res.push(root.val)
    }
  }
  traversal(root)
  return res
}
```
å¦‚æœä½ å·²å¯¹è¿™ç§å†™æ³•å®¡ç¾ç–²åŠ³, å¯ä»¥æ¢ä¸ªå†™æ³•, ä½¿ç”¨åŒ¿åå‡½æ•°
```JavaScript
var postorder = function(root) {
  const res = []
  ;(function (root) {
    if (root !== null) {
      root.children.forEach(child => {
        arguments.callee(child)
      })
      res.push(root.val)
    }
  })(root)
  return res
}
```
è¿˜å¯ä»¥åˆ©ç”¨æ ˆæ¥è¿­ä»£
```JavaScript
var postorder = function(root) {
  if (root === null) {
    return []
  }
  const res = []
  const arr = [root]
  while (arr.length) {
    const cur = arr.pop()
    res.push(cur.val)
    for (let i = cur.children.length - 1; i >= 0; i--) {
      arr.push(cur.children[i])
    }
  }
  return res.reverse()
}
```

## 103 äºŒå‰æ ‘çš„é”¯é½¿å½¢å±‚æ¬¡éå†

![](../images/convert-bst-to-greater-tree-9.png)

å¤§ç™½è¯, è›‡çš®èµ°ä½çˆ¬æ ‘

```JavaScript
var zigzagLevelOrder = function(root) {
  if (root === null) {
    return []
  } else {
    let res = []
    function traversal (root, depth) {
      if (root !== null) {
        if (res[depth] === undefined) {
          res[depth] = []
        }
        res[depth].push(root.val)
        traversal(root.left, depth + 1)
        traversal(root.right, depth + 1)
      }
    }
    traversal(root, 0)
    res.forEach((item, index) => {
      if (index & 1) {
        res[index] = item.reverse()
      }
    })
    return res
  }
}
```
ä¼˜åŒ–
```JavaScript
var zigzagLevelOrder = function(root) {
  if (root === null) {
    return []
  } else {
    let res = []
    function traversal (root, depth) {
      if (root !== null) {
        if (res[depth] === undefined) {
          res[depth] = []
        }
        if (depth & 1) {
          res[depth].unshift(root.val)
        } else {
          res[depth].push(root.val)
        }
        traversal(root.left, depth + 1)
        traversal(root.right, depth + 1)
      }
    }
    traversal(root, 0)
    return res
  }
}
```

## 230 äºŒå‰æœç´¢æ ‘ä¸­ç¬¬Kå°çš„å…ƒç´ 

![](../images/convert-bst-to-greater-tree-10.png)

```JavaScript
var kthSmallest = function (root, k) {
  let arr = []
  function traversal (node) {
    if (node !== null) {
      traversal(node.left)
      arr.push(node.val)
      traversal(node.right)
    }
  }
  traversal(root)
  return arr[k - 1]
}
```

ä¼˜åŒ–, å‡å°‘éå†æ¬¡æ•°
```JavaScript
var kthSmallest = function (root, k) {
  let arr = []
  function traversal(node) {
    if (node !== null && arr.length < k) {
      traversal(node.left)
      arr.push(node.val)
      traversal(node.right)
    }
  }
  traversal(root)
  return arr[k - 1]
}
```

è¿›ä¸€æ­¥ä¼˜åŒ–, ä½¿ç”¨O(1)çš„é¢å¤–ç©ºé—´
```JavaScript
var kthSmallest = function (root, k) {
  let res
  let count = 0
  function traversal(node) {
    if (node !== null) {
      if (count < k) {
        traversal(node.left)
      }
      if (++count === k) {
        res = node.val
      }
      if (count < k) {
        traversal(node.right)
      }
    }
  }
  traversal(root)
  return res
}
```

## 102 äºŒå‰æ ‘çš„å±‚åºéå†   

![](../images/convert-bst-to-greater-tree-11.png)

```JavaScript
var levelOrder = function(root) {
  const res = []
  function traversal (root, depth) {
    if (root !== null) {
      if (!res[depth]) {
        res[depth] = []
      }
      traversal(root.left, depth + 1)
      res[depth].push(root.val)
      traversal(root.right, depth + 1)
    }
  }
  traversal(root, 0)
  return res
}
```

## 199 äºŒå‰æ ‘çš„å³è§†å›¾

![](../images/convert-bst-to-greater-tree-12.png)

åŸºæœ¬æ€è·¯: å…ˆåºéå†, è®°å½•æ¯ä¸€å±‚æ·±åº¦ä¸‹çš„èŠ‚ç‚¹çš„å€¼, å¹¶å…ˆè®°å½•å·¦èŠ‚ç‚¹å†è®°å½•å³èŠ‚ç‚¹, åˆ™æœ€åè®°å½•çš„å€¼å³ä¸ºè¯¥å±‚æ·±åº¦çš„å³è§†å›¾çœ‹åˆ°çš„å€¼

```JavaScript
var rightSideView = function(root) {
  const arr = []
  function traversal (root, depth) {
    if (root) {
      if (arr[depth] === undefined) {
        arr[depth] = []
      }
      arr[depth].push(root.val)
      traversal(root.left, depth + 1)
      traversal(root.right, depth + 1)
    }
  }
  traversal(root, 0)
  const res = []
  for (let i = 0; i < arr.length; ++i) {
    res.push(arr[i][arr[i].length - 1])
  }
  return res
};
```

## 104 äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦

![](../images/convert-bst-to-greater-tree-13.png)

```JavaScript
var maxDepth = function (root) {
  let res = 0
  function traversal (root, depth) {
    if (root !== null) {
      if (depth > res) {
        res = depth
      }
      if (root.left) {
        traversal(root.left, depth + 1)
      }
      if (root.right) {
        traversal(root.right, depth + 1)
      }
    }
  }
  traversal(root, 1)
  return res
}
```

## 107 äºŒå‰æ ‘çš„å±‚æ¬¡éå† II   

![](../images/convert-bst-to-greater-tree-14.png)

```JavaScript
var levelOrderBottom = function(root) {
  if (root === null) {
    return []
  }
  let res = []
  function traversal (root, depth) {
    if (root !== null) {
      if (!res[depth]) {
        res[depth] = []
      }
      traversal(root.left, depth + 1)
      res[depth].push(root.val)
      traversal(root.right, depth + 1)
    }
  }
  traversal(root, 0)
  return res.reverse()
}
```

## 671 äºŒå‰æ ‘ä¸­ç¬¬äºŒå°çš„èŠ‚ç‚¹  

![](../images/convert-bst-to-greater-tree-15.png)


```JavaScript
var findSecondMinimumValue = function(root) {
  let arr = []
  ;(function traversal (root) {
    if (root !== null) {
      traversal(root.left)
      arr.push(root.val)
      traversal(root.right)
    }
  })(root)
  let _arr = [...new Set(arr)].sort()
  return _arr[1] ? _arr[1] : -1
}
```



## 1038 ä»äºŒå‰æœç´¢æ ‘åˆ°æ›´å¤§å’Œæ ‘  

![](../images/convert-bst-to-greater-tree-16.png)

```JavaScript
var bstToGst = function(root) {
  let sum = 0
  function traversal (root) {
    if (root !== null) {
      traversal(root.right)
      root.val += sum
      sum = root.val
      traversal(root.left)
    }
  }
  traversal(root)
  return root
}
```

## 538 æŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘   

![](../images/convert-bst-to-greater-tree-17.png)


```JavaScript
var convertBST = function(root) {
  let sum = 0
  function traversal (root) {
    if (root !== null) {
      traversal(root.right)
      sum += root.val
      root.val = sum
      traversal(root.left)
    }
  }
  traversal(root)
  return root
}
```

## 700 äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢

![](../images/convert-bst-to-greater-tree-18.png)

```JavaScript
var searchBST = function(root, val) {
  function traversal (root) {
    if (root !== null) {
      if (root.val === val) {
        return root
      } else if (root.val < val) {
        return traversal(root.right)
      } else {
        return traversal(root.left)
      }
    } else {
      return root
    }
  }
  return traversal(root)
}
```

## 559 Nå‰æ ‘çš„æœ€å¤§æ·±åº¦   

![](../images/convert-bst-to-greater-tree-19.png)

```JavaScript
var maxDepth = function(root) {
  if (root === null) {
    return 0
  } else {
    let depth = 1
    function traversal (root, curDepth) {
      if (root !== null) {
        if (curDepth > depth) {
          depth = curDepth
        }
        root.children.forEach(child => traversal(child, curDepth + 1))
      }
    }
    traversal(root, 1)
    return depth
  }
}
```

## 589 Nå‰æ ‘çš„å‰åºéå†   

![](../images/convert-bst-to-greater-tree-20.png)

```JavaScript
var preorder = function(root) {
  const res = []
  function traversal (root) {
    if (root !== null) {
      res.push(root.val)
      root.children.forEach(child => traversal(child))
    }
  }
  traversal(root)
  return res
}
```

## 897 é€’å¢é¡ºåºæŸ¥æ‰¾æ ‘

![](../images/convert-bst-to-greater-tree-21.png)

```JavaScript
var increasingBST = function(root) {
  const arr = []
  function traversal (root) {
    if (root !== null) {
      traversal(root.left)
      arr.push(root.val)
      traversal(root.right)
    }
  }
  traversal(root)
  const res = new TreeNode(arr[0])
  let currentNode = res
  for (let i = 0; i < arr.length - 1; i++) {
    currentNode.left = null
    currentNode.right = new TreeNode(arr[i + 1])
    currentNode = currentNode.right
  }
  return res
}
```

åŸæ–‡åœ¨æ˜é‡‘: [https://juejin.im/post/5e1c4e46f265da3e140fa54d](https://juejin.im/post/5e1c4e46f265da3e140fa54d)

æ¬¢è¿ç‚¹èµğŸ‘ã€å…³æ³¨å’Œæ¥æ’©ä¸‰è¿ğŸ˜



## ç»Ÿè®¡ä¿¡æ¯
| é€šè¿‡æ¬¡æ•° | æäº¤æ¬¡æ•° | ACæ¯”ç‡ |
| :------: | :------: | :------: |
|    117140    |    165442    |   70.8%   |

## æäº¤å†å²
| æäº¤æ—¶é—´ | æäº¤ç»“æœ | æ‰§è¡Œæ—¶é—´ |  å†…å­˜æ¶ˆè€—  | è¯­è¨€ |
| :------: | :------: | :------: | :--------: | :--------: |
