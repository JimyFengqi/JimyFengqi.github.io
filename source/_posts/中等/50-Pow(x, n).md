---
title: '50-Pow(x, n)'
categories:
  - ä¸­ç­‰
tags:
  - é€’å½’
  - æ•°å­¦
abbrlink: 2130247093
date: 2021-12-03 23:00:38
---

> åŸæ–‡é“¾æ¥: https://leetcode-cn.com/problems/powx-n


## è‹±æ–‡åŸæ–‡
<div><p>Implement <a href="http://www.cplusplus.com/reference/valarray/pow/" target="_blank">pow(x, n)</a>, which calculates <code>x</code> raised to the power <code>n</code> (i.e., <code>x<sup>n</sup></code>).</p>

<p>&nbsp;</p>
<p><strong>Example 1:</strong></p>

<pre>
<strong>Input:</strong> x = 2.00000, n = 10
<strong>Output:</strong> 1024.00000
</pre>

<p><strong>Example 2:</strong></p>

<pre>
<strong>Input:</strong> x = 2.10000, n = 3
<strong>Output:</strong> 9.26100
</pre>

<p><strong>Example 3:</strong></p>

<pre>
<strong>Input:</strong> x = 2.00000, n = -2
<strong>Output:</strong> 0.25000
<strong>Explanation:</strong> 2<sup>-2</sup> = 1/2<sup>2</sup> = 1/4 = 0.25
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>-100.0 &lt;&nbsp;x&nbsp;&lt; 100.0</code></li>
	<li><code>-2<sup>31</sup>&nbsp;&lt;= n &lt;=&nbsp;2<sup>31</sup>-1</code></li>
	<li><code>-10<sup>4</sup> &lt;= x<sup>n</sup> &lt;= 10<sup>4</sup></code></li>
</ul>
</div>

## ä¸­æ–‡é¢˜ç›®
<div><p>å®ç°Â <a href="https://www.cplusplus.com/reference/valarray/pow/" target="_blank">pow(<em>x</em>, <em>n</em>)</a>Â ï¼Œå³è®¡ç®— x çš„ n æ¬¡å¹‚å‡½æ•°ï¼ˆå³ï¼Œx<sup><span style="font-size:10.8333px">n</span></sup>ï¼‰ã€‚</p>

<p>Â </p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>x = 2.00000, n = 10
<strong>è¾“å‡ºï¼š</strong>1024.00000
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>x = 2.10000, n = 3
<strong>è¾“å‡ºï¼š</strong>9.26100
</pre>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>x = 2.00000, n = -2
<strong>è¾“å‡ºï¼š</strong>0.25000
<strong>è§£é‡Šï¼š</strong>2<sup>-2</sup> = 1/2<sup>2</sup> = 1/4 = 0.25
</pre>

<p>Â </p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>-100.0 <Â xÂ < 100.0</code></li>
	<li><code>-2<sup>31</sup>Â <= n <=Â 2<sup>31</sup>-1</code></li>
	<li><code>-10<sup>4</sup> <= x<sup>n</sup> <= 10<sup>4</sup></code></li>
</ul>
</div>

## é€šè¿‡ä»£ç 
<RecoDemo>
</RecoDemo>


## é«˜èµé¢˜è§£
### ğŸ“ºè§†é¢‘é¢˜è§£
![50. Pow(x, n).mp4](455b3b25-2007-4d4c-85c8-844bff5f7a38)

### ğŸ“–æ–‡å­—é¢˜è§£

#### å‰è¨€

æœ¬é¢˜çš„æ–¹æ³•è¢«ç§°ä¸ºã€Œå¿«é€Ÿå¹‚ç®—æ³•ã€ï¼Œæœ‰é€’å½’å’Œè¿­ä»£ä¸¤ä¸ªç‰ˆæœ¬ã€‚è¿™ç¯‡é¢˜è§£ä¼šä»é€’å½’ç‰ˆæœ¬çš„å¼€å§‹è®²èµ·ï¼Œå†é€æ­¥å¼•å‡ºè¿­ä»£çš„ç‰ˆæœ¬ã€‚

å½“æŒ‡æ•° $n$ ä¸ºè´Ÿæ•°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®— $x^{-n}$ å†å–å€’æ•°å¾—åˆ°ç»“æœï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦è€ƒè™‘ $n$ ä¸ºè‡ªç„¶æ•°çš„æƒ…å†µã€‚

#### æ–¹æ³•ä¸€ï¼šå¿«é€Ÿå¹‚ + é€’å½’

ã€Œå¿«é€Ÿå¹‚ç®—æ³•ã€çš„æœ¬è´¨æ˜¯åˆ†æ²»ç®—æ³•ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬è¦è®¡ç®— $x^{64}$ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§ï¼š

$$
x \to x^2 \to x^4 \to x^8 \to x^{16} \to x^{32} \to x^{64}
$$

çš„é¡ºåºï¼Œä» $x$ å¼€å§‹ï¼Œæ¯æ¬¡ç›´æ¥æŠŠä¸Šä¸€æ¬¡çš„ç»“æœè¿›è¡Œå¹³æ–¹ï¼Œè®¡ç®— $6$ æ¬¡å°±å¯ä»¥å¾—åˆ° $x^{64}$ çš„å€¼ï¼Œè€Œä¸éœ€è¦å¯¹ $x$ ä¹˜ $63$ æ¬¡ $x$ã€‚

å†ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬è¦è®¡ç®— $x^{77}$ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§ï¼š

$$
x \to x^2 \to x^4 \to x^9 \to x^{19} \to x^{38} \to x^{77}
$$

çš„é¡ºåºï¼Œåœ¨ $x \to x^2$ï¼Œ$x^2 \to x^4$ï¼Œ$x^{19} \to x^{38}$ è¿™äº›æ­¥éª¤ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥æŠŠä¸Šä¸€æ¬¡çš„ç»“æœè¿›è¡Œå¹³æ–¹ï¼Œè€Œåœ¨ $x^4 \to x^9$ï¼Œ$x^9 \to x^{19}$ï¼Œ$x^{38} \to x^{77}$ è¿™äº›æ­¥éª¤ä¸­ï¼Œæˆ‘ä»¬æŠŠä¸Šä¸€æ¬¡çš„ç»“æœè¿›è¡Œå¹³æ–¹åï¼Œè¿˜è¦é¢å¤–ä¹˜ä¸€ä¸ª $x$ã€‚

ç›´æ¥ä»å·¦åˆ°å³è¿›è¡Œæ¨å¯¼çœ‹ä¸Šå»å¾ˆå›°éš¾ï¼Œå› ä¸ºåœ¨æ¯ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬ä¸çŸ¥é“åœ¨å°†ä¸Šä¸€æ¬¡çš„ç»“æœå¹³æ–¹ä¹‹åï¼Œè¿˜éœ€ä¸éœ€è¦é¢å¤–ä¹˜ $x$ã€‚ä½†å¦‚æœæˆ‘ä»¬ä»å³å¾€å·¦çœ‹ï¼Œåˆ†æ²»çš„æ€æƒ³å°±ååˆ†æ˜æ˜¾äº†ï¼š

- å½“æˆ‘ä»¬è¦è®¡ç®— $x^n$ æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆé€’å½’åœ°è®¡ç®—å‡º $y = x^{\lfloor n/2 \rfloor}$ï¼Œå…¶ä¸­ $\lfloor a \rfloor$ è¡¨ç¤ºå¯¹ $a$ è¿›è¡Œä¸‹å–æ•´ï¼›

- æ ¹æ®é€’å½’è®¡ç®—çš„ç»“æœï¼Œå¦‚æœ $n$ ä¸ºå¶æ•°ï¼Œé‚£ä¹ˆ $x^n = y^2$ï¼›å¦‚æœ $n$ ä¸ºå¥‡æ•°ï¼Œé‚£ä¹ˆ $x^n = y^2 \times x$ï¼›

- é€’å½’çš„è¾¹ç•Œä¸º $n = 0$ï¼Œä»»æ„æ•°çš„ $0$ æ¬¡æ–¹å‡ä¸º $1$ã€‚

ç”±äºæ¯æ¬¡é€’å½’éƒ½ä¼šä½¿å¾—æŒ‡æ•°å‡å°‘ä¸€åŠï¼Œå› æ­¤é€’å½’çš„å±‚æ•°ä¸º $O(\log n)$ï¼Œç®—æ³•å¯ä»¥åœ¨å¾ˆå¿«çš„æ—¶é—´å†…å¾—åˆ°ç»“æœã€‚

```C++ [sol1-C++]
class Solution {
public:
    double quickMul(double x, long long N) {
        if (N == 0) {
            return 1.0;
        }
        double y = quickMul(x, N / 2);
        return N % 2 == 0 ? y * y : y * y * x;
    }

    double myPow(double x, int n) {
        long long N = n;
        return N >= 0 ? quickMul(x, N) : 1.0 / quickMul(x, -N);
    }
};
```

```Java [sol1-Java]
class Solution {
    public double myPow(double x, int n) {
        long N = n;
        return N >= 0 ? quickMul(x, N) : 1.0 / quickMul(x, -N);
    }

    public double quickMul(double x, long N) {
        if (N == 0) {
            return 1.0;
        }
        double y = quickMul(x, N / 2);
        return N % 2 == 0 ? y * y : y * y * x;
    }
}
```

```Python [sol1-Python3]
class Solution:
    def myPow(self, x: float, n: int) -> float:
        def quickMul(N):
            if N == 0:
                return 1.0
            y = quickMul(N // 2)
            return y * y if N % 2 == 0 else y * y * x
        
        return quickMul(n) if n >= 0 else 1.0 / quickMul(-n)
```

```golang [sol1-Golang]
func myPow(x float64, n int) float64 {
    if n >= 0 {
        return quickMul(x, n)
    }
    return 1.0 / quickMul(x, -n)
}

func quickMul(x float64, n int) float64 {
    if n == 0 {
        return 1
    }
    y := quickMul(x, n/2)
    if n%2 == 0 {
        return y * y
    }
    return y * y * x
}
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(\log n)$ï¼Œå³ä¸ºé€’å½’çš„å±‚æ•°ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š$O(\log n)$ï¼Œå³ä¸ºé€’å½’çš„å±‚æ•°ã€‚è¿™æ˜¯ç”±äºé€’å½’çš„å‡½æ•°è°ƒç”¨ä¼šä½¿ç”¨æ ˆç©ºé—´ã€‚

#### æ–¹æ³•äºŒï¼šå¿«é€Ÿå¹‚ + è¿­ä»£

ç”±äºé€’å½’éœ€è¦ä½¿ç”¨é¢å¤–çš„æ ˆç©ºé—´ï¼Œæˆ‘ä»¬è¯•ç€å°†é€’å½’è½¬å†™ä¸ºè¿­ä»£ã€‚åœ¨æ–¹æ³•ä¸€ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿæåˆ°è¿‡ï¼Œä»å·¦åˆ°å³è¿›è¡Œæ¨å¯¼æ˜¯ä¸å®¹æ˜“çš„ï¼Œå› ä¸ºæˆ‘ä»¬ä¸çŸ¥é“æ˜¯å¦éœ€è¦é¢å¤–ä¹˜ $x$ã€‚ä½†æˆ‘ä»¬ä¸å¦¨æ‰¾ä¸€æ‰¾è§„å¾‹ï¼Œçœ‹çœ‹å“ªäº›åœ°æ–¹é¢å¤–ä¹˜äº† $x$ï¼Œå¹¶ä¸”å®ƒä»¬å¯¹ç­”æ¡ˆäº§ç”Ÿäº†ä»€ä¹ˆå½±å“ã€‚

æˆ‘ä»¬è¿˜æ˜¯ä»¥ $x^{77}$ ä½œä¸ºä¾‹å­ï¼š

$$
x \to x^2 \to x^4 \to^+ x^9 \to^+ x^{19} \to x^{38} \to^+ x^{77}
$$

å¹¶ä¸”æŠŠéœ€è¦é¢å¤–ä¹˜ $x$ çš„æ­¥éª¤æ‰“ä¸Šäº† $+$ æ ‡è®°ã€‚å¯ä»¥å‘ç°ï¼š

- $x^{38} \to^+ x^{77}$ ä¸­é¢å¤–ä¹˜çš„ $x$ åœ¨ $x^{77}$ ä¸­è´¡çŒ®äº† $x$ï¼›

- $x^9 \to^+ x^{19}$ ä¸­é¢å¤–ä¹˜çš„ $x$ åœ¨ä¹‹åè¢«å¹³æ–¹äº† $2$ æ¬¡ï¼Œå› æ­¤åœ¨ $x^{77}$ ä¸­è´¡çŒ®äº† $x^{2^2} = x^4$ï¼›

- $x^4 \to^+ x^9$ ä¸­é¢å¤–ä¹˜çš„ $x$ åœ¨ä¹‹åè¢«å¹³æ–¹äº† $3$ æ¬¡ï¼Œå› æ­¤åœ¨ $x^{77}$ ä¸­è´¡çŒ®äº† $x^{2^3} = x^8$ï¼›

- æœ€åˆçš„ $x$ åœ¨ä¹‹åè¢«å¹³æ–¹äº† $6$ æ¬¡ï¼Œå› æ­¤åœ¨ $x^{77}$ ä¸­è´¡çŒ®äº† $x^{2^6} = x^{64}$ã€‚

æˆ‘ä»¬æŠŠè¿™äº›è´¡çŒ®ç›¸ä¹˜ï¼Œ$x \times x^4 \times x^8 \times x^{64}$ æ°å¥½ç­‰äº $x^{77}$ã€‚è€Œè¿™äº›è´¡çŒ®çš„æŒ‡æ•°éƒ¨åˆ†åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå®ƒä»¬éƒ½æ˜¯ $2$ çš„å¹‚æ¬¡ï¼Œè¿™æ˜¯å› ä¸ºæ¯ä¸ªé¢å¤–ä¹˜çš„ $x$ åœ¨ä¹‹åéƒ½ä¼šè¢«å¹³æ–¹è‹¥å¹²æ¬¡ã€‚è€Œè¿™äº›æŒ‡æ•° $1$ï¼Œ$4$ï¼Œ$8$ å’Œ $64$ï¼Œ**æ°å¥½å°±å¯¹åº”äº† $77$ çš„äºŒè¿›åˆ¶è¡¨ç¤º $(1001101)_2$ ä¸­çš„æ¯ä¸ª $1$**ï¼

å› æ­¤æˆ‘ä»¬å€ŸåŠ©æ•´æ•°çš„äºŒè¿›åˆ¶æ‹†åˆ†ï¼Œå°±å¯ä»¥å¾—åˆ°è¿­ä»£è®¡ç®—çš„æ–¹æ³•ï¼Œä¸€èˆ¬åœ°ï¼Œå¦‚æœæ•´æ•° $n$ çš„äºŒè¿›åˆ¶æ‹†åˆ†ä¸º

$$
n = 2^{i_0} + 2^{i_1} + \cdots + 2^{i_k}
$$

é‚£ä¹ˆ

$$
x^n = x^{2^{i_0}} \times x^{2^{i_1}} \times \cdots \times x^{2^{i_k}}
$$

è¿™æ ·ä»¥æ¥ï¼Œæˆ‘ä»¬ä» $x$ å¼€å§‹ä¸æ–­åœ°è¿›è¡Œå¹³æ–¹ï¼Œå¾—åˆ° $x^2, x^4, x^8, x^{16}, \cdots$ï¼Œå¦‚æœ $n$ çš„ç¬¬ $k$ ä¸ªï¼ˆä»å³å¾€å·¦ï¼Œä» $0$ å¼€å§‹è®¡æ•°ï¼‰äºŒè¿›åˆ¶ä½ä¸º $1$ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å°†å¯¹åº”çš„è´¡çŒ® $x^{2^k}$è®¡å…¥ç­”æ¡ˆã€‚

ä¸‹é¢çš„ä»£ç ç»™å‡ºäº†è¯¦ç»†çš„æ³¨é‡Šã€‚

```C++ [sol2-C++]
class Solution {
public:
    double quickMul(double x, long long N) {
        double ans = 1.0;
        // è´¡çŒ®çš„åˆå§‹å€¼ä¸º x
        double x_contribute = x;
        // åœ¨å¯¹ N è¿›è¡ŒäºŒè¿›åˆ¶æ‹†åˆ†çš„åŒæ—¶è®¡ç®—ç­”æ¡ˆ
        while (N > 0) {
            if (N % 2 == 1) {
                // å¦‚æœ N äºŒè¿›åˆ¶è¡¨ç¤ºçš„æœ€ä½ä½ä¸º 1ï¼Œé‚£ä¹ˆéœ€è¦è®¡å…¥è´¡çŒ®
                ans *= x_contribute;
            }
            // å°†è´¡çŒ®ä¸æ–­åœ°å¹³æ–¹
            x_contribute *= x_contribute;
            // èˆå¼ƒ N äºŒè¿›åˆ¶è¡¨ç¤ºçš„æœ€ä½ä½ï¼Œè¿™æ ·æˆ‘ä»¬æ¯æ¬¡åªè¦åˆ¤æ–­æœ€ä½ä½å³å¯
            N /= 2;
        }
        return ans;
    }

    double myPow(double x, int n) {
        long long N = n;
        return N >= 0 ? quickMul(x, N) : 1.0 / quickMul(x, -N);
    }
};
```

```Java [sol2-Java]
class Solution {
    public double myPow(double x, int n) {
        long N = n;
        return N >= 0 ? quickMul(x, N) : 1.0 / quickMul(x, -N);
    }

    public double quickMul(double x, long N) {
        double ans = 1.0;
        // è´¡çŒ®çš„åˆå§‹å€¼ä¸º x
        double x_contribute = x;
        // åœ¨å¯¹ N è¿›è¡ŒäºŒè¿›åˆ¶æ‹†åˆ†çš„åŒæ—¶è®¡ç®—ç­”æ¡ˆ
        while (N > 0) {
            if (N % 2 == 1) {
                // å¦‚æœ N äºŒè¿›åˆ¶è¡¨ç¤ºçš„æœ€ä½ä½ä¸º 1ï¼Œé‚£ä¹ˆéœ€è¦è®¡å…¥è´¡çŒ®
                ans *= x_contribute;
            }
            // å°†è´¡çŒ®ä¸æ–­åœ°å¹³æ–¹
            x_contribute *= x_contribute;
            // èˆå¼ƒ N äºŒè¿›åˆ¶è¡¨ç¤ºçš„æœ€ä½ä½ï¼Œè¿™æ ·æˆ‘ä»¬æ¯æ¬¡åªè¦åˆ¤æ–­æœ€ä½ä½å³å¯
            N /= 2;
        }
        return ans;
    }
}
```

```Python [sol2-Python3]
class Solution:
    def myPow(self, x: float, n: int) -> float:
        def quickMul(N):
            ans = 1.0
            # è´¡çŒ®çš„åˆå§‹å€¼ä¸º x
            x_contribute = x
            # åœ¨å¯¹ N è¿›è¡ŒäºŒè¿›åˆ¶æ‹†åˆ†çš„åŒæ—¶è®¡ç®—ç­”æ¡ˆ
            while N > 0:
                if N % 2 == 1:
                    # å¦‚æœ N äºŒè¿›åˆ¶è¡¨ç¤ºçš„æœ€ä½ä½ä¸º 1ï¼Œé‚£ä¹ˆéœ€è¦è®¡å…¥è´¡çŒ®
                    ans *= x_contribute
                # å°†è´¡çŒ®ä¸æ–­åœ°å¹³æ–¹
                x_contribute *= x_contribute
                # èˆå¼ƒ N äºŒè¿›åˆ¶è¡¨ç¤ºçš„æœ€ä½ä½ï¼Œè¿™æ ·æˆ‘ä»¬æ¯æ¬¡åªè¦åˆ¤æ–­æœ€ä½ä½å³å¯
                N //= 2
            return ans
        
        return quickMul(n) if n >= 0 else 1.0 / quickMul(-n)
```

```golang [sol2-Golang]
func myPow(x float64, n int) float64 {
    if n >= 0 {
        return quickMul(x, n)
    }
    return 1.0 / quickMul(x, -n)
}

func quickMul(x float64, N int) float64 {
    ans := 1.0
    // è´¡çŒ®çš„åˆå§‹å€¼ä¸º x
    x_contribute := x
    // åœ¨å¯¹ N è¿›è¡ŒäºŒè¿›åˆ¶æ‹†åˆ†çš„åŒæ—¶è®¡ç®—ç­”æ¡ˆ
    for N > 0 {
        if N % 2 == 1 {
            // å¦‚æœ N äºŒè¿›åˆ¶è¡¨ç¤ºçš„æœ€ä½ä½ä¸º 1ï¼Œé‚£ä¹ˆéœ€è¦è®¡å…¥è´¡çŒ®
            ans *= x_contribute
        }
        // å°†è´¡çŒ®ä¸æ–­åœ°å¹³æ–¹
        x_contribute *= x_contribute
        // èˆå¼ƒ N äºŒè¿›åˆ¶è¡¨ç¤ºçš„æœ€ä½ä½ï¼Œè¿™æ ·æˆ‘ä»¬æ¯æ¬¡åªè¦åˆ¤æ–­æœ€ä½ä½å³å¯
        N /= 2
    }
    return ans
}
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(\log n)$ï¼Œå³ä¸ºå¯¹ $n$ è¿›è¡ŒäºŒè¿›åˆ¶æ‹†åˆ†çš„æ—¶é—´å¤æ‚åº¦ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ã€‚

## ç»Ÿè®¡ä¿¡æ¯
| é€šè¿‡æ¬¡æ•° | æäº¤æ¬¡æ•° | ACæ¯”ç‡ |
| :------: | :------: | :------: |
|    233309    |    620673    |   37.6%   |

## æäº¤å†å²
| æäº¤æ—¶é—´ | æäº¤ç»“æœ | æ‰§è¡Œæ—¶é—´ |  å†…å­˜æ¶ˆè€—  | è¯­è¨€ |
| :------: | :------: | :------: | :--------: | :--------: |


## ç›¸ä¼¼é¢˜ç›®
|                             é¢˜ç›®                             | éš¾åº¦ |
| :----------------------------------------------------------: | :---------: |
| [Sqrt(x)](https://leetcode-cn.com/problems/sqrtx/) | ç®€å•|
| [è¶…çº§æ¬¡æ–¹](https://leetcode-cn.com/problems/super-pow/) | ä¸­ç­‰|
