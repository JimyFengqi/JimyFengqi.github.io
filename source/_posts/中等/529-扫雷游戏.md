---
title: 529-æ‰«é›·æ¸¸æˆ(Minesweeper)
categories:
  - ä¸­ç­‰
tags:
  - æ·±åº¦ä¼˜å…ˆæœç´¢
  - å¹¿åº¦ä¼˜å…ˆæœç´¢
  - æ•°ç»„
  - çŸ©é˜µ
abbrlink: 753981197
date: 2021-12-03 22:43:20
---

> åŸæ–‡é“¾æ¥: https://leetcode-cn.com/problems/minesweeper


## è‹±æ–‡åŸæ–‡
<div><p>Let&#39;s play the minesweeper game (<a href="https://en.wikipedia.org/wiki/Minesweeper_(video_game)" target="_blank">Wikipedia</a>, <a href="http://minesweeperonline.com" target="_blank">online game</a>)!</p>

<p>You are given an <code>m x n</code> char matrix <code>board</code> representing the game board where:</p>

<ul>
	<li><code>&#39;M&#39;</code> represents an unrevealed mine,</li>
	<li><code>&#39;E&#39;</code> represents an unrevealed empty square,</li>
	<li><code>&#39;B&#39;</code> represents a revealed blank square that has no adjacent mines (i.e., above, below, left, right, and all 4 diagonals),</li>
	<li>digit (<code>&#39;1&#39;</code> to <code>&#39;8&#39;</code>) represents how many mines are adjacent to this revealed square, and</li>
	<li><code>&#39;X&#39;</code> represents a revealed mine.</li>
</ul>

<p>You are also given an integer array <code>click</code> where <code>click = [click<sub>r</sub>, click<sub>c</sub>]</code> represents the next click position among all the unrevealed squares (<code>&#39;M&#39;</code> or <code>&#39;E&#39;</code>).</p>

<p>Return <em>the board after revealing this position according to the following rules</em>:</p>

<ol>
	<li>If a mine <code>&#39;M&#39;</code> is revealed, then the game is over. You should change it to <code>&#39;X&#39;</code>.</li>
	<li>If an empty square <code>&#39;E&#39;</code> with no adjacent mines is revealed, then change it to a revealed blank <code>&#39;B&#39;</code> and all of its adjacent unrevealed squares should be revealed recursively.</li>
	<li>If an empty square <code>&#39;E&#39;</code> with at least one adjacent mine is revealed, then change it to a digit (<code>&#39;1&#39;</code> to <code>&#39;8&#39;</code>) representing the number of adjacent mines.</li>
	<li>Return the board when no more squares will be revealed.</li>
</ol>

<p>&nbsp;</p>
<p><strong>Example 1:</strong></p>
<img src="https://assets.leetcode.com/uploads/2018/10/12/minesweeper_example_1.png" style="width: 500px; max-width: 400px; height: 269px;" />
<pre>
<strong>Input:</strong> board = [[&quot;E&quot;,&quot;E&quot;,&quot;E&quot;,&quot;E&quot;,&quot;E&quot;],[&quot;E&quot;,&quot;E&quot;,&quot;M&quot;,&quot;E&quot;,&quot;E&quot;],[&quot;E&quot;,&quot;E&quot;,&quot;E&quot;,&quot;E&quot;,&quot;E&quot;],[&quot;E&quot;,&quot;E&quot;,&quot;E&quot;,&quot;E&quot;,&quot;E&quot;]], click = [3,0]
<strong>Output:</strong> [[&quot;B&quot;,&quot;1&quot;,&quot;E&quot;,&quot;1&quot;,&quot;B&quot;],[&quot;B&quot;,&quot;1&quot;,&quot;M&quot;,&quot;1&quot;,&quot;B&quot;],[&quot;B&quot;,&quot;1&quot;,&quot;1&quot;,&quot;1&quot;,&quot;B&quot;],[&quot;B&quot;,&quot;B&quot;,&quot;B&quot;,&quot;B&quot;,&quot;B&quot;]]
</pre>

<p><strong>Example 2:</strong></p>
<img src="https://assets.leetcode.com/uploads/2018/10/12/minesweeper_example_2.png" style="width: 500px; max-width: 400px; height: 275px;" />
<pre>
<strong>Input:</strong> board = [[&quot;B&quot;,&quot;1&quot;,&quot;E&quot;,&quot;1&quot;,&quot;B&quot;],[&quot;B&quot;,&quot;1&quot;,&quot;M&quot;,&quot;1&quot;,&quot;B&quot;],[&quot;B&quot;,&quot;1&quot;,&quot;1&quot;,&quot;1&quot;,&quot;B&quot;],[&quot;B&quot;,&quot;B&quot;,&quot;B&quot;,&quot;B&quot;,&quot;B&quot;]], click = [1,2]
<strong>Output:</strong> [[&quot;B&quot;,&quot;1&quot;,&quot;E&quot;,&quot;1&quot;,&quot;B&quot;],[&quot;B&quot;,&quot;1&quot;,&quot;X&quot;,&quot;1&quot;,&quot;B&quot;],[&quot;B&quot;,&quot;1&quot;,&quot;1&quot;,&quot;1&quot;,&quot;B&quot;],[&quot;B&quot;,&quot;B&quot;,&quot;B&quot;,&quot;B&quot;,&quot;B&quot;]]
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>m == board.length</code></li>
	<li><code>n == board[i].length</code></li>
	<li><code>1 &lt;= m, n &lt;= 50</code></li>
	<li><code>board[i][j]</code> is either <code>&#39;M&#39;</code>, <code>&#39;E&#39;</code>, <code>&#39;B&#39;</code>, or a digit from <code>&#39;1&#39;</code> to <code>&#39;8&#39;</code>.</li>
	<li><code>click.length == 2</code></li>
	<li><code>0 &lt;= click<sub>r</sub> &lt; m</code></li>
	<li><code>0 &lt;= click<sub>c</sub> &lt; n</code></li>
	<li><code>board[click<sub>r</sub>][click<sub>c</sub>]</code> is either <code>&#39;M&#39;</code> or <code>&#39;E&#39;</code>.</li>
</ul>
</div>

## ä¸­æ–‡é¢˜ç›®
<div><p>è®©æˆ‘ä»¬ä¸€èµ·æ¥ç©æ‰«é›·æ¸¸æˆï¼</p>

<p>ç»™ä½ ä¸€ä¸ªå¤§å°ä¸º <code>m x n</code> äºŒç»´å­—ç¬¦çŸ©é˜µ&nbsp;<code>board</code> ï¼Œè¡¨ç¤ºæ‰«é›·æ¸¸æˆçš„ç›˜é¢ï¼Œå…¶ä¸­ï¼š</p>

<ul>
	<li><code>'M'</code>&nbsp;ä»£è¡¨ä¸€ä¸ª <strong>æœªæŒ–å‡ºçš„</strong> åœ°é›·ï¼Œ</li>
	<li><code>'E'</code>&nbsp;ä»£è¡¨ä¸€ä¸ª<strong> æœªæŒ–å‡ºçš„ </strong>ç©ºæ–¹å—ï¼Œ</li>
	<li><code>'B'</code><strong>&nbsp;</strong>ä»£è¡¨æ²¡æœ‰ç›¸é‚»ï¼ˆä¸Šï¼Œä¸‹ï¼Œå·¦ï¼Œå³ï¼Œå’Œæ‰€æœ‰4ä¸ªå¯¹è§’çº¿ï¼‰åœ°é›·çš„<strong> å·²æŒ–å‡ºçš„ </strong>ç©ºç™½æ–¹å—ï¼Œ</li>
	<li><strong>æ•°å­—</strong>ï¼ˆ<code>'1'</code> åˆ° <code>'8'</code>ï¼‰è¡¨ç¤ºæœ‰å¤šå°‘åœ°é›·ä¸è¿™å—<strong> å·²æŒ–å‡ºçš„</strong> æ–¹å—ç›¸é‚»ï¼Œ</li>
	<li><code>'X'</code>&nbsp;åˆ™è¡¨ç¤ºä¸€ä¸ª<strong> å·²æŒ–å‡ºçš„</strong> åœ°é›·ã€‚</li>
</ul>

<p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>click</code> ï¼Œå…¶ä¸­ <code>click = [click<sub>r</sub>, click<sub>c</sub>]</code> è¡¨ç¤ºåœ¨æ‰€æœ‰<strong> æœªæŒ–å‡ºçš„ </strong>æ–¹å—ï¼ˆ<code>'M'</code> æˆ–è€… <code>'E'</code>ï¼‰ä¸­çš„ä¸‹ä¸€ä¸ªç‚¹å‡»ä½ç½®ï¼ˆ<code>click<sub>r</sub></code> æ˜¯è¡Œä¸‹æ ‡ï¼Œ<code>click<sub>c</sub></code> æ˜¯åˆ—ä¸‹æ ‡ï¼‰ã€‚</p>

<p>æ ¹æ®ä»¥ä¸‹è§„åˆ™ï¼Œè¿”å›ç›¸åº”ä½ç½®è¢«ç‚¹å‡»åå¯¹åº”çš„ç›˜é¢ï¼š</p>

<ol>
	<li>å¦‚æœä¸€ä¸ªåœ°é›·ï¼ˆ<code>'M'</code>ï¼‰è¢«æŒ–å‡ºï¼Œæ¸¸æˆå°±ç»“æŸäº†- æŠŠå®ƒæ”¹ä¸º&nbsp;<code>'X'</code> ã€‚</li>
	<li>å¦‚æœä¸€ä¸ª<strong> æ²¡æœ‰ç›¸é‚»åœ°é›· </strong>çš„ç©ºæ–¹å—ï¼ˆ<code>'E'</code>ï¼‰è¢«æŒ–å‡ºï¼Œä¿®æ”¹å®ƒä¸ºï¼ˆ<code>'B'</code>ï¼‰ï¼Œå¹¶ä¸”æ‰€æœ‰å’Œå…¶ç›¸é‚»çš„<strong> æœªæŒ–å‡º </strong>æ–¹å—éƒ½åº”è¯¥è¢«é€’å½’åœ°æ­éœ²ã€‚</li>
	<li>å¦‚æœä¸€ä¸ª<strong> è‡³å°‘ä¸ä¸€ä¸ªåœ°é›·ç›¸é‚»</strong> çš„ç©ºæ–¹å—ï¼ˆ<code>'E'</code>ï¼‰è¢«æŒ–å‡ºï¼Œä¿®æ”¹å®ƒä¸ºæ•°å­—ï¼ˆ<code>'1'</code> åˆ° <code>'8'</code> ï¼‰ï¼Œè¡¨ç¤ºç›¸é‚»åœ°é›·çš„æ•°é‡ã€‚</li>
	<li>å¦‚æœåœ¨æ­¤æ¬¡ç‚¹å‡»ä¸­ï¼Œè‹¥æ— æ›´å¤šæ–¹å—å¯è¢«æ­éœ²ï¼Œåˆ™è¿”å›ç›˜é¢ã€‚</li>
</ol>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<img src="https://assets.leetcode.com/uploads/2018/10/12/minesweeper_example_1.png" style="width: 500px; max-width: 400px; height: 269px;" />
<pre>
<strong>è¾“å…¥ï¼š</strong>board = [["E","E","E","E","E"],["E","E","M","E","E"],["E","E","E","E","E"],["E","E","E","E","E"]], click = [3,0]
<strong>è¾“å‡ºï¼š</strong>[["B","1","E","1","B"],["B","1","M","1","B"],["B","1","1","1","B"],["B","B","B","B","B"]]
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<img src="https://assets.leetcode.com/uploads/2018/10/12/minesweeper_example_2.png" style="width: 500px; max-width: 400px; height: 275px;" />
<pre>
<strong>è¾“å…¥ï¼š</strong>board = [["B","1","E","1","B"],["B","1","M","1","B"],["B","1","1","1","B"],["B","B","B","B","B"]], click = [1,2]
<strong>è¾“å‡ºï¼š</strong>[["B","1","E","1","B"],["B","1","X","1","B"],["B","1","1","1","B"],["B","B","B","B","B"]]
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>m == board.length</code></li>
	<li><code>n == board[i].length</code></li>
	<li><code>1 &lt;= m, n &lt;= 50</code></li>
	<li><code>board[i][j]</code> ä¸º <code>'M'</code>ã€<code>'E'</code>ã€<code>'B'</code> æˆ–æ•°å­— <code>'1'</code> åˆ° <code>'8'</code> ä¸­çš„ä¸€ä¸ª</li>
	<li><code>click.length == 2</code></li>
	<li><code>0 &lt;= click<sub>r</sub> &lt; m</code></li>
	<li><code>0 &lt;= click<sub>c</sub> &lt; n</code></li>
	<li><code>board[click<sub>r</sub>][click<sub>c</sub>]</code> ä¸º <code>'M'</code> æˆ– <code>'E'</code></li>
</ul>
</div>

## é€šè¿‡ä»£ç 
<RecoDemo>
</RecoDemo>


## é«˜èµé¢˜è§£
ğŸ™‹ ä»Šæ—¥æ‰“å¡ï¼
### ä¸€ã€é¢˜ç›®åˆ†æ

ç»™å®šåˆå§‹äºŒç»´æ•°ç»„å’Œèµ·ç‚¹ï¼Œè¿”å›ä¿®æ”¹åçš„äºŒç»´æ•°ç»„ã€‚
* è‹¥èµ·ç‚¹å¤„æ˜¯é›·ï¼Œå³ â€˜Mâ€™ï¼Œç›´æ¥å°†å…¶ä¿®æ”¹ä¸º 'X'ï¼Œæ¸¸æˆç»“æŸï¼›
* è‹¥èµ·ç‚¹å¤„æ˜¯ç©ºï¼Œå³ â€˜Eâ€™ï¼Œåˆ™ä»èµ·ç‚¹å¼€å§‹å‘ 8 é‚»åŸŸä¸­çš„ç©ºåœ°æœç´¢ï¼Œç›´åˆ°åˆ°è¾¾é‚»æ¥ğŸ’¥çš„ç©ºåœ°åœæ­¢ã€‚
    - å’ŒäºŒå‰æ ‘ä»æ ¹ç»“ç‚¹å¼€å§‹æœç´¢ï¼Œç›´åˆ°è¾¾åˆ°å¶å­èŠ‚ç‚¹åœæ­¢ï¼Œæ˜¯å‡ ä¹ä¸€æ ·çš„ï¼Œæ‰€ä»¥ä¼šå†™äºŒå‰æ ‘çš„ BFS/DFSï¼Œé‚£ä¹ˆè¿™é¢˜ä¹Ÿå°±å†™å‡ºæ¥äº†ã€‚


### äºŒã€ä»£ç å®ç°

##### DFS ä»£ç 
``` Java
class Solution {
    // å®šä¹‰ 8 ä¸ªæ–¹å‘
    int[] dx = {-1, 1, 0, 0, -1, 1, -1, 1};
    int[] dy = {0, 0, -1, 1, -1, 1, 1, -1};

    public char[][] updateBoard(char[][] board, int[] click) {
        int x = click[0], y = click[1];
        // 1. è‹¥èµ·ç‚¹æ˜¯é›·ï¼Œæ¸¸æˆç»“æŸï¼Œç›´æ¥ä¿®æ”¹ board å¹¶è¿”å›ã€‚
        if (board[x][y] == 'M') {
            board[x][y] = 'X';
        } else { // 2. è‹¥èµ·ç‚¹æ˜¯ç©ºåœ°ï¼Œåˆ™ä»èµ·ç‚¹å¼€å§‹å‘ 8 é‚»åŸŸçš„ç©ºåœ°è¿›è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢ã€‚
            dfs(board, x, y);
        }
        return board;
    }

    private void dfs(char[][] board, int i, int j) {
        // é€’å½’ç»ˆæ­¢æ¡ä»¶ï¼šåˆ¤æ–­ç©ºåœ° (i, j) å‘¨å›´æ˜¯å¦æœ‰é›·ï¼Œè‹¥æœ‰ï¼Œåˆ™å°†è¯¥ä½ç½®ä¿®æ”¹ä¸ºé›·æ•°ï¼Œç»ˆæ­¢è¯¥è·¯å¾„çš„æœç´¢ã€‚
        int cnt = 0;
        for (int k = 0; k < 8; k++) {
            int x = i + dx[k];
            int y = j + dy[k];
            if (x < 0 || x >= board.length || y < 0 || y >= board[0].length) {
                continue;
            }
            if (board[x][y] == 'M') {
                cnt++;
            }
        }
        if (cnt > 0) {
            board[i][j] =  (char)(cnt + '0');
            return;
        } 

        // è‹¥ç©ºåœ° (i, j) å‘¨å›´æ²¡æœ‰é›·ï¼Œåˆ™å°†è¯¥ä½ç½®ä¿®æ”¹ä¸º â€˜Bâ€™ï¼Œå‘ 8 é‚»åŸŸçš„ç©ºåœ°ç»§ç»­æœç´¢ã€‚
        board[i][j] = 'B';
        for (int k = 0; k < 8; k++) {
            int x = i + dx[k];
            int y = j + dy[k];
            if (x < 0 || x >= board.length || y < 0 || y >= board[0].length || board[x][y] != 'E') {
                continue;
            }
            dfs(board, x, y);
        }  
    }
}
```

##### BFS ä»£ç 
è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œä¸æ ‘çš„ BFS ä¸ä¸€æ ·ï¼ˆæ¯ä¸ªèŠ‚ç‚¹åªæœ‰ä¸€ä¸ªçˆ¶äº²èŠ‚ç‚¹ï¼‰ï¼Œæœ¬é¢˜å›¾ä¸­çš„ç‚¹ä¼šç”±å¤šä¸ªç‚¹è¾¾åˆ°ï¼Œå› æ­¤éœ€è¦åŠ ä¸Š boolean[][] visited æ•°ç»„è®°å½•è®¿é—®æ ‡å¿—ï¼Œé˜²æ­¢æ¯ä¸ªç‚¹é‡å¤å…¥é˜Ÿè€Œè¶…æ—¶ã€‚
``` Java
class Solution {
    // å®šä¹‰ 8 ä¸ªæ–¹å‘
    int[] dx = {-1, 1, 0, 0, -1, 1, -1, 1};
    int[] dy = {0, 0, -1, 1, -1, 1, 1, -1};

    public char[][] updateBoard(char[][] board, int[] click) {
        // 1. è‹¥èµ·ç‚¹æ˜¯é›·ï¼Œæ¸¸æˆç»“æŸï¼Œç›´æ¥ä¿®æ”¹ board å¹¶è¿”å›ã€‚
        int x = click[0], y = click[1];
        if (board[x][y] == 'M') {
            board[x][y] = 'X';
            return board;
        } 

        // 2. è‹¥èµ·ç‚¹æ˜¯ç©ºåœ°ï¼Œåˆ™å°†èµ·ç‚¹å…¥é˜Ÿï¼Œä»èµ·ç‚¹å¼€å§‹å‘ 8 é‚»åŸŸçš„ç©ºåœ°è¿›è¡Œå®½åº¦ä¼˜å…ˆæœç´¢ã€‚
        int m = board.length, n = board[0].length;
        boolean[][] visited = new boolean[m][n];
        visited[x][y] = true;
        Queue<int[]> queue = new LinkedList<>();
        queue.offer(new int[] {x, y});
        while (!queue.isEmpty()) {
            int[] point = queue.poll();
            int i = point[0], j = point[1];
            // åˆ¤æ–­ç©ºåœ° (i, j) å‘¨å›´æ˜¯å¦æœ‰é›·
            int cnt = 0;
            for (int k = 0; k < 8; k++) {
                int newX = i + dx[k];
                int newY = j + dy[k];
                if (newX < 0 || newX >= board.length || newY < 0 || newY >= board[0].length) {
                    continue;
                }
                if (board[newX][newY] == 'M') {
                    cnt++;
                }
            }
            // è‹¥ç©ºåœ° (i, j) å‘¨å›´æœ‰é›·ï¼Œåˆ™å°†è¯¥ä½ç½®ä¿®æ”¹ä¸ºé›·æ•°ï¼›å¦åˆ™å°†è¯¥ä½ç½®æ›´æ–°ä¸º â€˜Bâ€™ï¼Œå¹¶å°†å…¶ 8 é‚»åŸŸä¸­çš„ç©ºåœ°å…¥é˜Ÿï¼Œç»§ç»­è¿›è¡Œ bfs æœç´¢ã€‚
            if (cnt > 0) {
                board[i][j] = (char)(cnt + '0');
            } else {
                board[i][j] = 'B';
                for (int k = 0; k < 8; k++) {
                    int newX = i + dx[k];
                    int newY = j + dy[k];
                    if (newX < 0 || newX >= board.length || newY < 0 || newY >= board[0].length 
                        || board[newX][newY] != 'E' || visited[newX][newY]) {
                        continue;
                    }
                    visited[newX][newY] = true;
                    queue.offer(new int[] {newX, newY});
                }
            }
        }
        return board;
    }
}
```

## ç»Ÿè®¡ä¿¡æ¯
| é€šè¿‡æ¬¡æ•° | æäº¤æ¬¡æ•° | ACæ¯”ç‡ |
| :------: | :------: | :------: |
|    40793    |    63409    |   64.3%   |

## æäº¤å†å²
| æäº¤æ—¶é—´ | æäº¤ç»“æœ | æ‰§è¡Œæ—¶é—´ |  å†…å­˜æ¶ˆè€—  | è¯­è¨€ |
| :------: | :------: | :------: | :--------: | :--------: |
