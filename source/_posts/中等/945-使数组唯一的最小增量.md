---
title: 945-ä½¿æ•°ç»„å”¯ä¸€çš„æœ€å°å¢é‡(Minimum Increment to Make Array Unique)
categories:
  - ä¸­ç­‰
tags:
  - è´ªå¿ƒ
  - æ•°ç»„
  - è®¡æ•°
  - æ’åº
abbrlink: 539827032
date: 2021-12-03 22:28:26
---

> åŸæ–‡é“¾æ¥: https://leetcode-cn.com/problems/minimum-increment-to-make-array-unique


## è‹±æ–‡åŸæ–‡
<div><p>You are given an integer array <code>nums</code>. In one move, you can pick an index <code>i</code> where <code>0 &lt;= i &lt; nums.length</code> and increment <code>nums[i]</code> by <code>1</code>.</p>

<p>Return <em>the minimum number of moves to make every value in </em><code>nums</code><em> <strong>unique</strong></em>.</p>

<p>&nbsp;</p>
<p><strong>Example 1:</strong></p>

<pre>
<strong>Input:</strong> nums = [1,2,2]
<strong>Output:</strong> 1
<strong>Explanation:</strong> After 1 move, the array could be [1, 2, 3].
</pre>

<p><strong>Example 2:</strong></p>

<pre>
<strong>Input:</strong> nums = [3,2,1,2,1,7]
<strong>Output:</strong> 6
<strong>Explanation:</strong> After 6 moves, the array could be [3, 4, 1, 2, 5, 7].
It can be shown with 5 or less moves that it is impossible for the array to have all unique values.
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= nums.length &lt;= 10<sup>5</sup></code></li>
	<li><code>0 &lt;= nums[i] &lt;= 10<sup>5</sup></code></li>
</ul>
</div>

## ä¸­æ–‡é¢˜ç›®
<div><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> ã€‚æ¯æ¬¡ move æ“ä½œå°†ä¼šé€‰æ‹©ä»»æ„ä¸€ä¸ªæ»¡è¶³ <code>0 &lt;= i &lt; nums.length</code> çš„ä¸‹æ ‡ <code>i</code>ï¼Œå¹¶å°†&nbsp;<code>nums[i]</code> é€’å¢&nbsp;<code>1</code>ã€‚</p>

<p>è¿”å›ä½¿ <code>nums</code> ä¸­çš„æ¯ä¸ªå€¼éƒ½å˜æˆå”¯ä¸€çš„æ‰€éœ€è¦çš„æœ€å°‘æ“ä½œæ¬¡æ•°ã€‚</p>

<div class="original__bRMd">
<div>
<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>nums = [1,2,2]
<strong>è¾“å‡ºï¼š</strong>1
<strong>è§£é‡Šï¼š</strong>ç»è¿‡ä¸€æ¬¡ <em>move</em> æ“ä½œï¼Œæ•°ç»„å°†å˜ä¸º [1, 2, 3]ã€‚
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>nums = [3,2,1,2,1,7]
<strong>è¾“å‡ºï¼š</strong>6
<strong>è§£é‡Šï¼š</strong>ç»è¿‡ 6 æ¬¡ <em>move</em> æ“ä½œï¼Œæ•°ç»„å°†å˜ä¸º [3, 4, 1, 2, 5, 7]ã€‚
å¯ä»¥çœ‹å‡º 5 æ¬¡æˆ– 5 æ¬¡ä»¥ä¸‹çš„ <em>move</em> æ“ä½œæ˜¯ä¸èƒ½è®©æ•°ç»„çš„æ¯ä¸ªå€¼å”¯ä¸€çš„ã€‚</pre>
</div>
</div>

<p>&nbsp;</p>
<strong>æç¤ºï¼š</strong>

<ul>
	<li><code>1 &lt;= nums.length &lt;= 10<sup>5</sup></code></li>
	<li><code>0 &lt;= nums[i] &lt;= 10<sup>5</sup></code></li>
</ul>
</div>

## é€šè¿‡ä»£ç 
<RecoDemo>
</RecoDemo>


## é«˜èµé¢˜è§£

#### æ–¹æ³•ä¸€ã€æ’åº $O(nlogn)$
é€»è¾‘ï¼šå…ˆæ’åºï¼Œå†ä¾æ¬¡éå†æ•°ç»„å…ƒç´ ï¼Œè‹¥å½“å‰å…ƒç´ å°äºç­‰äºå®ƒå‰ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™å°†å…¶å˜ä¸ºå‰ä¸€ä¸ªæ•° +1ã€‚
```Java []
class Solution {
    public int minIncrementForUnique(int[] A) {
        // å…ˆæ’åº
        Arrays.sort(A);
        int move = 0;
        // éå†æ•°ç»„ï¼Œè‹¥å½“å‰å…ƒç´ å°äºç­‰äºå®ƒçš„å‰ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™å°†å…¶å˜ä¸ºå‰ä¸€ä¸ªæ•°+1
        for (int i = 1; i < A.length; i++) {
            if (A[i] <= A[i - 1]) {
                int pre = A[i];
                A[i] = A[i - 1] + 1;
                move += A[i] - pre;
            }
        }
        return move;
    }
}
```

#### æ–¹æ³•äºŒã€è®¡æ•°æ’åº  $O(N)$
é€»è¾‘ï¼šè¯·è§æ³¨é‡ŠğŸ‘‡
```Java []
class Solution {
    public int minIncrementForUnique(int[] A) {
        // counteræ•°ç»„ç»Ÿè®¡æ¯ä¸ªæ•°å­—çš„ä¸ªæ•°ã€‚
        //ï¼ˆè¿™é‡Œä¸ºäº†é˜²æ­¢ä¸‹é¢éå†counterçš„æ—¶å€™æ¯æ¬¡éƒ½èµ°åˆ°40000ï¼Œæ‰€ä»¥è®¾ç½®äº†ä¸€ä¸ªmaxï¼Œè¿™ä¸ªæ•°æ®é‡ä¸è®¾ä¹Ÿè¡Œï¼Œå†é¢å¤–è®¾ç½®minä¹Ÿè¡Œï¼‰
        int[] counter = new int[40001];
        int max = -1;
        for (int num: A) {
            counter[num]++;
            max = Math.max(max, num);
        }
        
        // éå†counteræ•°ç»„ï¼Œè‹¥å½“å‰æ•°å­—çš„ä¸ªæ•°cntå¤§äº1ä¸ªï¼Œåˆ™åªç•™ä¸‹1ä¸ªï¼Œå…¶ä»–çš„cnt-1ä¸ªåç§»
        int move = 0;
        for (int num = 0; num <= max; num++) {
            if (counter[num] > 1) {
                int d = counter[num] - 1;
                move += d;
                counter[num + 1] += d;
            }
        }
        // æœ€å, counter[max+1]é‡Œå¯èƒ½ä¼šæœ‰ä»counter[max]åç§»è¿‡æ¥çš„ï¼Œcounter[max+1]é‡Œåªç•™ä¸‹1ä¸ªï¼Œå…¶å®ƒçš„dä¸ªåç§»ã€‚
        // è®¾ max+1 = xï¼Œé‚£ä¹ˆåé¢çš„dä¸ªæ•°å°±æ˜¯[x+1,x+2,x+3,...,x+d],
        // å› æ­¤æ“ä½œæ¬¡æ•°æ˜¯[1,2,3,...,d],ç”¨æ±‚å’Œå…¬å¼æ±‚å’Œã€‚
        int d = counter[max + 1] - 1;
        move += (1 + d) * d / 2;
        return move;
    }
}
```

#### æ–¹æ³•ä¸‰ã€çº¿æ€§æ¢æµ‹æ³• $O(N)$ ï¼ˆå«è·¯å¾„å‹ç¼©ï¼‰

è¿™é“é¢˜æ¢å¥è¯è¯´ï¼Œå°±æ˜¯éœ€è¦æŠŠåŸæ•°ç»„æ˜ å°„åˆ°ä¸€ä¸ªåœ°å€ä¸å†²çªçš„åŒºåŸŸï¼Œæ˜ å°„åçš„åœ°å€ä¸å°äºåŸæ•°ç»„å¯¹åº”çš„å…ƒç´ ã€‚
æ¯”å¦‚ `[3, 2, 1, 2, 1, 7]` å°±æ˜ å°„æˆäº† `[3, 2, 1, 4, 5, 7]`ã€‚

æˆ‘æƒ³äº†ä¸‹ï¼Œè¿™é“é¢˜ç›®å…¶å®å’Œ**è§£å†³ hash å†²çªçš„çº¿æ€§æ¢æµ‹æ³•**æ¯”è¾ƒç›¸ä¼¼ï¼
å¦‚æœåœ°å€å†²çªäº†ï¼Œä¼šæ¢æµ‹å®ƒçš„ä¸‹ä¸€ä¸ªä½ç½®ï¼Œå¦‚æœä¸‹ä¸€ä¸ªä½ç½®è¿˜æ˜¯å†²çªï¼Œç»§ç»­å‘åçœ‹ï¼Œç›´åˆ°ç¬¬ä¸€ä¸ªä¸å†²çªçš„ä½ç½®ä¸ºæ­¢ã€‚

**å…³é”®ç‚¹ï¼š**å› ä¸ºç›´æ¥çº¿æ€§æ¢æµ‹å¯èƒ½ä¼šç”±äºå†²çªå¯¼è‡´åå¤æ¢æµ‹è€—æ—¶å¤ªé•¿ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è€ƒè™‘æ¢æµ‹çš„è¿‡ç¨‹ä¸­è¿›è¡Œ**è·¯å¾„å‹ç¼©**ã€‚
**æ€ä¹ˆè·¯å¾„å‹ç¼©å‘¢ï¼Ÿå°±æ˜¯ç»è¿‡æŸæ¡è·¯å¾„æœ€ç»ˆæ¢æµ‹åˆ°ä¸€ä¸ªç©ºä½ç½® x åï¼Œå°†è¿™æ¡è·¯å¾„ä¸Šçš„å€¼éƒ½å˜æˆç©ºä½ç½®æ‰€åœ¨çš„ä¸‹æ ‡ xï¼Œé‚£ä¹ˆå‡å¦‚ä¸‹æ¬¡æ¢æµ‹çš„ç‚¹åˆæ˜¯è¿™æ¡è·¯å¾„ä¸Šçš„ç‚¹ï¼Œåˆ™å¯ä»¥ç›´æ¥è·³è½¬åˆ°è¿™æ¬¡æ¢æµ‹åˆ°çš„ç©ºä½ç½® xï¼Œä» x å¼€å§‹ç»§ç»­æ¢æµ‹**ã€‚

ä¸‹é¢ç”¨æ ·ä¾‹2ï¼š`[3, 2, 1, 2, 1, 7]`ï¼Œæ¥æ¨¡æ‹Ÿä¸€éçº¿æ€§æ¢æµ‹çš„è¿‡ç¨‹ã€‚

**step 1: æ’å…¥ 3ï¼š**
![image.png](../images/minimum-increment-to-make-array-unique-0.png)

å› ä¸º 3 çš„ä½ç½®æ˜¯ç©ºçš„ï¼Œæ‰€ä»¥ç›´æ¥æ”¾å…¥ 3 å³å¯ã€‚ï¼ˆæ­¤æ—¶æ•°ç»„å˜æˆäº†ä¸Šå›¾ï¼Œçº¢è‰²è¡¨ç¤ºæœ¬æ¬¡çš„æ›´æ”¹ï¼‰

**step 2: æ’å…¥ 2ï¼š**
![image.png](../images/minimum-increment-to-make-array-unique-1.png)

å› ä¸º 2 çš„ä½ç½®æ˜¯ç©ºçš„ï¼Œæ‰€ä»¥ç›´æ¥æ”¾å…¥ 2 å³å¯ã€‚ï¼ˆæ­¤æ—¶æ•°ç»„å˜æˆäº†ä¸Šå›¾ï¼Œçº¢è‰²è¡¨ç¤ºæœ¬æ¬¡çš„æ›´æ”¹ï¼‰

**step 3: æ’å…¥ 1ï¼š**
![image.png](../images/minimum-increment-to-make-array-unique-2.png)

å› ä¸º 1 çš„ä½ç½®æ˜¯ç©ºçš„ï¼Œæ‰€ä»¥ç›´æ¥æ”¾å…¥ 1 å³å¯ã€‚ï¼ˆæ­¤æ—¶æ•°ç»„å˜æˆäº†ä¸Šå›¾ï¼Œçº¢è‰²è¡¨ç¤ºæœ¬æ¬¡çš„æ›´æ”¹ï¼‰

**step 4: æ’å…¥ 2ï¼š**
![image.png](../images/minimum-increment-to-make-array-unique-3.png)
æ­¤æ—¶æˆ‘ä»¬å‘ç° 2 çš„ä½ç½®å·²ç»æœ‰å€¼äº†ï¼Œäºæ˜¯ç»§ç»­å‘åæ¢æµ‹ï¼Œç›´åˆ°æ‰¾åˆ°ç©ºä½ 4ï¼Œäºæ˜¯ 2 æ˜ å°„åˆ°äº† 4ã€‚
å¹¶ä¸”ï¼ï¼æˆ‘ä»¬è¦å¯¹åˆšåˆšèµ°è¿‡çš„è·¯å¾„ 2->3->4 è¿›è¡Œå‹ç¼©ï¼Œå³å°†ä»–ä»¬çš„å€¼éƒ½è®¾ç½®ä¸ºæœ¬æ¬¡æ¢æµ‹åˆ°çš„ç©ºä½ 4(é‚£ä¹ˆä¸‹æ¬¡æ¢æµ‹å°±å¯ä»¥ç›´æ¥ä» 4 å¾€åæ‰¾äº†)ã€‚
ï¼ˆæ­¤æ—¶æ•°ç»„å˜æˆäº†ä¸Šå›¾ï¼Œçº¢è‰²è¡¨ç¤ºæœ¬æ¬¡çš„æ›´æ”¹ï¼‰

**step 5: æ’å…¥ 1ï¼š**
![image.png](../images/minimum-increment-to-make-array-unique-4.png)

æ­¤æ—¶æˆ‘ä»¬å‘ç°1çš„ä½ç½®å·²ç»æœ‰å€¼äº†ï¼Œäºæ˜¯å‘åæ¢æµ‹ï¼Œæ¢æµ‹åˆ°äº† 2ï¼Œå‘ç° 2 çš„ä½ç½®ä¹Ÿæœ‰å€¼äº†ï¼Œä½†æ˜¯ç”±äº 2 åœ¨ä¸Šæ¬¡çš„è¿‡ç¨‹ä¸­å­˜äº†ä¸Šæ¬¡çš„ç©ºä½ 4ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥è·³è½¬åˆ° 4+1 å³ä» 5 å¼€å§‹æ¢æµ‹å°±è¡Œäº†ï¼ˆè€Œä¸éœ€è¦é‡å¤èµ°ä¸€é 2->3->4 è¿™æ¡è·¯å¾„å–½ï¼ï¼‰ï¼Œæ­¤æ—¶æˆ‘ä»¬å‘ç° 5 æ˜¯ä¸ªç©ºä½ï¼Œå› æ­¤å°† 1 æ˜ å°„åˆ° 5ï¼Œå¹¶ä¸”å¯¹ä¸åˆšåˆšèµ°è¿‡çš„è·¯å¾„ 1->2->5 è¿›è¡Œè·¯å¾„å‹ç¼©å³ä½¿å…¶éƒ½æ˜ å°„åˆ° 5ï¼
ï¼ˆæ­¤æ—¶æ•°ç»„å˜æˆäº†ä¸Šå›¾ï¼Œçº¢è‰²è¡¨ç¤ºæœ¬æ¬¡çš„æ›´æ”¹ï¼‰

**step 6: æ’å…¥ 7ï¼š**
![image.png](../images/minimum-increment-to-make-array-unique-5.png)

å› ä¸º 7 çš„ä½ç½®æ˜¯ç©ºçš„ï¼Œæ‰€ä»¥ç›´æ¥æ”¾å…¥ 7 å³å¯ã€‚ï¼ˆæ­¤æ—¶æ•°ç»„å˜æˆäº†ä¸Šå›¾ï¼Œçº¢è‰²è¡¨ç¤ºæœ¬æ¬¡çš„æ›´æ”¹ï¼‰


ä»¥ä¸‹æ˜¯ä»£ç å®ç°ï¼Œè€—æ—¶åªæœ‰ 11ms
```Java []
class Solution {
    int[] pos = new int [80000];
    public int minIncrementForUnique(int[] A) {
        Arrays.fill(pos, -1); // -1è¡¨ç¤ºç©ºä½
        int move = 0;
        // éå†æ¯ä¸ªæ•°å­—aå¯¹å…¶å¯»åœ°å€å¾—åˆ°ä½ç½®b, bæ¯”açš„å¢é‡å°±æ˜¯æ“ä½œæ•°ã€‚
        for (int a: A) {
            int b = findPos(a); 
            move += b - a;
        }
        return move;
    }
    
    // çº¿æ€§æ¢æµ‹å¯»å€ï¼ˆå«è·¯å¾„å‹ç¼©ï¼‰
    private int findPos(int a) {
        int b = pos[a];
        // å¦‚æœaå¯¹åº”çš„ä½ç½®pos[a]æ˜¯ç©ºä½ï¼Œç›´æ¥æ”¾å…¥å³å¯ã€‚
        if (b == -1) { 
            pos[a] = a;
            return a;
        }
        // å¦åˆ™å‘åå¯»å€
        // å› ä¸ºpos[a]ä¸­æ ‡è®°äº†ä¸Šæ¬¡å¯»å€å¾—åˆ°çš„ç©ºä½ï¼Œå› æ­¤ä»pos[a]+1å¼€å§‹å¯»å€å°±è¡Œäº†ï¼ˆä¸éœ€è¦ä»a+1å¼€å§‹ï¼‰ã€‚
        b = findPos(b + 1); 
        pos[a] = b; // å¯»å€åçš„æ–°ç©ºä½è¦é‡æ–°èµ‹å€¼ç»™pos[a]å“¦ï¼Œè·¯å¾„å‹ç¼©å°±æ˜¯ä½“ç°åœ¨è¿™é‡Œã€‚
        return b;
    }
}

```



## ç»Ÿè®¡ä¿¡æ¯
| é€šè¿‡æ¬¡æ•° | æäº¤æ¬¡æ•° | ACæ¯”ç‡ |
| :------: | :------: | :------: |
|    36176    |    74594    |   48.5%   |

## æäº¤å†å²
| æäº¤æ—¶é—´ | æäº¤ç»“æœ | æ‰§è¡Œæ—¶é—´ |  å†…å­˜æ¶ˆè€—  | è¯­è¨€ |
| :------: | :------: | :------: | :--------: | :--------: |
