---
title: 417-å¤ªå¹³æ´‹å¤§è¥¿æ´‹æ°´æµé—®é¢˜(Pacific Atlantic Water Flow)
categories:
  - ä¸­ç­‰
tags:
  - æ·±åº¦ä¼˜å…ˆæœç´¢
  - å¹¿åº¦ä¼˜å…ˆæœç´¢
  - æ•°ç»„
  - çŸ©é˜µ
abbrlink: 2333286058
date: 2021-12-03 22:45:51
---

> åŸæ–‡é“¾æ¥: https://leetcode-cn.com/problems/pacific-atlantic-water-flow


## è‹±æ–‡åŸæ–‡
<div><p>There is an <code>m x n</code> rectangular island that borders both the <strong>Pacific Ocean</strong> and <strong>Atlantic Ocean</strong>. The <strong>Pacific Ocean</strong> touches the island&#39;s left and top edges, and the <strong>Atlantic Ocean</strong> touches the island&#39;s right and bottom edges.</p>

<p>The island is partitioned into a grid of square cells. You are given an <code>m x n</code> integer matrix <code>heights</code> where <code>heights[r][c]</code> represents the <strong>height above sea level</strong> of the cell at coordinate <code>(r, c)</code>.</p>

<p>The island receives a lot of rain, and the rain water can flow to neighboring cells directly north, south, east, and west if the neighboring cell&#39;s height is <strong>less than or equal to</strong> the current cell&#39;s height. Water can flow from any cell adjacent to an ocean into the ocean.</p>

<p>Return <em>a <strong>2D list</strong> of grid coordinates </em><code>result</code><em> where </em><code>result[i] = [r<sub>i</sub>, c<sub>i</sub>]</code><em> denotes that rain water can flow from cell </em><code>(r<sub>i</sub>, c<sub>i</sub>)</code><em> to <strong>both</strong> the Pacific and Atlantic oceans</em>.</p>

<p>&nbsp;</p>
<p><strong>Example 1:</strong></p>
<img alt="" src="https://assets.leetcode.com/uploads/2021/06/08/waterflow-grid.jpg" style="width: 573px; height: 573px;" />
<pre>
<strong>Input:</strong> heights = [[1,2,2,3,5],[3,2,3,4,4],[2,4,5,3,1],[6,7,1,4,5],[5,1,1,2,4]]
<strong>Output:</strong> [[0,4],[1,3],[1,4],[2,2],[3,0],[3,1],[4,0]]
</pre>

<p><strong>Example 2:</strong></p>

<pre>
<strong>Input:</strong> heights = [[2,1],[1,2]]
<strong>Output:</strong> [[0,0],[0,1],[1,0],[1,1]]
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>m == heights.length</code></li>
	<li><code>n == heights[r].length</code></li>
	<li><code>1 &lt;= m, n &lt;= 200</code></li>
	<li><code>0 &lt;= heights[r][c] &lt;= 10<sup>5</sup></code></li>
</ul>
</div>

## ä¸­æ–‡é¢˜ç›®
<div><p>ç»™å®šä¸€ä¸ª <code>m x n</code> çš„éè´Ÿæ•´æ•°çŸ©é˜µæ¥è¡¨ç¤ºä¸€ç‰‡å¤§é™†ä¸Šå„ä¸ªå•å…ƒæ ¼çš„é«˜åº¦ã€‚&ldquo;å¤ªå¹³æ´‹&rdquo;å¤„äºå¤§é™†çš„å·¦è¾¹ç•Œå’Œä¸Šè¾¹ç•Œï¼Œè€Œ&ldquo;å¤§è¥¿æ´‹&rdquo;å¤„äºå¤§é™†çš„å³è¾¹ç•Œå’Œä¸‹è¾¹ç•Œã€‚</p>

<p>è§„å®šæ°´æµåªèƒ½æŒ‰ç…§ä¸Šã€ä¸‹ã€å·¦ã€å³å››ä¸ªæ–¹å‘æµåŠ¨ï¼Œä¸”åªèƒ½ä»é«˜åˆ°ä½æˆ–è€…åœ¨åŒç­‰é«˜åº¦ä¸ŠæµåŠ¨ã€‚</p>

<p>è¯·æ‰¾å‡ºé‚£äº›æ°´æµæ—¢å¯ä»¥æµåŠ¨åˆ°&ldquo;å¤ªå¹³æ´‹&rdquo;ï¼Œåˆèƒ½æµåŠ¨åˆ°&ldquo;å¤§è¥¿æ´‹&rdquo;çš„é™†åœ°å•å…ƒçš„åæ ‡ã€‚</p>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ol>
	<li>è¾“å‡ºåæ ‡çš„é¡ºåºä¸é‡è¦</li>
	<li><em>m</em> å’Œ <em>n</em> éƒ½å°äº150</li>
</ol>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ï¼š</strong></p>

<p>&nbsp;</p>

<pre>
ç»™å®šä¸‹é¢çš„ 5x5 çŸ©é˜µ:

  å¤ªå¹³æ´‹ ~   ~   ~   ~   ~ 
       ~  1   2   2   3  (5) *
       ~  3   2   3  (4) (4) *
       ~  2   4  (5)  3   1  *
       ~ (6) (7)  1   4   5  *
       ~ (5)  1   1   2   4  *
          *   *   *   *   * å¤§è¥¿æ´‹

è¿”å›:

[[0, 4], [1, 3], [1, 4], [2, 2], [3, 0], [3, 1], [4, 0]] (ä¸Šå›¾ä¸­å¸¦æ‹¬å·çš„å•å…ƒ).
</pre>

<p>&nbsp;</p>
</div>

## é€šè¿‡ä»£ç 
<RecoDemo>
</RecoDemo>


## é«˜èµé¢˜è§£
### è§£é¢˜æ€è·¯
å¯¹äºæ­¤é¢˜æˆ‘ä»¬å¯ä»¥ç›´è§‚çš„å–æš´åŠ›æœç´¢æ¯ä¸€ä¸ªç‚¹æ˜¯å¦å¯ä»¥è¾¾åˆ°ä¸¤è¾¹çš„å¤§æ´‹ï¼Œå½“ç„¶è¿™æ ·å­è¦å¤„ç†çš„ä¸œè¥¿ä¼šå¾ˆå¤šï¼Œå¹¶ä¸”æ€è·¯ä¸å¤Ÿæ˜æ˜¾ã€‚æœ‰å°ä¼™ä¼´ä¼šè¯´ï¼Œæ°´æ€ä¹ˆèƒ½å¾€é«˜å¤„æµåŠ¨ï¼Œç°å®ç”Ÿæ´»ä¸­æ°´å½“ç„¶æ˜¯å¾€ä½å¤„æµçš„ã€‚ä½†æ˜¯ç°åœ¨é”®ç›˜åœ¨ä½ æ‰‹ä¸Šï¼Œä½ è®©ä»–å¾€ä¸œæµä»–èƒ½å¾€è¥¿æµï¼Ÿ
å’±è¿™æ˜¯èƒ½ä¸Šå¤©çš„é»„æ²³ä¹‹æ°´ï¼
*******************
å¯¹äºä¸€ä¸ªç‚¹å®ƒèƒ½æµåŠ¨ä¸¤è¾¹çš„å¤§æ´‹ï¼Œé‚£ä¹ˆåè¿‡æ¥ï¼Œä¸¤è¾¹å¤§æ´‹çš„æ°´åç€æµå°±èƒ½è¾¾åˆ°è¿™ä¸ªç‚¹ã€‚
å°½ç„¶æ°´å¼€å§‹å€’æµäº†ï¼Œé‚£ä¹ˆé€»è¾‘ä¹Ÿéœ€è¦åè¿‡æ¥ï¼Œå› æ­¤åªæœ‰å°†ä¸‹ä¸€ä¸ªç‚¹æ¯”å½“å‰çš„ç‚¹å¤§æ—¶æˆ–è€…ç­‰äºå½“å‰ç‚¹çš„é«˜åº¦æ—¶ï¼Œæ°´æ‰èƒ½æµè¿‡å»ã€‚
*********************************
æ‰¾å‡ºæ‰€æœ‰è¿™æ ·çš„ç‚¹æˆ‘ä»¬éœ€è¦æ€ä¹ˆåšï¼Ÿ
1. æ‰¾å‡ºæ‰€æœ‰ä»**å¤ªå¹³æ´‹**å‡ºå‘çš„æ°´æ‰€èƒ½è¾¾åˆ°çš„ç‚¹
![8e9c842a24968824d18c4de2c520a6e.png](../images/pacific-atlantic-water-flow-0.png)
*******************************
2. æ‰¾å‡ºæ‰€æœ‰ä»**å¤§è¥¿æ´‹**å‡ºå‘çš„æ°´æ‰€èƒ½è¾¾åˆ°çš„ç‚¹
![521bfa8063d14254466a5d7f6600ae9.png](../images/pacific-atlantic-water-flow-1.png)
*****************
3. è¿™äº›é‡åˆçš„ç‚¹ä¾¿æ˜¯æˆ‘ä»¬è¦æ‰¾çš„ç‚¹
![06ce3f99a8742231c3f7d42dcac0c69.png](../images/pacific-atlantic-water-flow-2.png)
************************
å†™è‰¯å¿ƒçš„é¢˜è§£çœŸçš„ä¸æ˜“ï¼Œç‚¹ä¸ªå…³æ³¨ç‚¹ä¸ªğŸ‘å§å„ä½ï¼
***********************
### ä»£ç 
```cpp
class Solution {
public:
    vector<vector<int>> P, A, ans;
    int n, m;
    vector<vector<int>> pacificAtlantic(vector<vector<int>>& M) {
        n = M.size(), m = M[0].size();
        P = A = vector<vector<int>>(n, vector<int>(m, 0));
        //å·¦å³ä¸¤è¾¹åŠ ä¸Šä¸‹ä¸¤è¾¹å‡ºå‘æ·±æœ
        for(int i = 0; i < n; ++i) dfs(M, P, i, 0), dfs(M, A, i, m - 1);
        for(int j = 0; j < m; ++j) dfs(M, P, 0, j), dfs(M, A, n - 1, j);             
        return ans;
    }
    void dfs(vector<vector<int>>& M, vector<vector<int>>& visited, int i, int j){        
        if(visited[i][j]) return;
        visited[i][j] = 1;

        if(P[i][j] && A[i][j]) ans.push_back({i,j}); 

        //ä¸Šä¸‹å·¦å³æ·±æœ
        if(i-1 >= 0 && M[i-1][j] >= M[i][j]) dfs(M, visited, i-1, j);
        if(i+1 < n && M[i+1][j] >= M[i][j]) dfs(M, visited, i+1, j); 
        if(j-1 >= 0 && M[i][j-1] >= M[i][j]) dfs(M, visited, i, j-1);
        if(j+1 < m && M[i][j+1] >= M[i][j]) dfs(M, visited, i, j+1); 
    }
};
```

## ç»Ÿè®¡ä¿¡æ¯
| é€šè¿‡æ¬¡æ•° | æäº¤æ¬¡æ•° | ACæ¯”ç‡ |
| :------: | :------: | :------: |
|    30002    |    61849    |   48.5%   |

## æäº¤å†å²
| æäº¤æ—¶é—´ | æäº¤ç»“æœ | æ‰§è¡Œæ—¶é—´ |  å†…å­˜æ¶ˆè€—  | è¯­è¨€ |
| :------: | :------: | :------: | :--------: | :--------: |
