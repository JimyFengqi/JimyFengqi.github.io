---
title: 2001-å¯äº’æ¢çŸ©å½¢çš„ç»„æ•°(Number of Pairs of Interchangeable Rectangles)
categories:
  - ä¸­ç­‰
tags:
  - æ•°ç»„
  - å“ˆå¸Œè¡¨
  - æ•°å­¦
  - è®¡æ•°
  - æ•°è®º
abbrlink: 2507446369
date: 2021-12-03 21:59:08
---

> åŸæ–‡é“¾æ¥: https://leetcode-cn.com/problems/number-of-pairs-of-interchangeable-rectangles


## è‹±æ–‡åŸæ–‡
<div><p>You are given <code>n</code> rectangles represented by a <strong>0-indexed</strong> 2D integer array <code>rectangles</code>, where <code>rectangles[i] = [width<sub>i</sub>, height<sub>i</sub>]</code> denotes the width and height of the <code>i<sup>th</sup></code> rectangle.</p>

<p>Two rectangles <code>i</code> and <code>j</code> (<code>i &lt; j</code>) are considered <strong>interchangeable</strong> if they have the <strong>same</strong> width-to-height ratio. More formally, two rectangles are <strong>interchangeable</strong> if <code>width<sub>i</sub>/height<sub>i</sub> == width<sub>j</sub>/height<sub>j</sub></code> (using decimal division, not integer division).</p>

<p>Return <em>the <strong>number</strong> of pairs of <strong>interchangeable</strong> rectangles in </em><code>rectangles</code>.</p>

<p>&nbsp;</p>
<p><strong>Example 1:</strong></p>

<pre>
<strong>Input:</strong> rectangles = [[4,8],[3,6],[10,20],[15,30]]
<strong>Output:</strong> 6
<strong>Explanation:</strong> The following are the interchangeable pairs of rectangles by index (0-indexed):
- Rectangle 0 with rectangle 1: 4/8 == 3/6.
- Rectangle 0 with rectangle 2: 4/8 == 10/20.
- Rectangle 0 with rectangle 3: 4/8 == 15/30.
- Rectangle 1 with rectangle 2: 3/6 == 10/20.
- Rectangle 1 with rectangle 3: 3/6 == 15/30.
- Rectangle 2 with rectangle 3: 10/20 == 15/30.
</pre>

<p><strong>Example 2:</strong></p>

<pre>
<strong>Input:</strong> rectangles = [[4,5],[7,8]]
<strong>Output:</strong> 0
<strong>Explanation:</strong> There are no interchangeable pairs of rectangles.
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>n == rectangles.length</code></li>
	<li><code>1 &lt;= n &lt;= 10<sup>5</sup></code></li>
	<li><code>rectangles[i].length == 2</code></li>
	<li><code>1 &lt;= width<sub>i</sub>, height<sub>i</sub> &lt;= 10<sup>5</sup></code></li>
</ul>
</div>

## ä¸­æ–‡é¢˜ç›®
<div><p>ç”¨ä¸€ä¸ªä¸‹æ ‡ä» <strong>0</strong> å¼€å§‹çš„äºŒç»´æ•´æ•°æ•°ç»„&nbsp;<code>rectangles</code> æ¥è¡¨ç¤º <code>n</code> ä¸ªçŸ©å½¢ï¼Œå…¶ä¸­ <code>rectangles[i] = [width<sub>i</sub>, height<sub>i</sub>]</code> è¡¨ç¤ºç¬¬ <code>i</code> ä¸ªçŸ©å½¢çš„å®½åº¦å’Œé«˜åº¦ã€‚</p>

<p>å¦‚æœä¸¤ä¸ªçŸ©å½¢ <code>i</code> å’Œ <code>j</code>ï¼ˆ<code>i &lt; j</code>ï¼‰çš„å®½é«˜æ¯”ç›¸åŒï¼Œåˆ™è®¤ä¸ºè¿™ä¸¤ä¸ªçŸ©å½¢ <strong>å¯äº’æ¢</strong> ã€‚æ›´è§„èŒƒçš„è¯´æ³•æ˜¯ï¼Œä¸¤ä¸ªçŸ©å½¢æ»¡è¶³&nbsp;<code>width<sub>i</sub>/height<sub>i</sub> == width<sub>j</sub>/height<sub>j</sub></code>ï¼ˆä½¿ç”¨å®æ•°é™¤æ³•è€Œéæ•´æ•°é™¤æ³•ï¼‰ï¼Œåˆ™è®¤ä¸ºè¿™ä¸¤ä¸ªçŸ©å½¢ <strong>å¯äº’æ¢</strong> ã€‚</p>

<p>è®¡ç®—å¹¶è¿”å›&nbsp;<code>rectangles</code> ä¸­æœ‰å¤šå°‘å¯¹ <strong>å¯äº’æ¢ </strong>çŸ©å½¢ã€‚</p>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>rectangles = [[4,8],[3,6],[10,20],[15,30]]
<strong>è¾“å‡ºï¼š</strong>6
<strong>è§£é‡Šï¼š</strong>ä¸‹é¢æŒ‰ä¸‹æ ‡ï¼ˆä» 0 å¼€å§‹ï¼‰åˆ—å‡ºå¯äº’æ¢çŸ©å½¢çš„é…å¯¹æƒ…å†µï¼š
- çŸ©å½¢ 0 å’ŒçŸ©å½¢ 1 ï¼š4/8 == 3/6
- çŸ©å½¢ 0 å’ŒçŸ©å½¢ 2 ï¼š4/8 == 10/20
- çŸ©å½¢ 0 å’ŒçŸ©å½¢ 3 ï¼š4/8 == 15/30
- çŸ©å½¢ 1 å’ŒçŸ©å½¢ 2 ï¼š3/6 == 10/20
- çŸ©å½¢ 1 å’ŒçŸ©å½¢ 3 ï¼š3/6 == 15/30
- çŸ©å½¢ 2 å’ŒçŸ©å½¢ 3 ï¼š10/20 == 15/30
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>rectangles = [[4,5],[7,8]]
<strong>è¾“å‡ºï¼š</strong>0
<strong>è§£é‡Šï¼š</strong>ä¸å­˜åœ¨æˆå¯¹çš„å¯äº’æ¢çŸ©å½¢ã€‚
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>n == rectangles.length</code></li>
	<li><code>1 &lt;= n &lt;= 10<sup>5</sup></code></li>
	<li><code>rectangles[i].length == 2</code></li>
	<li><code>1 &lt;= width<sub>i</sub>, height<sub>i</sub> &lt;= 10<sup>5</sup></code></li>
</ul>
</div>

## é€šè¿‡ä»£ç 
<RecoDemo>
</RecoDemo>


## é«˜èµé¢˜è§£
### è§£é¢˜æ€è·¯
å®½é«˜æ¯”ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç®—å‡ºæ¥ã€‚ä½†æ˜¯ç›´æ¥ç”¨å†…å»ºçš„é«˜ç²¾åº¦å°æ•°çš„è¯ï¼Œå¾ˆå¯èƒ½ä¼šè¢«å¡ç²¾åº¦ã€‚

æ‰€ä»¥æˆ‘ä»¬æŠŠå®½é«˜æ¯”åŒ–æˆæœ‰ç†æ•°ï¼Œå³å®½å’Œé«˜éƒ½é™¤ä»¥ä»–ä»¬çš„æœ€å¤§å…¬çº¦æ•°ã€‚ç„¶åç”¨ä¸€ä¸ªhashmapå»ç®—åŒæ ·å®½é«˜æ¯”çš„çŸ©å½¢çš„æ•°é‡ï¼Œå†ä¹‹åå°±è½¬åŒ–æˆä¸€ä¸ªç»„åˆé—®é¢˜å•¦ã€‚
å³å®½é«˜æ¯”ç›¸åŒçš„çŸ©å½¢æœ‰Nä¸ªï¼Œé‚£ä¹ˆä»–ä»¬ç»„æˆå¤šå°‘ä¸ª**å¯äº’æ¢å¯¹**å‘¢ï¼ŸğŸ¤”

å¾ˆæ˜¾ç„¶ï¼Œç­”æ¡ˆæ˜¯ `N*(N-1)/2`

### ä»£ç 

```cpp
class Solution {
public:
    int gcd(int a, int b) {
        if (a < b) return gcd(b, a);
        if (a % b == 0) return b;
        return gcd(b, a%b);
    }
    
    unordered_map<int, unordered_map<int, long long>> cnt;
    
    long long interchangeableRectangles(vector<vector<int>>& rectangles) {
        for (auto r : rectangles) {
            int c = gcd(r[0], r[1]);
            r[0] /= c;
            r[1] /= c;
            
            cnt[r[0]][r[1]]++;
        }
        
        long long ans = 0;
        
        for (auto iter = cnt.begin(); iter != cnt.end(); iter++) {
            for (auto i = iter->second.begin(); i != iter->second.end(); i++) {
                ans += i->second * (i->second - 1) / 2;
            }
        }
        
        
        return ans;
    }
};
```

### ç›¸ä¼¼é¢˜ç›®ï¼š hash + è®¡æ•°
|é¢˜ç›®|éš¾åº¦|
|----------|------------|----------|
|[447.å›æ—‹é•–çš„æ•°é‡](https://leetcode-cn.com/problems/number-of-boomerangs/solution/wei-rao-li-lun-ha-xi-biao-ko-hui-xuan-bi-gnxy/)|ä¸­ç­‰|
|[2001.å¯äº’æ¢çŸ©å½¢çš„ç»„æ•°](https://leetcode-cn.com/problems/number-of-pairs-of-interchangeable-rectangles/solution/wei-rao-li-lun-zui-da-gong-yue-shu-hashm-muzr/)|ä¸­ç­‰|


### å…³äºæˆ‘
18å¹´æ¯•ä¸šäºä¸Šæµ·äº¤é€šå¤§å­¦ï¼Œä¸€ä¸ªåœ¨é˜¿é‡Œã€å­—èŠ‚ã€è…¾è®¯éƒ½å·¥ä½œè¿‡çš„å·¥ç¨‹å¸ˆï¼Œæœ‰ä¸°å¯Œçš„é¢è¯•ç»éªŒï¼Œä¸šä½™æ—¶é—´ä¹Ÿæ˜¯ã€æ‚–è®º13ã€‘å‰§æœ¬æ€çš„è€æ¿ã€‚å®åœ¨å·ä¸åŠ¨äº†ï¼Œç›®å‰(2021.8)åœ¨emqxä»äº‹å­˜å‚¨ç ”å‘ï¼Œå¸Œæœ›åœ¨ä»Šå¹´å¤šå¤šè¾“å‡ºã€‚
æƒ³äº†è§£æˆ‘å’Œæˆ‘çš„å…¬å¸æˆ–è€…ä¸€èµ·åˆ·é¢˜çš„å¯ä»¥ +v ï¼š constant_variation

æœ€åï¼Œå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œ**å¯ä»¥ç‚¹ä¸ªèµæ”¯æŒä¸€ä¸‹æˆ‘å“¦** ä¹Ÿæ¬¢è¿åœ¨leetcodeä¸Š[å…³æ³¨æˆ‘](https://leetcode-cn.com/u/wfnuser/)ã€‚

## ç»Ÿè®¡ä¿¡æ¯
| é€šè¿‡æ¬¡æ•° | æäº¤æ¬¡æ•° | ACæ¯”ç‡ |
| :------: | :------: | :------: |
|    6001    |    16627    |   36.1%   |

## æäº¤å†å²
| æäº¤æ—¶é—´ | æäº¤ç»“æœ | æ‰§è¡Œæ—¶é—´ |  å†…å­˜æ¶ˆè€—  | è¯­è¨€ |
| :------: | :------: | :------: | :--------: | :--------: |
