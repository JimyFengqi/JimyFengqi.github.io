---
title: 629-Kä¸ªé€†åºå¯¹æ•°ç»„(K Inverse Pairs Array)
date: 2021-12-03 22:40:55
categories:
  - å›°éš¾
tags:
  - åŠ¨æ€è§„åˆ’
---

> åŸæ–‡é“¾æ¥: https://leetcode-cn.com/problems/k-inverse-pairs-array


## è‹±æ–‡åŸæ–‡
<div><p>For an integer array <code>nums</code>, an <strong>inverse pair</strong> is a pair of integers <code>[i, j]</code> where <code>0 &lt;= i &lt; j &lt; nums.length</code> and <code>nums[i] &gt; nums[j]</code>.</p>

<p>Given two integers n and k, return the number of different arrays consist of numbers from <code>1</code> to <code>n</code> such that there are exactly <code>k</code> <strong>inverse pairs</strong>. Since the answer can be huge, return it <strong>modulo</strong> <code>10<sup>9</sup> + 7</code>.</p>

<p>&nbsp;</p>
<p><strong>Example 1:</strong></p>

<pre>
<strong>Input:</strong> n = 3, k = 0
<strong>Output:</strong> 1
<strong>Explanation:</strong> Only the array [1,2,3] which consists of numbers from 1 to 3 has exactly 0 inverse pairs.
</pre>

<p><strong>Example 2:</strong></p>

<pre>
<strong>Input:</strong> n = 3, k = 1
<strong>Output:</strong> 2
<strong>Explanation:</strong> The array [1,3,2] and [2,1,3] have exactly 1 inverse pair.
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= n &lt;= 1000</code></li>
	<li><code>0 &lt;= k &lt;= 1000</code></li>
</ul>
</div>

## ä¸­æ–‡é¢˜ç›®
<div><p>ç»™å‡ºä¸¤ä¸ªæ•´æ•°&nbsp;<code>n</code>&nbsp;å’Œ&nbsp;<code>k</code>ï¼Œæ‰¾å‡ºæ‰€æœ‰åŒ…å«ä»&nbsp;<code>1</code>&nbsp;åˆ°&nbsp;<code>n</code>&nbsp;çš„æ•°å­—ï¼Œä¸”æ°å¥½æ‹¥æœ‰&nbsp;<code>k</code>&nbsp;ä¸ªé€†åºå¯¹çš„ä¸åŒçš„æ•°ç»„çš„ä¸ªæ•°ã€‚</p>

<p>é€†åºå¯¹çš„å®šä¹‰å¦‚ä¸‹ï¼šå¯¹äºæ•°ç»„çš„ç¬¬<code>i</code>ä¸ªå’Œç¬¬&nbsp;<code>j</code>ä¸ªå…ƒç´ ï¼Œå¦‚æœæ»¡<code>i</code>&nbsp;&lt;&nbsp;<code>j</code>ä¸”&nbsp;<code>a[i]</code>&nbsp;&gt;&nbsp;<code>a[j]</code>ï¼Œåˆ™å…¶ä¸ºä¸€ä¸ªé€†åºå¯¹ï¼›å¦åˆ™ä¸æ˜¯ã€‚</p>

<p>ç”±äºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œåªéœ€è¦è¿”å› ç­”æ¡ˆ mod 10<sup>9</sup>&nbsp;+ 7 çš„å€¼ã€‚</p>

<p><strong>ç¤ºä¾‹ 1:</strong></p>

<pre>
<strong>è¾“å…¥:</strong> n = 3, k = 0
<strong>è¾“å‡º:</strong> 1
<strong>è§£é‡Š:</strong> 
åªæœ‰æ•°ç»„ [1,2,3] åŒ…å«äº†ä»1åˆ°3çš„æ•´æ•°å¹¶ä¸”æ­£å¥½æ‹¥æœ‰ 0 ä¸ªé€†åºå¯¹ã€‚
</pre>

<p><strong>ç¤ºä¾‹ 2:</strong></p>

<pre>
<strong>è¾“å…¥:</strong> n = 3, k = 1
<strong>è¾“å‡º:</strong> 2
<strong>è§£é‡Š:</strong> 
æ•°ç»„ [1,3,2] å’Œ [2,1,3] éƒ½æœ‰ 1 ä¸ªé€†åºå¯¹ã€‚
</pre>

<p><strong>è¯´æ˜:</strong></p>

<ol>
	<li>&nbsp;<code>n</code>&nbsp;çš„èŒƒå›´æ˜¯ [1, 1000] å¹¶ä¸” <code>k</code> çš„èŒƒå›´æ˜¯ [0, 1000]ã€‚</li>
</ol>
</div>

## é€šè¿‡ä»£ç 
<RecoDemo>
</RecoDemo>


## é«˜èµé¢˜è§£
## åºåˆ— DP

ä» $n$ å’Œ $k$ æ•°æ®èŒƒå›´å‡ä¸º $10^3$ å¯ä»¥çœ‹å‡ºè¿™æ˜¯ä¸€é“äºŒç»´çš„åŠ¨æ€è§„åˆ’é¢˜ã€‚

**å®šä¹‰ $f[i][j]$ ä¸ºè€ƒè™‘ä½¿ç”¨æ•°å€¼ $[1,i]$ï¼Œå‡‘æˆé€†åºå¯¹æ•°é‡æ°å¥½ä¸º $j$ çš„æ•°ç»„ä¸ªæ•°ã€‚**

ä¸å¤±ä¸€èˆ¬æ€§çš„è€ƒè™‘ $f[i][j]$ è¯¥å¦‚ä½•è®¡ç®—ï¼Œå¯¹ç¬¬ $i$ ä¸ªæ•°ï¼ˆå³æ•°å€¼ä¸º $i$ çš„æ•°ï¼‰æ‰€åœ¨ä½ç½®è¿›è¡Œè®¨è®ºï¼Œå…±æœ‰ $i$ ç§é€‰æ‹©ã€‚

å‡è®¾ç¬¬ $i$ ä¸ªæ•°æ‰€åœ¨ä½ç½®ä¸º $k$ï¼Œç”±äºæ•°å€¼ $i$ ä¸ºæ•´ä¸ªæ•°ç»„çš„æœ€å¤§å€¼ï¼Œå› æ­¤æ•°å€¼ $i$ ä¸å‰é¢æ‰€æœ‰æ•°å‡ä¸å½¢æˆé€†åºå¯¹ï¼Œä¸åé¢çš„æ‰€æœ‰æ•°å‡å½¢æˆé€†åºå¯¹ã€‚å› æ­¤ä¸æ•°å€¼ $i$ ç›´æ¥ç›¸å…³çš„é€†å‘å¯¹çš„æ•°é‡ä¸º $(i - 1)- k$ï¼Œç”±æ­¤ä¹Ÿå¾—å‡ºä¸ $i$ ä¸ç›¸å…³çš„é€†åºå¯¹æ•°é‡ä¸º $j - (i - 1 - k)$ï¼Œè€Œä¸ $i$ ä¸ç›¸å…³çš„é€†åºå¯¹æ•°é‡ç”± $f[i - 1][x]$ å¯å¾—å‡ºã€‚

ä¸¾ä¸ª ğŸŒ° å¸®åŠ©å¤§å®¶ç†è§£ï¼š

* å½“æ•°å€¼ $i$ æ”¾ç½®åœ¨ä¸‹æ ‡ä¸º $0$ çš„ä½ç½®ä¸Šï¼Œé‚£ä¹ˆç”±æ•°å€¼ $i$ äº§ç”Ÿçš„é€†åºå¯¹æ•°é‡ä¸º $i - 1$ï¼Œæ€»çš„é€†åºå¯¹æ•°é‡ä¸º $j$ï¼Œå› æ­¤ç”±æ•°å€¼èŒƒå›´ä¸º $[1, i - 1]$ï¼ˆä¸æ•°å€¼ $i$ ä¸ç›¸å…³ï¼‰æ„æˆçš„é€†åºå¯¹æ•°é‡ä¸º $j - (i - 1)$ï¼Œå³ $f[i - 1][j - (i - 1)]$ï¼›

* å½“æ•°å€¼ $i$ æ”¾ç½®åœ¨ä¸‹æ ‡ä¸º $1$ çš„ä½ç½®ä¸Šï¼Œé‚£ä¹ˆç”±æ•°å€¼ $i$ äº§ç”Ÿçš„é€†åºå¯¹æ•°é‡ä¸º $(i - 1) - 1$ï¼Œæ€»çš„é€†åºå¯¹æ•°é‡ä¸º $j$ï¼Œå› æ­¤ç”±æ•°å€¼èŒƒå›´ä¸º $[1, i - 1]$ï¼ˆä¸æ•°å€¼ $i$ ä¸ç›¸å…³ï¼‰æ„æˆçš„é€†åºå¯¹æ•°é‡ä¸º $j - (i - 1 - 1)$ï¼Œå³ $f[i - 1][j - (i - 1 - 1)]$ï¼›

    ...

* å½“æ•°å€¼ $i$ æ”¾ç½®åœ¨ä¸‹æ ‡ä¸º $k$ çš„ä½ç½®ä¸Šï¼Œé‚£ä¹ˆç”±æ•°å€¼ $i$ äº§ç”Ÿçš„é€†åºå¯¹æ•°é‡ä¸º $(i - 1) - k$ï¼Œæ€»çš„é€†åºå¯¹æ•°é‡ä¸º $j$ï¼Œå› æ­¤ç”±æ•°å€¼èŒƒå›´ä¸º $[1, i - 1]$ï¼ˆä¸æ•°å€¼ $i$ ä¸ç›¸å…³ï¼‰æ„æˆçš„é€†åºå¯¹æ•°é‡ä¸º $j - (i - 1 - k)$ï¼Œå³ $f[i - 1][j - (i - 1 - k)]$ã€‚

ç»¼ä¸Šï¼Œæœ€ç»ˆ $f[i][j]$ è½¬ç§»æ–¹ç¨‹ä¸ºï¼ˆ$k$ ä¸ºæ•°å€¼ $i$ æ”¾ç½®çš„ä½ç½®ï¼‰ï¼š

$$
f[i][j] = \sum_{k = 0}^{i - 1}(f[i - 1][j - (i - 1 - k)])
$$

å…±æœ‰ $n * k$ ä¸ªçŠ¶æ€ï¼Œæ¯ä¸ª $f[i][j]$ çš„è®¡ç®—éœ€è¦æšä¸¾æ•°å€¼ $i$ æ‰€åœ¨ä½ç½®å¹¶è¿›è¡Œç´¯åŠ ï¼Œæ€»çš„å¤æ‚åº¦ä¸º $O(n^2 *k)$ï¼Œè®¡ç®—é‡ä¸º $10^9$ï¼Œä¼š TLEã€‚

çŠ¶æ€æ•°é‡ä¸å¯å‡å°‘ï¼Œè€ƒè™‘å¦‚ä½•ä¼˜åŒ–å•ä¸ªçŠ¶æ€çš„è½¬ç§»è¿‡ç¨‹ã€‚

ä¸éš¾å‘ç° $\sum_{k = 0}^{i - 1}(f[i - 1][j - (i - 1 - k)])$ éƒ¨åˆ†ä¸ºä¸Šä¸€æ¬¡è½¬ç§»ç»“æœ $f[i - 1][x]$ çš„æŸä¸ªå‰ç¼€ï¼Œå¯ä»¥ä½¿ç”¨å‰ç¼€å’Œæ•°ç»„è¿›è¡Œä¼˜åŒ–ï¼Œä»è€Œå°†è®¡ç®—å•ä¸ªçŠ¶æ€çš„å¤æ‚åº¦ä» $O(n)$ é™åˆ° $O(1)$ã€‚

> ä¸€äº›ç»†èŠ‚ï¼šä¸ºå¤„ç†è´Ÿæ•°é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å–æ¨¡ä¹‹å‰å…ˆåŠ ä¸€æ¬¡ modï¼›å¦å¤–éœ€è¦å¯¹ $j$ å’Œ $i$ çš„å¤§å°è¿›è¡Œåˆ†æƒ…å†µè®¨è®ºï¼Œé˜²æ­¢æ•°å€¼ $i$ æ”¾ç½®çš„ä½ç½®â€œè¿‡äºé å‰â€å¯¼è‡´ç»„æˆé€†åºå¯¹çš„æ•°é‡è¶…è¿‡ $j$ã€‚

ä»£ç ï¼š
```Java []
class Solution {
    int mod = (int)1e9+7;
    public int kInversePairs(int n, int k) {
        int[][] f = new int[n + 1][k + 1];
        int[][] sum = new int[n + 1][k + 1];
        f[1][0] = 1;
        Arrays.fill(sum[1], 1);
        for (int i = 2; i <= n; i++) {
            for (int j = 0; j <= k; j++) {
                f[i][j] = j < i ? sum[i - 1][j] : (sum[i - 1][j] - sum[i - 1][j - (i - 1) - 1] + mod) % mod;
                sum[i][j] = j == 0 ? f[i][j] : (sum[i][j - 1] + f[i][j]) % mod;
            }
        }
        return f[n][k];
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n * k)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n * k)$

---

## å…¶ä»–ã€Œåºåˆ— DPã€ç›¸å…³å†…å®¹

è€ƒè™‘åŠ ç»ƒå¦‚ä¸‹ã€Œåºåˆ— DPã€é¢˜ç›® ğŸ­ğŸ­

| é¢˜ç›®                                                         | é¢˜è§£                                                         | éš¾åº¦ | æ¨èæŒ‡æ•° |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ---- | -------- |
| [354. ä¿„ç½—æ–¯å¥—å¨ƒä¿¡å°é—®é¢˜](https://leetcode-cn.com/problems/russian-doll-envelopes/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/russian-doll-envelopes/solution/zui-chang-shang-sheng-zi-xu-lie-bian-xin-6s8d/) | å›°éš¾ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©    |
| [368. æœ€å¤§æ•´é™¤å­é›†](https://leetcode-cn.com/problems/largest-divisible-subset/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/largest-divisible-subset/solution/gong-shui-san-xie-noxiang-xin-ke-xue-xi-0a3jc/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©     |
| [446. ç­‰å·®æ•°åˆ—åˆ’åˆ† II - å­åºåˆ—](https://leetcode-cn.com/problems/arithmetic-slices-ii-subsequence/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/arithmetic-slices-ii-subsequence/solution/gong-shui-san-xie-xiang-jie-ru-he-fen-xi-ykvk/) | å›°éš¾ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©    |
| [583. ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ](https://leetcode-cn.com/problems/delete-operation-for-two-strings/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/delete-operation-for-two-strings/solution/gong-shui-san-xie-cong-liang-chong-xu-li-wqv7/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©     |
| [673. æœ€é•¿é€’å¢å­åºåˆ—çš„ä¸ªæ•°](https://leetcode-cn.com/problems/number-of-longest-increasing-subsequence/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/number-of-longest-increasing-subsequence/solution/gong-shui-san-xie-lis-de-fang-an-shu-wen-obuz/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©     |
| [740. åˆ é™¤å¹¶è·å¾—ç‚¹æ•°](https://leetcode-cn.com/problems/delete-and-earn/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/delete-and-earn/solution/gong-shui-san-xie-zhuan-huan-wei-xu-lie-6c9t0/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©    |
| [978. æœ€é•¿æ¹æµå­æ•°ç»„](https://leetcode-cn.com/problems/longest-turbulent-subarray/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/longest-turbulent-subarray/solution/xiang-jie-dong-tai-gui-hua-ru-he-cai-dp-3spgj/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©      |
| [1035. ä¸ç›¸äº¤çš„çº¿](https://leetcode-cn.com/problems/uncrossed-lines/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/uncrossed-lines/solution/gong-shui-san-xie-noxiang-xin-ke-xue-xi-bkaas/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©     |
| [1143. æœ€é•¿å…¬å…±å­åºåˆ—](https://leetcode-cn.com/problems/longest-common-subsequence/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/longest-common-subsequence/solution/gong-shui-san-xie-zui-chang-gong-gong-zi-xq0h/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©     |
| [1218. æœ€é•¿å®šå·®å­åºåˆ—](https://leetcode-cn.com/problems/longest-arithmetic-subsequence-of-given-difference/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/longest-arithmetic-subsequence-of-given-difference/solution/gong-shui-san-xie-jie-he-tan-xin-de-zhua-dj1k/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©    |
| [1473. ç²‰åˆ·æˆ¿å­ III](https://leetcode-cn.com/problems/paint-house-iii/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/paint-house-iii/solution/gong-shui-san-xie-san-wei-dong-tai-gui-h-ud7m/) | å›°éš¾ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©     |
| [1713. å¾—åˆ°å­åºåˆ—çš„æœ€å°‘æ“ä½œæ¬¡æ•°](https://leetcode-cn.com/problems/minimum-operations-to-make-a-subsequence/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/minimum-operations-to-make-a-subsequence/solution/gong-shui-san-xie-noxiang-xin-ke-xue-xi-oj7yu/) | å›°éš¾ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©    |

**æ³¨ï¼šä»¥ä¸Šç›®å½•æ•´ç†æ¥è‡ª [wiki](https://github.com/SharingSource/LogicStack-LeetCode/wiki/åºåˆ—-DP)ï¼Œä»»ä½•å½¢å¼çš„è½¬è½½å¼•ç”¨è¯·ä¿ç•™å‡ºå¤„ã€‚**

---

## æœ€å

**å¦‚æœæœ‰å¸®åŠ©åˆ°ä½ ï¼Œè¯·ç»™é¢˜è§£ç‚¹ä¸ªèµå’Œæ”¶è—ï¼Œè®©æ›´å¤šçš„äººçœ‹åˆ° ~ ("â–”â–¡â–”)/**

ä¹Ÿæ¬¢è¿ä½  [å…³æ³¨æˆ‘](https://oscimg.oschina.net/oscnet/up-19688dc1af05cf8bdea43b2a863038ab9e5.png)ï¼ˆå…¬ä¸»å·åå°å›å¤ã€Œé€ä¹¦ã€å³å¯å‚ä¸é•¿æœŸçœ‹é¢˜è§£å­¦ç®—æ³•é€å®ä½“ä¹¦æ´»åŠ¨ï¼‰æˆ– åŠ å…¥[ã€Œç»„é˜Ÿæ‰“å¡ã€](https://leetcode-cn.com/u/ac_oier/)å°ç¾¤ ï¼Œæä¾›å†™ã€Œè¯æ˜ã€&ã€Œæ€è·¯ã€çš„é«˜è´¨é‡é¢˜è§£ã€‚

æ‰€æœ‰é¢˜è§£å·²ç»åŠ å…¥ [åˆ·é¢˜æŒ‡å—](https://github.com/SharingSource/LogicStack-LeetCode/wiki)ï¼Œæ¬¢è¿ star å“¦ ~ 

## ç»Ÿè®¡ä¿¡æ¯
| é€šè¿‡æ¬¡æ•° | æäº¤æ¬¡æ•° | ACæ¯”ç‡ |
| :------: | :------: | :------: |
|    18757    |    35927    |   52.2%   |

## æäº¤å†å²
| æäº¤æ—¶é—´ | æäº¤ç»“æœ | æ‰§è¡Œæ—¶é—´ |  å†…å­˜æ¶ˆè€—  | è¯­è¨€ |
| :------: | :------: | :------: | :--------: | :--------: |
