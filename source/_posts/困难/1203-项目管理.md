---
title: 1203-é¡¹ç›®ç®¡ç†(Sort Items by Groups Respecting Dependencies)
date: 2021-12-03 22:19:34
categories:
  - å›°éš¾
tags:
  - æ·±åº¦ä¼˜å…ˆæœç´¢
  - å¹¿åº¦ä¼˜å…ˆæœç´¢
  - å›¾
  - æ‹“æ‰‘æ’åº
---

> åŸæ–‡é“¾æ¥: https://leetcode-cn.com/problems/sort-items-by-groups-respecting-dependencies


## è‹±æ–‡åŸæ–‡
<div><p>There are&nbsp;<code>n</code>&nbsp;items each&nbsp;belonging to zero or one of&nbsp;<code>m</code>&nbsp;groups where <code>group[i]</code>&nbsp;is the group that the <code>i</code>-th item belongs to and it&#39;s equal to <code>-1</code>&nbsp;if the <code>i</code>-th item belongs to no group. The items and the groups are zero indexed. A group can have no item belonging to it.</p>

<p>Return a sorted list of the items such that:</p>

<ul>
	<li>The items that belong to the same group are next to each other in the sorted list.</li>
	<li>There are some&nbsp;relations&nbsp;between these items where&nbsp;<code>beforeItems[i]</code>&nbsp;is a list containing all the items that should come before the&nbsp;<code>i</code>-th item in the sorted array (to the left of the&nbsp;<code>i</code>-th item).</li>
</ul>

<p>Return any solution if there is more than one solution and return an <strong>empty list</strong>&nbsp;if there is no solution.</p>

<p>&nbsp;</p>
<p><strong>Example 1:</strong></p>

<p><strong><img alt="" src="https://assets.leetcode.com/uploads/2019/09/11/1359_ex1.png" style="width: 191px; height: 181px;" /></strong></p>

<pre>
<strong>Input:</strong> n = 8, m = 2, group = [-1,-1,1,0,0,1,0,-1], beforeItems = [[],[6],[5],[6],[3,6],[],[],[]]
<strong>Output:</strong> [6,3,4,1,5,2,0,7]
</pre>

<p><strong>Example 2:</strong></p>

<pre>
<strong>Input:</strong> n = 8, m = 2, group = [-1,-1,1,0,0,1,0,-1], beforeItems = [[],[6],[5],[6],[3],[],[4],[]]
<strong>Output:</strong> []
<strong>Explanation:</strong>&nbsp;This is the same as example 1 except that 4 needs to be before 6 in the sorted list.
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= m &lt;= n &lt;= 3 * 10<sup>4</sup></code></li>
	<li><code>group.length == beforeItems.length == n</code></li>
	<li><code>-1 &lt;= group[i] &lt;= m - 1</code></li>
	<li><code>0 &lt;= beforeItems[i].length &lt;= n - 1</code></li>
	<li><code>0 &lt;= beforeItems[i][j] &lt;= n - 1</code></li>
	<li><code>i != beforeItems[i][j]</code></li>
	<li><code>beforeItems[i]&nbsp;</code>does not contain&nbsp;duplicates elements.</li>
</ul>
</div>

## ä¸­æ–‡é¢˜ç›®
<div><p>æœ‰ <code>n</code> ä¸ªé¡¹ç›®ï¼Œæ¯ä¸ªé¡¹ç›®æˆ–è€…ä¸å±äºä»»ä½•å°ç»„ï¼Œæˆ–è€…å±äº <code>m</code> ä¸ªå°ç»„ä¹‹ä¸€ã€‚<code>group[i]</code> è¡¨ç¤ºç¬¬ <code>i</code> ä¸ªé¡¹ç›®æ‰€å±çš„å°ç»„ï¼Œå¦‚æœç¬¬ <code>i</code> ä¸ªé¡¹ç›®ä¸å±äºä»»ä½•å°ç»„ï¼Œåˆ™ <code>group[i]</code> ç­‰äº <code>-1</code>ã€‚é¡¹ç›®å’Œå°ç»„éƒ½æ˜¯ä»é›¶å¼€å§‹ç¼–å·çš„ã€‚å¯èƒ½å­˜åœ¨å°ç»„ä¸è´Ÿè´£ä»»ä½•é¡¹ç›®ï¼Œå³æ²¡æœ‰ä»»ä½•é¡¹ç›®å±äºè¿™ä¸ªå°ç»„ã€‚</p>

<p>è¯·ä½ å¸®å¿™æŒ‰è¦æ±‚å®‰æ’è¿™äº›é¡¹ç›®çš„è¿›åº¦ï¼Œå¹¶è¿”å›æ’åºåçš„é¡¹ç›®åˆ—è¡¨ï¼š</p>

<ul>
	<li>åŒä¸€å°ç»„çš„é¡¹ç›®ï¼Œæ’åºååœ¨åˆ—è¡¨ä¸­å½¼æ­¤ç›¸é‚»ã€‚</li>
	<li>é¡¹ç›®ä¹‹é—´å­˜åœ¨ä¸€å®šçš„ä¾èµ–å…³ç³»ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªåˆ—è¡¨ <code>beforeItems</code>Â æ¥è¡¨ç¤ºï¼Œå…¶ä¸­Â <code>beforeItems[i]</code>Â è¡¨ç¤ºåœ¨è¿›è¡Œç¬¬Â <code>i</code>Â ä¸ªé¡¹ç›®å‰ï¼ˆä½äºç¬¬ <code>i</code>Â ä¸ªé¡¹ç›®å·¦ä¾§ï¼‰åº”è¯¥å®Œæˆçš„æ‰€æœ‰é¡¹ç›®ã€‚</li>
</ul>

<p>å¦‚æœå­˜åœ¨å¤šä¸ªè§£å†³æ–¹æ¡ˆï¼Œåªéœ€è¦è¿”å›å…¶ä¸­ä»»æ„ä¸€ä¸ªå³å¯ã€‚å¦‚æœæ²¡æœ‰åˆé€‚çš„è§£å†³æ–¹æ¡ˆï¼Œå°±è¯·è¿”å›ä¸€ä¸ª <strong>ç©ºåˆ—è¡¨ </strong>ã€‚</p>

<p>Â </p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<p><strong><img alt="" src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2019/09/22/1359_ex1.png" style="height: 181px; width: 191px;" /></strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>n = 8, m = 2, group = [-1,-1,1,0,0,1,0,-1], beforeItems = [[],[6],[5],[6],[3,6],[],[],[]]
<strong>è¾“å‡ºï¼š</strong>[6,3,4,1,5,2,0,7]
</pre>

<p><strong>ç¤ºä¾‹Â 2ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>n = 8, m = 2, group = [-1,-1,1,0,0,1,0,-1], beforeItems = [[],[6],[5],[6],[3],[],[4],[]]
<strong>è¾“å‡ºï¼š</strong>[]
<strong>è§£é‡Šï¼š</strong>ä¸ç¤ºä¾‹ 1 å¤§è‡´ç›¸åŒï¼Œä½†æ˜¯åœ¨æ’åºåçš„åˆ—è¡¨ä¸­ï¼Œ4 å¿…é¡»æ”¾åœ¨ 6 çš„å‰é¢ã€‚
</pre>

<p>Â </p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>1 <= m <= n <= 3 * 10<sup>4</sup></code></li>
	<li><code>group.length == beforeItems.length == n</code></li>
	<li><code>-1 <= group[i] <= m - 1</code></li>
	<li><code>0 <= beforeItems[i].length <= n - 1</code></li>
	<li><code>0 <= beforeItems[i][j] <= n - 1</code></li>
	<li><code>i != beforeItems[i][j]</code></li>
	<li><code>beforeItems[i]</code> ä¸å«é‡å¤å…ƒç´ </li>
</ul>
</div>

## é€šè¿‡ä»£ç 
<RecoDemo>
</RecoDemo>


## å®˜æ–¹é¢˜è§£
### ğŸ“º è§†é¢‘è®²è§£ 

**è§†é¢‘æ—¶é—´çº¿**ï¼š

+ è§£è¯»é¢˜æ„ï¼š00:10
+ æ‹“æ‰‘æ’åºç®€ä»‹ï¼š03:36
+ ç¤ºä¾‹ 1 åˆ†æï¼š07:50
+ **ç¼–ç å‰çš„æ€è·¯åˆ†æ**ï¼š09:59
+ å‚è€ƒä»£ç ï¼š12:18
+ å¤æ‚åº¦åˆ†æã€ç»ƒä¹ ï¼š21:22

**åŠ›æ‰£å›æ¸©é¦¨å°è´´å£«**ï¼š

+ è§‰å¾—è§†é¢‘æ—¶é—´é•¿çš„æ‰£å‹ï¼Œå¯ä»¥åœ¨è§†é¢‘å³ä¸‹è§’çš„ã€Œè®¾ç½®ã€æŒ‰é’®å¤„é€‰æ‹© 1.5 å€é€Ÿæˆ–è€… 2 å€é€Ÿè§‚çœ‹ï¼›
+ å¦‚æœå·²ç»å……åˆ†äº†è§£äº†é¢˜æ„ï¼Œå¯¹ã€Œæ‹“æ‰‘æ’åºã€è¿™ä¸ªçŸ¥è¯†ç‚¹å·²ç»éå¸¸ç†Ÿæ‚‰çš„æœ‹å‹ï¼Œå¯ä»¥ç›´æ¥è§‚çœ‹ã€Œç¼–ç å‰çš„æ€è·¯åˆ†æã€ï¼ˆ09:59 å¼€å§‹ï¼‰ã€‚

![1203 é¡¹ç›®ç®¡ç†.mp4](612f4ca0-a345-4731-9b0b-0233c58da69f)

### ğŸ“– æ–‡å­—è§£æ

è¿™ä¸ªé—®é¢˜æ ‡æ³¨ä¸ºã€Œå›°éš¾ã€ï¼Œä½†æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜ç”¨åˆ°çš„çŸ¥è¯†ç‚¹å…¶å®å¤§å®¶éƒ½è§è¿‡ã€‚è¦ç‚¹å’Œæç¤ºå¦‚ä¸‹ï¼š

1. ä»é—®é¢˜çš„æè¿°ï¼ˆä»»åŠ¡è®¡åˆ’å®‰æ’ï¼‰å’Œç»“æœè¦æ±‚ï¼ˆæœ‰å¯èƒ½ä¸å­˜åœ¨ï¼Œå¦‚æœæœ‰ï¼Œå¯èƒ½ä¸å”¯ä¸€ï¼‰ï¼Œå¯ä»¥çœ‹å‡ºæ€è·¯æ˜¯ã€Œæ‹“æ‰‘æ’åºã€ï¼›
2. **è¯»æ‡‚é¢˜ç›®çš„æ„æ€ï¼Œè¿™ä¸€ç‚¹éå¸¸é‡è¦**ï¼Œå¼„æ¸…æ¥šè¾“å…¥çš„æ¯ä¸€ä¸ªå˜é‡çš„å«ä¹‰ï¼Œå¼„æ¸…æ¥šä»€ä¹ˆå«ã€Œæ— äººæ¥æ‰‹ã€ä»¥åŠ `group[i] = - 1` çš„å«ä¹‰ï¼›
3. å®‰æ’ä»»åŠ¡çš„ç¬¬ä¸€ä¼˜å…ˆçº§ï¼šç»„ï¼ˆ`group`ï¼‰ç›¸åŒçš„é¡¹ç›®å¿…é¡»æ’åœ¨ä¸€èµ·ï¼Œç¬¬äºŒä¼˜å…ˆçº§ï¼šé¡¹ç›®ï¼ˆ`item`ï¼‰çš„å…ˆåé¡ºåºæ»¡è¶³æ‹“æ‰‘åºï¼›
4. **å…³é”® 1**ï¼šé¢˜ç›®ç»™å‡ºçš„ `item` å’Œ `beforItem` å¯ä»¥å¾—åˆ° `item` é¡»è¦æ»¡è¶³çš„å…ˆåé¡ºåºã€‚è€Œæ¯ä¸€ä¸ª `item` æˆ–è€…å¯¹åº”ä¸€ä¸ª `group`ï¼Œæˆ–è€…ä¸å±äºä»»ä½•ä¸€ä¸ªç»™å®šçš„ `group`ï¼Œ**æ ¹æ® `item` å’Œ `group` çš„å‡½æ•°å…³ç³»ï¼ˆä» `item` å¯ä»¥å¾—åˆ°å”¯ä¸€çš„ `group` ç¼–å·ï¼‰ï¼šå¯ä»¥å¾—åˆ°å®‰æ’ç»„ï¼ˆ`group`ï¼‰çš„å…ˆåé¡ºåºï¼ˆè¿™ä¸€ç‚¹å¾ˆå…³é”®ï¼‰**ï¼›
5. **å…³é”® 2**ï¼šåˆ†åˆ«å¯¹ `group` å’Œ `item` æ‰§è¡Œæ‹“æ‰‘æ’åºï¼Œä» `item -> group` çš„ï¼ˆå¤šå¯¹ä¸€å…³ç³»ï¼‰åå‘å¾—åˆ° `group -> item` çš„ä¸€å¯¹å¤šå…³ç³»ï¼Œç”±äº `item` æŒ‰ç…§æ‹“æ‰‘åºæ’åˆ—ï¼Œå»ºç«‹ `group` åˆ° `item` çš„ä¸€å¯¹å¤šå…³ç³»ä»¥åï¼Œæ¯ä¸€ä¸ª `group` å¯¹åº”çš„ `item` åˆ—è¡¨æ˜¯ç¬¦åˆæ‹“æ‰‘åºçš„ï¼›
6. ä» `group` çš„æ‹“æ‰‘åºï¼Œå’Œ `group` åˆ° `item` çš„ä¸€å¯¹å¤šå…³ç³»ï¼Œå¾—åˆ°çš„ `item` åˆ—è¡¨å°±æ˜¯æ»¡è¶³é¢˜ç›®æ„æ€çš„ä¸€ä¸ªç»“æœã€‚

---

ä¸‹é¢æ˜¯è¯¦è§£ã€‚

### æ–¹æ³•ï¼šæ‹“æ‰‘æ’åº

#### 1. å¦‚ä½•å¾—åˆ°ç»„ `group` çš„å…ˆåå…³ç³»

+ å¦‚æœä¸è€ƒè™‘ã€ŒåŒä¸€å°ç»„çš„é¡¹ç›®ï¼Œæ’åºååœ¨åˆ—è¡¨ä¸­å½¼æ­¤ç›¸é‚»ã€ã€‚æ ¹æ® `beforeItems` å¯ä»¥å¾—åˆ°é¡¹ç›® `item` çš„æ‹“æ‰‘æ’åºç»“æœï¼›
+ ç”±æ•°ç»„ `group` å¯ä»¥å¾—åˆ°é¡¹ç›® `item` å¯¹åº”çš„ç»„çš„ç¼–å·ã€‚

ç”±ä»¥ä¸Šä¸¤ç‚¹ï¼Œå¯ä»¥å¾—åˆ° **ç»„ `group` çš„å…ˆåå…³ç³»**ã€‚

ä»¥ç¤ºä¾‹ 1 ä¸ºä¾‹ï¼š

![img](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2019/09/22/1359_ex1.png)

è¡¨æ ¼ç¬¬ 2 è¡Œï¼ˆä¸è®¡ç®—è¡¨å¤´ï¼‰ï¼šé¡¹ç›® `6` ï¼ˆç»„å· `0`ï¼‰å¿…éœ€åœ¨é¡¹ç›® `1` ï¼ˆä¸å±äºä»»ä½•ç»„ï¼Œæš‚æ—¶è®°ç»„å·ä¸º `2`ï¼‰çš„å‰é¢ï¼Œå¯ä»¥å¾—å‡ºï¼šç»„å·ä¸º `0` çš„æ‰€æœ‰é¡¹ç›®åº”è¯¥ä½äºç»„å·ä¸º `2` çš„æ‰€æœ‰é¡¹ç›®çš„å‰é¢ã€‚

æœ‰å¯èƒ½å‡ºç°è¿™ç§æƒ…å†µï¼šå‰é©±é¡¹ç›®å’Œå½“å‰é¡¹ç›®åˆ†åœ¨ä¸€ç»„ï¼Œè¿™æ ·çš„æ•°æ®éœ€è¦èˆå¼ƒï¼Œä¾‹å¦‚ç¬¬ 5 è¡Œã€‚é¡¹ç›® `3` ã€é¡¹ç›® `6` å¿…éœ€è¢«å®‰æ’åœ¨é¡¹ç›® `4` çš„å‰é¢ï¼Œä½†æ˜¯å®ƒä»¬çš„ç»„å·éƒ½ä¸º `0`ã€‚

#### 2. å¦‚ä½•è®©ç›¸åŒç»„å·çš„é¡¹ç›®åœ¨ä¸€èµ·

ç”±ä¸Šä¸€æ­¥çš„ç»“æœå¾—åˆ°ã€Œç»„çš„å…ˆåå…³ç³»ã€ï¼Œè¿›è€Œå¾—åˆ°ç»„ **`group` çš„æ‹“æ‰‘æ’åºç»“æœ**ã€‚è€Œ **åŒç»„çš„é¡¹ç›®ä¹Ÿå¿…é¡»æ»¡è¶³å…ˆåé¡ºåº**ï¼Œå› æ­¤å¿…éœ€å¯¹é¡¹ç›® `item` ä¹Ÿæ‰§è¡Œä¸€æ¬¡æ‹“æ‰‘æ’åºã€‚

æŒ‰ç…§é¡¹ç›® `item` çš„æ‹“æ‰‘æ’åºç»“æœï¼Œ**ä¾æ¬¡** æŠŠå®ƒä»¬æ˜ å°„åˆ°å¯¹åº”çš„ç»„ `group` é‡Œï¼Œè¿™ä¸€æ­¥éœ€è¦å»ºç«‹ä¸€ä¸ªæ˜ å°„å…³ç³»ï¼škey æ˜¯ç»„ç¼–å·ï¼Œvalue æ˜¯åŒä¸€ç»„çš„é¡¹ç›®æŒ‰ç…§æ‹“æ‰‘æ’åºçš„ç»“æœã€‚

å†æ ¹æ®ç»„ `group` çš„æ‹“æ‰‘æ’åºçš„ç»“æœï¼Œä»¥åŠä¸Šä¸€æ­¥å»ºç«‹çš„æ˜ å°„å…³ç³»ï¼ŒæŠŠ `group` æ˜ å°„åˆ° `item` åˆ—è¡¨ï¼Œå°±å¾—åˆ°äº†é¢˜ç›®è¦æ±‚çš„ â‘  åŒç»„é¡¹ç›®æ”¾åœ¨ä¸€èµ· â‘¡ ä¸”é¡¹ç›®ä¹‹é—´è¿˜æ»¡è¶³æ‹“æ‰‘åºçš„æ‹“æ‰‘æ’åºç»“æœã€‚

#### 3. ç»†èŠ‚ï¼šä¸ºä»€ä¹ˆé¡»è¦ç»™ `group[i] = -1` çš„é¡¹ç›®èµ‹å€¼ä¸ºä¸€ä¸ªæ–°çš„ç»„å·ï¼Ÿ

æ ¹æ®é¢˜æ„ï¼Œ`group[i] = -1` è¡¨ç¤ºç¼–å·ä¸º `i` çš„é¡¹ç›®ï¼Œä¸å±äºç¼–å·ä¸º `0` åˆ° `m - 1` çš„è¿™ `m` ä¸ªç»„ï¼Œæ¢å¥è¯è¯´ï¼Œå®Œæˆè¿™äº›é¡¹ç›®ä¸éœ€è¦ååŒåˆä½œã€‚

åˆå› ä¸ºæˆ‘ä»¬éœ€è¦æ ¹æ®ã€Œç»„ã€çš„å…ˆåé¡ºåºå¾—åˆ°ã€Œç»„çš„æ‹“æ‰‘æ’åºçš„ç»“æœã€ã€‚**ä¸ºäº†é¿å…æˆ‘ä»¬è®¾è®¡çš„ç®—æ³•è®¤ä¸º `group[i] = -1` çš„è¿™äº›é¡¹ç›®éƒ½åœ¨åŒä¸€ç»„**ï¼Œå› æ­¤ç»™ `group[i] = -1` çš„è¿™äº›ç»„ä¸€ä¸ªä¸åŒäº `0` åˆ° `m - 1` çš„ç¼–å·ï¼Œä» `m` å¼€å§‹é€ä¸ªç»™æ¯ä¸ªé¡¹ç›®ç¼–å·å³å¯ã€‚  

**å‚è€ƒä»£ç **ï¼š

```Java []
import java.util.ArrayList;
import java.util.HashMap;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import java.util.Queue;

public class Solution {

    public int[] sortItems(int n, int m, int[] group, List<List<Integer>> beforeItems) {
        // ç¬¬ 1 æ­¥ï¼šæ•°æ®é¢„å¤„ç†ï¼Œç»™æ²¡æœ‰å½’å±äºä¸€ä¸ªç»„çš„é¡¹ç›®ç¼–ä¸Šç»„å·
        for (int i = 0; i < group.length; i++) {
            if (group[i] == -1) {
                group[i] = m;
                m++;
            }
        }

        // ç¬¬ 2 æ­¥ï¼šå®ä¾‹åŒ–ç»„å’Œé¡¹ç›®çš„é‚»æ¥è¡¨
        List<Integer>[] groupAdj = new ArrayList[m];
        List<Integer>[] itemAdj = new ArrayList[n];
        for (int i = 0; i < m; i++) {
            groupAdj[i] = new ArrayList<>();
        }
        for (int i = 0; i < n; i++) {
            itemAdj[i] = new ArrayList<>();
        }

        // ç¬¬ 3 æ­¥ï¼šå»ºå›¾å’Œç»Ÿè®¡å…¥åº¦æ•°ç»„
        int[] groupsIndegree = new int[m];
        int[] itemsIndegree = new int[n];

        int len = group.length;
        for (int i = 0; i < len; i++) {
            int currentGroup = group[i];
            for (int beforeItem : beforeItems.get(i)) {
                int beforeGroup = group[beforeItem];
                if (beforeGroup != currentGroup) {
                    groupAdj[beforeGroup].add(currentGroup);
                    groupsIndegree[currentGroup]++;
                }
            }
        }

        for (int i = 0; i < n; i++) {
            for (Integer item : beforeItems.get(i)) {
                itemAdj[item].add(i);
                itemsIndegree[i]++;
            }
        }

        // ç¬¬ 4 æ­¥ï¼šå¾—åˆ°ç»„å’Œé¡¹ç›®çš„æ‹“æ‰‘æ’åºç»“æœ
        List<Integer> groupsList = topologicalSort(groupAdj, groupsIndegree, m);
        if (groupsList.size() == 0) {
            return new int[0];
        }
        List<Integer> itemsList = topologicalSort(itemAdj, itemsIndegree, n);
        if (itemsList.size() == 0) {
            return new int[0];
        }

        // ç¬¬ 5 æ­¥ï¼šæ ¹æ®é¡¹ç›®çš„æ‹“æ‰‘æ’åºç»“æœï¼Œé¡¹ç›®åˆ°ç»„çš„å¤šå¯¹ä¸€å…³ç³»ï¼Œå»ºç«‹ç»„åˆ°é¡¹ç›®çš„ä¸€å¯¹å¤šå…³ç³»
        // keyï¼šç»„ï¼Œvalueï¼šåœ¨åŒä¸€ç»„çš„é¡¹ç›®åˆ—è¡¨
        Map<Integer, List<Integer>> groups2Items = new HashMap<>();
        for (Integer item : itemsList) {
            groups2Items.computeIfAbsent(group[item], key -> new ArrayList<>()).add(item);
        }

        // ç¬¬ 6 æ­¥ï¼šæŠŠç»„çš„æ‹“æ‰‘æ’åºç»“æœæ›¿æ¢æˆä¸ºé¡¹ç›®çš„æ‹“æ‰‘æ’åºç»“æœ
        List<Integer> res = new ArrayList<>();
        for (Integer groupId : groupsList) {
            List<Integer> items = groups2Items.getOrDefault(groupId, new ArrayList<>());
            res.addAll(items);
        }
        return res.stream().mapToInt(Integer::valueOf).toArray();
    }

    private List<Integer> topologicalSort(List<Integer>[] adj, int[] inDegree, int n) {
        List<Integer> res = new ArrayList<>();
        Queue<Integer> queue = new LinkedList<>();
        for (int i = 0; i < n; i++) {
            if (inDegree[i] == 0) {
                queue.offer(i);
            }
        }

        while (!queue.isEmpty()) {
            Integer front = queue.poll();
            res.add(front);
            for (int successor : adj[front]) {
                inDegree[successor]--;
                if (inDegree[successor] == 0) {
                    queue.offer(successor);
                }
            }
        }

        if (res.size() == n) {
            return res;
        }
        return new ArrayList<>();
    }
}
```


**å¤æ‚åº¦åˆ†æ**ï¼š

**è¯´æ˜**ï¼šè¿™é‡Œä¸ºäº†è¡¨è¾¾ä¸¥è°¨ï¼Œæ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦çš„æè¿°æ¯”è¾ƒç†è®ºåŒ–ã€‚å¤§å®¶æœªå¿…é¡»è¦æ·±ç©¶ã€‚å°±å½“å‰è¿™ä¸ªé—®é¢˜è€Œè¨€ï¼Œæ‹“æ‰‘æ’åºå°±æ˜¯å°±æ˜¯åœ¨å›¾ä¸­è¿›è¡Œä¸€æ¬¡å¹¿åº¦ä¼˜å…ˆéå†ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºå›¾çš„é¡¶ç‚¹æ•°åŠ è¾¹æ•°ï¼Œå‡è®¾å½“å‰é—®é¢˜çš„å›¾ç»“æ„çš„é¡¶ç‚¹æ•°ä¸º $V$ã€è¾¹æ•°ä¸º $E$ï¼Œå¯ä»¥ç®€è®°æ—¶é—´å¤æ‚åº¦ä¸º $O(V + E)$ã€‚


+ æ—¶é—´å¤æ‚åº¦ï¼š$O(m + n^2 + E_{group} + E_{item} )$ï¼Œè¿™é‡Œ $n$ æ˜¯é¡¹ç›®çš„æ€»æ•°ï¼Œ$m$ æ˜¯ç»„çš„æ€»æ•°ï¼ˆæŠŠæ ‡è®°ä¸º $-1$ çš„ç»„é¢„å¤„ç†ä»¥åï¼Œæ–°çš„ç»„çš„æ€»æ•°ä¸ä¼šè¶…è¿‡ $2m$ï¼‰ï¼›
  + å¯¹ç»„çš„æ•°æ®è¿›è¡Œé¢„å¤„ç† $O(m)$ï¼›
  + æ„å»ºç»„çš„é‚»æ¥è¡¨ $O(m)$ã€é¡¹ç›®çš„é‚»æ¥è¡¨ $O(n^2)$ï¼Œéå† `before`ï¼Œæœ€æç«¯æƒ…å†µä¸‹ï¼Œç¬¬ $1$ ä¸ªé¡¶ç‚¹æŒ‡å‘æ‰€æœ‰å‰©ä½™ $n - 1$ ä¸ªé¡¶ç‚¹ï¼Œç¬¬ $2$ ä¸ªé¡¶ç‚¹æŒ‡å‘æ‰€æœ‰å‰©ä½™ $n - 2$ ä¸ªé¡¶ç‚¹ï¼Œâ€¦â€¦ï¼›
  + æ„å»ºç»„çš„å…¥åº¦æ•°ç»„ $O(m)$ã€é¡¹ç›®å…¥åº¦æ•°ç»„ $O(n)$ï¼›
  + æ‰§è¡Œç»„çš„æ‹“æ‰‘æ’åº$O(m + E_{group})$ã€é¡¹ç›®çš„æ‹“æ‰‘æ’åº $O(n + E_{item})$ã€‚è¿™é‡Œç”¨ $E_{group}$ è¡¨ç¤ºç»„çš„é‚»æ¥è¡¨çš„è¾¹æ•°ï¼Œ $E_{item}$ è¡¨ç¤ºé¡¹ç›®çš„é‚»æ¥è¡¨çš„è¾¹æ•°ï¼›
  + æ„å»ºç»„åˆ°é¡¹ç›®çš„ä¸€å¯¹å¤šå…³ç³» $O(m + n)$ï¼›
  + è¾“å‡ºç¬¦åˆé¢˜ç›®è¦æ±‚çš„ç»“æœ $O(m + n)$ã€‚

+ ç©ºé—´å¤æ‚åº¦ï¼š$O(m + n^2)$ï¼›

  + ç»„çš„é‚»æ¥è¡¨ $O(m)$ã€é¡¹ç›®çš„é‚»æ¥è¡¨ $O(n^2)$ï¼›
  + ç»„çš„å…¥åº¦æ•°ç»„ $O(m)$ã€é¡¹ç›®å…¥åº¦æ•°ç»„ $O(n)$ï¼›
  + ç»„åˆ°é¡¹ç›®çš„ä¸€å¯¹å¤šå…³ç³» $O(m + n)$ï¼›
  + ç¬¦åˆé¢˜ç›®è¦æ±‚çš„ç»“æœ $O(m + n)$ã€‚

---


### ç»ƒä¹ 



1. ã€ŒåŠ›æ‰£ã€ç¬¬ 207 é¢˜ï¼š[è¯¾ç¨‹è¡¨](https://leetcode-cn.com/problems/course-schedule)ï¼ˆä¸­ç­‰ï¼‰ï¼›
2. ã€ŒåŠ›æ‰£ã€ç¬¬ 210 é¢˜ï¼š[è¯¾ç¨‹è¡¨ II](https://leetcode-cn.com/problems/course-schedule-ii)ï¼ˆä¸­ç­‰ï¼‰ï¼›
3. ã€ŒåŠ›æ‰£ã€ç¬¬ 301 é¢˜ï¼š[æœ€å°é«˜åº¦æ ‘](https://leetcode-cn.com/problems/minimum-height-trees)ï¼ˆä¸­ç­‰ï¼‰ï¼›
4. ã€ŒåŠ›æ‰£ã€ç¬¬ 802 é¢˜ï¼š[æ‰¾åˆ°æœ€ç»ˆçš„å®‰å…¨çŠ¶æ€](https://leetcode-cn.com/problems/find-eventual-safe-states)ï¼ˆä¸­ç­‰ï¼‰ï¼›
5. ã€ŒåŠ›æ‰£ã€ç¬¬ 630 é¢˜ï¼š[è¯¾ç¨‹è¡¨ III](https://leetcode-cn.com/problems/course-schedule-iii)ï¼ˆå›°éš¾ï¼‰ï¼›
6. ã€ŒåŠ›æ‰£ã€ç¬¬ 329 é¢˜ï¼š[çŸ©é˜µä¸­çš„æœ€é•¿é€’å¢è·¯å¾„](https://leetcode-cn.com/problems/longest-increasing-path-in-a-matrix)ï¼ˆå›°éš¾ï¼‰ï¼›
7. ã€ŒåŠ›æ‰£ã€ç¬¬ 1245 é¢˜ï¼š[æ ‘çš„ç›´å¾„](https://leetcode-cn.com/problems/tree-diameter)ï¼ˆä¸­ç­‰ï¼‰ï¼›
8. ã€ŒåŠ›æ‰£ã€ç¬¬ 444 é¢˜ï¼š[åºåˆ—é‡å»º](https://leetcode-cn.com/problems/sequence-reconstruction)ï¼ˆä¸­ç­‰ï¼‰ï¼›
9. ã€ŒåŠ›æ‰£ã€ç¬¬ 1136 é¢˜ï¼š[å¹³è¡Œè¯¾ç¨‹](https://leetcode-cn.com/problems/parallel-courses)ï¼ˆå›°éš¾ï¼‰ï¼›
10. ã€ŒåŠ›æ‰£ã€ç¬¬ 269 é¢˜ï¼š[ç«æ˜Ÿè¯å…¸](https://leetcode-cn.com/problems/alien-dictionary)ï¼ˆå›°éš¾ï¼‰ã€‚









## ç»Ÿè®¡ä¿¡æ¯
| é€šè¿‡æ¬¡æ•° | æäº¤æ¬¡æ•° | ACæ¯”ç‡ |
| :------: | :------: | :------: |
|    12257    |    19795    |   61.9%   |

## æäº¤å†å²
| æäº¤æ—¶é—´ | æäº¤ç»“æœ | æ‰§è¡Œæ—¶é—´ |  å†…å­˜æ¶ˆè€—  | è¯­è¨€ |
| :------: | :------: | :------: | :--------: | :--------: |
