---
title: 1289-ä¸‹é™è·¯å¾„æœ€å°å’Œ  II(Minimum Falling Path Sum II)
date: 2021-12-03 22:22:24
categories:
  - å›°éš¾
tags:
  - æ•°ç»„
  - åŠ¨æ€è§„åˆ’
  - çŸ©é˜µ
---

> åŸæ–‡é“¾æ¥: https://leetcode-cn.com/problems/minimum-falling-path-sum-ii


## è‹±æ–‡åŸæ–‡
<div><p>Given an <code>n x n</code> integer matrix <code>grid</code>, return <em>the minimum sum of a <strong>falling path with non-zero shifts</strong></em>.</p>

<p>A <strong>falling path with non-zero shifts</strong> is a choice of exactly one element from each row of <code>grid</code> such that no two elements chosen in adjacent rows are in the same column.</p>

<p>&nbsp;</p>
<p><strong>Example 1:</strong></p>
<img alt="" src="https://assets.leetcode.com/uploads/2021/08/10/falling-grid.jpg" style="width: 244px; height: 245px;" />
<pre>
<strong>Input:</strong> arr = [[1,2,3],[4,5,6],[7,8,9]]
<strong>Output:</strong> 13
<strong>Explanation:</strong> 
The possible falling paths are:
[1,5,9], [1,5,7], [1,6,7], [1,6,8],
[2,4,8], [2,4,9], [2,6,7], [2,6,8],
[3,4,8], [3,4,9], [3,5,7], [3,5,9]
The falling path with the smallest sum is&nbsp;[1,5,7], so the answer is&nbsp;13.
</pre>

<p><strong>Example 2:</strong></p>

<pre>
<strong>Input:</strong> grid = [[7]]
<strong>Output:</strong> 7
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>n == grid.length == grid[i].length</code></li>
	<li><code>1 &lt;= n &lt;= 200</code></li>
	<li><code>-99 &lt;= grid[i][j] &lt;= 99</code></li>
</ul>
</div>

## ä¸­æ–‡é¢˜ç›®
<div><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ–¹é˜µ&nbsp;<code>arr</code>&nbsp;ï¼Œå®šä¹‰ã€Œéé›¶åç§»ä¸‹é™è·¯å¾„ã€ä¸ºï¼šä»&nbsp;<code>arr</code> æ•°ç»„ä¸­çš„æ¯ä¸€è¡Œé€‰æ‹©ä¸€ä¸ªæ•°å­—ï¼Œä¸”æŒ‰é¡ºåºé€‰å‡ºæ¥çš„æ•°å­—ä¸­ï¼Œç›¸é‚»æ•°å­—ä¸åœ¨åŸæ•°ç»„çš„åŒä¸€åˆ—ã€‚</p>

<p>è¯·ä½ è¿”å›éé›¶åç§»ä¸‹é™è·¯å¾„æ•°å­—å’Œçš„æœ€å°å€¼ã€‚</p>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>arr = [[1,2,3],[4,5,6],[7,8,9]]
<strong>è¾“å‡ºï¼š</strong>13
<strong>è§£é‡Šï¼š</strong>
æ‰€æœ‰éé›¶åç§»ä¸‹é™è·¯å¾„åŒ…æ‹¬ï¼š
[1,5,9], [1,5,7], [1,6,7], [1,6,8],
[2,4,8], [2,4,9], [2,6,7], [2,6,8],
[3,4,8], [3,4,9], [3,5,7], [3,5,9]
ä¸‹é™è·¯å¾„ä¸­æ•°å­—å’Œæœ€å°çš„æ˜¯&nbsp;[1,5,7] ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯&nbsp;13 ã€‚
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>1 &lt;= arr.length == arr[i].length &lt;= 200</code></li>
	<li><code>-99 &lt;= arr[i][j] &lt;= 99</code></li>
</ul>
</div>

## é€šè¿‡ä»£ç 
<RecoDemo>
</RecoDemo>


## é«˜èµé¢˜è§£
## å‰è¨€

ä»Šå¤©æ˜¯æˆ‘ä»¬è®²è§£**åŠ¨æ€è§„åˆ’ä¸“é¢˜**ä¸­çš„ *[è·¯å¾„é—®é¢˜](https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzU4NDE3MTEyMA==&action=getalbum&album_id=1773144264147812354&scene=173&from_msgid=2247485319&from_itemidx=1&count=3#wechat_redirect) çš„ç¬¬å…­å¤©*ã€‚

æˆ‘åœ¨æ–‡ç« ç»“å°¾å¤„åˆ—ä¸¾äº†æˆ‘æ‰€æ•´ç†çš„å…³äº **è·¯å¾„é—®é¢˜** çš„ç›¸å…³é¢˜ç›®ã€‚

**è·¯å¾„é—®é¢˜** æˆ‘ä¼šæŒ‰ç…§ç¼–æ’å¥½çš„é¡ºåºè¿›è¡Œè®²è§£ï¼ˆä¸€å¤©ä¸€é“ï¼‰ã€‚

ä½ ä¹Ÿå…ˆå¯ä»¥å°è¯•åšåšï¼Œä¹Ÿæ¬¢è¿ä½ å‘æˆ‘ç•™è¨€è¡¥å……ï¼Œä½ è§‰å¾—ä¸è·¯å¾„ç›¸å…³çš„ DP ç±»å‹é¢˜ç›® ~ 

***

## åŠ¨æ€è§„åˆ’

æˆ‘ä»¬å·²ç»åšè¿‡å¥½å‡ é“ã€Œè·¯å¾„é—®é¢˜ã€äº†ã€‚

å‡­å€Ÿæˆ‘ä»¬çš„ç»éªŒï¼Œä¸€ä¸ªç›´è§‚çš„åšæ³•æ˜¯å®šä¹‰ $f[i][j]$ ä¸ºåˆ°è¾¾ä½ç½® $(i,j)$ çš„æœ€å°è·¯å¾„å’Œã€‚

é‚£ä¹ˆç­”æ¡ˆå¿…ç„¶æ˜¯æ‰€æœ‰çš„ $f[n - 1][i]$ ä¸­çš„æœ€å°å€¼ï¼Œi çš„å–å€¼èŒƒå›´ä¸º [0, n)ã€‚

ä»£è¡¨æœ€ä¼˜è·¯å¾„çš„æœ€åä¸€ä¸ªæ•°å¯èƒ½å–è‡ªæœ€åä¸€è¡Œçš„ä»»æ„ä¸‹æ ‡ã€‚

ç”±äºé¢˜ç›®è¦æ±‚æ¯ä¸€è¡Œçš„å–æ•°ï¼Œä¸èƒ½ä¸ä¸Šä¸€è¡Œçš„å–æ•°åˆ—ä¸‹æ ‡ç›¸åŒã€‚

ä¹Ÿå°±æ˜¯è§„å®šäº†æˆ‘ä»¬ä¸ºæ¯è¡Œè¿›è¡Œå–æ•°æ—¶ä¸èƒ½å–ã€Œæ­£ä¸Šæ–¹ã€çš„å€¼ã€‚

å› æ­¤æˆ‘ä»¬åœ¨è¿›è¡ŒçŠ¶æ€è½¬ç§»çš„æ—¶å€™ï¼Œéœ€è¦æšä¸¾ä¸Šä¸€è¡Œçš„æ‰€æœ‰åˆ—ä¸‹æ ‡ã€‚

è¿™æ ·çš„åšæ³•å¤æ‚åº¦æ˜¯ $O(n^3)$ï¼Œé¢˜ç›®èŒƒå›´ä¸º $10^2$ï¼Œå› æ­¤è®¡ç®—é‡ä¸º $10^6$ï¼Œå¯ä»¥è¿‡ã€‚

ä»£ç ï¼š
```Java []
class Solution {
    public int minFallingPathSum(int[][] arr) {
        int n = arr.length;
        int[][] f = new int[n][n];
        // åˆå§‹åŒ–é¦–è¡Œçš„è·¯å¾„å’Œ
        for (int i = 0; i < n; i++) f[0][i] = arr[0][i];
        // ä»ç¬¬ä¸€è¡Œè¿›è¡Œè½¬ç§»
        for (int i = 1; i < n; i++) {
            for (int j = 0; j < n; j++) {
                f[i][j] = Integer.MAX_VALUE;
                int val = arr[i][j];
                // æšä¸¾ä¸Šä¸€è¡Œçš„æ¯ä¸ªåˆ—ä¸‹æ ‡
                for (int p = 0; p < n; p++) {
                    // åªæœ‰åˆ—ä¸‹æ ‡ä¸åŒæ—¶ï¼Œæ‰èƒ½æ›´æ–°çŠ¶æ€
                    if (j != p) {
                        f[i][j] = Math.min(f[i][j], f[i-1][p] + val);
                    }
                }
            }
        }
        // åœ¨æ‰€æœ‰çš„ f[n - 1][i] ä¸­å–æœ€å°å€¼
        int ans = Integer.MAX_VALUE;
        for (int i = 0; i < n; i++) {
            ans = Math.min(ans, f[n-1][i]);
        }
        return ans;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n^3)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n^2)$

***

## åŠ¨æ€è§„åˆ’ï¼ˆè¿›é˜¶ï¼‰

é‚£ä¹ˆæ˜¯å¦æœ‰æ¯” $O(n^3)$ æ›´å¥½çš„åšæ³•å‘¢ï¼Ÿ

è¦çŸ¥é“æˆ‘ä»¬ä¸Šè¿°çš„è§£æ³•ï¼Œå½“æ•°æ®èŒƒå›´å‡ºåˆ° $10^3$ å°±ä¼šè¶…æ—¶äº†ã€‚

æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ä¸Šè¿°è§£æ³•æœ‰å“ªäº›å¯ä¼˜åŒ–çš„ç‚¹ï¼š

**1. DP çŠ¶æ€è½¬ç§»éƒ¨åˆ†ï¼Œå…±æœ‰ $n * n$ ä¸ªçŠ¶æ€éœ€è¦è½¬ç§»**

**2. æ¯æ¬¡è½¬ç§»çš„æ—¶å€™ï¼Œæšä¸¾ä¸Šä¸€è¡Œçš„æ‰€æœ‰åˆ—**

æˆ‘ä»¬è¦ç¡®ä¿æ‰€æœ‰çš„æ–¹æ¡ˆéƒ½æšä¸¾åˆ°ï¼Œå¾—åˆ°çš„æ‰æ˜¯å…¨å±€æœ€ä¼˜è§£ã€‚

å› æ­¤ DP éƒ¨åˆ†ï¼Œæˆ‘ä»¬æ˜¯æ— æ³•ä¼˜åŒ–çš„ã€‚

é‚£å°±åªå‰©ä¸‹**æšä¸¾ä¸Šä¸€è¡Œçš„æ‰€æœ‰åˆ—**è¿™ä¸ªéƒ¨åˆ†å¯ä»¥ä¼˜åŒ–äº†ã€‚

å…¶å®ç»†æƒ³å°±å¯ä»¥å‘ç°ï¼Œå½“æˆ‘ä»¬åœ¨è®¡ç®—æŸè¡Œçš„çŠ¶æ€å€¼çš„æ—¶å€™ï¼Œåªä¼šç”¨åˆ°ã€Œä¸Šä¸€è¡Œã€çš„ä¸¤ä¸ªå€¼:**æœ€å°å€¼**å’Œ**æ¬¡å°å€¼**ã€‚

ä¸¾ä¸ªğŸŒ°ï¼Œå½“æˆ‘ä»¬å·²ç»å¤„ç†å®Œç¬¬ $i-1$ è¡Œçš„çŠ¶æ€å€¼ã€‚

å‡è®¾ç¬¬ $i-1$ è¡ŒçŠ¶æ€ä¸­çš„æœ€å°å€¼å¯¹åº”çš„åˆ—ä¸‹æ ‡æ˜¯ $i1$ï¼Œæ¬¡å°å€¼å¯¹åº”çš„åˆ—ä¸‹æ ‡æ˜¯ $i2$ã€‚

é‚£ä¹ˆå½“æˆ‘ä»¬å¤„ç†ç¬¬ $i$ è¡Œæ—¶ï¼Œæ˜¾ç„¶æœ‰ï¼š

* å¤„ç†ç¬¬ $i$ è¡Œä¸­åˆ—ä¸‹æ ‡ä¸º $i1$ çš„çŠ¶æ€å€¼æ—¶ï¼Œç”±äºä¸èƒ½é€‰æ‹©ã€Œæ­£ä¸Šæ–¹ã€çš„æ•°å­—ï¼Œç”¨åˆ°çš„æ˜¯*æ¬¡å°å€¼*ã€‚è½¬ç§»æ–¹ç¨‹ä¸ºï¼š$f[i][j]=f[i-1][i2]+arr[i][j]$
* å¤„ç†ç¬¬ $i$ è¡Œå…¶ä»–åˆ—ä¸‹æ ‡çš„çŠ¶æ€å€¼æ—¶ï¼Œè¿™æ—¶å€™ç”¨åˆ°çš„æ˜¯*æœ€å°å€¼*ã€‚è½¬ç§»æ–¹ç¨‹ä¸ºï¼š$f[i][j]=f[i-1][i1]+arr[i][j]$

![](../images/minimum-falling-path-sum-ii-0.png)

å› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `i1` ä¿å­˜ä¸Šä¸€è¡Œçš„*æœ€å°å€¼*å¯¹åº”çš„åˆ—ä¸‹æ ‡ï¼Œç”¨ `i2` ä¿å­˜*æ¬¡å°å€¼*å¯¹åº”çš„åˆ—ä¸‹æ ‡ã€‚

è€Œæ— éœ€æ¯æ¬¡è½¬ç§»éƒ½æšä¸¾ä¸Šä¸€è¡Œçš„æ‰€æœ‰åˆ—ã€‚

ä»£ç ï¼š
```Java []
class Solution {
    int MAX = Integer.MAX_VALUE;
    public int minFallingPathSum(int[][] arr) {
        int n = arr.length;
        int[][] f = new int[n][n];
        
        // i1 ä»£è¡¨æœ€å°å€¼åˆ—ä¸‹æ ‡ï¼Œi2 ä»£è¡¨æ¬¡å°å€¼åˆ—ä¸‹æ ‡
        int i1 = -1, i2 = -1;
        
        // å…ˆè½¬ç§»ç¬¬ä¸€è¡Œ
        for (int i = 0; i < n; i++) {
        
            // æ›´æ–°åŠ¨è§„å€¼
            int val = arr[0][i];
            f[0][i] = val;
            
            // æ›´æ–° i1 å’Œ i2
            if (val < (i1 == -1 ? MAX : f[0][i1])) {
                i2 = i1;
                i1 = i;
            } else if (val < (i2 == -1 ? MAX : f[0][i2])) {
                i2 = i;
            }
        }
        
        // å†è½¬ç§»å‰©ä½™è¡Œ
        for (int i = 1; i < n; i++) {
        
            // å½“å‰è½¬ç§»ç¬¬ i è¡Œï¼Œä½¿ç”¨ä¸´æ—¶å˜é‡ä¿å­˜è½¬ç§»è¿‡ç¨‹ä¸­çš„ã€Œæœ€å°å€¼åˆ—ä¸‹æ ‡ã€&ã€Œæ¬¡å°å€¼åˆ—ä¸‹æ ‡ã€
            int ti1 = -1, ti2 = -1;
            
            for (int j = 0; j < n; j++) {
                f[i][j] = MAX;
                int val = arr[i][j];
                
                // æ›´æ–°åŠ¨è§„å€¼
                // å¯ä»¥é€‰æ‹©ã€Œæœ€å°å€¼ã€çš„åˆ—é€‰æ‹©ã€Œæœ€å°å€¼ã€
                if (j != i1) {
                    f[i][j] = f[i - 1][i1] + val;
                    
                // ä¸èƒ½é€‰æ‹©ã€Œæœ€å°å€¼ã€çš„åˆ—é€‰æ‹©ã€Œæ¬¡å°å€¼ã€
                } else {
                    f[i][j] = f[i - 1][i2] + val;
                }
                
                // æ›´æ–° ti1 å’Œ ti2
                if (f[i][j] < (ti1 == -1 ? MAX : f[i][ti1])) {
                    ti2 = ti1;
                    ti1 = j;
                } else if (f[i][j] < (ti2 == -1 ? MAX : f[i][ti2])) {
                    ti2 = j;
                }
            }
            
            // ä½¿ç”¨ä¸´æ—¶å˜é‡æ›´æ–° i1 å’Œ i2
            i1 = ti1; i2 = ti2;
        }
        int ans = Integer.MAX_VALUE;
        for (int i = 0; i < n; i++) {
            ans = Math.min(ans, f[n-1][i]);
        }
        return ans;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n^2)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n^2)$

***

## è·¯å¾„é—®é¢˜ï¼ˆç›®å½•ï¼‰

62.ä¸åŒè·¯å¾„ï¼ˆä¸­ç­‰ï¼‰ï¼š[è·¯å¾„é—®é¢˜ç¬¬ä¸€è®²](https://mp.weixin.qq.com/s/G_KYdjrhQQO43-t0Jw8iBA)

63.ä¸åŒè·¯å¾„ IIï¼ˆä¸­ç­‰ï¼‰ï¼š[è·¯å¾„é—®é¢˜ç¬¬äºŒè®²](https://mp.weixin.qq.com/s/YsBmrdeOXlsjOJGyNnDg4A)

64.æœ€å°è·¯å¾„å’Œï¼ˆä¸­ç­‰ï¼‰ï¼š[è·¯å¾„é—®é¢˜ç¬¬ä¸‰è®²](https://mp.weixin.qq.com/s/ud-eVofLnYAwNrWwyhEFhA)

120.ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œï¼ˆä¸­ç­‰ï¼‰ï¼š[è·¯å¾„é—®é¢˜ç¬¬å››è®²](https://mp.weixin.qq.com/s/o0e7EbMyDUle1DXgHLsG8A)

931.ä¸‹é™è·¯å¾„æœ€å°å’Œï¼ˆä¸­ç­‰ï¼‰ï¼š[è·¯å¾„é—®é¢˜ç¬¬äº”è®²](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247485163&idx=1&sn=ffe456777bcda52c036e6eb2181d1932&chksm=fd9cadf4caeb24e21a57ce47295a54ee9d591dfbb857549a57c145cdeeabf8c4324b007fc18b&token=1459317048&lang=zh_CN#rd)

1289.ä¸‹é™è·¯å¾„æœ€å°å’Œ IIï¼ˆå›°éš¾ï¼‰ï¼š[è·¯å¾„é—®é¢˜ç¬¬å…­è®²](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247485187&idx=1&sn=a07f67501aa696a79b1e85bb2860c0b2&chksm=fd9cac1ccaeb250a777f9334c0cd3bb0135dafa0007d6d0bbb5cf38e484773d3539fd776b2ea&token=1459317048&lang=zh_CN#rd)

1575.ç»Ÿè®¡æ‰€æœ‰å¯è¡Œè·¯å¾„ï¼ˆå›°éš¾ï¼‰ï¼š[è·¯å¾„é—®é¢˜ç¬¬ä¸ƒè®²](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247485297&idx=1&sn=5ee4ce31c42d368af0653f60aa263c82&chksm=fd9cac6ecaeb25787e6da90423c5467e1679da0a8aaf1a3445475199a8f148d8629e851fea57&token=1459317048&lang=zh_CN#rd)ï¼ˆè®°å¿†åŒ–æœç´¢ï¼‰

1575.ç»Ÿè®¡æ‰€æœ‰å¯è¡Œè·¯å¾„ï¼ˆå›°éš¾ï¼‰ï¼š[è·¯å¾„é—®é¢˜ç¬¬å…«è®²](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247485319&idx=1&sn=95a3dc9c97ca57185de792ca70924afe&chksm=fd9cac98caeb258ebea466f59378670a90af1cb3015ae70922e1d04ac711a5b8d8d853ac5e7d&token=677741617&lang=zh_CN#rd)ï¼ˆåŠ¨æ€è§„åˆ’ï¼‰

576.å‡ºç•Œçš„è·¯å¾„æ•°ï¼ˆä¸­ç­‰ï¼‰ï¼š[è·¯å¾„é—®é¢˜ç¬¬ä¹è®²](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247485426&idx=1&sn=071aec0bf5bc2e20c58f4cbb3dcb0fbc&chksm=fd9cacedcaeb25fb895cb99963dcfcde6b10268893a085eed4000b48bf070cecbdf7c81bf991&token=1934509949&lang=zh_CN#rd)

1301.æœ€å¤§å¾—åˆ†çš„è·¯å¾„æ•°ç›®ï¼ˆå›°éš¾ï¼‰ï¼š[è·¯å¾„é—®é¢˜ç¬¬åè®²](https://mp.weixin.qq.com/s/GpjnngbLVO-mdQjz53Wy9w)

æ¬¢è¿è¡¥å…… ~ 

***

## æœ€å

å¦‚æœæœ‰å¸®åŠ©åˆ°ä½ ï¼Œè¯·ç»™ä¸ªç‚¹èµå…³æ³¨ï¼Œè®©æ›´å¤šçš„äººçœ‹åˆ° ~ ("â–”â–¡â–”)/

ä¹Ÿæ¬¢è¿ä½  [å…³æ³¨æˆ‘](https://oscimg.oschina.net/oscnet/up-19688dc1af05cf8bdea43b2a863038ab9e5.png) å’Œ åŠ å…¥æˆ‘ä»¬çš„[ã€Œç»„é˜Ÿæ‰“å¡ã€](https://leetcode-cn.com/u/ac_oier/)å°ç¾¤ ï¼Œæä¾›å†™ã€Œè¯æ˜ã€&ã€Œæ€è·¯ã€çš„é«˜è´¨é‡é¢˜è§£

## ç»Ÿè®¡ä¿¡æ¯
| é€šè¿‡æ¬¡æ•° | æäº¤æ¬¡æ•° | ACæ¯”ç‡ |
| :------: | :------: | :------: |
|    7266    |    11655    |   62.3%   |

## æäº¤å†å²
| æäº¤æ—¶é—´ | æäº¤ç»“æœ | æ‰§è¡Œæ—¶é—´ |  å†…å­˜æ¶ˆè€—  | è¯­è¨€ |
| :------: | :------: | :------: | :--------: | :--------: |
