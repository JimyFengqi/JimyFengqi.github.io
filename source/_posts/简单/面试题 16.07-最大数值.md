---
title: é¢è¯•é¢˜ 16.07-æœ€å¤§æ•°å€¼(Maximum LCCI)
categories:
  - ç®€å•
tags:
  - ä½è¿ç®—
  - è„‘ç­‹æ€¥è½¬å¼¯
  - æ•°å­¦
abbrlink: 239545615
date: 2021-12-03 21:36:11
---

> åŸæ–‡é“¾æ¥: https://leetcode-cn.com/problems/maximum-lcci


## è‹±æ–‡åŸæ–‡
<div><p>Write a method that finds the maximum of two numbers. You should not use if-else or any other comparison operator.</p>

<p><strong>Example: </strong></p>

<pre>
<strong>Input: </strong> a = 1, b = 2
<strong>Output: </strong> 2
</pre>
</div>

## ä¸­æ–‡é¢˜ç›®
<div><p>ç¼–å†™ä¸€ä¸ªæ–¹æ³•ï¼Œæ‰¾å‡ºä¸¤ä¸ªæ•°å­—<code>a</code>å’Œ<code>b</code>ä¸­æœ€å¤§çš„é‚£ä¸€ä¸ªã€‚ä¸å¾—ä½¿ç”¨if-elseæˆ–å…¶ä»–æ¯”è¾ƒè¿ç®—ç¬¦ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><strong>è¾“å…¥ï¼š</strong> a = 1, b = 2
<strong>è¾“å‡ºï¼š</strong> 2
</pre>
</div>

## é€šè¿‡ä»£ç 
<RecoDemo>
</RecoDemo>


## é«˜èµé¢˜è§£
### è§£é‡Š
> æ—¢ç„¶é¢˜ç›®æåˆ°ï¼š**ä¸å¾—ä½¿ç”¨if-elseæˆ–å…¶ä»–æ¯”è¾ƒè¿ç®—ç¬¦**ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿå°½å¯èƒ½å›é¿absã€maxè¿™äº›å‡½æ•°ï¼Œå› ä¸ºå…¶å†…éƒ¨å¯èƒ½è°ƒç”¨æ¯”è¾ƒäº†è¿ç®—ç¬¦ã€‚

### æ€è·¯
æœ¬è´¨æ˜¯**å¹³å‡å€¼æ³•**ï¼š `max(a, b) = ((a + b) + abs(a - b)) / 2`ã€‚

### ç»å¯¹å€¼çš„ä½è¿ç®— 
> ä¸ºäº†å›é¿`abs`ï¼Œåˆ©ç”¨ä½è¿ç®—å®ç°ç»å¯¹å€¼åŠŸèƒ½ã€‚
> ä»¥`int8_t`ä¸ºä¾‹ï¼šåˆ†æè¿ç®—ï¼š`(var ^ (var >> 7)) - (var >> 7)`

- **var >= 0:** `var >> 7 => 0x00`ï¼Œå³ï¼š`(var ^ 0x00) - 0x00`ï¼Œå¼‚æˆ–ç»“æœä¸º`var`

- **var < 0:** `var >> 7 => 0xFF`ï¼Œå³ï¼š`(var ^ 0xFF) - 0xFF`ï¼Œ`var ^ 0xFF`æ˜¯åœ¨å¯¹varçš„å…¨éƒ¨ä½å–åï¼Œ`-0xFF <=> +1`, å¯¹`signed int`å–ååŠ ä¸€å°±æ˜¯å–å…¶**ç›¸åæ•°**ã€‚

ä¸¾ä¸ªæ —å­ğŸŒ°ï¼š`var = -3 <=> 0xFD`ï¼Œ`(var ^ 0xFF) - 0xFF= 0x02 - 0xff= 0x03`
>
> åŸºäºä¸Šè¿°åˆ†æï¼š
> ç±»å‹ | ç»å¯¹å€¼ä½è¿ç®—
> -|-
> int8_t | (var ^ (var >> 7)) - (var >> 7)
> int16_t | (var ^ (var >> 15)) - (var >> 15)
> int32_t | (var ^ (var >> 31)) - (var >> 31)
> int64_t | (var ^ (var >> 63)) - (var >> 63)
>
ä»£ç ä¸­`(_diff ^ (_diff >> 63)) - (_diff >> 63)`å°±æ˜¯åœ¨æ±‚å–`long (int64_t)`çš„ç»å¯¹å€¼ã€‚

### ä»£ç 
```cpp
class Solution {
public:
    int maximum(int a, int b) {
        long _sum = long(a) + long(b);
        long _diff = long(a) - long(b);
        long _abs_diff = (_diff ^ (_diff >> 63)) - (_diff >> 63);
        return (_sum + _abs_diff) / 2;
    }
};
```

## ç»Ÿè®¡ä¿¡æ¯
| é€šè¿‡æ¬¡æ•° | æäº¤æ¬¡æ•° | ACæ¯”ç‡ |
| :------: | :------: | :------: |
|    20668    |    28185    |   73.3%   |

## æäº¤å†å²
| æäº¤æ—¶é—´ | æäº¤ç»“æœ | æ‰§è¡Œæ—¶é—´ |  å†…å­˜æ¶ˆè€—  | è¯­è¨€ |
| :------: | :------: | :------: | :--------: | :--------: |
